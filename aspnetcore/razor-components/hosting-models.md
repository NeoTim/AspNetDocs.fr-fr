---
title: Composants de Razor modèles d’hébergement
author: guardrex
description: Comprendre les Blazor côté client et côté serveur ASP.NET Core Razor composants, modèles d’hébergement.
monikerRange: '>= aspnetcore-3.0'
ms.author: riande
ms.custom: mvc
ms.date: 01/29/2019
uid: razor-components/hosting-models
ms.openlocfilehash: d1e0c472d7d10eeb4cef0da735cf703c98dd1645
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/01/2019
ms.locfileid: "57042436"
---
# <a name="razor-components-hosting-models"></a><span data-ttu-id="b593f-103">Composants de Razor modèles d’hébergement</span><span class="sxs-lookup"><span data-stu-id="b593f-103">Razor Components hosting models</span></span>

<span data-ttu-id="b593f-104">Par [Daniel Roth](https://github.com/danroth27)</span><span class="sxs-lookup"><span data-stu-id="b593f-104">By [Daniel Roth](https://github.com/danroth27)</span></span>

<span data-ttu-id="b593f-105">Composants de Razor est une infrastructure web conçue pour s’exécuter côté client dans le navigateur sur un runtime .NET basé sur WebAssembly (*Blazor*) ou côté serveur dans ASP.NET Core (*ASP.NET Core Razor composants*).</span><span class="sxs-lookup"><span data-stu-id="b593f-105">Razor Components is a web framework designed to run client-side in the browser on a WebAssembly-based .NET runtime (*Blazor*) or server-side in ASP.NET Core (*ASP.NET Core Razor Components*).</span></span> <span data-ttu-id="b593f-106">Quel que soit les modèles d’hébergement modèle, l’application et le composant *restent les mêmes*.</span><span class="sxs-lookup"><span data-stu-id="b593f-106">Regardless of the hosting model, the app and component models *remain the same*.</span></span> <span data-ttu-id="b593f-107">Cet article décrit les modèles d’hébergement disponibles.</span><span class="sxs-lookup"><span data-stu-id="b593f-107">This article discusses the available hosting models.</span></span>

## <a name="client-side-hosting-model"></a><span data-ttu-id="b593f-108">Modèle d’hébergement côté client</span><span class="sxs-lookup"><span data-stu-id="b593f-108">Client-side hosting model</span></span>

[!INCLUDE[](~/includes/razor-components-preview-notice.md)]

<span data-ttu-id="b593f-109">Le modèle d’hébergement principal pour Blazor est en cours d’exécution côté client dans le navigateur.</span><span class="sxs-lookup"><span data-stu-id="b593f-109">The principal hosting model for Blazor is running client-side in the browser.</span></span> <span data-ttu-id="b593f-110">Dans ce modèle, l’application Blazor, ses dépendances et le runtime .NET sont téléchargés sur le navigateur.</span><span class="sxs-lookup"><span data-stu-id="b593f-110">In this model, the Blazor app, its dependencies, and the .NET runtime are downloaded to the browser.</span></span> <span data-ttu-id="b593f-111">L’application est exécutée directement sur le thread d’interface utilisateur du navigateur.</span><span class="sxs-lookup"><span data-stu-id="b593f-111">The app is executed directly on the browser UI thread.</span></span> <span data-ttu-id="b593f-112">Toutes les mises à jour de l’interface utilisateur et la gestion des événements se produisent dans le même processus.</span><span class="sxs-lookup"><span data-stu-id="b593f-112">All UI updates and event handling happens within the same process.</span></span> <span data-ttu-id="b593f-113">Les ressources de l’application peuvent être déployés en tant que fichiers statiques à l’aide de tout type de serveur est par défaut (consultez [hôte et déployer](xref:host-and-deploy/razor-components/index)).</span><span class="sxs-lookup"><span data-stu-id="b593f-113">The app assets can be deployed as static files using whatever web server is preferred (see [Host and deploy](xref:host-and-deploy/razor-components/index)).</span></span>

![Blazor côté client : L’application Blazor s’exécute sur un thread d’interface utilisateur dans le navigateur.](hosting-models/_static/client-side.png)

<span data-ttu-id="b593f-115">Pour créer une application de Blazor en utilisant le modèle d’hébergement côté client, utilisez le **Blazor** ou **Blazor (ASP.NET Core hébergées)** modèles de projet (`blazor` ou `blazorhosted` modèle lors de l’utilisation de la [dotnet nouvelle](/dotnet/core/tools/dotnet-new) à une invite de commande).</span><span class="sxs-lookup"><span data-stu-id="b593f-115">To create a Blazor app using the client-side hosting model, use the **Blazor** or **Blazor (ASP.NET Core Hosted)** project templates (`blazor` or `blazorhosted` template when using the [dotnet new](/dotnet/core/tools/dotnet-new) command at a command prompt).</span></span> <span data-ttu-id="b593f-116">Les éléments inclus *blazor.webassembly.js* descripteurs de script :</span><span class="sxs-lookup"><span data-stu-id="b593f-116">The included *blazor.webassembly.js* script handles:</span></span>

* <span data-ttu-id="b593f-117">Téléchargement du runtime .NET, l’application et ses dépendances.</span><span class="sxs-lookup"><span data-stu-id="b593f-117">Downloading the .NET runtime, the app, and its dependencies.</span></span>
* <span data-ttu-id="b593f-118">Initialisation du runtime pour exécuter l’application.</span><span class="sxs-lookup"><span data-stu-id="b593f-118">Initialization of the runtime to run the app.</span></span>

<span data-ttu-id="b593f-119">Le modèle d’hébergement côté client offre les avantages suivants.</span><span class="sxs-lookup"><span data-stu-id="b593f-119">The client-side hosting model offers several benefits.</span></span> <span data-ttu-id="b593f-120">Côté client Blazor :</span><span class="sxs-lookup"><span data-stu-id="b593f-120">Client-side Blazor:</span></span>

* <span data-ttu-id="b593f-121">N’a aucune dépendance de côté serveur .NET.</span><span class="sxs-lookup"><span data-stu-id="b593f-121">Has no .NET server-side dependency.</span></span>
* <span data-ttu-id="b593f-122">A une interface utilisateur interactive riche.</span><span class="sxs-lookup"><span data-stu-id="b593f-122">Has a rich interactive UI.</span></span>
* <span data-ttu-id="b593f-123">Entièrement tire parti des fonctionnalités et les ressources client.</span><span class="sxs-lookup"><span data-stu-id="b593f-123">Fully leverages client resources and capabilities.</span></span>
* <span data-ttu-id="b593f-124">Déchargements fonctionnent à partir du serveur au client.</span><span class="sxs-lookup"><span data-stu-id="b593f-124">Offloads work from the server to the client.</span></span>
* <span data-ttu-id="b593f-125">Prend en charge les scénarios hors connexion.</span><span class="sxs-lookup"><span data-stu-id="b593f-125">Supports offline scenarios.</span></span>

<span data-ttu-id="b593f-126">Il existe des inconvénients à l’hébergement du côté client.</span><span class="sxs-lookup"><span data-stu-id="b593f-126">There are downsides to client-side hosting.</span></span> <span data-ttu-id="b593f-127">Côté client Blazor :</span><span class="sxs-lookup"><span data-stu-id="b593f-127">Client-side Blazor:</span></span>

* <span data-ttu-id="b593f-128">Restreint l’application aux fonctionnalités du navigateur.</span><span class="sxs-lookup"><span data-stu-id="b593f-128">Restricts the app to the capabilities of the browser.</span></span>
* <span data-ttu-id="b593f-129">Nécessite le matériel capable de client et logiciels (par exemple, WebAssembly de prise en charge).</span><span class="sxs-lookup"><span data-stu-id="b593f-129">Requires capable client hardware and software (for example, WebAssembly support).</span></span>
* <span data-ttu-id="b593f-130">A une plus grande taille de téléchargement et l’application plue le temps de chargement.</span><span class="sxs-lookup"><span data-stu-id="b593f-130">Has a larger download size and longer app load time.</span></span>
* <span data-ttu-id="b593f-131">A moins de maturité runtime .NET et les outils de prise en charge (par exemple, les limitations de prise en charge .NET Standard et le débogage).</span><span class="sxs-lookup"><span data-stu-id="b593f-131">Has less mature .NET runtime and tooling support (for example, limitations in .NET Standard support and debugging).</span></span>

<span data-ttu-id="b593f-132">Visual Studio inclut la **Blazor (ASP.NET Core hébergée)** modèle de projet pour la création d’une application Blazor qui s’exécute sur WebAssembly et qui est hébergée sur un serveur d’ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="b593f-132">Visual Studio includes the **Blazor (ASP.NET Core hosted)** project template for creating a Blazor app that runs on WebAssembly and is hosted on an ASP.NET Core server.</span></span> <span data-ttu-id="b593f-133">L’application ASP.NET Core sert l’application Blazor aux clients, mais il est un processus distinct.</span><span class="sxs-lookup"><span data-stu-id="b593f-133">The ASP.NET Core app serves the Blazor app to clients but is otherwise a separate process.</span></span> <span data-ttu-id="b593f-134">L’application de Blazor côté client peut interagir avec le serveur sur le réseau à l’aide d’appels d’API Web ou les connexions SignalR.</span><span class="sxs-lookup"><span data-stu-id="b593f-134">The client-side Blazor app can interact with the server over the network using Web API calls or SignalR connections.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="b593f-135">Si une application de Blazor côté client est pris en charge par une application ASP.NET Core hébergée comme une sous-application IIS, désactivez le Gestionnaire de Module ASP.NET Core hérité.</span><span class="sxs-lookup"><span data-stu-id="b593f-135">If a client-side Blazor app is served by an ASP.NET Core app hosted as an IIS sub-app, disable the inherited ASP.NET Core Module handler.</span></span> <span data-ttu-id="b593f-136">Définir le chemin de base d’application dans l’application Blazor *index.html* fichier à l’alias IIS utilisé lors de la configuration de la sous-application dans IIS.</span><span class="sxs-lookup"><span data-stu-id="b593f-136">Set the app base path in the Blazor app's *index.html* file to the IIS alias used when configuring the sub-app in IIS.</span></span>
>
> <span data-ttu-id="b593f-137">Pour plus d’informations, consultez [chemin de base d’application](xref:host-and-deploy/razor-components/index#app-base-path).</span><span class="sxs-lookup"><span data-stu-id="b593f-137">For more information, see [App base path](xref:host-and-deploy/razor-components/index#app-base-path).</span></span>

## <a name="server-side-hosting-model"></a><span data-ttu-id="b593f-138">Modèle d’hébergement côté serveur</span><span class="sxs-lookup"><span data-stu-id="b593f-138">Server-side hosting model</span></span>

<span data-ttu-id="b593f-139">Dans le modèle d’hébergement ASP.NET Core Razor composants côté serveur, l’application est exécutée sur le serveur à partir d’une application ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="b593f-139">In the ASP.NET Core Razor Components server-side hosting model, the app is executed on the server from within an ASP.NET Core app.</span></span> <span data-ttu-id="b593f-140">Les mises à jour de l’interface utilisateur, la gestion des événements et les appels JavaScript sont gérés par le biais d’une connexion SignalR.</span><span class="sxs-lookup"><span data-stu-id="b593f-140">UI updates, event handling, and JavaScript calls are handled over a SignalR connection.</span></span>

![ASP.NET Core Razor composants côté serveur : Le navigateur interagit avec l’application (hébergée à l’intérieur d’une application ASP.NET Core) sur le serveur via une connexion SignalR.](hosting-models/_static/server-side.png)

<span data-ttu-id="b593f-142">Pour créer une application de composants de Razor en utilisant le modèle d’hébergement côté serveur, utilisez le **Blazor (côté serveur dans ASP.NET Core)** modèle (`blazorserver` lors de l’utilisation [dotnet nouvelle](/dotnet/core/tools/dotnet-new) à une invite de commandes).</span><span class="sxs-lookup"><span data-stu-id="b593f-142">To create a Razor Components app using the server-side hosting model, use the **Blazor (Server-side in ASP.NET Core)** template (`blazorserver` when using [dotnet new](/dotnet/core/tools/dotnet-new) at a command prompt).</span></span> <span data-ttu-id="b593f-143">Une application ASP.NET Core héberge l’application côté serveur de composants de Razor et configure le point de terminaison SignalR où les clients se connectent.</span><span class="sxs-lookup"><span data-stu-id="b593f-143">An ASP.NET Core app hosts the Razor Components server-side app and sets up the SignalR endpoint where clients connect.</span></span> <span data-ttu-id="b593f-144">L’application fait référence à l’application ASP.NET Core `Startup` classe à ajouter :</span><span class="sxs-lookup"><span data-stu-id="b593f-144">The ASP.NET Core app references the app's `Startup` class to add:</span></span>

* <span data-ttu-id="b593f-145">Services de composants de Razor côté serveur.</span><span class="sxs-lookup"><span data-stu-id="b593f-145">Server-side Razor Components services.</span></span>
* <span data-ttu-id="b593f-146">L’application pour le pipeline de traitement des requêtes.</span><span class="sxs-lookup"><span data-stu-id="b593f-146">The app to the request handling pipeline.</span></span>

[!code-csharp[](hosting-models/samples_snapshot/Startup.cs?highlight=5,27)]

<span data-ttu-id="b593f-147">Le *blazor.server.js* script&dagger; établit la connexion cliente.</span><span class="sxs-lookup"><span data-stu-id="b593f-147">The *blazor.server.js* script&dagger; establishes the client connection.</span></span> <span data-ttu-id="b593f-148">Il est responsable de l’application pour rendre persistantes et restaurer l’état de l’application en fonction des besoins (par exemple, en cas d’une connexion réseau perdues).</span><span class="sxs-lookup"><span data-stu-id="b593f-148">It's the app's responsibility to persist and restore app state as required (for example, in the event of a lost network connection).</span></span>

<span data-ttu-id="b593f-149">Le modèle d’hébergement côté serveur offre les avantages suivants :</span><span class="sxs-lookup"><span data-stu-id="b593f-149">The server-side hosting model offers several benefits:</span></span>

* <span data-ttu-id="b593f-150">Vous permet d’écrire votre application entière avec .NET et C# à l’aide du modèle du composant.</span><span class="sxs-lookup"><span data-stu-id="b593f-150">Allows you to write your entire app with .NET and C# using the component model.</span></span>
* <span data-ttu-id="b593f-151">Fournit un aperçu interactif rich et évite les actualisations de la page inutiles.</span><span class="sxs-lookup"><span data-stu-id="b593f-151">Provides a rich interactive feel and avoids unnecessary page refreshes.</span></span>
* <span data-ttu-id="b593f-152">A une taille d’application considérablement inférieure à une application de Blazor côté client et se charge plus rapidement.</span><span class="sxs-lookup"><span data-stu-id="b593f-152">Has a significantly smaller app size than a client-side Blazor app and loads much faster.</span></span>
* <span data-ttu-id="b593f-153">Logique de composant permettre tirer pleinement parti des fonctionnalités de serveur, notamment l’utilisation des API compatibles de .NET Core.</span><span class="sxs-lookup"><span data-stu-id="b593f-153">Component logic can take full advantage of server capabilities, including using any .NET Core compatible APIs.</span></span>
* <span data-ttu-id="b593f-154">S’exécute sur .NET Core sur le serveur, .NET existantes des outils, telles que le débogage, fonctionne comme prévu.</span><span class="sxs-lookup"><span data-stu-id="b593f-154">Runs on .NET Core on the server, so existing .NET tooling, such as debugging, works as expected.</span></span>
* <span data-ttu-id="b593f-155">Fonctionne avec les clients légers (par exemple, les navigateurs qui ne prennent pas en charge le WebAssembly et ressources limité des appareils).</span><span class="sxs-lookup"><span data-stu-id="b593f-155">Works with thin clients (for example, browsers that don't support WebAssembly and resource constrained devices).</span></span>

<span data-ttu-id="b593f-156">Il existe des inconvénients à l’hébergement du côté serveur :</span><span class="sxs-lookup"><span data-stu-id="b593f-156">There are downsides to server-side hosting:</span></span>

* <span data-ttu-id="b593f-157">A une latence plus élevée : Chaque interaction utilisateur implique un tronçon réseau.</span><span class="sxs-lookup"><span data-stu-id="b593f-157">Has higher latency: Every user interaction involves a network hop.</span></span>
* <span data-ttu-id="b593f-158">N’offre aucune prise en charge hors connexion : Si la connexion du client échoue, l’application cesse de fonctionner.</span><span class="sxs-lookup"><span data-stu-id="b593f-158">Offers no offline support: If the client connection fails, the app stops working.</span></span>
* <span data-ttu-id="b593f-159">A réduit l’évolutivité : Le serveur doit gérer plusieurs connexions de client et gérer l’état du client.</span><span class="sxs-lookup"><span data-stu-id="b593f-159">Has reduced scalability: The server must manage multiple client connections and handle client state.</span></span>
* <span data-ttu-id="b593f-160">Nécessite un serveur d’ASP.NET Core pour servir de l’application.</span><span class="sxs-lookup"><span data-stu-id="b593f-160">Requires an ASP.NET Core server to serve the app.</span></span> <span data-ttu-id="b593f-161">Déploiement sans serveur (par exemple, à partir d’un CDN) n’est pas possible.</span><span class="sxs-lookup"><span data-stu-id="b593f-161">Deployment without a server (for example, from a CDN) isn't possible.</span></span>

<span data-ttu-id="b593f-162">&dagger;Le *blazor.server.js* script est publié dans le chemin d’accès suivant : *bin / {déboguer | Mise en production} / {FRAMEWORK cible} /publish/ {nom de l’APPLICATION}. Dist/application/_framework*.</span><span class="sxs-lookup"><span data-stu-id="b593f-162">&dagger;The *blazor.server.js* script is published to the following path: *bin/{Debug|Release}/{TARGET FRAMEWORK}/publish/{APPLICATION NAME}.App/dist/_framework*.</span></span>

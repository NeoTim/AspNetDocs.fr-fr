---
title: Intégration continue et déploiement - DevOps avec ASP.NET Core et Azure
author: CamSoper
description: Intégration continue et le déploiement dans DevOps avec ASP.NET Core et Azure
ms.author: scaddie
ms.date: 10/24/2018
ms.custom: seodec18
uid: azure/devops/cicd
ms.openlocfilehash: e5bddde41291c9573f58d749bbf830de9ea9319d
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/01/2019
ms.locfileid: "57039326"
---
# <a name="continuous-integration-and-deployment"></a><span data-ttu-id="631a1-103">Intégration et déploiement continus</span><span class="sxs-lookup"><span data-stu-id="631a1-103">Continuous integration and deployment</span></span>

<span data-ttu-id="631a1-104">Dans le chapitre précédent, vous avez créé un référentiel Git local pour l’application de lecteur de flux Simple.</span><span class="sxs-lookup"><span data-stu-id="631a1-104">In the previous chapter, you created a local Git repository for the Simple Feed Reader app.</span></span> <span data-ttu-id="631a1-105">Dans ce chapitre, vous allez publier ce code à un référentiel GitHub et construire un pipeline Azure DevOps Services à l’aide de Pipelines d’Azure.</span><span class="sxs-lookup"><span data-stu-id="631a1-105">In this chapter, you'll publish that code to a GitHub repository and construct an Azure DevOps Services pipeline using Azure Pipelines.</span></span> <span data-ttu-id="631a1-106">Le pipeline permet des déploiements de l’application et des builds continus.</span><span class="sxs-lookup"><span data-stu-id="631a1-106">The pipeline enables continuous builds and deployments of the app.</span></span> <span data-ttu-id="631a1-107">Toute validation vers le dépôt GitHub déclenche une build et un déploiement vers l’emplacement intermédiaire de l’application Web Azure.</span><span class="sxs-lookup"><span data-stu-id="631a1-107">Any commit to the GitHub repository triggers a build and a deployment to the Azure Web App's staging slot.</span></span>

<span data-ttu-id="631a1-108">Dans cette section, vous allez effectuer les tâches suivantes :</span><span class="sxs-lookup"><span data-stu-id="631a1-108">In this section, you'll complete the following tasks:</span></span>

* <span data-ttu-id="631a1-109">Publier du code de l’application sur GitHub</span><span class="sxs-lookup"><span data-stu-id="631a1-109">Publish the app's code to GitHub</span></span>
* <span data-ttu-id="631a1-110">Déconnecter le déploiement Git local</span><span class="sxs-lookup"><span data-stu-id="631a1-110">Disconnect local Git deployment</span></span>
* <span data-ttu-id="631a1-111">Création d’une organisation Azure DevOps</span><span class="sxs-lookup"><span data-stu-id="631a1-111">Create an Azure DevOps organization</span></span>
* <span data-ttu-id="631a1-112">Créer un projet d’équipe dans les Services Azure DevOps</span><span class="sxs-lookup"><span data-stu-id="631a1-112">Create a team project in Azure DevOps Services</span></span>
* <span data-ttu-id="631a1-113">Créer une définition de build</span><span class="sxs-lookup"><span data-stu-id="631a1-113">Create a build definition</span></span>
* <span data-ttu-id="631a1-114">Créer un pipeline de mise en production</span><span class="sxs-lookup"><span data-stu-id="631a1-114">Create a release pipeline</span></span>
* <span data-ttu-id="631a1-115">Valider les modifications à GitHub et déployer automatiquement vers Azure</span><span class="sxs-lookup"><span data-stu-id="631a1-115">Commit changes to GitHub and automatically deploy to Azure</span></span>
* <span data-ttu-id="631a1-116">Examiner le pipeline de Pipelines d’Azure</span><span class="sxs-lookup"><span data-stu-id="631a1-116">Examine the Azure Pipelines pipeline</span></span>

## <a name="publish-the-apps-code-to-github"></a><span data-ttu-id="631a1-117">Publier du code de l’application sur GitHub</span><span class="sxs-lookup"><span data-stu-id="631a1-117">Publish the app's code to GitHub</span></span>

1. <span data-ttu-id="631a1-118">Ouvrez une fenêtre de navigateur et accédez à `https://github.com`.</span><span class="sxs-lookup"><span data-stu-id="631a1-118">Open a browser window, and navigate to `https://github.com`.</span></span>
1. <span data-ttu-id="631a1-119">Cliquez sur le **+** dans l’en-tête de liste déroulante, puis sélectionnez **nouveau référentiel**:</span><span class="sxs-lookup"><span data-stu-id="631a1-119">Click the **+** drop-down in the header, and select **New repository**:</span></span>

    ![Option de référentiel GitHub](media/cicd/github-new-repo.png)

1. <span data-ttu-id="631a1-121">Sélectionnez votre compte dans le **propriétaire** liste déroulante, puis entrez *lecture de flux simple* dans le **nom du référentiel** zone de texte.</span><span class="sxs-lookup"><span data-stu-id="631a1-121">Select your account in the **Owner** drop-down, and enter *simple-feed-reader* in the **Repository name** textbox.</span></span>
1. <span data-ttu-id="631a1-122">Cliquez sur le **créer référentiel** bouton.</span><span class="sxs-lookup"><span data-stu-id="631a1-122">Click the **Create repository** button.</span></span>
1. <span data-ttu-id="631a1-123">Ouvrez l’interface de commande de votre ordinateur local.</span><span class="sxs-lookup"><span data-stu-id="631a1-123">Open your local machine's command shell.</span></span> <span data-ttu-id="631a1-124">Accédez au répertoire dans lequel le *lecture de flux simple* référentiel Git est stocké.</span><span class="sxs-lookup"><span data-stu-id="631a1-124">Navigate to the directory in which the *simple-feed-reader* Git repository is stored.</span></span>
1. <span data-ttu-id="631a1-125">Renommez les fichiers *origine* distant à *en amont*.</span><span class="sxs-lookup"><span data-stu-id="631a1-125">Rename the existing *origin* remote to *upstream*.</span></span> <span data-ttu-id="631a1-126">Exécutez la commande suivante :</span><span class="sxs-lookup"><span data-stu-id="631a1-126">Execute the following command:</span></span>
    ```console
    git remote rename origin upstream
    ```
1. <span data-ttu-id="631a1-127">Ajouter un nouveau *origine* distant qui pointe vers votre copie du référentiel sur GitHub.</span><span class="sxs-lookup"><span data-stu-id="631a1-127">Add a new *origin* remote pointing to your copy of the repository on GitHub.</span></span> <span data-ttu-id="631a1-128">Exécutez la commande suivante :</span><span class="sxs-lookup"><span data-stu-id="631a1-128">Execute the following command:</span></span>
    ```console
    git remote add origin https://github.com/<GitHub_username>/simple-feed-reader/
    ```
1. <span data-ttu-id="631a1-129">Publier votre référentiel Git local vers le dépôt GitHub nouvellement créé.</span><span class="sxs-lookup"><span data-stu-id="631a1-129">Publish your local Git repository to the newly created GitHub repository.</span></span> <span data-ttu-id="631a1-130">Exécutez la commande suivante :</span><span class="sxs-lookup"><span data-stu-id="631a1-130">Execute the following command:</span></span>
    ```console
    git push -u origin master
    ```
1. <span data-ttu-id="631a1-131">Ouvrez une fenêtre de navigateur et accédez à `https://github.com/<GitHub_username>/simple-feed-reader/`.</span><span class="sxs-lookup"><span data-stu-id="631a1-131">Open a browser window, and navigate to `https://github.com/<GitHub_username>/simple-feed-reader/`.</span></span> <span data-ttu-id="631a1-132">Vérifiez que votre code s’affiche dans le référentiel GitHub.</span><span class="sxs-lookup"><span data-stu-id="631a1-132">Validate that your code appears in the GitHub repository.</span></span>

## <a name="disconnect-local-git-deployment"></a><span data-ttu-id="631a1-133">Déconnecter le déploiement Git local</span><span class="sxs-lookup"><span data-stu-id="631a1-133">Disconnect local Git deployment</span></span>

<span data-ttu-id="631a1-134">Supprimer le déploiement Git local en procédant comme suit.</span><span class="sxs-lookup"><span data-stu-id="631a1-134">Remove the local Git deployment with the following steps.</span></span> <span data-ttu-id="631a1-135">Les Pipelines Azure (un service Azure DevOps) à la fois remplace et étend cette fonctionnalité.</span><span class="sxs-lookup"><span data-stu-id="631a1-135">Azure Pipelines (an Azure DevOps service) both replaces and augments that functionality.</span></span>

1. <span data-ttu-id="631a1-136">Ouvrir le [portail Azure](https://portal.azure.com/)et accédez à la *intermédiaire (mywebapp\<unique_number\>/intermédiaire)* application Web.</span><span class="sxs-lookup"><span data-stu-id="631a1-136">Open the [Azure portal](https://portal.azure.com/), and navigate to the *staging (mywebapp\<unique_number\>/staging)* Web App.</span></span> <span data-ttu-id="631a1-137">L’application Web peut se trouver rapidement en entrant *intermédiaire* dans la zone de recherche du portail :</span><span class="sxs-lookup"><span data-stu-id="631a1-137">The Web App can be quickly located by entering *staging* in the portal's search box:</span></span>

    ![terme de recherche application Web intermédiaire](media/cicd/portal-search-box.png)

1. <span data-ttu-id="631a1-139">Cliquez sur **options de déploiement**.</span><span class="sxs-lookup"><span data-stu-id="631a1-139">Click **Deployment options**.</span></span> <span data-ttu-id="631a1-140">Un nouveau panneau s’affiche.</span><span class="sxs-lookup"><span data-stu-id="631a1-140">A new panel appears.</span></span> <span data-ttu-id="631a1-141">Cliquez sur **déconnexion** pour supprimer la configuration de contrôle d’une source de Git locale qui a été ajoutée dans le chapitre précédent.</span><span class="sxs-lookup"><span data-stu-id="631a1-141">Click **Disconnect** to remove the local Git source control configuration that was added in the previous chapter.</span></span> <span data-ttu-id="631a1-142">Confirmer l’opération de suppression en cliquant sur le **Oui** bouton.</span><span class="sxs-lookup"><span data-stu-id="631a1-142">Confirm the removal operation by clicking the **Yes** button.</span></span>
1. <span data-ttu-id="631a1-143">Accédez à la *mywebapp < unique_number >* App Service.</span><span class="sxs-lookup"><span data-stu-id="631a1-143">Navigate to the *mywebapp<unique_number>* App Service.</span></span> <span data-ttu-id="631a1-144">En guise de rappel, zone de recherche du portail peut être utilisé pour localiser rapidement le Service d’application.</span><span class="sxs-lookup"><span data-stu-id="631a1-144">As a reminder, the portal's search box can be used to quickly locate the App Service.</span></span>
1. <span data-ttu-id="631a1-145">Cliquez sur **options de déploiement**.</span><span class="sxs-lookup"><span data-stu-id="631a1-145">Click **Deployment options**.</span></span> <span data-ttu-id="631a1-146">Un nouveau panneau s’affiche.</span><span class="sxs-lookup"><span data-stu-id="631a1-146">A new panel appears.</span></span> <span data-ttu-id="631a1-147">Cliquez sur **déconnexion** pour supprimer la configuration de contrôle d’une source de Git locale qui a été ajoutée dans le chapitre précédent.</span><span class="sxs-lookup"><span data-stu-id="631a1-147">Click **Disconnect** to remove the local Git source control configuration that was added in the previous chapter.</span></span> <span data-ttu-id="631a1-148">Confirmer l’opération de suppression en cliquant sur le **Oui** bouton.</span><span class="sxs-lookup"><span data-stu-id="631a1-148">Confirm the removal operation by clicking the **Yes** button.</span></span>

## <a name="create-an-azure-devops-organization"></a><span data-ttu-id="631a1-149">Création d’une organisation Azure DevOps</span><span class="sxs-lookup"><span data-stu-id="631a1-149">Create an Azure DevOps organization</span></span>

1. <span data-ttu-id="631a1-150">Ouvrez un navigateur et accédez à la [page de création Azure DevOps organisation](https://go.microsoft.com/fwlink/?LinkId=307137).</span><span class="sxs-lookup"><span data-stu-id="631a1-150">Open a browser, and navigate to the [Azure DevOps organization creation page](https://go.microsoft.com/fwlink/?LinkId=307137).</span></span>
1. <span data-ttu-id="631a1-151">Tapez un nom unique dans le **choisir un nom facile à mémoriser** zone de texte pour former l’URL pour accéder à votre organisation d’Azure DevOps.</span><span class="sxs-lookup"><span data-stu-id="631a1-151">Type a unique name into the **Pick a memorable name** textbox to form the URL for accessing your Azure DevOps organization.</span></span>
1. <span data-ttu-id="631a1-152">Sélectionnez le **Git** bouton radio, étant donné que le code est hébergé dans un référentiel GitHub.</span><span class="sxs-lookup"><span data-stu-id="631a1-152">Select the **Git** radio button, since the code is hosted in a GitHub repository.</span></span>
1. <span data-ttu-id="631a1-153">Cliquez sur le bouton **Continuer**.</span><span class="sxs-lookup"><span data-stu-id="631a1-153">Click the **Continue** button.</span></span> <span data-ttu-id="631a1-154">Après un court délai d’attente, un compte et un projet d’équipe, nommé *MyFirstProject*, sont créés.</span><span class="sxs-lookup"><span data-stu-id="631a1-154">After a short wait, an account and a team project, named *MyFirstProject*, are created.</span></span>

    ![Page de création d’organisation DevOps Azure](media/cicd/vsts-account-creation.png)

1. <span data-ttu-id="631a1-156">Ouvrez l’e-mail de confirmation indiquant que le projet et l’organisation d’Azure DevOps sont prêtes pour une utilisation.</span><span class="sxs-lookup"><span data-stu-id="631a1-156">Open the confirmation email indicating that the Azure DevOps organization and project are ready for use.</span></span> <span data-ttu-id="631a1-157">Cliquez sur le **démarrez votre projet** bouton :</span><span class="sxs-lookup"><span data-stu-id="631a1-157">Click the **Start your project** button:</span></span>

    ![Démarrez votre bouton de projet](media/cicd/vsts-start-project.png)

1. <span data-ttu-id="631a1-159">Un navigateur s’ouvre à  *\<account_name\>. visualstudio.com*.</span><span class="sxs-lookup"><span data-stu-id="631a1-159">A browser opens to *\<account_name\>.visualstudio.com*.</span></span> <span data-ttu-id="631a1-160">Cliquez sur le *MyFirstProject* lien pour commencer à configurer le pipeline de DevOps du projet.</span><span class="sxs-lookup"><span data-stu-id="631a1-160">Click the *MyFirstProject* link to begin configuring the project's DevOps pipeline.</span></span>

## <a name="configure-the-azure-pipelines-pipeline"></a><span data-ttu-id="631a1-161">Configurer le pipeline de Pipelines d’Azure</span><span class="sxs-lookup"><span data-stu-id="631a1-161">Configure the Azure Pipelines pipeline</span></span>

<span data-ttu-id="631a1-162">Il existe trois étapes distinctes pour terminer.</span><span class="sxs-lookup"><span data-stu-id="631a1-162">There are three distinct steps to complete.</span></span> <span data-ttu-id="631a1-163">Les étapes dans les résultats de trois sections suivantes dans un pipeline DevOps opérationnels.</span><span class="sxs-lookup"><span data-stu-id="631a1-163">Completing the steps in the following three sections results in an operational DevOps pipeline.</span></span>

### <a name="grant-azure-devops-access-to-the-github-repository"></a><span data-ttu-id="631a1-164">Accès Grant Azure DevOps dans le référentiel GitHub</span><span class="sxs-lookup"><span data-stu-id="631a1-164">Grant Azure DevOps access to the GitHub repository</span></span>

1. <span data-ttu-id="631a1-165">Développez le **ou générer le code à partir d’un dépôt externe** accordion.</span><span class="sxs-lookup"><span data-stu-id="631a1-165">Expand the **or build code from an external repository** accordion.</span></span> <span data-ttu-id="631a1-166">Cliquez sur le **générer le programme d’installation** bouton :</span><span class="sxs-lookup"><span data-stu-id="631a1-166">Click the **Setup Build** button:</span></span>

    ![Bouton de générer le programme d’installation](media/cicd/vsts-setup-build.png)

1. <span data-ttu-id="631a1-168">Sélectionnez le **GitHub** option à partir de la **sélectionner une source de** section :</span><span class="sxs-lookup"><span data-stu-id="631a1-168">Select the **GitHub** option from the **Select a source** section:</span></span>

    ![Sélectionnez une source - GitHub](media/cicd/vsts-select-source.png)

1. <span data-ttu-id="631a1-170">L’autorisation est requise que Azure DevOps puisse accéder à votre référentiel GitHub.</span><span class="sxs-lookup"><span data-stu-id="631a1-170">Authorization is required before Azure DevOps can access your GitHub repository.</span></span> <span data-ttu-id="631a1-171">Entrez *< GitHub_username > connexion GitHub* dans le **nom de la connexion** zone de texte.</span><span class="sxs-lookup"><span data-stu-id="631a1-171">Enter *<GitHub_username> GitHub connection* in the **Connection name** textbox.</span></span> <span data-ttu-id="631a1-172">Exemple :</span><span class="sxs-lookup"><span data-stu-id="631a1-172">For example:</span></span>

    ![Nom de la connexion GitHub](media/cicd/vsts-repo-authz.png)

1. <span data-ttu-id="631a1-174">Si l’authentification à deux facteurs est activée sur votre compte GitHub, un jeton d’accès personnel est requis.</span><span class="sxs-lookup"><span data-stu-id="631a1-174">If two-factor authentication is enabled on your GitHub account, a personal access token is required.</span></span> <span data-ttu-id="631a1-175">Dans ce cas, cliquez sur le **Authorize avec un jeton d’accès personnel GitHub** lien.</span><span class="sxs-lookup"><span data-stu-id="631a1-175">In that case, click the **Authorize with a GitHub personal access token** link.</span></span> <span data-ttu-id="631a1-176">Consultez le [instructions de création d’un jeton accès personnel GitHub officielles](https://help.github.com/articles/creating-a-personal-access-token-for-the-command-line/) de l’aide.</span><span class="sxs-lookup"><span data-stu-id="631a1-176">See the [official GitHub personal access token creation instructions](https://help.github.com/articles/creating-a-personal-access-token-for-the-command-line/) for help.</span></span> <span data-ttu-id="631a1-177">Uniquement les *référentiel* étendue des autorisations est nécessaire.</span><span class="sxs-lookup"><span data-stu-id="631a1-177">Only the *repo* scope of permissions is needed.</span></span> <span data-ttu-id="631a1-178">Sinon, cliquez sur le **autoriser l’utilisation d’OAuth** bouton.</span><span class="sxs-lookup"><span data-stu-id="631a1-178">Otherwise, click the **Authorize using OAuth** button.</span></span>
1. <span data-ttu-id="631a1-179">Lorsque vous y êtes invité, connectez-vous à votre compte GitHub.</span><span class="sxs-lookup"><span data-stu-id="631a1-179">When prompted, sign in to your GitHub account.</span></span> <span data-ttu-id="631a1-180">Ensuite, sélectionnez Autoriser pour accorder l’accès à votre organisation d’Azure DevOps.</span><span class="sxs-lookup"><span data-stu-id="631a1-180">Then select Authorize to grant access to your Azure DevOps organization.</span></span> <span data-ttu-id="631a1-181">Si l’opération réussit, un nouveau point de terminaison de service est créé.</span><span class="sxs-lookup"><span data-stu-id="631a1-181">If successful, a new service endpoint is created.</span></span>
1. <span data-ttu-id="631a1-182">Cliquez sur le bouton de sélection en regard du **référentiel** bouton.</span><span class="sxs-lookup"><span data-stu-id="631a1-182">Click the ellipsis button next to the **Repository** button.</span></span> <span data-ttu-id="631a1-183">Sélectionnez le *< GitHub_username > / lecture de flux simple* référentiel à partir de la liste.</span><span class="sxs-lookup"><span data-stu-id="631a1-183">Select the *<GitHub_username>/simple-feed-reader* repository from the list.</span></span> <span data-ttu-id="631a1-184">Cliquez sur le **sélectionnez** bouton.</span><span class="sxs-lookup"><span data-stu-id="631a1-184">Click the **Select** button.</span></span>
1. <span data-ttu-id="631a1-185">Sélectionnez le *master* créer une branche à partir de la **branche par défaut pour les builds manuelles et planifiées** liste déroulante.</span><span class="sxs-lookup"><span data-stu-id="631a1-185">Select the *master* branch from the **Default branch for manual and scheduled builds** drop-down.</span></span> <span data-ttu-id="631a1-186">Cliquez sur le bouton **Continuer**.</span><span class="sxs-lookup"><span data-stu-id="631a1-186">Click the **Continue** button.</span></span> <span data-ttu-id="631a1-187">La page Sélection du modèle s’affiche.</span><span class="sxs-lookup"><span data-stu-id="631a1-187">The template selection page appears.</span></span>

### <a name="create-the-build-definition"></a><span data-ttu-id="631a1-188">Créer la définition de build</span><span class="sxs-lookup"><span data-stu-id="631a1-188">Create the build definition</span></span>

1. <span data-ttu-id="631a1-189">À partir de la page Sélection du modèle, entrez *ASP.NET Core* dans la zone de recherche :</span><span class="sxs-lookup"><span data-stu-id="631a1-189">From the template selection page, enter *ASP.NET Core* in the search box:</span></span>

    ![Recherche d’ASP.NET Core sur la page de modèle](media/cicd/vsts-template-selection.png)

1. <span data-ttu-id="631a1-191">Les résultats de recherche de modèle s’affichent.</span><span class="sxs-lookup"><span data-stu-id="631a1-191">The template search results appear.</span></span> <span data-ttu-id="631a1-192">Placez le curseur sur le **ASP.NET Core** modèle, puis cliquez sur le **appliquer** bouton.</span><span class="sxs-lookup"><span data-stu-id="631a1-192">Hover over the **ASP.NET Core** template, and click the **Apply** button.</span></span>
1. <span data-ttu-id="631a1-193">Le **tâches** onglet de la définition de build s’affiche.</span><span class="sxs-lookup"><span data-stu-id="631a1-193">The **Tasks** tab of the build definition appears.</span></span> <span data-ttu-id="631a1-194">Cliquez sur l'onglet **Déclencheurs** .</span><span class="sxs-lookup"><span data-stu-id="631a1-194">Click the **Triggers** tab.</span></span>
1. <span data-ttu-id="631a1-195">Vérifier le **activer l’intégration continue** boîte.</span><span class="sxs-lookup"><span data-stu-id="631a1-195">Check the **Enable continuous integration** box.</span></span> <span data-ttu-id="631a1-196">Sous le **filtres de branche** section, vérifiez que le **Type** liste déroulante est définie sur *Include*.</span><span class="sxs-lookup"><span data-stu-id="631a1-196">Under the **Branch filters** section, confirm that the **Type** drop-down is set to *Include*.</span></span> <span data-ttu-id="631a1-197">Définir le **spécification de branche** liste déroulante pour *master*.</span><span class="sxs-lookup"><span data-stu-id="631a1-197">Set the **Branch specification** drop-down to *master*.</span></span>

    ![Activer les paramètres d’intégration continue](media/cicd/vsts-enable-ci.png)

    <span data-ttu-id="631a1-199">Ces paramètres entraînent une build à déclencher lorsqu’une modification est envoyée vers le *master* branche du référentiel GitHub.</span><span class="sxs-lookup"><span data-stu-id="631a1-199">These settings cause a build to trigger when any change is pushed to the *master* branch of the GitHub repository.</span></span> <span data-ttu-id="631a1-200">Intégration continue est testée dans le [valider des modifications à GitHub et déployer automatiquement vers Azure](#commit-changes-to-github-and-automatically-deploy-to-azure) section.</span><span class="sxs-lookup"><span data-stu-id="631a1-200">Continuous integration is tested in the [Commit changes to GitHub and automatically deploy to Azure](#commit-changes-to-github-and-automatically-deploy-to-azure) section.</span></span>

1. <span data-ttu-id="631a1-201">Cliquez sur le **Enregistrer & file d’attente** bouton, puis sélectionnez le **enregistrer** option :</span><span class="sxs-lookup"><span data-stu-id="631a1-201">Click the **Save & queue** button, and select the **Save** option:</span></span>

    ![Bouton Enregistrer](media/cicd/vsts-save-build.png)

1. <span data-ttu-id="631a1-203">La boîte de dialogue modale s’affiche :</span><span class="sxs-lookup"><span data-stu-id="631a1-203">The following modal dialog appears:</span></span>

    ![Enregistrer de définition de build - boîte de dialogue modale](media/cicd/vsts-save-modal.png)

    <span data-ttu-id="631a1-205">Utiliser le dossier par défaut de *\\*, puis cliquez sur le **enregistrer** bouton.</span><span class="sxs-lookup"><span data-stu-id="631a1-205">Use the default folder of *\\*, and click the **Save** button.</span></span>

### <a name="create-the-release-pipeline"></a><span data-ttu-id="631a1-206">Créer le pipeline de mise en production</span><span class="sxs-lookup"><span data-stu-id="631a1-206">Create the release pipeline</span></span>

1. <span data-ttu-id="631a1-207">Cliquez sur le **versions** onglet de votre projet d’équipe.</span><span class="sxs-lookup"><span data-stu-id="631a1-207">Click the **Releases** tab of your team project.</span></span> <span data-ttu-id="631a1-208">Cliquez sur le **nouveau pipeline** bouton.</span><span class="sxs-lookup"><span data-stu-id="631a1-208">Click the **New pipeline** button.</span></span>

    ![Onglet versions - nouveau bouton de définition](media/cicd/vsts-new-release-definition.png)

    <span data-ttu-id="631a1-210">Le volet de sélection de modèle s’affiche.</span><span class="sxs-lookup"><span data-stu-id="631a1-210">The template selection pane appears.</span></span>

1. <span data-ttu-id="631a1-211">À partir de la page Sélection du modèle, entrez *App Service* dans la zone de recherche :</span><span class="sxs-lookup"><span data-stu-id="631a1-211">From the template selection page, enter *App Service* in the search box:</span></span>

    ![Zone de recherche de modèle de pipeline mise en production](media/cicd/vsts-release-template-search.png)

1. <span data-ttu-id="631a1-213">Les résultats de recherche de modèle s’affichent.</span><span class="sxs-lookup"><span data-stu-id="631a1-213">The template search results appear.</span></span> <span data-ttu-id="631a1-214">Placez le curseur sur le **déploiement d’Azure App Service avec l’emplacement** modèle, puis cliquez sur le **appliquer** bouton.</span><span class="sxs-lookup"><span data-stu-id="631a1-214">Hover over the **Azure App Service Deployment with Slot** template, and click the **Apply** button.</span></span> <span data-ttu-id="631a1-215">Le **Pipeline** onglet du pipeline de versions s’affiche.</span><span class="sxs-lookup"><span data-stu-id="631a1-215">The **Pipeline** tab of the release pipeline appears.</span></span>

    ![Pipeline de versions onglet Pipeline](media/cicd/vsts-release-definition-pipeline.png)

1. <span data-ttu-id="631a1-217">Cliquez sur le **ajouter** situé dans le **artefacts** boîte.</span><span class="sxs-lookup"><span data-stu-id="631a1-217">Click the **Add** button in the **Artifacts** box.</span></span> <span data-ttu-id="631a1-218">Le **ajouter un artefact** panneau s’affiche :</span><span class="sxs-lookup"><span data-stu-id="631a1-218">The **Add artifact** panel appears:</span></span>

    ![Pipeline de versions - ajouter panneau d’artefact](media/cicd/vsts-release-add-artifact.png)

1. <span data-ttu-id="631a1-220">Sélectionnez le **Build** vignette à partir de la **type de Source** section.</span><span class="sxs-lookup"><span data-stu-id="631a1-220">Select the **Build** tile from the **Source type** section.</span></span> <span data-ttu-id="631a1-221">Ce type permet de lier le pipeline de mise en production pour la définition de build.</span><span class="sxs-lookup"><span data-stu-id="631a1-221">This type allows for the linking of the release pipeline to the build definition.</span></span>
1. <span data-ttu-id="631a1-222">Sélectionnez *MyFirstProject* à partir de la **projet** liste déroulante.</span><span class="sxs-lookup"><span data-stu-id="631a1-222">Select *MyFirstProject* from the **Project** drop-down.</span></span>
1. <span data-ttu-id="631a1-223">Sélectionnez le nom de définition de build, *MyFirstProject-ASP.NET Core-CI*, à partir de la **Source (définition de Build)** liste déroulante.</span><span class="sxs-lookup"><span data-stu-id="631a1-223">Select the build definition name, *MyFirstProject-ASP.NET Core-CI*, from the **Source (Build definition)** drop-down.</span></span>
1. <span data-ttu-id="631a1-224">Sélectionnez *dernière* à partir de la **version par défaut** liste déroulante.</span><span class="sxs-lookup"><span data-stu-id="631a1-224">Select *Latest* from the **Default version** drop-down.</span></span> <span data-ttu-id="631a1-225">Cette option génère les artefacts générés par la dernière exécution de la définition de build.</span><span class="sxs-lookup"><span data-stu-id="631a1-225">This option builds the artifacts produced by the latest run of the build definition.</span></span>
1. <span data-ttu-id="631a1-226">Remplacez le texte dans le **alias Source** textbox avec *Drop*.</span><span class="sxs-lookup"><span data-stu-id="631a1-226">Replace the text in the **Source alias** textbox with *Drop*.</span></span>
1. <span data-ttu-id="631a1-227">Cliquez sur le bouton **Ajouter**.</span><span class="sxs-lookup"><span data-stu-id="631a1-227">Click the **Add** button.</span></span> <span data-ttu-id="631a1-228">Le **artefacts** section mises à jour pour afficher les modifications.</span><span class="sxs-lookup"><span data-stu-id="631a1-228">The **Artifacts** section updates to display the changes.</span></span>
1. <span data-ttu-id="631a1-229">Cliquez sur l’icône d’éclair pour activer les déploiements continus :</span><span class="sxs-lookup"><span data-stu-id="631a1-229">Click the lightning bolt icon to enable continuous deployments:</span></span>

    ![Pipeline de versions artefacts - icône d’éclair](media/cicd/vsts-artifacts-lightning-bolt.png)

    <span data-ttu-id="631a1-231">Avec cette option est activée, un déploiement se produit chaque fois qu’une nouvelle build est disponible.</span><span class="sxs-lookup"><span data-stu-id="631a1-231">With this option enabled, a deployment occurs each time a new build is available.</span></span>
1. <span data-ttu-id="631a1-232">Un **déclencheur de déploiement continu** panneau s’affiche à droite.</span><span class="sxs-lookup"><span data-stu-id="631a1-232">A **Continuous deployment trigger** panel appears to the right.</span></span> <span data-ttu-id="631a1-233">Cliquez sur le bouton bascule pour activer la fonctionnalité.</span><span class="sxs-lookup"><span data-stu-id="631a1-233">Click the toggle button to enable the feature.</span></span> <span data-ttu-id="631a1-234">Il n’est pas nécessaire d’activer la **déclencheur de requête de tirage**.</span><span class="sxs-lookup"><span data-stu-id="631a1-234">It isn't necessary to enable the **Pull request trigger**.</span></span>
1. <span data-ttu-id="631a1-235">Cliquez sur le **ajouter** liste déroulante dans le **générer des filtres de branche** section.</span><span class="sxs-lookup"><span data-stu-id="631a1-235">Click the **Add** drop-down in the **Build branch filters** section.</span></span> <span data-ttu-id="631a1-236">Choisissez le **branche par défaut de la définition de Build** option.</span><span class="sxs-lookup"><span data-stu-id="631a1-236">Choose the **Build Definition's default branch** option.</span></span> <span data-ttu-id="631a1-237">Ce filtre provoque la mise en production déclencher uniquement pour une build à partir du référentiel GitHub *master* branche.</span><span class="sxs-lookup"><span data-stu-id="631a1-237">This filter causes the release to trigger only for a build from the GitHub repository's *master* branch.</span></span>
1. <span data-ttu-id="631a1-238">Cliquez sur le bouton **Enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="631a1-238">Click the **Save** button.</span></span> <span data-ttu-id="631a1-239">Cliquez sur le **OK** bouton dans résultant **enregistrer** boîte de dialogue modale.</span><span class="sxs-lookup"><span data-stu-id="631a1-239">Click the **OK** button in the resulting **Save** modal dialog.</span></span>
1. <span data-ttu-id="631a1-240">Cliquez sur le **Environment 1** boîte.</span><span class="sxs-lookup"><span data-stu-id="631a1-240">Click the **Environment 1** box.</span></span> <span data-ttu-id="631a1-241">Un **environnement** panneau s’affiche à droite.</span><span class="sxs-lookup"><span data-stu-id="631a1-241">An **Environment** panel appears to the right.</span></span> <span data-ttu-id="631a1-242">Modifier le *Environment 1* texte dans le **nom de l’environnement** zone de texte pour *Production*.</span><span class="sxs-lookup"><span data-stu-id="631a1-242">Change the *Environment 1* text in the **Environment name** textbox to *Production*.</span></span>

   ![Pipeline de versions - zone de texte Nom environnement](media/cicd/vsts-environment-name-textbox.png)

1. <span data-ttu-id="631a1-244">Cliquez sur le **1 phase, 2 tâches** lien dans le **Production** zone :</span><span class="sxs-lookup"><span data-stu-id="631a1-244">Click the **1 phase, 2 tasks** link in the **Production** box:</span></span>

    ![Pipeline de versions - link.png d’environnement de Production](media/cicd/vsts-production-link.png)

    <span data-ttu-id="631a1-246">Le **tâches** onglet de l’environnement s’affiche.</span><span class="sxs-lookup"><span data-stu-id="631a1-246">The **Tasks** tab of the environment appears.</span></span>
1. <span data-ttu-id="631a1-247">Cliquez sur le **déployer Azure App Service à l’emplacement** tâche.</span><span class="sxs-lookup"><span data-stu-id="631a1-247">Click the **Deploy Azure App Service to Slot** task.</span></span> <span data-ttu-id="631a1-248">Ses paramètres s’affichent dans le panneau vers la droite.</span><span class="sxs-lookup"><span data-stu-id="631a1-248">Its settings appear in a panel to the right.</span></span>
1. <span data-ttu-id="631a1-249">Sélectionnez l’abonnement Azure associé au Service d’application à partir de la **abonnement Azure** liste déroulante.</span><span class="sxs-lookup"><span data-stu-id="631a1-249">Select the Azure subscription associated with the App Service from the **Azure subscription** drop-down.</span></span> <span data-ttu-id="631a1-250">Une fois sélectionné, cliquez sur le **Authorize** bouton.</span><span class="sxs-lookup"><span data-stu-id="631a1-250">Once selected, click the **Authorize** button.</span></span>
1. <span data-ttu-id="631a1-251">Sélectionnez *application Web* à partir de la **type d’application** liste déroulante.</span><span class="sxs-lookup"><span data-stu-id="631a1-251">Select *Web App* from the **App type** drop-down.</span></span>
1. <span data-ttu-id="631a1-252">Sélectionnez *mywebapp / < unique_number / >* à partir de la **Nom App service** liste déroulante.</span><span class="sxs-lookup"><span data-stu-id="631a1-252">Select *mywebapp/<unique_number/>* from the **App service name** drop-down.</span></span>
1. <span data-ttu-id="631a1-253">Sélectionnez *AzureTutorial* à partir de la **groupe de ressources** liste déroulante.</span><span class="sxs-lookup"><span data-stu-id="631a1-253">Select *AzureTutorial* from the **Resource group** drop-down.</span></span>
1. <span data-ttu-id="631a1-254">Sélectionnez *intermédiaire* à partir de la **emplacement** liste déroulante.</span><span class="sxs-lookup"><span data-stu-id="631a1-254">Select *staging* from the **Slot** drop-down.</span></span>
1. <span data-ttu-id="631a1-255">Cliquez sur le bouton **Enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="631a1-255">Click the **Save** button.</span></span>
1. <span data-ttu-id="631a1-256">Pointez sur le nom de pipeline de version par défaut.</span><span class="sxs-lookup"><span data-stu-id="631a1-256">Hover over the default release pipeline name.</span></span> <span data-ttu-id="631a1-257">Cliquez sur l’icône de crayon pour le modifier.</span><span class="sxs-lookup"><span data-stu-id="631a1-257">Click the pencil icon to edit it.</span></span> <span data-ttu-id="631a1-258">Utilisez *MyFirstProject-ASP.NET Core-CD* comme nom.</span><span class="sxs-lookup"><span data-stu-id="631a1-258">Use *MyFirstProject-ASP.NET Core-CD* as the name.</span></span>

    ![Nom de pipeline de mise en production](media/cicd/vsts-release-definition-name.png)

1. <span data-ttu-id="631a1-260">Cliquez sur le bouton **Enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="631a1-260">Click the **Save** button.</span></span>

## <a name="commit-changes-to-github-and-automatically-deploy-to-azure"></a><span data-ttu-id="631a1-261">Valider les modifications à GitHub et déployer automatiquement vers Azure</span><span class="sxs-lookup"><span data-stu-id="631a1-261">Commit changes to GitHub and automatically deploy to Azure</span></span>

1. <span data-ttu-id="631a1-262">Ouvrez *SimpleFeedReader.sln* dans Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="631a1-262">Open *SimpleFeedReader.sln* in Visual Studio.</span></span>
1. <span data-ttu-id="631a1-263">Dans l’Explorateur de solutions, ouvrez *Pages\Index.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="631a1-263">In Solution Explorer, open *Pages\Index.cshtml*.</span></span> <span data-ttu-id="631a1-264">Modification `<h2>Simple Feed Reader - V3</h2>` à `<h2>Simple Feed Reader - V4</h2>`.</span><span class="sxs-lookup"><span data-stu-id="631a1-264">Change `<h2>Simple Feed Reader - V3</h2>` to `<h2>Simple Feed Reader - V4</h2>`.</span></span>
1. <span data-ttu-id="631a1-265">Appuyez sur **Ctrl**+**MAJ**+**B** pour générer l’application.</span><span class="sxs-lookup"><span data-stu-id="631a1-265">Press **Ctrl**+**Shift**+**B** to build the app.</span></span>
1. <span data-ttu-id="631a1-266">Valider le fichier vers le dépôt GitHub.</span><span class="sxs-lookup"><span data-stu-id="631a1-266">Commit the file to the GitHub repository.</span></span> <span data-ttu-id="631a1-267">Utilisez le **modifications** page dans Visual Studio *Team Explorer* onglet, ou exécutez la commande suivante à l’aide du shell de commande de l’ordinateur local :</span><span class="sxs-lookup"><span data-stu-id="631a1-267">Use either the **Changes** page in Visual Studio's *Team Explorer* tab, or execute the following using the local machine's command shell:</span></span>

    ```console
    git commit -a -m "upgraded to V4"
    ```
1. <span data-ttu-id="631a1-268">Transmettre la modification le *master* créer une branche vers le *origine* à distance de votre référentiel GitHub :</span><span class="sxs-lookup"><span data-stu-id="631a1-268">Push the change in the *master* branch to the *origin* remote of your GitHub repository:</span></span>

    ```console
    git push origin master
    ```

    <span data-ttu-id="631a1-269">La validation s’affiche dans le référentiel GitHub *master* branche :</span><span class="sxs-lookup"><span data-stu-id="631a1-269">The commit appears in the GitHub repository's *master* branch:</span></span>

    ![Validation de GitHub dans la branche principale](media/cicd/github-commit.png)

    <span data-ttu-id="631a1-271">La build est déclenchée, étant donné que l’intégration continue est activée dans la définition de build **déclencheurs** onglet :</span><span class="sxs-lookup"><span data-stu-id="631a1-271">The build is triggered, since continuous integration is enabled in the build definition's **Triggers** tab:</span></span>

    ![Activer l’intégration continue](media/cicd/enable-ci.png)

1. <span data-ttu-id="631a1-273">Accédez à la **en file d’attente** onglet de la **Azure Pipelines** > **génère** page dans les Services Azure DevOps.</span><span class="sxs-lookup"><span data-stu-id="631a1-273">Navigate to the **Queued** tab of the **Azure Pipelines** > **Builds** page in Azure DevOps Services.</span></span> <span data-ttu-id="631a1-274">La build en file d’attente affiche la branche et la validation qui a déclenché la génération :</span><span class="sxs-lookup"><span data-stu-id="631a1-274">The queued build shows the branch and commit that triggered the build:</span></span>

    ![build en file d’attente](media/cicd/build-queued.png)

1. <span data-ttu-id="631a1-276">Une fois la génération terminée, un déploiement vers Azure se produit.</span><span class="sxs-lookup"><span data-stu-id="631a1-276">Once the build succeeds, a deployment to Azure occurs.</span></span> <span data-ttu-id="631a1-277">Accédez à l’application dans le navigateur.</span><span class="sxs-lookup"><span data-stu-id="631a1-277">Navigate to the app in the browser.</span></span> <span data-ttu-id="631a1-278">Notez que le texte « V4 » s’affiche dans l’en-tête :</span><span class="sxs-lookup"><span data-stu-id="631a1-278">Notice that the "V4" text appears in the heading:</span></span>

    ![application mise à jour](media/cicd/updated-app-v4.png)

## <a name="examine-the-azure-pipelines-pipeline"></a><span data-ttu-id="631a1-280">Examiner le pipeline de Pipelines d’Azure</span><span class="sxs-lookup"><span data-stu-id="631a1-280">Examine the Azure Pipelines pipeline</span></span>

### <a name="build-definition"></a><span data-ttu-id="631a1-281">Définition de build</span><span class="sxs-lookup"><span data-stu-id="631a1-281">Build definition</span></span>

<span data-ttu-id="631a1-282">Une définition de build a été créée avec le nom *MyFirstProject-ASP.NET Core-CI*.</span><span class="sxs-lookup"><span data-stu-id="631a1-282">A build definition was created with the name *MyFirstProject-ASP.NET Core-CI*.</span></span> <span data-ttu-id="631a1-283">Une fois terminée, la build génère un *.zip* fichier, y compris les ressources à publier.</span><span class="sxs-lookup"><span data-stu-id="631a1-283">Upon completion, the build produces a *.zip* file including the assets to be published.</span></span> <span data-ttu-id="631a1-284">Le pipeline de mise en production déploie ces ressources sur Azure.</span><span class="sxs-lookup"><span data-stu-id="631a1-284">The release pipeline deploys those assets to Azure.</span></span>

<span data-ttu-id="631a1-285">La définition de build **tâches** onglet répertorie les étapes individuelles utilisées.</span><span class="sxs-lookup"><span data-stu-id="631a1-285">The build definition's **Tasks** tab lists the individual steps being used.</span></span> <span data-ttu-id="631a1-286">Il existe cinq tâches de génération.</span><span class="sxs-lookup"><span data-stu-id="631a1-286">There are five build tasks.</span></span>

![tâches de définition de build](media/cicd/build-definition-tasks.png)

1. <span data-ttu-id="631a1-288">**Restaurer** &mdash; exécute le `dotnet restore` commande pour restaurer les packages NuGet de l’application.</span><span class="sxs-lookup"><span data-stu-id="631a1-288">**Restore** &mdash; Executes the `dotnet restore` command to restore the app's NuGet packages.</span></span> <span data-ttu-id="631a1-289">Le package par défaut utilisé un flux est nuget.org.</span><span class="sxs-lookup"><span data-stu-id="631a1-289">The default package feed used is nuget.org.</span></span>
1. <span data-ttu-id="631a1-290">**Build** &mdash; exécute le `dotnet build --configuration release` commande pour compiler le code de l’application.</span><span class="sxs-lookup"><span data-stu-id="631a1-290">**Build** &mdash; Executes the `dotnet build --configuration release` command to compile the app's code.</span></span> <span data-ttu-id="631a1-291">Cela `--configuration` option est utilisée pour produire une version optimisée du code, qui est appropriée pour le déploiement dans un environnement de production.</span><span class="sxs-lookup"><span data-stu-id="631a1-291">This `--configuration` option is used to produce an optimized version of the code, which is suitable for deployment to a production environment.</span></span> <span data-ttu-id="631a1-292">Modifier le *BuildConfiguration* variable sur la définition de build **Variables** onglet si, par exemple, une configuration debug est nécessaire.</span><span class="sxs-lookup"><span data-stu-id="631a1-292">Modify the *BuildConfiguration* variable on the build definition's **Variables** tab if, for example, a debug configuration is needed.</span></span>
1. <span data-ttu-id="631a1-293">**Test** &mdash; exécute le `dotnet test --configuration release --logger trx --results-directory <local_path_on_build_agent>` commande pour exécuter des tests unitaires de l’application.</span><span class="sxs-lookup"><span data-stu-id="631a1-293">**Test** &mdash; Executes the `dotnet test --configuration release --logger trx --results-directory <local_path_on_build_agent>` command to run the app's unit tests.</span></span> <span data-ttu-id="631a1-294">Tests unitaires sont exécutés dans n’importe quel langage c# projet correspondant à la `**/*Tests/*.csproj` modèle glob.</span><span class="sxs-lookup"><span data-stu-id="631a1-294">Unit tests are executed within any C# project matching the `**/*Tests/*.csproj` glob pattern.</span></span> <span data-ttu-id="631a1-295">Résultats des tests sont enregistrés dans un *.trx* fichier à l’emplacement spécifié par le `--results-directory` option.</span><span class="sxs-lookup"><span data-stu-id="631a1-295">Test results are saved in a *.trx* file at the location specified by the `--results-directory` option.</span></span> <span data-ttu-id="631a1-296">Si tous les tests échouent, la build échoue et n’est pas déployée.</span><span class="sxs-lookup"><span data-stu-id="631a1-296">If any tests fail, the build fails and isn't deployed.</span></span>

    > [!NOTE]
    > <span data-ttu-id="631a1-297">Pour vérifier le travail de tests unitaires, modifiez *SimpleFeedReader.Tests\Services\NewsServiceTests.cs* délibérément rompre un des tests.</span><span class="sxs-lookup"><span data-stu-id="631a1-297">To verify the unit tests work, modify *SimpleFeedReader.Tests\Services\NewsServiceTests.cs* to purposefully break one of the tests.</span></span> <span data-ttu-id="631a1-298">Par exemple, remplacez `Assert.True(result.Count > 0);` à `Assert.False(result.Count > 0);` dans le `Returns_News_Stories_Given_Valid_Uri` (méthode).</span><span class="sxs-lookup"><span data-stu-id="631a1-298">For example, change `Assert.True(result.Count > 0);` to `Assert.False(result.Count > 0);` in the `Returns_News_Stories_Given_Valid_Uri` method.</span></span> <span data-ttu-id="631a1-299">Validez et envoyez la modification à GitHub.</span><span class="sxs-lookup"><span data-stu-id="631a1-299">Commit and push the change to GitHub.</span></span> <span data-ttu-id="631a1-300">La build est déclenchée et échoue.</span><span class="sxs-lookup"><span data-stu-id="631a1-300">The build is triggered and fails.</span></span> <span data-ttu-id="631a1-301">L’état de pipeline de build devient **échec**.</span><span class="sxs-lookup"><span data-stu-id="631a1-301">The build pipeline status changes to **failed**.</span></span> <span data-ttu-id="631a1-302">Rétablir la modification, valider et l’envoyer à nouveau.</span><span class="sxs-lookup"><span data-stu-id="631a1-302">Revert the change, commit, and push again.</span></span> <span data-ttu-id="631a1-303">La build réussit.</span><span class="sxs-lookup"><span data-stu-id="631a1-303">The build succeeds.</span></span>

1. <span data-ttu-id="631a1-304">**Publier** &mdash; exécute le `dotnet publish --configuration release --output <local_path_on_build_agent>` commande pour produire un *.zip* fichier avec les artefacts à déployer.</span><span class="sxs-lookup"><span data-stu-id="631a1-304">**Publish** &mdash; Executes the `dotnet publish --configuration release --output <local_path_on_build_agent>` command to produce a *.zip* file with the artifacts to be deployed.</span></span> <span data-ttu-id="631a1-305">Le `--output` option spécifie l’emplacement de publication de la *.zip* fichier.</span><span class="sxs-lookup"><span data-stu-id="631a1-305">The `--output` option specifies the publish location of the *.zip* file.</span></span> <span data-ttu-id="631a1-306">Que l’emplacement est spécifié en passant une [variable prédéfinie](/azure/devops/pipelines/build/variables) nommé `$(build.artifactstagingdirectory)`.</span><span class="sxs-lookup"><span data-stu-id="631a1-306">That location is specified by passing a [predefined variable](/azure/devops/pipelines/build/variables) named `$(build.artifactstagingdirectory)`.</span></span> <span data-ttu-id="631a1-307">Cette variable est passée à un chemin d’accès local, tel que *c:\agent\_work\1\a*, sur l’agent de build.</span><span class="sxs-lookup"><span data-stu-id="631a1-307">That variable expands to a local path, such as *c:\agent\_work\1\a*, on the build agent.</span></span>
1. <span data-ttu-id="631a1-308">**Publier l’artefact** &mdash; Publishes le *.zip* fichier produit par le **publier** tâche.</span><span class="sxs-lookup"><span data-stu-id="631a1-308">**Publish Artifact** &mdash; Publishes the *.zip* file produced by the **Publish** task.</span></span> <span data-ttu-id="631a1-309">La tâche accepte le *.zip* emplacement_fichier en tant que paramètre, qui est la variable prédéfinie `$(build.artifactstagingdirectory)`.</span><span class="sxs-lookup"><span data-stu-id="631a1-309">The task accepts the *.zip* file location as a parameter, which is the predefined variable `$(build.artifactstagingdirectory)`.</span></span> <span data-ttu-id="631a1-310">Le *.zip* fichier est publié comme un dossier nommé *drop*.</span><span class="sxs-lookup"><span data-stu-id="631a1-310">The *.zip* file is published as a folder named *drop*.</span></span>

<span data-ttu-id="631a1-311">Cliquez sur la définition de build **Résumé** lien pour afficher un historique des builds avec la définition de :</span><span class="sxs-lookup"><span data-stu-id="631a1-311">Click the build definition's **Summary** link to view a history of builds with the definition:</span></span>

![Historique de capture d’écran montrant build définition](media/cicd/build-definition-summary.png)

<span data-ttu-id="631a1-313">Dans la page résultante, cliquez sur le lien correspondant au numéro de build unique :</span><span class="sxs-lookup"><span data-stu-id="631a1-313">On the resulting page, click the link corresponding to the unique build number:</span></span>

![Page de résumé de définition de capture d’écran montrant build](media/cicd/build-definition-completed.png)

<span data-ttu-id="631a1-315">Un résumé de cette build spécifique s’affiche.</span><span class="sxs-lookup"><span data-stu-id="631a1-315">A summary of this specific build is displayed.</span></span> <span data-ttu-id="631a1-316">Cliquez sur le **artefacts** onglet et notez le *drop* dossier produit par la build est répertorié :</span><span class="sxs-lookup"><span data-stu-id="631a1-316">Click the **Artifacts** tab, and notice the *drop* folder produced by the build is listed:</span></span>

![Capture d’écran montrant les artefacts de définition de build - dossier de dépôt](media/cicd/build-definition-artifacts.png)

<span data-ttu-id="631a1-318">Utilisez le **télécharger** et **Explorer** des liens pour inspecter les artefacts publiés.</span><span class="sxs-lookup"><span data-stu-id="631a1-318">Use the **Download** and **Explore** links to inspect the published artifacts.</span></span>

### <a name="release-pipeline"></a><span data-ttu-id="631a1-319">Pipeline de versions</span><span class="sxs-lookup"><span data-stu-id="631a1-319">Release pipeline</span></span>

<span data-ttu-id="631a1-320">Un pipeline de mise en production a été créé avec le nom *MyFirstProject-ASP.NET Core-CD*:</span><span class="sxs-lookup"><span data-stu-id="631a1-320">A release pipeline was created with the name *MyFirstProject-ASP.NET Core-CD*:</span></span>

![Vue d’ensemble du pipeline capture d’écran montrant mise en production](media/cicd/release-definition-overview.png)

<span data-ttu-id="631a1-322">Les deux principaux composants du pipeline de versions sont les **artefacts** et **environnements**.</span><span class="sxs-lookup"><span data-stu-id="631a1-322">The two major components of the release pipeline are the **Artifacts** and the **Environments**.</span></span> <span data-ttu-id="631a1-323">Clic sur la zone dans le **artefacts** section, vous affichez le panneau de configuration suivante :</span><span class="sxs-lookup"><span data-stu-id="631a1-323">Clicking the box in the **Artifacts** section reveals the following panel:</span></span>

![Artefacts de capture d’écran montrant version pipeline](media/cicd/release-definition-artifacts.png)

<span data-ttu-id="631a1-325">Le **Source (définition de Build)** valeur représente la définition de build à laquelle est lié ce pipeline de mise en production.</span><span class="sxs-lookup"><span data-stu-id="631a1-325">The **Source (Build definition)** value represents the build definition to which this release pipeline is linked.</span></span> <span data-ttu-id="631a1-326">Le *.zip* fichier produit par une exécution réussie de la définition de build est fourni pour le *Production* environnement pour le déploiement vers Azure.</span><span class="sxs-lookup"><span data-stu-id="631a1-326">The *.zip* file produced by a successful run of the build definition is provided to the *Production* environment for deployment to Azure.</span></span> <span data-ttu-id="631a1-327">Cliquez sur le *1 phase, 2 tâches* lien dans le *Production* boîte d’environnement pour afficher les tâches de pipeline de mise en production :</span><span class="sxs-lookup"><span data-stu-id="631a1-327">Click the *1 phase, 2 tasks* link in the *Production* environment box to view the release pipeline tasks:</span></span>

![Capture d’écran affichant les tâches pipeline mise en production](media/cicd/release-definition-tasks.png)

<span data-ttu-id="631a1-329">Le pipeline de mise en production est composé de deux tâches : *Déployer Azure App Service à l’emplacement* et *gérer Azure App Service - Slot Swap*.</span><span class="sxs-lookup"><span data-stu-id="631a1-329">The release pipeline consists of two tasks: *Deploy Azure App Service to Slot* and *Manage Azure App Service - Slot Swap*.</span></span> <span data-ttu-id="631a1-330">En cliquant sur la première tâche, vous affichez la configuration de la tâche suivante :</span><span class="sxs-lookup"><span data-stu-id="631a1-330">Clicking the first task reveals the following task configuration:</span></span>

![Tâche de déploiement du pipeline de versions de capture d’écran montrant](media/cicd/release-definition-task1.png)

<span data-ttu-id="631a1-332">Abonnement Azure, type de service, nom de l’application web, groupe de ressources et emplacement de déploiement sont définies dans la tâche de déploiement.</span><span class="sxs-lookup"><span data-stu-id="631a1-332">The Azure subscription, service type, web app name, resource group, and deployment slot are defined in the deployment task.</span></span> <span data-ttu-id="631a1-333">Le **Package ou dossier** conserve de la zone de texte le *.zip* chemin d’accès du fichier à extraire et déployée sur le *intermédiaire* emplacement de la *mywebapp\<unique _numéro\>*  application web.</span><span class="sxs-lookup"><span data-stu-id="631a1-333">The **Package or folder** textbox holds the *.zip* file path to be extracted and deployed to the *staging* slot of the *mywebapp\<unique_number\>* web app.</span></span>

<span data-ttu-id="631a1-334">En cliquant sur la tâche de permutation d’emplacement révèle la configuration de la tâche suivante :</span><span class="sxs-lookup"><span data-stu-id="631a1-334">Clicking the slot swap task reveals the following task configuration:</span></span>

![Tâche de capture d’écran montrant version pipeline slot swap](media/cicd/release-definition-task2.png)

<span data-ttu-id="631a1-336">L’abonnement, groupe de ressources, type de service, nom de l’application web et les détails d’emplacement de déploiement sont fournis.</span><span class="sxs-lookup"><span data-stu-id="631a1-336">The subscription, resource group, service type, web app name, and deployment slot details are provided.</span></span> <span data-ttu-id="631a1-337">Le **échanger avec Production** case à cocher est activée.</span><span class="sxs-lookup"><span data-stu-id="631a1-337">The **Swap with Production** check box is checked.</span></span> <span data-ttu-id="631a1-338">Par conséquent, les bits déploiement sur le *intermédiaire* emplacement sont échangé avec l’environnement de production.</span><span class="sxs-lookup"><span data-stu-id="631a1-338">Consequently, the bits deployed to the *staging* slot are swapped into the production environment.</span></span>

## <a name="additional-reading"></a><span data-ttu-id="631a1-339">Lecture supplémentaire</span><span class="sxs-lookup"><span data-stu-id="631a1-339">Additional reading</span></span>

* [<span data-ttu-id="631a1-340">Créer son premier pipeline avec Azure Pipelines</span><span class="sxs-lookup"><span data-stu-id="631a1-340">Create your first pipeline with Azure Pipelines</span></span>](/azure/devops/pipelines/get-started-yaml)
* [<span data-ttu-id="631a1-341">Projet de build et de .NET Core</span><span class="sxs-lookup"><span data-stu-id="631a1-341">Build and .NET Core project</span></span>](/azure/devops/pipelines/languages/dotnet-core)
* [<span data-ttu-id="631a1-342">Déployer une application web avec les Pipelines d’Azure</span><span class="sxs-lookup"><span data-stu-id="631a1-342">Deploy a web app with Azure Pipelines</span></span>](/azure/devops/pipelines/targets/webapp)

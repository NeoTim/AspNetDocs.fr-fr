---
uid: identity/overview/features-api/best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure
title: Déploiement de mots de passe et d’autres données sensibles dans ASP.NET et Azure App Service-ASP.NET 4. x
author: Rick-Anderson
description: Ce didacticiel montre comment votre code peut stocker et accéder en toute sécurité aux informations sécurisées. Le point le plus important est que vous ne devez jamais stocker les mots de passe ou autres...
ms.author: riande
ms.date: 05/21/2015
ms.assetid: 97902c66-cb61-4d11-be52-73f962f2db0a
ms.custom: seoapril2019
msc.legacyurl: /identity/overview/features-api/best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure
msc.type: authoredcontent
ms.openlocfilehash: 8356a90611f791779cc4ff4730038d82cd76242f
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78584321"
---
# <a name="best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure-app-service"></a><span data-ttu-id="1f8d5-104">Bonnes pratiques pour le déploiement des mots de passe et d’autres données sensibles sur ASP.NET et Azure App Service</span><span class="sxs-lookup"><span data-stu-id="1f8d5-104">Best practices for deploying passwords and other sensitive data to ASP.NET and Azure App Service</span></span>

<span data-ttu-id="1f8d5-105">par [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="1f8d5-105">by [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

> <span data-ttu-id="1f8d5-106">Ce didacticiel montre comment votre code peut stocker et accéder en toute sécurité aux informations sécurisées.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-106">This tutorial shows how your code can securely store and access secure information.</span></span> <span data-ttu-id="1f8d5-107">Le point le plus important est que vous ne devez jamais stocker les mots de passe ou d’autres données sensibles dans le code source, et vous ne devez pas utiliser les clés secrètes de production en mode de développement et de test.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-107">The most important point is you should never store passwords or other sensitive data in source code, and you shouldn't use production secrets in development and test mode.</span></span>
> 
> <span data-ttu-id="1f8d5-108">L’exemple de code est une application console tâche Web simple et une application ASP.NET MVC qui doit accéder à un mot de passe de chaîne de connexion à la base de données, Twilio, Google et SendGrid clés sécurisées.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-108">The sample code is a simple WebJob console app and a ASP.NET MVC app that needs access to a database connection string password, Twilio, Google and SendGrid secure keys.</span></span>
> 
> <span data-ttu-id="1f8d5-109">Les paramètres locaux et PHP sont également mentionnés.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-109">On premise settings and PHP is also mentioned.</span></span>

- [<span data-ttu-id="1f8d5-110">Utilisation de mots de passe dans l’environnement de développement</span><span class="sxs-lookup"><span data-stu-id="1f8d5-110">Working with passwords in the development environment</span></span>](#pwd)
- [<span data-ttu-id="1f8d5-111">Utilisation des chaînes de connexion dans l’environnement de développement</span><span class="sxs-lookup"><span data-stu-id="1f8d5-111">Working with connection strings in the development environment</span></span>](#con)
- [<span data-ttu-id="1f8d5-112">Applications console des tâches Web</span><span class="sxs-lookup"><span data-stu-id="1f8d5-112">WebJobs console apps</span></span>](#wj)
- [<span data-ttu-id="1f8d5-113">Déploiement de secrets sur Azure</span><span class="sxs-lookup"><span data-stu-id="1f8d5-113">Deploying secrets to Azure</span></span>](#da)
- [<span data-ttu-id="1f8d5-114">Remarques sur les versions locale et PHP</span><span class="sxs-lookup"><span data-stu-id="1f8d5-114">Notes for On-Premise and PHP</span></span>](#not)
- [<span data-ttu-id="1f8d5-115">Ressources supplémentaires pour MSBuild</span><span class="sxs-lookup"><span data-stu-id="1f8d5-115">Additional Resources</span></span>](#addRes)

<a id="pwd"></a>
## <a name="working-with-passwords-in-the-development-environment"></a><span data-ttu-id="1f8d5-116">Utilisation de mots de passe dans l’environnement de développement</span><span class="sxs-lookup"><span data-stu-id="1f8d5-116">Working with passwords in the development environment</span></span>

<span data-ttu-id="1f8d5-117">Les didacticiels affichent fréquemment des données sensibles dans le code source, avec un inconvénient que vous ne devez jamais stocker des données sensibles dans le code source.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-117">Tutorials frequently show sensitive data in source code, hopefully with a caveat that you should never store sensitive data in source code.</span></span> <span data-ttu-id="1f8d5-118">Par exemple, le didacticiel mon [application ASP.NET MVC 5 avec SMS et E-mail 2FA](../../../mvc/overview/security/aspnet-mvc-5-app-with-sms-and-email-two-factor-authentication.md) présente les éléments suivants dans le fichier *Web. config* :</span><span class="sxs-lookup"><span data-stu-id="1f8d5-118">For example, my [ASP.NET MVC 5 app with SMS and email 2FA](../../../mvc/overview/security/aspnet-mvc-5-app-with-sms-and-email-two-factor-authentication.md) tutorial shows the following in the *web.config* file:</span></span>

[!code-xml[Main](best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure/samples/sample1.xml)]

<span data-ttu-id="1f8d5-119">Le fichier *Web. config* étant du code source, ces secrets ne doivent jamais être stockés dans ce fichier.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-119">The *web.config* file is source code, so these secrets should never be stored in that file.</span></span> <span data-ttu-id="1f8d5-120">Heureusement, l’élément `<appSettings>` a un attribut `file` qui vous permet de spécifier un fichier externe qui contient des paramètres de configuration d’application sensibles.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-120">Fortunately, the `<appSettings>` element has a `file` attribute that allows you to specify an external file that contains sensitive app config settings.</span></span> <span data-ttu-id="1f8d5-121">Vous pouvez déplacer tous vos secrets vers un fichier externe tant que le fichier externe n’est pas archivé dans votre arborescence source.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-121">You can move all your secrets to an external file as long as the external file is not checked into your source tree.</span></span> <span data-ttu-id="1f8d5-122">Par exemple, dans le balisage suivant, le fichier *AppSettingsSecrets. config* contient tous les secrets de l’application :</span><span class="sxs-lookup"><span data-stu-id="1f8d5-122">For example, in the following markup, the file *AppSettingsSecrets.config* contains all the app secrets:</span></span>

[!code-xml[Main](best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure/samples/sample2.xml)]

<span data-ttu-id="1f8d5-123">Le balisage dans le fichier externe (*AppSettingsSecrets. config* dans cet exemple) est le même balisage que celui du fichier *Web. config* :</span><span class="sxs-lookup"><span data-stu-id="1f8d5-123">The markup in the external file (*AppSettingsSecrets.config* in this sample), is the same markup found in the *web.config* file:</span></span>

[!code-xml[Main](best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure/samples/sample3.xml)]

<span data-ttu-id="1f8d5-124">Le runtime ASP.NET fusionne le contenu du fichier externe avec le balisage dans &lt;élément appSettings&gt;.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-124">The ASP.NET runtime merges the contents of the external file with the markup in &lt;appSettings&gt; element.</span></span> <span data-ttu-id="1f8d5-125">Le runtime ignore l’attribut de fichier si le fichier spécifié est introuvable.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-125">The runtime ignores the file attribute if the specified file cannot be found.</span></span>

> [!WARNING]
> <span data-ttu-id="1f8d5-126">Sécurité : n’ajoutez pas votre fichier *secrets. config* à votre projet ou archivez-le dans le contrôle de code source.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-126">Security - Do not add your *secrets .config* file to your project or check it into source control.</span></span> <span data-ttu-id="1f8d5-127">Par défaut, Visual Studio définit la `Build Action` sur `Content`, ce qui signifie que le fichier est déployé.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-127">By default, Visual Studio sets the `Build Action` to `Content`, which means the file is deployed.</span></span> <span data-ttu-id="1f8d5-128">Pour plus d’informations [, voir pourquoi tous les fichiers de mon dossier de projet ne sont-ils pas déployés ?](https://msdn.microsoft.com/library/ee942158(v=vs.110).aspx#can_i_exclude_specific_files_or_folders_from_deployment)</span><span class="sxs-lookup"><span data-stu-id="1f8d5-128">For more information see [Why don't all of the files in my project folder get deployed?](https://msdn.microsoft.com/library/ee942158(v=vs.110).aspx#can_i_exclude_specific_files_or_folders_from_deployment)</span></span> <span data-ttu-id="1f8d5-129">Bien que vous puissiez utiliser n’importe quelle extension pour le fichier *secrets. config* , il est préférable de conserver it *. config*, car les fichiers de configuration ne sont pas pris en charge par IIS.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-129">Although you can use any extension for the *secrets .config* file, it's best to keep it *.config*, as config files are not served by IIS.</span></span> <span data-ttu-id="1f8d5-130">Notez également que le fichier *AppSettingsSecrets. config* est constitué de deux niveaux de répertoire allant du fichier *Web. config* . il est donc complètement hors du répertoire de la solution.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-130">Notice also that the *AppSettingsSecrets.config* file is two directory levels up from the *web.config* file, so it's completely out of the solution directory.</span></span> <span data-ttu-id="1f8d5-131">En déplaçant le fichier hors du répertoire de la solution, &quot;git Add \*&quot; ne pas l’ajouter à votre référentiel.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-131">By moving the file out of the solution directory, &quot;git add \*&quot; won't add it to your repository.</span></span>

<a id="con"></a>
## <a name="working-with-connection-strings-in-the-development-environment"></a><span data-ttu-id="1f8d5-132">Utilisation des chaînes de connexion dans l’environnement de développement</span><span class="sxs-lookup"><span data-stu-id="1f8d5-132">Working with connection strings in the development environment</span></span>

<span data-ttu-id="1f8d5-133">Visual Studio crée de nouveaux projets ASP.NET qui [utilisent la](https://blogs.msdn.com/b/sqlexpress/archive/2011/07/12/introducing-localdb-a-better-sql-express.aspx)base de données locale.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-133">Visual Studio creates new ASP.NET projects that use [LocalDB](https://blogs.msdn.com/b/sqlexpress/archive/2011/07/12/introducing-localdb-a-better-sql-express.aspx).</span></span> <span data-ttu-id="1f8d5-134">La base de données locale a été créée spécifiquement pour l’environnement de développement.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-134">LocalDB was created specifically for the development environment.</span></span> <span data-ttu-id="1f8d5-135">Cela ne nécessite pas de mot de passe. par conséquent, vous n’avez rien à faire pour empêcher la vérification des secrets dans votre code source.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-135">It doesn't require a password, therefore you don't need to do anything to prevent secrets from being checked into your source code.</span></span> <span data-ttu-id="1f8d5-136">Certaines équipes de développement utilisent les versions complètes de SQL Server (ou d’autres SGBD) qui requièrent un mot de passe.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-136">Some development teams use the full versions of SQL Server (or other DBMS) that require a password.</span></span>

<span data-ttu-id="1f8d5-137">Vous pouvez utiliser l’attribut `configSource` pour remplacer l’ensemble du balisage `<connectionStrings>`.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-137">You can use the `configSource` attribute to replace the entire `<connectionStrings>` markup.</span></span> <span data-ttu-id="1f8d5-138">Contrairement à l’attribut `<appSettings>` `file` qui fusionne le balisage, l’attribut `configSource` remplace le balisage.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-138">Unlike the `<appSettings>` `file` attribute that merges the markup, the `configSource` attribute replaces the markup.</span></span> <span data-ttu-id="1f8d5-139">Le balisage suivant montre l’attribut `configSource` dans le fichier *Web. config* :</span><span class="sxs-lookup"><span data-stu-id="1f8d5-139">The following markup shows the `configSource` attribute in the *web.config* file:</span></span>

[!code-xml[Main](best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure/samples/sample4.xml?highlight=1)]

> [!NOTE]
> <span data-ttu-id="1f8d5-140">Si vous utilisez l’attribut `configSource` comme indiqué ci-dessus pour déplacer vos chaînes de connexion vers un fichier externe et que Visual Studio crée un nouveau site Web, il ne pourra pas détecter que vous utilisez une base de données, et vous n’aurez pas la possibilité de configurer la base de données lorsque vous publiez sur Azure à partir de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-140">If you use the `configSource` attribute as shown above to move your connection strings to an external file, and have Visual Studio create a new web site, it won't be able to detect you are using a database, and you won't get the option of configuring the database when you publish to Azure from Visual Studio.</span></span> <span data-ttu-id="1f8d5-141">Si vous utilisez l’attribut `configSource`, vous pouvez utiliser PowerShell pour créer et déployer votre site Web et votre base de données, ou vous pouvez créer le site Web et la base de données dans le portail avant de publier.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-141">If you are using the `configSource` attribute, you can use PowerShell to create and deploy your web site and database, or you can create the web site and the database in the portal before you publish.</span></span> <span data-ttu-id="1f8d5-142">Le script [New-AzureWebsitewithDB. ps1](https://gallery.technet.microsoft.com/scriptcenter/Ultimate-Create-Web-SQL-DB-9e0fdfd3) créera un nouveau site Web et une nouvelle base de données.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-142">The [New-AzureWebsitewithDB.ps1](https://gallery.technet.microsoft.com/scriptcenter/Ultimate-Create-Web-SQL-DB-9e0fdfd3) script will create a new web site and database.</span></span>

> [!WARNING]
> <span data-ttu-id="1f8d5-143">Sécurité : contrairement au fichier *AppSettingsSecrets. config* , le fichier de chaînes de connexion externe doit se trouver dans le même répertoire que le fichier *Web. config* racine. vous devez donc prendre des précautions pour éviter de l’archiver dans votre référentiel source.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-143">Security - Unlike the *AppSettingsSecrets.config* file, the external connection strings file must be in the same directory as the root *web.config* file, so you'll have to take precautions to ensure you don't check it into your source repository.</span></span>

> [!NOTE]
> <span data-ttu-id="1f8d5-144">**Avertissement de sécurité sur le fichier de secrets :** Une meilleure pratique consiste à ne pas utiliser les secrets de production dans le test et le développement.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-144">**Security Warning on secrets file:** A best practice is to not use production secrets in test and development.</span></span> <span data-ttu-id="1f8d5-145">L’utilisation de mots de passe de production dans les tests ou le développement entraîne des fuites.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-145">Using production passwords in test or development leaks those secrets.</span></span>

<a id="wj"></a>
## <a name="webjobs-console-apps"></a><span data-ttu-id="1f8d5-146">Applications console des tâches Web</span><span class="sxs-lookup"><span data-stu-id="1f8d5-146">WebJobs console apps</span></span>

<span data-ttu-id="1f8d5-147">Le fichier *app. config* utilisé par une application console ne prend pas en charge les chemins d’accès relatifs, mais il prend en charge les chemins absolus.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-147">The *app.config* file used by a console app doesn't support relative paths, but it does support absolute paths.</span></span> <span data-ttu-id="1f8d5-148">Vous pouvez utiliser un chemin d’accès absolu pour déplacer vos secrets en dehors de votre répertoire de projet.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-148">You can use an absolute path to move your secrets out of your project directory.</span></span> <span data-ttu-id="1f8d5-149">Le balisage suivant montre les secrets dans le fichier *C:\secrets\AppSettingsSecrets.config* et les données non sensibles dans le fichier *app. config* .</span><span class="sxs-lookup"><span data-stu-id="1f8d5-149">The following markup shows the secrets in the *C:\secrets\AppSettingsSecrets.config* file, and non sensitive data in the *app.config* file.</span></span>

[!code-xml[Main](best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure/samples/sample5.xml?highlight=2)]

<a id="da"></a>
## <a name="deploying-secrets-to-azure"></a><span data-ttu-id="1f8d5-150">Déploiement de secrets sur Azure</span><span class="sxs-lookup"><span data-stu-id="1f8d5-150">Deploying secrets to Azure</span></span>

<span data-ttu-id="1f8d5-151">Lorsque vous déployez votre application Web sur Azure, le fichier *AppSettingsSecrets. config* n’est pas déployé (c’est ce que vous voulez).</span><span class="sxs-lookup"><span data-stu-id="1f8d5-151">When you deploy your web app to Azure, the *AppSettingsSecrets.config* file won't be deployed (that's what you want).</span></span> <span data-ttu-id="1f8d5-152">Vous pouvez accéder à la [portail de gestion Azure](https://azure.microsoft.com/services/management-portal/) et les définir manuellement pour effectuer cette opération :</span><span class="sxs-lookup"><span data-stu-id="1f8d5-152">You could go to the [Azure Management Portal](https://azure.microsoft.com/services/management-portal/) and set them manually, to do that:</span></span>

1. <span data-ttu-id="1f8d5-153">Accédez à [https://portal.azure.com](https://portal.azure.com)et connectez-vous avec vos informations d’identification Azure.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-153">Go to [https://portal.azure.com](https://portal.azure.com), and sign in with your Azure credentials.</span></span>
2. <span data-ttu-id="1f8d5-154">Cliquez sur **parcourir &gt; Web Apps**, puis cliquez sur le nom de votre application Web.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-154">Click **Browse &gt; Web Apps**, then click the name of your web app.</span></span>
3. <span data-ttu-id="1f8d5-155">Cliquez sur **tous les paramètres &gt; paramètres**de l’application.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-155">Click **All settings &gt; Application settings**.</span></span>

<span data-ttu-id="1f8d5-156">Les **paramètres** de l’application et les valeurs de **chaîne de connexion** remplacent les mêmes paramètres dans le fichier *Web. config* .</span><span class="sxs-lookup"><span data-stu-id="1f8d5-156">The **app settings** and **connection string** values override the same settings in the *web.config* file.</span></span> <span data-ttu-id="1f8d5-157">Dans notre exemple, nous n’avons pas déployé ces paramètres dans Azure, mais si ces clés figuraient dans le fichier *Web. config* , les paramètres affichés sur le portail sont prioritaires.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-157">In our example, we did not deploy these settings to Azure, but if these keys were in the *web.config* file, the settings shown on the portal would take precedence.</span></span>

<span data-ttu-id="1f8d5-158">Une bonne pratique consiste à suivre un [flux de travail DevOps](../../../aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/automate-everything.md) et à utiliser [Azure PowerShell](https://azure.microsoft.com/documentation/articles/install-configure-powershell/) (ou un autre Framework comme [chef](http://www.opscode.com/chef/) ou [marionnette](http://puppetlabs.com/puppet/what-is-puppet)) pour automatiser la définition de ces valeurs dans Azure.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-158">A best practice is to follow a [DevOps workflow](../../../aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/automate-everything.md) and use [Azure PowerShell](https://azure.microsoft.com/documentation/articles/install-configure-powershell/) (or another framework such as [Chef](http://www.opscode.com/chef/) or [Puppet](http://puppetlabs.com/puppet/what-is-puppet)) to automate setting these values in Azure.</span></span> <span data-ttu-id="1f8d5-159">Le script PowerShell suivant utilise [Export-CliXml](http://www.powershellcookbook.com/recipe/PukO/securely-store-credentials-on-disk) pour exporter les secrets chiffrés sur le disque :</span><span class="sxs-lookup"><span data-stu-id="1f8d5-159">The following PowerShell script uses [Export-CliXml](http://www.powershellcookbook.com/recipe/PukO/securely-store-credentials-on-disk) to export the encrypted secrets to disk:</span></span>

[!code-powershell[Main](best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure/samples/sample6.ps1)]

<span data-ttu-id="1f8d5-160">Dans le script ci-dessus, « Name » est le nom de la clé secrète, par exemple «&quot;FB\_AppSecret&quot; ou «TwitterSecret ».</span><span class="sxs-lookup"><span data-stu-id="1f8d5-160">In the script above, ‘Name' is the name of the secret key, such as ‘&quot;FB\_AppSecret&quot; or "TwitterSecret".</span></span> <span data-ttu-id="1f8d5-161">Vous pouvez afficher le fichier. Credentials créé par le script dans votre navigateur.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-161">You can view the ".credential" file created by the script in your browser.</span></span> <span data-ttu-id="1f8d5-162">L’extrait de code ci-dessous teste chaque fichier d’informations d’identification et définit les secrets de l’application Web nommée :</span><span class="sxs-lookup"><span data-stu-id="1f8d5-162">The snippet below tests each of the credential files and sets the secrets for the named web app:</span></span>

[!code-powershell[Main](best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure/samples/sample7.ps1)]

> [!WARNING]
> <span data-ttu-id="1f8d5-163">Sécurité : n’incluez pas de mots de passe ou d’autres secrets dans le script PowerShell, ce qui a pour effet d’utiliser un script PowerShell pour déployer des données sensibles.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-163">Security - Don't include passwords or other secrets in the PowerShell script, doing so defeats the purpose of using a PowerShell script to deploy sensitive data.</span></span> <span data-ttu-id="1f8d5-164">L’applet de commande [d’obtention d’informations d’identification](https://technet.microsoft.com/library/hh849815.aspx) fournit un mécanisme sécurisé pour obtenir un mot de passe.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-164">The [Get-Credential](https://technet.microsoft.com/library/hh849815.aspx) cmdlet provides a secure mechanism to obtain a password.</span></span> <span data-ttu-id="1f8d5-165">L’utilisation d’une invite d’interface utilisateur peut empêcher la fuite d’un mot de passe.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-165">Using a UI prompt can prevent leaking a password.</span></span>

### <a name="deploying-db-connection-strings"></a><span data-ttu-id="1f8d5-166">Déploiement de chaînes de connexion à la base de BD</span><span class="sxs-lookup"><span data-stu-id="1f8d5-166">Deploying DB connection strings</span></span>

<span data-ttu-id="1f8d5-167">Les chaînes de connexion à la base de base sont gérées de la même façon que les paramètres d’application.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-167">DB connection strings are handled similarly to app settings.</span></span> <span data-ttu-id="1f8d5-168">Si vous déployez votre application Web à partir de Visual Studio, la chaîne de connexion est configurée pour vous.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-168">If you deploy your web app from Visual Studio, the connection string will be configured for you.</span></span> <span data-ttu-id="1f8d5-169">Vous pouvez le vérifier dans le portail.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-169">You can verify this in the portal.</span></span> <span data-ttu-id="1f8d5-170">La méthode recommandée pour définir la chaîne de connexion est avec PowerShell.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-170">The recommended way to set the connection string is with PowerShell.</span></span> <span data-ttu-id="1f8d5-171">Pour obtenir un exemple de script PowerShell, crée un site Web et une base de données et définit la chaîne de connexion dans le site Web, téléchargez [New-AzureWebsitewithDB. ps1](https://gallery.technet.microsoft.com/scriptcenter/Ultimate-Create-Web-SQL-DB-9e0fdfd3) à partir de la [bibliothèque de scripts Azure](https://gallery.technet.microsoft.com/scriptcenter/site/search?f%5B0%5D.Type=RootCategory&amp;f%5B0%5D.Value=WindowsAzure).</span><span class="sxs-lookup"><span data-stu-id="1f8d5-171">For an example of a PowerShell script the creates a website and database and sets the connection string in the website, download [New-AzureWebsitewithDB.ps1](https://gallery.technet.microsoft.com/scriptcenter/Ultimate-Create-Web-SQL-DB-9e0fdfd3) from the [Azure Script library](https://gallery.technet.microsoft.com/scriptcenter/site/search?f%5B0%5D.Type=RootCategory&amp;f%5B0%5D.Value=WindowsAzure).</span></span>

<a id="not"></a>
## <a name="notes-for-php"></a><span data-ttu-id="1f8d5-172">Notes pour PHP</span><span class="sxs-lookup"><span data-stu-id="1f8d5-172">Notes for PHP</span></span>

<span data-ttu-id="1f8d5-173">Étant donné que les paires clé-valeur pour les **paramètres d’application** et les **chaînes de connexion** sont stockées dans des variables d’environnement sur Azure App service, les développeurs qui utilisent des infrastructures d’applications Web (telles que PHP) peuvent facilement récupérer ces valeurs.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-173">Since the key-value pairs for both **app settings** and **connection strings** are stored in environment variables on Azure App Service, developers that use any web app frameworks (such as PHP) can easily retrieve these values.</span></span> <span data-ttu-id="1f8d5-174">Consultez le billet de blog [sites Web Windows Azure de Stefan Schackow : comment les chaînes d’application et les chaînes de connexion fonctionnent,](https://azure.microsoft.com/blog/2013/07/17/windows-azure-web-sites-how-application-strings-and-connection-strings-work/) qui montre un extrait de code php permettant de lire les paramètres d’application et les chaînes de connexion.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-174">See Stefan Schackow's [Windows Azure Web Sites: How Application Strings and Connection Strings Work](https://azure.microsoft.com/blog/2013/07/17/windows-azure-web-sites-how-application-strings-and-connection-strings-work/) blog post which shows a PHP snippet to read app settings and connection strings.</span></span>

## <a name="notes-for-on-premises-servers"></a><span data-ttu-id="1f8d5-175">Notes pour les serveurs locaux</span><span class="sxs-lookup"><span data-stu-id="1f8d5-175">Notes for on-premises servers</span></span>

<span data-ttu-id="1f8d5-176">Si vous effectuez un déploiement sur des serveurs Web locaux, vous pouvez sécuriser les secrets en [chiffrant les sections de configuration des fichiers de configuration](https://msdn.microsoft.com/library/ff647398.aspx).</span><span class="sxs-lookup"><span data-stu-id="1f8d5-176">If you are deploying to on-premises web servers, you can help secure secrets by [encrypting the configuration sections of configuration files](https://msdn.microsoft.com/library/ff647398.aspx).</span></span> <span data-ttu-id="1f8d5-177">Vous pouvez également utiliser la même approche que celle recommandée pour les sites Web Azure : conserver les paramètres de développement dans les fichiers de configuration et utiliser des valeurs de variables d’environnement pour les paramètres de production.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-177">As an alternative, you can use the same approach recommended for Azure Websites: keep development settings in configuration files, and use environment variable values for production settings.</span></span> <span data-ttu-id="1f8d5-178">Dans ce cas, toutefois, vous devez écrire le code de l’application pour une fonctionnalité automatique dans sites Web Azure : récupérer des paramètres à partir de variables d’environnement et utiliser ces valeurs à la place des paramètres du fichier de configuration, ou utiliser les paramètres du fichier de configuration quand les variables d’environnement sont introuvables.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-178">In this case, however, you have to write application code for functionality that is automatic in Azure Websites: retrieve settings from environment variables and use those values in place of configuration file settings, or use configuration file settings when environment variables are not found.</span></span>

<a id="addRes"></a>
## <a name="additional-resources"></a><span data-ttu-id="1f8d5-179">Ressources supplémentaires</span><span class="sxs-lookup"><span data-stu-id="1f8d5-179">Additional Resources</span></span>

<span data-ttu-id="1f8d5-180">Pour obtenir un exemple de script PowerShell qui crée une application Web et une base de données, définit la chaîne de connexion + paramètres de l’application, téléchargez [New-AzureWebsitewithDB. ps1](https://gallery.technet.microsoft.com/scriptcenter/Ultimate-Create-Web-SQL-DB-9e0fdfd3) à partir de la [bibliothèque de scripts Azure](https://gallery.technet.microsoft.com/scriptcenter/site/search?f%5B0%5D.Type=RootCategory&amp;f%5B0%5D.Value=WindowsAzure).</span><span class="sxs-lookup"><span data-stu-id="1f8d5-180">For an example of a PowerShell script that creates a web app + database, sets the connection string + app settings, download [New-AzureWebsitewithDB.ps1](https://gallery.technet.microsoft.com/scriptcenter/Ultimate-Create-Web-SQL-DB-9e0fdfd3) from the [Azure Script library](https://gallery.technet.microsoft.com/scriptcenter/site/search?f%5B0%5D.Type=RootCategory&amp;f%5B0%5D.Value=WindowsAzure).</span></span> 

<span data-ttu-id="1f8d5-181">Consultez [sites Web Windows Azure de Stefan Schackow : fonctionnement des chaînes d’application et des chaînes de connexion](https://azure.microsoft.com/blog/2013/07/17/windows-azure-web-sites-how-application-strings-and-connection-strings-work/)</span><span class="sxs-lookup"><span data-stu-id="1f8d5-181">See Stefan Schackow's [Windows Azure Web Sites: How Application Strings and Connection Strings Work](https://azure.microsoft.com/blog/2013/07/17/windows-azure-web-sites-how-application-strings-and-connection-strings-work/)</span></span>

<span data-ttu-id="1f8d5-182">Merci à Barry Dorrans ( [@blowdart](https://twitter.com/blowdart) ) et à Carlos farre pour la révision.</span><span class="sxs-lookup"><span data-stu-id="1f8d5-182">Special thanks to Barry Dorrans ( [@blowdart](https://twitter.com/blowdart) ) and Carlos Farre for reviewing.</span></span>

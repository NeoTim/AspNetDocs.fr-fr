---
uid: identity/overview/getting-started/introduction-to-aspnet-identity
title: Présentation de ASP.NET Identity-ASP.NET 4. x
author: jongalloway
description: Le système d’appartenance ASP.NET a été introduit avec ASP.NET 2,0 dans 2005, et depuis, de nombreuses modifications ont été apportées aux applications Web...
ms.author: riande
ms.date: 01/22/2019
ms.assetid: 38717fc1-5989-43cf-952d-4007cc1dd923
ms.custom: seoapril2019
msc.legacyurl: /identity/overview/getting-started/introduction-to-aspnet-identity
msc.type: authoredcontent
ms.openlocfilehash: 0268dfc16cd2cfb1e79ee14997a4c5eb247af950
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78583845"
---
# <a name="introduction-to-aspnet-identity"></a><span data-ttu-id="8a57d-103">Introduction à ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="8a57d-103">Introduction to ASP.NET Identity</span></span>

> <span data-ttu-id="8a57d-104">Le système d’appartenance ASP.NET a été introduit avec ASP.NET 2,0 dans 2005, et depuis, de nombreuses modifications ont été apportées à la façon dont les applications Web gèrent généralement l’authentification et l’autorisation.</span><span class="sxs-lookup"><span data-stu-id="8a57d-104">The ASP.NET membership system was introduced with ASP.NET 2.0 back in 2005, and since then there have been many changes in the ways web applications typically handle authentication and authorization.</span></span> <span data-ttu-id="8a57d-105">ASP.NET Identity est un nouvel aperçu de ce que le système d’appartenance doit être lorsque vous créez des applications modernes pour le Web, le téléphone ou la tablette.</span><span class="sxs-lookup"><span data-stu-id="8a57d-105">ASP.NET Identity is a fresh look at what the membership system should be when you are building modern applications for the web, phone, or tablet.</span></span>

## <a name="background-membership-in-aspnet"></a><span data-ttu-id="8a57d-106">Arrière-plan : appartenance à ASP.NET</span><span class="sxs-lookup"><span data-stu-id="8a57d-106">Background: Membership in ASP.NET</span></span>

### <a name="aspnet-membership"></a><span data-ttu-id="8a57d-107">Appartenance ASP.NET</span><span class="sxs-lookup"><span data-stu-id="8a57d-107">ASP.NET Membership</span></span>

<span data-ttu-id="8a57d-108">[L’appartenance à ASP.net](https://msdn.microsoft.com/library/yh26yfzy(v=VS.100).aspx) a été conçue pour répondre aux exigences d’appartenance de site qui étaient courantes dans 2005, qui impliquaient l’authentification par formulaire, et une base de données SQL Server pour les noms d’utilisateur, les mots de passe et les données de profil.</span><span class="sxs-lookup"><span data-stu-id="8a57d-108">[ASP.NET Membership](https://msdn.microsoft.com/library/yh26yfzy(v=VS.100).aspx) was designed to solve site membership requirements that were common in 2005, which involved Forms Authentication, and a SQL Server database for user names, passwords, and profile data.</span></span> <span data-ttu-id="8a57d-109">Aujourd’hui, il existe un vaste éventail d’options de stockage des données pour les applications Web, et la plupart des développeurs souhaitent permettre à leurs sites d’utiliser des fournisseurs d’identité sociale pour la fonctionnalité d’authentification et d’autorisation.</span><span class="sxs-lookup"><span data-stu-id="8a57d-109">Today there is a much broader array of data storage options for web applications, and most developers want to enable their sites to use social identity providers for authentication and authorization functionality.</span></span> <span data-ttu-id="8a57d-110">Les limitations de la conception de l’appartenance à ASP.NET rendent cette transition difficile :</span><span class="sxs-lookup"><span data-stu-id="8a57d-110">The limitations of ASP.NET Membership's design make this transition difficult:</span></span>

- <span data-ttu-id="8a57d-111">Le schéma de base de données a été conçu pour SQL Server et vous ne pouvez pas le modifier.</span><span class="sxs-lookup"><span data-stu-id="8a57d-111">The database schema was designed for SQL Server and you can't change it.</span></span> <span data-ttu-id="8a57d-112">Vous pouvez ajouter des informations de profil, mais les données supplémentaires sont empaquetées dans une table différente, ce qui rend difficile l’accès à tous les moyens, sauf via l’API du fournisseur de profils.</span><span class="sxs-lookup"><span data-stu-id="8a57d-112">You can add profile information, but the additional data is packed into a different table, which makes it difficult to access by any means except through the Profile Provider API.</span></span>
- <span data-ttu-id="8a57d-113">Le système fournisseur vous permet de modifier le magasin de données de stockage, mais le système est conçu autour des hypothèses appropriées pour une base de données relationnelle.</span><span class="sxs-lookup"><span data-stu-id="8a57d-113">The provider system enables you to change the backing data store, but the system is designed around assumptions appropriate for a relational database.</span></span> <span data-ttu-id="8a57d-114">Vous pouvez écrire un fournisseur pour stocker les informations d’appartenance dans un mécanisme de stockage non relationnel, tel que les tables de stockage Azure, mais vous devez ensuite contourner la conception relationnelle en écrivant beaucoup de code et de nombreuses exceptions de `System.NotImplementedException` pour les méthodes qui ne s’appliquent pas aux bases de données NoSQL.</span><span class="sxs-lookup"><span data-stu-id="8a57d-114">You can write a provider to store membership information in a non-relational storage mechanism, such as Azure Storage Tables, but then you have to work around the relational design by writing much code and a lot of `System.NotImplementedException` exceptions for methods that don't apply to NoSQL databases.</span></span>
- <span data-ttu-id="8a57d-115">Étant donné que la fonctionnalité de connexion/déconnexion est basée sur l’authentification par formulaire, le système d’appartenance ne peut pas utiliser [OWIN](../../../aspnet/overview/owin-and-katana/an-overview-of-project-katana.md).</span><span class="sxs-lookup"><span data-stu-id="8a57d-115">Since the log-in/log-out functionality is based on Forms Authentication, the membership system can't use [OWIN](../../../aspnet/overview/owin-and-katana/an-overview-of-project-katana.md).</span></span> <span data-ttu-id="8a57d-116">OWIN inclut des composants d’intergiciel (middleware) pour l’authentification, notamment la prise en charge des connexions utilisant des fournisseurs d’identité externes (tels que les comptes Microsoft, Facebook, Google, Twitter) et les connexions à l’aide de comptes professionnels à partir de Active Directory locaux ou Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="8a57d-116">OWIN includes middleware components for authentication, including support for log-ins using external identity providers (like Microsoft Accounts, Facebook, Google, Twitter), and log-ins using organizational accounts from on-premises Active Directory or Azure Active Directory.</span></span> <span data-ttu-id="8a57d-117">OWIN prend également en charge OAuth 2,0, JWT et CORS.</span><span class="sxs-lookup"><span data-stu-id="8a57d-117">OWIN also includes support for OAuth 2.0, JWT and CORS.</span></span>

### <a name="aspnet-simple-membership"></a><span data-ttu-id="8a57d-118">ASP.NET simple</span><span class="sxs-lookup"><span data-stu-id="8a57d-118">ASP.NET Simple Membership</span></span>

<span data-ttu-id="8a57d-119">[ASP.NET simple Membership](../../../web-pages/overview/security/16-adding-security-and-membership.md) a été développé en tant que système d’appartenance pour pages Web ASP.net.</span><span class="sxs-lookup"><span data-stu-id="8a57d-119">[ASP.NET simple membership](../../../web-pages/overview/security/16-adding-security-and-membership.md) was developed as a membership system for ASP.NET Web Pages.</span></span> <span data-ttu-id="8a57d-120">Elle a été publiée avec WebMatrix et Visual Studio 2010 SP1.</span><span class="sxs-lookup"><span data-stu-id="8a57d-120">It was released with WebMatrix and Visual Studio 2010 SP1.</span></span> <span data-ttu-id="8a57d-121">L’objectif de l’appartenance simple était de faciliter l’ajout de la fonctionnalité d’appartenance à une application Web pages.</span><span class="sxs-lookup"><span data-stu-id="8a57d-121">The goal of Simple Membership was to make it easy to add membership functionality to a Web Pages application.</span></span>

<span data-ttu-id="8a57d-122">L’appartenance simple a facilité la personnalisation des informations de profil utilisateur, mais elle partage toujours les autres problèmes avec l’appartenance ASP.NET et présente certaines limitations :</span><span class="sxs-lookup"><span data-stu-id="8a57d-122">Simple Membership did make it easier to customize user profile information, but it still shares the other problems with ASP.NET Membership, and it has some limitations:</span></span>

- <span data-ttu-id="8a57d-123">Il était difficile de conserver les données du système d’appartenance dans un magasin non relationnel.</span><span class="sxs-lookup"><span data-stu-id="8a57d-123">It was hard to persist membership system data in a non-relational store.</span></span>
- <span data-ttu-id="8a57d-124">Vous ne pouvez pas l’utiliser avec OWIN.</span><span class="sxs-lookup"><span data-stu-id="8a57d-124">You can't use it with OWIN.</span></span>
- <span data-ttu-id="8a57d-125">Il ne fonctionne pas correctement avec les fournisseurs d’appartenances ASP.NET existants et n’est pas extensible.</span><span class="sxs-lookup"><span data-stu-id="8a57d-125">It doesn't work well with existing ASP.NET Membership providers, and it's not extensible.</span></span>

### <a name="aspnet-universal-providers"></a><span data-ttu-id="8a57d-126">Fournisseurs universels ASP.NET</span><span class="sxs-lookup"><span data-stu-id="8a57d-126">ASP.NET Universal Providers</span></span>

<span data-ttu-id="8a57d-127">[Fournisseurs universels ASP.net](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx) ont été développées pour permettre la conservation des informations d’appartenance dans Microsoft Azure SQL Database, et elles fonctionnent également avec SQL Server Compact.</span><span class="sxs-lookup"><span data-stu-id="8a57d-127">[ASP.NET Universal Providers](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx) were developed to make it possible to persist membership information in Microsoft Azure SQL Database, and they also work with SQL Server Compact.</span></span> <span data-ttu-id="8a57d-128">Les Fournisseurs universels ont été créés sur Entity Framework Code First, ce qui signifie que le Fournisseurs universels peut être utilisé pour conserver les données dans n’importe quel magasin pris en charge par EF.</span><span class="sxs-lookup"><span data-stu-id="8a57d-128">The Universal Providers were built on Entity Framework Code First, which means that the Universal Providers can be used to persist data in any store supported by EF.</span></span> <span data-ttu-id="8a57d-129">Avec la Fournisseurs universels, le schéma de la base de données a également été nettoyé beaucoup.</span><span class="sxs-lookup"><span data-stu-id="8a57d-129">With the Universal Providers, the database schema was cleaned up quite a lot as well.</span></span>

<span data-ttu-id="8a57d-130">Les Fournisseurs universels reposent sur l’infrastructure d’appartenance ASP.NET. elles présentent donc les mêmes limitations que le fournisseur SqlMembership.</span><span class="sxs-lookup"><span data-stu-id="8a57d-130">The Universal Providers are built on the ASP.NET Membership infrastructure, so they still carry the same limitations as the SqlMembership Provider.</span></span> <span data-ttu-id="8a57d-131">Autrement dit, elles ont été conçues pour les bases de données relationnelles et il est difficile de personnaliser les informations sur les profils et les utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="8a57d-131">That is, they were designed for relational databases and it's hard to customize profile and user information.</span></span> <span data-ttu-id="8a57d-132">Ces fournisseurs continuent également à utiliser l’authentification par formulaire pour les fonctionnalités de connexion et de déconnexion.</span><span class="sxs-lookup"><span data-stu-id="8a57d-132">These providers also still use Forms Authentication for sign-in and sign-out functionality.</span></span>

## <a name="aspnet-identity"></a><span data-ttu-id="8a57d-133">ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="8a57d-133">ASP.NET Identity</span></span>

<span data-ttu-id="8a57d-134">À mesure que le témoignage d’appartenance dans ASP.NET a évolué au fil des années, l’équipe ASP.NET a appris beaucoup de commentaires des clients.</span><span class="sxs-lookup"><span data-stu-id="8a57d-134">As the membership story in ASP.NET has evolved over the years, the ASP.NET team has learned a lot from feedback from customers.</span></span>

<span data-ttu-id="8a57d-135">L’hypothèse selon laquelle les utilisateurs se connecteront en entrant un nom d’utilisateur et un mot de passe qu’ils ont inscrits dans votre propre application n’est plus valide.</span><span class="sxs-lookup"><span data-stu-id="8a57d-135">The assumption that users will sign in by entering a user name and password that they have registered in your own application is no longer valid.</span></span> <span data-ttu-id="8a57d-136">Le Web est devenu plus social.</span><span class="sxs-lookup"><span data-stu-id="8a57d-136">The web has become more social.</span></span> <span data-ttu-id="8a57d-137">Les utilisateurs interagissent les uns avec les autres en temps réel via des réseaux sociaux tels que Facebook, Twitter et d’autres sites Web sociaux.</span><span class="sxs-lookup"><span data-stu-id="8a57d-137">Users are interacting with each other in real time through social channels such as Facebook, Twitter, and other social web sites.</span></span> <span data-ttu-id="8a57d-138">Les développeurs souhaitent que les utilisateurs puissent se connecter à l’aide de leurs identités sociales afin qu’ils puissent bénéficier d’une expérience riche sur leurs sites Web.</span><span class="sxs-lookup"><span data-stu-id="8a57d-138">Developers want users to be able to sign in with their social identities so that they can have a rich experience on their web sites.</span></span> <span data-ttu-id="8a57d-139">Un système d’appartenance moderne doit activer les journaux de redirection pour les fournisseurs d’authentification tels que Facebook, Twitter et d’autres.</span><span class="sxs-lookup"><span data-stu-id="8a57d-139">A modern membership system must enable redirection-based log-ins to authentication providers such as Facebook, Twitter, and others.</span></span>

<span data-ttu-id="8a57d-140">Au fur et à mesure de l’évolution du développement Web, les modèles de développement Web étaient les mêmes.</span><span class="sxs-lookup"><span data-stu-id="8a57d-140">As web development evolved, so did the patterns of web development.</span></span> <span data-ttu-id="8a57d-141">Le test unitaire du code d’application est devenu un problème fondamental pour les développeurs d’applications.</span><span class="sxs-lookup"><span data-stu-id="8a57d-141">Unit testing of application code became a core concern for application developers.</span></span> <span data-ttu-id="8a57d-142">Dans 2008, ASP.NET a ajouté une nouvelle infrastructure basée sur le modèle MVC (Model-View-Controller), en partie pour aider les développeurs à créer des applications ASP.NET de test unitaire.</span><span class="sxs-lookup"><span data-stu-id="8a57d-142">In 2008 ASP.NET added a new framework based on the Model-View-Controller (MVC) pattern, in part to help developers build unit testable ASP.NET applications.</span></span> <span data-ttu-id="8a57d-143">Les développeurs souhaitant effectuer des tests unitaires sur leur logique d’application souhaitaient également pouvoir le faire avec le système d’appartenance.</span><span class="sxs-lookup"><span data-stu-id="8a57d-143">Developers who wanted to unit test their application logic also wanted to be able to do that with the membership system.</span></span>

<span data-ttu-id="8a57d-144">En tenant compte de ces modifications dans le développement d’applications Web, ASP.NET Identity a été développé avec les objectifs suivants :</span><span class="sxs-lookup"><span data-stu-id="8a57d-144">Considering these changes in web application development, ASP.NET Identity was developed with the following goals:</span></span>

- <span data-ttu-id="8a57d-145">**Un système ASP.NET Identity**</span><span class="sxs-lookup"><span data-stu-id="8a57d-145">**One ASP.NET Identity system**</span></span>

    - <span data-ttu-id="8a57d-146">ASP.NET Identity peut être utilisé avec toutes les infrastructures ASP.NET, telles que ASP.NET MVC, Web Forms, les pages Web, l’API Web et Signalr.</span><span class="sxs-lookup"><span data-stu-id="8a57d-146">ASP.NET Identity can be used with all of the ASP.NET frameworks, such as ASP.NET MVC, Web Forms, Web Pages, Web API, and SignalR.</span></span>
    - <span data-ttu-id="8a57d-147">ASP.NET Identity peut être utilisé lorsque vous créez des applications Web, de téléphone, de stockage ou hybrides.</span><span class="sxs-lookup"><span data-stu-id="8a57d-147">ASP.NET Identity can be used when you are building web, phone, store, or hybrid applications.</span></span>
- <span data-ttu-id="8a57d-148">**Facilité de connexion des données de profil relatives à l’utilisateur**</span><span class="sxs-lookup"><span data-stu-id="8a57d-148">**Ease of plugging in profile data about the user**</span></span>

    - <span data-ttu-id="8a57d-149">Vous contrôlez le schéma des informations d’utilisateur et de profil.</span><span class="sxs-lookup"><span data-stu-id="8a57d-149">You have control over the schema of user and profile information.</span></span> <span data-ttu-id="8a57d-150">Par exemple, vous pouvez facilement permettre au système de stocker les dates de naissance entrées par les utilisateurs lorsqu’ils inscrivent un compte dans votre application.</span><span class="sxs-lookup"><span data-stu-id="8a57d-150">For example, you can easily enable the system to store birth dates entered by users when they register an account in your application.</span></span>

- <span data-ttu-id="8a57d-151">**Contrôle de persistance**</span><span class="sxs-lookup"><span data-stu-id="8a57d-151">**Persistence control**</span></span>

    - <span data-ttu-id="8a57d-152">Par défaut, le système de ASP.NET Identity stocke toutes les informations utilisateur dans une base de données.</span><span class="sxs-lookup"><span data-stu-id="8a57d-152">By default, the ASP.NET Identity system stores all the user information in a database.</span></span> <span data-ttu-id="8a57d-153">ASP.NET Identity utilise Entity Framework Code First pour implémenter l’ensemble de son mécanisme de persistance.</span><span class="sxs-lookup"><span data-stu-id="8a57d-153">ASP.NET Identity uses Entity Framework Code First to implement all of its persistence mechanism.</span></span>
    - <span data-ttu-id="8a57d-154">Étant donné que vous contrôlez le schéma de base de données, les tâches courantes telles que la modification des noms de tables ou la modification du type de données des clés primaires sont simples à effectuer.</span><span class="sxs-lookup"><span data-stu-id="8a57d-154">Since you control the database schema, common tasks such as changing table names or changing the data type of primary keys is simple to do.</span></span>
    - <span data-ttu-id="8a57d-155">Il est facile de brancher différents mécanismes de stockage tels que SharePoint, le service de table de stockage Azure, les bases de données NoSQL, etc., sans avoir à lever `System.NotImplementedExceptions` exceptions.</span><span class="sxs-lookup"><span data-stu-id="8a57d-155">It's easy to plug in different storage mechanisms such as SharePoint, Azure Storage Table Service, NoSQL databases, etc., without having to throw `System.NotImplementedExceptions` exceptions.</span></span>
- <span data-ttu-id="8a57d-156">**Testabilité unitaire**</span><span class="sxs-lookup"><span data-stu-id="8a57d-156">**Unit testability**</span></span>

    - <span data-ttu-id="8a57d-157">ASP.NET Identity rend l’application Web plus testable en unités.</span><span class="sxs-lookup"><span data-stu-id="8a57d-157">ASP.NET Identity makes the web application more unit testable.</span></span> <span data-ttu-id="8a57d-158">Vous pouvez écrire des tests unitaires pour les parties de votre application qui utilisent ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="8a57d-158">You can write unit tests for the parts of your application that use ASP.NET Identity.</span></span>
- <span data-ttu-id="8a57d-159">**Fournisseur de rôles**</span><span class="sxs-lookup"><span data-stu-id="8a57d-159">**Role provider**</span></span>

    - <span data-ttu-id="8a57d-160">Il existe un fournisseur de rôle qui vous permet de restreindre l’accès aux parties de votre application par rôles.</span><span class="sxs-lookup"><span data-stu-id="8a57d-160">There is a role provider which lets you restrict access to parts of your application by roles.</span></span> <span data-ttu-id="8a57d-161">Vous pouvez facilement créer des rôles tels que « admin » et ajouter des utilisateurs aux rôles.</span><span class="sxs-lookup"><span data-stu-id="8a57d-161">You can easily create roles such as "Admin" and add users to roles.</span></span>
- <span data-ttu-id="8a57d-162">**Basée sur les revendications**</span><span class="sxs-lookup"><span data-stu-id="8a57d-162">**Claims Based**</span></span>

    - <span data-ttu-id="8a57d-163">ASP.NET Identity prend en charge l’authentification basée sur les revendications, où l’identité de l’utilisateur est représentée sous la forme d’un ensemble de revendications.</span><span class="sxs-lookup"><span data-stu-id="8a57d-163">ASP.NET Identity supports claims-based authentication, where the user's identity is represented as a set of claims.</span></span> <span data-ttu-id="8a57d-164">Les revendications permettent aux développeurs d’être beaucoup plus expressifs pour décrire l’identité d’un utilisateur que les rôles le permettent.</span><span class="sxs-lookup"><span data-stu-id="8a57d-164">Claims allow developers to be a lot more expressive in describing a user's identity than roles allow.</span></span> <span data-ttu-id="8a57d-165">Tandis que l’appartenance à un rôle n’est qu’une valeur booléenne (membre ou non membre), une revendication peut inclure des informations détaillées sur l’identité et l’appartenance de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8a57d-165">Whereas role membership is just a boolean (member or non-member), a claim can include rich information about the user's identity and membership.</span></span>
- <span data-ttu-id="8a57d-166">**Fournisseurs de connexion sociale**</span><span class="sxs-lookup"><span data-stu-id="8a57d-166">**Social Login Providers**</span></span>

    - <span data-ttu-id="8a57d-167">Vous pouvez facilement ajouter des journaux sociaux tels que Microsoft Account, Facebook, Twitter, Google et d’autres à votre application, et stocker les données spécifiques à l’utilisateur dans votre application.</span><span class="sxs-lookup"><span data-stu-id="8a57d-167">You can easily add social log-ins such as Microsoft Account, Facebook, Twitter, Google, and others to your application, and store the user-specific data in your application.</span></span>

- <span data-ttu-id="8a57d-168">**Intégration de OWIN**</span><span class="sxs-lookup"><span data-stu-id="8a57d-168">**OWIN Integration**</span></span>

    - <span data-ttu-id="8a57d-169">L’authentification ASP.NET est désormais basée sur un intergiciel (middleware) OWIN qui peut être utilisé sur n’importe quel hôte OWIN.</span><span class="sxs-lookup"><span data-stu-id="8a57d-169">ASP.NET authentication is now based on OWIN middleware that can be used on any OWIN-based host.</span></span> <span data-ttu-id="8a57d-170">ASP.NET Identity n’a aucune dépendance vis-à-vis de System. Web.</span><span class="sxs-lookup"><span data-stu-id="8a57d-170">ASP.NET Identity does not have any dependency on System.Web.</span></span> <span data-ttu-id="8a57d-171">Il s’agit d’une infrastructure OWIN entièrement compatible qui peut être utilisée dans n’importe quelle application hébergée par OWIN.</span><span class="sxs-lookup"><span data-stu-id="8a57d-171">It is a fully compliant OWIN framework and can be used in any OWIN hosted application.</span></span>
    - <span data-ttu-id="8a57d-172">ASP.NET Identity utilise l’authentification OWIN pour la connexion et la déconnexion des utilisateurs du site Web.</span><span class="sxs-lookup"><span data-stu-id="8a57d-172">ASP.NET Identity uses OWIN Authentication for log-in/log-out of users in the web site.</span></span> <span data-ttu-id="8a57d-173">Cela signifie qu’au lieu d’utiliser FormsAuthentication pour générer le cookie, l’application utilise OWIN CookieAuthentication pour ce faire.</span><span class="sxs-lookup"><span data-stu-id="8a57d-173">This means that instead of using FormsAuthentication to generate the cookie, the application uses OWIN CookieAuthentication to do that.</span></span>
- <span data-ttu-id="8a57d-174">**Package NuGet**</span><span class="sxs-lookup"><span data-stu-id="8a57d-174">**NuGet package**</span></span>

    - <span data-ttu-id="8a57d-175">ASP.NET Identity est redistribuée sous la forme d’un package NuGet qui est installé dans le ASP.NET MVC, Web Forms et les modèles d’API Web fournis avec Visual Studio 2017.</span><span class="sxs-lookup"><span data-stu-id="8a57d-175">ASP.NET Identity is redistributed as a NuGet package which is installed in the ASP.NET MVC, Web Forms and Web API templates that ship with Visual Studio 2017.</span></span> <span data-ttu-id="8a57d-176">Vous pouvez télécharger ce package NuGet à partir de la galerie NuGet.</span><span class="sxs-lookup"><span data-stu-id="8a57d-176">You can download this NuGet package from the NuGet gallery.</span></span>
    - <span data-ttu-id="8a57d-177">La libération d’ASP.NET Identity en tant que package NuGet permet à l’équipe ASP.NET d’itérer plus facilement sur les nouvelles fonctionnalités et les correctifs de bogues, et de les fournir aux développeurs de manière agile.</span><span class="sxs-lookup"><span data-stu-id="8a57d-177">Releasing ASP.NET Identity as a NuGet package makes it easier for the ASP.NET team to iterate on new features and bug fixes, and deliver these to developers in an agile manner.</span></span>

## <a name="get-started-with-aspnet-identity"></a><span data-ttu-id="8a57d-178">Prise en main de ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="8a57d-178">Get started with ASP.NET Identity</span></span>

<span data-ttu-id="8a57d-179">ASP.NET Identity est utilisé dans les modèles de projet Visual Studio 2017 pour ASP.NET MVC, Web Forms, l’API Web et SPA.</span><span class="sxs-lookup"><span data-stu-id="8a57d-179">ASP.NET Identity is used in the Visual Studio 2017 project templates for ASP.NET MVC, Web Forms, Web API and SPA.</span></span> <span data-ttu-id="8a57d-180">Dans cette procédure pas à pas, nous allons illustrer comment les modèles de projet utilisent ASP.NET Identity pour ajouter des fonctionnalités permettant de s’inscrire, de se connecter et de déconnecter un utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8a57d-180">In this walkthrough, we'll illustrate how the project templates use ASP.NET Identity to add functionality to register, sign in and sign out a user.</span></span>

<span data-ttu-id="8a57d-181">ASP.NET Identity est implémentée à l’aide de la procédure suivante.</span><span class="sxs-lookup"><span data-stu-id="8a57d-181">ASP.NET Identity is implemented using the following procedure.</span></span> <span data-ttu-id="8a57d-182">L’objectif de cet article est de vous offrir une vue d’ensemble de haut niveau de ASP.NET Identity ; vous pouvez le suivre pas à pas ou simplement lire les détails.</span><span class="sxs-lookup"><span data-stu-id="8a57d-182">The purpose of this article is to give you a high level overview of ASP.NET Identity; you can follow it step by step or just read the details.</span></span> <span data-ttu-id="8a57d-183">Pour obtenir des instructions plus détaillées sur la création d’applications à l’aide de ASP.NET Identity, notamment l’utilisation de la nouvelle API pour ajouter des utilisateurs, des rôles et des informations de profil, consultez la section étapes suivantes à la fin de cet article.</span><span class="sxs-lookup"><span data-stu-id="8a57d-183">For more detailed instructions on creating apps using ASP.NET Identity, including using the new API to add users, roles and profile information, see the Next Steps section at the end of this article.</span></span>

1. <span data-ttu-id="8a57d-184">Créer une application ASP.NET MVC avec des comptes individuels.</span><span class="sxs-lookup"><span data-stu-id="8a57d-184">Create an ASP.NET MVC application with Individual Accounts.</span></span> <span data-ttu-id="8a57d-185">Vous pouvez utiliser ASP.NET Identity dans ASP.NET MVC, Web Forms, API Web, Signalr, etc. Dans cet article, nous allons commencer par une application ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="8a57d-185">You can use ASP.NET Identity in ASP.NET MVC, Web Forms, Web API, SignalR etc. In this article we will start with an ASP.NET MVC application.</span></span>  
  
    ![](introduction-to-aspnet-identity/_static/image1.png)
2. <span data-ttu-id="8a57d-186">Le projet créé contient les trois packages suivants pour ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="8a57d-186">The created project contains the following three packages for ASP.NET Identity.</span></span>

    - [`Microsoft.AspNet.Identity.EntityFramework`](http://www.nuget.org/packages/Microsoft.AspNet.Identity.EntityFramework/)  
   <span data-ttu-id="8a57d-187">Ce package a l’implémentation Entity Framework de ASP.NET Identity qui rend persistantes les données et le schéma ASP.NET Identity pour SQL Server.</span><span class="sxs-lookup"><span data-stu-id="8a57d-187">This package has the Entity Framework implementation of ASP.NET Identity which will persist the ASP.NET Identity data and schema to SQL Server.</span></span>
    - [`Microsoft.AspNet.Identity.Core`](http://www.nuget.org/packages/Microsoft.AspNet.Identity.Core/)  
   <span data-ttu-id="8a57d-188">Ce package possède les interfaces principales pour ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="8a57d-188">This package has the core interfaces for ASP.NET Identity.</span></span> <span data-ttu-id="8a57d-189">Ce package peut être utilisé pour écrire une implémentation de ASP.NET Identity ciblant différents magasins de persistance, tels que le stockage table Azure, les bases de données NoSQL, etc.</span><span class="sxs-lookup"><span data-stu-id="8a57d-189">This package can be used to write an implementation for ASP.NET Identity that targets different persistence stores such as Azure Table Storage, NoSQL databases etc.</span></span>
    - [`Microsoft.AspNet.Identity.OWIN`](http://www.nuget.org/packages/Microsoft.AspNet.Identity.Owin/)  
   <span data-ttu-id="8a57d-190">Ce package contient les fonctionnalités utilisées pour la connexion à l’authentification OWIN avec ASP.NET Identity dans les applications ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="8a57d-190">This package contains functionality that is used to plug in OWIN authentication with ASP.NET Identity in ASP.NET applications.</span></span> <span data-ttu-id="8a57d-191">Cela est utilisé lorsque vous ajoutez une fonctionnalité de connexion à votre application et appelez dans OWIN cookie Authentication middleware pour générer un cookie.</span><span class="sxs-lookup"><span data-stu-id="8a57d-191">This is used when you add sign in functionality to your application and call into OWIN Cookie Authentication middleware to generate a cookie.</span></span>
3. <span data-ttu-id="8a57d-192">Création d’un utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8a57d-192">Creating a user.</span></span>  
   <span data-ttu-id="8a57d-193">Lancez l’application, puis cliquez sur le lien **Register** pour créer un utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8a57d-193">Launch the application and then click on the **Register** link to create a user.</span></span> <span data-ttu-id="8a57d-194">L’illustration suivante montre la page de Registre qui collecte le nom d’utilisateur et le mot de passe.</span><span class="sxs-lookup"><span data-stu-id="8a57d-194">The following image shows the Register page that collects the user name and password.</span></span>  
  
    ![](introduction-to-aspnet-identity/_static/image2.png)  
  
   <span data-ttu-id="8a57d-195">Lorsque l’utilisateur sélectionne le bouton **inscrire** , le `Register` action du contrôleur de compte crée l’utilisateur en appelant l’API ASP.net Identity, comme indiqué ci-dessous :</span><span class="sxs-lookup"><span data-stu-id="8a57d-195">When the user selects the **Register** button, the `Register` action of the Account controller creates the user by calling the ASP.NET Identity API, as highlighted below:</span></span>

    [!code-csharp[Main](introduction-to-aspnet-identity/samples/sample1.cs?highlight=8-9)]
4. <span data-ttu-id="8a57d-196">Connectez-vous.</span><span class="sxs-lookup"><span data-stu-id="8a57d-196">Sign in.</span></span>  
   <span data-ttu-id="8a57d-197">Si l’utilisateur a été créé avec succès, elle est connectée par la méthode `SignInAsync`.</span><span class="sxs-lookup"><span data-stu-id="8a57d-197">If the user was successfully created, she is signed in by the `SignInAsync` method.</span></span>  

    [!code-csharp[Main](introduction-to-aspnet-identity/samples/sample6.cs?highlight=12)]

   <span data-ttu-id="8a57d-198">La méthode `SignInManager.SignInAsync` génère un [ClaimsIdentity](https://msdn.microsoft.com/library/system.security.claims.claimsidentity.aspx).</span><span class="sxs-lookup"><span data-stu-id="8a57d-198">The `SignInManager.SignInAsync` method generates a [ClaimsIdentity](https://msdn.microsoft.com/library/system.security.claims.claimsidentity.aspx).</span></span> <span data-ttu-id="8a57d-199">Étant donné que ASP.NET Identity et l’authentification des cookies OWIN sont des systèmes basés sur les revendications, l’infrastructure requiert que l’application génère un ClaimsIdentity pour l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8a57d-199">Since ASP.NET Identity and OWIN Cookie Authentication are claims-based system, the framework requires the app to generate a ClaimsIdentity for the user.</span></span> <span data-ttu-id="8a57d-200">ClaimsIdentity contient des informations sur toutes les revendications pour l’utilisateur, telles que les rôles auxquels l’utilisateur appartient.</span><span class="sxs-lookup"><span data-stu-id="8a57d-200">ClaimsIdentity has information about all the claims for the user, such as what roles the user belongs to.</span></span>   
 
5. <span data-ttu-id="8a57d-201">Fermez la session.</span><span class="sxs-lookup"><span data-stu-id="8a57d-201">Log off.</span></span>  
   <span data-ttu-id="8a57d-202">Sélectionnez le lien **Fermer la session** pour appeler l’action de déconnexion dans le contrôleur de compte.</span><span class="sxs-lookup"><span data-stu-id="8a57d-202">Select the **Log off** link to call the LogOff action in the account controller.</span></span> 

    [!code-csharp[Main](introduction-to-aspnet-identity/samples/sample5.cs?highlight=6)]

   <span data-ttu-id="8a57d-203">Le code en surbrillance ci-dessus montre la méthode OWIN `AuthenticationManager.SignOut`.</span><span class="sxs-lookup"><span data-stu-id="8a57d-203">The highlighted code above shows the OWIN `AuthenticationManager.SignOut` method.</span></span> <span data-ttu-id="8a57d-204">Cela est analogue à la méthode [FormsAuthentication. SignOut](https://msdn.microsoft.com/library/system.web.security.formsauthentication.signout.aspx) utilisée par le module [FormsAuthentication](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx) dans Web Forms.</span><span class="sxs-lookup"><span data-stu-id="8a57d-204">This is analogous to [FormsAuthentication.SignOut](https://msdn.microsoft.com/library/system.web.security.formsauthentication.signout.aspx) method used by the [FormsAuthentication](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx) module in Web Forms.</span></span>

## <a name="components-of-aspnet-identity"></a><span data-ttu-id="8a57d-205">Composants de ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="8a57d-205">Components of ASP.NET Identity</span></span>

<span data-ttu-id="8a57d-206">Le diagramme ci-dessous montre les composants du système de ASP.NET Identity (sélectionnez dans [ce](introduction-to-aspnet-identity/_static/image3.png) diagramme ou dans le diagramme pour l’agrandir).</span><span class="sxs-lookup"><span data-stu-id="8a57d-206">The diagram below shows the components of the ASP.NET Identity system (select on [this](introduction-to-aspnet-identity/_static/image3.png) or on the diagram to enlarge it).</span></span> <span data-ttu-id="8a57d-207">Les packages en vert constituent le système ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="8a57d-207">The packages in green make up the ASP.NET Identity system.</span></span> <span data-ttu-id="8a57d-208">Tous les autres packages sont des dépendances qui sont nécessaires pour utiliser le système de ASP.NET Identity dans les applications ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="8a57d-208">All the other packages are dependencies which are needed to use the ASP.NET Identity system in ASP.NET applications.</span></span>

[![](introduction-to-aspnet-identity/_static/image5.png)](introduction-to-aspnet-identity/_static/image4.png)

<span data-ttu-id="8a57d-209">Vous trouverez ci-dessous une brève description des packages NuGet non mentionnés précédemment :</span><span class="sxs-lookup"><span data-stu-id="8a57d-209">The following is a brief description of the NuGet packages not mentioned previously:</span></span>

- [<span data-ttu-id="8a57d-210">Microsoft.Owin.Security.Cookies</span><span class="sxs-lookup"><span data-stu-id="8a57d-210">Microsoft.Owin.Security.Cookies</span></span>](http://www.nuget.org/packages/Microsoft.Owin.Security.Cookies/)  
 <span data-ttu-id="8a57d-211">Intergiciel qui permet à une application d’utiliser l’authentification basée sur les cookies, similaire à ASP. Authentification par formulaire du réseau.</span><span class="sxs-lookup"><span data-stu-id="8a57d-211">Middleware that enables an application to use cookie based authentication, similar to ASP.NET's Forms Authentication.</span></span>
- [<span data-ttu-id="8a57d-212">EntityFramework</span><span class="sxs-lookup"><span data-stu-id="8a57d-212">EntityFramework</span></span>](http://www.nuget.org/packages/EntityFramework/)  
 <span data-ttu-id="8a57d-213">Entity Framework est la technologie d’accès aux données recommandée de Microsoft pour les bases de données relationnelles.</span><span class="sxs-lookup"><span data-stu-id="8a57d-213">Entity Framework is Microsoft's recommended data access technology for relational databases.</span></span>

## <a name="migrating-from-membership-to-aspnet-identity"></a><span data-ttu-id="8a57d-214">Migration de l’appartenance à ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="8a57d-214">Migrating from Membership to ASP.NET Identity</span></span>

<span data-ttu-id="8a57d-215">Nous espérons bientôt fournir des conseils sur la migration de vos applications existantes qui utilisent l’appartenance ASP.NET ou l’appartenance simple au nouveau système de ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="8a57d-215">We hope to soon provide guidance on migrating your existing apps that use ASP.NET Membership or Simple Membership to the new ASP.NET Identity system.</span></span>

## <a name="next-steps"></a><span data-ttu-id="8a57d-216">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="8a57d-216">Next Steps</span></span>

- [<span data-ttu-id="8a57d-217">Créer une application ASP.NET MVC 5 avec Facebook et Google OAuth2 et l’authentification OpenID</span><span class="sxs-lookup"><span data-stu-id="8a57d-217">Create an ASP.NET MVC 5 App with Facebook and Google OAuth2 and OpenID Sign-on</span></span>](../../../mvc/overview/security/create-an-aspnet-mvc-5-app-with-facebook-and-google-oauth2-and-openid-sign-on.md)  
 <span data-ttu-id="8a57d-218">Ce didacticiel utilise l’API ASP.NET Identity pour ajouter des informations de profil à la base de données utilisateur, et comment s’authentifier avec Google et Facebook.</span><span class="sxs-lookup"><span data-stu-id="8a57d-218">The tutorial uses the ASP.NET Identity API to add profile information to the user database, and how to authenticate with Google and Facebook.</span></span>
- [<span data-ttu-id="8a57d-219">Créer une application ASP.NET MVC avec authentification et base de données SQL et la déployer dans Azure App Service</span><span class="sxs-lookup"><span data-stu-id="8a57d-219">Create an ASP.NET MVC app with auth and SQL DB and deploy to Azure App Service</span></span>](https://docs.microsoft.com/aspnet/core/security/authorization/secure-data)  
 <span data-ttu-id="8a57d-220">Ce didacticiel montre comment utiliser l’API d’identité pour ajouter des utilisateurs et des rôles.</span><span class="sxs-lookup"><span data-stu-id="8a57d-220">This tutorial shows how to use the Identity API to add users and roles.</span></span>
- [https://github.com/rustd/AspnetIdentitySample](https://github.com/rustd/AspnetIdentitySample)  
 <span data-ttu-id="8a57d-221">Exemple d’application qui montre comment ajouter des rôles de base et un support utilisateur et comment effectuer des rôles et la gestion des utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="8a57d-221">Sample application that shows how to add basic roles and user support and how to do roles and user management.</span></span>

---
uid: identity/overview/getting-started/introduction-to-aspnet-identity
title: Introduction à ASP.NET Identity - ASP.NET 4.x
author: jongalloway
description: Le système d’appartenance ASP.NET a été introduit avec le retour de ASP.NET 2.0 en 2005 et depuis puis de nombreuses modifications ont été dans le typicall d’applications façons web...
ms.author: riande
ms.date: 01/22/2019
ms.assetid: 38717fc1-5989-43cf-952d-4007cc1dd923
ms.custom: seoapril2019
msc.legacyurl: /identity/overview/getting-started/introduction-to-aspnet-identity
msc.type: authoredcontent
ms.openlocfilehash: 34a0d62d7afcaffa8fbac0bc774d9266efb6b165
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/09/2019
ms.locfileid: "59413046"
---
# <a name="introduction-to-aspnet-identity"></a><span data-ttu-id="bd49f-103">Introduction à ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="bd49f-103">Introduction to ASP.NET Identity</span></span>


> <span data-ttu-id="bd49f-104">Le système d’appartenance ASP.NET a été introduit avec ASP.NET 2.0 retour depuis 2005 et puis de nombreuses modifications ont été comme les applications web gèrent généralement l’authentification et l’autorisation.</span><span class="sxs-lookup"><span data-stu-id="bd49f-104">The ASP.NET membership system was introduced with ASP.NET 2.0 back in 2005, and since then there have been many changes in the ways web applications typically handle authentication and authorization.</span></span> <span data-ttu-id="bd49f-105">ASP.NET Identity est un regard neuf sur ce que le système d’appartenance doit être lorsque vous générez des applications modernes pour le web, un téléphone ou une tablette.</span><span class="sxs-lookup"><span data-stu-id="bd49f-105">ASP.NET Identity is a fresh look at what the membership system should be when you are building modern applications for the web, phone, or tablet.</span></span>


## <a name="background-membership-in-aspnet"></a><span data-ttu-id="bd49f-106">Présentation : Appartenance dans ASP.NET</span><span class="sxs-lookup"><span data-stu-id="bd49f-106">Background: Membership in ASP.NET</span></span>

### <a name="aspnet-membership"></a><span data-ttu-id="bd49f-107">Appartenance ASP.NET</span><span class="sxs-lookup"><span data-stu-id="bd49f-107">ASP.NET Membership</span></span>

<span data-ttu-id="bd49f-108">[L’appartenance ASP.NET](https://msdn.microsoft.com/library/yh26yfzy(v=VS.100).aspx) a été conçu pour répondre aux exigences l’appartenance au site qui étaient courantes en 2005, impliquant l’authentification par formulaire et une base de données SQL Server pour les noms d’utilisateur, les mots de passe et les données de profil.</span><span class="sxs-lookup"><span data-stu-id="bd49f-108">[ASP.NET Membership](https://msdn.microsoft.com/library/yh26yfzy(v=VS.100).aspx) was designed to solve site membership requirements that were common in 2005, which involved Forms Authentication, and a SQL Server database for user names, passwords, and profile data.</span></span> <span data-ttu-id="bd49f-109">Aujourd'hui, il existe un large éventail d’options de stockage de données pour les applications web, la plupart des développeurs et activer ou leurs sites pour utiliser des fournisseurs d’identité sociale pour les fonctionnalités d’authentification et d’autorisation.</span><span class="sxs-lookup"><span data-stu-id="bd49f-109">Today there is a much broader array of data storage options for web applications, and most developers want to enable their sites to use social identity providers for authentication and authorization functionality.</span></span> <span data-ttu-id="bd49f-110">Les limitations de conception de l’appartenance d’ASP.NET compliquent cette transition :</span><span class="sxs-lookup"><span data-stu-id="bd49f-110">The limitations of ASP.NET Membership's design make this transition difficult:</span></span>

- <span data-ttu-id="bd49f-111">Le schéma de base de données a été conçu pour SQL Server et vous ne pouvez pas le modifier.</span><span class="sxs-lookup"><span data-stu-id="bd49f-111">The database schema was designed for SQL Server and you can't change it.</span></span> <span data-ttu-id="bd49f-112">Vous pouvez ajouter des informations de profil, mais les données supplémentaires sont empaquetées dans une autre table, ce qui rend difficile pour accéder à toute autre manière, sauf via l’API de fournisseur de profil.</span><span class="sxs-lookup"><span data-stu-id="bd49f-112">You can add profile information, but the additional data is packed into a different table, which makes it difficult to access by any means except through the Profile Provider API.</span></span>
- <span data-ttu-id="bd49f-113">Le système du fournisseur permet de modifier le magasin de données de stockage, mais le système est conçu autour des hypothèses appropriés pour une base de données relationnelle.</span><span class="sxs-lookup"><span data-stu-id="bd49f-113">The provider system enables you to change the backing data store, but the system is designed around assumptions appropriate for a relational database.</span></span> <span data-ttu-id="bd49f-114">Vous pouvez écrire un fournisseur pour stocker les informations d’appartenance dans un mécanisme de stockage non relationnelles, telles que les Tables de stockage Azure, mais vous devez contourner la conception relationnelle en écrivant la quantité de code et un grand nombre de `System.NotImplementedException` exceptions pour les méthodes qui ne s’applique aux bases de données NoSQL.</span><span class="sxs-lookup"><span data-stu-id="bd49f-114">You can write a provider to store membership information in a non-relational storage mechanism, such as Azure Storage Tables, but then you have to work around the relational design by writing much code and a lot of `System.NotImplementedException` exceptions for methods that don't apply to NoSQL databases.</span></span>
- <span data-ttu-id="bd49f-115">Étant donné que la fonctionnalité de déconnexion/journal est basée sur l’authentification par formulaire, le système d’appartenance ne peut pas utiliser [OWIN](../../../aspnet/overview/owin-and-katana/an-overview-of-project-katana.md).</span><span class="sxs-lookup"><span data-stu-id="bd49f-115">Since the log-in/log-out functionality is based on Forms Authentication, the membership system can't use [OWIN](../../../aspnet/overview/owin-and-katana/an-overview-of-project-katana.md).</span></span> <span data-ttu-id="bd49f-116">OWIN inclut les composants d’intergiciel (middleware) d’authentification, notamment la prise en charge des ouvertures de session à l’aide de fournisseurs d’identité externes (par exemple, Accounts Microsoft, Facebook, Google, Twitter) et les ouvertures de session à l’aide de comptes de société à partir d’Active Directory local ou Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="bd49f-116">OWIN includes middleware components for authentication, including support for log-ins using external identity providers (like Microsoft Accounts, Facebook, Google, Twitter), and log-ins using organizational accounts from on-premises Active Directory or Azure Active Directory.</span></span> <span data-ttu-id="bd49f-117">OWIN prend également en charge OAuth 2.0, JSON et CORS.</span><span class="sxs-lookup"><span data-stu-id="bd49f-117">OWIN also includes support for OAuth 2.0, JWT and CORS.</span></span>

### <a name="aspnet-simple-membership"></a><span data-ttu-id="bd49f-118">Appartenance ASP.NET simples</span><span class="sxs-lookup"><span data-stu-id="bd49f-118">ASP.NET Simple Membership</span></span>

<span data-ttu-id="bd49f-119">[L’appartenance d’ASP.NET simple](../../../web-pages/overview/security/16-adding-security-and-membership.md) a été développé comme un système d’appartenance pour ASP.NET Web Pages.</span><span class="sxs-lookup"><span data-stu-id="bd49f-119">[ASP.NET simple membership](../../../web-pages/overview/security/16-adding-security-and-membership.md) was developed as a membership system for ASP.NET Web Pages.</span></span> <span data-ttu-id="bd49f-120">Il a été publié avec WebMatrix et Visual Studio 2010 SP1.</span><span class="sxs-lookup"><span data-stu-id="bd49f-120">It was released with WebMatrix and Visual Studio 2010 SP1.</span></span> <span data-ttu-id="bd49f-121">L’objectif de l’appartenance Simple a été pour le rendre facile d’ajouter des fonctionnalités d’appartenance à une application Web Pages.</span><span class="sxs-lookup"><span data-stu-id="bd49f-121">The goal of Simple Membership was to make it easy to add membership functionality to a Web Pages application.</span></span>

<span data-ttu-id="bd49f-122">L’appartenance simple rendre plus facile à personnaliser les informations de profil utilisateur, mais il partage toujours les autres problèmes avec l’appartenance d’ASP.NET, et il présente certaines limitations :</span><span class="sxs-lookup"><span data-stu-id="bd49f-122">Simple Membership did make it easier to customize user profile information, but it still shares the other problems with ASP.NET Membership, and it has some limitations:</span></span>

- <span data-ttu-id="bd49f-123">Il était difficile de conserver les données de système d’appartenance dans un magasin non relationnelles.</span><span class="sxs-lookup"><span data-stu-id="bd49f-123">It was hard to persist membership system data in a non-relational store.</span></span>
- <span data-ttu-id="bd49f-124">Vous ne pouvez pas l’utiliser avec OWIN.</span><span class="sxs-lookup"><span data-stu-id="bd49f-124">You can't use it with OWIN.</span></span>
- <span data-ttu-id="bd49f-125">Il ne fonctionne pas correctement avec les fournisseurs d’appartenances ASP.NET existants, et il n’est pas extensible.</span><span class="sxs-lookup"><span data-stu-id="bd49f-125">It doesn't work well with existing ASP.NET Membership providers, and it's not extensible.</span></span>

### <a name="aspnet-universal-providers"></a><span data-ttu-id="bd49f-126">Fournisseurs universels ASP.NET</span><span class="sxs-lookup"><span data-stu-id="bd49f-126">ASP.NET Universal Providers</span></span>

<span data-ttu-id="bd49f-127">[Fournisseurs universels ASP.NET](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx) ont été développées pour le rendre possible de conserver les informations d’appartenance dans Microsoft Azure SQL Database et ils fonctionnent également avec SQL Server Compact.</span><span class="sxs-lookup"><span data-stu-id="bd49f-127">[ASP.NET Universal Providers](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx) were developed to make it possible to persist membership information in Microsoft Azure SQL Database, and they also work with SQL Server Compact.</span></span> <span data-ttu-id="bd49f-128">Les fournisseurs universels ont été créés sur Entity Framework Code First, ce qui signifie que les fournisseurs universels peuvent être utilisés pour conserver les données dans n’importe quel magasin pris en charge par Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="bd49f-128">The Universal Providers were built on Entity Framework Code First, which means that the Universal Providers can be used to persist data in any store supported by EF.</span></span> <span data-ttu-id="bd49f-129">Avec les fournisseurs universels, le schéma de base de données a été nettoyé beaucoup également.</span><span class="sxs-lookup"><span data-stu-id="bd49f-129">With the Universal Providers, the database schema was cleaned up quite a lot as well.</span></span>

<span data-ttu-id="bd49f-130">Les fournisseurs universels sont basées sur l’infrastructure de l’appartenance ASP.NET, afin qu’ils exécutent toujours les mêmes limitations que le fournisseur SqlMembership.</span><span class="sxs-lookup"><span data-stu-id="bd49f-130">The Universal Providers are built on the ASP.NET Membership infrastructure, so they still carry the same limitations as the SqlMembership Provider.</span></span> <span data-ttu-id="bd49f-131">Autrement dit, ils ont été conçus pour les bases de données relationnelles, et il est difficile de personnaliser le profil et les informations utilisateur.</span><span class="sxs-lookup"><span data-stu-id="bd49f-131">That is, they were designed for relational databases and it's hard to customize profile and user information.</span></span> <span data-ttu-id="bd49f-132">Ces fournisseurs utilisent toujours l’authentification par formulaire pour la fonctionnalité de connexion et de déconnexion.</span><span class="sxs-lookup"><span data-stu-id="bd49f-132">These providers also still use Forms Authentication for sign-in and sign-out functionality.</span></span>

## <a name="aspnet-identity"></a><span data-ttu-id="bd49f-133">ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="bd49f-133">ASP.NET Identity</span></span>

<span data-ttu-id="bd49f-134">Comme l’appartenance au récit dans ASP.NET a évolué au fil des années, l’équipe ASP.NET a beaucoup appris à partir des commentaires des clients.</span><span class="sxs-lookup"><span data-stu-id="bd49f-134">As the membership story in ASP.NET has evolved over the years, the ASP.NET team has learned a lot from feedback from customers.</span></span>

<span data-ttu-id="bd49f-135">Partant du principe que les utilisateurs seront connecteront en entrant un nom d’utilisateur et le mot de passe qu’ils ont enregistrées dans votre propre application n’est plus valide.</span><span class="sxs-lookup"><span data-stu-id="bd49f-135">The assumption that users will sign in by entering a user name and password that they have registered in your own application is no longer valid.</span></span> <span data-ttu-id="bd49f-136">Le web est devenu plus de réseaux sociaux.</span><span class="sxs-lookup"><span data-stu-id="bd49f-136">The web has become more social.</span></span> <span data-ttu-id="bd49f-137">Les utilisateurs interagissent avec eux en temps réel par le biais des canaux sociaux tels que Facebook, Twitter et autres sites web sociaux.</span><span class="sxs-lookup"><span data-stu-id="bd49f-137">Users are interacting with each other in real time through social channels such as Facebook, Twitter, and other social web sites.</span></span> <span data-ttu-id="bd49f-138">Les développeurs veulent les utilisateurs puissent se connecter avec leurs identités sociales afin qu’ils peuvent avoir une expérience riche sur leurs sites web.</span><span class="sxs-lookup"><span data-stu-id="bd49f-138">Developers want users to be able to sign in with their social identities so that they can have a rich experience on their web sites.</span></span> <span data-ttu-id="bd49f-139">Un système d’appartenance moderne doit activer en fonction de la redirection ouvertures de session aux fournisseurs d’authentification tels que Facebook, Twitter et d’autres utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="bd49f-139">A modern membership system must enable redirection-based log-ins to authentication providers such as Facebook, Twitter, and others.</span></span>

<span data-ttu-id="bd49f-140">Comme le développement web a évolué, a les modèles de développement web.</span><span class="sxs-lookup"><span data-stu-id="bd49f-140">As web development evolved, so did the patterns of web development.</span></span> <span data-ttu-id="bd49f-141">Unité de code de l’application de test est devenue une préoccupation pour les développeurs d’applications.</span><span class="sxs-lookup"><span data-stu-id="bd49f-141">Unit testing of application code became a core concern for application developers.</span></span> <span data-ttu-id="bd49f-142">ASP.NET a ajouté une nouvelle infrastructure basée sur le modèle Model-View-Controller (MVC), en partie pour aider les développeurs à créer des applications ASP.NET testables unité en 2008.</span><span class="sxs-lookup"><span data-stu-id="bd49f-142">In 2008 ASP.NET added a new framework based on the Model-View-Controller (MVC) pattern, in part to help developers build unit testable ASP.NET applications.</span></span> <span data-ttu-id="bd49f-143">Les développeurs qui souhaitent unité tester leur logique d’application que vous voulez également être en mesure de le faire avec le système d’appartenance.</span><span class="sxs-lookup"><span data-stu-id="bd49f-143">Developers who wanted to unit test their application logic also wanted to be able to do that with the membership system.</span></span>

<span data-ttu-id="bd49f-144">Compte tenu de ces modifications dans le développement d’applications web, ASP.NET Identity a été développé avec les objectifs suivants :</span><span class="sxs-lookup"><span data-stu-id="bd49f-144">Considering these changes in web application development, ASP.NET Identity was developed with the following goals:</span></span>

- **<span data-ttu-id="bd49f-145">Un système d’identité ASP.NET</span><span class="sxs-lookup"><span data-stu-id="bd49f-145">One ASP.NET Identity system</span></span>**

    - <span data-ttu-id="bd49f-146">ASP.NET Identity peut être utilisé avec toutes les infrastructures ASP.NET, tels que ASP.NET MVC, les Web Forms, les Pages Web, les API Web et SignalR.</span><span class="sxs-lookup"><span data-stu-id="bd49f-146">ASP.NET Identity can be used with all of the ASP.NET frameworks, such as ASP.NET MVC, Web Forms, Web Pages, Web API, and SignalR.</span></span>
    - <span data-ttu-id="bd49f-147">Identité de ASP.NET peut être utilisée lorsque vous concevez des applications web, téléphone, magasin ou hybride.</span><span class="sxs-lookup"><span data-stu-id="bd49f-147">ASP.NET Identity can be used when you are building web, phone, store, or hybrid applications.</span></span>
- **<span data-ttu-id="bd49f-148">Facilité de branchement dans les données de profil sur l’utilisateur</span><span class="sxs-lookup"><span data-stu-id="bd49f-148">Ease of plugging in profile data about the user</span></span>**

    - <span data-ttu-id="bd49f-149">Vous contrôlez le schéma d’utilisateur et les informations de profil.</span><span class="sxs-lookup"><span data-stu-id="bd49f-149">You have control over the schema of user and profile information.</span></span> <span data-ttu-id="bd49f-150">Par exemple, vous pouvez facilement activer le système stocker les dates de naissance entrées par les utilisateurs lorsqu’ils s’inscrivent à un compte dans votre application.</span><span class="sxs-lookup"><span data-stu-id="bd49f-150">For example, you can easily enable the system to store birth dates entered by users when they register an account in your application.</span></span>

- **<span data-ttu-id="bd49f-151">Contrôle de persistance</span><span class="sxs-lookup"><span data-stu-id="bd49f-151">Persistence control</span></span>**

    - <span data-ttu-id="bd49f-152">Par défaut, le système d’identité ASP.NET stocke toutes les informations utilisateur dans une base de données.</span><span class="sxs-lookup"><span data-stu-id="bd49f-152">By default, the ASP.NET Identity system stores all the user information in a database.</span></span> <span data-ttu-id="bd49f-153">ASP.NET Identity utilise Entity Framework Code First pour implémenter l’ensemble de son mécanisme de persistance.</span><span class="sxs-lookup"><span data-stu-id="bd49f-153">ASP.NET Identity uses Entity Framework Code First to implement all of its persistence mechanism.</span></span>
    - <span data-ttu-id="bd49f-154">Étant donné que vous contrôlez le schéma de base de données, les tâches courantes telles que la modification des noms de table ou la modification du type de données de clés primaires est simple à réaliser.</span><span class="sxs-lookup"><span data-stu-id="bd49f-154">Since you control the database schema, common tasks such as changing table names or changing the data type of primary keys is simple to do.</span></span>
    - <span data-ttu-id="bd49f-155">Il est facile d’intégrer dans les différents mécanismes de stockage telles que SharePoint, Service de Table de stockage Azure, les bases de données NoSQL, etc., sans avoir à lever `System.NotImplementedExceptions` exceptions.</span><span class="sxs-lookup"><span data-stu-id="bd49f-155">It's easy to plug in different storage mechanisms such as SharePoint, Azure Storage Table Service, NoSQL databases, etc., without having to throw `System.NotImplementedExceptions` exceptions.</span></span>
- **<span data-ttu-id="bd49f-156">Testabilité unitaire</span><span class="sxs-lookup"><span data-stu-id="bd49f-156">Unit testability</span></span>**

    - <span data-ttu-id="bd49f-157">ASP.NET Identity l’application web plus d’unité est testable.</span><span class="sxs-lookup"><span data-stu-id="bd49f-157">ASP.NET Identity makes the web application more unit testable.</span></span> <span data-ttu-id="bd49f-158">Vous pouvez écrire des tests unitaires pour les parties de votre application qui utilisent l’identité d’ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="bd49f-158">You can write unit tests for the parts of your application that use ASP.NET Identity.</span></span>
- **<span data-ttu-id="bd49f-159">Fournisseur de rôles</span><span class="sxs-lookup"><span data-stu-id="bd49f-159">Role provider</span></span>**

    - <span data-ttu-id="bd49f-160">Il existe un fournisseur de rôles qui vous permet de restreindre l’accès aux parties de votre application par les rôles.</span><span class="sxs-lookup"><span data-stu-id="bd49f-160">There is a role provider which lets you restrict access to parts of your application by roles.</span></span> <span data-ttu-id="bd49f-161">Vous pouvez facilement créer des rôles, tels que « Admin » et ajouter des utilisateurs aux rôles.</span><span class="sxs-lookup"><span data-stu-id="bd49f-161">You can easily create roles such as "Admin" and add users to roles.</span></span>
- **<span data-ttu-id="bd49f-162">Basée sur les revendications</span><span class="sxs-lookup"><span data-stu-id="bd49f-162">Claims Based</span></span>**

    - <span data-ttu-id="bd49f-163">ASP.NET Identity prend en charge l’authentification basée sur les revendications, où l’identité de l’utilisateur est représentée comme un ensemble de revendications.</span><span class="sxs-lookup"><span data-stu-id="bd49f-163">ASP.NET Identity supports claims-based authentication, where the user's identity is represented as a set of claims.</span></span> <span data-ttu-id="bd49f-164">Revendications permet aux développeurs d’être beaucoup plus expressif dans décrivant l’identité d’un utilisateur à autorisent les rôles.</span><span class="sxs-lookup"><span data-stu-id="bd49f-164">Claims allow developers to be a lot more expressive in describing a user's identity than roles allow.</span></span> <span data-ttu-id="bd49f-165">Alors que l’appartenance au rôle est simplement une valeur booléenne (membre ou non membre), une revendication peut inclure des informations détaillées sur l’identité et l’appartenance de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="bd49f-165">Whereas role membership is just a boolean (member or non-member), a claim can include rich information about the user's identity and membership.</span></span>
- **<span data-ttu-id="bd49f-166">Fournisseurs de connexion de réseau social</span><span class="sxs-lookup"><span data-stu-id="bd49f-166">Social Login Providers</span></span>**

    - <span data-ttu-id="bd49f-167">Vous pouvez facilement ajouter des ouvertures de session sociaux tels que Account Microsoft, Facebook, Twitter, Google et d’autres utilisateurs à votre application et stocker les données spécifiques à l’utilisateur dans votre application.</span><span class="sxs-lookup"><span data-stu-id="bd49f-167">You can easily add social log-ins such as Microsoft Account, Facebook, Twitter, Google, and others to your application, and store the user-specific data in your application.</span></span>

- **<span data-ttu-id="bd49f-168">Intégration OWIN</span><span class="sxs-lookup"><span data-stu-id="bd49f-168">OWIN Integration</span></span>**

    - <span data-ttu-id="bd49f-169">Authentification ASP.NET est désormais basée sur l’intergiciel OWIN qui peut être utilisé sur n’importe quel hôte OWIN.</span><span class="sxs-lookup"><span data-stu-id="bd49f-169">ASP.NET authentication is now based on OWIN middleware that can be used on any OWIN-based host.</span></span> <span data-ttu-id="bd49f-170">ASP.NET Identity n’a pas de dépendances sur System.Web.</span><span class="sxs-lookup"><span data-stu-id="bd49f-170">ASP.NET Identity does not have any dependency on System.Web.</span></span> <span data-ttu-id="bd49f-171">Il est une infrastructure OWIN entièrement compatible et peut être utilisé dans n’importe quelle application OWIN hébergé.</span><span class="sxs-lookup"><span data-stu-id="bd49f-171">It is a fully compliant OWIN framework and can be used in any OWIN hosted application.</span></span>
    - <span data-ttu-id="bd49f-172">ASP.NET Identity utilise l’authentification OWIN de journal/journal sorti d’utilisateurs dans le site web.</span><span class="sxs-lookup"><span data-stu-id="bd49f-172">ASP.NET Identity uses OWIN Authentication for log-in/log-out of users in the web site.</span></span> <span data-ttu-id="bd49f-173">Cela signifie qu’au lieu d’utiliser FormsAuthentication pour générer le cookie, l’application utilise OWIN CookieAuthentication pour ce faire.</span><span class="sxs-lookup"><span data-stu-id="bd49f-173">This means that instead of using FormsAuthentication to generate the cookie, the application uses OWIN CookieAuthentication to do that.</span></span>
- **<span data-ttu-id="bd49f-174">Package NuGet</span><span class="sxs-lookup"><span data-stu-id="bd49f-174">NuGet package</span></span>**

    - <span data-ttu-id="bd49f-175">ASP.NET Identity est redistribué sous forme de package NuGet qui est installé dans les modèles ASP.NET MVC, Web Forms et Web API fournis avec Visual Studio 2017.</span><span class="sxs-lookup"><span data-stu-id="bd49f-175">ASP.NET Identity is redistributed as a NuGet package which is installed in the ASP.NET MVC, Web Forms and Web API templates that ship with Visual Studio 2017.</span></span> <span data-ttu-id="bd49f-176">Vous pouvez télécharger ce package NuGet à partir de la galerie NuGet.</span><span class="sxs-lookup"><span data-stu-id="bd49f-176">You can download this NuGet package from the NuGet gallery.</span></span>
    - <span data-ttu-id="bd49f-177">Libération d’identité ASP.NET comme un package NuGet package facilite l’équipe ASP.NET effectuer une itération sur les nouvelles fonctionnalités et correctifs de bogues et fournir aux développeurs de manière agile.</span><span class="sxs-lookup"><span data-stu-id="bd49f-177">Releasing ASP.NET Identity as a NuGet package makes it easier for the ASP.NET team to iterate on new features and bug fixes, and deliver these to developers in an agile manner.</span></span>

## <a name="get-started-with-aspnet-identity"></a><span data-ttu-id="bd49f-178">Bien démarrer avec ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="bd49f-178">Get started with ASP.NET Identity</span></span>

<span data-ttu-id="bd49f-179">ASP.NET Identity est utilisé dans les modèles de projet Visual Studio 2017 pour ASP.NET MVC, Web Forms, Web API et SPA.</span><span class="sxs-lookup"><span data-stu-id="bd49f-179">ASP.NET Identity is used in the Visual Studio 2017 project templates for ASP.NET MVC, Web Forms, Web API and SPA.</span></span> <span data-ttu-id="bd49f-180">Dans cette procédure pas à pas, nous allons illustrer comment les modèles de projet utilisent ASP.NET Identity pour ajouter des fonctionnalités pour vous inscrire, connectez-vous et se déconnecter un utilisateur.</span><span class="sxs-lookup"><span data-stu-id="bd49f-180">In this walkthrough, we'll illustrate how the project templates use ASP.NET Identity to add functionality to register, sign in and sign out a user.</span></span>

<span data-ttu-id="bd49f-181">ASP.NET Identity est implémenté à l’aide de la procédure suivante.</span><span class="sxs-lookup"><span data-stu-id="bd49f-181">ASP.NET Identity is implemented using the following procedure.</span></span> <span data-ttu-id="bd49f-182">L’objectif de cet article est de vous donner une vue d’ensemble détaillée de l’identité de ASP.NET ; Vous pouvez la suivre, étape par étape ou simplement de lire les détails.</span><span class="sxs-lookup"><span data-stu-id="bd49f-182">The purpose of this article is to give you a high level overview of ASP.NET Identity; you can follow it step by step or just read the details.</span></span> <span data-ttu-id="bd49f-183">Pour obtenir des instructions plus détaillées sur la création d’applications à l’aide d’ASP.NET Identity, y compris à l’aide de la nouvelle API pour ajouter des utilisateurs, des rôles et des informations de profil, consultez la section étapes suivantes à la fin de cet article.</span><span class="sxs-lookup"><span data-stu-id="bd49f-183">For more detailed instructions on creating apps using ASP.NET Identity, including using the new API to add users, roles and profile information, see the Next Steps section at the end of this article.</span></span>

1. <span data-ttu-id="bd49f-184">Créer une application ASP.NET MVC avec des comptes individuels.</span><span class="sxs-lookup"><span data-stu-id="bd49f-184">Create an ASP.NET MVC application with Individual Accounts.</span></span> <span data-ttu-id="bd49f-185">Vous pouvez utiliser ASP.NET Identity dans ASP.NET MVC, Web Forms, Web API, etc. de SignalR. Dans cet article, nous allons commencer avec une application ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="bd49f-185">You can use ASP.NET Identity in ASP.NET MVC, Web Forms, Web API, SignalR etc. In this article we will start with an ASP.NET MVC application.</span></span>  
  
    ![](introduction-to-aspnet-identity/_static/image1.png)
2. <span data-ttu-id="bd49f-186">Le projet créé contient les trois packages suivants pour ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="bd49f-186">The created project contains the following three packages for ASP.NET Identity.</span></span>

    - [`Microsoft.AspNet.Identity.EntityFramework`](http://www.nuget.org/packages/Microsoft.AspNet.Identity.EntityFramework/)  
   <span data-ttu-id="bd49f-187">Ce package a l’implémentation d’Entity Framework d’identité ASP.NET qui conserve les données d’identité ASP.NET et le schéma de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="bd49f-187">This package has the Entity Framework implementation of ASP.NET Identity which will persist the ASP.NET Identity data and schema to SQL Server.</span></span>
    - [`Microsoft.AspNet.Identity.Core`](http://www.nuget.org/packages/Microsoft.AspNet.Identity.Core/)  
   <span data-ttu-id="bd49f-188">Ce package contient des interfaces essentielles pour ASP.NET Identity.</span><span class="sxs-lookup"><span data-stu-id="bd49f-188">This package has the core interfaces for ASP.NET Identity.</span></span> <span data-ttu-id="bd49f-189">Ce package peut être utilisé pour écrire une implémentation pour ASP.NET Identity persistance différentes cibles stocke tels que Azure Table Storage, NoSQL, bases de données etc.</span><span class="sxs-lookup"><span data-stu-id="bd49f-189">This package can be used to write an implementation for ASP.NET Identity that targets different persistence stores such as Azure Table Storage, NoSQL databases etc.</span></span>
    - [`Microsoft.AspNet.Identity.OWIN`](http://www.nuget.org/packages/Microsoft.AspNet.Identity.Owin/)  
   <span data-ttu-id="bd49f-190">Ce package contient des fonctionnalités qui sont utilisée pour incorporer l’authentification OWIN avec ASP.NET Identity dans les applications ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="bd49f-190">This package contains functionality that is used to plug in OWIN authentication with ASP.NET Identity in ASP.NET applications.</span></span> <span data-ttu-id="bd49f-191">Cela est utilisé lorsque vous ajoutez un signe de fonctionnalités à votre application et appeler dans le middleware d’authentification de Cookie OWIN pour générer un cookie.</span><span class="sxs-lookup"><span data-stu-id="bd49f-191">This is used when you add sign in functionality to your application and call into OWIN Cookie Authentication middleware to generate a cookie.</span></span>
3. <span data-ttu-id="bd49f-192">Création d’un utilisateur.</span><span class="sxs-lookup"><span data-stu-id="bd49f-192">Creating a user.</span></span>  
   <span data-ttu-id="bd49f-193">Lancer l’application, puis cliquez sur le **inscrire** lien pour créer un utilisateur.</span><span class="sxs-lookup"><span data-stu-id="bd49f-193">Launch the application and then click on the **Register** link to create a user.</span></span> <span data-ttu-id="bd49f-194">L’illustration suivante montre la page d’inscription qui collecte le nom d’utilisateur et le mot de passe.</span><span class="sxs-lookup"><span data-stu-id="bd49f-194">The following image shows the Register page that collects the user name and password.</span></span>  
  
    ![](introduction-to-aspnet-identity/_static/image2.png)  
  
   <span data-ttu-id="bd49f-195">Lorsque l’utilisateur sélectionne le **inscrire** bouton, le `Register` action du contrôleur de compte crée l’utilisateur en appelant l’API d’identité ASP.NET, comme indiqué ci-dessous :</span><span class="sxs-lookup"><span data-stu-id="bd49f-195">When the user selects the **Register** button, the `Register` action of the Account controller creates the user by calling the ASP.NET Identity API, as highlighted below:</span></span>

    [!code-csharp[Main](introduction-to-aspnet-identity/samples/sample1.cs?highlight=8-9)]
4. <span data-ttu-id="bd49f-196">Connexion.</span><span class="sxs-lookup"><span data-stu-id="bd49f-196">Sign in.</span></span>  
   <span data-ttu-id="bd49f-197">Si l’utilisateur a été créé avec succès, elle est signée par le `SignInAsync` (méthode).</span><span class="sxs-lookup"><span data-stu-id="bd49f-197">If the user was successfully created, she is signed in by the `SignInAsync` method.</span></span>  

    [!code-csharp[Main](introduction-to-aspnet-identity/samples/sample6.cs?highlight=12)]


   <span data-ttu-id="bd49f-198">Le `SignInManager.SignInAsync` méthode génère une [ClaimsIdentity](https://msdn.microsoft.com/library/system.security.claims.claimsidentity.aspx).</span><span class="sxs-lookup"><span data-stu-id="bd49f-198">The `SignInManager.SignInAsync` method generates a [ClaimsIdentity](https://msdn.microsoft.com/library/system.security.claims.claimsidentity.aspx).</span></span> <span data-ttu-id="bd49f-199">Dans la mesure où ASP.NET Identity et l’authentification des cookies OWIN sont système basé sur les revendications, l’infrastructure requiert l’application pour générer un ClaimsIdentity pour l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="bd49f-199">Since ASP.NET Identity and OWIN Cookie Authentication are claims-based system, the framework requires the app to generate a ClaimsIdentity for the user.</span></span> <span data-ttu-id="bd49f-200">ClaimsIdentity comporte des informations sur toutes les revendications pour l’utilisateur, telles que les rôles de l’utilisateur appartient.</span><span class="sxs-lookup"><span data-stu-id="bd49f-200">ClaimsIdentity has information about all the claims for the user, such as what roles the user belongs to.</span></span>   
 
5. <span data-ttu-id="bd49f-201">Fermez la session.</span><span class="sxs-lookup"><span data-stu-id="bd49f-201">Log off.</span></span>  
   <span data-ttu-id="bd49f-202">Sélectionnez le **déconnecter** lien pour appeler l’action de fermeture de session dans le contrôleur de compte.</span><span class="sxs-lookup"><span data-stu-id="bd49f-202">Select the **Log off** link to call the LogOff action in the account controller.</span></span> 

    [!code-csharp[Main](introduction-to-aspnet-identity/samples/sample5.cs?highlight=6)]

   <span data-ttu-id="bd49f-203">Code en surbrillance ci-dessus montre OWIN `AuthenticationManager.SignOut` (méthode).</span><span class="sxs-lookup"><span data-stu-id="bd49f-203">The highlighted code above shows the OWIN `AuthenticationManager.SignOut` method.</span></span> <span data-ttu-id="bd49f-204">Ce comportement est analogue à [FormsAuthentication.SignOut](https://msdn.microsoft.com/library/system.web.security.formsauthentication.signout.aspx) méthode utilisée par le [FormsAuthentication](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx) module dans Web Forms.</span><span class="sxs-lookup"><span data-stu-id="bd49f-204">This is analogous to [FormsAuthentication.SignOut](https://msdn.microsoft.com/library/system.web.security.formsauthentication.signout.aspx) method used by the [FormsAuthentication](https://msdn.microsoft.com/library/system.web.security.formsauthenticationmodule.aspx) module in Web Forms.</span></span>

## <a name="components-of-aspnet-identity"></a><span data-ttu-id="bd49f-205">Composants d’identité ASP.NET</span><span class="sxs-lookup"><span data-stu-id="bd49f-205">Components of ASP.NET Identity</span></span>

<span data-ttu-id="bd49f-206">Le diagramme ci-dessous illustre les composants du système d’identité ASP.NET (sélectionnez [cela](introduction-to-aspnet-identity/_static/image3.png) ou sur le diagramme pour l’agrandir).</span><span class="sxs-lookup"><span data-stu-id="bd49f-206">The diagram below shows the components of the ASP.NET Identity system (select on [this](introduction-to-aspnet-identity/_static/image3.png) or on the diagram to enlarge it).</span></span> <span data-ttu-id="bd49f-207">Les packages en vert constituent le système d’identité ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="bd49f-207">The packages in green make up the ASP.NET Identity system.</span></span> <span data-ttu-id="bd49f-208">Tous les autres packages sont des dépendances qui sont nécessaires pour utiliser le système d’identité ASP.NET dans les applications ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="bd49f-208">All the other packages are dependencies which are needed to use the ASP.NET Identity system in ASP.NET applications.</span></span>

[![](introduction-to-aspnet-identity/_static/image5.png)](introduction-to-aspnet-identity/_static/image4.png)

<span data-ttu-id="bd49f-209">Voici une brève description des packages NuGet ne pas mentionné précédemment :</span><span class="sxs-lookup"><span data-stu-id="bd49f-209">The following is a brief description of the NuGet packages not mentioned previously:</span></span>

- [<span data-ttu-id="bd49f-210">Microsoft.Owin.Security.Cookies</span><span class="sxs-lookup"><span data-stu-id="bd49f-210">Microsoft.Owin.Security.Cookies</span></span>](http://www.nuget.org/packages/Microsoft.Owin.Security.Cookies/)  
 <span data-ttu-id="bd49f-211">Intergiciel (middleware) qui permet à une application utiliser un cookie en fonction de l’authentification, revient à ASP. Authentification de formulaires du NET.</span><span class="sxs-lookup"><span data-stu-id="bd49f-211">Middleware that enables an application to use cookie based authentication, similar to ASP.NET's Forms Authentication.</span></span>
- [<span data-ttu-id="bd49f-212">EntityFramework</span><span class="sxs-lookup"><span data-stu-id="bd49f-212">EntityFramework</span></span>](http://www.nuget.org/packages/EntityFramework/)  
 <span data-ttu-id="bd49f-213">Entity Framework est la technologie d’accès aux données recommandée de Microsoft pour les bases de données relationnelles.</span><span class="sxs-lookup"><span data-stu-id="bd49f-213">Entity Framework is Microsoft's recommended data access technology for relational databases.</span></span>

## <a name="migrating-from-membership-to-aspnet-identity"></a><span data-ttu-id="bd49f-214">Migration de l’appartenance à ASP.NET Identity</span><span class="sxs-lookup"><span data-stu-id="bd49f-214">Migrating from Membership to ASP.NET Identity</span></span>

<span data-ttu-id="bd49f-215">Nous espérons bientôt fournissent des conseils sur la migration de vos applications existantes qui utilisent l’appartenance d’ASP.NET ou l’appartenance Simple pour le nouveau système d’identité ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="bd49f-215">We hope to soon provide guidance on migrating your existing apps that use ASP.NET Membership or Simple Membership to the new ASP.NET Identity system.</span></span>

## <a name="next-steps"></a><span data-ttu-id="bd49f-216">Étapes suivantes</span><span class="sxs-lookup"><span data-stu-id="bd49f-216">Next Steps</span></span>

- [<span data-ttu-id="bd49f-217">Créer une application ASP.NET MVC 5 avec Facebook et Google OAuth2 et OpenID Sign-on</span><span class="sxs-lookup"><span data-stu-id="bd49f-217">Create an ASP.NET MVC 5 App with Facebook and Google OAuth2 and OpenID Sign-on</span></span>](../../../mvc/overview/security/create-an-aspnet-mvc-5-app-with-facebook-and-google-oauth2-and-openid-sign-on.md)  
 <span data-ttu-id="bd49f-218">Le didacticiel utilise l’API d’identité ASP.NET pour ajouter des informations de profil pour la base de données utilisateur et comment s’authentifier avec Google et Facebook.</span><span class="sxs-lookup"><span data-stu-id="bd49f-218">The tutorial uses the ASP.NET Identity API to add profile information to the user database, and how to authenticate with Google and Facebook.</span></span>
- [<span data-ttu-id="bd49f-219">Créer une application ASP.NET MVC avec authentification et base de données SQL et la déployer sur Azure App Service</span><span class="sxs-lookup"><span data-stu-id="bd49f-219">Create an ASP.NET MVC app with auth and SQL DB and deploy to Azure App Service</span></span>](https://docs.microsoft.com/aspnet/core/security/authorization/secure-data)  
 <span data-ttu-id="bd49f-220">Ce didacticiel montre comment utiliser l’API d’identité pour ajouter des utilisateurs et des rôles.</span><span class="sxs-lookup"><span data-stu-id="bd49f-220">This tutorial shows how to use the Identity API to add users and roles.</span></span>
- [https://github.com/rustd/AspnetIdentitySample](https://github.com/rustd/AspnetIdentitySample)  
 <span data-ttu-id="bd49f-221">Exemple d’application qui montre comment ajouter des rôles de base et prise en charge de l’utilisateur et comment effectuer la gestion des utilisateurs et des rôles.</span><span class="sxs-lookup"><span data-stu-id="bd49f-221">Sample application that shows how to add basic roles and user support and how to do roles and user management.</span></span>

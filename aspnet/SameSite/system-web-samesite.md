---
title: Utiliser des cookies SameSite dans ASP.NET
author: rick-anderson
description: Découvrez comment utiliser pour SameSite des cookies dans ASP.NET
ms.author: riande
ms.date: 1/22/2019
uid: samesite/system-web-samesite
ms.openlocfilehash: c262e300361f33621e8bd126a34b251c23f56e1a
ms.sourcegitcommit: 6bd0d7581ec36dc32cb85d0d5fc0e51068dd4423
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/14/2020
ms.locfileid: "77234760"
---
# <a name="work-with-samesite-cookies-in-aspnet"></a><span data-ttu-id="e739c-103">Utiliser des cookies SameSite dans ASP.NET</span><span class="sxs-lookup"><span data-stu-id="e739c-103">Work with SameSite cookies in ASP.NET</span></span>

<span data-ttu-id="e739c-104">De [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="e739c-104">By [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

<span data-ttu-id="e739c-105">SameSite est un projet standard de l' [IETF](https://ietf.org/about/) conçu pour offrir une protection contre les attaques de falsification de requête intersites (CSRF).</span><span class="sxs-lookup"><span data-stu-id="e739c-105">SameSite is an [IETF](https://ietf.org/about/) draft standard designed to provide some protection against cross-site request forgery (CSRF) attacks.</span></span> <span data-ttu-id="e739c-106">Initialement rédigée dans [2016](https://tools.ietf.org/html/draft-west-first-party-cookies-07), le brouillon standard a été mis à jour dans [2019](https://tools.ietf.org/html/draft-west-cookie-incrementalism-00).</span><span class="sxs-lookup"><span data-stu-id="e739c-106">Originally drafted in [2016](https://tools.ietf.org/html/draft-west-first-party-cookies-07), the draft standard was updated in [2019](https://tools.ietf.org/html/draft-west-cookie-incrementalism-00).</span></span> <span data-ttu-id="e739c-107">La norme mise à jour n’est pas à compatibilité descendante avec la norme précédente, avec comme suit les différences les plus perceptibles :</span><span class="sxs-lookup"><span data-stu-id="e739c-107">The updated standard is not backward compatible with the previous standard, with the following being the most noticeable differences:</span></span>

* <span data-ttu-id="e739c-108">Les cookies sans en-tête SameSite sont traités comme `SameSite=Lax` par défaut.</span><span class="sxs-lookup"><span data-stu-id="e739c-108">Cookies without SameSite header are treated as `SameSite=Lax` by default.</span></span>
* <span data-ttu-id="e739c-109">`SameSite=None` doit être utilisé pour autoriser l’utilisation de cookies entre sites.</span><span class="sxs-lookup"><span data-stu-id="e739c-109">`SameSite=None` must be used to allow cross-site cookie use.</span></span>
* <span data-ttu-id="e739c-110">Les cookies qui déclarent `SameSite=None` doivent également être marqués comme `Secure`.</span><span class="sxs-lookup"><span data-stu-id="e739c-110">Cookies that assert `SameSite=None` must also be marked as `Secure`.</span></span>
* <span data-ttu-id="e739c-111">La valeur SameSite = None n’est pas autorisée par la [norme 2016](https://tools.ietf.org/html/draft-west-first-party-cookies-07) et oblige certaines implémentations à traiter ces cookies comme SameSite = strict.</span><span class="sxs-lookup"><span data-stu-id="e739c-111">The value SameSite=None is not allowed by the [2016 standard](https://tools.ietf.org/html/draft-west-first-party-cookies-07) and causes some implementations to treat such cookies as SameSite=Strict.</span></span> <span data-ttu-id="e739c-112">Consultez [prise en charge des navigateurs plus anciens](#sob) dans ce document.</span><span class="sxs-lookup"><span data-stu-id="e739c-112">See [Supporting older browsers](#sob) in this document.</span></span>

<span data-ttu-id="e739c-113">Le paramètre `SameSite=Lax` fonctionne pour la plupart des cookies d’application.</span><span class="sxs-lookup"><span data-stu-id="e739c-113">The `SameSite=Lax` setting works for most application cookies.</span></span> <span data-ttu-id="e739c-114">Certaines formes d’authentification comme [OpenID Connect](https://openid.net/connect/) (OIDC) et [WS-Federation](https://auth0.com/docs/protocols/ws-fed) default pour la publication de redirections basées sur.</span><span class="sxs-lookup"><span data-stu-id="e739c-114">Some forms of authentication like [OpenID Connect](https://openid.net/connect/) (OIDC) and [WS-Federation](https://auth0.com/docs/protocols/ws-fed) default to POST based redirects.</span></span> <span data-ttu-id="e739c-115">Les redirections basées sur la publication déclenchent les protections du navigateur SameSite, donc SameSite est désactivé pour ces composants.</span><span class="sxs-lookup"><span data-stu-id="e739c-115">The POST based redirects trigger the SameSite browser protections, so SameSite is disabled for these components.</span></span> <span data-ttu-id="e739c-116">La plupart des connexions [OAuth](https://oauth.net/) ne sont pas affectées en raison de différences de flux de demande.</span><span class="sxs-lookup"><span data-stu-id="e739c-116">Most [OAuth](https://oauth.net/) logins are not affected due to differences in how the request flows.</span></span>

<span data-ttu-id="e739c-117">Les applications qui utilisent `iframe` peuvent rencontrer des problèmes avec les cookies `SameSite=Lax` ou `SameSite=Strict`, car les IFRAMES sont traités comme des scénarios intersites.</span><span class="sxs-lookup"><span data-stu-id="e739c-117">Applications that use `iframe` may experience issues with `SameSite=Lax` or `SameSite=Strict` cookies because iframes are treated as cross-site scenarios.</span></span>

<span data-ttu-id="e739c-118">Chaque composant ASP.NET qui émet des cookies doit décider si SameSite est approprié.</span><span class="sxs-lookup"><span data-stu-id="e739c-118">Each ASP.NET component that emits cookies needs to decide if SameSite is appropriate.</span></span>

<span data-ttu-id="e739c-119">Consultez [problèmes connus liés](#known) aux problèmes d’applications après l’installation des mises à jour 2019 .net SameSite.</span><span class="sxs-lookup"><span data-stu-id="e739c-119">See [Known Issues](#known) for problems with applications after installing the 2019 .Net SameSite updates.</span></span>

## <a name="using-samesite-in-aspnet-472-and-48"></a><span data-ttu-id="e739c-120">Utilisation de SameSite dans ASP.NET 4.7.2 et 4,8</span><span class="sxs-lookup"><span data-stu-id="e739c-120">Using SameSite in ASP.NET 4.7.2 and 4.8</span></span>

<span data-ttu-id="e739c-121">.Net 4.7.2 et 4,8 prennent en charge [2019 Draft Standard](https://tools.ietf.org/html/draft-west-cookie-incrementalism-00) pour SameSite depuis la publication des mises à jour en décembre 2019.</span><span class="sxs-lookup"><span data-stu-id="e739c-121">.Net 4.7.2 and 4.8 supports the [2019 draft standard](https://tools.ietf.org/html/draft-west-cookie-incrementalism-00) for SameSite since the release of updates in December 2019.</span></span> <span data-ttu-id="e739c-122">Les développeurs sont en mesure de contrôler par programmation la valeur de l’en-tête SameSite à l’aide de la [propriété HttpCookie. SameSite](/dotnet/api/system.web.httpcookie.samesite#System_Web_HttpCookie_SameSite).</span><span class="sxs-lookup"><span data-stu-id="e739c-122">Developers are able to programmatically control the value of the SameSite header using the [HttpCookie.SameSite property](/dotnet/api/system.web.httpcookie.samesite#System_Web_HttpCookie_SameSite).</span></span> <span data-ttu-id="e739c-123">Si vous affectez à la propriété `SameSite` la valeur `Strict`, `Lax`ou `None`, ces valeurs sont écrites sur le réseau avec le cookie.</span><span class="sxs-lookup"><span data-stu-id="e739c-123">Setting the `SameSite` property to `Strict`, `Lax`, or `None` results in those values being written on the network with the cookie.</span></span> <span data-ttu-id="e739c-124">La valeur `(SameSiteMode)(-1)` indique qu’aucun en-tête SameSite ne doit être inclus sur le réseau avec le cookie.</span><span class="sxs-lookup"><span data-stu-id="e739c-124">Setting it equal to `(SameSiteMode)(-1)` indicates that no SameSite header should be included on the network with the cookie.</span></span> <span data-ttu-id="e739c-125">La [propriété HttpCookie. Secure](/dotnet/api/system.web.httpcookie.secure), ou’RequireSSL’dans les fichiers de configuration, peut être utilisée pour marquer le cookie comme `Secure` ou non.</span><span class="sxs-lookup"><span data-stu-id="e739c-125">The [HttpCookie.Secure Property](/dotnet/api/system.web.httpcookie.secure), or 'requireSSL' in config files, can be used to mark the cookie as `Secure` or not.</span></span>

<span data-ttu-id="e739c-126">Par défaut, les nouvelles instances de `HttpCookie` sont `SameSite=(SameSiteMode)(-1)` et `Secure=false`.</span><span class="sxs-lookup"><span data-stu-id="e739c-126">New `HttpCookie` instances will default to `SameSite=(SameSiteMode)(-1)` and `Secure=false`.</span></span> <span data-ttu-id="e739c-127">Ces valeurs par défaut peuvent être remplacées dans la section de configuration `system.web/httpCookies`, où la chaîne `"Unspecified"` est une syntaxe conviviale de configuration uniquement pour `(SameSiteMode)(-1)`:</span><span class="sxs-lookup"><span data-stu-id="e739c-127">These defaults can be overridden in the `system.web/httpCookies` configuration section, where the string `"Unspecified"` is a friendly configuration-only syntax for `(SameSiteMode)(-1)`:</span></span>

```xml
<configuration>
 <system.web>
  <httpCookies sameSite="[Strict|Lax|None|Unspecified]" requireSSL="[true|false]" />
 <system.web>
<configuration>
```

<span data-ttu-id="e739c-128">ASP.Net émet également quatre cookies spécifiques propres à ces fonctionnalités : authentification anonyme, authentification par formulaire, état de session et gestion des rôles.</span><span class="sxs-lookup"><span data-stu-id="e739c-128">ASP.Net also issues four specific cookies of its own for these features: Anonymous Authentication, Forms Authentication, Session State, and Role Management.</span></span> <span data-ttu-id="e739c-129">Les instances de ces cookies obtenues dans le runtime peuvent être manipulées à l’aide des propriétés `SameSite` et `Secure` comme n’importe quelle autre instance HttpCookie.</span><span class="sxs-lookup"><span data-stu-id="e739c-129">Instances of these cookies obtained in runtime can be manipulated using the `SameSite` and `Secure` properties just like any other HttpCookie instance.</span></span> <span data-ttu-id="e739c-130">Toutefois, en raison de l’émergence du patchwork de la norme SameSite, les options de configuration de ces quatre fonctionnalités sont incohérentes.</span><span class="sxs-lookup"><span data-stu-id="e739c-130">However, due to the patchwork emergence of the SameSite standard, configuration options for these four features cookies is inconsistent.</span></span> <span data-ttu-id="e739c-131">Les sections de configuration et attributs appropriés, avec les valeurs par défaut, sont indiqués ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="e739c-131">The relevant configuration sections and attributes, with defaults, are shown below.</span></span> <span data-ttu-id="e739c-132">S’il n’existe aucun `SameSite` ou `Secure` attribut associé pour une fonctionnalité, la fonctionnalité est redéfinie sur les valeurs par défaut configurées dans la section `system.web/httpCookies` présentée ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="e739c-132">If there is no `SameSite` or `Secure` related attribute for a feature, then the feature will fall back on the defaults configured in the `system.web/httpCookies` section discussed above.</span></span>

```xml
<configuration>
 <system.web>
  <anonymousIdentification cookieRequireSSL="false" /> <!-- No config attribute for SameSite -->
  <authentication>
   <forms cookieSameSite="Lax" requireSSL="false" />
  </authentication>
  <sessionState cookieSameSite="Lax" /> <!-- No config attribute for Secure -->
  <roleManager cookieRequireSSL="false" /> <!-- No config attribute for SameSite -->
 <system.web>
<configuration>
```  

<span data-ttu-id="e739c-133">**Remarque**: « non spécifié » n’est disponible que pour `system.web/httpCookies@sameSite` pour le moment.</span><span class="sxs-lookup"><span data-stu-id="e739c-133">**Note**: 'Unspecified' is only available to `system.web/httpCookies@sameSite` at the moment.</span></span> <span data-ttu-id="e739c-134">Nous espérons ajouter une syntaxe similaire aux attributs cookieSameSite précédemment affichés dans les futures mises à jour.</span><span class="sxs-lookup"><span data-stu-id="e739c-134">We hope to add similar syntax to the previously shown cookieSameSite attributes in future updates.</span></span> <span data-ttu-id="e739c-135">La définition de `(SameSiteMode)(-1)` dans le code fonctionne toujours sur les instances de ces cookies. \*</span><span class="sxs-lookup"><span data-stu-id="e739c-135">Setting `(SameSiteMode)(-1)` in code still works on instances of these cookies.\*</span></span>

## <a name="history-and-changes"></a><span data-ttu-id="e739c-136">Historique et modifications</span><span class="sxs-lookup"><span data-stu-id="e739c-136">History and changes</span></span>

<span data-ttu-id="e739c-137">La prise en charge de SameSite a été implémentée pour la première fois dans .NET 4.7.2 à l’aide de la [norme draft 2016](https://tools.ietf.org/html/draft-west-first-party-cookies-07#section-4.1).</span><span class="sxs-lookup"><span data-stu-id="e739c-137">SameSite support was first implemented in .NET 4.7.2 using the [2016 draft standard](https://tools.ietf.org/html/draft-west-first-party-cookies-07#section-4.1).</span></span>

<span data-ttu-id="e739c-138">Le 19 novembre 2019 mises à jour pour Windows a mis à jour .NET 4.7.2 + de la norme 2016 à la norme 2019.</span><span class="sxs-lookup"><span data-stu-id="e739c-138">The November 19, 2019 updates for Windows updated .NET 4.7.2+ from the 2016 standard to the 2019 standard.</span></span> <span data-ttu-id="e739c-139">Des mises à jour supplémentaires sont à venir pour d’autres versions de Windows.</span><span class="sxs-lookup"><span data-stu-id="e739c-139">Additional updates are forthcoming for other versions of Windows.</span></span> <span data-ttu-id="e739c-140">Pour plus d’informations, consultez <xref:samesite/kbs-samesite>.</span><span class="sxs-lookup"><span data-stu-id="e739c-140">For more information, see <xref:samesite/kbs-samesite>.</span></span>

 <span data-ttu-id="e739c-141">Le brouillon 2019 de la spécification SameSite :</span><span class="sxs-lookup"><span data-stu-id="e739c-141">The 2019 draft of the SameSite specification:</span></span>

* <span data-ttu-id="e739c-142">N’est **pas** à compatibilité descendante avec le brouillon 2016.</span><span class="sxs-lookup"><span data-stu-id="e739c-142">Is **not** backwards compatible with the 2016 draft.</span></span> <span data-ttu-id="e739c-143">Pour plus d’informations, consultez [prise en charge des navigateurs plus anciens](#sob) dans ce document.</span><span class="sxs-lookup"><span data-stu-id="e739c-143">For more information, see [Supporting older browsers](#sob) in this document.</span></span>
* <span data-ttu-id="e739c-144">Spécifie que les cookies sont traités comme `SameSite=Lax` par défaut.</span><span class="sxs-lookup"><span data-stu-id="e739c-144">Specifies cookies are treated as `SameSite=Lax` by default.</span></span>
* <span data-ttu-id="e739c-145">Spécifie les cookies qui déclarent explicitement `SameSite=None` pour permettre la remise entre sites doivent également être marqués comme `Secure`.</span><span class="sxs-lookup"><span data-stu-id="e739c-145">Specifies cookies that explicitly assert `SameSite=None` in order to enable cross-site delivery should also be marked as `Secure`.</span></span>
* <span data-ttu-id="e739c-146">Est pris en charge par les correctifs émis comme indiqué dans les Articles de la base de connaissances répertoriés ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="e739c-146">Is supported by patches issued as described in the KB's listed above.</span></span>
* <span data-ttu-id="e739c-147">Est planifié pour être activé par [chrome](https://chromestatus.com/feature/5088147346030592) par défaut au [2020 février](https://blog.chromium.org/2019/10/developers-get-ready-for-new.html).</span><span class="sxs-lookup"><span data-stu-id="e739c-147">Is scheduled to be enabled by [Chrome](https://chromestatus.com/feature/5088147346030592) by default in [Feb 2020](https://blog.chromium.org/2019/10/developers-get-ready-for-new.html).</span></span> <span data-ttu-id="e739c-148">Les navigateurs ont commencé à passer à cette norme dans 2019.</span><span class="sxs-lookup"><span data-stu-id="e739c-148">Browsers started moving to this standard in 2019.</span></span>

<a name="known"><a/>

## <a name="known-issues"></a><span data-ttu-id="e739c-149">Problèmes connus</span><span class="sxs-lookup"><span data-stu-id="e739c-149">Known Issues</span></span>

<span data-ttu-id="e739c-150">Étant donné que les spécifications de brouillon 2016 et 2019 ne sont pas compatibles, la mise à jour du .NET Framework de novembre 2019 introduit des modifications susceptibles d’être endommagées.</span><span class="sxs-lookup"><span data-stu-id="e739c-150">Because the 2016 and 2019 draft specifications are not compatible, the November 2019 .Net Framework update introduces some changes that may be breaking.</span></span>

* <span data-ttu-id="e739c-151">L’état de session et les cookies d’authentification par formulaire sont désormais écrits sur le réseau en tant que `Lax` au lieu d’être non spécifiés.</span><span class="sxs-lookup"><span data-stu-id="e739c-151">Session State and Forms Authentication cookies are now written to the network as `Lax` instead of unspecified.</span></span>
  * <span data-ttu-id="e739c-152">Tandis que la plupart des applications fonctionnent avec des cookies `SameSite=Lax`, les applications qui sont publiées sur les sites ou les applications qui utilisent des `iframe` peuvent constater que leurs cookies d’état de session ou d’autorisation de formulaires ne sont pas utilisés comme prévu.</span><span class="sxs-lookup"><span data-stu-id="e739c-152">While most apps work with `SameSite=Lax` cookies, apps that POST across sites or applications that make use of `iframe` may find that their session state or forms authorization cookies aren't being used as expected.</span></span> <span data-ttu-id="e739c-153">Pour remédier à cela, modifiez la valeur `cookieSameSite` dans la section de configuration appropriée, comme indiqué précédemment.</span><span class="sxs-lookup"><span data-stu-id="e739c-153">To remedy this, change the `cookieSameSite` value in the appropriate configuration section as discussed previously.</span></span>
* <span data-ttu-id="e739c-154">Les HttpCookies qui définissent explicitement `SameSite=None` dans le code ou la configuration ont maintenant cette valeur écrite avec le cookie, alors qu’elle a été précédemment omise.</span><span class="sxs-lookup"><span data-stu-id="e739c-154">HttpCookies that explicitly set `SameSite=None` in code or configuration now have that value written with the cookie, whereas it was previously omitted.</span></span> <span data-ttu-id="e739c-155">Cela peut entraîner des problèmes avec les navigateurs plus anciens qui prennent uniquement en charge le brouillon 2016 standard.</span><span class="sxs-lookup"><span data-stu-id="e739c-155">This may cause issues with older browsers that only support the 2016 draft standard.</span></span>
  * <span data-ttu-id="e739c-156">Lorsque vous ciblez des navigateurs prenant en charge le brouillon 2019 avec `SameSite=None` cookies, n’oubliez pas de les marquer également `Secure` ou s’ils ne sont pas reconnus.</span><span class="sxs-lookup"><span data-stu-id="e739c-156">When targeting browsers supporting the 2019 draft standard with `SameSite=None` cookies, remember to also mark them `Secure` or they may not be recognized.</span></span>
  * <span data-ttu-id="e739c-157">Pour rétablir le comportement 2016 qui consiste à ne pas écrire `SameSite=None`, utilisez le paramètre d’application `aspnet:SupressSameSiteNone=true`.</span><span class="sxs-lookup"><span data-stu-id="e739c-157">To revert to the 2016 behavior of not writing `SameSite=None`, use the app setting `aspnet:SupressSameSiteNone=true`.</span></span> <span data-ttu-id="e739c-158">Notez que cela s’applique à tous les HttpCookies de l’application.</span><span class="sxs-lookup"><span data-stu-id="e739c-158">Note that this will apply to all HttpCookies in the app.</span></span>

### <a name="azure-app-servicesamesite-cookie-handling"></a><span data-ttu-id="e739c-159">Azure App Service : gestion des cookies SameSite</span><span class="sxs-lookup"><span data-stu-id="e739c-159">Azure App Service—SameSite cookie handling</span></span>

<span data-ttu-id="e739c-160">Pour plus d’informations sur Azure App Service la configuration des comportements SameSite dans les applications .net 4.7.2, consultez [Azure App service, gestion des cookies SameSite et .NET Framework correctif 4.7.2](https://azure.microsoft.com/updates/app-service-samesite-cookie-update/) .</span><span class="sxs-lookup"><span data-stu-id="e739c-160">See [Azure App Service—SameSite cookie handling and .NET Framework 4.7.2 patch](https://azure.microsoft.com/updates/app-service-samesite-cookie-update/) for information about how Azure App Service is configuring SameSite behaviors in .Net 4.7.2 apps.</span></span>

<a name="sob"></a>

## <a name="supporting-older-browsers"></a><span data-ttu-id="e739c-161">Prise en charge des navigateurs plus anciens</span><span class="sxs-lookup"><span data-stu-id="e739c-161">Supporting older browsers</span></span>

<span data-ttu-id="e739c-162">La norme 2016 SameSite stipule que les valeurs inconnues doivent être traitées comme des valeurs `SameSite=Strict`.</span><span class="sxs-lookup"><span data-stu-id="e739c-162">The 2016 SameSite standard mandated that unknown values must be treated as `SameSite=Strict` values.</span></span> <span data-ttu-id="e739c-163">Les applications accessibles depuis des navigateurs plus anciens qui prennent en charge la norme 2016 SameSite peuvent s’arrêter lorsqu’ils obtiennent une propriété SameSite avec la valeur `None`.</span><span class="sxs-lookup"><span data-stu-id="e739c-163">Apps accessed from older browsers which support the 2016 SameSite standard may break when they get a SameSite property with a value of `None`.</span></span> <span data-ttu-id="e739c-164">Les applications Web doivent implémenter la détection du navigateur si elles envisagent de prendre en charge des navigateurs plus anciens.</span><span class="sxs-lookup"><span data-stu-id="e739c-164">Web apps must implement browser detection if they intend to support older browsers.</span></span> <span data-ttu-id="e739c-165">ASP.NET n’implémente pas la détection du navigateur, car les valeurs des agents utilisateur sont très volatiles et changent fréquemment.</span><span class="sxs-lookup"><span data-stu-id="e739c-165">ASP.NET doesn't implement browser detection because User-Agents values are highly volatile and change frequently.</span></span> <span data-ttu-id="e739c-166">Le code suivant peut être appelé au <xref:HTTP.HttpCookie> site d’appel :</span><span class="sxs-lookup"><span data-stu-id="e739c-166">The following code can be called at the <xref:HTTP.HttpCookie> call site:</span></span>

[!code-csharp[](sample/SameSiteCheck.cs?name=snippet)]

<span data-ttu-id="e739c-167">Dans l’exemple précédent, `MyUserAgentDetectionLib.DisallowsSameSiteNone` est une bibliothèque fournie par l’utilisateur, qui détecte si l’agent utilisateur ne prend pas en charge SameSite `None`.</span><span class="sxs-lookup"><span data-stu-id="e739c-167">In the preceding sample, `MyUserAgentDetectionLib.DisallowsSameSiteNone` is a user supplied library that detects if the user agent doesn't support SameSite `None`.</span></span> <span data-ttu-id="e739c-168">Le code suivant illustre un exemple de méthode `DisallowsSameSiteNone` :</span><span class="sxs-lookup"><span data-stu-id="e739c-168">The following code shows a sample `DisallowsSameSiteNone` method:</span></span>

> [!WARNING]
> <span data-ttu-id="e739c-169">Le code suivant est uniquement à des fins de démonstration :</span><span class="sxs-lookup"><span data-stu-id="e739c-169">The following code is for demonstration only:</span></span>
> * <span data-ttu-id="e739c-170">Elle ne doit pas être considérée comme terminée.</span><span class="sxs-lookup"><span data-stu-id="e739c-170">It should not be considered complete.</span></span>
> * <span data-ttu-id="e739c-171">Elle n’est pas gérée ni prise en charge.</span><span class="sxs-lookup"><span data-stu-id="e739c-171">It is not maintained or supported.</span></span>

[!code-csharp[](sample/SameSiteCheck.cs?name=snippet2)]

## <a name="test-apps-for-samesite-problems"></a><span data-ttu-id="e739c-172">Tester des applications pour les problèmes SameSite</span><span class="sxs-lookup"><span data-stu-id="e739c-172">Test apps for SameSite problems</span></span>

<span data-ttu-id="e739c-173">Les applications qui interagissent avec des sites distants, par exemple via une connexion tierce, doivent :</span><span class="sxs-lookup"><span data-stu-id="e739c-173">Apps that interact with remote sites such as through third-party login need to:</span></span>

* <span data-ttu-id="e739c-174">Testez l’interaction sur plusieurs navigateurs.</span><span class="sxs-lookup"><span data-stu-id="e739c-174">Test the interaction on multiple browsers.</span></span>
* <span data-ttu-id="e739c-175">Appliquez la [détection et l’atténuation du navigateur](#sob) abordées dans ce document.</span><span class="sxs-lookup"><span data-stu-id="e739c-175">Apply the [browser detection and mitigation](#sob) discussed in this document.</span></span>

<span data-ttu-id="e739c-176">Testez les applications Web à l’aide d’une version du client qui peut s’abonner au nouveau comportement SameSite.</span><span class="sxs-lookup"><span data-stu-id="e739c-176">Test web apps using a client version that can opt-in to the new SameSite behavior.</span></span> <span data-ttu-id="e739c-177">Chrome, Firefox et chrome Edge ont tous des indicateurs de fonctionnalités d’abonnement qui peuvent être utilisés à des fins de test.</span><span class="sxs-lookup"><span data-stu-id="e739c-177">Chrome, Firefox, and Chromium Edge all have new opt-in feature flags that can be used for testing.</span></span> <span data-ttu-id="e739c-178">Une fois que votre application applique les correctifs SameSite, testez-la avec des versions client plus anciennes, en particulier Safari.</span><span class="sxs-lookup"><span data-stu-id="e739c-178">After your app applies the SameSite patches, test it with older client versions, especially Safari.</span></span> <span data-ttu-id="e739c-179">Pour plus d’informations, consultez [prise en charge des navigateurs plus anciens](#sob) dans ce document.</span><span class="sxs-lookup"><span data-stu-id="e739c-179">For more information, see [Supporting older browsers](#sob) in this document.</span></span>

### <a name="test-with-chrome"></a><span data-ttu-id="e739c-180">Tester avec chrome</span><span class="sxs-lookup"><span data-stu-id="e739c-180">Test with Chrome</span></span>

<span data-ttu-id="e739c-181">Chrome 78 + donne des résultats trompeurs, car une atténuation temporaire est en place.</span><span class="sxs-lookup"><span data-stu-id="e739c-181">Chrome 78+ gives misleading results because it has a temporary mitigation in place.</span></span> <span data-ttu-id="e739c-182">Le chrome 78 + atténuation temporaire autorise les cookies datant de moins de deux minutes.</span><span class="sxs-lookup"><span data-stu-id="e739c-182">The Chrome 78+ temporary mitigation allows cookies less than two minutes old.</span></span> <span data-ttu-id="e739c-183">Le chrome 76 ou 77 avec les indicateurs de test appropriés activés fournit des résultats plus précis.</span><span class="sxs-lookup"><span data-stu-id="e739c-183">Chrome 76 or 77 with the appropriate test flags enabled provides more accurate results.</span></span> <span data-ttu-id="e739c-184">Pour tester le nouveau comportement SameSite, basculez `chrome://flags/#same-site-by-default-cookies` sur **activé**.</span><span class="sxs-lookup"><span data-stu-id="e739c-184">To test the new SameSite behavior toggle `chrome://flags/#same-site-by-default-cookies` to **Enabled**.</span></span> <span data-ttu-id="e739c-185">Les anciennes versions de chrome (75 et versions antérieures) sont signalées pour échouer avec le nouveau paramètre de `None`.</span><span class="sxs-lookup"><span data-stu-id="e739c-185">Older versions of Chrome (75 and below) are reported to fail with the new `None` setting.</span></span> <span data-ttu-id="e739c-186">Consultez [prise en charge des navigateurs plus anciens](#sob) dans ce document.</span><span class="sxs-lookup"><span data-stu-id="e739c-186">See [Supporting older browsers](#sob) in this document.</span></span>

<span data-ttu-id="e739c-187">Google ne rend pas les versions de chrome plus anciennes disponibles.</span><span class="sxs-lookup"><span data-stu-id="e739c-187">Google does not make older chrome versions available.</span></span> <span data-ttu-id="e739c-188">Suivez les instructions de [Télécharger chrome](https://www.chromium.org/getting-involved/download-chromium) pour tester les anciennes versions de chrome.</span><span class="sxs-lookup"><span data-stu-id="e739c-188">Follow the instructions at [Download Chromium](https://www.chromium.org/getting-involved/download-chromium) to test older versions of Chrome.</span></span> <span data-ttu-id="e739c-189">Ne téléchargez **pas** chrome à partir des liens fournis en recherchant les anciennes versions de chrome.</span><span class="sxs-lookup"><span data-stu-id="e739c-189">Do **not** download Chrome from links provided by searching for older versions of chrome.</span></span>

* [<span data-ttu-id="e739c-190">Chrome 76 Win64</span><span class="sxs-lookup"><span data-stu-id="e739c-190">Chromium 76 Win64</span></span>](https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win_x64/664998/)
* [<span data-ttu-id="e739c-191">Chrome 74 Win64</span><span class="sxs-lookup"><span data-stu-id="e739c-191">Chromium 74 Win64</span></span>](https://commondatastorage.googleapis.com/chromium-browser-snapshots/index.html?prefix=Win_x64/638880/)

### <a name="test-with-safari"></a><span data-ttu-id="e739c-192">Tester avec Safari</span><span class="sxs-lookup"><span data-stu-id="e739c-192">Test with Safari</span></span>

<span data-ttu-id="e739c-193">Safari 12 implémentait strictement le brouillon précédent et échoue lorsque la nouvelle valeur de `None` se trouve dans un cookie.</span><span class="sxs-lookup"><span data-stu-id="e739c-193">Safari 12 strictly implemented the prior draft and fails when the new `None` value is in a cookie.</span></span> <span data-ttu-id="e739c-194">`None` est évité par le biais du code de détection du navigateur qui [prend en charge les navigateurs plus anciens](#sob) dans ce document.</span><span class="sxs-lookup"><span data-stu-id="e739c-194">`None` is avoided via the browser detection code [Supporting older browsers](#sob) in this document.</span></span> <span data-ttu-id="e739c-195">Testez les connexions de style du système d’exploitation Safari 12, Safari 13 et WebKit à l’aide de MSAL, ADAL ou toute bibliothèque que vous utilisez.</span><span class="sxs-lookup"><span data-stu-id="e739c-195">Test Safari 12, Safari 13, and WebKit based OS style logins using MSAL, ADAL or whatever library you are using.</span></span> <span data-ttu-id="e739c-196">Le problème dépend de la version du système d’exploitation sous-jacent.</span><span class="sxs-lookup"><span data-stu-id="e739c-196">The problem is dependent on the underlying OS version.</span></span> <span data-ttu-id="e739c-197">OSX Mojave (10,14) et iOS 12 sont connus pour avoir des problèmes de compatibilité avec le nouveau comportement de SameSite.</span><span class="sxs-lookup"><span data-stu-id="e739c-197">OSX Mojave (10.14) and iOS 12 are known to have compatibility problems with the new SameSite behavior.</span></span> <span data-ttu-id="e739c-198">La mise à niveau du système d’exploitation vers OSX Catalina (10,15) ou iOS 13 résout le problème.</span><span class="sxs-lookup"><span data-stu-id="e739c-198">Upgrading the OS to OSX Catalina (10.15) or iOS 13 fixes the problem.</span></span> <span data-ttu-id="e739c-199">Safari ne dispose pas actuellement d’un indicateur d’abonnement pour tester le nouveau comportement des spécifications.</span><span class="sxs-lookup"><span data-stu-id="e739c-199">Safari does not currently have an opt-in flag for testing the new spec behavior.</span></span>

### <a name="test-with-firefox"></a><span data-ttu-id="e739c-200">Test avec Firefox</span><span class="sxs-lookup"><span data-stu-id="e739c-200">Test with Firefox</span></span>

<span data-ttu-id="e739c-201">La prise en charge de Firefox pour la nouvelle norme peut être testée sur la version 68 + en choisissant dans la page `about:config` avec l’indicateur de fonctionnalité `network.cookie.sameSite.laxByDefault`.</span><span class="sxs-lookup"><span data-stu-id="e739c-201">Firefox support for the new standard can be tested on version 68+ by opting in on the `about:config` page with the feature flag `network.cookie.sameSite.laxByDefault`.</span></span> <span data-ttu-id="e739c-202">Il n’y a eu aucun rapport sur les problèmes de compatibilité avec les versions antérieures de Firefox.</span><span class="sxs-lookup"><span data-stu-id="e739c-202">There haven't been reports of compatibility issues with older versions of Firefox.</span></span>

### <a name="test-with-edge-browser"></a><span data-ttu-id="e739c-203">Tester avec le navigateur Edge</span><span class="sxs-lookup"><span data-stu-id="e739c-203">Test with Edge browser</span></span>

<span data-ttu-id="e739c-204">Edge prend en charge l’ancien standard SameSite.</span><span class="sxs-lookup"><span data-stu-id="e739c-204">Edge supports the old SameSite standard.</span></span> <span data-ttu-id="e739c-205">Edge version 44 ne présente aucun problème de compatibilité connu avec la nouvelle norme.</span><span class="sxs-lookup"><span data-stu-id="e739c-205">Edge version 44 doesn't have any known compatibility problems with the new standard.</span></span>

### <a name="test-with-edge-chromium"></a><span data-ttu-id="e739c-206">Test avec Edge (chrome)</span><span class="sxs-lookup"><span data-stu-id="e739c-206">Test with Edge (Chromium)</span></span>

<span data-ttu-id="e739c-207">Les indicateurs SameSite sont définis sur la page `edge://flags/#same-site-by-default-cookies`.</span><span class="sxs-lookup"><span data-stu-id="e739c-207">SameSite flags are set on the `edge://flags/#same-site-by-default-cookies` page.</span></span> <span data-ttu-id="e739c-208">Aucun problème de compatibilité n’a été découvert avec le chrome Edge.</span><span class="sxs-lookup"><span data-stu-id="e739c-208">No compatibility issues were discovered with Edge Chromium.</span></span>

### <a name="test-with-electron"></a><span data-ttu-id="e739c-209">Test avec électron</span><span class="sxs-lookup"><span data-stu-id="e739c-209">Test with Electron</span></span>

<span data-ttu-id="e739c-210">Les versions d’électrons incluent des versions plus anciennes de chrome.</span><span class="sxs-lookup"><span data-stu-id="e739c-210">Versions of Electron include older versions of Chromium.</span></span> <span data-ttu-id="e739c-211">Par exemple, la version de l’électron utilisée par les équipes est le chrome 66, qui présente le comportement plus ancien.</span><span class="sxs-lookup"><span data-stu-id="e739c-211">For example, the version of Electron used by Teams is Chromium 66, which exhibits the older behavior.</span></span> <span data-ttu-id="e739c-212">Vous devez effectuer vos propres tests de compatibilité avec la version d’électron que votre produit utilise.</span><span class="sxs-lookup"><span data-stu-id="e739c-212">You must perform your own compatibility testing with the version of Electron your product uses.</span></span> <span data-ttu-id="e739c-213">Consultez [prise en charge des navigateurs plus anciens](#sob) dans la section suivante.</span><span class="sxs-lookup"><span data-stu-id="e739c-213">See [Supporting older browsers](#sob) in the following section.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="e739c-214">Ressources supplémentaires</span><span class="sxs-lookup"><span data-stu-id="e739c-214">Additional resources</span></span>

* [<span data-ttu-id="e739c-215">Modifications de cookie SameSite à venir dans ASP.NET et ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="e739c-215">Upcoming SameSite Cookie Changes in ASP.NET and ASP.NET Core</span></span>](https://devblogs.microsoft.com/aspnet/upcoming-samesite-cookie-changes-in-asp-net-and-asp-net-core/)
* [<span data-ttu-id="e739c-216">Blog du chrome : développeurs : Préparez-vous à la nouvelle SameSite = None ; Sécuriser les paramètres de cookie</span><span class="sxs-lookup"><span data-stu-id="e739c-216">Chromium Blog:Developers: Get Ready for New SameSite=None; Secure Cookie Settings</span></span>](https://blog.chromium.org/2019/10/developers-get-ready-for-new.html)
* [<span data-ttu-id="e739c-217">Explication des cookies SameSite</span><span class="sxs-lookup"><span data-stu-id="e739c-217">SameSite cookies explained</span></span>](https://web.dev/samesite-cookies-explained/)

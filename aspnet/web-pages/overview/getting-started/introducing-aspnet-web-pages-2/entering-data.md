---
uid: web-pages/overview/getting-started/introducing-aspnet-web-pages-2/entering-data
title: Présentation des Pages Web ASP.NET - saisie de données de base de données à l’aide de formulaires | Microsoft Docs
author: Rick-Anderson
description: Ce didacticiel vous montre comment créer un formulaire d’entrée, puis entrez les données que vous obtenez à partir du formulaire dans une table de base de données lorsque vous utilisez ASP.NET Web Pages (...)
ms.author: riande
ms.date: 05/28/2015
ms.assetid: d37c93fc-25fd-4e94-8671-0d437beef206
msc.legacyurl: /web-pages/overview/getting-started/introducing-aspnet-web-pages-2/entering-data
msc.type: authoredcontent
ms.openlocfilehash: b9354a7b97a7df9020a681f709e16a92650cfcf0
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/06/2019
ms.locfileid: "65132969"
---
# <a name="introducing-aspnet-web-pages---entering-database-data-by-using-forms"></a><span data-ttu-id="086c0-103">Présentation des Pages Web ASP.NET - saisie de données de base de données à l’aide de formulaires</span><span class="sxs-lookup"><span data-stu-id="086c0-103">Introducing ASP.NET Web Pages - Entering Database Data by Using Forms</span></span>

<span data-ttu-id="086c0-104">par [Tom FitzMacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="086c0-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="086c0-105">Ce didacticiel vous montre comment créer un formulaire d’entrée, puis entrez les données que vous obtenez à partir du formulaire dans une table de base de données lorsque vous utilisez les Pages Web ASP.NET (Razor).</span><span class="sxs-lookup"><span data-stu-id="086c0-105">This tutorial shows you how to create an entry form and then enter the data that you get from the form into a database table when you use ASP.NET Web Pages (Razor).</span></span> <span data-ttu-id="086c0-106">Il part du principe que vous avez terminé la série via [principes de base de formulaires HTML dans ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=251581).</span><span class="sxs-lookup"><span data-stu-id="086c0-106">It assumes you have completed the series through [Basics of HTML Forms in ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=251581).</span></span>
> 
> <span data-ttu-id="086c0-107">Ce que vous allez apprendre :</span><span class="sxs-lookup"><span data-stu-id="086c0-107">What you'll learn:</span></span>
> 
> - <span data-ttu-id="086c0-108">Plus d’informations sur le traitement des formulaires de saisie.</span><span class="sxs-lookup"><span data-stu-id="086c0-108">More about how to process entry forms.</span></span>
> - <span data-ttu-id="086c0-109">Comment ajouter les données (insert) dans une base de données.</span><span class="sxs-lookup"><span data-stu-id="086c0-109">How to add (insert) data in a database.</span></span>
> - <span data-ttu-id="086c0-110">Comment s’assurer que les utilisateurs ont entré une valeur requise dans un formulaire (comment valider l’entrée utilisateur).</span><span class="sxs-lookup"><span data-stu-id="086c0-110">How to make sure that users have entered a required value in a form (how to validate user input).</span></span>
> - <span data-ttu-id="086c0-111">Comment afficher les erreurs de validation.</span><span class="sxs-lookup"><span data-stu-id="086c0-111">How to display validation errors.</span></span>
> - <span data-ttu-id="086c0-112">Comment accéder à une autre page à partir de la page actuelle.</span><span class="sxs-lookup"><span data-stu-id="086c0-112">How to jump to another page from the current page.</span></span>
>   
> 
> <span data-ttu-id="086c0-113">Fonctionnalités technologies abordées :</span><span class="sxs-lookup"><span data-stu-id="086c0-113">Features/technologies discussed:</span></span>
> 
> - <span data-ttu-id="086c0-114">Méthode `Database.Execute`</span><span class="sxs-lookup"><span data-stu-id="086c0-114">The `Database.Execute` method.</span></span>
> - <span data-ttu-id="086c0-115">Le code SQL `Insert Into` instruction</span><span class="sxs-lookup"><span data-stu-id="086c0-115">The SQL `Insert Into` statement</span></span>
> - <span data-ttu-id="086c0-116">Le `Validation` helper.</span><span class="sxs-lookup"><span data-stu-id="086c0-116">The `Validation` helper.</span></span>
> - <span data-ttu-id="086c0-117">Méthode `Response.Redirect`</span><span class="sxs-lookup"><span data-stu-id="086c0-117">The `Response.Redirect` method.</span></span>

## <a name="what-youll-build"></a><span data-ttu-id="086c0-118">Ce que vous allez générer</span><span class="sxs-lookup"><span data-stu-id="086c0-118">What You'll Build</span></span>

<span data-ttu-id="086c0-119">Dans le didacticiel plus haut qui vous a montré comment créer une base de données, vous avez entré les données de la base de données en modifiant la base de données directement dans WebMatrix, travaillant dans le **base de données** espace de travail.</span><span class="sxs-lookup"><span data-stu-id="086c0-119">In the tutorial earlier that showed you how to create a database, you entered database data by editing the database directly in WebMatrix, working in the **Database** workspace.</span></span> <span data-ttu-id="086c0-120">Dans la plupart des applications, qui n’est pas un moyen pratique de placer des données dans la base de données, cependant.</span><span class="sxs-lookup"><span data-stu-id="086c0-120">In most apps, that's not a practical way to put data into the database, though.</span></span> <span data-ttu-id="086c0-121">Par conséquent, dans ce didacticiel, vous allez créer une interface basée sur le web qui vous permet de vous ou un utilisateur d’entrer des données et l’enregistrer dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="086c0-121">So in this tutorial, you'll create a web-based interface that lets you or anyone enter data and save it to the database.</span></span>

<span data-ttu-id="086c0-122">Vous allez créer une page où vous pouvez entrer de nouveaux films.</span><span class="sxs-lookup"><span data-stu-id="086c0-122">You'll create a page where you can enter new movies.</span></span> <span data-ttu-id="086c0-123">La page contient un formulaire d’entrée qui a des champs (zones de texte) dans lequel vous pouvez entrer un titre du film, genre et année.</span><span class="sxs-lookup"><span data-stu-id="086c0-123">The page will contain an entry form that has fields (text boxes) where you can enter a movie title, genre, and year.</span></span> <span data-ttu-id="086c0-124">La page doit ressembler à cette page :</span><span class="sxs-lookup"><span data-stu-id="086c0-124">The page will look like this page:</span></span>

![Ajouter des films de page dans le navigateur](entering-data/_static/image1.png)

<span data-ttu-id="086c0-126">Les zones de texte sera HTML `<input>` éléments qui cherchera, tels que ce balisage :</span><span class="sxs-lookup"><span data-stu-id="086c0-126">The text boxes will be HTML `<input>` elements that will look like this markup:</span></span>

`<input type="text" name="genre" value="" />`

## <a name="creating-the-basic-entry-form"></a><span data-ttu-id="086c0-127">Création du formulaire d’entrée de base</span><span class="sxs-lookup"><span data-stu-id="086c0-127">Creating the Basic Entry Form</span></span>

<span data-ttu-id="086c0-128">Créez une page nommée *AddMovie.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="086c0-128">Create a page named *AddMovie.cshtml*.</span></span>

<span data-ttu-id="086c0-129">Remplacez ce qui est dans le fichier avec le balisage suivant.</span><span class="sxs-lookup"><span data-stu-id="086c0-129">Replace what's in the file with the following markup.</span></span> <span data-ttu-id="086c0-130">Remplacer tout ; vous allez ajouter un bloc de code en haut peu de temps.</span><span class="sxs-lookup"><span data-stu-id="086c0-130">Overwrite everything; you'll add a code block at the top shortly.</span></span>

[!code-cshtml[Main](entering-data/samples/sample1.cshtml)]

<span data-ttu-id="086c0-131">Cet exemple montre le HTML standard pour la création d’un formulaire.</span><span class="sxs-lookup"><span data-stu-id="086c0-131">This example shows typical HTML for creating a form.</span></span> <span data-ttu-id="086c0-132">Il utilise `<input>` éléments pour les zones de texte et pour le bouton Envoyer.</span><span class="sxs-lookup"><span data-stu-id="086c0-132">It uses `<input>` elements for the text boxes and for the submit button.</span></span> <span data-ttu-id="086c0-133">Les légendes pour les zones de texte sont créés à l’aide standard `<label>` éléments.</span><span class="sxs-lookup"><span data-stu-id="086c0-133">The captions for the text boxes are created by using standard `<label>` elements.</span></span> <span data-ttu-id="086c0-134">Le `<fieldset>` et `<legend>` éléments placés une jolie boîte autour du formulaire.</span><span class="sxs-lookup"><span data-stu-id="086c0-134">The `<fieldset>` and `<legend>` elements put a nice box around the form.</span></span>

<span data-ttu-id="086c0-135">Notez que dans cette page, le `<form>` élément utilise `post` comme valeur pour le `method` attribut.</span><span class="sxs-lookup"><span data-stu-id="086c0-135">Notice that in this page, the `<form>` element uses `post` as the value for the `method` attribute.</span></span> <span data-ttu-id="086c0-136">Dans le didacticiel précédent, vous avez créé un formulaire utilisé le `get` (méthode).</span><span class="sxs-lookup"><span data-stu-id="086c0-136">In the previous tutorial, you created a form that used the `get` method.</span></span> <span data-ttu-id="086c0-137">Qui était correcte, car bien que le formulaire envoyé des valeurs pour le serveur, la demande ne pas apporter des modifications.</span><span class="sxs-lookup"><span data-stu-id="086c0-137">That was correct, because although the form submitted values to the server, the request did not make any changes.</span></span> <span data-ttu-id="086c0-138">Tous les c’était le cas a été récupérer des données de différentes façons.</span><span class="sxs-lookup"><span data-stu-id="086c0-138">All it did was fetch data in different ways.</span></span> <span data-ttu-id="086c0-139">Toutefois, dans cette page vous *sera* apporter des modifications, vous allez ajouter de nouveaux enregistrements de base de données.</span><span class="sxs-lookup"><span data-stu-id="086c0-139">However, in this page you *will* make changes—you're going to add new database records.</span></span> <span data-ttu-id="086c0-140">Par conséquent, cette forme doit utiliser le `post` (méthode).</span><span class="sxs-lookup"><span data-stu-id="086c0-140">Therefore, this form should use the `post` method.</span></span> <span data-ttu-id="086c0-141">(Pour plus d’informations sur la différence entre `GET` et `POST` opérations, consultez le[GET, POST et sécurité du verbe HTTP](https://go.microsoft.com/fwlink/?LinkId=251581#GET,_POST,_and_HTTP_Verb_Safety) encadré dans le didacticiel précédent.)</span><span class="sxs-lookup"><span data-stu-id="086c0-141">(For more about the difference between `GET` and `POST` operations, see the[GET, POST, and HTTP Verb Safety](https://go.microsoft.com/fwlink/?LinkId=251581#GET,_POST,_and_HTTP_Verb_Safety) sidebar in the previous tutorial.)</span></span>

<span data-ttu-id="086c0-142">Notez que chaque zone de texte a un `name` élément (`title`, `genre`, `year`).</span><span class="sxs-lookup"><span data-stu-id="086c0-142">Note that each text box has a `name` element (`title`, `genre`, `year`).</span></span> <span data-ttu-id="086c0-143">Comme vous l’avez vu dans le didacticiel précédent, ces noms sont importantes, car vous devez disposer de ces noms afin d’obtenir l’entrée d’utilisateur ultérieurement.</span><span class="sxs-lookup"><span data-stu-id="086c0-143">As you saw in the previous tutorial, these names are important because you must have those names so you can get the user's input later.</span></span> <span data-ttu-id="086c0-144">Vous pouvez utiliser des noms.</span><span class="sxs-lookup"><span data-stu-id="086c0-144">You can use any names.</span></span> <span data-ttu-id="086c0-145">Il est utile d’utiliser des noms explicites qui vous aident à mémoriser les données que vous travaillez avec.</span><span class="sxs-lookup"><span data-stu-id="086c0-145">It's helpful to use meaningful names that help you remember what data you're working with.</span></span>

<span data-ttu-id="086c0-146">Le `value` attribut de chaque `<input>` élément contient un peu de code Razor (par exemple, `Request.Form["title"]`).</span><span class="sxs-lookup"><span data-stu-id="086c0-146">The `value` attribute of each `<input>` element contains a bit of Razor code (for example, `Request.Form["title"]`).</span></span> <span data-ttu-id="086c0-147">Vous avez appris une version de cette astuce dans le didacticiel précédent pour conserver la valeur entrée dans la zone de texte (le cas échéant) une fois que le formulaire a été envoyé.</span><span class="sxs-lookup"><span data-stu-id="086c0-147">You learned a version of this trick in the previous tutorial to preserve the value entered into the text box (if any) after the form has been submitted.</span></span>

## <a name="getting-the-form-values"></a><span data-ttu-id="086c0-148">Obtenir les valeurs de formulaire</span><span class="sxs-lookup"><span data-stu-id="086c0-148">Getting the Form Values</span></span>

<span data-ttu-id="086c0-149">Ensuite, vous ajoutez le code qui traite le formulaire.</span><span class="sxs-lookup"><span data-stu-id="086c0-149">Next, you add code that processes the form.</span></span> <span data-ttu-id="086c0-150">Dans la structure, vous allez effectuer ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="086c0-150">In outline, you'll do the following:</span></span>

1. <span data-ttu-id="086c0-151">Vérifiez si la page est en cours de publication (a été envoyé).</span><span class="sxs-lookup"><span data-stu-id="086c0-151">Check whether the page is being posted (was submitted).</span></span> <span data-ttu-id="086c0-152">Vous souhaitez que votre code à exécuter uniquement quand les utilisateurs ont cliqué avec le bouton, pas lors de la première exécution de la page.</span><span class="sxs-lookup"><span data-stu-id="086c0-152">You want to your code to run only when users have clicked the button, not when the page first runs.</span></span>
2. <span data-ttu-id="086c0-153">Obtenir les valeurs entrées par l’utilisateur dans les zones de texte.</span><span class="sxs-lookup"><span data-stu-id="086c0-153">Get the values that the user entered into the text boxes.</span></span> <span data-ttu-id="086c0-154">Dans ce cas, étant donné que le formulaire est à l’aide de la `POST` verbe, vous obtenez les valeurs de formulaire à partir de la `Request.Form` collection.</span><span class="sxs-lookup"><span data-stu-id="086c0-154">In this case, because the form is using the `POST` verb, you get the form values from the `Request.Form` collection.</span></span>
3. <span data-ttu-id="086c0-155">Insérez les valeurs en tant qu’un nouvel enregistrement dans le *films* table de base de données.</span><span class="sxs-lookup"><span data-stu-id="086c0-155">Insert the values as a new record in the *Movies* database table.</span></span>

<span data-ttu-id="086c0-156">En haut du fichier, ajoutez le code suivant :</span><span class="sxs-lookup"><span data-stu-id="086c0-156">At the top of the file, add the following code:</span></span>

[!code-cshtml[Main](entering-data/samples/sample2.cshtml)]

<span data-ttu-id="086c0-157">Les premières lignes créent des variables (`title`, `genre`, et `year`) pour contenir les valeurs dans les zones de texte.</span><span class="sxs-lookup"><span data-stu-id="086c0-157">The first few lines create variables (`title`, `genre`, and `year`) to hold the values from the text boxes.</span></span> <span data-ttu-id="086c0-158">La ligne `if(IsPost)` permet de s’assurer que les variables sont définies *uniquement* lorsque les utilisateurs cliquent sur le **film ajouter** bouton, autrement dit, lorsque le formulaire a été validé.</span><span class="sxs-lookup"><span data-stu-id="086c0-158">The line `if(IsPost)` makes sure that the variables are set *only* when users click the **Add Movie** button — that is, when the form has been posted.</span></span>

<span data-ttu-id="086c0-159">Comme vous l’avez vu dans un tutoriel précédent, vous obtenez la valeur d’une zone de texte à l’aide d’une expression telle que `Request.Form["name"]`, où *nom* est le nom de la `<input>` élément.</span><span class="sxs-lookup"><span data-stu-id="086c0-159">As you saw in an earlier tutorial, you get the value of a text box by using an expression like `Request.Form["name"]`, where *name* is the name of the `<input>` element.</span></span>

<span data-ttu-id="086c0-160">Les noms des variables (`title`, `genre`, et `year`) sont arbitraires.</span><span class="sxs-lookup"><span data-stu-id="086c0-160">The names of the variables (`title`, `genre`, and `year`) are arbitrary.</span></span> <span data-ttu-id="086c0-161">Comme les noms que vous attribuez à `<input>` éléments, vous pouvez les appeler comme vous le souhaitez.</span><span class="sxs-lookup"><span data-stu-id="086c0-161">Like the names that you assign to `<input>` elements, you can call them anything you like.</span></span> <span data-ttu-id="086c0-162">(Les noms des variables n’êtes pas obligé de correspondent aux attributs de nom `<input>` éléments sur le formulaire.) Mais comme avec la `<input>` éléments, il est judicieux d’utiliser des noms de variables qui reflètent les données qu’ils contiennent.</span><span class="sxs-lookup"><span data-stu-id="086c0-162">(The names of the variables don't have to match the name attributes of `<input>` elements on the form.) But as with the `<input>` elements, it's a good idea to use variable names that reflect the data that they contain.</span></span> <span data-ttu-id="086c0-163">Lorsque vous écrivez du code, des noms cohérents rendent plus facile à retenir les données avec lequel vous travaillez.</span><span class="sxs-lookup"><span data-stu-id="086c0-163">When you write code, consistent names make it easier for you to remember what data you're working with.</span></span>

## <a name="adding-data-to-the-database"></a><span data-ttu-id="086c0-164">Ajout de données à la base de données</span><span class="sxs-lookup"><span data-stu-id="086c0-164">Adding Data to the Database</span></span>

<span data-ttu-id="086c0-165">Dans le code vous empêche vient d’être ajoutée, il vous suffit *à l’intérieur de* l’accolade fermante ( `}` ) de la `if` bloc (et pas seulement à l’intérieur du bloc de code), ajoutez le code suivant :</span><span class="sxs-lookup"><span data-stu-id="086c0-165">In the code block you just added, just *inside* the closing brace ( `}` ) of the `if` block (not just inside the code block), add the following code:</span></span>

[!code-csharp[Main](entering-data/samples/sample3.cs)]

<span data-ttu-id="086c0-166">Cet exemple est similaire au code que vous avez utilisé dans le didacticiel précédent pour extraction et affichage des données.</span><span class="sxs-lookup"><span data-stu-id="086c0-166">This example is similar to the code you used in a previous tutorial to fetch and display data.</span></span> <span data-ttu-id="086c0-167">La ligne qui commence par `db =` ouvre la base de données, comme avant et la ligne suivante définit une instruction SQL, à nouveau en tant que vous avez vu avant.</span><span class="sxs-lookup"><span data-stu-id="086c0-167">The line that starts with `db =` opens the database, like before, and the next line defines a SQL statement, again as you saw before.</span></span> <span data-ttu-id="086c0-168">Toutefois, cette fois-ci il définit un SQL `Insert Into` instruction.</span><span class="sxs-lookup"><span data-stu-id="086c0-168">However, this time it defines a SQL `Insert Into` statement.</span></span> <span data-ttu-id="086c0-169">L’exemple suivant montre la syntaxe générale de la `Insert Into` instruction :</span><span class="sxs-lookup"><span data-stu-id="086c0-169">The following example shows the general syntax of the `Insert Into` statement:</span></span>

`INSERT INTO table (column1, column2, column3, ...) VALUES (value1, value2, value3, ...)`

<span data-ttu-id="086c0-170">En d’autres termes, vous spécifiez la table pour insérer, puis répertoriez les colonnes à insérer, puis répertorier les valeurs à insérer.</span><span class="sxs-lookup"><span data-stu-id="086c0-170">In other words, you specify the table to insert into, then list the columns to insert into, and then list the values to insert.</span></span> <span data-ttu-id="086c0-171">(Comme mentionné précédemment, SQL n’est pas sensible à la casse, mais certaines personnes capitaliser les mots clés pour le rendre plus facile à lire la commande.)</span><span class="sxs-lookup"><span data-stu-id="086c0-171">(As noted before, SQL is not case sensitive but some people capitalize the keywords to make it easier to read the command.)</span></span>

<span data-ttu-id="086c0-172">Les colonnes que vous insérez dans figurent déjà dans la commande — `(Title, Genre, Year)`.</span><span class="sxs-lookup"><span data-stu-id="086c0-172">The columns that you're inserting into are already listed in the command — `(Title, Genre, Year)`.</span></span> <span data-ttu-id="086c0-173">La partie intéressante est la façon dont vous obtenez les valeurs dans les zones de texte dans le `VALUES` dans le cadre de la commande.</span><span class="sxs-lookup"><span data-stu-id="086c0-173">The interesting part is how you get the values from the text boxes into the `VALUES` part of the command.</span></span> <span data-ttu-id="086c0-174">Au lieu des valeurs réelles, vous voyez `@0`, `@1`, et `@2`, qui sont bien entendu des espaces réservés.</span><span class="sxs-lookup"><span data-stu-id="086c0-174">Instead of actual values, you see `@0`, `@1`, and `@2`, which are of course placeholders.</span></span> <span data-ttu-id="086c0-175">Lorsque vous exécutez la commande (sur le `db.Execute` ligne), vous passez les valeurs que vous avez obtenu les zones de texte.</span><span class="sxs-lookup"><span data-stu-id="086c0-175">When you run the command (on the `db.Execute` line), you pass the values that you got from the text boxes.</span></span>

<span data-ttu-id="086c0-176">**Important !**</span><span class="sxs-lookup"><span data-stu-id="086c0-176">**Important!**</span></span> <span data-ttu-id="086c0-177">N’oubliez pas que la seule façon, vous devez jamais inclure des données saisies en ligne par un utilisateur dans une instruction SQL doit utiliser des espaces réservés, comme vous le voyez ici (`VALUES(@0, @1, @2)`).</span><span class="sxs-lookup"><span data-stu-id="086c0-177">Remember that the only way you should ever include data entered online by a user in a SQL statement is to use placeholders, as you see here (`VALUES(@0, @1, @2)`).</span></span> <span data-ttu-id="086c0-178">Si vous concaténez des entrées d’utilisateur dans une instruction SQL, vous ouvrez vous-même à une attaque par injection SQL, comme expliqué dans [principes fondamentaux de formulaire dans ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=251581) (le didacticiel précédent).</span><span class="sxs-lookup"><span data-stu-id="086c0-178">If you concatenate user input into a SQL statement, you open yourself to a SQL injection attack, as explained in [Form Basics in ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=251581) (the previous tutorial).</span></span>

<span data-ttu-id="086c0-179">Toujours dans le `if` bloquer, ajoutez la ligne suivante après la `db.Execute` ligne :</span><span class="sxs-lookup"><span data-stu-id="086c0-179">Still inside the `if` block, add the following line after the `db.Execute` line:</span></span>

[!code-css[Main](entering-data/samples/sample4.css)]

<span data-ttu-id="086c0-180">Une fois que le nouveau film a été inséré dans la base de données, cette ligne vous (redirections) accède à la *films* page afin que vous puissiez voir le film que vous venez d’entrer.</span><span class="sxs-lookup"><span data-stu-id="086c0-180">After the new movie has been inserted into the database, this line jumps you (redirects) to the *Movies* page so you can see the movie you just entered.</span></span> <span data-ttu-id="086c0-181">Le `~` opérateur signifie « racine du site Web ».</span><span class="sxs-lookup"><span data-stu-id="086c0-181">The `~` operator means "root of the website."</span></span> <span data-ttu-id="086c0-182">(Le `~` opérateur fonctionne uniquement dans les pages ASP.NET, pas au format HTML en général.)</span><span class="sxs-lookup"><span data-stu-id="086c0-182">(The `~` operator works only in ASP.NET pages, not in HTML generally.)</span></span>

<span data-ttu-id="086c0-183">Le bloc de code complet se présente comme dans cet exemple :</span><span class="sxs-lookup"><span data-stu-id="086c0-183">The complete code block looks like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample5.cshtml)]

## <a name="testing-the-insert-command-so-far"></a><span data-ttu-id="086c0-184">Test de la commande d’insertion (jusqu'à présent)</span><span class="sxs-lookup"><span data-stu-id="086c0-184">Testing the Insert Command (So Far)</span></span>

<span data-ttu-id="086c0-185">Vous n’avez pas encore terminé, mais il êtes maintenant temps de tester.</span><span class="sxs-lookup"><span data-stu-id="086c0-185">You're not done yet, but now is a good time to test.</span></span>

<span data-ttu-id="086c0-186">Dans l’arborescence de fichiers dans WebMatrix, cliquez sur le *AddMovie.cshtml* page, puis cliquez sur **lancer dans le navigateur**.</span><span class="sxs-lookup"><span data-stu-id="086c0-186">In the tree view of files in WebMatrix, right-click the *AddMovie.cshtml* page and then click **Launch in browser**.</span></span>

![Ajouter des films de page dans le navigateur](entering-data/_static/image2.png)

<span data-ttu-id="086c0-188">(Si vous retrouvez avec une autre page dans le navigateur, assurez-vous que l’URL est `http://localhost:nnnnn/AddMovie`), où *nnnnn* est le numéro de port que vous utilisez.)</span><span class="sxs-lookup"><span data-stu-id="086c0-188">(If you end up with a different page in the browser, make sure that the URL is `http://localhost:nnnnn/AddMovie`), where *nnnnn* is the port number that you're using.)</span></span>

<span data-ttu-id="086c0-189">Avez-vous reçu une page d’erreur ?</span><span class="sxs-lookup"><span data-stu-id="086c0-189">Did you get an error page?</span></span> <span data-ttu-id="086c0-190">Dans ce cas, lisez-le attentivement et assurez-vous que le code se présente exactement ce qui a été indiqué précédemment.</span><span class="sxs-lookup"><span data-stu-id="086c0-190">If so, read it carefully and make sure that the code looks exactly what was listed earlier.</span></span>

<span data-ttu-id="086c0-191">Entrez un film dans le formulaire &mdash; , par exemple, utilisez « Citoyen Kane », « Drama » et « 1941 ».</span><span class="sxs-lookup"><span data-stu-id="086c0-191">Enter a movie in the form &mdash; for example, use "Citizen Kane", "Drama", and "1941".</span></span> <span data-ttu-id="086c0-192">(Ou dans toute autre.) Puis cliquez sur **film ajouter**.</span><span class="sxs-lookup"><span data-stu-id="086c0-192">(Or whatever.) Then click **Add Movie**.</span></span>

<span data-ttu-id="086c0-193">Si tout se passe bien, vous êtes redirigé vers la *films* page.</span><span class="sxs-lookup"><span data-stu-id="086c0-193">If all goes well, you're redirected to the *Movies* page.</span></span> <span data-ttu-id="086c0-194">Assurez-vous que votre nouveau film est répertorié.</span><span class="sxs-lookup"><span data-stu-id="086c0-194">Make sure that your new movie is listed.</span></span>

![Page de films montrant qui vient d’être ajouté de film](entering-data/_static/image3.png)

## <a name="validating-user-input"></a><span data-ttu-id="086c0-196">Validation des entrées utilisateur</span><span class="sxs-lookup"><span data-stu-id="086c0-196">Validating User Input</span></span>

<span data-ttu-id="086c0-197">Revenez à la *AddMovie* page ou exécuter de nouveau.</span><span class="sxs-lookup"><span data-stu-id="086c0-197">Go back to the *AddMovie* page, or run it again.</span></span> <span data-ttu-id="086c0-198">Entrez un autre film, mais cette fois, entrez uniquement le titre &mdash; par exemple, entrez « Domicile ' dans Rain ».</span><span class="sxs-lookup"><span data-stu-id="086c0-198">Enter another movie, but this time, enter only the title &mdash; for example, enter "Singin' in the Rain".</span></span> <span data-ttu-id="086c0-199">Puis cliquez sur **film ajouter**.</span><span class="sxs-lookup"><span data-stu-id="086c0-199">Then click **Add Movie**.</span></span>

<span data-ttu-id="086c0-200">Vous êtes redirigé vers la *films* page à nouveau.</span><span class="sxs-lookup"><span data-stu-id="086c0-200">You're redirected to the *Movies* page again.</span></span> <span data-ttu-id="086c0-201">Vous trouverez ce nouveau film, mais il est incomplet.</span><span class="sxs-lookup"><span data-stu-id="086c0-201">You can find the new movie, but it's incomplete.</span></span>

![Films page affichant nouveau film auquel il manque certaines valeurs](entering-data/_static/image4.png)

<span data-ttu-id="086c0-203">Lorsque vous avez créé le *films* table, vous avez explicitement déclaré qu’aucun des champs peut être null.</span><span class="sxs-lookup"><span data-stu-id="086c0-203">When you created the *Movies* table, you explicitly said that none of the fields could be null.</span></span> <span data-ttu-id="086c0-204">Ici, vous avez un formulaire de saisie de nouveaux films, et vous êtes laisser les champs vides.</span><span class="sxs-lookup"><span data-stu-id="086c0-204">Here you have an entry form for new movies, and you're leaving fields blank.</span></span> <span data-ttu-id="086c0-205">C’est une erreur.</span><span class="sxs-lookup"><span data-stu-id="086c0-205">That's an error.</span></span>

<span data-ttu-id="086c0-206">Dans ce cas, la base de données n’a pas réellement augmenter (ou *lever*) une erreur.</span><span class="sxs-lookup"><span data-stu-id="086c0-206">In this case, the database didn't actually raise (or *throw*) an error.</span></span> <span data-ttu-id="086c0-207">Vous n’avez pas fournir un genre ou une année, par conséquent, le code dans le *AddMovie* page traité ces valeurs en tant que ce que l'on appelle *des chaînes vides*.</span><span class="sxs-lookup"><span data-stu-id="086c0-207">You didn't supply a genre or year, so the code in the *AddMovie* page treated those values as so-called *empty strings*.</span></span> <span data-ttu-id="086c0-208">Lorsque le code SQL `Insert Into` commande s’est exécutée, les champs de genre et année n’a pas des données utiles, mais elles n’étaient pas null.</span><span class="sxs-lookup"><span data-stu-id="086c0-208">When the SQL `Insert Into` command ran, the genre and year fields didn't have useful data in them, but they weren't null.</span></span>

<span data-ttu-id="086c0-209">Évidemment, vous ne souhaitez pas permettre aux utilisateurs d’entrer des informations sur les films de moitié vide dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="086c0-209">Obviously, you don't want to let users enter half-empty movie information into the database.</span></span> <span data-ttu-id="086c0-210">La solution consiste à valider l’entrée utilisateur.</span><span class="sxs-lookup"><span data-stu-id="086c0-210">The solution is to validate the user's input.</span></span> <span data-ttu-id="086c0-211">Initialement, la validation permet simplement de garantir que l’utilisateur a entré une valeur pour tous les champs (autrement dit, qu’aucun d'entre eux contient une chaîne vide).</span><span class="sxs-lookup"><span data-stu-id="086c0-211">Initially, the validation will simply make sure that the user has entered a value for all of the fields (that is, that none of them contains an empty string).</span></span>

> [!TIP]
> 
> <span data-ttu-id="086c0-212">**Chaînes null et vides**</span><span class="sxs-lookup"><span data-stu-id="086c0-212">**Null and Empty Strings**</span></span>
> 
> <span data-ttu-id="086c0-213">Dans la programmation, il existe une distinction entre les différentes notions sur « aucune valeur ».</span><span class="sxs-lookup"><span data-stu-id="086c0-213">In programming, there's a distinction between different notions of "no value."</span></span> <span data-ttu-id="086c0-214">En règle générale, une valeur est *null* s’il n’a jamais été définie ou initialisé en aucune façon.</span><span class="sxs-lookup"><span data-stu-id="086c0-214">In general, a value is *null* if it has never been set or initialized in any way.</span></span> <span data-ttu-id="086c0-215">En revanche, une variable qui attend des données caractères (chaînes) peut être définie sur une *une chaîne vide*.</span><span class="sxs-lookup"><span data-stu-id="086c0-215">In contrast, a variable that expects character data (strings) can be set to an *empty string*.</span></span> <span data-ttu-id="086c0-216">Dans ce cas, la valeur n’est pas null ; elle a juste été explicitement définie dans une chaîne de caractères dont la longueur est égale à zéro.</span><span class="sxs-lookup"><span data-stu-id="086c0-216">In that case, the value is not null; it's just been explicitly set to a string of characters whose length is zero.</span></span> <span data-ttu-id="086c0-217">Les deux instructions suivantes montrent la différence :</span><span class="sxs-lookup"><span data-stu-id="086c0-217">These two statements show the difference:</span></span>
> 
> [!code-csharp[Main](entering-data/samples/sample6.cs)]
> 
> <span data-ttu-id="086c0-218">C’est un peu plus compliqué que celle, mais le point important est que `null` représente le tri d’un état indéterminé.</span><span class="sxs-lookup"><span data-stu-id="086c0-218">It's a little more complicated than that, but the important point is that `null` represents a sort of undetermined state.</span></span>
> 
> <span data-ttu-id="086c0-219">Maintenant, puis il est important de comprendre exactement quand une valeur est null, et quand il est simplement une chaîne vide.</span><span class="sxs-lookup"><span data-stu-id="086c0-219">Now and then it's important to understand exactly when a value is null and when it's just an empty string.</span></span> <span data-ttu-id="086c0-220">Dans le code pour le *AddMovie* page, vous obtenez les valeurs des zones de texte à l’aide de `Request.Form["title"]` et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="086c0-220">In the code for the *AddMovie* page, you get the values of the text boxes by using `Request.Form["title"]` and so on.</span></span> <span data-ttu-id="086c0-221">Lorsque la page de première exécution (avant de cliquer sur le bouton), la valeur de `Request.Form["title"]` est null.</span><span class="sxs-lookup"><span data-stu-id="086c0-221">When the page first runs (before you click the button), the value of `Request.Form["title"]` is null.</span></span> <span data-ttu-id="086c0-222">Mais lorsque vous envoyez le formulaire, `Request.Form["title"]` Obtient la valeur de la `title` zone de texte.</span><span class="sxs-lookup"><span data-stu-id="086c0-222">But when you submit the form, `Request.Form["title"]` gets the value of the `title` text box.</span></span> <span data-ttu-id="086c0-223">Il n’est pas évident, mais une zone de texte vide n’est pas null ; elle doit simplement une chaîne vide qu’il contient.</span><span class="sxs-lookup"><span data-stu-id="086c0-223">It's not obvious, but an empty text box is not null; it just has an empty string in it.</span></span> <span data-ttu-id="086c0-224">Par conséquent, lorsque le code s’exécute en réponse au bouton Cliquez sur, `Request.Form["title"]` comporte une chaîne vide.</span><span class="sxs-lookup"><span data-stu-id="086c0-224">So when the code runs in response to the button click, `Request.Form["title"]` has an empty string in it.</span></span>
> 
> <span data-ttu-id="086c0-225">Pourquoi cette distinction est importante ?</span><span class="sxs-lookup"><span data-stu-id="086c0-225">Why is this distinction important?</span></span> <span data-ttu-id="086c0-226">Lorsque vous avez créé le *films* table, vous avez explicitement déclaré qu’aucun des champs peut être null.</span><span class="sxs-lookup"><span data-stu-id="086c0-226">When you created the *Movies* table, you explicitly said that none of the fields could be null.</span></span> <span data-ttu-id="086c0-227">Mais ici, vous avez un formulaire de saisie de nouveaux films et vous êtes laisser les champs vides.</span><span class="sxs-lookup"><span data-stu-id="086c0-227">But here you have an entry form for new movies, and you're leaving fields blank.</span></span> <span data-ttu-id="086c0-228">Vous serez raisonnablement s’attendre à la base de données pour lequel vous souhaitez lorsque vous avez essayé d’enregistrer de nouveaux films que n’avait pas de valeurs pour le genre ou année.</span><span class="sxs-lookup"><span data-stu-id="086c0-228">You would reasonably expect the database to complain when you tried to save new movies that didn't have values for genre or year.</span></span> <span data-ttu-id="086c0-229">Mais c’est le point de &mdash; même si vous ne renseignez pas ces zones de texte, les valeurs ne sont pas null ; elles sont des chaînes vides.</span><span class="sxs-lookup"><span data-stu-id="086c0-229">But that's the point &mdash; even if you leave those text boxes blank, the values aren't null; they're empty strings.</span></span> <span data-ttu-id="086c0-230">Par conséquent, vous êtes en mesure d’enregistrer de nouveaux films à la base de données avec ces colonnes vides &mdash; mais pas null !</span><span class="sxs-lookup"><span data-stu-id="086c0-230">As a result, you're able to save new movies to the database with these columns empty &mdash; but not null!</span></span> <span data-ttu-id="086c0-231">des valeurs &mdash;.</span><span class="sxs-lookup"><span data-stu-id="086c0-231">&mdash; values.</span></span> <span data-ttu-id="086c0-232">Par conséquent, vous devez vous assurer que les utilisateurs n’envoient pas une chaîne vide, ce que vous pouvez faire en validant l’entrée utilisateur.</span><span class="sxs-lookup"><span data-stu-id="086c0-232">Therefore, you have to make sure that users don't submit an empty string, which you can do by validating the user's input.</span></span>

### <a name="the-validation-helper"></a><span data-ttu-id="086c0-233">L’application auxiliaire de Validation</span><span class="sxs-lookup"><span data-stu-id="086c0-233">The Validation Helper</span></span>

<span data-ttu-id="086c0-234">Les Pages Web ASP.NET inclut un programme d’assistance &mdash; le `Validation` helper &mdash; que vous pouvez utiliser pour vous assurer que les utilisateurs entrent des données qui répond à vos besoins.</span><span class="sxs-lookup"><span data-stu-id="086c0-234">ASP.NET Web Pages includes a helper &mdash; the `Validation` helper &mdash; that you can use to make sure that users enter data that meets your requirements.</span></span> <span data-ttu-id="086c0-235">Le `Validation` helper est un des programmes d’assistance qui est intégrée à ASP.NET Web Pages, donc vous n’êtes pas obligé d’installer un package à l’aide de NuGet, le mode d’installation de l’application d’assistance Gravatar dans un tutoriel précédent.</span><span class="sxs-lookup"><span data-stu-id="086c0-235">The `Validation` helper is one of the helpers that's built in to ASP.NET Web Pages, so you don't have to install it as a package by using NuGet, the way you installed the Gravatar helper in an earlier tutorial.</span></span>

<span data-ttu-id="086c0-236">Pour valider l’entrée d’utilisateur, vous allez effectuer ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="086c0-236">To validate the user's input, you'll do the following:</span></span>

- <span data-ttu-id="086c0-237">Utilisez le code pour spécifier que vous souhaitez requièrent des valeurs dans les zones de texte sur la page.</span><span class="sxs-lookup"><span data-stu-id="086c0-237">Use code to specify that you want to require values in the text boxes on the page.</span></span>
- <span data-ttu-id="086c0-238">Placez un test dans le code afin que les informations de film sont ajoutées à la base de données uniquement si tous les éléments valide correctement.</span><span class="sxs-lookup"><span data-stu-id="086c0-238">Put a test into the code so that the movie information is added to the database only if everything validates properly.</span></span>
- <span data-ttu-id="086c0-239">Ajoutez le code dans le balisage pour afficher les messages d’erreur.</span><span class="sxs-lookup"><span data-stu-id="086c0-239">Add code into the markup to display error messages.</span></span>

<span data-ttu-id="086c0-240">Dans le bloc de code dans le *AddMovie* page, à droite vers le haut en haut avant les déclarations de variable, ajoutez le code suivant :</span><span class="sxs-lookup"><span data-stu-id="086c0-240">In the code block in the *AddMovie* page, right up at the top before the variable declarations, add the following code:</span></span>

[!code-csharp[Main](entering-data/samples/sample7.cs)]

<span data-ttu-id="086c0-241">Vous appelez `Validation.RequireField` une fois pour chaque champ (`<input>` élément) dans lequel vous souhaitez exiger une entrée.</span><span class="sxs-lookup"><span data-stu-id="086c0-241">You call `Validation.RequireField` once for each field (`<input>` element) where you want to require an entry.</span></span> <span data-ttu-id="086c0-242">Vous pouvez également ajouter un message d’erreur personnalisé pour chaque appel, comme indiqué ici.</span><span class="sxs-lookup"><span data-stu-id="086c0-242">You can also add a custom error message for each call, like you see here.</span></span> <span data-ttu-id="086c0-243">(Nous faisant varier les messages uniquement pour montrer que vous pouvez de stocker comme vous le souhaitez).</span><span class="sxs-lookup"><span data-stu-id="086c0-243">(We varied the messages just to show that you can put anything you like there.)</span></span>

<span data-ttu-id="086c0-244">S’il existe un problème, vous souhaitez empêcher les nouvelles informations de film à partir de laquelle elle est insérée à la base de données.</span><span class="sxs-lookup"><span data-stu-id="086c0-244">If there's a problem, you want to prevent the new movie information from being inserted into the database.</span></span> <span data-ttu-id="086c0-245">Dans le `if(IsPost)` bloquer, utilisez `&&` (AND logique) pour ajouter une autre condition qui teste `Validation.IsValid()`.</span><span class="sxs-lookup"><span data-stu-id="086c0-245">In the `if(IsPost)` block, use `&&` (logical AND) to add another condition that tests `Validation.IsValid()`.</span></span> <span data-ttu-id="086c0-246">Lorsque vous avez terminé, la totalité `if(IsPost)` bloc ressemble à ce code :</span><span class="sxs-lookup"><span data-stu-id="086c0-246">When you're done, the whole `if(IsPost)` block looks like this code:</span></span>

[!code-csharp[Main](entering-data/samples/sample8.cs)]

<span data-ttu-id="086c0-247">S’il existe une erreur de validation avec les champs que vous avez inscrite à l’aide de la `Validation` helper, le `Validation.IsValid` méthode retourne la valeur false.</span><span class="sxs-lookup"><span data-stu-id="086c0-247">If there's a validation error with any of the fields that you registered by using the `Validation` helper, the `Validation.IsValid` method returns false.</span></span> <span data-ttu-id="086c0-248">Et dans ce cas, le code dans ce bloc s’exécute, donc aucune entrée de film non valide ne sera insérée dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="086c0-248">And in that case, none of the code in that block will run, so no invalid movie entries will be inserted into the database.</span></span> <span data-ttu-id="086c0-249">Et bien sûr vous n’êtes pas redirigé vers la *films* page.</span><span class="sxs-lookup"><span data-stu-id="086c0-249">And of course you're not redirected to the *Movies* page.</span></span>

<span data-ttu-id="086c0-250">Le bloc de code complet, y compris le code de validation, ressemble à ceci :</span><span class="sxs-lookup"><span data-stu-id="086c0-250">The complete code block, including the validation code, now looks like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample9.cshtml?highlight=10)]

## <a name="displaying-validation-errors"></a><span data-ttu-id="086c0-251">Affichage des erreurs de Validation</span><span class="sxs-lookup"><span data-stu-id="086c0-251">Displaying Validation Errors</span></span>

<span data-ttu-id="086c0-252">La dernière étape consiste à afficher les messages d’erreur.</span><span class="sxs-lookup"><span data-stu-id="086c0-252">The last step is to display any error messages.</span></span> <span data-ttu-id="086c0-253">Vous pouvez afficher des messages individuels pour chaque erreur de validation, ou vous pouvez afficher un résumé, ou les deux.</span><span class="sxs-lookup"><span data-stu-id="086c0-253">You can display individual messages for each validation error, or you can display a summary, or both.</span></span> <span data-ttu-id="086c0-254">Pour ce didacticiel, vous ferez afin que vous puissiez voir son fonctionnement.</span><span class="sxs-lookup"><span data-stu-id="086c0-254">For this tutorial, you'll do both so that you can see how it works.</span></span>

<span data-ttu-id="086c0-255">En regard de chaque `<input>` élément que vous êtes à la validation, appelez le `Html.ValidationMessage` (méthode) et lui transmettre le nom de la `<input>` élément que vous êtes à la validation.</span><span class="sxs-lookup"><span data-stu-id="086c0-255">Next to each `<input>` element that you're validating, call the `Html.ValidationMessage` method and pass it the name of the `<input>` element you're validating.</span></span> <span data-ttu-id="086c0-256">Vous placez le `Html.ValidationMessage` droite méthode où vous souhaitez le message d’erreur s’affiche.</span><span class="sxs-lookup"><span data-stu-id="086c0-256">You put the `Html.ValidationMessage` method right where you want the error message to appear.</span></span> <span data-ttu-id="086c0-257">Lorsque la page s’exécute, le `Html.ValidationMessage` méthode restitue un `<span>` élément où l’erreur de validation passe.</span><span class="sxs-lookup"><span data-stu-id="086c0-257">When the page runs, the `Html.ValidationMessage` method renders a `<span>` element where the validation error will go.</span></span> <span data-ttu-id="086c0-258">(Si aucune erreur n’est, le `<span>` élément est affiché, mais aucun texte n’est qu’il contient.)</span><span class="sxs-lookup"><span data-stu-id="086c0-258">(If there's no error, the `<span>` element is rendered, but there's no text in it.)</span></span>

<span data-ttu-id="086c0-259">Modifiez le balisage dans la page afin qu’il inclue un `Html.ValidationMessage` méthode pour chacun des trois `<input>` éléments sur la page, comme dans cet exemple :</span><span class="sxs-lookup"><span data-stu-id="086c0-259">Change the markup in the page so that it includes an `Html.ValidationMessage` method for each of the three `<input>` elements on the page, like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample10.cshtml?highlight=3,8,13)]

<span data-ttu-id="086c0-260">Pour observer le fonctionne de la synthèse, ajouter le balisage suivant et en code juste après le `<h1>Add a Movie</h1>` élément sur la page :</span><span class="sxs-lookup"><span data-stu-id="086c0-260">To see how the summary works, also add the following markup and code right after the `<h1>Add a Movie</h1>` element on the page:</span></span>

[!code-cshtml[Main](entering-data/samples/sample11.cshtml)]

<span data-ttu-id="086c0-261">Par défaut, le `Html.ValidationSummary` méthode affiche tous les messages de validation dans une liste (un `<ul>` élément qui se trouve dans un `<div>` élément).</span><span class="sxs-lookup"><span data-stu-id="086c0-261">By default, the `Html.ValidationSummary` method displays all the validation messages in a list (a `<ul>` element that's inside a `<div>` element).</span></span> <span data-ttu-id="086c0-262">Comme avec la `Html.ValidationMessage` (méthode), le balisage pour le résumé des validations est alors toujours restitué ; s’il n’existe aucune erreur, aucun élément de liste n’est rendus.</span><span class="sxs-lookup"><span data-stu-id="086c0-262">As with the `Html.ValidationMessage` method, the markup for the validation summary is always rendered; if there are no errors, no list items are rendered.</span></span>

<span data-ttu-id="086c0-263">Le résumé peut être une autre façon d’afficher les messages de validation au lieu d’à l’aide de la `Html.ValidationMessage` méthode pour afficher chaque erreur spécifiques aux champs.</span><span class="sxs-lookup"><span data-stu-id="086c0-263">The summary can be an alternative way to display validation messages instead of by using the `Html.ValidationMessage` method to display each field-specific error.</span></span> <span data-ttu-id="086c0-264">Ou vous pouvez utiliser un résumé et les détails.</span><span class="sxs-lookup"><span data-stu-id="086c0-264">Or you can use both a summary and the details.</span></span> <span data-ttu-id="086c0-265">Ou vous pouvez utiliser la `Html.ValidationSummary` méthode pour afficher une erreur générique, puis utilisez individuels `Html.ValidationMessage` appels pour afficher les détails.</span><span class="sxs-lookup"><span data-stu-id="086c0-265">Or you can use the `Html.ValidationSummary` method to display a generic error and then use individual `Html.ValidationMessage` calls to display details.</span></span>

<span data-ttu-id="086c0-266">La page complète se présente désormais comme dans cet exemple :</span><span class="sxs-lookup"><span data-stu-id="086c0-266">The complete page now looks like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample12.cshtml)]

<span data-ttu-id="086c0-267">C'est tout !</span><span class="sxs-lookup"><span data-stu-id="086c0-267">That's it.</span></span> <span data-ttu-id="086c0-268">Vous pouvez maintenant tester la page par l’ajout d’un film, mais en omettant une ou plusieurs des champs.</span><span class="sxs-lookup"><span data-stu-id="086c0-268">You can now test the page by adding a movie but leaving out one or more of the fields.</span></span> <span data-ttu-id="086c0-269">Lorsque vous le faites, vous consultez l’erreur suivante à afficher :</span><span class="sxs-lookup"><span data-stu-id="086c0-269">When you do, you see the following error display:</span></span>

![Ajouter une page de film montrant des messages d’erreur de validation](entering-data/_static/image5.png)

## <a name="styling-the-validation-error-messages"></a><span data-ttu-id="086c0-271">Les Messages d’erreur de Validation de conception de styles</span><span class="sxs-lookup"><span data-stu-id="086c0-271">Styling the Validation Error Messages</span></span>

<span data-ttu-id="086c0-272">Vous pouvez voir que les messages d’erreur, mais ils ne se distinguent réellement très bien.</span><span class="sxs-lookup"><span data-stu-id="086c0-272">You can see that there are error messages, but they don't really stand out very well.</span></span> <span data-ttu-id="086c0-273">Il existe un moyen simple d’appliquer un style cependant les messages d’erreur.</span><span class="sxs-lookup"><span data-stu-id="086c0-273">There's an easy way to style the error messages, though.</span></span>

<span data-ttu-id="086c0-274">Pour définir les messages d’erreur individuels qui sont affichés par le style `Html.ValidationMessage`, créez une classe de style CSS nommée `field-validation-error`.</span><span class="sxs-lookup"><span data-stu-id="086c0-274">To style the individual error messages that are displayed by `Html.ValidationMessage`, create a CSS style class named `field-validation-error`.</span></span> <span data-ttu-id="086c0-275">Pour définir l’apparence pour le résumé des validations, créez une classe de style CSS nommée `validation-summary-errors`.</span><span class="sxs-lookup"><span data-stu-id="086c0-275">To define the look for the validation summary, create a CSS style class named `validation-summary-errors`.</span></span>

<span data-ttu-id="086c0-276">Pour voir comment cette technique fonctionne, ajoutez un `<style>` élément à l’intérieur du `<head>` section de la page.</span><span class="sxs-lookup"><span data-stu-id="086c0-276">To see how this technique works, add a `<style>` element inside the `<head>` section of the page.</span></span> <span data-ttu-id="086c0-277">Définissez ensuite style `field-validation-error` et `validation-summary-errors` qui contiennent les règles suivantes :</span><span class="sxs-lookup"><span data-stu-id="086c0-277">Then define style classes named `field-validation-error` and `validation-summary-errors` that contain the following rules:</span></span>

[!code-cshtml[Main](entering-data/samples/sample13.cshtml?highlight=4-17)]

<span data-ttu-id="086c0-278">Normalement vous placeriez probablement les informations de style dans un distinct *.css* fichier, mais par souci de simplicité vous pouvez les placer dans la page pour l’instant.</span><span class="sxs-lookup"><span data-stu-id="086c0-278">Normally you'd probably put style information into a separate *.css* file, but for simplicity you can put them in the page for now.</span></span> <span data-ttu-id="086c0-279">(Plus loin dans cet ensemble de didacticiels, vous allez déplacer les règles CSS pour distinct *.css* fichier.)</span><span class="sxs-lookup"><span data-stu-id="086c0-279">(Later in this tutorial set, you'll move the CSS rules to a separate *.css* file.)</span></span>

<span data-ttu-id="086c0-280">S’il existe une erreur de validation, le `Html.ValidationMessage` méthode restitue un `<span>` élément inclut `class="field-validation-error"`.</span><span class="sxs-lookup"><span data-stu-id="086c0-280">If there's a validation error, the `Html.ValidationMessage` method renders a `<span>` element that includes `class="field-validation-error"`.</span></span> <span data-ttu-id="086c0-281">En ajoutant une définition de style pour cette classe, vous pouvez configurer à quoi ressemble le message.</span><span class="sxs-lookup"><span data-stu-id="086c0-281">By adding a style definition for that class, you can configure what the message looks like.</span></span> <span data-ttu-id="086c0-282">S’il existe des erreurs, le `ValidationSummary` méthode restitue même dynamiquement l’attribut `class="validation-summary-errors"`.</span><span class="sxs-lookup"><span data-stu-id="086c0-282">If there are errors, the `ValidationSummary` method likewise dynamically renders the attribute `class="validation-summary-errors"`.</span></span>

<span data-ttu-id="086c0-283">Réexécutez la page et laissez délibérément deux champs.</span><span class="sxs-lookup"><span data-stu-id="086c0-283">Run the page again and deliberately leave out a couple of the fields.</span></span> <span data-ttu-id="086c0-284">Les erreurs sont désormais plus visibles.</span><span class="sxs-lookup"><span data-stu-id="086c0-284">The errors are now more noticeable.</span></span> <span data-ttu-id="086c0-285">(En fait, ils êtes allé trop loin, mais c’est uniquement pour montrer ce que vous pouvez faire.)</span><span class="sxs-lookup"><span data-stu-id="086c0-285">(In fact, they're overdone, but that's just to show what you can do.)</span></span>

![Ajouter une page de film montrant les erreurs de validation qui ont été mise en forme](entering-data/_static/image6.png)

## <a name="adding-a-link-to-the-movies-page"></a><span data-ttu-id="086c0-287">Ajout d’un lien vers la Page de films</span><span class="sxs-lookup"><span data-stu-id="086c0-287">Adding a Link to the Movies Page</span></span>

<span data-ttu-id="086c0-288">La dernière étape consiste à rendre pratique pour accéder à la *AddMovie* page à partir de la liste de films d’origine.</span><span class="sxs-lookup"><span data-stu-id="086c0-288">One final step is to make it convenient to get to the *AddMovie* page from the original movie listing.</span></span>

<span data-ttu-id="086c0-289">Ouvrez le *films* page à nouveau.</span><span class="sxs-lookup"><span data-stu-id="086c0-289">Open the *Movies* page again.</span></span> <span data-ttu-id="086c0-290">Après la fermeture `</div>` balise qui suit le `WebGrid` helper, ajoutez le balisage suivant :</span><span class="sxs-lookup"><span data-stu-id="086c0-290">After the closing `</div>` tag that follows the `WebGrid` helper, add the following markup:</span></span>

[!code-cshtml[Main](entering-data/samples/sample14.cshtml)]

<span data-ttu-id="086c0-291">Comme vous l’avez vu précédemment, ASP.NET interprète le `~` opérateur en tant que la racine du site Web.</span><span class="sxs-lookup"><span data-stu-id="086c0-291">As you saw before, ASP.NET interprets the `~` operator as the root of the website.</span></span> <span data-ttu-id="086c0-292">Vous n’êtes pas obligé d’utiliser le `~` opérateur ; vous pouvez utiliser le balisage `<a href="./AddMovie">Add a movie</a>` ou une autre façon de définir le chemin d’accès qui comprend du code HTML.</span><span class="sxs-lookup"><span data-stu-id="086c0-292">You don't have to use the `~` operator; you could use the markup `<a href="./AddMovie">Add a movie</a>` or some other way to define the path that HTML understands.</span></span> <span data-ttu-id="086c0-293">Mais le `~` opérateur constitue une bonne approche générale lorsque vous créez des liens pour les pages Razor, car il permet de définir le site plus souple : Si vous déplacez la page actuelle dans un sous-dossier, le lien sera toujours atteindre le *AddMovie* page.</span><span class="sxs-lookup"><span data-stu-id="086c0-293">But the `~` operator is a good general approach when you create links for Razor pages, because it makes the site more flexible — if you move the current page to a subfolder, the link will still go to the *AddMovie* page.</span></span> <span data-ttu-id="086c0-294">(N’oubliez pas que le `~` opérateur fonctionne uniquement dans *.cshtml* pages.</span><span class="sxs-lookup"><span data-stu-id="086c0-294">(Remember that the `~` operator only works in *.cshtml* pages.</span></span> <span data-ttu-id="086c0-295">ASP.NET comprend, mais il n’est pas HTML standard.)</span><span class="sxs-lookup"><span data-stu-id="086c0-295">ASP.NET understands it, but it's not standard HTML.)</span></span>

<span data-ttu-id="086c0-296">Lorsque vous avez terminé, exécutez le *films* page.</span><span class="sxs-lookup"><span data-stu-id="086c0-296">When you're done, run the *Movies* page.</span></span> <span data-ttu-id="086c0-297">Il ressemblera à cette page :</span><span class="sxs-lookup"><span data-stu-id="086c0-297">It will look like this page:</span></span>

![Page de films avec un lien vers la page « Ajouter Movies »](entering-data/_static/image7.png)

<span data-ttu-id="086c0-299">Cliquez sur le **ajouter un film** lien pour vous assurer qu’il accède à la *AddMovie* page.</span><span class="sxs-lookup"><span data-stu-id="086c0-299">Click the **Add a movie** link to make sure that it goes to the *AddMovie* page.</span></span>

## <a name="coming-up-next"></a><span data-ttu-id="086c0-300">Prochaine</span><span class="sxs-lookup"><span data-stu-id="086c0-300">Coming Up Next</span></span>

<span data-ttu-id="086c0-301">Dans le didacticiel suivant, vous allez apprendre à permettre aux utilisateurs de modifier les données qui se trouve déjà dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="086c0-301">In the next tutorial, you'll learn how to let users edit data that's already in the database.</span></span>

## <a name="complete-listing-for-addmovie-page"></a><span data-ttu-id="086c0-302">Liste complète de la Page de AddMovie</span><span class="sxs-lookup"><span data-stu-id="086c0-302">Complete Listing for AddMovie Page</span></span>

[!code-cshtml[Main](entering-data/samples/sample15.cshtml)]

## <a name="additional-resources"></a><span data-ttu-id="086c0-303">Ressources supplémentaires</span><span class="sxs-lookup"><span data-stu-id="086c0-303">Additional Resources</span></span>

- [<span data-ttu-id="086c0-304">Introduction à la programmation Web ASP.NET à l’aide de la syntaxe Razor</span><span class="sxs-lookup"><span data-stu-id="086c0-304">Introduction to ASP.NET Web Programming Using the Razor Syntax</span></span>](https://go.microsoft.com/fwlink/?LinkID=202890)
- <span data-ttu-id="086c0-305">[Instruction SQL INSERT INTO](http://www.w3schools.com/sql/sql_insert.asp) sur le site W3Schools</span><span class="sxs-lookup"><span data-stu-id="086c0-305">[SQL INSERT INTO Statement](http://www.w3schools.com/sql/sql_insert.asp) on the W3Schools site</span></span>
- <span data-ttu-id="086c0-306">[Validation des entrées d’utilisateur dans ASP.NET Web Pages des Sites](https://go.microsoft.com/fwlink/?LinkId=253002).</span><span class="sxs-lookup"><span data-stu-id="086c0-306">[Validating User Input in ASP.NET Web Pages Sites](https://go.microsoft.com/fwlink/?LinkId=253002).</span></span> <span data-ttu-id="086c0-307">Plus d’informations sur l’utilisation de la `Validation` helper.</span><span class="sxs-lookup"><span data-stu-id="086c0-307">More information about working with the `Validation` helper.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="086c0-308">[Précédent](form-basics.md)
> [Suivant](updating-data.md)</span><span class="sxs-lookup"><span data-stu-id="086c0-308">[Previous](form-basics.md)
[Next](updating-data.md)</span></span>

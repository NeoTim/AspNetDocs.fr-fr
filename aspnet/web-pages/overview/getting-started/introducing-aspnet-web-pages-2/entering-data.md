---
uid: web-pages/overview/getting-started/introducing-aspnet-web-pages-2/entering-data
title: Présentation de la pages Web ASP.NET-saisie de données de base de données à l’aide de formulaires | Microsoft Docs
author: Rick-Anderson
description: Ce didacticiel vous montre comment créer un formulaire d’entrée, puis entrer les données que vous récupérez du formulaire dans une table de base de données lorsque vous utilisez pages Web ASP.NET (...
ms.author: riande
ms.date: 05/28/2015
ms.assetid: d37c93fc-25fd-4e94-8671-0d437beef206
msc.legacyurl: /web-pages/overview/getting-started/introducing-aspnet-web-pages-2/entering-data
msc.type: authoredcontent
ms.openlocfilehash: b9354a7b97a7df9020a681f709e16a92650cfcf0
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78624536"
---
# <a name="introducing-aspnet-web-pages---entering-database-data-by-using-forms"></a><span data-ttu-id="8b8b1-103">Présentation de la pages Web ASP.NET-saisie de données de base de données à l’aide de formulaires</span><span class="sxs-lookup"><span data-stu-id="8b8b1-103">Introducing ASP.NET Web Pages - Entering Database Data by Using Forms</span></span>

<span data-ttu-id="8b8b1-104">par [Tom FitzMacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="8b8b1-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="8b8b1-105">Ce didacticiel vous montre comment créer un formulaire d’entrée, puis entrer les données que vous récupérez du formulaire dans une table de base de données lorsque vous utilisez pages Web ASP.NET (Razor).</span><span class="sxs-lookup"><span data-stu-id="8b8b1-105">This tutorial shows you how to create an entry form and then enter the data that you get from the form into a database table when you use ASP.NET Web Pages (Razor).</span></span> <span data-ttu-id="8b8b1-106">Il part du principe que vous avez terminé la série jusqu’aux [principes fondamentaux des formulaires HTML dans pages Web ASP.net](https://go.microsoft.com/fwlink/?LinkId=251581).</span><span class="sxs-lookup"><span data-stu-id="8b8b1-106">It assumes you have completed the series through [Basics of HTML Forms in ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=251581).</span></span>
> 
> <span data-ttu-id="8b8b1-107">Ce que vous allez apprendre :</span><span class="sxs-lookup"><span data-stu-id="8b8b1-107">What you'll learn:</span></span>
> 
> - <span data-ttu-id="8b8b1-108">En savoir plus sur le traitement des formulaires d’entrée.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-108">More about how to process entry forms.</span></span>
> - <span data-ttu-id="8b8b1-109">Comment ajouter (insérer) des données dans une base de données.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-109">How to add (insert) data in a database.</span></span>
> - <span data-ttu-id="8b8b1-110">Comment s’assurer que les utilisateurs ont entré une valeur obligatoire dans un formulaire (comment valider une entrée d’utilisateur).</span><span class="sxs-lookup"><span data-stu-id="8b8b1-110">How to make sure that users have entered a required value in a form (how to validate user input).</span></span>
> - <span data-ttu-id="8b8b1-111">Comment afficher les erreurs de validation.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-111">How to display validation errors.</span></span>
> - <span data-ttu-id="8b8b1-112">Comment accéder à une autre page à partir de la page active.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-112">How to jump to another page from the current page.</span></span>
>   
> 
> <span data-ttu-id="8b8b1-113">Fonctionnalités/technologies présentées :</span><span class="sxs-lookup"><span data-stu-id="8b8b1-113">Features/technologies discussed:</span></span>
> 
> - <span data-ttu-id="8b8b1-114">Méthode `Database.Execute`</span><span class="sxs-lookup"><span data-stu-id="8b8b1-114">The `Database.Execute` method.</span></span>
> - <span data-ttu-id="8b8b1-115">Instruction SQL `Insert Into`</span><span class="sxs-lookup"><span data-stu-id="8b8b1-115">The SQL `Insert Into` statement</span></span>
> - <span data-ttu-id="8b8b1-116">Le programme d’assistance `Validation`.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-116">The `Validation` helper.</span></span>
> - <span data-ttu-id="8b8b1-117">Méthode `Response.Redirect`</span><span class="sxs-lookup"><span data-stu-id="8b8b1-117">The `Response.Redirect` method.</span></span>

## <a name="what-youll-build"></a><span data-ttu-id="8b8b1-118">Contenu</span><span class="sxs-lookup"><span data-stu-id="8b8b1-118">What You'll Build</span></span>

<span data-ttu-id="8b8b1-119">Dans le didacticiel précédent qui vous a montré comment créer une base de données, vous avez entré des données de base de données en modifiant la base de données directement dans WebMatrix, en travaillant dans l’espace de travail **base de données** .</span><span class="sxs-lookup"><span data-stu-id="8b8b1-119">In the tutorial earlier that showed you how to create a database, you entered database data by editing the database directly in WebMatrix, working in the **Database** workspace.</span></span> <span data-ttu-id="8b8b1-120">Dans la plupart des applications, il ne s’agit pas d’un moyen pratique de placer des données dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-120">In most apps, that's not a practical way to put data into the database, though.</span></span> <span data-ttu-id="8b8b1-121">Dans ce didacticiel, vous allez créer une interface basée sur le Web qui vous permet de saisir des données et de les enregistrer dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-121">So in this tutorial, you'll create a web-based interface that lets you or anyone enter data and save it to the database.</span></span>

<span data-ttu-id="8b8b1-122">Vous allez créer une page dans laquelle vous pouvez entrer de nouveaux films.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-122">You'll create a page where you can enter new movies.</span></span> <span data-ttu-id="8b8b1-123">La page contient un formulaire d’entrée contenant des champs (zones de texte) dans lesquels vous pouvez entrer un titre de film, un genre et une année.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-123">The page will contain an entry form that has fields (text boxes) where you can enter a movie title, genre, and year.</span></span> <span data-ttu-id="8b8b1-124">La page doit ressembler à cette page :</span><span class="sxs-lookup"><span data-stu-id="8b8b1-124">The page will look like this page:</span></span>

![Page « Ajouter un film » dans le navigateur](entering-data/_static/image1.png)

<span data-ttu-id="8b8b1-126">Les zones de texte sont des éléments HTML `<input>` qui se présentent comme suit :</span><span class="sxs-lookup"><span data-stu-id="8b8b1-126">The text boxes will be HTML `<input>` elements that will look like this markup:</span></span>

`<input type="text" name="genre" value="" />`

## <a name="creating-the-basic-entry-form"></a><span data-ttu-id="8b8b1-127">Création du formulaire de saisie de base</span><span class="sxs-lookup"><span data-stu-id="8b8b1-127">Creating the Basic Entry Form</span></span>

<span data-ttu-id="8b8b1-128">Créez une page nommée *AddMovie. cshtml*.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-128">Create a page named *AddMovie.cshtml*.</span></span>

<span data-ttu-id="8b8b1-129">Remplacez ce qui se trouve dans le fichier par le balisage suivant.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-129">Replace what's in the file with the following markup.</span></span> <span data-ttu-id="8b8b1-130">Remplacer tout ; vous ajouterez un bloc de code en haut dans un instant.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-130">Overwrite everything; you'll add a code block at the top shortly.</span></span>

[!code-cshtml[Main](entering-data/samples/sample1.cshtml)]

<span data-ttu-id="8b8b1-131">Cet exemple illustre le code HTML typique de la création d’un formulaire.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-131">This example shows typical HTML for creating a form.</span></span> <span data-ttu-id="8b8b1-132">Elle utilise `<input>` éléments pour les zones de texte et pour le bouton Envoyer.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-132">It uses `<input>` elements for the text boxes and for the submit button.</span></span> <span data-ttu-id="8b8b1-133">Les légendes des zones de texte sont créées à l’aide d’éléments de `<label>` standard.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-133">The captions for the text boxes are created by using standard `<label>` elements.</span></span> <span data-ttu-id="8b8b1-134">Les éléments `<fieldset>` et `<legend>` placent une belle zone dans le formulaire.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-134">The `<fieldset>` and `<legend>` elements put a nice box around the form.</span></span>

<span data-ttu-id="8b8b1-135">Notez que dans cette page, l’élément `<form>` utilise `post` comme valeur pour l’attribut `method`.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-135">Notice that in this page, the `<form>` element uses `post` as the value for the `method` attribute.</span></span> <span data-ttu-id="8b8b1-136">Dans le didacticiel précédent, vous avez créé un formulaire qui utilisait la méthode `get`.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-136">In the previous tutorial, you created a form that used the `get` method.</span></span> <span data-ttu-id="8b8b1-137">Cela était correct, car même si le formulaire a envoyé des valeurs au serveur, la demande n’a pas apporté de modifications.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-137">That was correct, because although the form submitted values to the server, the request did not make any changes.</span></span> <span data-ttu-id="8b8b1-138">Tout cela a été de récupérer des données de différentes façons.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-138">All it did was fetch data in different ways.</span></span> <span data-ttu-id="8b8b1-139">Toutefois, dans cette page, vous *allez* apporter des modifications, vous allez ajouter de nouveaux enregistrements de base de données.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-139">However, in this page you *will* make changes—you're going to add new database records.</span></span> <span data-ttu-id="8b8b1-140">Par conséquent, ce formulaire doit utiliser la méthode `post`.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-140">Therefore, this form should use the `post` method.</span></span> <span data-ttu-id="8b8b1-141">(Pour plus d’informations sur la différence entre les `GET` et les opérations de `POST`, consultez la barre latérale[sécurité des verbes obtenir, poster et http](https://go.microsoft.com/fwlink/?LinkId=251581#GET,_POST,_and_HTTP_Verb_Safety) dans le didacticiel précédent.)</span><span class="sxs-lookup"><span data-stu-id="8b8b1-141">(For more about the difference between `GET` and `POST` operations, see the[GET, POST, and HTTP Verb Safety](https://go.microsoft.com/fwlink/?LinkId=251581#GET,_POST,_and_HTTP_Verb_Safety) sidebar in the previous tutorial.)</span></span>

<span data-ttu-id="8b8b1-142">Notez que chaque zone de texte possède un élément `name` (`title`, `genre`, `year`).</span><span class="sxs-lookup"><span data-stu-id="8b8b1-142">Note that each text box has a `name` element (`title`, `genre`, `year`).</span></span> <span data-ttu-id="8b8b1-143">Comme vous l’avez vu dans le didacticiel précédent, ces noms sont importants, car vous devez disposer de ces noms pour pouvoir obtenir l’entrée de l’utilisateur par la suite.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-143">As you saw in the previous tutorial, these names are important because you must have those names so you can get the user's input later.</span></span> <span data-ttu-id="8b8b1-144">Vous pouvez utiliser n’importe quel nom.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-144">You can use any names.</span></span> <span data-ttu-id="8b8b1-145">Il est utile d’utiliser des noms explicites qui vous permettent de vous souvenir des données que vous utilisez.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-145">It's helpful to use meaningful names that help you remember what data you're working with.</span></span>

<span data-ttu-id="8b8b1-146">L’attribut `value` de chaque élément `<input>` contient un peu de code Razor (par exemple, `Request.Form["title"]`).</span><span class="sxs-lookup"><span data-stu-id="8b8b1-146">The `value` attribute of each `<input>` element contains a bit of Razor code (for example, `Request.Form["title"]`).</span></span> <span data-ttu-id="8b8b1-147">Vous avez appris une version de cette astuce dans le didacticiel précédent pour conserver la valeur entrée dans la zone de texte (le cas échéant) après l’envoi du formulaire.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-147">You learned a version of this trick in the previous tutorial to preserve the value entered into the text box (if any) after the form has been submitted.</span></span>

## <a name="getting-the-form-values"></a><span data-ttu-id="8b8b1-148">Obtention des valeurs de formulaire</span><span class="sxs-lookup"><span data-stu-id="8b8b1-148">Getting the Form Values</span></span>

<span data-ttu-id="8b8b1-149">Ensuite, vous ajoutez du code qui traite le formulaire.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-149">Next, you add code that processes the form.</span></span> <span data-ttu-id="8b8b1-150">Dans le plan, vous effectuerez les opérations suivantes :</span><span class="sxs-lookup"><span data-stu-id="8b8b1-150">In outline, you'll do the following:</span></span>

1. <span data-ttu-id="8b8b1-151">Vérifiez si la page est en cours de publication (a été envoyée).</span><span class="sxs-lookup"><span data-stu-id="8b8b1-151">Check whether the page is being posted (was submitted).</span></span> <span data-ttu-id="8b8b1-152">Vous souhaitez que votre code s’exécute uniquement lorsque les utilisateurs ont cliqué sur le bouton, et non lors de la première exécution de la page.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-152">You want to your code to run only when users have clicked the button, not when the page first runs.</span></span>
2. <span data-ttu-id="8b8b1-153">Obtient les valeurs que l’utilisateur a entrées dans les zones de texte.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-153">Get the values that the user entered into the text boxes.</span></span> <span data-ttu-id="8b8b1-154">Dans ce cas, comme le formulaire utilise le verbe `POST`, vous récupérez les valeurs de formulaire à partir de la collection `Request.Form`.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-154">In this case, because the form is using the `POST` verb, you get the form values from the `Request.Form` collection.</span></span>
3. <span data-ttu-id="8b8b1-155">Insérez les valeurs sous la forme d’un nouvel enregistrement dans la table de base de données de *films* .</span><span class="sxs-lookup"><span data-stu-id="8b8b1-155">Insert the values as a new record in the *Movies* database table.</span></span>

<span data-ttu-id="8b8b1-156">En haut du fichier, ajoutez le code suivant :</span><span class="sxs-lookup"><span data-stu-id="8b8b1-156">At the top of the file, add the following code:</span></span>

[!code-cshtml[Main](entering-data/samples/sample2.cshtml)]

<span data-ttu-id="8b8b1-157">Les premières lignes créent des variables (`title`, `genre`et `year`) pour contenir les valeurs des zones de texte.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-157">The first few lines create variables (`title`, `genre`, and `year`) to hold the values from the text boxes.</span></span> <span data-ttu-id="8b8b1-158">La ligne `if(IsPost)` permet de s’assurer que les variables sont définies *uniquement* lorsque les utilisateurs cliquent sur le bouton **Ajouter un film** , c’est-à-dire lorsque le formulaire a été publié.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-158">The line `if(IsPost)` makes sure that the variables are set *only* when users click the **Add Movie** button — that is, when the form has been posted.</span></span>

<span data-ttu-id="8b8b1-159">Comme vous l’avez vu dans un didacticiel précédent, vous pouvez obtenir la valeur d’une zone de texte à l’aide d’une expression telle que `Request.Form["name"]`, où *nom* est le nom de l’élément `<input>`.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-159">As you saw in an earlier tutorial, you get the value of a text box by using an expression like `Request.Form["name"]`, where *name* is the name of the `<input>` element.</span></span>

<span data-ttu-id="8b8b1-160">Les noms des variables (`title`, `genre`et `year`) sont arbitraires.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-160">The names of the variables (`title`, `genre`, and `year`) are arbitrary.</span></span> <span data-ttu-id="8b8b1-161">Comme les noms que vous affectez à `<input>` éléments, vous pouvez les appeler comme vous le souhaitez.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-161">Like the names that you assign to `<input>` elements, you can call them anything you like.</span></span> <span data-ttu-id="8b8b1-162">(Les noms des variables n’ont pas besoin de correspondre aux attributs de nom des éléments `<input>` du formulaire.) Mais comme avec les éléments de `<input>`, il est judicieux d’utiliser des noms de variables qui reflètent les données qu’ils contiennent.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-162">(The names of the variables don't have to match the name attributes of `<input>` elements on the form.) But as with the `<input>` elements, it's a good idea to use variable names that reflect the data that they contain.</span></span> <span data-ttu-id="8b8b1-163">Lorsque vous écrivez du code, les noms cohérents vous permettent de vous souvenir facilement des données que vous utilisez.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-163">When you write code, consistent names make it easier for you to remember what data you're working with.</span></span>

## <a name="adding-data-to-the-database"></a><span data-ttu-id="8b8b1-164">Ajout de données à la base de données</span><span class="sxs-lookup"><span data-stu-id="8b8b1-164">Adding Data to the Database</span></span>

<span data-ttu-id="8b8b1-165">Dans le bloc de code que vous venez d’ajouter, juste *à l’intérieur* de l’accolade fermante (`}`) du bloc `if` (pas seulement à l’intérieur du bloc de code), ajoutez le code suivant :</span><span class="sxs-lookup"><span data-stu-id="8b8b1-165">In the code block you just added, just *inside* the closing brace ( `}` ) of the `if` block (not just inside the code block), add the following code:</span></span>

[!code-csharp[Main](entering-data/samples/sample3.cs)]

<span data-ttu-id="8b8b1-166">Cet exemple est similaire au code que vous avez utilisé dans un didacticiel précédent pour extraire et afficher des données.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-166">This example is similar to the code you used in a previous tutorial to fetch and display data.</span></span> <span data-ttu-id="8b8b1-167">La ligne qui commence par `db =` ouvre la base de données, comme précédemment, et la ligne suivante définit une instruction SQL, de nouveau comme vous l’avez vu précédemment.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-167">The line that starts with `db =` opens the database, like before, and the next line defines a SQL statement, again as you saw before.</span></span> <span data-ttu-id="8b8b1-168">Toutefois, cette fois-ci, elle définit une instruction SQL `Insert Into`.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-168">However, this time it defines a SQL `Insert Into` statement.</span></span> <span data-ttu-id="8b8b1-169">L’exemple suivant illustre la syntaxe générale de l’instruction `Insert Into` :</span><span class="sxs-lookup"><span data-stu-id="8b8b1-169">The following example shows the general syntax of the `Insert Into` statement:</span></span>

`INSERT INTO table (column1, column2, column3, ...) VALUES (value1, value2, value3, ...)`

<span data-ttu-id="8b8b1-170">En d’autres termes, vous spécifiez la table dans laquelle insérer, puis vous répertoriez les colonnes à insérer dans, puis vous répertoriez les valeurs à insérer.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-170">In other words, you specify the table to insert into, then list the columns to insert into, and then list the values to insert.</span></span> <span data-ttu-id="8b8b1-171">(Comme indiqué précédemment, SQL ne respecte pas la casse, mais certaines personnes mettent en majuscules les mots clés pour faciliter la lecture de la commande.)</span><span class="sxs-lookup"><span data-stu-id="8b8b1-171">(As noted before, SQL is not case sensitive but some people capitalize the keywords to make it easier to read the command.)</span></span>

<span data-ttu-id="8b8b1-172">Les colonnes que vous insérez dans sont déjà répertoriées dans la commande, `(Title, Genre, Year)`.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-172">The columns that you're inserting into are already listed in the command — `(Title, Genre, Year)`.</span></span> <span data-ttu-id="8b8b1-173">La partie intéressante est la façon dont vous récupérez les valeurs des zones de texte dans la partie `VALUES` de la commande.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-173">The interesting part is how you get the values from the text boxes into the `VALUES` part of the command.</span></span> <span data-ttu-id="8b8b1-174">Au lieu de valeurs réelles, vous voyez `@0`, `@1`et `@2`, qui sont des espaces réservés de cours.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-174">Instead of actual values, you see `@0`, `@1`, and `@2`, which are of course placeholders.</span></span> <span data-ttu-id="8b8b1-175">Quand vous exécutez la commande (sur la ligne `db.Execute`), vous transmettez les valeurs que vous avez obtenues à partir des zones de texte.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-175">When you run the command (on the `db.Execute` line), you pass the values that you got from the text boxes.</span></span>

<span data-ttu-id="8b8b1-176">**Important !**</span><span class="sxs-lookup"><span data-stu-id="8b8b1-176">**Important!**</span></span> <span data-ttu-id="8b8b1-177">N’oubliez pas que la seule façon dont vous devez inclure les données entrées en ligne par un utilisateur dans une instruction SQL consiste à utiliser des espaces réservés, comme vous pouvez le voir ici (`VALUES(@0, @1, @2)`).</span><span class="sxs-lookup"><span data-stu-id="8b8b1-177">Remember that the only way you should ever include data entered online by a user in a SQL statement is to use placeholders, as you see here (`VALUES(@0, @1, @2)`).</span></span> <span data-ttu-id="8b8b1-178">Si vous concaténez une entrée d’utilisateur dans une instruction SQL, vous vous retrouvez à une attaque par injection SQL, comme expliqué dans les [concepts de base de formulaire dans pages Web ASP.net](https://go.microsoft.com/fwlink/?LinkId=251581) (le didacticiel précédent).</span><span class="sxs-lookup"><span data-stu-id="8b8b1-178">If you concatenate user input into a SQL statement, you open yourself to a SQL injection attack, as explained in [Form Basics in ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=251581) (the previous tutorial).</span></span>

<span data-ttu-id="8b8b1-179">Toujours à l’intérieur du bloc `if`, ajoutez la ligne suivante après la ligne de `db.Execute` :</span><span class="sxs-lookup"><span data-stu-id="8b8b1-179">Still inside the `if` block, add the following line after the `db.Execute` line:</span></span>

[!code-css[Main](entering-data/samples/sample4.css)]

<span data-ttu-id="8b8b1-180">Une fois le nouveau film inséré dans la base de données, cette ligne vous redirige vers la page *films* pour vous permettre de voir le film que vous venez d’entrer.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-180">After the new movie has been inserted into the database, this line jumps you (redirects) to the *Movies* page so you can see the movie you just entered.</span></span> <span data-ttu-id="8b8b1-181">L’opérateur `~` signifie « la racine du site Web ».</span><span class="sxs-lookup"><span data-stu-id="8b8b1-181">The `~` operator means "root of the website."</span></span> <span data-ttu-id="8b8b1-182">(L’opérateur `~` fonctionne uniquement dans les pages ASP.NET, et non en HTML en général.)</span><span class="sxs-lookup"><span data-stu-id="8b8b1-182">(The `~` operator works only in ASP.NET pages, not in HTML generally.)</span></span>

<span data-ttu-id="8b8b1-183">Le bloc de code complet ressemble à l’exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="8b8b1-183">The complete code block looks like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample5.cshtml)]

## <a name="testing-the-insert-command-so-far"></a><span data-ttu-id="8b8b1-184">Test de la commande Insert (jusqu’à présent)</span><span class="sxs-lookup"><span data-stu-id="8b8b1-184">Testing the Insert Command (So Far)</span></span>

<span data-ttu-id="8b8b1-185">Vous n’avez pas encore terminé, mais il est maintenant temps de tester.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-185">You're not done yet, but now is a good time to test.</span></span>

<span data-ttu-id="8b8b1-186">Dans l’arborescence des fichiers dans WebMatrix, cliquez avec le bouton droit sur la page *AddMovie. cshtml* , puis cliquez sur **lancer dans le navigateur**.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-186">In the tree view of files in WebMatrix, right-click the *AddMovie.cshtml* page and then click **Launch in browser**.</span></span>

![Page « Ajouter un film » dans le navigateur](entering-data/_static/image2.png)

<span data-ttu-id="8b8b1-188">(Si vous obtenez une page différente dans le navigateur, assurez-vous que l’URL est `http://localhost:nnnnn/AddMovie`), où *nnnnn* est le numéro de port que vous utilisez.)</span><span class="sxs-lookup"><span data-stu-id="8b8b1-188">(If you end up with a different page in the browser, make sure that the URL is `http://localhost:nnnnn/AddMovie`), where *nnnnn* is the port number that you're using.)</span></span>

<span data-ttu-id="8b8b1-189">Avez-vous obtenu une page d’erreur ?</span><span class="sxs-lookup"><span data-stu-id="8b8b1-189">Did you get an error page?</span></span> <span data-ttu-id="8b8b1-190">Si c’est le cas, lisez-le soigneusement et assurez-vous que le code semble exactement ce qui a été mentionné précédemment.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-190">If so, read it carefully and make sure that the code looks exactly what was listed earlier.</span></span>

<span data-ttu-id="8b8b1-191">Entrez un film sous la forme &mdash; par exemple, utilisez « citoyen Kane », « fiction » et « 1941 ».</span><span class="sxs-lookup"><span data-stu-id="8b8b1-191">Enter a movie in the form &mdash; for example, use "Citizen Kane", "Drama", and "1941".</span></span> <span data-ttu-id="8b8b1-192">(Ou tout.) Cliquez ensuite sur **Ajouter un film**.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-192">(Or whatever.) Then click **Add Movie**.</span></span>

<span data-ttu-id="8b8b1-193">Si tout se passe bien, vous êtes redirigé vers la page *films* .</span><span class="sxs-lookup"><span data-stu-id="8b8b1-193">If all goes well, you're redirected to the *Movies* page.</span></span> <span data-ttu-id="8b8b1-194">Assurez-vous que votre nouveau film est listé.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-194">Make sure that your new movie is listed.</span></span>

![Page films présentant un film récemment ajouté](entering-data/_static/image3.png)

## <a name="validating-user-input"></a><span data-ttu-id="8b8b1-196">Validation de l'entrée utilisateur</span><span class="sxs-lookup"><span data-stu-id="8b8b1-196">Validating User Input</span></span>

<span data-ttu-id="8b8b1-197">Revenez à la page *AddMovie* ou réexécutez-la.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-197">Go back to the *AddMovie* page, or run it again.</span></span> <span data-ttu-id="8b8b1-198">Entrez un autre film, mais cette fois, entrez uniquement le titre &mdash; par exemple, entrez « Singin’in the Rain ».</span><span class="sxs-lookup"><span data-stu-id="8b8b1-198">Enter another movie, but this time, enter only the title &mdash; for example, enter "Singin' in the Rain".</span></span> <span data-ttu-id="8b8b1-199">Cliquez ensuite sur **Ajouter un film**.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-199">Then click **Add Movie**.</span></span>

<span data-ttu-id="8b8b1-200">Vous êtes redirigé vers la page *films* .</span><span class="sxs-lookup"><span data-stu-id="8b8b1-200">You're redirected to the *Movies* page again.</span></span> <span data-ttu-id="8b8b1-201">Vous pouvez trouver le nouveau film, mais il est incomplet.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-201">You can find the new movie, but it's incomplete.</span></span>

![Page films indiquant un nouveau film dont certaines valeurs sont manquantes](entering-data/_static/image4.png)

<span data-ttu-id="8b8b1-203">Lorsque vous avez créé le tableau *films* , vous avez déclaré explicitement qu’aucun des champs ne peut avoir la valeur null.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-203">When you created the *Movies* table, you explicitly said that none of the fields could be null.</span></span> <span data-ttu-id="8b8b1-204">Ici, vous avez un formulaire de saisie pour les nouveaux films et vous laissez les champs vides.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-204">Here you have an entry form for new movies, and you're leaving fields blank.</span></span> <span data-ttu-id="8b8b1-205">Il s’agit d’une erreur.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-205">That's an error.</span></span>

<span data-ttu-id="8b8b1-206">Dans ce cas, la base de données n’a pas réellement déclenché (ou *levé*) une erreur.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-206">In this case, the database didn't actually raise (or *throw*) an error.</span></span> <span data-ttu-id="8b8b1-207">Comme vous n’avez pas fourni de genre ou d’année, le code de la page *AddMovie* a traité ces valeurs comme des *chaînes vides*.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-207">You didn't supply a genre or year, so the code in the *AddMovie* page treated those values as so-called *empty strings*.</span></span> <span data-ttu-id="8b8b1-208">Lors de l’exécution de la commande SQL `Insert Into`, les champs genre et Year ne comportaient pas de données utiles, mais ils n’avaient pas la valeur null.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-208">When the SQL `Insert Into` command ran, the genre and year fields didn't have useful data in them, but they weren't null.</span></span>

<span data-ttu-id="8b8b1-209">Évidemment, vous ne souhaitez pas permettre aux utilisateurs d’entrer des informations de film demi-vides dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-209">Obviously, you don't want to let users enter half-empty movie information into the database.</span></span> <span data-ttu-id="8b8b1-210">La solution consiste à valider l’entrée de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-210">The solution is to validate the user's input.</span></span> <span data-ttu-id="8b8b1-211">Au départ, la validation s’assure simplement que l’utilisateur a entré une valeur pour tous les champs (c’est-à-dire qu’aucun d’entre eux ne contient une chaîne vide).</span><span class="sxs-lookup"><span data-stu-id="8b8b1-211">Initially, the validation will simply make sure that the user has entered a value for all of the fields (that is, that none of them contains an empty string).</span></span>

> [!TIP]
> 
> <span data-ttu-id="8b8b1-212">**Chaînes NULL et vides**</span><span class="sxs-lookup"><span data-stu-id="8b8b1-212">**Null and Empty Strings**</span></span>
> 
> <span data-ttu-id="8b8b1-213">En programmation, il y a une distinction entre les différentes notions de « aucune valeur ».</span><span class="sxs-lookup"><span data-stu-id="8b8b1-213">In programming, there's a distinction between different notions of "no value."</span></span> <span data-ttu-id="8b8b1-214">En général, une valeur est *null* si elle n’a jamais été définie ou initialisée de quelque manière que ce soit.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-214">In general, a value is *null* if it has never been set or initialized in any way.</span></span> <span data-ttu-id="8b8b1-215">En revanche, une variable qui attend des données de type caractère (chaînes) peut être définie sur une *chaîne vide*.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-215">In contrast, a variable that expects character data (strings) can be set to an *empty string*.</span></span> <span data-ttu-id="8b8b1-216">Dans ce cas, la valeur n’est pas null ; elle est simplement définie explicitement sur une chaîne de caractères dont la longueur est égale à zéro.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-216">In that case, the value is not null; it's just been explicitly set to a string of characters whose length is zero.</span></span> <span data-ttu-id="8b8b1-217">Ces deux instructions montrent la différence :</span><span class="sxs-lookup"><span data-stu-id="8b8b1-217">These two statements show the difference:</span></span>
> 
> [!code-csharp[Main](entering-data/samples/sample6.cs)]
> 
> <span data-ttu-id="8b8b1-218">C’est un peu plus compliqué, mais le point important est que `null` représente un type d’état indéterminé.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-218">It's a little more complicated than that, but the important point is that `null` represents a sort of undetermined state.</span></span>
> 
> <span data-ttu-id="8b8b1-219">Maintenant, il est important de comprendre exactement quand une valeur est null et qu’il s’agit simplement d’une chaîne vide.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-219">Now and then it's important to understand exactly when a value is null and when it's just an empty string.</span></span> <span data-ttu-id="8b8b1-220">Dans le code de la page *AddMovie* , vous pouvez obtenir les valeurs des zones de texte à l’aide de `Request.Form["title"]`, etc.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-220">In the code for the *AddMovie* page, you get the values of the text boxes by using `Request.Form["title"]` and so on.</span></span> <span data-ttu-id="8b8b1-221">Lorsque la page s’exécute pour la première fois (avant de cliquer sur le bouton), la valeur de `Request.Form["title"]` est null.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-221">When the page first runs (before you click the button), the value of `Request.Form["title"]` is null.</span></span> <span data-ttu-id="8b8b1-222">Toutefois, lorsque vous envoyez le formulaire, `Request.Form["title"]` obtient la valeur de la zone de texte `title`.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-222">But when you submit the form, `Request.Form["title"]` gets the value of the `title` text box.</span></span> <span data-ttu-id="8b8b1-223">Ce n’est pas évident, mais une zone de texte vide n’est pas null. elle contient simplement une chaîne vide.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-223">It's not obvious, but an empty text box is not null; it just has an empty string in it.</span></span> <span data-ttu-id="8b8b1-224">Ainsi, lorsque le code s’exécute en réponse au clic sur le bouton, `Request.Form["title"]` contient une chaîne vide.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-224">So when the code runs in response to the button click, `Request.Form["title"]` has an empty string in it.</span></span>
> 
> <span data-ttu-id="8b8b1-225">Pourquoi cette distinction est-elle importante ?</span><span class="sxs-lookup"><span data-stu-id="8b8b1-225">Why is this distinction important?</span></span> <span data-ttu-id="8b8b1-226">Lorsque vous avez créé le tableau *films* , vous avez déclaré explicitement qu’aucun des champs ne peut avoir la valeur null.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-226">When you created the *Movies* table, you explicitly said that none of the fields could be null.</span></span> <span data-ttu-id="8b8b1-227">Mais ici, vous avez un formulaire de saisie pour les nouveaux films et vous laissez les champs vides.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-227">But here you have an entry form for new movies, and you're leaving fields blank.</span></span> <span data-ttu-id="8b8b1-228">Vous vous attendez raisonnablement à ce que la base de données se plaindre lorsque vous avez essayé d’enregistrer de nouveaux films qui n’ont pas de valeurs pour le genre ou l’année.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-228">You would reasonably expect the database to complain when you tried to save new movies that didn't have values for genre or year.</span></span> <span data-ttu-id="8b8b1-229">Mais c’est le point &mdash; même si vous laissez ces zones de texte vides, les valeurs ne sont pas nulles. Il s’agit de chaînes vides.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-229">But that's the point &mdash; even if you leave those text boxes blank, the values aren't null; they're empty strings.</span></span> <span data-ttu-id="8b8b1-230">En conséquence, vous pouvez enregistrer de nouveaux films dans la base de données avec ces colonnes vides &mdash; mais pas null !</span><span class="sxs-lookup"><span data-stu-id="8b8b1-230">As a result, you're able to save new movies to the database with these columns empty &mdash; but not null!</span></span> <span data-ttu-id="8b8b1-231">des valeurs &mdash;.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-231">&mdash; values.</span></span> <span data-ttu-id="8b8b1-232">Par conséquent, vous devez vous assurer que les utilisateurs n’envoient pas une chaîne vide, ce que vous pouvez effectuer en validant l’entrée de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-232">Therefore, you have to make sure that users don't submit an empty string, which you can do by validating the user's input.</span></span>

### <a name="the-validation-helper"></a><span data-ttu-id="8b8b1-233">L’application auxiliaire de validation</span><span class="sxs-lookup"><span data-stu-id="8b8b1-233">The Validation Helper</span></span>

<span data-ttu-id="8b8b1-234">Pages Web ASP.NET comprend un programme d’assistance &mdash; le `Validation` &mdash; d’assistance que vous pouvez utiliser pour vous assurer que les utilisateurs entrent des données qui répondent à vos besoins.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-234">ASP.NET Web Pages includes a helper &mdash; the `Validation` helper &mdash; that you can use to make sure that users enter data that meets your requirements.</span></span> <span data-ttu-id="8b8b1-235">Le `Validation` Helper est l’un des programmes d’assistance intégrés à pages Web ASP.NET. vous n’avez donc pas besoin de l’installer en tant que package à l’aide de NuGet, de la façon dont vous avez installé l’application auxiliaire Gravatar dans un didacticiel précédent.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-235">The `Validation` helper is one of the helpers that's built in to ASP.NET Web Pages, so you don't have to install it as a package by using NuGet, the way you installed the Gravatar helper in an earlier tutorial.</span></span>

<span data-ttu-id="8b8b1-236">Pour valider l’entrée de l’utilisateur, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="8b8b1-236">To validate the user's input, you'll do the following:</span></span>

- <span data-ttu-id="8b8b1-237">Utilisez du code pour spécifier que vous souhaitez exiger des valeurs dans les zones de texte de la page.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-237">Use code to specify that you want to require values in the text boxes on the page.</span></span>
- <span data-ttu-id="8b8b1-238">Placez un test dans le code afin que les informations sur le film soient ajoutées à la base de données uniquement si tout valide correctement.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-238">Put a test into the code so that the movie information is added to the database only if everything validates properly.</span></span>
- <span data-ttu-id="8b8b1-239">Ajoutez du code dans le balisage pour afficher les messages d’erreur.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-239">Add code into the markup to display error messages.</span></span>

<span data-ttu-id="8b8b1-240">Dans le bloc de code de la page *AddMovie* , à droite en haut avant les déclarations de variable, ajoutez le code suivant :</span><span class="sxs-lookup"><span data-stu-id="8b8b1-240">In the code block in the *AddMovie* page, right up at the top before the variable declarations, add the following code:</span></span>

[!code-csharp[Main](entering-data/samples/sample7.cs)]

<span data-ttu-id="8b8b1-241">Vous appelez `Validation.RequireField` une fois pour chaque champ (élément`<input>`) dans lequel vous souhaitez exiger une entrée.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-241">You call `Validation.RequireField` once for each field (`<input>` element) where you want to require an entry.</span></span> <span data-ttu-id="8b8b1-242">Vous pouvez également ajouter un message d’erreur personnalisé pour chaque appel, comme vous pouvez le voir ici.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-242">You can also add a custom error message for each call, like you see here.</span></span> <span data-ttu-id="8b8b1-243">(Nous avons varié les messages simplement pour montrer que vous pouvez y placer tout ce que vous aimez.)</span><span class="sxs-lookup"><span data-stu-id="8b8b1-243">(We varied the messages just to show that you can put anything you like there.)</span></span>

<span data-ttu-id="8b8b1-244">En cas de problème, vous souhaitez empêcher l’insertion des nouvelles informations de film dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-244">If there's a problem, you want to prevent the new movie information from being inserted into the database.</span></span> <span data-ttu-id="8b8b1-245">Dans le bloc `if(IsPost)`, utilisez `&&` (AND logique) pour ajouter une autre condition qui teste `Validation.IsValid()`.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-245">In the `if(IsPost)` block, use `&&` (logical AND) to add another condition that tests `Validation.IsValid()`.</span></span> <span data-ttu-id="8b8b1-246">Lorsque vous avez terminé, le bloc de `if(IsPost)` entier ressemble à ce code :</span><span class="sxs-lookup"><span data-stu-id="8b8b1-246">When you're done, the whole `if(IsPost)` block looks like this code:</span></span>

[!code-csharp[Main](entering-data/samples/sample8.cs)]

<span data-ttu-id="8b8b1-247">En cas d’erreur de validation avec l’un des champs que vous avez enregistrés à l’aide du programme d’assistance `Validation`, la méthode `Validation.IsValid` retourne la valeur false.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-247">If there's a validation error with any of the fields that you registered by using the `Validation` helper, the `Validation.IsValid` method returns false.</span></span> <span data-ttu-id="8b8b1-248">Dans ce cas, aucun code n’est exécuté dans ce bloc, donc aucune entrée de film non valide n’est insérée dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-248">And in that case, none of the code in that block will run, so no invalid movie entries will be inserted into the database.</span></span> <span data-ttu-id="8b8b1-249">Et bien sûr, vous n’êtes pas redirigé vers la page *films* .</span><span class="sxs-lookup"><span data-stu-id="8b8b1-249">And of course you're not redirected to the *Movies* page.</span></span>

<span data-ttu-id="8b8b1-250">Le bloc de code complet, y compris le code de validation, ressemble maintenant à l’exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="8b8b1-250">The complete code block, including the validation code, now looks like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample9.cshtml?highlight=10)]

## <a name="displaying-validation-errors"></a><span data-ttu-id="8b8b1-251">Affichage des erreurs de validation</span><span class="sxs-lookup"><span data-stu-id="8b8b1-251">Displaying Validation Errors</span></span>

<span data-ttu-id="8b8b1-252">La dernière étape consiste à afficher tous les messages d’erreur.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-252">The last step is to display any error messages.</span></span> <span data-ttu-id="8b8b1-253">Vous pouvez afficher des messages individuels pour chaque erreur de validation, ou vous pouvez afficher un résumé, ou les deux.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-253">You can display individual messages for each validation error, or you can display a summary, or both.</span></span> <span data-ttu-id="8b8b1-254">Pour ce didacticiel, vous allez effectuer les deux opérations afin que vous puissiez voir comment il fonctionne.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-254">For this tutorial, you'll do both so that you can see how it works.</span></span>

<span data-ttu-id="8b8b1-255">En regard de chaque élément de `<input>` que vous validez, appelez la méthode `Html.ValidationMessage` et transmettez-lui le nom de l’élément `<input>` que vous validez.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-255">Next to each `<input>` element that you're validating, call the `Html.ValidationMessage` method and pass it the name of the `<input>` element you're validating.</span></span> <span data-ttu-id="8b8b1-256">Vous placez la méthode `Html.ValidationMessage` juste à l’endroit où vous souhaitez que le message d’erreur s’affiche.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-256">You put the `Html.ValidationMessage` method right where you want the error message to appear.</span></span> <span data-ttu-id="8b8b1-257">Lorsque la page s’exécute, la méthode `Html.ValidationMessage` restitue un élément `<span>` où l’erreur de validation se produira.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-257">When the page runs, the `Html.ValidationMessage` method renders a `<span>` element where the validation error will go.</span></span> <span data-ttu-id="8b8b1-258">(S’il n’y a pas d’erreur, l’élément `<span>` est affiché, mais il n’y a pas de texte.)</span><span class="sxs-lookup"><span data-stu-id="8b8b1-258">(If there's no error, the `<span>` element is rendered, but there's no text in it.)</span></span>

<span data-ttu-id="8b8b1-259">Modifiez le balisage dans la page afin qu’il inclue une méthode de `Html.ValidationMessage` pour chacun des trois éléments `<input>` sur la page, comme dans cet exemple :</span><span class="sxs-lookup"><span data-stu-id="8b8b1-259">Change the markup in the page so that it includes an `Html.ValidationMessage` method for each of the three `<input>` elements on the page, like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample10.cshtml?highlight=3,8,13)]

<span data-ttu-id="8b8b1-260">Pour voir comment le résumé fonctionne, ajoutez également le balisage et le code suivants juste après l’élément `<h1>Add a Movie</h1>` sur la page :</span><span class="sxs-lookup"><span data-stu-id="8b8b1-260">To see how the summary works, also add the following markup and code right after the `<h1>Add a Movie</h1>` element on the page:</span></span>

[!code-cshtml[Main](entering-data/samples/sample11.cshtml)]

<span data-ttu-id="8b8b1-261">Par défaut, la méthode `Html.ValidationSummary` affiche tous les messages de validation dans une liste (élément `<ul>` qui se trouve à l’intérieur d’un élément `<div>`).</span><span class="sxs-lookup"><span data-stu-id="8b8b1-261">By default, the `Html.ValidationSummary` method displays all the validation messages in a list (a `<ul>` element that's inside a `<div>` element).</span></span> <span data-ttu-id="8b8b1-262">Comme avec la méthode `Html.ValidationMessage`, le balisage du résumé des validations est toujours rendu ; s’il n’y a pas d’erreurs, aucun élément de liste n’est rendu.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-262">As with the `Html.ValidationMessage` method, the markup for the validation summary is always rendered; if there are no errors, no list items are rendered.</span></span>

<span data-ttu-id="8b8b1-263">Le résumé peut être une autre façon d’afficher des messages de validation plutôt que d’utiliser la méthode `Html.ValidationMessage` pour afficher chaque erreur spécifique à un champ.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-263">The summary can be an alternative way to display validation messages instead of by using the `Html.ValidationMessage` method to display each field-specific error.</span></span> <span data-ttu-id="8b8b1-264">Vous pouvez aussi utiliser un résumé et les détails.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-264">Or you can use both a summary and the details.</span></span> <span data-ttu-id="8b8b1-265">Vous pouvez utiliser la méthode `Html.ValidationSummary` pour afficher une erreur générique, puis utiliser des appels de `Html.ValidationMessage` individuels pour afficher les détails.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-265">Or you can use the `Html.ValidationSummary` method to display a generic error and then use individual `Html.ValidationMessage` calls to display details.</span></span>

<span data-ttu-id="8b8b1-266">La page complète ressemble maintenant à l’exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="8b8b1-266">The complete page now looks like this example:</span></span>

[!code-cshtml[Main](entering-data/samples/sample12.cshtml)]

<span data-ttu-id="8b8b1-267">C'est tout !</span><span class="sxs-lookup"><span data-stu-id="8b8b1-267">That's it.</span></span> <span data-ttu-id="8b8b1-268">Vous pouvez maintenant tester la page en ajoutant un film, mais en conservant un ou plusieurs champs.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-268">You can now test the page by adding a movie but leaving out one or more of the fields.</span></span> <span data-ttu-id="8b8b1-269">Dans ce cas, vous voyez l’affichage d’erreur suivant :</span><span class="sxs-lookup"><span data-stu-id="8b8b1-269">When you do, you see the following error display:</span></span>

![Page Ajouter un film indiquant les messages d’erreur de validation](entering-data/_static/image5.png)

## <a name="styling-the-validation-error-messages"></a><span data-ttu-id="8b8b1-271">Stylisation des messages d’erreur de validation</span><span class="sxs-lookup"><span data-stu-id="8b8b1-271">Styling the Validation Error Messages</span></span>

<span data-ttu-id="8b8b1-272">Vous pouvez voir qu’il y a des messages d’erreur, mais qu’ils ne sont pas vraiment très bien.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-272">You can see that there are error messages, but they don't really stand out very well.</span></span> <span data-ttu-id="8b8b1-273">Toutefois, il existe un moyen simple de styliser les messages d’erreur.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-273">There's an easy way to style the error messages, though.</span></span>

<span data-ttu-id="8b8b1-274">Pour créer un style pour les messages d’erreur individuels qui sont affichés par `Html.ValidationMessage`, créez une classe de style CSS nommée `field-validation-error`.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-274">To style the individual error messages that are displayed by `Html.ValidationMessage`, create a CSS style class named `field-validation-error`.</span></span> <span data-ttu-id="8b8b1-275">Pour définir l’apparence du résumé des validations, créez une classe de style CSS nommée `validation-summary-errors`.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-275">To define the look for the validation summary, create a CSS style class named `validation-summary-errors`.</span></span>

<span data-ttu-id="8b8b1-276">Pour voir comment cette technique fonctionne, ajoutez un élément `<style>` à l’intérieur de la section `<head>` de la page.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-276">To see how this technique works, add a `<style>` element inside the `<head>` section of the page.</span></span> <span data-ttu-id="8b8b1-277">Définissez ensuite les classes de style nommées `field-validation-error` et `validation-summary-errors` qui contiennent les règles suivantes :</span><span class="sxs-lookup"><span data-stu-id="8b8b1-277">Then define style classes named `field-validation-error` and `validation-summary-errors` that contain the following rules:</span></span>

[!code-cshtml[Main](entering-data/samples/sample13.cshtml?highlight=4-17)]

<span data-ttu-id="8b8b1-278">Normalement, vous pouvez placer des informations de style dans un fichier *. CSS* distinct, mais pour des raisons de simplicité, vous pouvez les placer dans la page pour l’instant.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-278">Normally you'd probably put style information into a separate *.css* file, but for simplicity you can put them in the page for now.</span></span> <span data-ttu-id="8b8b1-279">(Plus loin dans ce didacticiel, vous allez déplacer les règles CSS dans un fichier *. CSS* distinct.)</span><span class="sxs-lookup"><span data-stu-id="8b8b1-279">(Later in this tutorial set, you'll move the CSS rules to a separate *.css* file.)</span></span>

<span data-ttu-id="8b8b1-280">En cas d’erreur de validation, la méthode `Html.ValidationMessage` restitue un élément `<span>` qui inclut `class="field-validation-error"`.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-280">If there's a validation error, the `Html.ValidationMessage` method renders a `<span>` element that includes `class="field-validation-error"`.</span></span> <span data-ttu-id="8b8b1-281">En ajoutant une définition de style pour cette classe, vous pouvez configurer l’apparence du message.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-281">By adding a style definition for that class, you can configure what the message looks like.</span></span> <span data-ttu-id="8b8b1-282">En cas d’erreur, la méthode `ValidationSummary` restitue de manière dynamique l’attribut `class="validation-summary-errors"`.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-282">If there are errors, the `ValidationSummary` method likewise dynamically renders the attribute `class="validation-summary-errors"`.</span></span>

<span data-ttu-id="8b8b1-283">Réexécutez la page et quittez délibérément quelques champs.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-283">Run the page again and deliberately leave out a couple of the fields.</span></span> <span data-ttu-id="8b8b1-284">Les erreurs sont désormais plus visibles.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-284">The errors are now more noticeable.</span></span> <span data-ttu-id="8b8b1-285">(En fait, ils sont sempiternels, mais il s’agit simplement de montrer ce que vous pouvez faire.)</span><span class="sxs-lookup"><span data-stu-id="8b8b1-285">(In fact, they're overdone, but that's just to show what you can do.)</span></span>

![Page Ajouter un film indiquant les erreurs de validation qui ont été stylisées](entering-data/_static/image6.png)

## <a name="adding-a-link-to-the-movies-page"></a><span data-ttu-id="8b8b1-287">Ajout d’un lien vers la page films</span><span class="sxs-lookup"><span data-stu-id="8b8b1-287">Adding a Link to the Movies Page</span></span>

<span data-ttu-id="8b8b1-288">Une dernière étape consiste à faciliter l’accès à la page *AddMovie* à partir de la liste des films d’origine.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-288">One final step is to make it convenient to get to the *AddMovie* page from the original movie listing.</span></span>

<span data-ttu-id="8b8b1-289">Ouvrez de nouveau la page *films* .</span><span class="sxs-lookup"><span data-stu-id="8b8b1-289">Open the *Movies* page again.</span></span> <span data-ttu-id="8b8b1-290">Après la balise `</div>` fermante qui suit le `WebGrid` Helper, ajoutez le balisage suivant :</span><span class="sxs-lookup"><span data-stu-id="8b8b1-290">After the closing `</div>` tag that follows the `WebGrid` helper, add the following markup:</span></span>

[!code-cshtml[Main](entering-data/samples/sample14.cshtml)]

<span data-ttu-id="8b8b1-291">Comme vous l’avez vu précédemment, ASP.NET interprète l’opérateur `~` comme la racine du site Web.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-291">As you saw before, ASP.NET interprets the `~` operator as the root of the website.</span></span> <span data-ttu-id="8b8b1-292">Vous n’êtes pas obligé d’utiliser l’opérateur `~` ; vous pouvez utiliser le balisage `<a href="./AddMovie">Add a movie</a>` ou d’une autre façon pour définir le chemin d’accès compréhensible par le langage HTML.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-292">You don't have to use the `~` operator; you could use the markup `<a href="./AddMovie">Add a movie</a>` or some other way to define the path that HTML understands.</span></span> <span data-ttu-id="8b8b1-293">Toutefois, l’opérateur `~` est une bonne approche générale lorsque vous créez des liens pour les pages Razor, car cela rend le site plus flexible. Si vous déplacez la page actuelle vers un sous-dossier, le lien s’affiche toujours dans la page *AddMovie* .</span><span class="sxs-lookup"><span data-stu-id="8b8b1-293">But the `~` operator is a good general approach when you create links for Razor pages, because it makes the site more flexible — if you move the current page to a subfolder, the link will still go to the *AddMovie* page.</span></span> <span data-ttu-id="8b8b1-294">(N’oubliez pas que l’opérateur `~` fonctionne uniquement dans les pages *. cshtml* .</span><span class="sxs-lookup"><span data-stu-id="8b8b1-294">(Remember that the `~` operator only works in *.cshtml* pages.</span></span> <span data-ttu-id="8b8b1-295">ASP.NET le comprend, mais ce n’est pas un code HTML standard.)</span><span class="sxs-lookup"><span data-stu-id="8b8b1-295">ASP.NET understands it, but it's not standard HTML.)</span></span>

<span data-ttu-id="8b8b1-296">Lorsque vous avez terminé, exécutez la page *films* .</span><span class="sxs-lookup"><span data-stu-id="8b8b1-296">When you're done, run the *Movies* page.</span></span> <span data-ttu-id="8b8b1-297">Elle doit ressembler à cette page :</span><span class="sxs-lookup"><span data-stu-id="8b8b1-297">It will look like this page:</span></span>

![Page films avec lien vers la page Ajouter des films](entering-data/_static/image7.png)

<span data-ttu-id="8b8b1-299">Cliquez sur le lien **Ajouter un film** pour vous assurer qu’il accède à la page *AddMovie* .</span><span class="sxs-lookup"><span data-stu-id="8b8b1-299">Click the **Add a movie** link to make sure that it goes to the *AddMovie* page.</span></span>

## <a name="coming-up-next"></a><span data-ttu-id="8b8b1-300">À venir suivant</span><span class="sxs-lookup"><span data-stu-id="8b8b1-300">Coming Up Next</span></span>

<span data-ttu-id="8b8b1-301">Dans le didacticiel suivant, vous apprendrez comment permettre aux utilisateurs de modifier des données qui se trouvent déjà dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-301">In the next tutorial, you'll learn how to let users edit data that's already in the database.</span></span>

## <a name="complete-listing-for-addmovie-page"></a><span data-ttu-id="8b8b1-302">Liste complète de la page AddMovie</span><span class="sxs-lookup"><span data-stu-id="8b8b1-302">Complete Listing for AddMovie Page</span></span>

[!code-cshtml[Main](entering-data/samples/sample15.cshtml)]

## <a name="additional-resources"></a><span data-ttu-id="8b8b1-303">Ressources supplémentaires</span><span class="sxs-lookup"><span data-stu-id="8b8b1-303">Additional Resources</span></span>

- [<span data-ttu-id="8b8b1-304">Présentation de la programmation Web ASP.NET à l’aide de la syntaxe Razor</span><span class="sxs-lookup"><span data-stu-id="8b8b1-304">Introduction to ASP.NET Web Programming Using the Razor Syntax</span></span>](https://go.microsoft.com/fwlink/?LinkID=202890)
- <span data-ttu-id="8b8b1-305">[Instruction SQL INSERT INTO](http://www.w3schools.com/sql/sql_insert.asp) sur le site W3Schools</span><span class="sxs-lookup"><span data-stu-id="8b8b1-305">[SQL INSERT INTO Statement](http://www.w3schools.com/sql/sql_insert.asp) on the W3Schools site</span></span>
- <span data-ttu-id="8b8b1-306">[Validation de l’entrée d’utilisateur dans les Sites pages Web ASP.net](https://go.microsoft.com/fwlink/?LinkId=253002).</span><span class="sxs-lookup"><span data-stu-id="8b8b1-306">[Validating User Input in ASP.NET Web Pages Sites](https://go.microsoft.com/fwlink/?LinkId=253002).</span></span> <span data-ttu-id="8b8b1-307">Plus d’informations sur l’utilisation du programme d’assistance `Validation`.</span><span class="sxs-lookup"><span data-stu-id="8b8b1-307">More information about working with the `Validation` helper.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="8b8b1-308">[Précédent](form-basics.md)
> [Suivant](updating-data.md)</span><span class="sxs-lookup"><span data-stu-id="8b8b1-308">[Previous](form-basics.md)
[Next](updating-data.md)</span></span>

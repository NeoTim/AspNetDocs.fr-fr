---
uid: web-pages/overview/ui-layouts-and-themes/9-working-with-images
title: Utilisation d’images dans un site pages Web ASP.NET (Razor) | Microsoft Docs
author: Rick-Anderson
description: Ce chapitre vous montre comment ajouter, afficher et manipuler des images (redimensionner, retourner et ajouter des filigranes) dans votre site Web.
ms.author: riande
ms.date: 02/20/2014
ms.assetid: 778c4e58-4372-4d25-bab9-aec4a8d8e38d
msc.legacyurl: /web-pages/overview/ui-layouts-and-themes/9-working-with-images
msc.type: authoredcontent
ms.openlocfilehash: 53514b3c314fc182a43c82974ffcfa8158a636a1
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78631858"
---
# <a name="working-with-images-in-an-aspnet-web-pages-razor-site"></a><span data-ttu-id="2ce1a-103">Utilisation d’images dans un site pages Web ASP.NET (Razor)</span><span class="sxs-lookup"><span data-stu-id="2ce1a-103">Working with Images in an ASP.NET Web Pages (Razor) Site</span></span>

<span data-ttu-id="2ce1a-104">par [Tom FitzMacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="2ce1a-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="2ce1a-105">Cet article explique comment ajouter, afficher et manipuler des images (redimensionner, retourner et ajouter des filigranes) sur un site Web pages Web ASP.NET (Razor).</span><span class="sxs-lookup"><span data-stu-id="2ce1a-105">This article shows you how to add, display, and manipulate images (resize, flip, and add watermarks) in an ASP.NET Web Pages (Razor) website.</span></span>
> 
> <span data-ttu-id="2ce1a-106">Ce que vous allez apprendre :</span><span class="sxs-lookup"><span data-stu-id="2ce1a-106">What you'll learn:</span></span>
> 
> - <span data-ttu-id="2ce1a-107">Comment ajouter dynamiquement une image à une page.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-107">How to add an image to a page dynamically.</span></span>
> - <span data-ttu-id="2ce1a-108">Comment permettre aux utilisateurs de télécharger une image.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-108">How to let users upload an image.</span></span>
> - <span data-ttu-id="2ce1a-109">Comment redimensionner une image.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-109">How to resize an image.</span></span>
> - <span data-ttu-id="2ce1a-110">Comment retourner ou faire pivoter une image.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-110">How to flip or rotate an image.</span></span>
> - <span data-ttu-id="2ce1a-111">Comment ajouter un filigrane à une image.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-111">How to add a watermark to an image.</span></span>
> - <span data-ttu-id="2ce1a-112">Comment utiliser une image en tant que filigrane.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-112">How to use an image as a watermark.</span></span>
> 
> <span data-ttu-id="2ce1a-113">Voici les fonctionnalités de programmation ASP.NET présentées dans l’article :</span><span class="sxs-lookup"><span data-stu-id="2ce1a-113">These are the ASP.NET programming features introduced in the article:</span></span>
> 
> - <span data-ttu-id="2ce1a-114">Le programme d’assistance `WebImage`.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-114">The `WebImage` helper.</span></span>
> - <span data-ttu-id="2ce1a-115">Objet `Path`, qui fournit des méthodes qui vous permettent de manipuler les noms de chemin d’accès et de fichier.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-115">The `Path` object, which provides methods that let you manipulate path and file names.</span></span>
>   
> 
> ## <a name="software-versions-used-in-the-tutorial"></a><span data-ttu-id="2ce1a-116">Versions logicielles utilisées dans le didacticiel</span><span class="sxs-lookup"><span data-stu-id="2ce1a-116">Software versions used in the tutorial</span></span>
> 
> 
> - <span data-ttu-id="2ce1a-117">Pages Web ASP.NET (Razor) 2</span><span class="sxs-lookup"><span data-stu-id="2ce1a-117">ASP.NET Web Pages (Razor) 2</span></span>
> - <span data-ttu-id="2ce1a-118">WebMatrix 2</span><span class="sxs-lookup"><span data-stu-id="2ce1a-118">WebMatrix 2</span></span>
>   
> 
> <span data-ttu-id="2ce1a-119">Ce didacticiel fonctionne également avec WebMatrix 3.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-119">This tutorial also works with WebMatrix 3.</span></span>

<a id="Adding_an_Image"></a>
## <a name="adding-an-image-to-a-web-page-dynamically"></a><span data-ttu-id="2ce1a-120">Ajout dynamique d’une image à une page Web</span><span class="sxs-lookup"><span data-stu-id="2ce1a-120">Adding an Image to a Web Page Dynamically</span></span>

<span data-ttu-id="2ce1a-121">Vous pouvez ajouter des images à votre site Web et à des pages individuelles pendant que vous développez le site Web.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-121">You can add images to your website and to individual pages while you're developing the website.</span></span> <span data-ttu-id="2ce1a-122">Vous pouvez également permettre aux utilisateurs de charger des images, ce qui peut être utile pour des tâches telles que l’ajout d’une photo de profil.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-122">You can also let users upload images, which might be useful for tasks like letting them add a profile photo.</span></span>

<span data-ttu-id="2ce1a-123">Si une image est déjà disponible sur votre site et que vous souhaitez simplement l’afficher sur une page, vous utilisez un élément de `<img>` HTML comme suit :</span><span class="sxs-lookup"><span data-stu-id="2ce1a-123">If an image is already available on your site and you just want to display it on a page, you use an HTML `<img>` element like this:</span></span>

[!code-html[Main](9-working-with-images/samples/sample1.html)]

<span data-ttu-id="2ce1a-124">Parfois, cependant, vous devez être en mesure d’afficher des images de &#8212; manière dynamique, mais vous ne savez pas quelle image afficher tant que la page n’est pas en cours d’exécution.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-124">Sometimes, though, you need to be able to display images dynamically &#8212; that is, you don't know what image to display until the page is running.</span></span>

<span data-ttu-id="2ce1a-125">La procédure décrite dans cette section montre comment afficher une image à la volée dans laquelle les utilisateurs spécifient le nom du fichier image à partir d’une liste de noms d’images.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-125">The procedure in this section shows how to display an image on the fly where users specify the image file name from a list of image names.</span></span> <span data-ttu-id="2ce1a-126">Ils sélectionnent le nom de l’image dans une liste déroulante, et lorsqu’ils envoient la page, l’image qu’ils ont sélectionnée s’affiche.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-126">They select the name of the image from a drop-down list, and when they submit the page, the image they selected is displayed.</span></span>

<span data-ttu-id="2ce1a-127">![image](9-working-with-images/_static/image1.jpg "ch9images-1. jpg")</span><span class="sxs-lookup"><span data-stu-id="2ce1a-127">![[image]](9-working-with-images/_static/image1.jpg "ch9images-1.jpg")</span></span>

1. <span data-ttu-id="2ce1a-128">Dans WebMatrix, créez un nouveau site Web.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-128">In WebMatrix, create a new website.</span></span>
2. <span data-ttu-id="2ce1a-129">Ajoutez une nouvelle page nommée *DynamicImage. cshtml*.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-129">Add a new page named *DynamicImage.cshtml*.</span></span>
3. <span data-ttu-id="2ce1a-130">Dans le dossier racine du site Web, ajoutez un nouveau dossier et nommez-le *images*.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-130">In the root folder of the website, add a new folder and name it *images*.</span></span>
4. <span data-ttu-id="2ce1a-131">Ajoutez quatre images au dossier *images* que vous venez de créer.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-131">Add four images to the *images* folder you just created.</span></span> <span data-ttu-id="2ce1a-132">(Toutes les images que vous avez pratiques peuvent faire, mais elles doivent tenir sur une page.) Renommez les images *PHOTO1. jpg*, *PHOTO2. jpg*, *Photo3. jpg*et *Photo4. jpg*.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-132">(Any images you have handy will do, but they should fit onto a page.) Rename the images *Photo1.jpg*, *Photo2.jpg*, *Photo3.jpg*, and *Photo4.jpg*.</span></span> <span data-ttu-id="2ce1a-133">(Vous n’allez pas utiliser *Photo4. jpg* dans cette procédure, mais vous l’utiliserez plus loin dans cet article.)</span><span class="sxs-lookup"><span data-stu-id="2ce1a-133">(You won't use *Photo4.jpg* in this procedure, but you'll use it later in the article.)</span></span>
5. <span data-ttu-id="2ce1a-134">Vérifiez que les quatre images ne sont pas marquées en lecture seule.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-134">Verify that the four images are not marked as read-only.</span></span>
6. <span data-ttu-id="2ce1a-135">Remplacez le contenu existant de la page par ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="2ce1a-135">Replace the existing content in the page with the following:</span></span>

    [!code-cshtml[Main](9-working-with-images/samples/sample2.cshtml)]

    <span data-ttu-id="2ce1a-136">Le corps de la page contient une liste déroulante (élément `<select>`) nommée `photoChoice`.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-136">The body of the page has a drop-down list (a `<select>` element) that's named `photoChoice`.</span></span> <span data-ttu-id="2ce1a-137">La liste comporte trois options, et l’attribut `value` de chaque option de liste a le nom de l’une des images que vous placez dans le dossier *images* .</span><span class="sxs-lookup"><span data-stu-id="2ce1a-137">The list has three options, and the `value` attribute of each list option has the name of one of the images that you put in the *images* folder.</span></span> <span data-ttu-id="2ce1a-138">En fait, la liste permet à l’utilisateur de sélectionner un nom convivial tel que &quot;photo 1&quot;, et il transmet ensuite le nom du fichier *. jpg* lorsque la page est envoyée.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-138">Essentially, the list lets the user select a friendly name like &quot;Photo 1&quot;, and it then passes the *.jpg* file name when the page is submitted.</span></span>

    <span data-ttu-id="2ce1a-139">Dans le code, vous pouvez récupérer la sélection de l’utilisateur (en d’autres termes, le nom du fichier image) à partir de la liste en lisant `Request["photoChoice"]`.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-139">In the code, you can get the user's selection (in other words, the image file name) from the list by reading `Request["photoChoice"]`.</span></span> <span data-ttu-id="2ce1a-140">Vous voyez tout d’abord s’il existe une sélection.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-140">You first see if there's a selection at all.</span></span> <span data-ttu-id="2ce1a-141">Si c’est le cas, vous construisez un chemin d’accès pour l’image qui se compose du nom du dossier pour les images et du nom du fichier image de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-141">If there is, you construct a path for the image that consists of the name of the folder for the images and the user's image file name.</span></span> <span data-ttu-id="2ce1a-142">(Si vous avez essayé de créer un chemin d’accès mais qu’il n’y a rien dans `Request["photoChoice"]`, vous obtenez une erreur.) Cela aboutit à un chemin d’accès relatif comme celui-ci :</span><span class="sxs-lookup"><span data-stu-id="2ce1a-142">(If you tried to construct a path but there was nothing in `Request["photoChoice"]`, you'd get an error.) This results in a relative path like this:</span></span>

    <span data-ttu-id="2ce1a-143">*images/PHOTO1. jpg*</span><span class="sxs-lookup"><span data-stu-id="2ce1a-143">*images/Photo1.jpg*</span></span>

    <span data-ttu-id="2ce1a-144">Le chemin d’accès est stocké dans une variable nommée `imagePath` dont vous aurez besoin plus tard dans la page.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-144">The path is stored in variable named `imagePath` that you'll need later in the page.</span></span>

    <span data-ttu-id="2ce1a-145">Dans le corps, il y a également un élément `<img>` qui est utilisé pour afficher l’image choisie par l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-145">In the body, there's also an `<img>` element that's used to display the image that the user picked.</span></span> <span data-ttu-id="2ce1a-146">L’attribut `src` n’est pas défini sur un nom de fichier ou une URL, comme vous le feriez pour afficher un élément statique.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-146">The `src` attribute isn't set to a file name or URL, like you'd do to display a static element.</span></span> <span data-ttu-id="2ce1a-147">Au lieu de cela, il est défini sur `@imagePath`, ce qui signifie qu’il obtient sa valeur à partir du chemin d’accès que vous avez défini dans le code.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-147">Instead, it's set to `@imagePath`, meaning that it gets its value from the path you set in code.</span></span>

    <span data-ttu-id="2ce1a-148">La première fois que la page s’exécute, cependant, il n’y a aucune image à afficher, car l’utilisateur n’a rien sélectionné.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-148">The first time that the page runs, though, there's no image to display, because the user hasn't selected anything.</span></span> <span data-ttu-id="2ce1a-149">Cela signifie généralement que l’attribut `src` est vide et que l’image s’affiche comme une&quot; rouge &quot;x (ou tout ce que le navigateur restitue lorsqu’il ne peut pas trouver d’image).</span><span class="sxs-lookup"><span data-stu-id="2ce1a-149">This would normally mean that the `src` attribute would be empty and the image would show up as a red &quot;x&quot; (or whatever the browser renders when it can't find an image).</span></span> <span data-ttu-id="2ce1a-150">Pour éviter cela, placez l’élément `<img>` dans un bloc `if` qui teste si la variable `imagePath` contient des éléments.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-150">To prevent this, you put the `<img>` element in an `if` block that tests to see whether the `imagePath` variable has anything in it.</span></span> <span data-ttu-id="2ce1a-151">Si l’utilisateur a effectué une sélection, `imagePath` contient le chemin d’accès.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-151">If the user made a selection, `imagePath` contains the path.</span></span> <span data-ttu-id="2ce1a-152">Si l’utilisateur n’a pas sélectionné d’image ou s’il s’agit de la première fois que la page est affichée, l’élément `<img>` n’est même pas restitué.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-152">If the user didn't pick an image or if this is the first time the page is displayed, the `<img>` element isn't even rendered.</span></span>
7. <span data-ttu-id="2ce1a-153">Enregistrez le fichier et exécutez la page dans un navigateur.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-153">Save the file and run the page in a browser.</span></span> <span data-ttu-id="2ce1a-154">(Assurez-vous que la page est sélectionnée dans l’espace de travail **fichiers** avant de l’exécuter.)</span><span class="sxs-lookup"><span data-stu-id="2ce1a-154">(Make sure the page is selected in the **Files** workspace before you run it.)</span></span>
8. <span data-ttu-id="2ce1a-155">Sélectionnez une image dans la liste déroulante, puis cliquez sur **exemple d’image**.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-155">Select an image from the drop-down list and then click **Sample Image**.</span></span> <span data-ttu-id="2ce1a-156">Assurez-vous que vous voyez différentes images pour différents choix.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-156">Make sure that you see different images for different choices.</span></span>

<a id="Uploading_an_Image"></a>
## <a name="uploading-an-image"></a><span data-ttu-id="2ce1a-157">Chargement d’une image</span><span class="sxs-lookup"><span data-stu-id="2ce1a-157">Uploading an Image</span></span>

<span data-ttu-id="2ce1a-158">L’exemple précédent vous a montré comment afficher une image de manière dynamique, mais elle fonctionnait uniquement avec des images qui figuraient déjà sur votre site Web.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-158">The previous example showed you how to display an image dynamically, but it worked only with images that were already on your website.</span></span> <span data-ttu-id="2ce1a-159">Cette procédure montre comment permettre aux utilisateurs de charger une image, qui est ensuite affichée sur la page.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-159">This procedure shows how to let users upload an image, which is then displayed on the page.</span></span> <span data-ttu-id="2ce1a-160">Dans ASP.NET, vous pouvez manipuler les images à la volée à l’aide de l’application auxiliaire `WebImage`, qui contient des méthodes qui vous permettent de créer, manipuler et enregistrer des images.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-160">In ASP.NET, you can manipulate images on the fly using the `WebImage` helper, which has methods that let you create, manipulate, and save images.</span></span> <span data-ttu-id="2ce1a-161">Le `WebImage` Helper prend en charge tous les types de fichiers d’image Web courants, y compris *. jpg*, *. png*et *. bmp*.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-161">The `WebImage` helper supports all the common web image file types, including *.jpg*, *.png*, and *.bmp*.</span></span> <span data-ttu-id="2ce1a-162">Tout au long de cet article, vous allez utiliser des images *. jpg* , mais vous pouvez utiliser n’importe quel type d’image.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-162">Throughout this article, you'll use *.jpg* images, but you can use any of the image types.</span></span>

<span data-ttu-id="2ce1a-163">![image](9-working-with-images/_static/image2.jpg "ch9images-2. jpg")</span><span class="sxs-lookup"><span data-stu-id="2ce1a-163">![[image]](9-working-with-images/_static/image2.jpg "ch9images-2.jpg")</span></span>

1. <span data-ttu-id="2ce1a-164">Ajoutez une nouvelle page et nommez-la *UploadImage. cshtml*.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-164">Add a new page and name it *UploadImage.cshtml*.</span></span>
2. <span data-ttu-id="2ce1a-165">Remplacez le contenu existant de la page par ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="2ce1a-165">Replace the existing content in the page with the following:</span></span> 

    [!code-cshtml[Main](9-working-with-images/samples/sample3.cshtml)]

    <span data-ttu-id="2ce1a-166">Le corps du texte a un élément `<input type="file">`, qui permet aux utilisateurs de sélectionner un fichier à télécharger.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-166">The body of the text has an `<input type="file">` element, which lets users select a file to upload.</span></span> <span data-ttu-id="2ce1a-167">Lorsqu’ils cliquent sur **Envoyer**, le fichier qu’ils ont choisi est soumis en même temps que le formulaire.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-167">When they click **Submit**, the file they picked is submitted along with the form.</span></span>

    <span data-ttu-id="2ce1a-168">Pour obtenir l’image chargée, vous utilisez le programme d’assistance `WebImage`, qui présente toutes sortes de méthodes utiles pour travailler avec des images.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-168">To get the uploaded image, you use the `WebImage` helper, which has all sorts of useful methods for working with images.</span></span> <span data-ttu-id="2ce1a-169">Plus précisément, vous utilisez `WebImage.GetImageFromRequest` pour obtenir l’image chargée (le cas échéant) et la stocker dans une variable nommée `photo`.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-169">Specifically, you use `WebImage.GetImageFromRequest` to get the uploaded image (if any) and store it in a variable named `photo`.</span></span>

    <span data-ttu-id="2ce1a-170">Dans cet exemple, une grande partie du travail implique l’obtention et la définition des noms de fichier et de chemin d’accès.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-170">A lot of the work in this example involves getting and setting file and path names.</span></span> <span data-ttu-id="2ce1a-171">Le problème est que vous souhaitez obtenir le nom (et simplement le nom) de l’image que l’utilisateur a téléchargée, puis créer un nouveau chemin d’accès pour l’emplacement où vous allez stocker l’image.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-171">The issue is that you want to get the name (and just the name) of the image that the user uploaded, and then create a new path for where you're going to store the image.</span></span> <span data-ttu-id="2ce1a-172">Étant donné que les utilisateurs peuvent télécharger plusieurs images portant le même nom, vous utilisez un peu de code supplémentaire pour créer des noms uniques et vous assurer que les utilisateurs ne remplacent pas les images existantes.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-172">Because users could potentially upload multiple images that have the same name, you use a bit of extra code to create unique names and make sure that users don't overwrite existing pictures.</span></span>

    <span data-ttu-id="2ce1a-173">Si une image a réellement été chargée (le test `if (photo != null)`), vous récupérez le nom de l’image à partir de la propriété de `FileName` de l’image.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-173">If an image actually has been uploaded (the test `if (photo != null)`), you get the image name from the image's `FileName` property.</span></span> <span data-ttu-id="2ce1a-174">Lorsque l’utilisateur charge l’image, `FileName` contient le nom d’origine de l’utilisateur, qui inclut le chemin d’accès à partir de l’ordinateur de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-174">When the user uploads the image, `FileName` contains the user's original name, which includes the path from the user's computer.</span></span> <span data-ttu-id="2ce1a-175">Elle peut se présenter comme suit :</span><span class="sxs-lookup"><span data-stu-id="2ce1a-175">It might look like this:</span></span>

    <span data-ttu-id="2ce1a-176">*C:\Users\Joe\Pictures\SamplePhoto1.jpg*</span><span class="sxs-lookup"><span data-stu-id="2ce1a-176">*C:\Users\Joe\Pictures\SamplePhoto1.jpg*</span></span>

    <span data-ttu-id="2ce1a-177">Vous ne souhaitez pas toutes ces informations de chemin &#8212; d’accès, bien que vous souhaitiez simplement le nom de fichier réel (*SamplePhoto1. jpg*).</span><span class="sxs-lookup"><span data-stu-id="2ce1a-177">You don't want all that path information, though &#8212; you just want the actual file name (*SamplePhoto1.jpg*).</span></span> <span data-ttu-id="2ce1a-178">Vous pouvez supprimer uniquement le fichier d’un chemin d’accès à l’aide de la méthode `Path.GetFileName`, comme suit :</span><span class="sxs-lookup"><span data-stu-id="2ce1a-178">You can strip out just the file from a path by using the `Path.GetFileName` method, like this:</span></span>

    [!code-csharp[Main](9-working-with-images/samples/sample4.cs)]

    <span data-ttu-id="2ce1a-179">Vous créez ensuite un nom de fichier unique en ajoutant un GUID au nom d’origine.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-179">You then create a new unique file name by adding a GUID to the original name.</span></span> <span data-ttu-id="2ce1a-180">(Pour plus d’informations sur les GUID, consultez [à propos des GUID](#SB_AboutGUIDs) plus loin dans cet article.) Ensuite, vous créez un chemin d’accès complet que vous pouvez utiliser pour enregistrer l’image.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-180">(For more about GUIDs, see [About GUIDs](#SB_AboutGUIDs) later in this article.) Then you construct a complete path that you can use to save the image.</span></span> <span data-ttu-id="2ce1a-181">Le chemin d’enregistrement est constitué du nouveau nom de fichier, du dossier (images) et de l’emplacement du site Web actuel.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-181">The save path is made up of the new file name, the folder (images), and the current website location.</span></span>

    > [!NOTE]
    > <span data-ttu-id="2ce1a-182">Pour que votre code enregistre des fichiers dans le dossier *images* , l’application a besoin d’autorisations en lecture-écriture pour ce dossier.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-182">In order for your code to save files in the *images* folder, the application needs read-write permissions for that folder.</span></span> <span data-ttu-id="2ce1a-183">Sur votre ordinateur de développement, ce n’est généralement pas un problème.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-183">On your development computer this is not typically an issue.</span></span> <span data-ttu-id="2ce1a-184">Toutefois, lorsque vous publiez votre site sur le serveur Web d’un fournisseur d’hébergement, vous devrez peut-être définir explicitement ces autorisations.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-184">However, when you publish your site to a hosting provider's web server, you might need to explicitly set those permissions.</span></span> <span data-ttu-id="2ce1a-185">Si vous exécutez ce code sur le serveur d’un fournisseur d’hébergement et que vous obtenez des erreurs, contactez le fournisseur d’hébergement pour savoir comment définir ces autorisations.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-185">If you run this code on a hosting provider's server and get errors, check with the hosting provider to find out how to set those permissions.</span></span>

    <span data-ttu-id="2ce1a-186">Enfin, vous transmettez le chemin d’enregistrement à la méthode `Save` de l’application auxiliaire `WebImage`.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-186">Finally, you pass the save path to the `Save` method of the `WebImage` helper.</span></span> <span data-ttu-id="2ce1a-187">Cela stocke l’image chargée sous son nouveau nom.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-187">This stores the uploaded image under its new name.</span></span> <span data-ttu-id="2ce1a-188">La méthode Save ressemble à ceci : `photo.Save(@"~\" + imagePath)`.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-188">The save method looks like this: `photo.Save(@"~\" + imagePath)`.</span></span> <span data-ttu-id="2ce1a-189">Le chemin d’accès complet est ajouté à `@"~\"`, qui correspond à l’emplacement du site Web actuel.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-189">The complete path is appended to `@"~\"`, which is the current website location.</span></span> <span data-ttu-id="2ce1a-190">(Pour plus d’informations sur l’opérateur `~`, consultez [Introduction à la programmation Web ASP.net à l’aide de la syntaxe Razor](https://go.microsoft.com/fwlink/?LinkId=202890#ID_WorkingWithFileAndFolderPaths).)</span><span class="sxs-lookup"><span data-stu-id="2ce1a-190">(For information about the `~` operator, see [Introduction to ASP.NET Web Programming Using the Razor Syntax](https://go.microsoft.com/fwlink/?LinkId=202890#ID_WorkingWithFileAndFolderPaths).)</span></span>

    <span data-ttu-id="2ce1a-191">Comme dans l’exemple précédent, le corps de la page contient un élément `<img>` pour afficher l’image.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-191">As in the previous example, the body of the page contains an `<img>` element to display the image.</span></span> <span data-ttu-id="2ce1a-192">Si `imagePath` a été défini, l’élément `<img>` est restitué et son attribut `src` est défini sur la valeur `imagePath`.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-192">If `imagePath` has been set, the `<img>` element is rendered and its `src` attribute is set to the `imagePath` value.</span></span>
3. <span data-ttu-id="2ce1a-193">Exécutez la page dans un navigateur.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-193">Run the page in a browser.</span></span>
4. <span data-ttu-id="2ce1a-194">Téléchargez une image et assurez-vous qu’elle est affichée dans la page.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-194">Upload an image and make sure it's displayed in the page.</span></span>
5. <span data-ttu-id="2ce1a-195">Dans votre site, ouvrez le dossier *images* .</span><span class="sxs-lookup"><span data-stu-id="2ce1a-195">In your site, open the *images* folder.</span></span> <span data-ttu-id="2ce1a-196">Vous voyez qu’un nouveau fichier a été ajouté, dont le nom de fichier ressemble à ceci ::</span><span class="sxs-lookup"><span data-stu-id="2ce1a-196">You see that a new file has been added whose file name looks something like this::</span></span> 

    <span data-ttu-id="2ce1a-197">*45ea4527-7ddd-4965-b9ca-c6444982b342\_MyPhoto. png*</span><span class="sxs-lookup"><span data-stu-id="2ce1a-197">*45ea4527-7ddd-4965-b9ca-c6444982b342\_MyPhoto.png*</span></span>

    <span data-ttu-id="2ce1a-198">Il s’agit de l’image que vous avez téléchargée avec un GUID préfixé au nom.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-198">This is the image that you uploaded with a GUID prefixed to the name.</span></span> <span data-ttu-id="2ce1a-199">(Votre propre fichier aura un GUID différent et est probablement nommé autre chose que *myphoto. png*.)</span><span class="sxs-lookup"><span data-stu-id="2ce1a-199">(Your own file will have a different GUID and probably is named something different than *MyPhoto.png*.)</span></span>

> [!TIP] 
> 
> <a id="SB_AboutGUIDs"></a>
> ### <a name="about-guids"></a><span data-ttu-id="2ce1a-200">À propos des GUID</span><span class="sxs-lookup"><span data-stu-id="2ce1a-200">About GUIDs</span></span>
> 
> <span data-ttu-id="2ce1a-201">Un GUID (identificateur global unique) est un identificateur qui est généralement rendu dans un format comme suit : `936DA01F-9ABD-4d9d-80C7-02AF85C822A8`.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-201">A GUID (globally-unique ID) is an identifier that's usually rendered in a format like this: `936DA01F-9ABD-4d9d-80C7-02AF85C822A8`.</span></span> <span data-ttu-id="2ce1a-202">Les chiffres et les lettres (à partir de A-F) diffèrent pour chaque GUID, mais ils suivent tous le modèle d’utilisation de groupes de 8-4-4-4-12 caractères.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-202">The numbers and letters (from A-F) differ for each GUID, but they all follow the pattern of using groups of 8-4-4-4-12 characters.</span></span> <span data-ttu-id="2ce1a-203">(Techniquement, un GUID est un nombre de 16 octets/128 bits.) Lorsque vous avez besoin d’un GUID, vous pouvez appeler du code spécialisé qui génère un GUID pour vous.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-203">(Technically, a GUID is a 16-byte/128-bit number.) When you need a GUID, you can call specialized code that generates a GUID for you.</span></span> <span data-ttu-id="2ce1a-204">L’idée derrière les GUID est qu’entre l’énorme taille du nombre (3,4 x 10<sup>38</sup>) et l’algorithme pour sa génération, le nombre résultant est pratiquement garanti être l’un de ces types.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-204">The idea behind GUIDs is that between the enormous size of the number (3.4 x 10<sup>38</sup>) and the algorithm for generating it, the resulting number is virtually guaranteed to be one of a kind.</span></span> <span data-ttu-id="2ce1a-205">Les GUID sont donc un bon moyen de générer des noms pour les choses quand vous devez vous assurer que vous n’utiliserez pas deux fois le même nom.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-205">GUIDs therefore are a good way to generate names for things when you must guarantee that you won't use the same name twice.</span></span> <span data-ttu-id="2ce1a-206">L’inconvénient, bien sûr, est que les GUID ne sont pas particulièrement conviviaux. ils ont donc tendance à être utilisés lorsque le nom est utilisé uniquement dans le code.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-206">The downside, of course, is that GUIDs aren't particularly user friendly, so they tend to be used when the name is used only in code.</span></span>

<a id="Resizing_an_Image"></a>
## <a name="resizing-an-image"></a><span data-ttu-id="2ce1a-207">Redimensionnement d'une image</span><span class="sxs-lookup"><span data-stu-id="2ce1a-207">Resizing an Image</span></span>

<span data-ttu-id="2ce1a-208">Si votre site Web accepte les images d’un utilisateur, vous souhaiterez peut-être redimensionner les images avant de les afficher ou de les enregistrer.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-208">If your website accepts images from a user, you might want to resize the images before you display or save them.</span></span> <span data-ttu-id="2ce1a-209">Vous pouvez à nouveau utiliser le programme d’assistance `WebImage` pour ce.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-209">You can again use the `WebImage` helper for this.</span></span>

<span data-ttu-id="2ce1a-210">Cette procédure montre comment redimensionner une image chargée pour créer une miniature, puis enregistrer la miniature et l’image d’origine dans le site Web.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-210">This procedure shows how to resize an uploaded image to create a thumbnail and then save the thumbnail and original image in the website.</span></span> <span data-ttu-id="2ce1a-211">Vous affichez la miniature sur la page et utilisez un lien hypertexte pour rediriger les utilisateurs vers l’image en taille réelle.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-211">You display the thumbnail on the page and use a hyperlink to redirect users to the full-sized image.</span></span>

<span data-ttu-id="2ce1a-212">![image](9-working-with-images/_static/image3.jpg "ch9images-3. jpg")</span><span class="sxs-lookup"><span data-stu-id="2ce1a-212">![[image]](9-working-with-images/_static/image3.jpg "ch9images-3.jpg")</span></span>

1. <span data-ttu-id="2ce1a-213">Ajoutez une nouvelle page nommée *thumbnail. cshtml*.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-213">Add a new page named *Thumbnail.cshtml*.</span></span>
2. <span data-ttu-id="2ce1a-214">Dans le dossier *images* , créez un sous-dossier nommé *thumbs*.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-214">In the *images* folder, create a subfolder named *thumbs*.</span></span>
3. <span data-ttu-id="2ce1a-215">Remplacez le contenu existant de la page par ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="2ce1a-215">Replace the existing content in the page with the following:</span></span> 

    [!code-cshtml[Main](9-working-with-images/samples/sample5.cshtml)]

    <span data-ttu-id="2ce1a-216">Ce code est similaire au code de l’exemple précédent.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-216">This code is similar to the code from the previous example.</span></span> <span data-ttu-id="2ce1a-217">La différence est que ce code enregistre l’image deux fois, une fois normalement et une fois que vous avez créé une copie miniature de l’image.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-217">The difference is that this code saves the image twice, once normally and once after you create a thumbnail copy of the image.</span></span> <span data-ttu-id="2ce1a-218">Tout d’abord, vous récupérez l’image téléchargée et vous l’enregistrez dans le dossier *images* .</span><span class="sxs-lookup"><span data-stu-id="2ce1a-218">First you get the uploaded image and save it in the *images* folder.</span></span> <span data-ttu-id="2ce1a-219">Vous construisez ensuite un nouveau chemin d’accès pour l’image miniature.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-219">You then construct a new path for the thumbnail image.</span></span> <span data-ttu-id="2ce1a-220">Pour créer réellement la miniature, vous appelez la méthode `Resize` de l’application d’assistance `WebImage` pour créer une image de 60 pixels par 60 pixels.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-220">To actually create the thumbnail, you call the `WebImage` helper's `Resize` method to create a 60-pixel by 60-pixel image.</span></span> <span data-ttu-id="2ce1a-221">L’exemple montre comment conserver les proportions et comment empêcher l’agrandissement de l’image (si la nouvelle taille rend l’image plus grande).</span><span class="sxs-lookup"><span data-stu-id="2ce1a-221">The example shows how you preserve the aspect ratio and how you can prevent the image from being enlarged (in case the new size would actually make the image larger).</span></span> <span data-ttu-id="2ce1a-222">L’image redimensionnée est ensuite enregistrée dans le sous-dossier *thumbs* .</span><span class="sxs-lookup"><span data-stu-id="2ce1a-222">The resized image is then saved in the *thumbs* subfolder.</span></span>

    <span data-ttu-id="2ce1a-223">À la fin du balisage, vous utilisez le même `<img>` élément avec l’attribut `src` dynamique que vous avez vu dans les exemples précédents pour afficher de manière conditionnelle l’image.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-223">At the end of the markup, you use the same `<img>` element with the dynamic `src` attribute that you've seen in the previous examples to conditionally show the image.</span></span> <span data-ttu-id="2ce1a-224">Dans ce cas, vous affichez la miniature.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-224">In this case, you display the thumbnail.</span></span> <span data-ttu-id="2ce1a-225">Vous utilisez également un élément `<a>` pour créer un lien hypertexte vers la grande version de l’image.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-225">You also use an `<a>` element to create a hyperlink to the big version of the image.</span></span> <span data-ttu-id="2ce1a-226">Comme avec l’attribut `src` de l’élément `<img>`, vous définissez l’attribut `href` de l’élément `<a>` de manière dynamique sur le contenu de `imagePath`.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-226">As with the `src` attribute of the `<img>` element, you set the `href` attribute of the `<a>` element dynamically to whatever is in `imagePath`.</span></span> <span data-ttu-id="2ce1a-227">Pour vous assurer que le chemin d’accès peut fonctionner en tant qu’URL, vous passez `imagePath` à la méthode `Html.AttributeEncode`, qui convertit les caractères réservés dans le chemin d’accès en caractères OK dans une URL.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-227">To make sure that the path can work as a URL, you pass `imagePath` to the `Html.AttributeEncode` method, which converts reserved characters in the path to characters that are ok in a URL.</span></span>
4. <span data-ttu-id="2ce1a-228">Exécutez la page dans un navigateur.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-228">Run the page in a browser.</span></span>
5. <span data-ttu-id="2ce1a-229">Téléchargez une photo et vérifiez que la miniature est affichée.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-229">Upload a photo and verify that the thumbnail is shown.</span></span>
6. <span data-ttu-id="2ce1a-230">Cliquez sur la miniature pour afficher l’image en taille réelle.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-230">Click the thumbnail to see the full-size image.</span></span>
7. <span data-ttu-id="2ce1a-231">Dans les *images* et les *images/thumbs*, Notez que de nouveaux fichiers ont été ajoutés.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-231">In the *images* and *images/thumbs*, note that new files have been added.</span></span>

<a id="Rotating_and_Flipping"></a>
## <a name="rotating-and-flipping-an-image"></a><span data-ttu-id="2ce1a-232">Rotation et retournement d’une image</span><span class="sxs-lookup"><span data-stu-id="2ce1a-232">Rotating and Flipping an Image</span></span>

<span data-ttu-id="2ce1a-233">Le `WebImage` Helper vous permet également de retourner et de faire pivoter des images.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-233">The `WebImage` helper also lets you flip and rotate images.</span></span> <span data-ttu-id="2ce1a-234">Cette procédure montre comment obtenir une image à partir du serveur, retourner l’image à l’envers (verticalement), l’enregistrer, puis afficher l’image retournée sur la page.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-234">This procedure shows how to get an image from the server, flip the image upside down (vertically), save it, and then display the flipped image on the page.</span></span> <span data-ttu-id="2ce1a-235">Dans cet exemple, vous utilisez simplement un fichier déjà présent sur le serveur (*PHOTO2. jpg*).</span><span class="sxs-lookup"><span data-stu-id="2ce1a-235">In this example, you're just using a file you already have on the server (*Photo2.jpg*).</span></span> <span data-ttu-id="2ce1a-236">Dans une application réelle, vous pouvez probablement retourner une image dont vous obtenez le nom dynamique, comme vous l’avez fait dans les exemples précédents.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-236">In a real application, you'd probably flip an image whose name you get dynamically, like you did in previous examples.</span></span>

<span data-ttu-id="2ce1a-237">![image](9-working-with-images/_static/image4.jpg "ch9images-4. jpg")</span><span class="sxs-lookup"><span data-stu-id="2ce1a-237">![[image]](9-working-with-images/_static/image4.jpg "ch9images-4.jpg")</span></span>

1. <span data-ttu-id="2ce1a-238">Ajoutez une nouvelle page nommée *FlipImage. cshtml*.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-238">Add a new page named *FlipImage.cshtml*.</span></span>
2. <span data-ttu-id="2ce1a-239">Remplacez le contenu existant de la page par ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="2ce1a-239">Replace the existing content in the page with the following:</span></span> 

    [!code-cshtml[Main](9-working-with-images/samples/sample6.cshtml)]

    <span data-ttu-id="2ce1a-240">Le code utilise le programme d’assistance `WebImage` pour obtenir une image à partir du serveur.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-240">The code uses the `WebImage` helper to get an image from the server.</span></span> <span data-ttu-id="2ce1a-241">Vous créez le chemin d’accès à l’image à l’aide de la même technique que celle utilisée dans les exemples précédents pour enregistrer des images, et vous transmettez ce chemin lorsque vous créez une image à l’aide de `WebImage`:</span><span class="sxs-lookup"><span data-stu-id="2ce1a-241">You create the path to the image using the same technique you used in earlier examples for saving images, and you pass that path when you create an image using `WebImage`:</span></span>

    [!code-javascript[Main](9-working-with-images/samples/sample7.js)]

    <span data-ttu-id="2ce1a-242">Si une image est trouvée, vous construisez un nouveau chemin d’accès et un nouveau nom de fichier, comme vous l’avez fait dans des exemples précédents.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-242">If an image is found, you construct a new path and file name, like you did in earlier examples.</span></span> <span data-ttu-id="2ce1a-243">Pour retourner l’image, vous appelez la méthode `FlipVertical`, puis vous enregistrez à nouveau l’image.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-243">To flip the image, you call the `FlipVertical` method, and then you save the image again.</span></span>

    <span data-ttu-id="2ce1a-244">L’image est de nouveau affichée sur la page à l’aide de l’élément `<img>` avec l’attribut `src` défini sur `imagePath`.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-244">The image is again displayed on the page by using the `<img>` element with the `src` attribute set to `imagePath`.</span></span>
3. <span data-ttu-id="2ce1a-245">Exécutez la page dans un navigateur.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-245">Run the page in a browser.</span></span> <span data-ttu-id="2ce1a-246">L’image de *PHOTO2. jpg* est affichée à l’envers.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-246">The image for *Photo2.jpg* is shown upside down.</span></span>
4. <span data-ttu-id="2ce1a-247">Actualisez la page ou demandez à nouveau la page pour voir que l’image est retournée vers le haut.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-247">Refresh the page or request the page again to see the image is flipped right side up again.</span></span>

<span data-ttu-id="2ce1a-248">Pour faire pivoter une image, vous utilisez le même code, mais au lieu d’appeler le `FlipVertical` ou `FlipHorizontal`, vous appelez `RotateLeft` ou `RotateRight`.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-248">To rotate an image, you use the same code, except that instead of calling the `FlipVertical` or `FlipHorizontal`, you call `RotateLeft` or `RotateRight`.</span></span>

<a id="Adding_a_Watermark"></a>
## <a name="adding-a-watermark-to-an-image"></a><span data-ttu-id="2ce1a-249">Ajout d’un filigrane à une image</span><span class="sxs-lookup"><span data-stu-id="2ce1a-249">Adding a Watermark to an Image</span></span>

<span data-ttu-id="2ce1a-250">Lorsque vous ajoutez des images à votre site Web, vous pouvez ajouter un filigrane à l’image avant de l’enregistrer ou de l’afficher sur une page.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-250">When you add images to your website, you might want to add a watermark to the image before you save it or display it on a page.</span></span> <span data-ttu-id="2ce1a-251">Les gens utilisent souvent des filigranes pour ajouter des informations de Copyright à une image ou pour publier leur nom professionnel.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-251">People often use watermarks to add copyright information to an image or to advertise their business name.</span></span>

<span data-ttu-id="2ce1a-252">![image](9-working-with-images/_static/image5.jpg "ch9images-5. jpg")</span><span class="sxs-lookup"><span data-stu-id="2ce1a-252">![[image]](9-working-with-images/_static/image5.jpg "ch9images-5.jpg")</span></span>

1. <span data-ttu-id="2ce1a-253">Ajoutez une nouvelle page nommée *Watermark. cshtml*.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-253">Add a new page named *Watermark.cshtml*.</span></span>
2. <span data-ttu-id="2ce1a-254">Remplacez le contenu existant de la page par ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="2ce1a-254">Replace the existing content in the page with the following:</span></span> 

    [!code-cshtml[Main](9-working-with-images/samples/sample8.cshtml)]

    <span data-ttu-id="2ce1a-255">Ce code est similaire au code de la page *FlipImage. cshtml* de la version antérieure (même si cette fois-ci, il utilise le fichier *Photo3. jpg* ).</span><span class="sxs-lookup"><span data-stu-id="2ce1a-255">This code is like the code in the *FlipImage.cshtml* page from earlier (although this time it uses the *Photo3.jpg* file).</span></span> <span data-ttu-id="2ce1a-256">Pour ajouter le filigrane, vous devez appeler la méthode `AddTextWatermark` de l' `WebImage` Helper avant d’enregistrer l’image.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-256">To add the watermark, you call the `WebImage` helper's `AddTextWatermark` method before you save the image.</span></span> <span data-ttu-id="2ce1a-257">Dans l’appel à `AddTextWatermark`, vous transmettez le texte &quot;mon filigrane&quot;, définissez la couleur de la police sur jaune et définissez la famille de polices sur Arial.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-257">In the call to `AddTextWatermark`, you pass the text &quot;My Watermark&quot;, set the font color to yellow, and set the font family to Arial.</span></span> <span data-ttu-id="2ce1a-258">(Bien que cela ne soit pas illustré ici, le `WebImage` Helper vous permet également de spécifier l’opacité, la famille de polices et la taille de police, ainsi que la position du texte de filigrane.) Lorsque vous enregistrez l’image, elle ne doit pas être en lecture seule.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-258">(Although it's not shown here, the `WebImage` helper also lets you specify opacity, font family and font size, and the position of the watermark text.) When you save the image it must not be read-only.</span></span>

    <span data-ttu-id="2ce1a-259">Comme vous l’avez vu précédemment, l’image est affichée sur la page à l’aide de l’élément `<img>` avec l’attribut SRC défini sur `@imagePath`.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-259">As you've seen before, the image is displayed on the page by using the `<img>` element with the src attribute set to `@imagePath`.</span></span>
3. <span data-ttu-id="2ce1a-260">Exécutez la page dans un navigateur.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-260">Run the page in a browser.</span></span> <span data-ttu-id="2ce1a-261">Notez le texte « mon filigrane » dans le coin inférieur droit de l’image.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-261">Notice the text "My Watermark" at the bottom-right corner of the image.</span></span>

<a id="Using_an_Image_as_a_Watermark"></a>
## <a name="using-an-image-as-a-watermark"></a><span data-ttu-id="2ce1a-262">Utilisation d’une image en tant que filigrane</span><span class="sxs-lookup"><span data-stu-id="2ce1a-262">Using an Image As a Watermark</span></span>

<span data-ttu-id="2ce1a-263">Au lieu d’utiliser du texte pour un filigrane, vous pouvez utiliser une autre image.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-263">Instead of using text for a watermark, you can use another image.</span></span> <span data-ttu-id="2ce1a-264">Les gens utilisent parfois des images comme un logo de société comme filigrane, ou ils utilisent une image en filigrane au lieu de texte pour les informations de copyright.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-264">People sometimes use images like a company logo as a watermark, or they use a watermark image instead of text for copyright information.</span></span>

<span data-ttu-id="2ce1a-265">![image](9-working-with-images/_static/image6.jpg "ch9images-6. jpg")</span><span class="sxs-lookup"><span data-stu-id="2ce1a-265">![[image]](9-working-with-images/_static/image6.jpg "ch9images-6.jpg")</span></span>

1. <span data-ttu-id="2ce1a-266">Ajoutez une nouvelle page nommée *ImageWatermark. cshtml*.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-266">Add a new page named *ImageWatermark.cshtml*.</span></span>
2. <span data-ttu-id="2ce1a-267">Ajoutez une image au dossier *images* que vous pouvez utiliser comme logo, puis renommez l’image *MyCompanyLogo. jpg*.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-267">Add an image to the *images* folder that you can use as a logo, and rename the image *MyCompanyLogo.jpg*.</span></span> <span data-ttu-id="2ce1a-268">Cette image doit être une image que vous pouvez voir clairement lorsqu’elle est définie sur 80 pixels de large et 20 pixels de haut.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-268">This image should be an image that you can see clearly when it's set to 80 pixels wide and 20 pixels high.</span></span>
3. <span data-ttu-id="2ce1a-269">Remplacez le contenu existant de la page par ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="2ce1a-269">Replace the existing content in the page with the following:</span></span> 

    [!code-cshtml[Main](9-working-with-images/samples/sample9.cshtml)]

    <span data-ttu-id="2ce1a-270">Il s’agit d’une autre variante du code des exemples précédents.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-270">This is another variation on the code from earlier examples.</span></span> <span data-ttu-id="2ce1a-271">Dans ce cas, vous appelez `AddImageWatermark` pour ajouter l’image en filigrane à l’image cible (*Photo3. jpg*) avant d’enregistrer l’image.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-271">In this case, you call `AddImageWatermark` to add the watermark image to the target image (*Photo3.jpg*) before you save the image.</span></span> <span data-ttu-id="2ce1a-272">Lorsque vous appelez `AddImageWatermark`, vous définissez sa largeur sur 80 pixels et la hauteur sur 20 pixels.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-272">When you call `AddImageWatermark`, you set its width to 80 pixels and the height to 20 pixels.</span></span> <span data-ttu-id="2ce1a-273">L’image *MyCompanyLogo. jpg* est alignée horizontalement au centre et alignée verticalement en bas de l’image cible.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-273">The *MyCompanyLogo.jpg* image is horizontally aligned in the center and vertically aligned at the bottom of the target image.</span></span> <span data-ttu-id="2ce1a-274">L’opacité est définie sur 100% et la marge intérieure est définie sur 10 pixels.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-274">The opacity is set to 100% and the padding is set to 10 pixels.</span></span> <span data-ttu-id="2ce1a-275">Si l’image en filigrane est plus grande que l’image cible, rien ne se produit.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-275">If the watermark image is bigger than the target image, nothing will happen.</span></span> <span data-ttu-id="2ce1a-276">Si l’image en filigrane est plus grande que l’image cible et que vous définissez le remplissage de l’image en filigrane sur zéro, le filigrane est ignoré.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-276">If the watermark image is bigger than the target image and you set the padding for the image watermark to zero, the watermark is ignored.</span></span>

    <span data-ttu-id="2ce1a-277">Comme précédemment, vous affichez l’image à l’aide de l’élément `<img>` et d’un attribut `src` dynamique.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-277">As before, you display the image using the `<img>` element and a dynamic `src` attribute.</span></span>
4. <span data-ttu-id="2ce1a-278">Exécutez la page dans un navigateur.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-278">Run the page in a browser.</span></span> <span data-ttu-id="2ce1a-279">Notez que l’image de filigrane s’affiche au bas de l’image principale.</span><span class="sxs-lookup"><span data-stu-id="2ce1a-279">Notice that the watermark image appears at the bottom of the main image.</span></span>

<a id="Additional_Resources"></a>
## <a name="additional-resources"></a><span data-ttu-id="2ce1a-280">Ressources supplémentaires</span><span class="sxs-lookup"><span data-stu-id="2ce1a-280">Additional Resources</span></span>

[<span data-ttu-id="2ce1a-281">Utilisation de fichiers dans un site pages Web ASP.NET</span><span class="sxs-lookup"><span data-stu-id="2ce1a-281">Working with Files in an ASP.NET Web Pages Site</span></span>](https://go.microsoft.com/fwlink/?LinkId=202896)

[<span data-ttu-id="2ce1a-282">Introduction à la programmation de pages Web ASP.NET à l’aide de la syntaxe Razor</span><span class="sxs-lookup"><span data-stu-id="2ce1a-282">Introduction to ASP.NET Web Pages Programming Using the Razor Syntax</span></span>](https://go.microsoft.com/fwlink/?LinkID=251587)

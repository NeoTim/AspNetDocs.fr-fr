---
uid: web-forms/overview/moving-to-aspnet-20/membership
title: Adhésion ( fr) Microsoft Docs
author: rick-anderson
description: ASP.NET l’adhésion s’appuie sur le succès du modèle d’authentification des formulaires à partir de ASP.NET 1.x. ASP.NET l’authentification des formes offre un moyen pratique d’incorp...
ms.author: riande
ms.date: 02/20/2005
ms.assetid: f2339485-5d78-4c5e-8c0a-dc9b8a315345
msc.legacyurl: /web-forms/overview/moving-to-aspnet-20/membership
msc.type: authoredcontent
ms.openlocfilehash: ed48c11cbd483de088239bad7c2452b7fc60a1cf
ms.sourcegitcommit: 022f79dbc1350e0c6ffaa1e7e7c6e850cdabf9af
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/17/2020
ms.locfileid: "81543767"
---
# <a name="membership"></a><span data-ttu-id="2170a-104">Membership</span><span class="sxs-lookup"><span data-stu-id="2170a-104">Membership</span></span>

<span data-ttu-id="2170a-105">par [Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="2170a-105">by [Microsoft](https://github.com/microsoft)</span></span>

> <span data-ttu-id="2170a-106">ASP.NET l’adhésion s’appuie sur le succès du modèle d’authentification des formulaires à partir de ASP.NET 1.x.</span><span class="sxs-lookup"><span data-stu-id="2170a-106">ASP.NET Membership builds on the success of the Forms authentication model from ASP.NET 1.x.</span></span> <span data-ttu-id="2170a-107">ASP.NET l’authentification des formulaires fournit un moyen pratique d’intégrer un formulaire de connexion dans votre application ASP.NET et de valider les utilisateurs par rapport à une base de données ou à un autre magasin de données.</span><span class="sxs-lookup"><span data-stu-id="2170a-107">ASP.NET Forms authentication provides a convenient way to incorporate a login form into your ASP.NET application and validate users against a database or other data store.</span></span>

<span data-ttu-id="2170a-108">ASP.NET l’adhésion s’appuie sur le succès du modèle d’authentification des formulaires à partir de ASP.NET 1.x.</span><span class="sxs-lookup"><span data-stu-id="2170a-108">ASP.NET Membership builds on the success of the Forms authentication model from ASP.NET 1.x.</span></span> <span data-ttu-id="2170a-109">ASP.NET l’authentification des formulaires fournit un moyen pratique d’intégrer un formulaire de connexion dans votre application ASP.NET et de valider les utilisateurs par rapport à une base de données ou à un autre magasin de données.</span><span class="sxs-lookup"><span data-stu-id="2170a-109">ASP.NET Forms authentication provides a convenient way to incorporate a login form into your ASP.NET application and validate users against a database or other data store.</span></span> <span data-ttu-id="2170a-110">Les membres de la classe FormsAuthentication permettent de manipuler des cookies pour l’authentification, de vérifier une connexion valide, de connecter un utilisateur, etc. Toutefois, la mise en œuvre de l’authentification des formulaires dans une application ASP.NET 1.x peut nécessiter une bonne quantité de code.</span><span class="sxs-lookup"><span data-stu-id="2170a-110">The members of the FormsAuthentication class make it possible to handle cookies for authentication, check for a valid login, log a user out etc. However, implementing Forms authentication in an ASP.NET 1.x application can require a fair amount of code.</span></span>

<span data-ttu-id="2170a-111">L’adhésion à ASP.NET 2.0 est un progrès majeur par rapport à l’utilisation de l’authentification des formes seule.</span><span class="sxs-lookup"><span data-stu-id="2170a-111">Membership in ASP.NET 2.0 is a major advancement over using Forms authentication alone.</span></span> <span data-ttu-id="2170a-112">(L’adhésion est plus robuste lorsqu’elle est associée à l’authentification des formulaires, mais l’utilisation de l’authentification des formulaires n’est pas une exigence.) Comme vous le verrez bientôt, vous pouvez utiliser ASP.NET l’adhésion et les contrôles de connexion dans ASP.NET 2.0 pour implémenter un système d’adhésion puissant sans écrire beaucoup de code du tout.</span><span class="sxs-lookup"><span data-stu-id="2170a-112">(Membership is most robust when coupled with Forms authentication, but using Forms authentication is not a requirement.) As you'll soon see, you can use ASP.NET Membership and the login controls in ASP.NET 2.0 to implement a powerful membership system without writing much code at all.</span></span>

## <a name="implementing-membership-in-aspnet-20"></a><span data-ttu-id="2170a-113">Mise en œuvre de l’adhésion à ASP.NET 2.0</span><span class="sxs-lookup"><span data-stu-id="2170a-113">Implementing Membership in ASP.NET 2.0</span></span>

<span data-ttu-id="2170a-114">L’adhésion est mise en œuvre en suivant quatre étapes.</span><span class="sxs-lookup"><span data-stu-id="2170a-114">Membership is implemented by following four steps.</span></span> <span data-ttu-id="2170a-115">Gardez à l’esprit qu’il existe de nombreuses sous-étapes qui sont impliqués ainsi que la configuration facultative qui peut être mis en œuvre ainsi.</span><span class="sxs-lookup"><span data-stu-id="2170a-115">Keep in mind that there are many sub-steps that are involved as well as optional configuration that can be implemented as well.</span></span> <span data-ttu-id="2170a-116">Ces étapes visent à illustrer l’ensemble de la configuration de l’adhésion.</span><span class="sxs-lookup"><span data-stu-id="2170a-116">These steps are meant to illustrate the big picture of configuring membership.</span></span>

1. <span data-ttu-id="2170a-117">Créez votre base de données d’adhésion (si SQL Server est utilisé comme magasin d’adhésion.)</span><span class="sxs-lookup"><span data-stu-id="2170a-117">Create your membership database (if SQL Server is used as the membership store.)</span></span>
2. <span data-ttu-id="2170a-118">Spécifiez les options d’adhésion dans vos fichiers de configuration d’applications.</span><span class="sxs-lookup"><span data-stu-id="2170a-118">Specify the membership options in your applications configuration files.</span></span> <span data-ttu-id="2170a-119">(L’adhésion est activée par défaut.)</span><span class="sxs-lookup"><span data-stu-id="2170a-119">(Membership is enabled by default.)</span></span>
3. <span data-ttu-id="2170a-120">Déterminez le type de magasin d’adhésion que vous souhaitez utiliser.</span><span class="sxs-lookup"><span data-stu-id="2170a-120">Determine the type of membership store you want to use.</span></span> <span data-ttu-id="2170a-121">Les options sont :</span><span class="sxs-lookup"><span data-stu-id="2170a-121">Options are:</span></span> 

    - <span data-ttu-id="2170a-122">Serveur SQL Microsoft (version 7.0 ou plus tard)</span><span class="sxs-lookup"><span data-stu-id="2170a-122">Microsoft SQL Server (version 7.0 or later)</span></span>
    - <span data-ttu-id="2170a-123">Magasin d’annuaire actif</span><span class="sxs-lookup"><span data-stu-id="2170a-123">Active Directory Store</span></span>
    - <span data-ttu-id="2170a-124">Fournisseur d’adhésion personnalisé</span><span class="sxs-lookup"><span data-stu-id="2170a-124">Custom membership provider</span></span>
4. <span data-ttu-id="2170a-125">Configurer l’application pour ASP.NET l’authentification des formulaires.</span><span class="sxs-lookup"><span data-stu-id="2170a-125">Configure the application for ASP.NET Forms authentication.</span></span> <span data-ttu-id="2170a-126">Une fois de plus, l’adhésion est conçue pour tirer parti de l’authentification des formulaires, mais l’utilisation de l’authentification des formes n’est pas une exigence.</span><span class="sxs-lookup"><span data-stu-id="2170a-126">Once again, Membership is designed to take advantage of Forms authentication, but using Forms authentication is not a requirement.</span></span>
5. <span data-ttu-id="2170a-127">Définissez les comptes d’utilisateurs pour les rôles d’adhésion et de configuration si désiré.</span><span class="sxs-lookup"><span data-stu-id="2170a-127">Define user accounts for membership and configure roles if desired.</span></span>

## <a name="creating-the-membership-database"></a><span data-ttu-id="2170a-128">Création de la base de données d’adhésion</span><span class="sxs-lookup"><span data-stu-id="2170a-128">Creating the Membership Database</span></span>

<span data-ttu-id="2170a-129">Si vous utilisez SQL Server 7.0 ou plus tard comme votre\_magasin d’adhésion, vous pouvez utiliser l’utilitaire aspnet regsql (disponible le plus facilement à partir du Visual Studio .NET 2005 Command Prompt) pour configurer votre base de données.</span><span class="sxs-lookup"><span data-stu-id="2170a-129">If you're using SQL Server 7.0 or later as your membership store, you can use the aspnet\_regsql utility (available most easily from the Visual Studio .NET 2005 Command Prompt) to configure your database.</span></span> <span data-ttu-id="2170a-130">L’utilitaire\_aspnet regsql peut être utilisé comme un outil d’invite de commande ou via un assistant GUI.</span><span class="sxs-lookup"><span data-stu-id="2170a-130">The aspnet\_regsql utility can be used as a command prompt tool or via a GUI wizard.</span></span> <span data-ttu-id="2170a-131">La méthode assistante est le moyen le plus simple de configurer votre base de données.</span><span class="sxs-lookup"><span data-stu-id="2170a-131">The wizard method is the easiest way to configure your database.</span></span> <span data-ttu-id="2170a-132">Pour accéder à l’assistant, il suffit d’exécuter la commande suivante:</span><span class="sxs-lookup"><span data-stu-id="2170a-132">To access the wizard, simply run the following command:</span></span>

`aspnet_regsql W`

<span data-ttu-id="2170a-133">Une fois que vous exécutez cette commande, vous serez présenté avec le ASP.NET SQL Server Setup Wizard comme indiqué ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="2170a-133">Once you run that command, you will be presented with the ASP.NET SQL Server Setup Wizard as shown below.</span></span>

![](membership/_static/image1.jpg)

<span data-ttu-id="2170a-134">**La figure 1**</span><span class="sxs-lookup"><span data-stu-id="2170a-134">**Figure 1**</span></span>

<span data-ttu-id="2170a-135">Le ASP.NET SQL Server Setup Wizard crée le site Web dans l’exemple que vous spécifiez dans l’assistant.</span><span class="sxs-lookup"><span data-stu-id="2170a-135">The ASP.NET SQL Server Setup Wizard creates the Web site in the instance you specify in the wizard.</span></span> <span data-ttu-id="2170a-136">Toutefois, ASP.NET utilisera la chaîne de connexion dans le fichier machine.config pour se connecter à votre base de données.</span><span class="sxs-lookup"><span data-stu-id="2170a-136">However, ASP.NET will use the connection string in the machine.config file to connect to your database.</span></span> <span data-ttu-id="2170a-137">Par défaut, cette chaîne de connexion indiquera une instance SQL Server 2005, donc si vous utilisez une instance SQL Server 2000 ou SQL Server 7.0, vous devrez modifier la chaîne de connexion dans le fichier machine.config.</span><span class="sxs-lookup"><span data-stu-id="2170a-137">By default, this connection string will point to a SQL Server 2005 instance, so if you are using a SQL Server 2000 or SQL Server 7.0 instance, you will need to modify the connection string in the machine.config file.</span></span> <span data-ttu-id="2170a-138">Cette chaîne de connexion peut être située ici:</span><span class="sxs-lookup"><span data-stu-id="2170a-138">That connection string can be located here:</span></span>

[!code-xml[Main](membership/samples/sample1.xml)]

<span data-ttu-id="2170a-139">Malheureusement, si vous ne modifiez pas la chaîne de connexion, ASP.NET ne vous donnera pas une erreur descriptive.</span><span class="sxs-lookup"><span data-stu-id="2170a-139">Unfortunately, if you don't modify the connection string, ASP.NET will not give you a descriptive error.</span></span> <span data-ttu-id="2170a-140">Il va juste continuer à se plaindre en disant que vous n’avez pas créé la base de données.</span><span class="sxs-lookup"><span data-stu-id="2170a-140">It will just continue to complain saying that you haven't created the database.</span></span> <span data-ttu-id="2170a-141">Dans le cas ci-dessus, j’ai modifié la chaîne de connexion pour pointer vers mon local SQL Server 2000 instance.</span><span class="sxs-lookup"><span data-stu-id="2170a-141">In the case above, I have modified the connection string to point to my local SQL Server 2000 instance.</span></span>

## <a name="specifying-configuration-and-adding-users-and-roles"></a><span data-ttu-id="2170a-142">Spécifier la configuration et l’ajout d’utilisateurs et de rôles</span><span class="sxs-lookup"><span data-stu-id="2170a-142">Specifying Configuration and Adding Users and Roles</span></span>

<span data-ttu-id="2170a-143">La prochaine étape dans la configuration de l’adhésion est d’ajouter les informations nécessaires au fichier web.config de l’application.</span><span class="sxs-lookup"><span data-stu-id="2170a-143">The next step in configuring Membership is to add the necessary information to the web.config file of the application.</span></span> <span data-ttu-id="2170a-144">Dans ASP.NET 1.x, la modification du fichier web.config a parfois été difficile en raison de l’utilisation de lowerCamelCase et le manque d’Intellisense.</span><span class="sxs-lookup"><span data-stu-id="2170a-144">In ASP.NET 1.x, modifying the web.config file was sometimes difficult because of the use of lowerCamelCase and the lack of Intellisense.</span></span> <span data-ttu-id="2170a-145">Visual Studio .NET 2005 rend la tâche beaucoup plus facile avec Intellisense pour les fichiers de configuration, mais ASP.NET 2.0 va plus loin en fournissant une interface Web pour l’édition de fichiers de configuration.</span><span class="sxs-lookup"><span data-stu-id="2170a-145">Visual Studio .NET 2005 makes the task much easier with Intellisense for configuration files, but ASP.NET 2.0 goes one step further by providing a Web interface for editing configuration files.</span></span>

<span data-ttu-id="2170a-146">Vous pouvez lancer l’interface Web en cliquant sur le bouton ASP.NET Configuration sur la barre d’outils Solution Explorer comme indiqué ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="2170a-146">You can launch the Web interface by clicking the ASP.NET Configuration button on the Solution Explorer toolbar as shown below.</span></span> <span data-ttu-id="2170a-147">Vous pouvez également lancer l’interface Web via des pop-ups qui s’affichent lorsque les commandes Login sont insérées.</span><span class="sxs-lookup"><span data-stu-id="2170a-147">You can also launch the Web interface via pop-ups that are displayed when Login controls are inserted.</span></span>

![](membership/_static/image2.jpg)

<span data-ttu-id="2170a-148">**Figure 2**</span><span class="sxs-lookup"><span data-stu-id="2170a-148">**Figure 2**</span></span>

<span data-ttu-id="2170a-149">Cela lance l’outil ASP.NET d’administration de sites Web ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="2170a-149">This launches the ASP.NET Web Site Administration Tool shown below.</span></span> <span data-ttu-id="2170a-150">La ASP.NET’administration du site Web est une interface à quatre onglets qui facilite la gestion des paramètres d’application.</span><span class="sxs-lookup"><span data-stu-id="2170a-150">The ASP.NET Web Site Administration is a four-tab interface that makes it easy to manage application settings.</span></span> <span data-ttu-id="2170a-151">Les onglets suivants sont disponibles :</span><span class="sxs-lookup"><span data-stu-id="2170a-151">The following tabs are available:</span></span>

- <span data-ttu-id="2170a-152">**Page d'accueil**</span><span class="sxs-lookup"><span data-stu-id="2170a-152">**Home**</span></span>
- <span data-ttu-id="2170a-153">**Sécurité** Configurer les utilisateurs, les rôles et l’accès.</span><span class="sxs-lookup"><span data-stu-id="2170a-153">**Security** Configure users, roles, and access.</span></span>
- <span data-ttu-id="2170a-154">**Demande** Configurer les paramètres d’application.</span><span class="sxs-lookup"><span data-stu-id="2170a-154">**Application** Configure application settings.</span></span>
- <span data-ttu-id="2170a-155">**Fournisseur** Configurez et testez votre fournisseur d’adhésion aux applications.</span><span class="sxs-lookup"><span data-stu-id="2170a-155">**Provider** Configure and test your applications membership provider.</span></span>

<span data-ttu-id="2170a-156">L’outil d’administration de sites Web vous permet de créer facilement de nouveaux utilisateurs, de créer de nouveaux rôles et de gérer les utilisateurs et les rôles.</span><span class="sxs-lookup"><span data-stu-id="2170a-156">The Web Site Administration Tool allows you to easily create new users, create new roles, and to manage users and roles.</span></span> <span data-ttu-id="2170a-157">Cette capacité n’est pas disponible dans l’interface Windows.</span><span class="sxs-lookup"><span data-stu-id="2170a-157">This ability is not available in the Windows interface.</span></span> <span data-ttu-id="2170a-158">L’interface Windows vous permet de définir facilement les paramètres d’autorisation et d’ajouter, supprimer et gérer les fournisseurs, des fonctionnalités qui ne figurent pas dans l’outil d’administration du site Web.</span><span class="sxs-lookup"><span data-stu-id="2170a-158">The Windows interface allows you to easily define authorization settings and to add, delete, and manage providers, capabilities that are not in the Web Site Administration Tool.</span></span>

<span data-ttu-id="2170a-159">Pour lancer l’interface Windows, ouvrez le snap-in des services d’information Internet, cliquez à droite sur votre application et choisissez des propriétés.</span><span class="sxs-lookup"><span data-stu-id="2170a-159">To launch the Windows interface, open the Internet Information Services snap-in, right-click on your application, and choose Properties.</span></span> <span data-ttu-id="2170a-160">Cliquez sur l’onglet ASP.NET, puis cliquez sur le bouton Configuration d’édition.</span><span class="sxs-lookup"><span data-stu-id="2170a-160">Click the ASP.NET tab and then click the Edit Configuration button.</span></span> <span data-ttu-id="2170a-161">(L’application doit être en cours d’exécution sous ASP.NET 2.0 pour que le bouton Configuration d’édition soit activé.</span><span class="sxs-lookup"><span data-stu-id="2170a-161">(The application must be running under ASP.NET 2.0 for the Edit Configuration button to be enabled.</span></span> <span data-ttu-id="2170a-162">Vous pouvez configurer la version ASP.NET dans le dialogue ASP.NET ainsi.) Le dialogue ASP.NET Configuration Paramètres s’affiche comme indiqué ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="2170a-162">You can configure the ASP.NET version in the ASP.NET dialog as well.) The ASP.NET Configuration Settings dialog is displayed as shown below.</span></span>

![](membership/_static/image3.jpg)

<span data-ttu-id="2170a-163">**Figure 3**</span><span class="sxs-lookup"><span data-stu-id="2170a-163">**Figure 3**</span></span>

<span data-ttu-id="2170a-164">Sur l’onglet Général, les chaînes de connexion et les paramètres d’application sont répertoriés.</span><span class="sxs-lookup"><span data-stu-id="2170a-164">On the General tab, connection strings and application settings are listed.</span></span> <span data-ttu-id="2170a-165">Tous les paramètres en italique sont définis dans un fichier de configuration parent (soit le site machine.config ou un web.config à un niveau supérieur) et les paramètres non en italiques proviennent du fichier de configuration des applications.</span><span class="sxs-lookup"><span data-stu-id="2170a-165">Any settings in italics are defined in a parent configuration file (either the machine.config or a web.config at a higher level) and settings not in italics are from the applications configuration file.</span></span> <span data-ttu-id="2170a-166">Si un paramètre est ajouté, supprimé ou modifié au niveau de l’application, ASP.NET ajoutera, supprimera ou modifiera le paramètre aux niveaux d’application web.config au lieu de supprimer le paramètre du fichier de configuration dont il est hérité.</span><span class="sxs-lookup"><span data-stu-id="2170a-166">If a setting is added, removed, or edited at the application level, ASP.NET will add, remove, or modify the setting at the application levels web.config instead of removing the setting from the configuration file from which it is inherited.</span></span>

<span data-ttu-id="2170a-167">L’onglet Authentification est indiqué ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="2170a-167">The Authentication tab is shown below.</span></span> <span data-ttu-id="2170a-168">C’est là que vous configurer vos paramètres d’adhésion.</span><span class="sxs-lookup"><span data-stu-id="2170a-168">This is where you will configure your membership settings.</span></span> <span data-ttu-id="2170a-169">Les paramètres d’authentification des formulaires, les fournisseurs d’adhésion et les fournisseurs de rôles peuvent être configurés ici.</span><span class="sxs-lookup"><span data-stu-id="2170a-169">Forms authentication settings, membership providers, and role providers can be configured here.</span></span>

![](membership/_static/image4.jpg)

<span data-ttu-id="2170a-170">**Figure 4**</span><span class="sxs-lookup"><span data-stu-id="2170a-170">**Figure 4**</span></span>

## <a name="implementing-membership-in-your-application"></a><span data-ttu-id="2170a-171">Mise en œuvre de l’adhésion à votre demande</span><span class="sxs-lookup"><span data-stu-id="2170a-171">Implementing Membership in Your Application</span></span>

<span data-ttu-id="2170a-172">La façon la plus simple d’implémenter ASP.NET adhésion 2.0 à votre application est d’utiliser les contrôles Logon fournis.</span><span class="sxs-lookup"><span data-stu-id="2170a-172">The easiest way to implement ASP.NET 2.0 membership in your application is to use the provided Logon controls.</span></span> <span data-ttu-id="2170a-173">Cette méthode vous permet d’implémenter les bases de ASP.NET’adhésion 2.0 sans écrire de code du tout.</span><span class="sxs-lookup"><span data-stu-id="2170a-173">This method allows you to implement the basics of ASP.NET 2.0 membership without writing any code at all.</span></span>

<span data-ttu-id="2170a-174">Les commandes Logon suivantes sont disponibles en ASP.NET 2.0 :</span><span class="sxs-lookup"><span data-stu-id="2170a-174">The following Logon controls are available in ASP.NET 2.0:</span></span>

## <a name="login-control"></a><span data-ttu-id="2170a-175">Contrôle de la connexion</span><span class="sxs-lookup"><span data-stu-id="2170a-175">Login Control</span></span>

<span data-ttu-id="2170a-176">Le contrôle Login fournit une interface pour que quelqu’un se connecte à votre système d’adhésion.</span><span class="sxs-lookup"><span data-stu-id="2170a-176">The Login control provides an interface for someone to log into your membership system.</span></span> <span data-ttu-id="2170a-177">Il vous fournit un nom d’utilisateur et une boîte texte de mot de passe et un bouton de connexion.</span><span class="sxs-lookup"><span data-stu-id="2170a-177">It provides you with a username and password textbox and a login button.</span></span> <span data-ttu-id="2170a-178">Beaucoup d’autres fonctionnalités courantes telles qu’un lien pour s’inscrire pour les personnes qui ne l’ont pas encore fait, une case à cocher qui permet à l’utilisateur de se connecter automatiquement lors de visites ultérieures, un lien pour un rappel de mot de passe, etc. Toutes les fonctionnalités du contrôle Login sont personnalisables via les propriétés du contrôle.</span><span class="sxs-lookup"><span data-stu-id="2170a-178">Many other common features such as a link to register for people who have not yet done so, a checkbox that allows the user to automatically login on subsequent visits, a link for a password reminder, etc. All features of the Login control are customizable via the properties of the control.</span></span>

<span data-ttu-id="2170a-179">Dans ASP.NET 1.x, les développeurs ont dû écrire une bonne quantité de code pour faire un examen lors de l’utilisation de l’authentification des formes.</span><span class="sxs-lookup"><span data-stu-id="2170a-179">In ASP.NET 1.x, developers had to write a fair amount of code to do a lookup when using Forms authentication.</span></span> <span data-ttu-id="2170a-180">Avec ASP.NET’adhésion 2.0, vous pouvez valider les utilisateurs sans écrire de code du tout.</span><span class="sxs-lookup"><span data-stu-id="2170a-180">With ASP.NET 2.0 membership, you can validate users without writing any code at all.</span></span> <span data-ttu-id="2170a-181">ASP.NET fera automatiquement la recherche de l’utilisateur pour vous.</span><span class="sxs-lookup"><span data-stu-id="2170a-181">ASP.NET will automatically do the look-up of the user for you.</span></span> <span data-ttu-id="2170a-182">(Si vous utilisez le contrôle Login sans utiliser ASP.NET’adhésion, vous pouvez utiliser la méthode **OnAuthenticate** pour valider l’utilisateur.)</span><span class="sxs-lookup"><span data-stu-id="2170a-182">(If you are using the Login control without using ASP.NET membership, you can use the **OnAuthenticate** method to validate the user.)</span></span>

## <a name="loginview-control"></a><span data-ttu-id="2170a-183">Contrôle LoginView</span><span class="sxs-lookup"><span data-stu-id="2170a-183">LoginView Control</span></span>

<span data-ttu-id="2170a-184">Le contrôle LoginView est un contrôle modélé qui fournit deux modèles par défaut; AnonymousTemplate et le LoggedInTemplate.</span><span class="sxs-lookup"><span data-stu-id="2170a-184">The LoginView control is a templated control that provides two templates by default; the AnonymousTemplate and the LoggedInTemplate.</span></span> <span data-ttu-id="2170a-185">Le modèle affiché est déterminé par la question de savoir si l’utilisateur est connecté ou non à votre système d’adhésion.</span><span class="sxs-lookup"><span data-stu-id="2170a-185">The template that is displayed is determined by whether or not the user is logged into your membership system.</span></span> <span data-ttu-id="2170a-186">Ce contrôle est généralement utilisé pour afficher un contrôle De connexion lorsqu’un utilisateur ne s’est pas encore connecté et qu’un contrôle LoginStatus et/ou d’autres contrôles de connexion lorsque l’utilisateur s’est connecté.</span><span class="sxs-lookup"><span data-stu-id="2170a-186">This control is typically used to display a Login control when a user has not yet logged in and a LoginStatus control and/or other login controls when the user has logged in.</span></span> <span data-ttu-id="2170a-187">Si vous utilisez la gestion des rôles dans votre application ASP.NET, le contrôle LoginView peut afficher un modèle spécifique basé sur le rôle des utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="2170a-187">If you are using role management in your ASP.NET application, the LoginView control can display a specific template based upon the users role.</span></span> <span data-ttu-id="2170a-188">(Plus sur ASP.NET gestion des rôles sera couverte plus tard.)</span><span class="sxs-lookup"><span data-stu-id="2170a-188">(More on ASP.NET role management will be covered later.)</span></span>

## <a name="passwordrecovery-control"></a><span data-ttu-id="2170a-189">Contrôle de PasswordRecovery</span><span class="sxs-lookup"><span data-stu-id="2170a-189">PasswordRecovery Control</span></span>

<span data-ttu-id="2170a-190">Le contrôle PasswordRecovery permet aux utilisateurs de recevoir un e-mail avec son mot de passe actuel ou de réinitialiser son mot de passe.</span><span class="sxs-lookup"><span data-stu-id="2170a-190">The PasswordRecovery control allows users to receive an email with his or her current password or reset his or her password.</span></span> <span data-ttu-id="2170a-191">Le texte clair et les mots de passe cryptés peuvent être récupérés et envoyés par courriel aux utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="2170a-191">Clear text and encrypted passwords can be recovered and emailed to users.</span></span> <span data-ttu-id="2170a-192">Si le mot de passe est haché, il ne peut pas être récupéré.</span><span class="sxs-lookup"><span data-stu-id="2170a-192">If the password is hashed, it cannot be recovered.</span></span> <span data-ttu-id="2170a-193">Au lieu de cela, l’utilisateur sera tenu d’effectuer une réinitialisation de mot de passe.</span><span class="sxs-lookup"><span data-stu-id="2170a-193">Instead the user will be required to perform a password reset.</span></span>

## <a name="loginstatus-control"></a><span data-ttu-id="2170a-194">LoginStatus Control</span><span class="sxs-lookup"><span data-stu-id="2170a-194">LoginStatus Control</span></span>

<span data-ttu-id="2170a-195">Le contrôle LoginStatus est utilisé pour afficher un indicateur de connexion aux utilisateurs qui ne sont pas connectés et un indicateur de logout aux utilisateurs qui sont actuellement connectés.</span><span class="sxs-lookup"><span data-stu-id="2170a-195">The LoginStatus control is used to display a login indicator to users who are not logged in and a logout indicator to users who are currently logged in.</span></span> <span data-ttu-id="2170a-196">La propriété Request.IsAuthenticated est utilisée pour déterminer quel indicateur afficher.</span><span class="sxs-lookup"><span data-stu-id="2170a-196">The Request.IsAuthenticated property is used to determine which indicator to display.</span></span> <span data-ttu-id="2170a-197">L’indicateur affiché par le contrôle LoginStatus peut être le texte (implémenté via les propriétés **LoginText** et **LogoutText)** ou des images (implémentées via les propriétés **LoginImageUrl** et **LogoutImageUrl).)**</span><span class="sxs-lookup"><span data-stu-id="2170a-197">The indicator displayed by the LoginStatus control can be text (implemented via the **LoginText** and **LogoutText** properties) or images (implemented via the **LoginImageUrl** and **LogoutImageUrl** properties.)</span></span>

<span data-ttu-id="2170a-198">Lorsqu’un utilisateur se connecte via le contrôle LoginStatus, il est redirigé vers l’URL spécifiée par la propriété **LogoutPageUrl.**</span><span class="sxs-lookup"><span data-stu-id="2170a-198">When a user logs out via the LoginStatus control, he or she is redirected to the URL specified by the **LogoutPageUrl** property.</span></span> <span data-ttu-id="2170a-199">Si cette propriété n’est pas définie, la page actuelle est actualisée.</span><span class="sxs-lookup"><span data-stu-id="2170a-199">If that property is not set, the current page is refreshed.</span></span> <span data-ttu-id="2170a-200">Étant donné que le site est probablement protégé par l’authentification des formulaires, la mise à jour de la page actuelle redirigera l’utilisateur vers la page de connexion du site.</span><span class="sxs-lookup"><span data-stu-id="2170a-200">Since the site is likely protected by Forms authentication, the refresh of the current page will redirect the user to the login page for the site.</span></span>

## <a name="loginname-control"></a><span data-ttu-id="2170a-201">Contrôle de LoginName</span><span class="sxs-lookup"><span data-stu-id="2170a-201">LoginName Control</span></span>

<span data-ttu-id="2170a-202">Le contrôle LoginName affiche le nom d’utilisateur de l’utilisateur actuellement connecté au site.</span><span class="sxs-lookup"><span data-stu-id="2170a-202">The LoginName control displays the username of the user currently logged into the site.</span></span>

## <a name="createuserwizard-control"></a><span data-ttu-id="2170a-203">CreateUserWizard Control</span><span class="sxs-lookup"><span data-stu-id="2170a-203">CreateUserWizard Control</span></span>

<span data-ttu-id="2170a-204">Le contrôle CreateUserWizard offre aux utilisateurs un moyen pratique de s’inscrire à votre système d’adhésion.</span><span class="sxs-lookup"><span data-stu-id="2170a-204">The CreateUserWizard control provides users with a convenient way to register for your membership system.</span></span> <span data-ttu-id="2170a-205">Vous pouvez ajouter des étapes (implémentées comme une collection de WizardSteps) via l’interface affichée ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="2170a-205">You can add steps (implemented as a collection of WizardSteps) via the interface shown below.</span></span>

![](membership/_static/image5.jpg)

<span data-ttu-id="2170a-206">**Figure 5**</span><span class="sxs-lookup"><span data-stu-id="2170a-206">**Figure 5**</span></span>

<span data-ttu-id="2170a-207">Le CreateUserWizard est un contrôle modélique qui dérive de la classe Wizard et fournit les modèles suivants:</span><span class="sxs-lookup"><span data-stu-id="2170a-207">The CreateUserWizard is a templated control that derives from the Wizard class and provides the following templates:</span></span>

- <span data-ttu-id="2170a-208">**HeaderTemplate (en)** Ce modèle contrôle l’apparence de l’en-tête de l’assistant.</span><span class="sxs-lookup"><span data-stu-id="2170a-208">**HeaderTemplate** This template controls the appearance of the header of the wizard.</span></span>
- <span data-ttu-id="2170a-209">**SidebarTemplate** Ce modèle contrôle l’apparence de la barre latérale de l’assistant.</span><span class="sxs-lookup"><span data-stu-id="2170a-209">**SidebarTemplate** This template controls the appearance of the sidebar of the wizard.</span></span>
- <span data-ttu-id="2170a-210">**StartNavigationTemplate StartNavigationTemplate** Ce modèle contrôle l’apparence de la navigation sont de l’assistant à l’étape de départ.</span><span class="sxs-lookup"><span data-stu-id="2170a-210">**StartNavigationTemplate** This template controls the appearance of the navigation are of the wizard at the start step.</span></span>
- <span data-ttu-id="2170a-211">**StepNavigationTemplate** Ce modèle contrôle l’apparence de la zone de navigation lorsqu’il n’est pas dans l’étape de départ ou de finition.</span><span class="sxs-lookup"><span data-stu-id="2170a-211">**StepNavigationTemplate** This template controls the appearance of the navigation area when not in the start or finish step.</span></span>
- <span data-ttu-id="2170a-212">**FiniNavigationTemplate** Ce modèle contrôle l’apparence de la zone de navigation lorsque vous êtes sur l’étape d’arrivée.</span><span class="sxs-lookup"><span data-stu-id="2170a-212">**FinishNavigationTemplate** This template controls the appearance of the navigation area when on the finish step.</span></span>

<span data-ttu-id="2170a-213">En outre, pour chaque étape que vous ajoutez à l’Assistant, ASP.NET créera un modèle personnalisé qui contient à la fois un ContentTemplate et un CustomNavigationTemplate pour cette étape.</span><span class="sxs-lookup"><span data-stu-id="2170a-213">Additionally, for each step that you add to the Wizard, ASP.NET will create a custom template that contains both a ContentTemplate and a CustomNavigationTemplate for that step.</span></span> <span data-ttu-id="2170a-214">Pour plus de détails sur la personnalisation de la CreateUserWizard, consultez la documentation VS.NET 2005 :</span><span class="sxs-lookup"><span data-stu-id="2170a-214">For full details on customizing the CreateUserWizard, see the VS.NET 2005 documentation:</span></span>

## <a name="changepassword-control"></a><span data-ttu-id="2170a-215">Contrôle ChangePassword</span><span class="sxs-lookup"><span data-stu-id="2170a-215">ChangePassword Control</span></span>

<span data-ttu-id="2170a-216">Le contrôle ChangePassword permet aux utilisateurs de changer son mot de passe.</span><span class="sxs-lookup"><span data-stu-id="2170a-216">The ChangePassword control allows users to change his or her password.</span></span> <span data-ttu-id="2170a-217">Si la propriété DisplayUserName est vraie (elle est fausse par défaut), l’utilisateur peut changer son mot de passe lorsqu’il n’est pas connecté.</span><span class="sxs-lookup"><span data-stu-id="2170a-217">If the DisplayUserName property is true (it is false by default), the user can change his or her password when they are not logged in.</span></span> <span data-ttu-id="2170a-218">Si l’utilisateur *est* déjà connecté et que la propriété DisplayUserName est vraie, l’utilisateur sera en mesure de modifier le mot de passe d’un autre utilisateur qui n’est pas connecté à condition qu’il connaisse l’identifiant utilisateur de cet utilisateur.</span><span class="sxs-lookup"><span data-stu-id="2170a-218">If the user *is* already logged in and the DisplayUserName property is true, the user will be able to change the password of another user that is not logged in providing they know the user ID of that user.</span></span>

<span data-ttu-id="2170a-219">Gardez à l’esprit que si vous voulez que les utilisateurs soient en mesure de changer de mot de passe sans avoir à vous connecter, vous devrez vous assurer que la page sur laquelle le contrôle ChangePassword est affiché permet un accès anonyme.</span><span class="sxs-lookup"><span data-stu-id="2170a-219">Keep in mind that if you want users to be able to change passwords without having to log in, you will need to ensure that the page on which the ChangePassword control is displayed allows anonymous access.</span></span> <span data-ttu-id="2170a-220">Évidemment, les utilisateurs devront fournir leur ancien mot de passe afin de changer leur mot de passe.</span><span class="sxs-lookup"><span data-stu-id="2170a-220">Obviously, users will have to provide their old password in order to change their password.</span></span>

## <a name="role-management"></a><span data-ttu-id="2170a-221">Gestion des rôles</span><span class="sxs-lookup"><span data-stu-id="2170a-221">Role Management</span></span>

<span data-ttu-id="2170a-222">La gestion des rôles vous permet d’attribuer des utilisateurs à un rôle particulier, puis de restreindre l’accès à certains fichiers ou dossiers en fonction de ce rôle.</span><span class="sxs-lookup"><span data-stu-id="2170a-222">Role management allows you to assign users to a particular role and then restrict access to certain file or folders based on that role.</span></span> <span data-ttu-id="2170a-223">La gestion des rôles fournit également une API afin que vous puissiez déterminer de façon programmatique le rôle de quelqu’un ou déterminer tous les utilisateurs dans un rôle particulier et répondre en conséquence.</span><span class="sxs-lookup"><span data-stu-id="2170a-223">Role management also provides an API so that you can programmatically determine someones role or determine all users in a particular role and respond accordingly.</span></span>

<span data-ttu-id="2170a-224">La gestion des rôles n’est pas une exigence dans ASP.NET membres, et l’adhésion n’est pas une exigence pour utiliser la gestion des rôles.</span><span class="sxs-lookup"><span data-stu-id="2170a-224">Role management is not a requirement in ASP.NET membership, nor is membership a requirement in order to use role management.</span></span> <span data-ttu-id="2170a-225">Cependant, les deux se complètent bien et il est probable que les développeurs les utiliseront en conjonction les uns avec les autres.</span><span class="sxs-lookup"><span data-stu-id="2170a-225">However, the two supplement each other nicely and it is likely that developers will use them in conjunction with each other.</span></span>

<span data-ttu-id="2170a-226">Pour activer la gestion des rôles dans votre application, effectuez la modification suivante dans votre fichier web.config :</span><span class="sxs-lookup"><span data-stu-id="2170a-226">To enable role management in your application, make the following change in your web.config file:</span></span>

[!code-xml[Main](membership/samples/sample2.xml)]

<span data-ttu-id="2170a-227">Lorsque **l’attribut cacheRolesInCookie** est configuré pour vrai, ASP.NET cache une adhésion au rôle des utilisateurs dans un cookie sur le client.</span><span class="sxs-lookup"><span data-stu-id="2170a-227">When the **cacheRolesInCookie** attribute is set to true, ASP.NET caches a users role membership in a cookie on the client.</span></span> <span data-ttu-id="2170a-228">Cela permet aux examens de rôle de se produire sans appels dans le RoleProvider.</span><span class="sxs-lookup"><span data-stu-id="2170a-228">This allows role lookups to occur without calls into the RoleProvider.</span></span> <span data-ttu-id="2170a-229">Lors de l’utilisation de cet attribut, les développeurs sont encouragés à s’assurer que **l’attribut cookieProtection** est réglé à tous.</span><span class="sxs-lookup"><span data-stu-id="2170a-229">When using this attribute, developers are encouraged to ensure that the **cookieProtection** attribute is set to All.</span></span> <span data-ttu-id="2170a-230">(C’est le paramètre par défaut.) Cela garantit que les données de cookies sont cryptées et permet de s’assurer que le contenu des cookies n’a pas été modifié.</span><span class="sxs-lookup"><span data-stu-id="2170a-230">(This is the default setting.) This ensures that the cookie data are encrypted and helps to ensure that the cookies contents haven't been altered.</span></span> <span data-ttu-id="2170a-231">Les rôles peuvent être ajoutés à l’aide de l’outil d’administration du site Web.</span><span class="sxs-lookup"><span data-stu-id="2170a-231">Roles can be added using the Web Site Administration Tool.</span></span> <span data-ttu-id="2170a-232">Il vous permet de définir facilement les rôles, de configurer l’accès à certaines parties du site en fonction de ces rôles et d’attribuer aux utilisateurs des rôles.</span><span class="sxs-lookup"><span data-stu-id="2170a-232">It allows you to easily define roles, configure access to parts of the site based on those roles, and assign users to roles.</span></span>

![](membership/_static/image6.jpg)

<span data-ttu-id="2170a-233">**Figure 6**</span><span class="sxs-lookup"><span data-stu-id="2170a-233">**Figure 6**</span></span>

<span data-ttu-id="2170a-234">Comme indiqué ci-dessus, de nouveaux rôles peuvent être ajoutés en entrant simplement le nom du rôle, puis en cliquant sur Add Role.</span><span class="sxs-lookup"><span data-stu-id="2170a-234">As shown above, new roles can be added by simply entering the name of the role and then clicking Add Role.</span></span> <span data-ttu-id="2170a-235">Les rôles existants peuvent être gérés ou supprimés en cliquant sur le lien approprié dans la liste des rôles existants.</span><span class="sxs-lookup"><span data-stu-id="2170a-235">Existing roles can be managed or deleted by clicking the appropriate link in the list of existing roles.</span></span>

<span data-ttu-id="2170a-236">Lorsque vous gérez un rôle, vous pouvez ajouter ou supprimer les utilisateurs tels qu’ils sont indiqués ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="2170a-236">When you manage a role, you can add or remove users as shown below.</span></span>

![](membership/_static/image7.jpg)

<span data-ttu-id="2170a-237">**Figure 7**</span><span class="sxs-lookup"><span data-stu-id="2170a-237">**Figure 7**</span></span>

<span data-ttu-id="2170a-238">En vérifiant que la case à cocher de l’utilisateur est dans la boîte de contrôle, vous pouvez facilement ajouter un utilisateur à un rôle spécifique.</span><span class="sxs-lookup"><span data-stu-id="2170a-238">By checking the User Is In Role checkbox, you can easily add a user to a specific role.</span></span> <span data-ttu-id="2170a-239">ASP.NET mettra à jour automatiquement votre base de données d’adhésion avec les entrées appropriées.</span><span class="sxs-lookup"><span data-stu-id="2170a-239">ASP.NET will automatically update your membership database with the appropriate entries.</span></span> <span data-ttu-id="2170a-240">Vous voudrez également configurer les règles d’accès pour votre application.</span><span class="sxs-lookup"><span data-stu-id="2170a-240">You will also want to configure access rules for your application.</span></span> <span data-ttu-id="2170a-241">ASP.NET développeurs 1.x sont familiers avec le &lt;&gt; faire via l’élément d’autorisation dans le fichier web.config, et cette option est toujours disponible en ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="2170a-241">ASP.NET 1.x developers are familiar with doing this via the &lt;authorization&gt; element in the web.config file, and that option is still available in ASP.NET 2.0.</span></span> <span data-ttu-id="2170a-242">Cependant, il est plus facile de gérer les règles d’accès à l’aide de l’outil d’administration de site Web comme indiqué ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="2170a-242">However, its easier to manage access rules using the Web Site Administration Tool as shown below.</span></span>

![](membership/_static/image8.jpg)

<span data-ttu-id="2170a-243">**Figure 8**</span><span class="sxs-lookup"><span data-stu-id="2170a-243">**Figure 8**</span></span>

<span data-ttu-id="2170a-244">Dans ce cas, le dossier de l’Administration est mis en évidence (son difficile à voir parce que l’outil le met en évidence en gris clair) et le rôle des administrateurs a été accordé l’accès.</span><span class="sxs-lookup"><span data-stu-id="2170a-244">In this case, the Administration folder is highlighted (its difficult to see because the tool highlights it in light gray) and the Administrators role has been granted access.</span></span> <span data-ttu-id="2170a-245">Tous les autres utilisateurs sont refusés.</span><span class="sxs-lookup"><span data-stu-id="2170a-245">All other users are denied.</span></span> <span data-ttu-id="2170a-246">Vous pouvez cliquer sur l’icône de tête pour sélectionner une règle, puis utiliser les boutons Move Up et Move Down pour organiser les règles.</span><span class="sxs-lookup"><span data-stu-id="2170a-246">You can click on the head icon to select a rule and then use the Move Up and Move Down buttons to arrange the rules.</span></span> <span data-ttu-id="2170a-247">Comme pour l’élément &lt;&gt; d’autorisation ASP.NET, les règles sont traitées dans l’ordre dans lequel elles apparaissent.</span><span class="sxs-lookup"><span data-stu-id="2170a-247">As with the ASP.NET &lt;authorization&gt; element, rules are processed in the order in which they appear.</span></span> <span data-ttu-id="2170a-248">En d’autres termes, si l’ordre des règles dans le coup ci-dessus ont été inversés, personne n’aurait accès au dossier de l’Administration parce que la première règle que ASP.NET rencontrerait serait la règle qui refuse tout le monde au dossier.</span><span class="sxs-lookup"><span data-stu-id="2170a-248">In other words, if the order of rules in the shot above were reversed, no one would have access to the Administration folder because the first rule that ASP.NET would encounter would be the rule that denies everyone to the folder.</span></span>

<span data-ttu-id="2170a-249">ASP.NET 2.0 ajoute un fichier web.config au dossier pour lequel vous spécifiez une règle d’accès.</span><span class="sxs-lookup"><span data-stu-id="2170a-249">ASP.NET 2.0 adds a web.config file to the folder for which you are specifying an access rule.</span></span> <span data-ttu-id="2170a-250">Les règles d’accès peuvent être modifiées via le fichier de configuration ou via l’outil d’administration du site Web.</span><span class="sxs-lookup"><span data-stu-id="2170a-250">Access rules can be edited via the configuration file or via the Web Site Administration Tool.</span></span> <span data-ttu-id="2170a-251">En d’autres termes, l’outil d’administration du site Web est simplement une interface par laquelle le fichier de configuration peut être édité dans un environnement convivial.</span><span class="sxs-lookup"><span data-stu-id="2170a-251">In other words, the Web Site Administration Tool is simply an interface through which the configuration file can be edited in a user-friendly environment.</span></span>

## <a name="using-roles-in-code"></a><span data-ttu-id="2170a-252">Utilisation des rôles dans le code</span><span class="sxs-lookup"><span data-stu-id="2170a-252">Using Roles in Code</span></span>

<span data-ttu-id="2170a-253">L’API pour la gestion des rôles n’a pas changé depuis la version 1.x.</span><span class="sxs-lookup"><span data-stu-id="2170a-253">The API for role management has not changed since version 1.x.</span></span> <span data-ttu-id="2170a-254">La méthode **IsInRole** est utilisée pour déterminer si un utilisateur joue un rôle particulier.</span><span class="sxs-lookup"><span data-stu-id="2170a-254">The **IsInRole** method is used to determine if a user is in a particular role.</span></span>

[!code-csharp[Main](membership/samples/sample3.cs)]

<span data-ttu-id="2170a-255">ASP.NET crée également un rôle principal en tant que membre du contexte actuel.</span><span class="sxs-lookup"><span data-stu-id="2170a-255">ASP.NET also creates a RolePrincipal instance as a member of the current context.</span></span> <span data-ttu-id="2170a-256">L’objet RolePrincipal peut être utilisé pour obtenir tous les rôles auxquels l’utilisateur appartient comme suit :</span><span class="sxs-lookup"><span data-stu-id="2170a-256">The RolePrincipal object can be used to obtain all of the roles to which the user belongs as follows:</span></span>

[!code-csharp[Main](membership/samples/sample4.cs)]

## <a name="using-rolegroups-with-the-loginview-control"></a><span data-ttu-id="2170a-257">Utilisation de RoleGroups avec le contrôle LoginView</span><span class="sxs-lookup"><span data-stu-id="2170a-257">Using RoleGroups with the LoginView Control</span></span>

<span data-ttu-id="2170a-258">Maintenant que vous avez une compréhension de la gestion des rôles et de l’adhésion, permet de discuter brièvement de la façon dont le contrôle LoginView tire parti de cette capacité dans ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="2170a-258">Now that you have an understanding of role management and membership, lets discuss briefly how the LoginView control takes advantage of this capability in ASP.NET 2.0.</span></span> <span data-ttu-id="2170a-259">Comme nous l’avons déjà mentionné, le contrôle LoginView est un contrôle modélisant qui contient deux modèles par défaut; AnonymousTemplate et le LoggedInTemplate.</span><span class="sxs-lookup"><span data-stu-id="2170a-259">As previously discussed, the LoginView control is a templated control that contains two templates by default; the AnonymousTemplate and the LoggedInTemplate.</span></span> <span data-ttu-id="2170a-260">Dans le dialogue LoginView Tasks est un lien (indiqué ci-dessous) qui vous permet de modifier RoleGroups.</span><span class="sxs-lookup"><span data-stu-id="2170a-260">Within the LoginView Tasks dialog is a link (shown below) that allows you to edit RoleGroups.</span></span>

![](membership/_static/image9.jpg)

<span data-ttu-id="2170a-261">**Figure 9**</span><span class="sxs-lookup"><span data-stu-id="2170a-261">**Figure 9**</span></span>

<span data-ttu-id="2170a-262">Chaque objet RoleGroup contient un tableau de chaînes qui définit les rôles auxquels RoleGroup s’applique.</span><span class="sxs-lookup"><span data-stu-id="2170a-262">Each RoleGroup object contains an array of strings that defines which roles that RoleGroup applies to.</span></span> <span data-ttu-id="2170a-263">Pour ajouter un nouveau Groupe de rôle au contrôle LoginView, cliquez sur le lien Edit RoleGroups.</span><span class="sxs-lookup"><span data-stu-id="2170a-263">To add a new RoleGroup to the LoginView control, click the Edit RoleGroups link.</span></span> <span data-ttu-id="2170a-264">Dans l’image ci-dessus, vous pouvez voir que j’ai ajouté un nouveau Groupe de rôle pour les administrateurs.</span><span class="sxs-lookup"><span data-stu-id="2170a-264">In the image above, you can see that I have added a new RoleGroup for Administrators.</span></span> <span data-ttu-id="2170a-265">En sélectionnant ce RoleGroup (RoleGroup[0]) à partir de la décroche vues, je peux configurer un modèle qui ne sera affiché qu’aux membres du rôle des administrateurs.</span><span class="sxs-lookup"><span data-stu-id="2170a-265">By selecting that RoleGroup (RoleGroup[0]) from the Views dropdown, I can configure a template that will only be displayed to members of the Administrators role.</span></span> <span data-ttu-id="2170a-266">Dans l’image ci-dessous, j’ai ajouté un nouveau RoleGroup qui s’applique aux membres du rôle de vente et le rôle de distribution.</span><span class="sxs-lookup"><span data-stu-id="2170a-266">In the image below, I have added a new RoleGroup that applies to members of the Sales role and the Distribution role.</span></span> <span data-ttu-id="2170a-267">Cela ajoute un deuxième Groupe de rôle à la baisse vues dans le dialogue LoginView Tasks et tout ce qui est ajouté à ce modèle sera visible par tout utilisateur dans le rôle de vente ou de distribution.</span><span class="sxs-lookup"><span data-stu-id="2170a-267">This adds a second RoleGroup to the Views dropdown in the LoginView Tasks dialog and anything added to that template will be visible by any user in either the Sales or Distribution role.</span></span>

![](membership/_static/image10.jpg)

<span data-ttu-id="2170a-268">**Figure 10**</span><span class="sxs-lookup"><span data-stu-id="2170a-268">**Figure 10**</span></span>

## <a name="overriding-the-existing-membership-provider"></a><span data-ttu-id="2170a-269">L’adhésion au fournisseur existant</span><span class="sxs-lookup"><span data-stu-id="2170a-269">Overriding the Existing Membership Provider</span></span>

<span data-ttu-id="2170a-270">Il ya quelques façons que vous pouvez étendre la fonctionnalité de ASP.NET membres.</span><span class="sxs-lookup"><span data-stu-id="2170a-270">There are a couple of ways that you can extend the functionality of ASP.NET membership.</span></span> <span data-ttu-id="2170a-271">Tout d’abord, vous pouvez évidemment modifier la fonctionnalité existante de la classe SqlMembershipProvider en héritant de lui et en dominant ses méthodes.</span><span class="sxs-lookup"><span data-stu-id="2170a-271">First of all, you can obviously change the existing functionality of the SqlMembershipProvider class by inheriting from it and overriding its methods.</span></span> <span data-ttu-id="2170a-272">Par exemple, si vous souhaitez implémenter vos propres fonctionnalités lorsque des utilisateurs sont créés, vous pouvez créer votre propre classe qui hérite de SqlMembershipProvider comme suit :</span><span class="sxs-lookup"><span data-stu-id="2170a-272">For example, if you want to implement your own functionality when users are created, you can create your own class that inherits from SqlMembershipProvider as follows:</span></span>

[!code-csharp[Main](membership/samples/sample5.cs)]

<span data-ttu-id="2170a-273">Si, par contre, vous souhaitez créer votre propre fournisseur (pour stocker vos informations d’adhésion dans une base de données Access, par exemple), vous pouvez créer votre propre fournisseur.</span><span class="sxs-lookup"><span data-stu-id="2170a-273">If, on the other hand, you want to create your own provider (to store your membership information in an Access database, for example), you can create your own provider.</span></span>

## <a name="creating-your-own-membership-provider"></a><span data-ttu-id="2170a-274">Créer votre propre fournisseur d’adhésion</span><span class="sxs-lookup"><span data-stu-id="2170a-274">Creating Your Own Membership Provider</span></span>

<span data-ttu-id="2170a-275">Pour créer votre propre fournisseur d’adhésion, vous devrez d’abord créer une classe qui hérite de la classe MembershipProvider.</span><span class="sxs-lookup"><span data-stu-id="2170a-275">To create your own membership provider, you will first need to create a class that inherits from the MembershipProvider class.</span></span> <span data-ttu-id="2170a-276">Si vous utilisez VB.NET, Visual Studio 2005 ajoutera les talons pour toutes les méthodes dont vous avez besoin pour passer outre.</span><span class="sxs-lookup"><span data-stu-id="2170a-276">If you are using VB.NET, Visual Studio 2005 will add the stubs for all of the methods that you need to override.</span></span> <span data-ttu-id="2170a-277">Si vous utilisez C, c’est à vous d’ajouter les talons.</span><span class="sxs-lookup"><span data-stu-id="2170a-277">If you are using C#, its up to you to add the stubs.</span></span>

<span data-ttu-id="2170a-278">Vous devrez passer outre ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="2170a-278">You will need to override the following:</span></span>

- <span data-ttu-id="2170a-279">Propriété ApplicationName</span><span class="sxs-lookup"><span data-stu-id="2170a-279">ApplicationName property</span></span>
- <span data-ttu-id="2170a-280">Fonction ChangePassword</span><span class="sxs-lookup"><span data-stu-id="2170a-280">ChangePassword function</span></span>
- <span data-ttu-id="2170a-281">ChangePasswordQuestionAndAnswer fonction</span><span class="sxs-lookup"><span data-stu-id="2170a-281">ChangePasswordQuestionAndAnswer function</span></span>
- <span data-ttu-id="2170a-282">Créer la fonction De l’us</span><span class="sxs-lookup"><span data-stu-id="2170a-282">CreateUser function</span></span>
- <span data-ttu-id="2170a-283">Fonction DeleteUser</span><span class="sxs-lookup"><span data-stu-id="2170a-283">DeleteUser function</span></span>
- <span data-ttu-id="2170a-284">Propriété EnablePasswordReset</span><span class="sxs-lookup"><span data-stu-id="2170a-284">EnablePasswordReset property</span></span>
- <span data-ttu-id="2170a-285">Propriété EnablePasswordRetrieval</span><span class="sxs-lookup"><span data-stu-id="2170a-285">EnablePasswordRetrieval property</span></span>
- <span data-ttu-id="2170a-286">FindUsersByemail fonction</span><span class="sxs-lookup"><span data-stu-id="2170a-286">FindUsersByEmail function</span></span>
- <span data-ttu-id="2170a-287">FindUsersByName fonction</span><span class="sxs-lookup"><span data-stu-id="2170a-287">FindUsersByName function</span></span>
- <span data-ttu-id="2170a-288">Fonction GetAllUsers</span><span class="sxs-lookup"><span data-stu-id="2170a-288">GetAllUsers function</span></span>
- <span data-ttu-id="2170a-289">Fonction GetNumberOfUsersOnline</span><span class="sxs-lookup"><span data-stu-id="2170a-289">GetNumberOfUsersOnline function</span></span>
- <span data-ttu-id="2170a-290">Fonction GetPassword</span><span class="sxs-lookup"><span data-stu-id="2170a-290">GetPassword function</span></span>
- <span data-ttu-id="2170a-291">Fonction GetUser</span><span class="sxs-lookup"><span data-stu-id="2170a-291">GetUser function</span></span>
- <span data-ttu-id="2170a-292">Fonction GetUserNameByEmail</span><span class="sxs-lookup"><span data-stu-id="2170a-292">GetUserNameByEmail function</span></span>
- <span data-ttu-id="2170a-293">Propriété MaxInvalidPasswordAttempts</span><span class="sxs-lookup"><span data-stu-id="2170a-293">MaxInvalidPasswordAttempts property</span></span>
- <span data-ttu-id="2170a-294">MinRequiredNonAlphanumericCharacters propriété</span><span class="sxs-lookup"><span data-stu-id="2170a-294">MinRequiredNonAlphanumericCharacters property</span></span>
- <span data-ttu-id="2170a-295">MinRequiredPasswordLength propriété</span><span class="sxs-lookup"><span data-stu-id="2170a-295">MinRequiredPasswordLength property</span></span>
- <span data-ttu-id="2170a-296">Propriété PasswordAttemptWindow</span><span class="sxs-lookup"><span data-stu-id="2170a-296">PasswordAttemptWindow property</span></span>
- <span data-ttu-id="2170a-297">Propriété PasswordFormat</span><span class="sxs-lookup"><span data-stu-id="2170a-297">PasswordFormat property</span></span>
- <span data-ttu-id="2170a-298">PasswordStrengthRegularExpression propriété</span><span class="sxs-lookup"><span data-stu-id="2170a-298">PasswordStrengthRegularExpression property</span></span>
- <span data-ttu-id="2170a-299">ExigeQuestionAndAnswer propriété</span><span class="sxs-lookup"><span data-stu-id="2170a-299">RequiresQuestionAndAnswer property</span></span>
- <span data-ttu-id="2170a-300">Nécessite une propriété UniqueEmail</span><span class="sxs-lookup"><span data-stu-id="2170a-300">RequiresUniqueEmail property</span></span>
- <span data-ttu-id="2170a-301">Fonction ResetPassword</span><span class="sxs-lookup"><span data-stu-id="2170a-301">ResetPassword function</span></span>
- <span data-ttu-id="2170a-302">Débloquer la fonction utilisateur</span><span class="sxs-lookup"><span data-stu-id="2170a-302">Unlock user function</span></span>
- <span data-ttu-id="2170a-303">Fonction UpdateUser</span><span class="sxs-lookup"><span data-stu-id="2170a-303">UpdateUser function</span></span>
- <span data-ttu-id="2170a-304">Validation De la fonction De l’us</span><span class="sxs-lookup"><span data-stu-id="2170a-304">ValidateUser function</span></span>

<span data-ttu-id="2170a-305">C’est tout à fait une liste à mettre en œuvre en tant que développeur C.</span><span class="sxs-lookup"><span data-stu-id="2170a-305">Thats quite a list to implement as a C# developer.</span></span> <span data-ttu-id="2170a-306">Vous pouvez trouver plus facile de créer la classe en VB.NET sans aucune implémentation, puis utiliser .NET Reflector ou un outil similaire pour convertir le code en C.</span><span class="sxs-lookup"><span data-stu-id="2170a-306">You may find it easier to create the class in VB.NET without any implementation and then use .NET Reflector or a similar tool to convert the code to C#.</span></span>

<span data-ttu-id="2170a-307">La chaîne de connexion et d’autres propriétés doivent être réglées à leurs défauts dans la méthode Initialize.</span><span class="sxs-lookup"><span data-stu-id="2170a-307">The connection string and other properties should be set to their defaults in the Initialize method.</span></span> <span data-ttu-id="2170a-308">(La méthode Initialize est congédiée lorsque le fournisseur est chargé au moment de l’exécution.) Le deuxième paramètre de la méthode Initialize est de type System.Collections.Specialized.NameValueCollection et est une référence à l’élément &lt;d’ajout&gt; qui est associé à votre fournisseur personnalisé dans le fichier web.config.</span><span class="sxs-lookup"><span data-stu-id="2170a-308">(The Initialize method is fired when the provider is loaded at runtime.) The second parameter to the Initialize method is of type System.Collections.Specialized.NameValueCollection and is a reference to the &lt;add&gt; element that is associated with your custom provider in the web.config file.</span></span> <span data-ttu-id="2170a-309">Cette entrée ressemble à ce qui suit:</span><span class="sxs-lookup"><span data-stu-id="2170a-309">That entry looks like the following:</span></span>

[!code-xml[Main](membership/samples/sample6.xml)]

<span data-ttu-id="2170a-310">Voici un exemple de la méthode Initialize.</span><span class="sxs-lookup"><span data-stu-id="2170a-310">Here is an example of the Initialize method.</span></span>

[!code-csharp[Main](membership/samples/sample7.cs)]

<span data-ttu-id="2170a-311">Afin de valider l’utilisateur lorsqu’il soumet votre formulaire de connexion, vous devrez utiliser la méthode ValidateUser.</span><span class="sxs-lookup"><span data-stu-id="2170a-311">In order to validate the user when they submit your login form, you will need to use the ValidateUser method.</span></span> <span data-ttu-id="2170a-312">Cette méthode s’allume lorsque l’utilisateur clique sur le bouton de connexion dans le contrôle De la connexion.</span><span class="sxs-lookup"><span data-stu-id="2170a-312">This method fires when the user clicks the login button in the Login control.</span></span> <span data-ttu-id="2170a-313">Vous placez votre code qui ne l’utilisateur recherche dans cette méthode.</span><span class="sxs-lookup"><span data-stu-id="2170a-313">You will place your code that does the user lookup in this method.</span></span>

<span data-ttu-id="2170a-314">Comme vous pouvez le voir, l’écriture de votre propre fournisseur d’adhésion n’est pas difficile et vous permet d’étendre cette fonctionnalité puissante de ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="2170a-314">As you can see, writing your own membership provider is not difficult and allows you to extend this powerful functionality of ASP.NET 2.0.</span></span>

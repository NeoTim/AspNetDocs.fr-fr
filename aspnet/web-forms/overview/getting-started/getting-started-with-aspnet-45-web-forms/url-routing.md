---
uid: web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/url-routing
title: Routage d’URL | Microsoft Docs
author: Erikre
description: Cette série de didacticiels vous apprend les notions de base de la création d’une application Web Forms ASP.NET à l’aide de ASP.NET 4.5 et Microsoft Visual Studio Express 2013 pour nous...
ms.author: riande
ms.date: 09/08/2014
ms.assetid: 4f4bf092-c400-471f-a876-78fda0417890
msc.legacyurl: /web-forms/overview/getting-started/getting-started-with-aspnet-45-web-forms/url-routing
msc.type: authoredcontent
ms.openlocfilehash: d9f0779d560d6ec7796a16dc2996b959dd171c80
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/01/2019
ms.locfileid: "57062356"
---
<a name="url-routing"></a><span data-ttu-id="b4ac0-103">Routage d’URL</span><span class="sxs-lookup"><span data-stu-id="b4ac0-103">URL Routing</span></span>
====================
<span data-ttu-id="b4ac0-104">par [Erik Reitan](https://github.com/Erikre)</span><span class="sxs-lookup"><span data-stu-id="b4ac0-104">by [Erik Reitan](https://github.com/Erikre)</span></span>

<span data-ttu-id="b4ac0-105">[Télécharger le projet de Wingtip Toys exemple (C#)](http://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) ou [télécharger l’E-book (PDF)](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span><span class="sxs-lookup"><span data-stu-id="b4ac0-105">[Download Wingtip Toys Sample Project (C#)](http://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) or [Download E-book (PDF)](http://download.microsoft.com/download/0/F/B/0FBFAA46-2BFD-478F-8E56-7BF3C672DF9D/Getting%20Started%20with%20ASP.NET%204.5%20Web%20Forms%20and%20Visual%20Studio%202013.pdf)</span></span>

> <span data-ttu-id="b4ac0-106">Cette série de didacticiels vous apprend les notions de base de la création d’une application Web Forms ASP.NET à l’aide de ASP.NET 4.5 et Microsoft Visual Studio Express 2013 pour le Web.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-106">This tutorial series will teach you the basics of building an ASP.NET Web Forms application using ASP.NET 4.5 and Microsoft Visual Studio Express 2013 for Web.</span></span> <span data-ttu-id="b4ac0-107">Un Visual Studio 2013 [projet avec du code source C#](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) est disponible pour accompagner cette série de didacticiels.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-107">A Visual Studio 2013 [project with C# source code](https://go.microsoft.com/fwlink/?LinkID=389434&clcid=0x409) is available to accompany this tutorial series.</span></span>


<span data-ttu-id="b4ac0-108">Dans ce didacticiel, vous allez modifier l’exemple d’application Wingtip Toys pour prendre en charge le routage d’URL.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-108">In this tutorial, you will modify the Wingtip Toys sample application to support URL routing.</span></span> <span data-ttu-id="b4ac0-109">Routage permet à votre application web utiliser des URL qui sont mieux pris en charge par les moteurs de recherche, plus facile à mémoriser et convivial.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-109">Routing enables your web application to use URLs that are friendly, easier to remember, and better supported by search engines.</span></span> <span data-ttu-id="b4ac0-110">Ce didacticiel s’appuie sur le didacticiel précédent, « L’appartenance et Administration » et fait partie de la série de didacticiels Wingtip Toys.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-110">This tutorial builds on the previous tutorial "Membership and Administration" and is part of the Wingtip Toys tutorial series.</span></span>

## <a name="what-youll-learn"></a><span data-ttu-id="b4ac0-111">Ce que vous allez apprendre :</span><span class="sxs-lookup"><span data-stu-id="b4ac0-111">What you'll learn:</span></span>

- <span data-ttu-id="b4ac0-112">Comment inscrire des itinéraires pour une application ASP.NET Web Forms.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-112">How to register routes for an ASP.NET Web Forms application.</span></span>
- <span data-ttu-id="b4ac0-113">Comment ajouter des itinéraires à une page web.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-113">How to add routes to a web page.</span></span>
- <span data-ttu-id="b4ac0-114">Comment sélectionner des données dans une base de données pour prendre en charge des itinéraires.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-114">How to select data from a database to support routes.</span></span>

## <a name="aspnet-routing-overview"></a><span data-ttu-id="b4ac0-115">Vue d’ensemble du routage ASP.NET</span><span class="sxs-lookup"><span data-stu-id="b4ac0-115">ASP.NET Routing Overview</span></span>

<span data-ttu-id="b4ac0-116">Routage d’URL vous permet de configurer une application pour accepter les URL qui ne sont pas mappent à des fichiers physiques de la requête.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-116">URL routing allows you to configure an application to accept request URLs that do not map to physical files.</span></span> <span data-ttu-id="b4ac0-117">Une URL de demande est simplement l’URL un utilisateur entre dans son navigateur pour rechercher une page sur votre site web.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-117">A request URL is simply the URL a user enters into their browser to find a page on your web site.</span></span> <span data-ttu-id="b4ac0-118">Utiliser le routage pour définir des URL qui sont sémantiquement explicites pour les utilisateurs et qui peut faciliter l’optimisation de moteur de recherche (SEO).</span><span class="sxs-lookup"><span data-stu-id="b4ac0-118">You use routing to define URLs that are semantically meaningful to users and that can help with search-engine optimization (SEO).</span></span>

<span data-ttu-id="b4ac0-119">Par défaut, le modèle Web Forms inclut [les URL conviviales ASP.NET](http://www.nuget.org/packages/Microsoft.AspNet.FriendlyUrls/).</span><span class="sxs-lookup"><span data-stu-id="b4ac0-119">By default, the Web Forms template includes [ASP.NET Friendly URLs](http://www.nuget.org/packages/Microsoft.AspNet.FriendlyUrls/).</span></span> <span data-ttu-id="b4ac0-120">Grande partie du travail de routage de base sera implémentée à l’aide de *URL conviviales*.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-120">Much of the basic routing work will be implemented by using *Friendly URLs*.</span></span> <span data-ttu-id="b4ac0-121">Toutefois, dans ce didacticiel, vous allez ajouter des fonctionnalités de routage personnalisées.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-121">However, in this tutorial you will add customized routing capabilities.</span></span>

<span data-ttu-id="b4ac0-122">Avant de personnaliser le routage d’URL, l’exemple d’application Wingtip Toys peut lier à un produit à l’aide de l’URL suivante :</span><span class="sxs-lookup"><span data-stu-id="b4ac0-122">Before customizing URL routing, the Wingtip Toys sample application can link to a product using the following URL:</span></span>

`https://localhost:44300/ProductDetails.aspx?productID=2`

<span data-ttu-id="b4ac0-123">En personnalisant le routage d’URL, l’exemple d’application Wingtip Toys sera liée à la même produit à l’aide d’un plus facile à lire l’URL :</span><span class="sxs-lookup"><span data-stu-id="b4ac0-123">By customizing URL routing, the Wingtip Toys sample application will link to the same product using an easier to read URL:</span></span>

`https://localhost:44300/Product/Convertible%20Car`

### <a name="routes"></a><span data-ttu-id="b4ac0-124">Routes</span><span class="sxs-lookup"><span data-stu-id="b4ac0-124">Routes</span></span>

<span data-ttu-id="b4ac0-125">Un itinéraire est un modèle d’URL qui est mappé à un gestionnaire.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-125">A route is a URL pattern that is mapped to a handler.</span></span> <span data-ttu-id="b4ac0-126">Le gestionnaire peut être un fichier physique, tel qu’un fichier .aspx dans une application Web Forms.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-126">The handler can be a physical file, such as an .aspx file in a Web Forms application.</span></span> <span data-ttu-id="b4ac0-127">Un gestionnaire peut également être une classe qui traite la demande.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-127">A handler can also be a class that processes the request.</span></span> <span data-ttu-id="b4ac0-128">Pour définir un itinéraire, vous créez une instance de la classe d’itinéraire en spécifiant le modèle d’URL, le gestionnaire et éventuellement un nom pour l’itinéraire.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-128">To define a route, you create an instance of the Route class by specifying the URL pattern, the handler, and optionally a name for the route.</span></span>

<span data-ttu-id="b4ac0-129">Ajouter de l’itinéraire à l’application en ajoutant le `Route` objet à la méthode statique `Routes` propriété de la `RouteTable` classe.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-129">You add the route to the application by adding the `Route` object to the static `Routes` property of the `RouteTable` class.</span></span> <span data-ttu-id="b4ac0-130">La propriété d’itinéraires est une `RouteCollection` objet qui stocke tous les itinéraires de l’application.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-130">The Routes property is a `RouteCollection` object that stores all the routes for the application.</span></span>

### <a name="url-patterns"></a><span data-ttu-id="b4ac0-131">Modèles d’URL</span><span class="sxs-lookup"><span data-stu-id="b4ac0-131">URL Patterns</span></span>

<span data-ttu-id="b4ac0-132">Un modèle d’URL peut contenir des valeurs littérales et divers emplacements réservés (également appelés paramètres d’URL).</span><span class="sxs-lookup"><span data-stu-id="b4ac0-132">A URL pattern can contain literal values and variable placeholders (referred to as URL parameters).</span></span> <span data-ttu-id="b4ac0-133">Les littéraux et les espaces réservés sont situés dans des segments de l’URL qui sont délimités par une barre oblique (`/`) caractères.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-133">The literals and placeholders are located in segments of the URL which are delimited by the slash (`/`) character.</span></span>

<span data-ttu-id="b4ac0-134">Lorsqu’une demande à votre application web est effectuée, l’URL est analysée dans les segments et des espaces réservés, et les valeurs des variables sont fournies pour le Gestionnaire de requête.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-134">When a request to your web application is made, the URL is parsed into segments and placeholders, and the variable values are provided to the request handler.</span></span> <span data-ttu-id="b4ac0-135">Ce processus est similaire à la façon dont les données dans une chaîne de requête sont analysées et transmies au Gestionnaire de requêtes.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-135">This process is similar to the way the data in a query string is parsed and passed to the request handler.</span></span> <span data-ttu-id="b4ac0-136">Dans les deux cas, les informations sur les variables sont incluses dans l’URL et passées au gestionnaire sous la forme de paires clé-valeur.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-136">In both cases, variable information is included in the URL and passed to the handler in the form of key-value pairs.</span></span> <span data-ttu-id="b4ac0-137">Pour les chaînes de requête, les clés et les valeurs sont dans l’URL.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-137">For query strings, both the keys and the values are in the URL.</span></span> <span data-ttu-id="b4ac0-138">Pour les itinéraires, les clés sont les noms d’espace réservé définis dans le modèle d’URL, et seules les valeurs figurent dans l’URL.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-138">For routes, the keys are the placeholder names defined in the URL pattern, and only the values are in the URL.</span></span>

<span data-ttu-id="b4ac0-139">Dans un modèle d’URL, vous définissez des espaces réservés en les plaçant entre accolades ( `{` et `}` ).</span><span class="sxs-lookup"><span data-stu-id="b4ac0-139">In a URL pattern, you define placeholders by enclosing them in braces ( `{` and `}` ).</span></span> <span data-ttu-id="b4ac0-140">Vous pouvez définir plusieurs espaces réservés dans un segment, mais les espaces réservés doivent être séparés par une valeur littérale.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-140">You can define more than one placeholder in a segment, but the placeholders must be separated by a literal value.</span></span> <span data-ttu-id="b4ac0-141">Par exemple, `{language}-{country}/{action}` est un modèle d’itinéraire valide.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-141">For example, `{language}-{country}/{action}` is a valid route pattern.</span></span> <span data-ttu-id="b4ac0-142">Toutefois, `{language}{country}/{action}` n’est pas un modèle valide, car il n’existe aucune valeur littérale ou un séparateur entre les espaces réservés.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-142">However, `{language}{country}/{action}` is not a valid pattern, because there is no literal value or delimiter between the placeholders.</span></span> <span data-ttu-id="b4ac0-143">Par conséquent, le routage ne peut pas déterminer où séparer la valeur pour l’espace réservé de langue à partir de la valeur de l’espace réservé de pays.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-143">Therefore, routing cannot determine where to separate the value for the language placeholder from the value for the country placeholder.</span></span>

### <a name="mapping-and-registering-routes"></a><span data-ttu-id="b4ac0-144">Mappage et l’inscription d’itinéraires</span><span class="sxs-lookup"><span data-stu-id="b4ac0-144">Mapping and Registering Routes</span></span>

<span data-ttu-id="b4ac0-145">Avant que vous pouvez inclure des itinéraires vers des pages de l’exemple d’application Wingtip Toys, vous devez inscrire les itinéraires lorsque l’application démarre.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-145">Before you can include routes to pages of the Wingtip Toys sample application, you must register the routes when the application starts.</span></span> <span data-ttu-id="b4ac0-146">Pour inscrire les itinéraires, vous allez modifier le `Application_Start` Gestionnaire d’événements.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-146">To register the routes, you will modify the `Application_Start` event handler.</span></span>

1. <span data-ttu-id="b4ac0-147">Dans **l’Explorateur de solutions**de Visual Studio, recherchez et ouvrez le *Global.asax.cs* fichier.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-147">In **Solution Explorer**of Visual Studio, find and open the *Global.asax.cs* file.</span></span>
2. <span data-ttu-id="b4ac0-148">Ajoutez le code mis en surbrillance en jaune pour le *Global.asax.cs* fichier comme suit :</span><span class="sxs-lookup"><span data-stu-id="b4ac0-148">Add the code highlighted in yellow to the *Global.asax.cs* file as follows:</span></span>   

    [!code-csharp[Main](url-routing/samples/sample1.cs?highlight=30-31,34-46)]

<span data-ttu-id="b4ac0-149">Lorsque le Wingtip Toys exemple d’application a démarré, il appelle le `Application_Start` Gestionnaire d’événements.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-149">When the Wingtip Toys sample application starts, it calls the `Application_Start` event handler.</span></span> <span data-ttu-id="b4ac0-150">À la fin de ce gestionnaire d’événements, le `RegisterCustomRoutes` méthode est appelée.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-150">At the end of this event handler, the `RegisterCustomRoutes` method is called.</span></span> <span data-ttu-id="b4ac0-151">Le `RegisterCustomRoutes` méthode ajoute chaque itinéraire en appelant le `MapPageRoute` méthode de la `RouteCollection` objet.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-151">The `RegisterCustomRoutes` method adds each route by calling the `MapPageRoute` method of the `RouteCollection` object.</span></span> <span data-ttu-id="b4ac0-152">Les routes sont définies à l’aide d’un nom d’itinéraire, une URL de routage et une URL physique.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-152">Routes are defined using a route name, a route URL and a physical URL.</span></span>

<span data-ttu-id="b4ac0-153">Le premier paramètre («`ProductsByCategoryRoute`») est le nom d’itinéraire.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-153">The first parameter ("`ProductsByCategoryRoute`") is the route name.</span></span> <span data-ttu-id="b4ac0-154">Il est utilisé pour appeler l’itinéraire lorsqu’il est nécessaire.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-154">It is used to call the route when it is needed.</span></span> <span data-ttu-id="b4ac0-155">Le deuxième paramètre («`Category/{categoryName}`») définit l’URL qui peut être dynamiquement basé sur le code de remplacement convivial.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-155">The second parameter ("`Category/{categoryName}`") defines the friendly replacement URL that can be dynamic based on code.</span></span> <span data-ttu-id="b4ac0-156">Utilisez cet itinéraire lorsque vous remplissez un contrôle de données avec des liens qui sont générés en fonction des données.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-156">You use this route when you are populating a data control with links that are generated based on data.</span></span> <span data-ttu-id="b4ac0-157">Un itinéraire est la suivante :</span><span class="sxs-lookup"><span data-stu-id="b4ac0-157">A route is shown as follows:</span></span>

[!code-csharp[Main](url-routing/samples/sample2.cs)]

<span data-ttu-id="b4ac0-158">Le deuxième paramètre de l’itinéraire inclut une valeur dynamique spécifiée par des accolades (`{ }`).</span><span class="sxs-lookup"><span data-stu-id="b4ac0-158">The second parameter of the route includes a dynamic value specified by braces (`{ }`).</span></span> <span data-ttu-id="b4ac0-159">Dans ce cas, le `categoryName` est une variable qui sera utilisée pour déterminer l’itinéraire de routage approprié.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-159">In this case, the `categoryName` is a variable that will be used to determine the proper routing path.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="b4ac0-160">**Optional**</span><span class="sxs-lookup"><span data-stu-id="b4ac0-160">**Optional**</span></span>
> 
> <span data-ttu-id="b4ac0-161">Il peut s’avérer plus facile à gérer votre code en déplaçant le `RegisterCustomRoutes` méthode à une classe distincte.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-161">You might find it easier to manage your code by moving the `RegisterCustomRoutes` method to a separate class.</span></span> <span data-ttu-id="b4ac0-162">Dans le *logique* dossier, créez un distinct `RouteActions` classe.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-162">In the *Logic* folder, create a separate `RouteActions` class.</span></span> <span data-ttu-id="b4ac0-163">Déplacer la méthode ci-dessus `RegisterCustomRoutes` méthode à partir de la *Global.asax.cs* fichier dans le nouvel `RoutesActions` classe.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-163">Move the above `RegisterCustomRoutes` method from the *Global.asax.cs* file into the new `RoutesActions` class.</span></span> <span data-ttu-id="b4ac0-164">Utilisez le `RoleActions` classe et le `createAdmin` un exemple montrant comment appeler la méthode le `RegisterCustomRoutes` méthode à partir de la *Global.asax.cs* fichier.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-164">Use the `RoleActions` class and the `createAdmin` method as an example of how to call the `RegisterCustomRoutes` method from the *Global.asax.cs* file.</span></span>


<span data-ttu-id="b4ac0-165">Vous peut-être également remarqué le `RegisterRoutes` appel de méthode à l’aide du `RouteConfig` objet situé au début de la `Application_Start` Gestionnaire d’événements.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-165">You may also have noticed the `RegisterRoutes` method call using the `RouteConfig` object at the beginning of the `Application_Start` event handler.</span></span> <span data-ttu-id="b4ac0-166">Cet appel est effectué pour implémenter le routage par défaut.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-166">This call is made to implement default routing.</span></span> <span data-ttu-id="b4ac0-167">Il a été inclus en tant que code par défaut lorsque vous avez créé l’application à l’aide du modèle de Web Forms de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-167">It was included as default code when you created the application using Visual Studio's Web Forms template.</span></span>

## <a name="retrieving-and-using-route-data"></a><span data-ttu-id="b4ac0-168">Récupération et à l’aide des données d’itinéraire</span><span class="sxs-lookup"><span data-stu-id="b4ac0-168">Retrieving and Using Route Data</span></span>

<span data-ttu-id="b4ac0-169">Comme mentionné ci-dessus, les itinéraires peuvent être définies.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-169">As mentioned above, routes can be defined.</span></span> <span data-ttu-id="b4ac0-170">Le code que vous avez ajouté à la `Application_Start` Gestionnaire d’événements dans le *Global.asax.cs* fichier charge les itinéraires définis par le.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-170">The code that you added to the `Application_Start` event handler in the *Global.asax.cs* file loads the definable routes.</span></span>

### <a name="setting-routes"></a><span data-ttu-id="b4ac0-171">Définition des itinéraires</span><span class="sxs-lookup"><span data-stu-id="b4ac0-171">Setting Routes</span></span>

<span data-ttu-id="b4ac0-172">Itinéraires vous obligent à ajouter du code.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-172">Routes require you to add additional code.</span></span> <span data-ttu-id="b4ac0-173">Dans ce didacticiel, vous allez utiliser la liaison de modèle pour récupérer un `RouteValueDictionary` objet qui est utilisé lors de la génération les itinéraires à l’aide de données à partir d’un contrôle de données.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-173">In this tutorial, you will use model binding to retrieve a `RouteValueDictionary` object that is used when generating the routes using data from a data control.</span></span> <span data-ttu-id="b4ac0-174">Le `RouteValueDictionary` objet contiendra une liste des noms de produits qui appartiennent à une catégorie spécifique de produits.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-174">The `RouteValueDictionary` object will contain a list of product names that belong to a specific category of products.</span></span> <span data-ttu-id="b4ac0-175">Un lien est créé pour chaque produit basé sur les données et l’itinéraire.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-175">A link is created for each product based on the data and route.</span></span>

#### <a name="enable-routes-for-categories-and-products"></a><span data-ttu-id="b4ac0-176">Activer les itinéraires pour les catégories et produits</span><span class="sxs-lookup"><span data-stu-id="b4ac0-176">Enable Routes for Categories and Products</span></span>

<span data-ttu-id="b4ac0-177">Ensuite, vous allez mettre à jour l’application pour utiliser le `ProductsByCategoryRoute` pour déterminer l’itinéraire correct à inclure pour chaque lien de catégorie de produit.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-177">Next, you'll update the application to use the `ProductsByCategoryRoute` to determine the correct route to include for each product category link.</span></span> <span data-ttu-id="b4ac0-178">Vous allez également mettre à jour le *ProductList.aspx* page à inclure un lien routé pour chaque produit.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-178">You'll also update the *ProductList.aspx* page to include a routed link for each product.</span></span> <span data-ttu-id="b4ac0-179">Les liens seront affiche comme ils l’étaient avant la modification, mais les liens seront désormais utiliser le routage d’URL.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-179">The links will be displayed as they were before the change, however the links will now use URL routing.</span></span>

1. <span data-ttu-id="b4ac0-180">Dans **l’Explorateur de solutions**, ouvrez le *Site.Master* page si elle n’est pas déjà ouverte.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-180">In **Solution Explorer**, open the *Site.Master* page if it is not already open.</span></span>
2. <span data-ttu-id="b4ac0-181">Mise à jour le **ListView** contrôle nommé «`categoryList`» avec les modifications mises en surbrillance en jaune, par conséquent, le balisage se présente comme suit :</span><span class="sxs-lookup"><span data-stu-id="b4ac0-181">Update the **ListView** control named "`categoryList`" with the changes highlighted in yellow, so the markup appears as follows:</span></span>   

    [!code-aspx[Main](url-routing/samples/sample3.aspx?highlight=7-9)]
3. <span data-ttu-id="b4ac0-182">Dans **l’Explorateur de solutions**, ouvrez le *ProductList.aspx* page.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-182">In **Solution Explorer**, open the *ProductList.aspx* page.</span></span>
4. <span data-ttu-id="b4ac0-183">Mise à jour le `ItemTemplate` élément de la *ProductList.aspx* page avec les mises à jour en surbrillance en jaune, donc le balisage se présente comme suit :</span><span class="sxs-lookup"><span data-stu-id="b4ac0-183">Update the `ItemTemplate` element of the *ProductList.aspx* page with the updates highlighted in yellow, so the markup appears as follows:</span></span>   

    [!code-aspx[Main](url-routing/samples/sample4.aspx?highlight=6-9,14-16)]
5. <span data-ttu-id="b4ac0-184">Ouvrez le fichier code-behind de *ProductList.aspx.cs* et ajoutez l’espace de noms suivante en tant que mis en surbrillance en jaune :</span><span class="sxs-lookup"><span data-stu-id="b4ac0-184">Open the code-behind of *ProductList.aspx.cs* and add the following namespace as highlighted in yellow:</span></span>  

    [!code-csharp[Main](url-routing/samples/sample5.cs?highlight=9)]
6. <span data-ttu-id="b4ac0-185">Remplacez le `GetProducts` méthode de code-behind (*ProductList.aspx.cs*) avec le code suivant :</span><span class="sxs-lookup"><span data-stu-id="b4ac0-185">Replace the `GetProducts` method of the code-behind (*ProductList.aspx.cs*) with the following code:</span></span>   

    [!code-csharp[Main](url-routing/samples/sample6.cs)]

#### <a name="add-code-for-product-details"></a><span data-ttu-id="b4ac0-186">Ajoutez le Code pour les détails du produit</span><span class="sxs-lookup"><span data-stu-id="b4ac0-186">Add Code for Product Details</span></span>

<span data-ttu-id="b4ac0-187">À présent, mettez à jour le code-behind (*ProductDetails.aspx.cs*) pour le *ProductDetails.aspx* page à utiliser les données d’itinéraire.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-187">Now, update the code-behind (*ProductDetails.aspx.cs*) for the *ProductDetails.aspx* page to use route data.</span></span> <span data-ttu-id="b4ac0-188">Notez que la nouvelle `GetProduct` méthode accepte également une valeur de chaîne de requête pour le cas où l’utilisateur a un lien contenant un signet qui utilise l’URL non conviviales, non routé plus anciens.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-188">Notice that the new `GetProduct` method also accepts a query string value for the case where the user has a link bookmarked that uses the older non-friendly, non-routed URL.</span></span>

1. <span data-ttu-id="b4ac0-189">Remplacez le `GetProduct` méthode de code-behind (*ProductDetails.aspx.cs*) avec le code suivant :</span><span class="sxs-lookup"><span data-stu-id="b4ac0-189">Replace the `GetProduct` method of the code-behind (*ProductDetails.aspx.cs*) with the following code:</span></span>   

    [!code-csharp[Main](url-routing/samples/sample7.cs)]

## <a name="running-the-application"></a><span data-ttu-id="b4ac0-190">Exécution de l'application</span><span class="sxs-lookup"><span data-stu-id="b4ac0-190">Running the Application</span></span>

<span data-ttu-id="b4ac0-191">Vous pouvez exécuter l’application maintenant pour afficher les itinéraires de mise à jour.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-191">You can run the application now to see the updated routes.</span></span>

1. <span data-ttu-id="b4ac0-192">Appuyez sur **F5** pour exécuter l’exemple d’application Wingtip Toys.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-192">Press **F5** to run the Wingtip Toys sample application.</span></span>  
 <span data-ttu-id="b4ac0-193">Le navigateur s’ouvre et affiche le *Default.aspx* page.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-193">The browser opens and shows the *Default.aspx* page.</span></span>
2. <span data-ttu-id="b4ac0-194">Cliquez sur le **produits** lien en haut de la page.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-194">Click the **Products** link at the top of the page.</span></span>  
 <span data-ttu-id="b4ac0-195">Tous les produits sont affichés sur le *ProductList.aspx* page.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-195">All products are displayed on the *ProductList.aspx* page.</span></span> <span data-ttu-id="b4ac0-196">L’URL suivante (à l’aide de votre numéro de port) s’affiche pour le navigateur :</span><span class="sxs-lookup"><span data-stu-id="b4ac0-196">The following URL (using your port number) is displayed for the browser:</span></span>  
    `https://localhost:44300/ProductList`
3. <span data-ttu-id="b4ac0-197">Ensuite, cliquez sur le **voitures** lien vers le haut de la page de la catégorie.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-197">Next, click the **Cars** category link near the top of the page.</span></span>  
 <span data-ttu-id="b4ac0-198">Uniquement les voitures sont affichées sur le *ProductList.aspx* page.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-198">Only cars are displayed on the *ProductList.aspx* page.</span></span> <span data-ttu-id="b4ac0-199">L’URL suivante (à l’aide de votre numéro de port) s’affiche pour le navigateur :</span><span class="sxs-lookup"><span data-stu-id="b4ac0-199">The following URL (using your port number) is displayed for the browser:</span></span>  
    `https://localhost:44300/Category/Cars`
4. <span data-ttu-id="b4ac0-200">Cliquez sur le lien contenant le nom de la première voiture répertorié dans la page («**convertibles en voiture**») pour afficher les détails du produit.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-200">Click the link containing the name of the first car listed on the page ("**Convertible Car**") to display the product details.</span></span>  
 <span data-ttu-id="b4ac0-201">L’URL suivante (à l’aide de votre numéro de port) s’affiche pour le navigateur :</span><span class="sxs-lookup"><span data-stu-id="b4ac0-201">The following URL (using your port number) is displayed for the browser:</span></span>  
    `https://localhost:44300/Product/Convertible%20Car`
5. <span data-ttu-id="b4ac0-202">Ensuite, entrez l’URL suivante non routé (à l’aide de votre numéro de port) dans le navigateur :</span><span class="sxs-lookup"><span data-stu-id="b4ac0-202">Next, enter the following non-routed URL (using your port number) into the browser:</span></span>  
    `https://localhost:44300/ProductDetails.aspx?productID=2`  
 <span data-ttu-id="b4ac0-203">Le code reconnaît toujours une URL qui inclut une chaîne de requête, dans le cas où un utilisateur a un lien de signet.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-203">The code still recognizes a URL that includes a query string, for the case where a user has a link bookmarked.</span></span>

## <a name="summary"></a><span data-ttu-id="b4ac0-204">Récapitulatif</span><span class="sxs-lookup"><span data-stu-id="b4ac0-204">Summary</span></span>

<span data-ttu-id="b4ac0-205">Dans ce didacticiel, vous avez ajouté des itinéraires pour les catégories et produits.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-205">In this tutorial, you have added routes for categories and products.</span></span> <span data-ttu-id="b4ac0-206">Vous avez appris comment les itinéraires peuvent être intégrées avec les contrôles de données qui utilisent la liaison de modèle.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-206">You have learned how routes can be integrated with data controls that use model binding.</span></span> <span data-ttu-id="b4ac0-207">Dans le didacticiel suivant, vous allez implémenter la gestion des erreurs globales.</span><span class="sxs-lookup"><span data-stu-id="b4ac0-207">In the next tutorial, you will implement global error handling.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="b4ac0-208">Ressources supplémentaires</span><span class="sxs-lookup"><span data-stu-id="b4ac0-208">Additional Resources</span></span>

[<span data-ttu-id="b4ac0-209">URL conviviales ASP.NET</span><span class="sxs-lookup"><span data-stu-id="b4ac0-209">ASP.NET Friendly URLs</span></span>](http://www.nuget.org/packages/Microsoft.AspNet.FriendlyUrls/)  
[<span data-ttu-id="b4ac0-210">Déployer une application de formulaires Web ASP.NET sécurisée avec appartenance, OAuth et base de données SQL dans Azure App Service</span><span class="sxs-lookup"><span data-stu-id="b4ac0-210">Deploy a Secure ASP.NET Web Forms App with Membership, OAuth, and SQL Database to Azure App Service</span></span>](https://azure.microsoft.com/documentation/articles/web-sites-dotnet-deploy-aspnet-webforms-app-membership-oauth-sql-database/)  
[<span data-ttu-id="b4ac0-211">Microsoft Azure - version d’évaluation gratuite</span><span class="sxs-lookup"><span data-stu-id="b4ac0-211">Microsoft Azure - Free Trial</span></span>](https://azure.microsoft.com/pricing/free-trial/)

> [!div class="step-by-step"]
> <span data-ttu-id="b4ac0-212">[Précédent](membership-and-administration.md)
> [Suivant](aspnet-error-handling.md)</span><span class="sxs-lookup"><span data-stu-id="b4ac0-212">[Previous](membership-and-administration.md)
[Next](aspnet-error-handling.md)</span></span>

---
uid: web-forms/overview/deployment/web-deployment-in-the-enterprise/configuring-parameters-for-web-package-deployment
title: Configuration des paramètres de déploiement du Package Web | Microsoft Docs
author: jrjlee
description: Cette rubrique décrit comment définir des valeurs de paramètre, telles que les noms d’application web Internet Information Services (IIS), les chaînes de connexion et les points de terminaison de service...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 37947d79-ab1e-4ba9-9017-52e7a2757414
msc.legacyurl: /web-forms/overview/deployment/web-deployment-in-the-enterprise/configuring-parameters-for-web-package-deployment
msc.type: authoredcontent
ms.openlocfilehash: 6660ad52ce68932be63e2874a5f6acb34336e575
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/01/2019
ms.locfileid: "57052066"
---
<a name="configuring-parameters-for-web-package-deployment"></a><span data-ttu-id="c77c2-103">Configuration des paramètres pour le déploiement de package web</span><span class="sxs-lookup"><span data-stu-id="c77c2-103">Configuring Parameters for Web Package Deployment</span></span>
====================
<span data-ttu-id="c77c2-104">par [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="c77c2-104">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="c77c2-105">Télécharger PDF</span><span class="sxs-lookup"><span data-stu-id="c77c2-105">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="c77c2-106">Cette rubrique explique comment définir des valeurs de paramètre, telles que les noms d’application web Internet Information Services (IIS), les chaînes de connexion et les points de terminaison de service, lorsque vous déployez un package web sur un serveur web IIS à distance.</span><span class="sxs-lookup"><span data-stu-id="c77c2-106">This topic describes how to set parameter values, like Internet Information Services (IIS) web application names, connection strings, and service endpoints, when you deploy a web package to a remote IIS web server.</span></span>


<span data-ttu-id="c77c2-107">Lorsque vous générez un projet d’application web, la génération et le processus d’empaquetage génère trois fichiers de clés :</span><span class="sxs-lookup"><span data-stu-id="c77c2-107">When you build a web application project, the build and packaging process generates three key files:</span></span>

- <span data-ttu-id="c77c2-108">Un *[nom_projet] .zip* fichier.</span><span class="sxs-lookup"><span data-stu-id="c77c2-108">A *[project name].zip* file.</span></span> <span data-ttu-id="c77c2-109">Il s’agit de package de déploiement web pour votre projet d’application web.</span><span class="sxs-lookup"><span data-stu-id="c77c2-109">This is the web deployment package for your web application project.</span></span> <span data-ttu-id="c77c2-110">Ce package contient tous les assemblys, les fichiers, les scripts de base de données et les ressources nécessaires pour recréer votre application web sur un serveur web IIS à distance.</span><span class="sxs-lookup"><span data-stu-id="c77c2-110">This package contains all the assemblies, files, database scripts, and resources required to recreate your web application on a remote IIS web server.</span></span>
- <span data-ttu-id="c77c2-111">Un *[nom_projet].deploy.cmd* fichier.</span><span class="sxs-lookup"><span data-stu-id="c77c2-111">A *[project name].deploy.cmd* file.</span></span> <span data-ttu-id="c77c2-112">Contient un ensemble de commandes paramétrables de Web Deploy (MSDeploy.exe) qui publier votre package de déploiement web sur un serveur web IIS à distance.</span><span class="sxs-lookup"><span data-stu-id="c77c2-112">This contains a set of parameterized Web Deploy (MSDeploy.exe) commands that publish your web deployment package to a remote IIS web server.</span></span>
- <span data-ttu-id="c77c2-113">Un *[nom_projet]. SetParameters.xml* fichier.</span><span class="sxs-lookup"><span data-stu-id="c77c2-113">A *[project name].SetParameters.xml* file.</span></span> <span data-ttu-id="c77c2-114">Cela fournit un ensemble de valeurs de paramètre à la commande MSDeploy.exe.</span><span class="sxs-lookup"><span data-stu-id="c77c2-114">This provides a set of parameter values to the MSDeploy.exe command.</span></span> <span data-ttu-id="c77c2-115">Vous pouvez mettre à jour les valeurs dans ce fichier et passer à Web Deploy comme paramètre de ligne de commande lorsque vous déployez votre package web.</span><span class="sxs-lookup"><span data-stu-id="c77c2-115">You can update the values in this file and pass it to Web Deploy as a command-line parameter when you deploy your web package.</span></span>

> [!NOTE]
> <span data-ttu-id="c77c2-116">Pour plus d’informations sur la génération et le processus d’empaquetage, consultez [génération et empaquetage Web Application Projects](building-and-packaging-web-application-projects.md).</span><span class="sxs-lookup"><span data-stu-id="c77c2-116">For more information on the build and packaging process, see [Building and Packaging Web Application Projects](building-and-packaging-web-application-projects.md).</span></span>


<span data-ttu-id="c77c2-117">Le *SetParameters.xml* généré dynamiquement à partir de votre fichier de projet d’application web et des fichiers de configuration au sein de votre projet.</span><span class="sxs-lookup"><span data-stu-id="c77c2-117">The *SetParameters.xml* file is dynamically generated from your web application project file and any configuration files within your project.</span></span> <span data-ttu-id="c77c2-118">Lorsque vous générez et empaqueter votre projet, le Pipeline de publication Web (WPP) détecte automatiquement un grand nombre des variables qui sont susceptibles de changer entre les environnements de déploiement, telles que l’application web IIS de destination et les chaînes de connexion de base de données.</span><span class="sxs-lookup"><span data-stu-id="c77c2-118">When you build and package your project, the Web Publishing Pipeline (WPP) will automatically detect lots of the variables that are likely to change between deployment environments, like the destination IIS web application and any database connection strings.</span></span> <span data-ttu-id="c77c2-119">Ces valeurs sont automatiquement paramétrés dans le package de déploiement web et ajoutés à la *SetParameters.xml* fichier.</span><span class="sxs-lookup"><span data-stu-id="c77c2-119">These values are automatically parameterized in the web deployment package and added to the *SetParameters.xml* file.</span></span> <span data-ttu-id="c77c2-120">Par exemple, si vous ajoutez une chaîne de connexion à la *web.config* fichier dans votre projet d’application web, le processus de génération détecte cette modification et ajoutera une entrée à la *SetParameters.xml* fichier en conséquence.</span><span class="sxs-lookup"><span data-stu-id="c77c2-120">For example, if you add a connection string to the *web.config* file in your web application project, the build process will detect this change and will add an entry to the *SetParameters.xml* file accordingly.</span></span>

<span data-ttu-id="c77c2-121">Dans de nombreux cas, ce paramétrage automatique sera suffisant.</span><span class="sxs-lookup"><span data-stu-id="c77c2-121">In a lot of cases, this automatic parameterization will be sufficient.</span></span> <span data-ttu-id="c77c2-122">Toutefois, si vos utilisateurs ont besoin pour faire varier les autres paramètres entre les environnements de déploiement, telles que les paramètres de l’application ou l’URL du point de terminaison de service, vous devez indiquer les fournisseurs de services pour paramétrer ces valeurs dans le package de déploiement et ajouter des entrées correspondantes à la *SetParameters.xml* fichier.</span><span class="sxs-lookup"><span data-stu-id="c77c2-122">However, if your users need to vary other settings between deployment environments, like application settings or service endpoint URLs, you need to tell the WPP to parameterize these values in the deployment package and add corresponding entries to the *SetParameters.xml* file.</span></span> <span data-ttu-id="c77c2-123">Les sections qui suivent expliquent comment effectuer cette opération.</span><span class="sxs-lookup"><span data-stu-id="c77c2-123">The sections that follow explain how to do this.</span></span>

### <a name="automatic-parameterization"></a><span data-ttu-id="c77c2-124">Paramétrage automatique</span><span class="sxs-lookup"><span data-stu-id="c77c2-124">Automatic Parameterization</span></span>

<span data-ttu-id="c77c2-125">Lorsque vous générez et empaquetez une application web, les fournisseurs de services seront paramétrer automatiquement ces éléments :</span><span class="sxs-lookup"><span data-stu-id="c77c2-125">When you build and package a web application, the WPP will automatically parameterize these things:</span></span>

- <span data-ttu-id="c77c2-126">La destination IIS web les nom et chemin d’accès de l’application.</span><span class="sxs-lookup"><span data-stu-id="c77c2-126">The destination IIS web application path and name.</span></span>
- <span data-ttu-id="c77c2-127">Toute connexion des chaînes dans votre *web.config* fichier.</span><span class="sxs-lookup"><span data-stu-id="c77c2-127">Any connection strings in your *web.config* file.</span></span>
- <span data-ttu-id="c77c2-128">Chaînes de connexion pour les bases de données que vous ajoutez à la **Package/Publication SQL** onglet dans les pages de propriétés de projet.</span><span class="sxs-lookup"><span data-stu-id="c77c2-128">Connection strings for any databases you add to the **Package/Publish SQL** tab in the project property pages.</span></span>

<span data-ttu-id="c77c2-129">Par exemple, si vous deviez générer et empaqueter le [Contact Manager](the-contact-manager-solution.md) génère l’exemple de solution sans toucher le processus de paramétrage de quelque façon, les fournisseurs de services cette *ContactManager.Mvc.SetParameters.xml* fichier :</span><span class="sxs-lookup"><span data-stu-id="c77c2-129">For example, if you were to build and package the [Contact Manager](the-contact-manager-solution.md) sample solution without touching the parameterization process in any way, the WPP would generate this *ContactManager.Mvc.SetParameters.xml* file:</span></span>


[!code-xml[Main](configuring-parameters-for-web-package-deployment/samples/sample1.xml)]


<span data-ttu-id="c77c2-130">Dans ce cas :</span><span class="sxs-lookup"><span data-stu-id="c77c2-130">In this case:</span></span>

- <span data-ttu-id="c77c2-131">Le **nom de l’Application Web IIS** paramètre est le chemin d’accès IIS où vous souhaitez déployer l’application web.</span><span class="sxs-lookup"><span data-stu-id="c77c2-131">The **IIS Web Application Name** parameter is the IIS path where you want to deploy the web application.</span></span> <span data-ttu-id="c77c2-132">La valeur par défaut provient de la **Package/Publication Web** page dans les pages de propriétés de projet.</span><span class="sxs-lookup"><span data-stu-id="c77c2-132">The default value is taken from the **Package/Publish Web** page in the project property pages.</span></span>
- <span data-ttu-id="c77c2-133">Le **ApplicationServices-Web.config Connection String** paramètre a été généré à partir d’un **ajouter/connectionStrings** élément dans le *web.config* fichier.</span><span class="sxs-lookup"><span data-stu-id="c77c2-133">The **ApplicationServices-Web.config Connection String** parameter was generated from a **connectionStrings/add** element in the *web.config* file.</span></span> <span data-ttu-id="c77c2-134">Il représente la chaîne de connexion que l’application doit utiliser pour contacter la base de données d’appartenance.</span><span class="sxs-lookup"><span data-stu-id="c77c2-134">It represents the connection string that the application should use to contact the membership database.</span></span> <span data-ttu-id="c77c2-135">La valeur que vous fournissez ici sera remplacé dans déployé *web.config* fichier.</span><span class="sxs-lookup"><span data-stu-id="c77c2-135">The value you provide here will be substituted into the deployed *web.config* file.</span></span> <span data-ttu-id="c77c2-136">La valeur par défaut provient de l’avant le déploiement *web.config* fichier.</span><span class="sxs-lookup"><span data-stu-id="c77c2-136">The default value is taken from the pre-deployment *web.config* file.</span></span>

<span data-ttu-id="c77c2-137">Les fournisseurs de services ajuste également ces propriétés dans le package de déploiement qu’il génère.</span><span class="sxs-lookup"><span data-stu-id="c77c2-137">The WPP also parameterizes these properties in the deployment package it generates.</span></span> <span data-ttu-id="c77c2-138">Vous pouvez fournir des valeurs pour ces propriétés lorsque vous installez le package de déploiement.</span><span class="sxs-lookup"><span data-stu-id="c77c2-138">You can provide values for these properties when you install the deployment package.</span></span> <span data-ttu-id="c77c2-139">Si vous installez le package manuellement via le Gestionnaire IIS, comme décrit dans [installer manuellement des Packages Web](manually-installing-web-packages.md), l’Assistant installation vous invite à fournir des valeurs pour tous les paramètres.</span><span class="sxs-lookup"><span data-stu-id="c77c2-139">If you install the package manually through IIS Manager, as described in [Manually Installing Web Packages](manually-installing-web-packages.md), the installation wizard prompts you to provide values for any parameters.</span></span> <span data-ttu-id="c77c2-140">Si vous installez le package à distance en utilisant le *. deploy.cmd* de fichiers, comme décrit dans [déploiement des Packages Web](deploying-web-packages.md), Web Deploy ressemblera à ce *SetParameters.xml* fichier Indiquez les valeurs de paramètre.</span><span class="sxs-lookup"><span data-stu-id="c77c2-140">If you install the package remotely using the *.deploy.cmd* file, as described in [Deploying Web Packages](deploying-web-packages.md), Web Deploy will look to this *SetParameters.xml* file to provide the parameter values.</span></span> <span data-ttu-id="c77c2-141">Vous pouvez modifier les valeurs dans le *SetParameters.xml* fichier manuellement, ou vous pouvez personnaliser le fichier dans le cadre d’un processus de génération et de déploiement automatisé.</span><span class="sxs-lookup"><span data-stu-id="c77c2-141">You can edit the values in the *SetParameters.xml* file manually, or you can customize the file as part of an automated build and deployment process.</span></span> <span data-ttu-id="c77c2-142">Ce processus est décrit plus en détail plus loin dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="c77c2-142">This process is described in more detail later in this topic.</span></span>

### <a name="custom-parameterization"></a><span data-ttu-id="c77c2-143">Paramétrage personnalisé</span><span class="sxs-lookup"><span data-stu-id="c77c2-143">Custom Parameterization</span></span>

<span data-ttu-id="c77c2-144">Dans les scénarios de déploiement plus complexes, vous aurez souvent besoin de paramétrer des propriétés supplémentaires avant de déployer votre projet.</span><span class="sxs-lookup"><span data-stu-id="c77c2-144">In more complex deployment scenarios, you'll often want to parameterize additional properties before you deploy your project.</span></span> <span data-ttu-id="c77c2-145">En règle générale, vous devez paramétrer toutes les propriétés et paramètres qui varient entre les environnements de destination.</span><span class="sxs-lookup"><span data-stu-id="c77c2-145">Generally speaking, you should parameterize any properties and settings that will vary between destination environments.</span></span> <span data-ttu-id="c77c2-146">Celles-ci peuvent inclure :</span><span class="sxs-lookup"><span data-stu-id="c77c2-146">These can include:</span></span>

- <span data-ttu-id="c77c2-147">Des points de terminaison dans le *web.config* fichier.</span><span class="sxs-lookup"><span data-stu-id="c77c2-147">Service endpoints in the *web.config* file.</span></span>
- <span data-ttu-id="c77c2-148">Paramètres d’application dans le *web.config* fichier.</span><span class="sxs-lookup"><span data-stu-id="c77c2-148">Application settings in the *web.config* file.</span></span>
- <span data-ttu-id="c77c2-149">Toutes les autres propriétés déclaratives que vous souhaitez invitent les utilisateurs à spécifier.</span><span class="sxs-lookup"><span data-stu-id="c77c2-149">Any other declarative properties that you want to prompt users to specify.</span></span>

<span data-ttu-id="c77c2-150">Pour paramétrer ces propriétés le plus simple consiste à ajouter un *parameters.xml* fichier dans le dossier racine de votre projet d’application web.</span><span class="sxs-lookup"><span data-stu-id="c77c2-150">The easiest way to parameterize these properties is to add a *parameters.xml* file to the root folder of your web application project.</span></span> <span data-ttu-id="c77c2-151">Par exemple, dans la solution Gestionnaire de contacts, le projet ContactManager.Mvc inclut un *parameters.xml* fichier dans le dossier racine.</span><span class="sxs-lookup"><span data-stu-id="c77c2-151">For example, in the Contact Manager solution, the ContactManager.Mvc project includes a *parameters.xml* file in the root folder.</span></span>

![](configuring-parameters-for-web-package-deployment/_static/image1.png)

<span data-ttu-id="c77c2-152">Si vous ouvrez ce fichier, vous verrez qu’il contient un seul **paramètre** entrée.</span><span class="sxs-lookup"><span data-stu-id="c77c2-152">If you open this file, you'll see that it contains a single **parameter** entry.</span></span> <span data-ttu-id="c77c2-153">L’entrée utilise une requête XML Path Language (XPath) pour localiser et de paramétrer l’URL de point de terminaison du service ContactService Windows Communication Foundation (WCF) dans le *web.config* fichier.</span><span class="sxs-lookup"><span data-stu-id="c77c2-153">The entry uses an XML Path Language (XPath) query to locate and parameterize the endpoint URL of the ContactService Windows Communication Foundation (WCF) service in the *web.config* file.</span></span>


[!code-xml[Main](configuring-parameters-for-web-package-deployment/samples/sample2.xml)]


<span data-ttu-id="c77c2-154">En plus du paramétrage de l’URL de point de terminaison dans le package de déploiement, les fournisseurs de services ajoute également une entrée correspondante à la *SetParameters.xml* fichier est généré en même temps que le package de déploiement.</span><span class="sxs-lookup"><span data-stu-id="c77c2-154">In addition to parameterizing the endpoint URL in the deployment package, the WPP also adds a corresponding entry to the *SetParameters.xml* file that gets generated alongside the deployment package.</span></span>


[!code-xml[Main](configuring-parameters-for-web-package-deployment/samples/sample3.xml)]


<span data-ttu-id="c77c2-155">Si vous installez manuellement le package de déploiement, le Gestionnaire IIS vous invitera pour l’adresse de point de terminaison de service en même temps que les propriétés qui ont été paramétré automatiquement.</span><span class="sxs-lookup"><span data-stu-id="c77c2-155">If you install the deployment package manually, IIS Manager will prompt you for the service endpoint address alongside the properties that were parameterized automatically.</span></span> <span data-ttu-id="c77c2-156">Si vous installez le package de déploiement en exécutant la *. deploy.cmd* fichier, vous pouvez modifier le *SetParameters.xml* fichier pour fournir une valeur pour l’adresse de point de terminaison de service ainsi que des valeurs pour le propriétés qui ont été paramétrées automatiquement.</span><span class="sxs-lookup"><span data-stu-id="c77c2-156">If you install the deployment package by running the *.deploy.cmd* file, you can edit the *SetParameters.xml* file to provide a value for the service endpoint address together with values for the properties that were parameterized automatically.</span></span>

<span data-ttu-id="c77c2-157">Pour plus d’informations sur la création d’un *parameters.xml* de fichiers, consultez [Comment : Utilisez des paramètres pour configurer les paramètres lorsqu’un Package de déploiement est installé](https://msdn.microsoft.com/library/ff398068.aspx).</span><span class="sxs-lookup"><span data-stu-id="c77c2-157">For full details on how to create a *parameters.xml* file, see [How to: Use Parameters to Configure Deployment Settings When a Package is Installed](https://msdn.microsoft.com/library/ff398068.aspx).</span></span> <span data-ttu-id="c77c2-158">La procédure nommée **à utiliser des paramètres de déploiement pour les paramètres du fichier Web.config** fournit des instructions détaillées.</span><span class="sxs-lookup"><span data-stu-id="c77c2-158">The procedure named **To use deployment parameters for Web.config file settings** provides step-by-step instructions.</span></span>

## <a name="modifying-the-setparametersxml-file"></a><span data-ttu-id="c77c2-159">Modification du fichier SetParameters.xml</span><span class="sxs-lookup"><span data-stu-id="c77c2-159">Modifying the SetParameters.xml File</span></span>

<span data-ttu-id="c77c2-160">Si vous envisagez de déployer le package d’application web manuellement&#x2014;en exécutant la *. deploy.cmd* fichier ou en exécutant MSDeploy.exe à partir de la ligne de commande&#x2014;rien ne vous modifier manuellement le  *SetParameters.xml* fichier avant le déploiement.</span><span class="sxs-lookup"><span data-stu-id="c77c2-160">If you plan to deploy the web application package manually&#x2014;either by running the *.deploy.cmd* file or by running MSDeploy.exe from the command line&#x2014;there's nothing to stop you manually editing the *SetParameters.xml* file prior to the deployment.</span></span> <span data-ttu-id="c77c2-161">Toutefois, si vous travaillez sur une solution à l’échelle de l’entreprise, vous devez déployer un package d’application web en tant que partie d’un processus de génération et de déploiement plus vastes et automatisé.</span><span class="sxs-lookup"><span data-stu-id="c77c2-161">However, if you're working on an enterprise-scale solution, you may need to deploy a web application package as part of a larger, automated build and deployment process.</span></span> <span data-ttu-id="c77c2-162">Dans ce scénario, vous avez besoin de Microsoft Build Engine (MSBuild) pour modifier le *SetParameters.xml* fichier pour vous.</span><span class="sxs-lookup"><span data-stu-id="c77c2-162">In this scenario, you need the Microsoft Build Engine (MSBuild) to modify the *SetParameters.xml* file for you.</span></span> <span data-ttu-id="c77c2-163">Vous pouvez faire à l’aide de MSBuild **XmlPoke** tâche.</span><span class="sxs-lookup"><span data-stu-id="c77c2-163">You can do this by using the MSBuild **XmlPoke** task.</span></span>

<span data-ttu-id="c77c2-164">Le [solution d’exemple de gestionnaire de contacts](the-contact-manager-solution.md) illustre ce processus.</span><span class="sxs-lookup"><span data-stu-id="c77c2-164">The [Contact Manager sample solution](the-contact-manager-solution.md) illustrates this process.</span></span> <span data-ttu-id="c77c2-165">Les exemples de code qui suivent ont été modifiées pour afficher uniquement les détails pertinents pour cet exemple.</span><span class="sxs-lookup"><span data-stu-id="c77c2-165">The code examples that follow have been edited to show only the details that are relevant to this example.</span></span>

> [!NOTE]
> <span data-ttu-id="c77c2-166">Pour une vue d’ensemble plus large dans le fichier du modèle de projet dans l’exemple de solution et une introduction aux fichiers de projet personnalisé en général, consultez [présentation du fichier projet](understanding-the-project-file.md) et [comprendre le processus de génération](understanding-the-build-process.md).</span><span class="sxs-lookup"><span data-stu-id="c77c2-166">For a broader overview of the project file model in the sample solution, and an introduction to custom project files in general, see [Understanding the Project File](understanding-the-project-file.md) and [Understanding the Build Process](understanding-the-build-process.md).</span></span>


<span data-ttu-id="c77c2-167">Tout d’abord, les valeurs de paramètre d’intérêt sont définies en tant que propriétés dans le fichier de projet spécifique à l’environnement (par exemple, *Env-Dev.proj*).</span><span class="sxs-lookup"><span data-stu-id="c77c2-167">First, the parameter values of interest are defined as properties in the environment-specific project file (for example, *Env-Dev.proj*).</span></span>


[!code-xml[Main](configuring-parameters-for-web-package-deployment/samples/sample4.xml)]


> [!NOTE]
> <span data-ttu-id="c77c2-168">Pour obtenir des conseils sur la façon de personnaliser les fichiers de projet spécifique à l’environnement pour vos propres environnements serveur, consultez [configurer les propriétés de déploiement pour un environnement cible](../configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment.md).</span><span class="sxs-lookup"><span data-stu-id="c77c2-168">For guidance on how to customize the environment-specific project files for your own server environments, see [Configure Deployment Properties for a Target Environment](../configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment.md).</span></span>


<span data-ttu-id="c77c2-169">Ensuite, le *Publish.proj* fichier importe ces propriétés.</span><span class="sxs-lookup"><span data-stu-id="c77c2-169">Next, the *Publish.proj* file imports these properties.</span></span> <span data-ttu-id="c77c2-170">Étant donné que chaque *SetParameters.xml* fichier est associé un *. deploy.cmd* de fichiers et nous avons finalement que le fichier projet pour appeler chaque *. deploy.cmd* de fichiers, le projet fichier crée une MSBuild *élément* pour chaque *. deploy.cmd* de fichiers et définit les propriétés dignes d’intérêt en tant que *métadonnées d’élément*.</span><span class="sxs-lookup"><span data-stu-id="c77c2-170">Because each *SetParameters.xml* file is associated with a *.deploy.cmd* file, and we ultimately want the project file to invoke each *.deploy.cmd* file, the project file creates an MSBuild *item* for each *.deploy.cmd* file and defines the properties of interest as *item metadata*.</span></span>


[!code-xml[Main](configuring-parameters-for-web-package-deployment/samples/sample5.xml)]


<span data-ttu-id="c77c2-171">Dans ce cas :</span><span class="sxs-lookup"><span data-stu-id="c77c2-171">In this case:</span></span>

- <span data-ttu-id="c77c2-172">Le **ParametersXml** valeur des métadonnées indique l’emplacement de la *SetParameters.xml* fichier.</span><span class="sxs-lookup"><span data-stu-id="c77c2-172">The **ParametersXml** metadata value indicates the location of the *SetParameters.xml* file.</span></span>
- <span data-ttu-id="c77c2-173">Le **IisWebAppName** valeur est le chemin d’accès IIS à laquelle vous souhaitez déployer l’application web.</span><span class="sxs-lookup"><span data-stu-id="c77c2-173">The **IisWebAppName** value is the IIS path to which you want to deploy the web application.</span></span>
- <span data-ttu-id="c77c2-174">Le **MembershipDBConnectionString** valeur est la chaîne de connexion pour la base de données d’appartenance et le **MembershipDBConnectionName** valeur est la **nom** attribut du paramètre correspondant dans le *SetParameters.xml* fichier.</span><span class="sxs-lookup"><span data-stu-id="c77c2-174">The **MembershipDBConnectionString** value is the connection string for the membership database, and the **MembershipDBConnectionName** value is the **name** attribute of the corresponding parameter in the *SetParameters.xml* file.</span></span>
- <span data-ttu-id="c77c2-175">Le **ServiceEndpointValue** valeur est l’adresse de point de terminaison pour le service WCF sur le serveur de destination et le **ServiceEndpointParamName** valeur est l’attribut de nom du paramètre correspondant dans le *SetParameters.xml* fichier.</span><span class="sxs-lookup"><span data-stu-id="c77c2-175">The **ServiceEndpointValue** value is the endpoint address for the WCF service on the destination server, and the **ServiceEndpointParamName** value is the name attribute of the corresponding parameter in the *SetParameters.xml* file.</span></span>

<span data-ttu-id="c77c2-176">Enfin, dans le *Publish.proj* fichier, le **PublishWebPackages** cible utilise la **XmlPoke** tâche pour modifier ces valeurs dans le *SetParameters.xml* fichier.</span><span class="sxs-lookup"><span data-stu-id="c77c2-176">Finally, in the *Publish.proj* file, the **PublishWebPackages** target uses the **XmlPoke** task to modify these values in the *SetParameters.xml* file.</span></span>


[!code-xml[Main](configuring-parameters-for-web-package-deployment/samples/sample6.xml)]


<span data-ttu-id="c77c2-177">Vous remarquerez que chaque **XmlPoke** tâche spécifie quatre valeurs d’attribut :</span><span class="sxs-lookup"><span data-stu-id="c77c2-177">You'll notice that each **XmlPoke** task specifies four attribute values:</span></span>

- <span data-ttu-id="c77c2-178">Le **XmlInputPath** attribut indique à la tâche où trouver le fichier que vous souhaitez modifier.</span><span class="sxs-lookup"><span data-stu-id="c77c2-178">The **XmlInputPath** attribute tells the task where to find the file you want to modify.</span></span>
- <span data-ttu-id="c77c2-179">Le **requête** attribut est une requête XPath qui identifie le nœud XML que vous souhaitez modifier.</span><span class="sxs-lookup"><span data-stu-id="c77c2-179">The **Query** attribute is an XPath query that identifies the XML node you want to change.</span></span>
- <span data-ttu-id="c77c2-180">Le **valeur** attribut est la nouvelle valeur que vous souhaitez insérer dans le nœud XML sélectionné.</span><span class="sxs-lookup"><span data-stu-id="c77c2-180">The **Value** attribute is the new value you want to insert into the selected XML node.</span></span>
- <span data-ttu-id="c77c2-181">Le **Condition** attribut est le critère sur lequel la tâche doit s’exécuter ou non.</span><span class="sxs-lookup"><span data-stu-id="c77c2-181">The **Condition** attribute is the criteria on which the task should run or not run.</span></span> <span data-ttu-id="c77c2-182">Dans ce cas, la condition permet de s’assurer que vous n’essayez pas d’insérer une valeur null ou vide dans le *SetParameters.xml* fichier.</span><span class="sxs-lookup"><span data-stu-id="c77c2-182">In these cases, the condition ensures that you don't try to insert a null or empty value into the *SetParameters.xml* file.</span></span>

## <a name="conclusion"></a><span data-ttu-id="c77c2-183">Conclusion</span><span class="sxs-lookup"><span data-stu-id="c77c2-183">Conclusion</span></span>

<span data-ttu-id="c77c2-184">Cette rubrique décrit le rôle de la *SetParameters.xml* de fichiers et expliqué comment il est généré lorsque vous générez un projet d’application web.</span><span class="sxs-lookup"><span data-stu-id="c77c2-184">This topic described the role of the *SetParameters.xml* file and explained how it's generated when you build a web application project.</span></span> <span data-ttu-id="c77c2-185">Vous avez appris comment vous pouvez paramétrer des paramètres supplémentaires en ajoutant un *parameters.xml* fichier à votre projet.</span><span class="sxs-lookup"><span data-stu-id="c77c2-185">It explained how you can parameterize additional settings by adding a *parameters.xml* file to your project.</span></span> <span data-ttu-id="c77c2-186">Il décrit également comment vous pouvez modifier le *SetParameters.xml* fichier en tant que partie d’un processus de génération plus vastes et automatisés, à l’aide de la **XmlPoke** tâche dans vos fichiers projet.</span><span class="sxs-lookup"><span data-stu-id="c77c2-186">It also described how you can modify the *SetParameters.xml* file as part of a larger, automated build process, by using the **XmlPoke** task in your project files.</span></span>

<span data-ttu-id="c77c2-187">La rubrique suivante, [déploiement des Packages Web](deploying-web-packages.md), décrit comment déployer un package web en exécutant la *. deploy.cmd* de fichiers ou commandes directement à l’aide de MSDeploy.exe.</span><span class="sxs-lookup"><span data-stu-id="c77c2-187">The next topic, [Deploying Web Packages](deploying-web-packages.md), describes how you can deploy a web package either by running the *.deploy.cmd* file or by using MSDeploy.exe commands directly.</span></span> <span data-ttu-id="c77c2-188">Dans les deux cas, vous pouvez spécifier votre *SetParameters.xml* fichier en tant que paramètre de déploiement.</span><span class="sxs-lookup"><span data-stu-id="c77c2-188">In both cases, you can specify your *SetParameters.xml* file as a deployment parameter.</span></span>

## <a name="further-reading"></a><span data-ttu-id="c77c2-189">informations supplémentaires</span><span class="sxs-lookup"><span data-stu-id="c77c2-189">Further Reading</span></span>

<span data-ttu-id="c77c2-190">Pour plus d’informations sur la façon de créer des packages web, consultez [génération et empaquetage Web Application Projects](building-and-packaging-web-application-projects.md).</span><span class="sxs-lookup"><span data-stu-id="c77c2-190">For information on how to create web packages, see [Building and Packaging Web Application Projects](building-and-packaging-web-application-projects.md).</span></span> <span data-ttu-id="c77c2-191">Pour obtenir des conseils sur la façon de les déployer un package web, consultez [déploiement des Packages Web](deploying-web-packages.md).</span><span class="sxs-lookup"><span data-stu-id="c77c2-191">For guidance on how to actually deploy a web package, see [Deploying Web Packages](deploying-web-packages.md).</span></span> <span data-ttu-id="c77c2-192">Pour connaître la procédure pas à pas comment créer un *parameters.xml* de fichiers, consultez [Comment : Utilisez des paramètres pour configurer les paramètres lorsqu’un Package de déploiement est installé](https://msdn.microsoft.com/library/ff398068.aspx).</span><span class="sxs-lookup"><span data-stu-id="c77c2-192">For a step-by-step walkthrough on how to create a *parameters.xml* file, see [How to: Use Parameters to Configure Deployment Settings When a Package is Installed](https://msdn.microsoft.com/library/ff398068.aspx).</span></span>

<span data-ttu-id="c77c2-193">Pour obtenir des informations plus générales sur le paramétrage de Web Deploy, consultez [paramétrage de déploiement Web en Action](https://go.microsoft.com/?linkid=9805119) (billet de blog).</span><span class="sxs-lookup"><span data-stu-id="c77c2-193">For more general information on parameterization in Web Deploy, see [Web Deploy Parameterization in Action](https://go.microsoft.com/?linkid=9805119) (blog post).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="c77c2-194">[Précédent](building-and-packaging-web-application-projects.md)
> [Suivant](deploying-web-packages.md)</span><span class="sxs-lookup"><span data-stu-id="c77c2-194">[Previous](building-and-packaging-web-application-projects.md)
[Next](deploying-web-packages.md)</span></span>

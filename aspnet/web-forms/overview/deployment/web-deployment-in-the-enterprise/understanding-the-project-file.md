---
uid: web-forms/overview/deployment/web-deployment-in-the-enterprise/understanding-the-project-file
title: Présentation du fichier de projet | Microsoft Docs
author: jrjlee
description: Fichiers de projet Microsoft Build Engine (MSBuild) se trouvent au cœur du processus de génération et de déploiement. Cette rubrique commence par une vue d’ensemble conceptuelle de MSBuild...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: 07978d9d-341c-4524-bcba-62976f390f77
msc.legacyurl: /web-forms/overview/deployment/web-deployment-in-the-enterprise/understanding-the-project-file
msc.type: authoredcontent
ms.openlocfilehash: f57d7597a1454a53f5e87b4d69eee8ec8972e37c
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/06/2019
ms.locfileid: "65121929"
---
# <a name="understanding-the-project-file"></a><span data-ttu-id="8da77-104">Présentation du fichier projet</span><span class="sxs-lookup"><span data-stu-id="8da77-104">Understanding the Project File</span></span>

<span data-ttu-id="8da77-105">par [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="8da77-105">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="8da77-106">Télécharger PDF</span><span class="sxs-lookup"><span data-stu-id="8da77-106">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="8da77-107">Fichiers de projet Microsoft Build Engine (MSBuild) se trouvent au cœur du processus de génération et de déploiement.</span><span class="sxs-lookup"><span data-stu-id="8da77-107">Microsoft Build Engine (MSBuild) project files lie at the heart of the build and deployment process.</span></span> <span data-ttu-id="8da77-108">Cette rubrique commence par une vue d’ensemble conceptuelle de MSBuild et le fichier projet.</span><span class="sxs-lookup"><span data-stu-id="8da77-108">This topic starts with a conceptual overview of MSBuild and the project file.</span></span> <span data-ttu-id="8da77-109">Il décrit les composants clés que vous allez rencontrer lorsque vous travaillez avec des fichiers projet, et il passe à travers un exemple de comment vous pouvez utiliser des fichiers projet pour déployer des applications du monde réel.</span><span class="sxs-lookup"><span data-stu-id="8da77-109">It describes the key components you'll come across when you work with project files, and it works through an example of how you can use project files to deploy real-world applications.</span></span>
> 
> <span data-ttu-id="8da77-110">Ce que vous allez apprendre :</span><span class="sxs-lookup"><span data-stu-id="8da77-110">What you'll learn:</span></span>
> 
> - <span data-ttu-id="8da77-111">Comment MSBuild utilise des fichiers projet MSBuild pour générer des projets.</span><span class="sxs-lookup"><span data-stu-id="8da77-111">How MSBuild uses MSBuild project files to build projects.</span></span>
> - <span data-ttu-id="8da77-112">Comment MSBuild s’intègre aux technologies de déploiement, comme l’outil de déploiement Web Internet Information Services (IIS) (Web Deploy).</span><span class="sxs-lookup"><span data-stu-id="8da77-112">How MSBuild integrates with deployment technologies, like the Internet Information Services (IIS) Web Deployment Tool (Web Deploy).</span></span>
> - <span data-ttu-id="8da77-113">Comment comprendre les composants clés d’un fichier projet.</span><span class="sxs-lookup"><span data-stu-id="8da77-113">How to understand the key components of a project file.</span></span>
> - <span data-ttu-id="8da77-114">Comment vous pouvez utiliser des fichiers de projet pour créer et déployer des applications complexes.</span><span class="sxs-lookup"><span data-stu-id="8da77-114">How you can use project files to build and deploy complex applications.</span></span>

## <a name="msbuild-and-the-project-file"></a><span data-ttu-id="8da77-115">MSBuild et le fichier de projet</span><span class="sxs-lookup"><span data-stu-id="8da77-115">MSBuild and the Project File</span></span>

<span data-ttu-id="8da77-116">Lorsque vous créez et créez des solutions dans Visual Studio, Visual Studio utilise MSBuild pour générer chaque projet dans votre solution.</span><span class="sxs-lookup"><span data-stu-id="8da77-116">When you create and build solutions in Visual Studio, Visual Studio uses MSBuild to build each project in your solution.</span></span> <span data-ttu-id="8da77-117">Chaque projet Visual Studio inclut un fichier de projet MSBuild, avec une extension de fichier qui reflète le type de projet&#x2014;par exemple, un projet c# (.csproj), un projet Visual Basic.NET (.vbproj) ou un projet de base de données (.dbproj).</span><span class="sxs-lookup"><span data-stu-id="8da77-117">Every Visual Studio project includes an MSBuild project file, with a file extension that reflects the type of project&#x2014;for example, a C# project (.csproj), a Visual Basic.NET project (.vbproj), or a database project (.dbproj).</span></span> <span data-ttu-id="8da77-118">Pour pouvoir générer un projet, MSBuild doit traiter le fichier projet associé au projet.</span><span class="sxs-lookup"><span data-stu-id="8da77-118">In order to build a project, MSBuild must process the project file associated with the project.</span></span> <span data-ttu-id="8da77-119">Le fichier projet est un document XML qui contient toutes les informations et instructions que MSBuild a besoin pour générer votre projet, telles que le contenu à inclure, exigences de plates-formes, informations de versioning, serveur web ou paramètres du serveur de base de données et le tâches qui doivent être réalisées.</span><span class="sxs-lookup"><span data-stu-id="8da77-119">The project file is an XML document that contains all the information and instructions that MSBuild needs in order to build your project, like the content to include, the platform requirements, versioning information, web server or database server settings, and the tasks that must be performed.</span></span>

<span data-ttu-id="8da77-120">Fichiers projet MSBuild sont basées sur le [schéma XML MSBuild](https://msdn.microsoft.com/library/5dy88c2e.aspx), et ainsi le processus de génération est entièrement ouverte et transparente.</span><span class="sxs-lookup"><span data-stu-id="8da77-120">MSBuild project files are based on the [MSBuild XML schema](https://msdn.microsoft.com/library/5dy88c2e.aspx), and as a result the build process is entirely open and transparent.</span></span> <span data-ttu-id="8da77-121">En outre, vous n’avez pas besoin d’installer Visual Studio pour pouvoir utiliser le moteur MSBuild&#x2014;l’exécutable de MSBuild.exe fait partie du .NET Framework, et vous pouvez l’exécuter à partir d’une invite de commandes.</span><span class="sxs-lookup"><span data-stu-id="8da77-121">In addition, you don't need to install Visual Studio in order to use the MSBuild engine&#x2014;the MSBuild.exe executable is part of the .NET Framework, and you can run it from a command prompt.</span></span> <span data-ttu-id="8da77-122">En tant que développeur, vous pouvez créer vos propres fichiers de projet MSBuild, à l’aide du schéma XML MSBuild, d’imposer un contrôle sophistiqué et précis sur la façon dont vos projets sont générés et déployés.</span><span class="sxs-lookup"><span data-stu-id="8da77-122">As a developer, you can craft your own MSBuild project files, using the MSBuild XML schema, to impose sophisticated and fine-grained control over how your projects are built and deployed.</span></span> <span data-ttu-id="8da77-123">Ces fichiers de projet personnalisés fonctionnent dans la même façon que les fichiers de projet Visual Studio génère automatiquement.</span><span class="sxs-lookup"><span data-stu-id="8da77-123">These custom project files work in exactly the same way as the project files that Visual Studio generates automatically.</span></span>

> [!NOTE]
> <span data-ttu-id="8da77-124">Vous pouvez également utiliser des fichiers projet MSBuild avec le service Team Build dans Team Foundation Server (TFS).</span><span class="sxs-lookup"><span data-stu-id="8da77-124">You can also use MSBuild project files with the Team Build service in Team Foundation Server (TFS).</span></span> <span data-ttu-id="8da77-125">Par exemple, vous pouvez utiliser des fichiers de projet dans les scénarios d’intégration continue (CI) pour automatiser le déploiement dans un environnement de test lorsque le nouveau code est archivé.</span><span class="sxs-lookup"><span data-stu-id="8da77-125">For example, you can use project files in continuous integration (CI) scenarios to automate deployment to a test environment when new code is checked in.</span></span> <span data-ttu-id="8da77-126">Pour plus d’informations, consultez [configuration Team Foundation Server pour le déploiement de Web automatisée](../configuring-team-foundation-server-for-web-deployment/configuring-team-foundation-server-for-web-deployment.md).</span><span class="sxs-lookup"><span data-stu-id="8da77-126">For more information, see [Configuring Team Foundation Server for Automated Web Deployment](../configuring-team-foundation-server-for-web-deployment/configuring-team-foundation-server-for-web-deployment.md).</span></span>

### <a name="project-file-naming-conventions"></a><span data-ttu-id="8da77-127">Conventions d’affectation de noms de fichier de projet</span><span class="sxs-lookup"><span data-stu-id="8da77-127">Project File Naming Conventions</span></span>

<span data-ttu-id="8da77-128">Lorsque vous créez vos propres fichiers de projet, vous pouvez utiliser n’importe quelle extension de fichier que.</span><span class="sxs-lookup"><span data-stu-id="8da77-128">When you create your own project files, you can use any file extension you like.</span></span> <span data-ttu-id="8da77-129">Toutefois, pour rendre vos solutions plus facile à comprendre, vous devez utiliser ces conventions courantes :</span><span class="sxs-lookup"><span data-stu-id="8da77-129">However, to make your solutions easier for others to understand, you should use these common conventions:</span></span>

- <span data-ttu-id="8da77-130">Utilisez l’extension .proj lorsque vous créez un fichier de projet qui génère des projets.</span><span class="sxs-lookup"><span data-stu-id="8da77-130">Use the .proj extension when you create a project file that builds projects.</span></span>
- <span data-ttu-id="8da77-131">Utiliser l’extension .targets lorsque vous créez un fichier de projet réutilisable à importer dans d’autres fichiers de projet.</span><span class="sxs-lookup"><span data-stu-id="8da77-131">Use the .targets extension when you create a reusable project file to import into other project files.</span></span> <span data-ttu-id="8da77-132">Fichiers portant l’extension .targets en général, ne créez pas quoi que ce soit elles-mêmes, qu’ils contiennent simplement les instructions que vous pouvez importer dans vos fichiers .proj.</span><span class="sxs-lookup"><span data-stu-id="8da77-132">Files with a .targets extension typically don't build anything themselves, they simply contain instructions that you can import into your .proj files.</span></span>

### <a name="integration-with-deployment-technologies"></a><span data-ttu-id="8da77-133">Intégration aux Technologies de déploiement</span><span class="sxs-lookup"><span data-stu-id="8da77-133">Integration with Deployment Technologies</span></span>

<span data-ttu-id="8da77-134">Si vous avez travaillé avec les projets d’application web dans Visual Studio 2010, telles que les applications web ASP.NET et les applications web ASP.NET MVC, vous saurez que ces projets incluent une prise en charge intégrée pour l’empaquetage et déploiement de l’application web à un environnement cible.</span><span class="sxs-lookup"><span data-stu-id="8da77-134">If you've worked with web application projects in Visual Studio 2010, like ASP.NET web applications and ASP.NET MVC web applications, you'll know that these projects include built-in support for packaging and deploying the web application to a target environment.</span></span> <span data-ttu-id="8da77-135">Le **propriétés** pour ces projets incluent des pages **Package/Publication Web** et **Package/Publication SQL** onglets que vous pouvez utiliser pour configurer comment les composants de votre application sont empaquetées et déployées.</span><span class="sxs-lookup"><span data-stu-id="8da77-135">The **Properties** pages for these projects include **Package/Publish Web** and **Package/Publish SQL** tabs that you can use to configure how the components of your application are packaged and deployed.</span></span> <span data-ttu-id="8da77-136">Cet exemple montre la **Package/Publication Web** onglet :</span><span class="sxs-lookup"><span data-stu-id="8da77-136">This shows the **Package/Publish Web** tab:</span></span>

![](understanding-the-project-file/_static/image1.png)

<span data-ttu-id="8da77-137">La technologie sous-jacente derrière ces fonctionnalités est connue en tant que le Pipeline de publication Web (WPP).</span><span class="sxs-lookup"><span data-stu-id="8da77-137">The underlying technology behind these capabilities is known as the Web Publishing Pipeline (WPP).</span></span> <span data-ttu-id="8da77-138">Les fournisseurs de services apporte essentiellement MSBuild et [Web Deploy](https://go.microsoft.com/?linkid=9805122) ensemble pour fournir un processus de génération, déploiement du package et complète pour vos applications web.</span><span class="sxs-lookup"><span data-stu-id="8da77-138">The WPP essentially brings MSBuild and [Web Deploy](https://go.microsoft.com/?linkid=9805122) together to provide a complete build, package, and deployment process for your web applications.</span></span>

<span data-ttu-id="8da77-139">La bonne nouvelle est que vous pouvez tirer parti des points d’intégration fournies par les fournisseurs de services lorsque vous créez des fichiers de projet personnalisés pour les projets web.</span><span class="sxs-lookup"><span data-stu-id="8da77-139">The good news is that you can take advantage of the integration points that the WPP provides when you create custom project files for web projects.</span></span> <span data-ttu-id="8da77-140">Vous pouvez inclure des instructions de déploiement dans votre fichier projet, ce qui vous permet de générer vos projets et créer des packages de déploiement web installer ces packages sur des serveurs distants via un seul fichier projet et un seul appel à MSBuild.</span><span class="sxs-lookup"><span data-stu-id="8da77-140">You can include deployment instructions in your project file, which allows you to build your projects, create web deployment packages, and install these packages on remote servers through a single project file and a single call to MSBuild.</span></span> <span data-ttu-id="8da77-141">Vous pouvez également appeler les autres fichiers exécutables que dans le cadre de votre processus de génération.</span><span class="sxs-lookup"><span data-stu-id="8da77-141">You can also call any other executables as part of your build process.</span></span> <span data-ttu-id="8da77-142">Par exemple, vous pouvez exécuter l’outil de ligne de commande VSDBCMD.exe pour déployer une base de données à partir d’un fichier de schéma.</span><span class="sxs-lookup"><span data-stu-id="8da77-142">For example, you can run the VSDBCMD.exe command-line tool to deploy a database from a schema file.</span></span> <span data-ttu-id="8da77-143">Au cours de cette rubrique, vous verrez comment vous pouvez tirer parti de ces fonctionnalités pour satisfaire les besoins de vos scénarios de déploiement d’entreprise.</span><span class="sxs-lookup"><span data-stu-id="8da77-143">Over the course of this topic, you'll see how you can take advantage of these capabilities to meet the requirements of your enterprise deployment scenarios.</span></span>

> [!NOTE]
> <span data-ttu-id="8da77-144">Pour plus d’informations sur comment fonctionne le processus de déploiement d’application web, consultez [vue d’ensemble du déploiement de projet d’Application ASP.NET Web](https://msdn.microsoft.com/library/dd394698.aspx).</span><span class="sxs-lookup"><span data-stu-id="8da77-144">For more information on how the web application deployment process works, see [ASP.NET Web Application Project Deployment Overview](https://msdn.microsoft.com/library/dd394698.aspx).</span></span>

## <a name="the-anatomy-of-a-project-file"></a><span data-ttu-id="8da77-145">Anatomie d’un fichier de projet</span><span class="sxs-lookup"><span data-stu-id="8da77-145">The Anatomy of a Project File</span></span>

<span data-ttu-id="8da77-146">Avant d’examiner plus en détail le processus de génération, il est important de prendre quelques instants pour vous familiariser avec la structure de base d’un fichier projet MSBuild.</span><span class="sxs-lookup"><span data-stu-id="8da77-146">Before you look at the build process in more detail, it's worth taking a few moments to familiarize yourself with the basic structure of an MSBuild project file.</span></span> <span data-ttu-id="8da77-147">Cette section fournit une vue d’ensemble des éléments plus communs que vous allez rencontrer lorsque vous passez en revue, modifiez ou créez un fichier projet.</span><span class="sxs-lookup"><span data-stu-id="8da77-147">This section provides an overview of the more common elements that you'll encounter when you review, edit, or create a project file.</span></span> <span data-ttu-id="8da77-148">En particulier, vous apprendrez à :</span><span class="sxs-lookup"><span data-stu-id="8da77-148">In particular, you'll learn:</span></span>

- <span data-ttu-id="8da77-149">Comment utiliser *propriétés* pour gérer les variables pour le processus de génération.</span><span class="sxs-lookup"><span data-stu-id="8da77-149">How to use *properties* to manage variables for the build process.</span></span>
- <span data-ttu-id="8da77-150">Comment utiliser *éléments* pour identifier les entrées dans le processus de génération, telles que les fichiers de code.</span><span class="sxs-lookup"><span data-stu-id="8da77-150">How to use *items* to identify the inputs to the build process, like code files.</span></span>
- <span data-ttu-id="8da77-151">Comment utiliser *cibles* et *tâches* pour fournir des instructions d’exécution à MSBuild, à l’aide de *propriétés* et *éléments* définie ailleurs dans le fichier projet.</span><span class="sxs-lookup"><span data-stu-id="8da77-151">How to use *targets* and *tasks* to provide execution instructions to MSBuild, using *properties* and *items* defined elsewhere in the project file.</span></span>

<span data-ttu-id="8da77-152">Cet exemple montre la relation entre les éléments clés dans un fichier projet MSBuild :</span><span class="sxs-lookup"><span data-stu-id="8da77-152">This shows the relationship between the key elements in an MSBuild project file:</span></span>

![](understanding-the-project-file/_static/image2.png)

### <a name="the-project-element"></a><span data-ttu-id="8da77-153">L’élément de projet</span><span class="sxs-lookup"><span data-stu-id="8da77-153">The Project Element</span></span>

<span data-ttu-id="8da77-154">Le [projet](https://msdn.microsoft.com/library/bcxfsh87.aspx) élément est l’élément racine de chaque fichier de projet.</span><span class="sxs-lookup"><span data-stu-id="8da77-154">The [Project](https://msdn.microsoft.com/library/bcxfsh87.aspx) element is the root element of every project file.</span></span> <span data-ttu-id="8da77-155">En plus d’identifier le schéma XML pour le fichier projet, le **projet** élément peut inclure des attributs pour spécifier les points d’entrée pour le processus de génération.</span><span class="sxs-lookup"><span data-stu-id="8da77-155">In addition to identifying the XML schema for the project file, the **Project** element can include attributes to specify the entry points for the build process.</span></span> <span data-ttu-id="8da77-156">Par exemple, dans le [solution d’exemple de gestionnaire de contacts](the-contact-manager-solution.md), le *Publish.proj* fichier Spécifie que la build doit démarrer en appelant la cible nommée **FullPublish**.</span><span class="sxs-lookup"><span data-stu-id="8da77-156">For example, in the [Contact Manager sample solution](the-contact-manager-solution.md), the *Publish.proj* file specifies that the build should start by calling the target named **FullPublish**.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample1.xml)]

### <a name="properties-and-conditions"></a><span data-ttu-id="8da77-157">Propriétés et des Conditions</span><span class="sxs-lookup"><span data-stu-id="8da77-157">Properties and Conditions</span></span>

<span data-ttu-id="8da77-158">Un fichier de projet doit généralement fournir un grand nombre d’éléments d’information afin de créer et déployer vos projets différents.</span><span class="sxs-lookup"><span data-stu-id="8da77-158">A project file typically needs to provide lots of different pieces of information in order to successfully build and deploy your projects.</span></span> <span data-ttu-id="8da77-159">Ces éléments d’information peut inclure des noms de serveur, les chaînes de connexion, informations d’identification, les configurations de build, chemins d’accès de fichier source et de destination et toute autre information que vous souhaitez inclure pour prendre en charge la personnalisation.</span><span class="sxs-lookup"><span data-stu-id="8da77-159">These pieces of information could include server names, connection strings, credentials, build configurations, source and destination file paths, and any other information you want to include to support customization.</span></span> <span data-ttu-id="8da77-160">Dans un fichier de projet, les propriétés doivent être définies dans un [PropertyGroup](https://msdn.microsoft.com/library/t4w159bs.aspx) élément.</span><span class="sxs-lookup"><span data-stu-id="8da77-160">In a project file, properties must be defined within a [PropertyGroup](https://msdn.microsoft.com/library/t4w159bs.aspx) element.</span></span> <span data-ttu-id="8da77-161">Propriétés MSBuild sont constitués de paires clé-valeur.</span><span class="sxs-lookup"><span data-stu-id="8da77-161">MSBuild properties consist of key-value pairs.</span></span> <span data-ttu-id="8da77-162">Dans le **PropertyGroup** élément, le nom d’élément définit la clé de propriété et le contenu de l’élément définit la valeur de propriété.</span><span class="sxs-lookup"><span data-stu-id="8da77-162">Within the **PropertyGroup** element, the element name defines the property key and the content of the element defines the property value.</span></span> <span data-ttu-id="8da77-163">Par exemple, vous pouvez définir des propriétés nommées **nom_serveur** et **ConnectionString** pour stocker une chaîne de connexion et de nom de serveur statique.</span><span class="sxs-lookup"><span data-stu-id="8da77-163">For example, you could define properties named **ServerName** and **ConnectionString** to store a static server name and connection string.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample2.xml)]

<span data-ttu-id="8da77-164">Pour récupérer une valeur de propriété, vous utilisez le format \*\*$(***PropertyName***) \*\**.*</span><span class="sxs-lookup"><span data-stu-id="8da77-164">To retrieve a property value, you use the format \**$(***PropertyName***)\*\*\*.*</span></span> <span data-ttu-id="8da77-165">Par exemple, pour récupérer la valeur de la **nom_serveur** propriété, vous devez taper :</span><span class="sxs-lookup"><span data-stu-id="8da77-165">For example, to retrieve the value of the **ServerName** property, you would type:</span></span>

[!code-powershell[Main](understanding-the-project-file/samples/sample3.ps1)]

> [!NOTE]
> <span data-ttu-id="8da77-166">Vous verrez des exemples d’et quand utiliser les valeurs de propriété plus loin dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="8da77-166">You'll see examples of how and when to use property values later in this topic.</span></span>

<span data-ttu-id="8da77-167">Incorporation d’informations en tant que propriétés statiques dans un fichier projet n’est pas toujours l’approche idéale pour la gestion du processus de génération.</span><span class="sxs-lookup"><span data-stu-id="8da77-167">Embedding information as static properties in a project file is not always the ideal approach to managing the build process.</span></span> <span data-ttu-id="8da77-168">Dans de nombreux scénarios, vous souhaitez obtenir les informations provenant d’autres sources, ou permettre à l’utilisateur à fournir les informations à partir de l’invite de commandes.</span><span class="sxs-lookup"><span data-stu-id="8da77-168">In a lot of scenarios, you'll want to obtain the information from other sources or empower the user to provide the information from the command prompt.</span></span> <span data-ttu-id="8da77-169">MSBuild vous permet de spécifier n’importe quelle valeur de propriété comme un paramètre de ligne de commande.</span><span class="sxs-lookup"><span data-stu-id="8da77-169">MSBuild allows you to specify any property value as a command-line parameter.</span></span> <span data-ttu-id="8da77-170">Par exemple, l’utilisateur peut fournir une valeur pour **nom_serveur** quand il ou elle exécute MSBuild.exe à partir de la ligne de commande.</span><span class="sxs-lookup"><span data-stu-id="8da77-170">For example, the user could provide a value for **ServerName** when he or she runs MSBuild.exe from the command line.</span></span>

[!code-console[Main](understanding-the-project-file/samples/sample4.cmd)]

> [!NOTE]
> <span data-ttu-id="8da77-171">Pour plus d’informations sur les arguments et les commutateurs que vous pouvez utiliser avec MSBuild.exe, consultez [référence de ligne de commande MSBuild](https://msdn.microsoft.com/library/ms164311.aspx).</span><span class="sxs-lookup"><span data-stu-id="8da77-171">For more information on the arguments and switches you can use with MSBuild.exe, see [MSBuild Command Line Reference](https://msdn.microsoft.com/library/ms164311.aspx).</span></span>

<span data-ttu-id="8da77-172">Vous pouvez utiliser la même syntaxe de propriété pour obtenir les valeurs des variables d’environnement et des propriétés de projet intégrés.</span><span class="sxs-lookup"><span data-stu-id="8da77-172">You can use the same property syntax to obtain the values of environment variables and built-in project properties.</span></span> <span data-ttu-id="8da77-173">Un grand nombre de propriétés couramment utilisées est défini pour vous, et vous pouvez les utiliser dans vos fichiers projet en incluant le nom de paramètre concerné.</span><span class="sxs-lookup"><span data-stu-id="8da77-173">Lots of commonly used properties are defined for you, and you can use them in your project files by including the relevant parameter name.</span></span> <span data-ttu-id="8da77-174">Par exemple, pour récupérer la plateforme de projet actuelle&#x2014;, par exemple, **x86** ou **AnyCpu**&#x2014;vous pouvez inclure le **$(Platform)** référence de propriété dans votre fichier projet.</span><span class="sxs-lookup"><span data-stu-id="8da77-174">For example, to retrieve the current project platform&#x2014;for example, **x86** or **AnyCpu**&#x2014;you can include the **$(Platform)** property reference in your project file.</span></span> <span data-ttu-id="8da77-175">Pour plus d’informations, consultez [Macros pour les commandes de génération et les propriétés](https://msdn.microsoft.com/library/c02as0cs.aspx), [propriétés communes des projets MSBuild](https://msdn.microsoft.com/library/bb629394.aspx), et [propriétés réservées](https://msdn.microsoft.com/library/ms164309.aspx).</span><span class="sxs-lookup"><span data-stu-id="8da77-175">For more information, see [Macros for Build Commands and Properties](https://msdn.microsoft.com/library/c02as0cs.aspx), [Common MSBuild Project Properties](https://msdn.microsoft.com/library/bb629394.aspx), and [Reserved Properties](https://msdn.microsoft.com/library/ms164309.aspx).</span></span>

<span data-ttu-id="8da77-176">Propriétés sont souvent utilisées conjointement avec *conditions*.</span><span class="sxs-lookup"><span data-stu-id="8da77-176">Properties are often used in conjunction with *conditions*.</span></span> <span data-ttu-id="8da77-177">La plupart des éléments MSBuild prennent en charge la **Condition** attribut, qui vous permet de spécifier les critères sur lesquels MSBuild doit évaluer l’élément.</span><span class="sxs-lookup"><span data-stu-id="8da77-177">Most MSBuild elements support the **Condition** attribute, which lets you specify the criteria upon which MSBuild should evaluate the element.</span></span> <span data-ttu-id="8da77-178">Par exemple, considérez cette définition de propriété :</span><span class="sxs-lookup"><span data-stu-id="8da77-178">For example, consider this property definition:</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample5.xml)]

<span data-ttu-id="8da77-179">Quand MSBuild traite cette définition de propriété, il vérifie d’abord pour voir si un **$(OutputRoot)** valeur de propriété n’est disponible.</span><span class="sxs-lookup"><span data-stu-id="8da77-179">When MSBuild processes this property definition, it first checks to see whether an **$(OutputRoot)** property value is available.</span></span> <span data-ttu-id="8da77-180">Si la valeur de propriété est vide&#x2014;en d’autres termes, l’utilisateur n’a pas fourni une valeur pour cette propriété&#x2014;la condition prend la valeur **true** et la valeur de propriété est définie sur **... \Publish\Out**. Si l’utilisateur a fourni une valeur pour cette propriété, la condition prend la valeur **false** et la valeur de propriété statique n’est pas utilisée.</span><span class="sxs-lookup"><span data-stu-id="8da77-180">If the property value is blank&#x2014;in other words, the user hasn't provided a value for this property&#x2014;the condition evaluates to **true** and the property value is set to **..\Publish\Out**. If the user has provided a value for this property, the condition evaluates to **false** and the static property value is not used.</span></span>

<span data-ttu-id="8da77-181">Pour plus d’informations sur les différentes façons dans lequel vous pouvez spécifier des conditions, consultez [Conditions MSBuild](https://msdn.microsoft.com/library/7szfhaft.aspx).</span><span class="sxs-lookup"><span data-stu-id="8da77-181">For more information on the different ways in which you can specify conditions, see [MSBuild Conditions](https://msdn.microsoft.com/library/7szfhaft.aspx).</span></span>

### <a name="items-and-item-groups"></a><span data-ttu-id="8da77-182">Éléments et des groupes d’éléments</span><span class="sxs-lookup"><span data-stu-id="8da77-182">Items and Item Groups</span></span>

<span data-ttu-id="8da77-183">Un des rôles importants du fichier projet consiste à définir les entrées dans le processus de génération.</span><span class="sxs-lookup"><span data-stu-id="8da77-183">One of the important roles of the project file is to define the inputs to the build process.</span></span> <span data-ttu-id="8da77-184">En règle générale, ces entrées sont des fichiers&#x2014;code des fichiers, les fichiers de configuration, les fichiers de commandes et tous les autres fichiers dont vous avez besoin pour traiter ou de copier en tant que partie du processus de génération.</span><span class="sxs-lookup"><span data-stu-id="8da77-184">Typically, these inputs are files&#x2014;code files, configuration files, command files, and any other files that you need to process or copy as part of the build process.</span></span> <span data-ttu-id="8da77-185">Dans le schéma de projet MSBuild, ces entrées sont représentées par [élément](https://msdn.microsoft.com/library/ms164283.aspx) éléments.</span><span class="sxs-lookup"><span data-stu-id="8da77-185">In the MSBuild project schema, these inputs are represented by [Item](https://msdn.microsoft.com/library/ms164283.aspx) elements.</span></span> <span data-ttu-id="8da77-186">Dans un fichier de projet, les éléments doivent être définies dans un [ItemGroup](https://msdn.microsoft.com/library/646dk05y.aspx) élément.</span><span class="sxs-lookup"><span data-stu-id="8da77-186">In a project file, items must be defined within an [ItemGroup](https://msdn.microsoft.com/library/646dk05y.aspx) element.</span></span> <span data-ttu-id="8da77-187">Tout comme **propriété** éléments, vous pouvez nommer un **élément** élément comme vous le souhaitez.</span><span class="sxs-lookup"><span data-stu-id="8da77-187">Just like **Property** elements, you can name an **Item** element however you like.</span></span> <span data-ttu-id="8da77-188">Toutefois, vous devez spécifier un **Include** attribut pour identifier le fichier ou le caractère générique qui représente l’élément.</span><span class="sxs-lookup"><span data-stu-id="8da77-188">However, you must specify an **Include** attribute to identify the file or wildcard that the item represents.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample6.xml)]

<span data-ttu-id="8da77-189">En spécifiant plusieurs **élément** éléments portant le même nom, que vous créez en fait une liste nommée des ressources.</span><span class="sxs-lookup"><span data-stu-id="8da77-189">By specifying multiple **Item** elements with the same name, you're effectively creating a named list of resources.</span></span> <span data-ttu-id="8da77-190">Un bon moyen de voir comment cela fonctionne consiste à jeter un coup de œil à l’intérieur d’un des fichiers du projet créé par Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="8da77-190">A good way to see this in action is to take a look inside one of the project files that Visual Studio creates.</span></span> <span data-ttu-id="8da77-191">Par exemple, le *ContactManager.Mvc.csproj* le fichier dans l’exemple de solution inclut un grand nombre de groupes d’éléments, chacun avec plusieurs nom identique **élément** éléments.</span><span class="sxs-lookup"><span data-stu-id="8da77-191">For example, the *ContactManager.Mvc.csproj* file in the sample solution includes a lot of item groups, each with several identically named **Item** elements.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample7.xml)]

<span data-ttu-id="8da77-192">De cette façon, le fichier projet est Indiquez à MSBuild pour construire des listes de fichiers qui doivent être traitées de la même façon&#x2014;le **référence** liste inclut des assemblys qui doivent être en place pour une génération réussie, le  **Compiler** liste inclut les fichiers de code qui doivent être compilés, et le **contenu** liste contient des ressources qui doivent être copiés sans modification.</span><span class="sxs-lookup"><span data-stu-id="8da77-192">In this way, the project file is instructing MSBuild to construct lists of files that need to be processed in the same way&#x2014;the **Reference** list includes assemblies that must be in place for a successful build, the **Compile** list includes code files that must be compiled, and the **Content** list includes resources that must be copied unaltered.</span></span> <span data-ttu-id="8da77-193">Nous allons examiner comment le processus de génération fait référence et utilise ces éléments plus loin dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="8da77-193">We'll look at how the build process references and uses these items later in this topic.</span></span>

<span data-ttu-id="8da77-194">Éléments item peuvent également inclure [ItemMetadata](https://msdn.microsoft.com/library/ms164284.aspx) éléments enfants.</span><span class="sxs-lookup"><span data-stu-id="8da77-194">Item elements can also include [ItemMetadata](https://msdn.microsoft.com/library/ms164284.aspx) child elements.</span></span> <span data-ttu-id="8da77-195">Celles-ci sont définies par l’utilisateur des paires clé-valeur et essentiellement représentent les propriétés qui sont spécifiques à cet élément.</span><span class="sxs-lookup"><span data-stu-id="8da77-195">These are user-defined key-value pairs and essentially represent properties that are specific to that item.</span></span> <span data-ttu-id="8da77-196">Par exemple, un grand nombre de la **compiler** incluent des éléments dans le fichier projet **DependentUpon** éléments enfants.</span><span class="sxs-lookup"><span data-stu-id="8da77-196">For example, a lot of the **Compile** item elements in the project file include **DependentUpon** child elements.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample8.xml)]

> [!NOTE]
> <span data-ttu-id="8da77-197">En plus des métadonnées de l’élément créée par l’utilisateur, tous les éléments sont affectés à différentes métadonnées communes lors de la création.</span><span class="sxs-lookup"><span data-stu-id="8da77-197">In addition to user-created item metadata, all items are assigned various common metadata on creation.</span></span> <span data-ttu-id="8da77-198">Pour plus d’informations, consultez l’article [Well-known Item Metadata (Métadonnées d’élément connues MSBuild)](https://msdn.microsoft.com/library/ms164313.aspx).</span><span class="sxs-lookup"><span data-stu-id="8da77-198">For more information, see [Well-known Item Metadata](https://msdn.microsoft.com/library/ms164313.aspx).</span></span>

<span data-ttu-id="8da77-199">Vous pouvez créer **ItemGroup** éléments dans le niveau racine **projet** élément ou au sein de spécifiques **cible** éléments.</span><span class="sxs-lookup"><span data-stu-id="8da77-199">You can create **ItemGroup** elements within the root-level **Project** element or within specific **Target** elements.</span></span> <span data-ttu-id="8da77-200">**ItemGroup** éléments prennent également en charge **Condition** attributs, qui vous permet de personnaliser les entrées dans le processus de génération en fonction des conditions telles que la configuration de projet ou de la plateforme.</span><span class="sxs-lookup"><span data-stu-id="8da77-200">**ItemGroup** elements also support **Condition** attributes, which lets you tailor the inputs to the build process according to conditions like the project configuration or platform.</span></span>

### <a name="targets-and-tasks"></a><span data-ttu-id="8da77-201">Cibles et tâches</span><span class="sxs-lookup"><span data-stu-id="8da77-201">Targets and Tasks</span></span>

<span data-ttu-id="8da77-202">Dans le schéma MSBuild, un [tâche](https://msdn.microsoft.com/library/77f2hx1s.aspx) élément représente une instruction build individuel (ou une tâche).</span><span class="sxs-lookup"><span data-stu-id="8da77-202">In the MSBuild schema, a [Task](https://msdn.microsoft.com/library/77f2hx1s.aspx) element represents an individual build instruction (or task).</span></span> <span data-ttu-id="8da77-203">MSBuild inclut une multitude de tâches prédéfinies.</span><span class="sxs-lookup"><span data-stu-id="8da77-203">MSBuild includes a multitude of predefined tasks.</span></span> <span data-ttu-id="8da77-204">Exemple :</span><span class="sxs-lookup"><span data-stu-id="8da77-204">For example:</span></span>

- <span data-ttu-id="8da77-205">Le **copie** tâche copie des fichiers vers un nouvel emplacement.</span><span class="sxs-lookup"><span data-stu-id="8da77-205">The **Copy** task copies files to a new location.</span></span>
- <span data-ttu-id="8da77-206">Le **Csc** tâche appelle le compilateur Visual c#.</span><span class="sxs-lookup"><span data-stu-id="8da77-206">The **Csc** task invokes the Visual C# compiler.</span></span>
- <span data-ttu-id="8da77-207">Le **Vbc** tâche appelle le compilateur Visual Basic.</span><span class="sxs-lookup"><span data-stu-id="8da77-207">The **Vbc** task invokes the Visual Basic compiler.</span></span>
- <span data-ttu-id="8da77-208">Le **Exec** tâche exécute un programme spécifié.</span><span class="sxs-lookup"><span data-stu-id="8da77-208">The **Exec** task runs a specified program.</span></span>
- <span data-ttu-id="8da77-209">Le **Message** tâche écrit un message dans un enregistreur d’événements.</span><span class="sxs-lookup"><span data-stu-id="8da77-209">The **Message** task writes a message to a logger.</span></span>

> [!NOTE]
> <span data-ttu-id="8da77-210">Pour obtenir des informations complètes sur les tâches qui sont disponibles prêtes à l’emploi, consultez [référence des tâches MSBuild](https://msdn.microsoft.com/library/7z253716.aspx).</span><span class="sxs-lookup"><span data-stu-id="8da77-210">For full details of the tasks that are available out of the box, see [MSBuild Task Reference](https://msdn.microsoft.com/library/7z253716.aspx).</span></span> <span data-ttu-id="8da77-211">Pour plus d’informations sur les tâches, y compris comment créer vos propres tâches personnalisées, consultez [tâches MSBuild](https://msdn.microsoft.com/library/ms171466.aspx).</span><span class="sxs-lookup"><span data-stu-id="8da77-211">For more information on tasks, including how to create your own custom tasks, see [MSBuild Tasks](https://msdn.microsoft.com/library/ms171466.aspx).</span></span>

<span data-ttu-id="8da77-212">Tâches doivent toujours être contenues dans [cible](https://msdn.microsoft.com/library/t50z2hka.aspx) éléments.</span><span class="sxs-lookup"><span data-stu-id="8da77-212">Tasks must always be contained within [Target](https://msdn.microsoft.com/library/t50z2hka.aspx) elements.</span></span> <span data-ttu-id="8da77-213">Un **cible** élément est un ensemble d’une ou plusieurs tâches sont exécutées séquentiellement, et un fichier de projet peut contenir plusieurs cibles.</span><span class="sxs-lookup"><span data-stu-id="8da77-213">A **Target** element is a set of one or more tasks that are executed sequentially, and a project file can contain multiple targets.</span></span> <span data-ttu-id="8da77-214">Lorsque vous souhaitez exécuter une tâche ou un ensemble de tâches, vous appelez la cible qui les contient.</span><span class="sxs-lookup"><span data-stu-id="8da77-214">When you want to run a task, or a set of tasks, you invoke the target that contains them.</span></span> <span data-ttu-id="8da77-215">Par exemple, supposons que vous disposez d’un fichier de projet simple qui enregistre un message.</span><span class="sxs-lookup"><span data-stu-id="8da77-215">For example, suppose you have a simple project file that logs a message.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample9.xml)]

<span data-ttu-id="8da77-216">Vous pouvez appeler la cible à partir de la ligne de commande à l’aide de la **/t** commutateur pour spécifier la cible.</span><span class="sxs-lookup"><span data-stu-id="8da77-216">You can invoke the target from the command line, by using the **/t** switch to specify the target.</span></span>

[!code-console[Main](understanding-the-project-file/samples/sample10.cmd)]

<span data-ttu-id="8da77-217">Vous pouvez également ajouter un **DefaultTargets** attribut le **projet** élément, pour spécifier les cibles que vous souhaitez appeler.</span><span class="sxs-lookup"><span data-stu-id="8da77-217">Alternatively, you can add a **DefaultTargets** attribute to the **Project** element, to specify the targets that you want to invoke.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample11.xml)]

<span data-ttu-id="8da77-218">Dans ce cas, vous n’avez pas besoin de spécifier la cible à partir de la ligne de commande.</span><span class="sxs-lookup"><span data-stu-id="8da77-218">In this case, you don't need to specify the target from the command line.</span></span> <span data-ttu-id="8da77-219">Vous pouvez spécifier simplement le fichier projet et MSBuild appellera le **FullPublish** cible pour vous.</span><span class="sxs-lookup"><span data-stu-id="8da77-219">You can simply specify the project file, and MSBuild will invoke the **FullPublish** target for you.</span></span>

[!code-console[Main](understanding-the-project-file/samples/sample12.cmd)]

<span data-ttu-id="8da77-220">Cibles et tâches peuvent inclure **Condition** attributs.</span><span class="sxs-lookup"><span data-stu-id="8da77-220">Both targets and tasks can include **Condition** attributes.</span></span> <span data-ttu-id="8da77-221">Par conséquent, vous pouvez choisir d’omettre des cibles entières ou des tâches individuelles si certaines conditions sont remplies.</span><span class="sxs-lookup"><span data-stu-id="8da77-221">As such, you can choose to omit entire targets or individual tasks if certain conditions are met.</span></span>

<span data-ttu-id="8da77-222">En règle générale, lorsque vous créez des tâches utiles et cibles, vous devez faire référence aux propriétés et aux éléments que vous avez défini ailleurs dans le fichier projet :</span><span class="sxs-lookup"><span data-stu-id="8da77-222">Generally speaking, when you create useful tasks and targets, you'll need to refer to the properties and items that you've defined elsewhere in the project file:</span></span>

- <span data-ttu-id="8da77-223">Pour utiliser une valeur de propriété, tapez **$(***PropertyName***)**, où *PropertyName* est le nom de la **propriété** élément ou le nom de la paramètre.</span><span class="sxs-lookup"><span data-stu-id="8da77-223">To use a property value, type **$(***PropertyName***)**, where *PropertyName* is the name of the **Property** element or the name of the parameter.</span></span>
- <span data-ttu-id="8da77-224">Pour utiliser un élément, tapez **@(***ItemName***)**, où *ItemName* est le nom de la **élément** élément.</span><span class="sxs-lookup"><span data-stu-id="8da77-224">To use an item, type **@(***ItemName***)**, where *ItemName* is the name of the **Item** element.</span></span>

> [!NOTE]
> <span data-ttu-id="8da77-225">N’oubliez pas que si vous créez plusieurs éléments portant le même nom, vous créez une liste.</span><span class="sxs-lookup"><span data-stu-id="8da77-225">Remember that if you create multiple items with the same name, you're building a list.</span></span> <span data-ttu-id="8da77-226">En revanche, si vous créez plusieurs propriétés portant le même nom, la dernière valeur de propriété que vous fournissez remplacera toutes les propriétés précédentes portant le même nom&#x2014;une propriété peut contenir uniquement une valeur unique.</span><span class="sxs-lookup"><span data-stu-id="8da77-226">In contrast, if you create multiple properties with the same name, the last property value you provide will overwrite any previous properties with the same name&#x2014;a property can only contain a single value.</span></span>

<span data-ttu-id="8da77-227">Par exemple, dans le *Publish.proj* de fichiers dans l’exemple de solution, jetez un coup de œil à la **BuildProjects** cible.</span><span class="sxs-lookup"><span data-stu-id="8da77-227">For example, in the *Publish.proj* file in the sample solution, take a look at the **BuildProjects** target.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample13.xml)]

<span data-ttu-id="8da77-228">Dans cet exemple, vous pouvez observer ces points clés :</span><span class="sxs-lookup"><span data-stu-id="8da77-228">In this sample, you can observe these key points:</span></span>

- <span data-ttu-id="8da77-229">Si le **BuildingInTeamBuild** paramètre est spécifié et a la valeur **true**, aucune des tâches au sein de cette cible sera exécuté.</span><span class="sxs-lookup"><span data-stu-id="8da77-229">If the **BuildingInTeamBuild** parameter is specified and has a value of **true**, none of the tasks within this target will be executed.</span></span>
- <span data-ttu-id="8da77-230">La cible contient une seule instance de la [MSBuild](https://msdn.microsoft.com/library/z7f65y0d.aspx) tâche.</span><span class="sxs-lookup"><span data-stu-id="8da77-230">The target contains a single instance of the [MSBuild](https://msdn.microsoft.com/library/z7f65y0d.aspx) task.</span></span> <span data-ttu-id="8da77-231">Cette tâche vous permet de créer d’autres projets MSBuild.</span><span class="sxs-lookup"><span data-stu-id="8da77-231">This task lets you build other MSBuild projects.</span></span>
- <span data-ttu-id="8da77-232">Le **ProjectsToBuild** élément est passé à la tâche.</span><span class="sxs-lookup"><span data-stu-id="8da77-232">The **ProjectsToBuild** item is passed to the task.</span></span> <span data-ttu-id="8da77-233">Cet élément peut représenter une liste de fichiers projet ou solution, tout définis par **ProjectsToBuild** des éléments au sein d’un groupe d’éléments item.</span><span class="sxs-lookup"><span data-stu-id="8da77-233">This item could represent a list of project or solution files, all defined by **ProjectsToBuild** item elements within an item group.</span></span> <span data-ttu-id="8da77-234">Dans ce cas, le **ProjectsToBuild** élément fait référence à un fichier de solution unique.</span><span class="sxs-lookup"><span data-stu-id="8da77-234">In this case, the **ProjectsToBuild** item refers to a single solution file.</span></span>

    [!code-xml[Main](understanding-the-project-file/samples/sample14.xml)]
- <span data-ttu-id="8da77-235">Les valeurs de propriété passées à la **MSBuild** tâches incluent des paramètres nommés **OutputRoot** et **Configuration**.</span><span class="sxs-lookup"><span data-stu-id="8da77-235">The property values passed to the **MSBuild** task include parameters named **OutputRoot** and **Configuration**.</span></span> <span data-ttu-id="8da77-236">Ces propriétés sont définies pour les valeurs des paramètres si elles sont fournies, ou les valeurs de propriété statique si elles ne sont pas.</span><span class="sxs-lookup"><span data-stu-id="8da77-236">These are set to parameter values if they are provided, or static property values if they are not.</span></span>

    [!code-xml[Main](understanding-the-project-file/samples/sample15.xml)]

<span data-ttu-id="8da77-237">Vous pouvez également voir que le **MSBuild** tâche appelle une cible nommée **Build**.</span><span class="sxs-lookup"><span data-stu-id="8da77-237">You can also see that the **MSBuild** task invokes a target named **Build**.</span></span> <span data-ttu-id="8da77-238">C’est une de plusieurs cibles intégrées qui sont largement utilisées dans les fichiers de projet Visual Studio et sont disponible dans vos fichiers de projet personnalisé, comme **Build**, **Clean**, **reconstruire**, et **publier**.</span><span class="sxs-lookup"><span data-stu-id="8da77-238">This is one of several built-in targets that are widely used in Visual Studio project files and are available to you in your custom project files, like **Build**, **Clean**, **Rebuild**, and **Publish**.</span></span> <span data-ttu-id="8da77-239">Vous en apprendrez davantage sur l’utilisation de cibles et des tâches pour contrôler le processus de génération, ainsi que sur le **MSBuild** de tâches, en particulier, plus loin dans cette rubrique.</span><span class="sxs-lookup"><span data-stu-id="8da77-239">You'll learn more about using targets and tasks to control the build process, and about the **MSBuild** task in particular, later in this topic.</span></span>

> [!NOTE]
> <span data-ttu-id="8da77-240">Pour plus d’informations sur les cibles, consultez [cibles MSBuild](https://msdn.microsoft.com/library/ms171462.aspx).</span><span class="sxs-lookup"><span data-stu-id="8da77-240">For more information on targets, see [MSBuild Targets](https://msdn.microsoft.com/library/ms171462.aspx).</span></span>

## <a name="splitting-project-files-to-support-multiple-environments"></a><span data-ttu-id="8da77-241">Fractionner des fichiers de projet pour prendre en charge plusieurs environnements</span><span class="sxs-lookup"><span data-stu-id="8da77-241">Splitting Project Files to Support Multiple Environments</span></span>

<span data-ttu-id="8da77-242">Supposons que vous souhaitez être en mesure de déployer une solution dans plusieurs environnements, tels que les serveurs de test, intermédiaires plateformes et les environnements de production.</span><span class="sxs-lookup"><span data-stu-id="8da77-242">Suppose you want to be able to deploy a solution to multiple environments, like test servers, staging platforms, and production environments.</span></span> <span data-ttu-id="8da77-243">La configuration peut varier considérablement entre ces environnements&#x2014;non seulement en termes de noms de serveur, chaînes de connexion et ainsi de suite, mais aussi potentiellement en termes d’informations d’identification, paramètres de sécurité et bien d’autres facteurs.</span><span class="sxs-lookup"><span data-stu-id="8da77-243">The configuration may vary substantially between these environments&#x2014;not just in terms of server names, connection strings, and so on, but also potentially in terms of credentials, security settings, and lots of other factors.</span></span> <span data-ttu-id="8da77-244">Si vous devez faire cela régulièrement, il n’est pas vraiment utile de modifier plusieurs propriétés de votre fichier projet chaque fois que vous changez l’environnement cible.</span><span class="sxs-lookup"><span data-stu-id="8da77-244">If you need to do this regularly, it's not really expedient to edit multiple properties in your project file every time you switch the target environment.</span></span> <span data-ttu-id="8da77-245">Et n’est pas une solution idéale pour exiger une liste sans fin des valeurs de propriété doit être fourni pour le processus de génération.</span><span class="sxs-lookup"><span data-stu-id="8da77-245">Nor is it an ideal solution to require an endless list of property values to be provided to the build process.</span></span>

<span data-ttu-id="8da77-246">Heureusement il existe une alternative.</span><span class="sxs-lookup"><span data-stu-id="8da77-246">Fortunately there is an alternative.</span></span> <span data-ttu-id="8da77-247">MSBuild vous permet de fractionner votre configuration de build dans plusieurs fichiers de projet.</span><span class="sxs-lookup"><span data-stu-id="8da77-247">MSBuild lets you split your build configuration across multiple project files.</span></span> <span data-ttu-id="8da77-248">Pour voir comment cela fonctionne, dans l’exemple de solution, notez qu’il existe deux fichiers de projet personnalisé :</span><span class="sxs-lookup"><span data-stu-id="8da77-248">To see how this works, in the sample solution, notice that there are two custom project files:</span></span>

- <span data-ttu-id="8da77-249">*Publish.proj*, qui contient des propriétés, éléments, et les cibles qui sont communes à tous les environnements.</span><span class="sxs-lookup"><span data-stu-id="8da77-249">*Publish.proj*, which contains properties, items, and targets that are common to all environments.</span></span>
- <span data-ttu-id="8da77-250">*Env-Dev.proj*, qui contient des propriétés qui sont spécifiques à un environnement de développement.</span><span class="sxs-lookup"><span data-stu-id="8da77-250">*Env-Dev.proj*, which contains properties that are specific to a developer environment.</span></span>

<span data-ttu-id="8da77-251">Maintenant Notez que le *Publish.proj* fichier inclut une [importation](https://msdn.microsoft.com/library/92x05xfs.aspx) élément, immédiatement sous l’accolade ouvrante **projet** balise.</span><span class="sxs-lookup"><span data-stu-id="8da77-251">Now notice that the *Publish.proj* file includes an [Import](https://msdn.microsoft.com/library/92x05xfs.aspx) element, immediately beneath the opening **Project** tag.</span></span>

[!code-xml[Main](understanding-the-project-file/samples/sample16.xml)]

<span data-ttu-id="8da77-252">Le **importer** élément est utilisé pour importer le contenu d’un autre fichier de projet MSBuild dans le fichier de projet MSBuild en cours.</span><span class="sxs-lookup"><span data-stu-id="8da77-252">The **Import** element is used to import the contents of another MSBuild project file into the current MSBuild project file.</span></span> <span data-ttu-id="8da77-253">Dans ce cas, le **TargetEnvPropsFile** paramètre fournit le nom de fichier du fichier projet à importer.</span><span class="sxs-lookup"><span data-stu-id="8da77-253">In this case, the **TargetEnvPropsFile** parameter provides the filename of the project file you want to import.</span></span> <span data-ttu-id="8da77-254">Vous pouvez fournir une valeur pour ce paramètre lorsque vous exécutez MSBuild.</span><span class="sxs-lookup"><span data-stu-id="8da77-254">You can provide a value for this parameter when you run MSBuild.</span></span>

[!code-console[Main](understanding-the-project-file/samples/sample17.cmd)]

<span data-ttu-id="8da77-255">Ce efficace fusionne le contenu des deux fichiers dans un seul fichier projet.</span><span class="sxs-lookup"><span data-stu-id="8da77-255">This effectively merges the contents of the two files into a single project file.</span></span> <span data-ttu-id="8da77-256">À l’aide de cette approche, vous pouvez créer un fichier de projet qui contient votre configuration de build universelle et plusieurs fichiers de projet supplémentaires qui contient les propriétés spécifiques à l’environnement.</span><span class="sxs-lookup"><span data-stu-id="8da77-256">Using this approach, you can create one project file containing your universal build configuration and multiple supplementary project files containing environment-specific properties.</span></span> <span data-ttu-id="8da77-257">Par conséquent, il vous suffit d’exécuter une commande avec une valeur de paramètre différente vous permet de déployer votre solution vers un autre environnement.</span><span class="sxs-lookup"><span data-stu-id="8da77-257">As a result, simply running a command with a different parameter value lets you deploy your solution to a different environment.</span></span>

![](understanding-the-project-file/_static/image3.png)

<span data-ttu-id="8da77-258">Fractionnement de vos fichiers de projet de cette façon est une bonne pratique à suivre.</span><span class="sxs-lookup"><span data-stu-id="8da77-258">Splitting your project files in this way is a good practice to follow.</span></span> <span data-ttu-id="8da77-259">Il permet aux développeurs de déployer dans plusieurs environnements en exécutant une commande unique, tout en évitant la duplication des propriétés de build universel dans plusieurs fichiers de projet.</span><span class="sxs-lookup"><span data-stu-id="8da77-259">It allows developers to deploy to multiple environments by running a single command, while avoiding the duplication of universal build properties across multiple project files.</span></span>

> [!NOTE]
> <span data-ttu-id="8da77-260">Pour obtenir des conseils sur la façon de personnaliser les fichiers de projet spécifique à l’environnement pour vos propres environnements serveur, consultez [configuration des propriétés de déploiement pour un environnement cible](../configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment.md).</span><span class="sxs-lookup"><span data-stu-id="8da77-260">For guidance on how to customize the environment-specific project files for your own server environments, see [Configuring Deployment Properties for a Target Environment](../configuring-server-environments-for-web-deployment/configuring-deployment-properties-for-a-target-environment.md).</span></span>

## <a name="conclusion"></a><span data-ttu-id="8da77-261">Conclusion</span><span class="sxs-lookup"><span data-stu-id="8da77-261">Conclusion</span></span>

<span data-ttu-id="8da77-262">Cette rubrique fourni une introduction générale aux fichiers projet MSBuild et expliqué comment vous pouvez créer vos propres fichiers de projet personnalisé pour contrôler le processus de génération.</span><span class="sxs-lookup"><span data-stu-id="8da77-262">This topic provided a general introduction to MSBuild project files and explained how you can create your own custom project files to control the build process.</span></span> <span data-ttu-id="8da77-263">Il a également introduit le concept de fractionner des fichiers projet dans les instructions de génération universelle et propriétés spécifiques à l’environnement build, pour faciliter le travail générer et déployer des projets vers plusieurs destinations.</span><span class="sxs-lookup"><span data-stu-id="8da77-263">It also introduced the concept of splitting project files into universal build instructions and environment-specific build properties, to make it easy to build and deploy projects to multiple destinations.</span></span>

<span data-ttu-id="8da77-264">La rubrique suivante, [comprendre le processus de génération](understanding-the-build-process.md), fournit plus d’informations sur comment vous pouvez utiliser des fichiers de projet pour la génération du contrôle et de déploiement en vous guidant à travers le déploiement d’une solution avec un niveau réaliste de complexité.</span><span class="sxs-lookup"><span data-stu-id="8da77-264">The next topic, [Understanding the Build Process](understanding-the-build-process.md), provides more insight into how you can use project files to control build and deployment by walking you through the deployment of a solution with a realistic level of complexity.</span></span>

## <a name="further-reading"></a><span data-ttu-id="8da77-265">informations supplémentaires</span><span class="sxs-lookup"><span data-stu-id="8da77-265">Further Reading</span></span>

<span data-ttu-id="8da77-266">Pour une présentation plus approfondie des fichiers projet et les fournisseurs de services, consultez [à l’intérieur de la Microsoft Build Engine : À l’aide de MSBuild et Team Foundation Build](http://amzn.com/0735645248) par Sayed Ibrahim Hashimi et William Bartholomew, ISBN : 978-0-7356-4524-0.</span><span class="sxs-lookup"><span data-stu-id="8da77-266">For a more in-depth introduction to project files and the WPP, see [Inside the Microsoft Build Engine: Using MSBuild and Team Foundation Build](http://amzn.com/0735645248) by Sayed Ibrahim Hashimi and William Bartholomew, ISBN: 978-0-7356-4524-0.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="8da77-267">[Précédent](setting-up-the-contact-manager-solution.md)
> [Suivant](understanding-the-build-process.md)</span><span class="sxs-lookup"><span data-stu-id="8da77-267">[Previous](setting-up-the-contact-manager-solution.md)
[Next](understanding-the-build-process.md)</span></span>

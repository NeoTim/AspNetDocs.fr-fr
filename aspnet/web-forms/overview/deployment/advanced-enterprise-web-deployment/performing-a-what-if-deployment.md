---
uid: web-forms/overview/deployment/advanced-enterprise-web-deployment/performing-a-what-if-deployment
title: Exécution d’un déploiement de What If | Microsoft Docs
author: jrjlee
description: Cette rubrique explique comment effectuer des déploiements (ou simulés) à l’aide de l’outil de déploiement Web (Web Deploy) Internet Information Services (IIS) et de...
ms.author: riande
ms.date: 05/04/2012
ms.assetid: c711b453-01ac-4e65-a48c-93d99bf22e58
msc.legacyurl: /web-forms/overview/deployment/advanced-enterprise-web-deployment/performing-a-what-if-deployment
msc.type: authoredcontent
ms.openlocfilehash: 73a0e038cc0d4ebae0ffc8ed3fd2de4c9dad673c
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78628890"
---
# <a name="performing-a-what-if-deployment"></a><span data-ttu-id="33411-103">Exécution d’un déploiement « Scénario »</span><span class="sxs-lookup"><span data-stu-id="33411-103">Performing a "What If" Deployment</span></span>

<span data-ttu-id="33411-104">par [Jason Lee](https://github.com/jrjlee)</span><span class="sxs-lookup"><span data-stu-id="33411-104">by [Jason Lee](https://github.com/jrjlee)</span></span>

[<span data-ttu-id="33411-105">Télécharger PDF</span><span class="sxs-lookup"><span data-stu-id="33411-105">Download PDF</span></span>](https://msdnshared.blob.core.windows.net/media/MSDNBlogsFS/prod.evol.blogs.msdn.com/CommunityServer.Blogs.Components.WeblogFiles/00/00/00/63/56/8130.DeployingWebAppsInEnterpriseScenarios.pdf)

> <span data-ttu-id="33411-106">Cette rubrique explique comment effectuer des déploiements « quels si » (ou simulés) à l’aide de l’outil de déploiement Web de Internet Information Services (IIS) (Web Deploy) et VSDBCMD.</span><span class="sxs-lookup"><span data-stu-id="33411-106">This topic describes how to perform "what if" (or simulated) deployments using the Internet Information Services (IIS) Web Deployment Tool (Web Deploy) and VSDBCMD.</span></span> <span data-ttu-id="33411-107">Cela vous permet de déterminer les effets de votre logique de déploiement sur un environnement cible particulier avant de déployer réellement votre application.</span><span class="sxs-lookup"><span data-stu-id="33411-107">This lets you determine the effects of your deployment logic on a particular target environment before you actually deploy your application.</span></span>

<span data-ttu-id="33411-108">Cette rubrique fait partie d’une série de didacticiels basés sur les exigences de déploiement en entreprise d’une société fictive nommée Fabrikam, Inc. Cette série de didacticiels utilise un&#x2014;exemple de solution de [gestion des contacts](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;pour représenter une application Web avec un niveau de complexité réaliste, y compris une application ASP.NET MVC 3, un service Windows Communication Foundation (WCF) et un projet de base de données.</span><span class="sxs-lookup"><span data-stu-id="33411-108">This topic forms part of a series of tutorials based around the enterprise deployment requirements of a fictional company named Fabrikam, Inc. This tutorial series uses a sample solution&#x2014;the [Contact Manager solution](../web-deployment-in-the-enterprise/the-contact-manager-solution.md)&#x2014;to represent a web application with a realistic level of complexity, including an ASP.NET MVC 3 application, a Windows Communication Foundation (WCF) service, and a database project.</span></span>

<span data-ttu-id="33411-109">La méthode de déploiement au cœur de ces didacticiels est basée sur l’approche de fichier de projet fractionné décrite dans [fonctionnement du fichier projet](../web-deployment-in-the-enterprise/understanding-the-project-file.md), dans lequel le processus de génération et de déploiement est&#x2014;contrôlé par deux fichiers projet qui contiennent des instructions de génération qui s’appliquent à chaque environnement de destination et un qui contient des paramètres de génération et de déploiement spécifiques à l’environnement.</span><span class="sxs-lookup"><span data-stu-id="33411-109">The deployment method at the heart of these tutorials is based on the split project file approach described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md), in which the build and deployment process is controlled by two project files&#x2014;one containing build instructions that apply to every destination environment, and one containing environment-specific build and deployment settings.</span></span> <span data-ttu-id="33411-110">Au moment de la génération, le fichier projet spécifique à l’environnement est fusionné dans le fichier projet indépendant de l’environnement pour former un ensemble complet d’instructions de génération.</span><span class="sxs-lookup"><span data-stu-id="33411-110">At build time, the environment-specific project file is merged into the environment-agnostic project file to form a complete set of build instructions.</span></span>

## <a name="performing-a-what-if-deployment-for-web-packages"></a><span data-ttu-id="33411-111">Exécution d’un déploiement « What If » pour les packages Web</span><span class="sxs-lookup"><span data-stu-id="33411-111">Performing a "What If" Deployment for Web Packages</span></span>

<span data-ttu-id="33411-112">Web Deploy comprend des fonctionnalités qui vous permettent d’effectuer des déploiements en mode « quoi si » (ou d’essai).</span><span class="sxs-lookup"><span data-stu-id="33411-112">Web Deploy includes functionality that lets you perform deployments in "what if" (or trial) mode.</span></span> <span data-ttu-id="33411-113">Lorsque vous déployez des artefacts en mode « quoi si », Web Deploy génère un fichier journal comme si vous aviez effectué le déploiement, mais il ne modifie en fait rien sur le serveur de destination.</span><span class="sxs-lookup"><span data-stu-id="33411-113">When you deploy artifacts in "what if" mode, Web Deploy generates a log file as if you had performed the deployment, but it doesn't actually change anything on the destination server.</span></span> <span data-ttu-id="33411-114">L’examen du fichier journal peut vous aider à comprendre l’impact que votre déploiement aura sur le serveur de destination, en particulier :</span><span class="sxs-lookup"><span data-stu-id="33411-114">Reviewing the log file can help you to understand what impact your deployment will have on the destination server, in particular:</span></span>

- <span data-ttu-id="33411-115">Ce qui va être ajouté.</span><span class="sxs-lookup"><span data-stu-id="33411-115">What will get added.</span></span>
- <span data-ttu-id="33411-116">Ce qui va être mis à jour.</span><span class="sxs-lookup"><span data-stu-id="33411-116">What will get updated.</span></span>
- <span data-ttu-id="33411-117">Ce qui va être supprimé.</span><span class="sxs-lookup"><span data-stu-id="33411-117">What will get deleted.</span></span>

<span data-ttu-id="33411-118">Étant donné qu’un déploiement « What If » n’est pas réellement modifié sur le serveur de destination, ce qu’il ne peut pas toujours faire est de prédire si un déploiement s’effectue correctement.</span><span class="sxs-lookup"><span data-stu-id="33411-118">Because a "what if" deployment doesn't actually change anything on the destination server, what it can't always do is predict whether a deployment will succeed.</span></span>

<span data-ttu-id="33411-119">Comme décrit dans [déploiement de packages Web](../web-deployment-in-the-enterprise/deploying-web-packages.md), vous pouvez déployer des packages Web à l’aide de&#x2014;Web Deploy de deux manières en utilisant l’utilitaire de ligne de commande MSDeploy. exe directement ou en exécutant le fichier *. deploy. cmd* généré par le processus de génération.</span><span class="sxs-lookup"><span data-stu-id="33411-119">As described in [Deploying Web Packages](../web-deployment-in-the-enterprise/deploying-web-packages.md), you can deploy web packages using Web Deploy in two ways&#x2014;by using the MSDeploy.exe command-line utility directly or by running the *.deploy.cmd* file that the build process generates.</span></span>

<span data-ttu-id="33411-120">Si vous utilisez MSDeploy. exe directement, vous pouvez exécuter un déploiement « What If » en ajoutant l’indicateur **– WhatIf** à votre commande.</span><span class="sxs-lookup"><span data-stu-id="33411-120">If you're using MSDeploy.exe directly, you can run a "what if" deployment by adding the **–whatif** flag to your command.</span></span> <span data-ttu-id="33411-121">Par exemple, pour évaluer ce qui se passerait si vous avez déployé le package ContactManager. Mvc. zip dans un environnement intermédiaire, la commande MSDeploy devrait ressembler à ceci :</span><span class="sxs-lookup"><span data-stu-id="33411-121">For example, to evaluate what would happen if you deployed the ContactManager.Mvc.zip package to a staging environment, the MSDeploy command should resemble this:</span></span>

[!code-console[Main](performing-a-what-if-deployment/samples/sample1.cmd)]

<span data-ttu-id="33411-122">Lorsque vous êtes satisfait des résultats de votre déploiement « quoi si », vous pouvez supprimer l’indicateur **– WhatIf** pour exécuter un déploiement en direct.</span><span class="sxs-lookup"><span data-stu-id="33411-122">When you're satisfied with the results of your "what if" deployment, you can remove the **–whatif** flag to run a live deployment.</span></span>

> [!NOTE]
> <span data-ttu-id="33411-123">Pour plus d’informations sur les options de ligne de commande pour MSDeploy. exe, consultez Paramètres de l' [opération Web Deploy](https://technet.microsoft.com/library/dd569089(WS.10).aspx).</span><span class="sxs-lookup"><span data-stu-id="33411-123">For more information on command-line options for MSDeploy.exe, see [Web Deploy Operation Settings](https://technet.microsoft.com/library/dd569089(WS.10).aspx).</span></span>

<span data-ttu-id="33411-124">Si vous utilisez le fichier *. deploy. cmd* , vous pouvez exécuter un déploiement « What If » en incluant l’indicateur **/t** (mode d’évaluation) au lieu de l’indicateur **/y** (« Yes » ou le mode de mise à jour) dans votre commande.</span><span class="sxs-lookup"><span data-stu-id="33411-124">If you're using the *.deploy.cmd* file, you can run a "what if" deployment by including the **/t** flag (trial mode) flag instead of the **/y** flag ("yes," or update mode) in your command.</span></span> <span data-ttu-id="33411-125">Par exemple, pour évaluer ce qui se passe si vous avez déployé le package ContactManager. Mvc. zip en exécutant le fichier *. deploy. cmd* , votre commande doit ressembler à ceci :</span><span class="sxs-lookup"><span data-stu-id="33411-125">For example, to evaluate what would happen if you deployed the ContactManager.Mvc.zip package by running the *.deploy.cmd* file, your command should resemble this:</span></span>

[!code-console[Main](performing-a-what-if-deployment/samples/sample2.cmd)]

<span data-ttu-id="33411-126">Lorsque vous êtes satisfait des résultats de votre déploiement « mode d’évaluation », vous pouvez remplacer l’indicateur **/t** par un indicateur **/y** pour exécuter un déploiement en direct :</span><span class="sxs-lookup"><span data-stu-id="33411-126">When you're satisfied with the results of your "trial mode" deployment, you can replace the **/t** flag with a **/y** flag to run a live deployment:</span></span>

[!code-console[Main](performing-a-what-if-deployment/samples/sample3.cmd)]

> [!NOTE]
> <span data-ttu-id="33411-127">Pour plus d’informations sur les options de ligne de commande pour les fichiers *. deploy. cmd* , consultez [procédure : installer un package de déploiement à l’aide du fichier Deploy. cmd](https://msdn.microsoft.com/library/ff356104.aspx).</span><span class="sxs-lookup"><span data-stu-id="33411-127">For more information on command-line options for *.deploy.cmd* files, see [How to: Install a Deployment Package Using the deploy.cmd File](https://msdn.microsoft.com/library/ff356104.aspx).</span></span> <span data-ttu-id="33411-128">Si vous exécutez le fichier *. deploy. cmd* sans spécifier d’indicateurs, l’invite de commandes affiche la liste des indicateurs disponibles.</span><span class="sxs-lookup"><span data-stu-id="33411-128">If you run the *.deploy.cmd* file without specifying any flags, the command prompt will display a list of available flags.</span></span>

## <a name="performing-a-what-if-deployment-for-databases"></a><span data-ttu-id="33411-129">Exécution d’un déploiement « What If » pour les bases de données</span><span class="sxs-lookup"><span data-stu-id="33411-129">Performing a "What If" Deployment for Databases</span></span>

<span data-ttu-id="33411-130">Cette section part du principe que vous utilisez l’utilitaire VSDBCMD pour effectuer un déploiement de base de données incrémentiel basé sur un schéma.</span><span class="sxs-lookup"><span data-stu-id="33411-130">This section assumes that you're using the VSDBCMD utility to perform incremental, schema-based database deployment.</span></span> <span data-ttu-id="33411-131">Cette approche est décrite plus en détail dans [déploiement des projets de base de données](../web-deployment-in-the-enterprise/deploying-database-projects.md).</span><span class="sxs-lookup"><span data-stu-id="33411-131">This approach is described in more detail in [Deploying Database Projects](../web-deployment-in-the-enterprise/deploying-database-projects.md).</span></span> <span data-ttu-id="33411-132">Nous vous recommandons de vous familiariser avec cette rubrique avant d’appliquer les concepts décrits ici.</span><span class="sxs-lookup"><span data-stu-id="33411-132">We recommend that you familiarize yourself with this topic before you apply the concepts described here.</span></span>

<span data-ttu-id="33411-133">Quand vous utilisez VSDBCMD en mode de **déploiement** , vous pouvez utiliser l’indicateur **/DD** (ou **/DEPLOYTODATABASE**) pour contrôler si VSDBCMD déploie réellement la base de données ou s’il vient de générer un script de déploiement.</span><span class="sxs-lookup"><span data-stu-id="33411-133">When you use VSDBCMD in **Deploy** mode, you can use the **/dd** (or **/DeployToDatabase**) flag to control whether VSDBCMD actually deploys the database or just generates a deployment script.</span></span> <span data-ttu-id="33411-134">Si vous déployez un fichier. dbschema, le comportement est le suivant :</span><span class="sxs-lookup"><span data-stu-id="33411-134">If you're deploying a .dbschema file, this is the behavior:</span></span>

- <span data-ttu-id="33411-135">Si vous spécifiez **/DD +** ou **/DD**, VSDBCMD génère un script de déploiement et déploie la base de données.</span><span class="sxs-lookup"><span data-stu-id="33411-135">If you specify **/dd+** or **/dd**, VSDBCMD will generate a deployment script and deploy the database.</span></span>
- <span data-ttu-id="33411-136">Si vous spécifiez **/DD-** ou omettez le commutateur, VSDBCMD ne génère qu’un script de déploiement.</span><span class="sxs-lookup"><span data-stu-id="33411-136">If you specify **/dd-** or omit the switch, VSDBCMD will generate a deployment script only.</span></span>

> [!NOTE]
> <span data-ttu-id="33411-137">Si vous déployez un fichier. DeployManifest plutôt qu’un fichier. dbschema, le comportement du commutateur **/DD** est beaucoup plus compliqué.</span><span class="sxs-lookup"><span data-stu-id="33411-137">If you're deploying a .deploymanifest file rather than a .dbschema file, the behavior of the **/dd** switch is a lot more complicated.</span></span> <span data-ttu-id="33411-138">En fait, VSDBCMD ignore la valeur du commutateur **/DD** si le fichier. DeployManifest contient un élément **DeployToDatabase** avec la valeur **true**.</span><span class="sxs-lookup"><span data-stu-id="33411-138">Essentially, VSDBCMD will ignore the value of the **/dd** switch if the .deploymanifest file includes a **DeployToDatabase** element with a value of **True**.</span></span> <span data-ttu-id="33411-139">Le [déploiement de projets de base de données](../web-deployment-in-the-enterprise/deploying-database-projects.md) décrit ce comportement dans son intégralité.</span><span class="sxs-lookup"><span data-stu-id="33411-139">[Deploying Database Projects](../web-deployment-in-the-enterprise/deploying-database-projects.md) describes this behavior in full.</span></span>

<span data-ttu-id="33411-140">Par exemple, pour générer un script de déploiement pour la base de données **ContactManager** sans déployer réellement la base de données, votre commande VSDBCMD doit ressembler à ceci :</span><span class="sxs-lookup"><span data-stu-id="33411-140">For example, to generate a deployment script for the **ContactManager** database without actually deploying the database, your VSDBCMD command should resemble this:</span></span>

[!code-console[Main](performing-a-what-if-deployment/samples/sample4.cmd)]

<span data-ttu-id="33411-141">VSDBCMD est un outil de déploiement de base de données différentiel et, en tant que tel, le script de déploiement est généré dynamiquement pour contenir toutes les commandes SQL nécessaires à la mise à jour de la base de données actuelle, le cas échéant, vers le schéma spécifié.</span><span class="sxs-lookup"><span data-stu-id="33411-141">VSDBCMD is a differential database deployment tool, and as such the deployment script is dynamically generated to contain all the SQL commands necessary to update the current database, if one exists, to the specified schema.</span></span> <span data-ttu-id="33411-142">L’examen du script de déploiement est un moyen utile pour déterminer l’impact que votre déploiement aura sur la base de données actuelle et les données qu’elle contient.</span><span class="sxs-lookup"><span data-stu-id="33411-142">Reviewing the deployment script is a useful way to determine what impact your deployment will have on the current database and the data it contains.</span></span> <span data-ttu-id="33411-143">Par exemple, vous souhaiterez peut-être déterminer les éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="33411-143">For example, you might want to determine:</span></span>

- <span data-ttu-id="33411-144">Si des tables existantes seront supprimées, et si cela entraînera une perte de données.</span><span class="sxs-lookup"><span data-stu-id="33411-144">Whether any existing tables will be removed, and whether that will result in data loss.</span></span>
- <span data-ttu-id="33411-145">Si l’ordre des opérations présente un risque de perte de données, par exemple si vous fractionnez ou fusionnez des tables.</span><span class="sxs-lookup"><span data-stu-id="33411-145">Whether the order of operations carries a risk of data loss, for example, if you're splitting or merging tables.</span></span>

<span data-ttu-id="33411-146">Si vous êtes satisfait du script de déploiement, vous pouvez répéter l’VSDBCMD avec un indicateur **/DD +** pour effectuer les modifications.</span><span class="sxs-lookup"><span data-stu-id="33411-146">If you're happy with the deployment script, you can repeat the VSDBCMD with a **/dd+** flag to make the changes.</span></span> <span data-ttu-id="33411-147">Vous pouvez également modifier le script de déploiement pour répondre à vos besoins, puis l’exécuter manuellement sur le serveur de base de données.</span><span class="sxs-lookup"><span data-stu-id="33411-147">Alternatively, you can edit the deployment script to meet your requirements and then execute it manually on the database server.</span></span>

## <a name="integrating-what-if-functionality-into-custom-project-files"></a><span data-ttu-id="33411-148">Intégration de la fonctionnalité « What If » dans les fichiers projet personnalisés</span><span class="sxs-lookup"><span data-stu-id="33411-148">Integrating "What If" Functionality into Custom Project Files</span></span>

<span data-ttu-id="33411-149">Dans les scénarios de déploiement plus complexes, vous pouvez utiliser un fichier projet Microsoft Build Engine (MSBuild) personnalisé pour encapsuler votre logique de génération et de déploiement, comme décrit dans [fonctionnement du fichier projet](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span><span class="sxs-lookup"><span data-stu-id="33411-149">In more complex deployment scenarios, you'll want to use a custom Microsoft Build Engine (MSBuild) project file to encapsulate your build and deployment logic, as described in [Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span></span> <span data-ttu-id="33411-150">Par exemple, dans l’exemple de solution du [Gestionnaire de contacts](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) , le fichier *Publish. proj* :</span><span class="sxs-lookup"><span data-stu-id="33411-150">For example, in the [Contact Manager](../web-deployment-in-the-enterprise/the-contact-manager-solution.md) sample solution, the *Publish.proj* file:</span></span>

- <span data-ttu-id="33411-151">Génère la solution.</span><span class="sxs-lookup"><span data-stu-id="33411-151">Builds the solution.</span></span>
- <span data-ttu-id="33411-152">Utilise Web Deploy pour empaqueter et déployer l’application ContactManager. Mvc.</span><span class="sxs-lookup"><span data-stu-id="33411-152">Uses Web Deploy to package and deploy the ContactManager.Mvc application.</span></span>
- <span data-ttu-id="33411-153">Utilise Web Deploy pour empaqueter et déployer l’application ContactManager. service.</span><span class="sxs-lookup"><span data-stu-id="33411-153">Uses Web Deploy to package and deploy the ContactManager.Service application.</span></span>
- <span data-ttu-id="33411-154">Déploie la base de données **ContactManager** .</span><span class="sxs-lookup"><span data-stu-id="33411-154">Deploys the **ContactManager** database.</span></span>

<span data-ttu-id="33411-155">Lorsque vous intégrez le déploiement de plusieurs packages Web et/ou bases de données dans un processus en une seule étape, vous pouvez également choisir d’effectuer le déploiement dans son intégralité en mode « quoi si ».</span><span class="sxs-lookup"><span data-stu-id="33411-155">When you integrate the deployment of multiple web packages and/or databases into a single-step process in this way, you may also want the option of performing the entire deployment in a "what if" mode.</span></span>

<span data-ttu-id="33411-156">Le fichier *Publish. proj* montre comment procéder.</span><span class="sxs-lookup"><span data-stu-id="33411-156">The *Publish.proj* file demonstrates how you can do this.</span></span> <span data-ttu-id="33411-157">Tout d’abord, vous devez créer une propriété pour stocker la valeur « quoi si » :</span><span class="sxs-lookup"><span data-stu-id="33411-157">First, you need to create a property to store the "what if" value:</span></span>

[!code-xml[Main](performing-a-what-if-deployment/samples/sample5.xml)]

<span data-ttu-id="33411-158">Dans ce cas, vous avez créé une propriété nommée **WhatIf** avec la valeur par défaut **false**.</span><span class="sxs-lookup"><span data-stu-id="33411-158">In this case, you've created a property named **WhatIf** with a default value of **false**.</span></span> <span data-ttu-id="33411-159">Les utilisateurs peuvent remplacer cette valeur en affectant à la propriété la valeur **true** dans un paramètre de ligne de commande, comme vous le verrez bientôt.</span><span class="sxs-lookup"><span data-stu-id="33411-159">Users can override this value by setting the property to **true** in a command-line parameter, as you'll see shortly.</span></span>

<span data-ttu-id="33411-160">L’étape suivante consiste à paramétrer les commandes Web Deploy et VSDBCMD afin que les indicateurs reflètent la valeur de la propriété **WhatIf** .</span><span class="sxs-lookup"><span data-stu-id="33411-160">The next stage is to parameterize any Web Deploy and VSDBCMD commands so that the flags reflect the **WhatIf** property value.</span></span> <span data-ttu-id="33411-161">Par exemple, la cible suivante (extraite du fichier *Publish. proj* et simplifiée) exécute le fichier *. deploy. cmd* pour déployer un package Web.</span><span class="sxs-lookup"><span data-stu-id="33411-161">For example, the next target (taken from the *Publish.proj* file and simplified) runs the *.deploy.cmd* file to deploy a web package.</span></span> <span data-ttu-id="33411-162">Par défaut, la commande comprend un commutateur **/y** (« oui » ou « mode de mise à jour »).</span><span class="sxs-lookup"><span data-stu-id="33411-162">By default, the command includes a **/Y** switch ("yes," or update mode).</span></span> <span data-ttu-id="33411-163">Si **WhatIf** a la valeur **true**, il est remplacé par un commutateur **/t** (version d’évaluation ou mode « What If »).</span><span class="sxs-lookup"><span data-stu-id="33411-163">If **WhatIf** is set to **true**, this is replaced by a **/T** switch (trial, or "what if" mode).</span></span>

[!code-xml[Main](performing-a-what-if-deployment/samples/sample6.xml)]

<span data-ttu-id="33411-164">De même, la cible suivante utilise l’utilitaire VSDBCMD pour déployer une base de données.</span><span class="sxs-lookup"><span data-stu-id="33411-164">Similarly, the next target uses the VSDBCMD utility to deploy a database.</span></span> <span data-ttu-id="33411-165">Par défaut, un commutateur **/DD** n’est pas inclus.</span><span class="sxs-lookup"><span data-stu-id="33411-165">By default, a **/dd** switch is not included.</span></span> <span data-ttu-id="33411-166">Cela signifie que VSDBCMD génère un script de déploiement, mais ne déploie pas&#x2014;la base de données en d’autres termes, un scénario de simulation.</span><span class="sxs-lookup"><span data-stu-id="33411-166">This means that VSDBCMD will generate a deployment script but will not deploy the database&#x2014;in other words, a "what if" scenario.</span></span> <span data-ttu-id="33411-167">Si la propriété **WhatIf** n’a pas la valeur **true**, un commutateur **/DD** est ajouté et VSDBCMD déploie la base de données.</span><span class="sxs-lookup"><span data-stu-id="33411-167">If the **WhatIf** property is not set to **true**, a **/dd** switch is added and VSDBCMD will deploy the database.</span></span>

[!code-xml[Main](performing-a-what-if-deployment/samples/sample7.xml)]

<span data-ttu-id="33411-168">Vous pouvez utiliser la même approche pour paramétrer toutes les commandes appropriées dans votre fichier projet.</span><span class="sxs-lookup"><span data-stu-id="33411-168">You can use the same approach to parameterize all the relevant commands in your project file.</span></span> <span data-ttu-id="33411-169">Lorsque vous souhaitez exécuter un déploiement « What If », vous pouvez simplement fournir une valeur de propriété **WhatIf** à partir de la ligne de commande :</span><span class="sxs-lookup"><span data-stu-id="33411-169">When you want to run a "what if" deployment, you can then simply provide a **WhatIf** property value from the command line:</span></span>

[!code-console[Main](performing-a-what-if-deployment/samples/sample8.cmd)]

<span data-ttu-id="33411-170">De cette façon, vous pouvez exécuter un déploiement « What If » pour tous vos composants de projet en une seule étape.</span><span class="sxs-lookup"><span data-stu-id="33411-170">In this way, you can run a "what if" deployment for all your project components in a single step.</span></span>

## <a name="conclusion"></a><span data-ttu-id="33411-171">Conclusion</span><span class="sxs-lookup"><span data-stu-id="33411-171">Conclusion</span></span>

<span data-ttu-id="33411-172">Cette rubrique explique comment exécuter des déploiements « What If » à l’aide de Web Deploy, VSDBCMD et MSBuild.</span><span class="sxs-lookup"><span data-stu-id="33411-172">This topic described how to run "what if" deployments using Web Deploy, VSDBCMD, and MSBuild.</span></span> <span data-ttu-id="33411-173">Un déploiement « What If » vous permet d’évaluer l’impact d’un déploiement proposé avant d’apporter des modifications à l’environnement de destination.</span><span class="sxs-lookup"><span data-stu-id="33411-173">A "what if" deployment lets you evaluate the impact of a proposed deployment before you actually make any changes to the destination environment.</span></span>

## <a name="further-reading"></a><span data-ttu-id="33411-174">informations supplémentaires</span><span class="sxs-lookup"><span data-stu-id="33411-174">Further Reading</span></span>

<span data-ttu-id="33411-175">Pour plus d’informations sur Web Deploy syntaxe de ligne de commande, consultez Paramètres de l' [opération Web Deploy](https://technet.microsoft.com/library/dd569089(WS.10).aspx).</span><span class="sxs-lookup"><span data-stu-id="33411-175">For more information on Web Deploy command-line syntax, see [Web Deploy Operation Settings](https://technet.microsoft.com/library/dd569089(WS.10).aspx).</span></span> <span data-ttu-id="33411-176">Pour obtenir de l’aide sur les options de ligne de commande lorsque vous utilisez le fichier *. deploy. cmd* , consultez [procédure : installer un package de déploiement à l’aide du fichier Deploy. cmd](https://msdn.microsoft.com/library/ff356104.aspx).</span><span class="sxs-lookup"><span data-stu-id="33411-176">For guidance on command-line options when you use the *.deploy.cmd* file, see [How to: Install a Deployment Package Using the deploy.cmd File](https://msdn.microsoft.com/library/ff356104.aspx).</span></span> <span data-ttu-id="33411-177">Pour obtenir des conseils sur la syntaxe de la ligne de commande VSDBCMD, consultez [référence de la ligne de commande pour VSDBCMD. EXE (déploiement et importation de schéma)](https://msdn.microsoft.com/library/dd193283.aspx).</span><span class="sxs-lookup"><span data-stu-id="33411-177">For guidance on VSDBCMD command-line syntax, see [Command-Line Reference for VSDBCMD.EXE (Deployment and Schema Import)](https://msdn.microsoft.com/library/dd193283.aspx).</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="33411-178">[Précédent](advanced-enterprise-web-deployment.md)
> [Suivant](customizing-database-deployments-for-multiple-environments.md)</span><span class="sxs-lookup"><span data-stu-id="33411-178">[Previous](advanced-enterprise-web-deployment.md)
[Next](customizing-database-deployments-for-multiple-environments.md)</span></span>

---
uid: web-forms/overview/deployment/visual-studio-web-deployment/deploying-extra-files
title: 'Déploiement de Web ASP.NET à l’aide de Visual Studio : Déploiement de fichiers supplémentaires | Microsoft Docs'
author: tdykstra
description: Cette série de didacticiels vous montre comment déployer (publier) un ASP.NET web application dans Azure App Service Web Apps ou à un fournisseur d’hébergement tiers, en utilisant des éléments...
ms.author: riande
ms.date: 03/23/2015
ms.assetid: 1cd91055-84bc-42c6-9d80-646f41429d4d
msc.legacyurl: /web-forms/overview/deployment/visual-studio-web-deployment/deploying-extra-files
msc.type: authoredcontent
ms.openlocfilehash: 03afcf91b79bc7d7d294eae3dc43a8f780d94e20
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/06/2019
ms.locfileid: "65131916"
---
# <a name="aspnet-web-deployment-using-visual-studio-deploying-extra-files"></a><span data-ttu-id="ed2ab-103">Déploiement de Web ASP.NET à l’aide de Visual Studio : Déploiement de fichiers supplémentaires</span><span class="sxs-lookup"><span data-stu-id="ed2ab-103">ASP.NET Web Deployment using Visual Studio: Deploying Extra Files</span></span>

<span data-ttu-id="ed2ab-104">par [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="ed2ab-104">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

[<span data-ttu-id="ed2ab-105">Télécharger le projet de démarrage</span><span class="sxs-lookup"><span data-stu-id="ed2ab-105">Download Starter Project</span></span>](http://go.microsoft.com/fwlink/p/?LinkId=282627)

> <span data-ttu-id="ed2ab-106">Cette série de didacticiels vous montre comment déployer (publier) un ASP.NET web application dans Azure App Service Web Apps ou à un fournisseur d’hébergement tiers, à l’aide de Visual Studio 2012 ou Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="ed2ab-106">This tutorial series shows you how to deploy (publish) an ASP.NET web application to Azure App Service Web Apps or to a third-party hosting provider, by using Visual Studio 2012 or Visual Studio 2010.</span></span> <span data-ttu-id="ed2ab-107">Pour plus d’informations sur la série, consultez [le premier didacticiel de la série](introduction.md).</span><span class="sxs-lookup"><span data-stu-id="ed2ab-107">For information about the series, see [the first tutorial in the series](introduction.md).</span></span>

## <a name="overview"></a><span data-ttu-id="ed2ab-108">Vue d'ensemble</span><span class="sxs-lookup"><span data-stu-id="ed2ab-108">Overview</span></span>

<span data-ttu-id="ed2ab-109">Ce didacticiel montre comment étendre Visual Studio web publier pipeline pour effectuer une tâche supplémentaire pendant le déploiement.</span><span class="sxs-lookup"><span data-stu-id="ed2ab-109">This tutorial shows how to extend the Visual Studio web publish pipeline to do an additional task during deployment.</span></span> <span data-ttu-id="ed2ab-110">La tâche consiste à copier des fichiers supplémentaires qui ne sont pas dans le dossier de projet pour le site de destination.</span><span class="sxs-lookup"><span data-stu-id="ed2ab-110">The task is to copy extra files that are not in the project folder to the destination web site.</span></span>

<span data-ttu-id="ed2ab-111">Pour ce didacticiel, vous allez copier un fichier supplémentaire : *robots.txt*.</span><span class="sxs-lookup"><span data-stu-id="ed2ab-111">For this tutorial you'll copy one extra file: *robots.txt*.</span></span> <span data-ttu-id="ed2ab-112">Voulez-vous déployer ce fichier dans l’environnement intermédiaire, mais pas en production.</span><span class="sxs-lookup"><span data-stu-id="ed2ab-112">You want to deploy this file to staging but not to production.</span></span> <span data-ttu-id="ed2ab-113">Dans [le déploiement en Production](deploying-to-production.md) (didacticiel), vous ajouté ce fichier au projet et configuré la Production profil pour l’exclure de la publication.</span><span class="sxs-lookup"><span data-stu-id="ed2ab-113">In [the Deploying to Production](deploying-to-production.md) tutorial, you added this file to the project and configured the Production publish profile to exclude it.</span></span> <span data-ttu-id="ed2ab-114">Dans ce didacticiel, vous verrez une autre méthode pour gérer cette situation, qui peuvent être utiles pour tous les fichiers que vous souhaitez déployer, mais ne souhaitez pas inclure dans le projet.</span><span class="sxs-lookup"><span data-stu-id="ed2ab-114">In this tutorial you'll see an alternative method to handle this situation, one that will be useful for any files that you want to deploy but don't want to include in the project.</span></span>

## <a name="move-the-robotstxt-file"></a><span data-ttu-id="ed2ab-115">Déplacez le fichier robots.txt</span><span class="sxs-lookup"><span data-stu-id="ed2ab-115">Move the robots.txt file</span></span>

<span data-ttu-id="ed2ab-116">Pour vous préparer à une autre méthode de gestion des *robots.txt*, dans cette section du didacticiel, vous déplacez le fichier vers un dossier qui n’est pas inclus dans le projet, et vous supprimez *robots.txt* à partir de la mise en lots environnement.</span><span class="sxs-lookup"><span data-stu-id="ed2ab-116">To prepare for a different method of handling *robots.txt*, in this section of the tutorial you move the file to a folder that is not included in the project, and you delete *robots.txt* from the staging environment.</span></span> <span data-ttu-id="ed2ab-117">Il est nécessaire de supprimer le fichier de mise en lots afin que vous puissiez vérifier que votre nouvelle méthode de déploiement du fichier dans cet environnement fonctionne correctement.</span><span class="sxs-lookup"><span data-stu-id="ed2ab-117">It is necessary to delete the file from staging so that you can verify that your new method of deploying the file to that environment is working correctly.</span></span>

1. <span data-ttu-id="ed2ab-118">Dans **l’Explorateur de solutions**, avec le bouton droit le *robots.txt* de fichier et cliquez sur **exclure du projet**.</span><span class="sxs-lookup"><span data-stu-id="ed2ab-118">In **Solution Explorer**, right-click the *robots.txt* file and click **Exclude From Project**.</span></span>
2. <span data-ttu-id="ed2ab-119">À l’aide de l’Explorateur de fichiers Windows, créez un dossier dans le dossier de solution et nommez-le *ExtraFiles*.</span><span class="sxs-lookup"><span data-stu-id="ed2ab-119">Using Windows File Explorer, create a new folder in the solution folder and name it *ExtraFiles*.</span></span>
3. <span data-ttu-id="ed2ab-120">Déplacer le *robots.txt* de fichiers à partir de la *ContosoUniversity* dossier de projet pour le *ExtraFiles* dossier.</span><span class="sxs-lookup"><span data-stu-id="ed2ab-120">Move the *robots.txt* file from the *ContosoUniversity* project folder to the *ExtraFiles* folder.</span></span>

    ![Dossier de ExtraFiles](deploying-extra-files/_static/image1.png)
4. <span data-ttu-id="ed2ab-122">À l’aide de votre outil FTP, de supprimer le *robots.txt* fichier à partir du site web intermédiaire.</span><span class="sxs-lookup"><span data-stu-id="ed2ab-122">Using your FTP tool, delete the *robots.txt* file from the staging web site.</span></span>

    <span data-ttu-id="ed2ab-123">Comme alternative, vous pouvez sélectionner **supprimer les fichiers supplémentaires à la destination** sous **Options de publication du fichier** sur le **paramètres** onglet du profil de publication mise en lots, et publiez à nouveau dans l’environnement intermédiaire.</span><span class="sxs-lookup"><span data-stu-id="ed2ab-123">As an alternative, you can select **Remove additional files at destination** under **File Publish Options** on the **Settings** tab of the Staging publish profile, and republish to staging.</span></span>

## <a name="update-the-publish-profile-file"></a><span data-ttu-id="ed2ab-124">Mettre à jour le fichier de profil de publication</span><span class="sxs-lookup"><span data-stu-id="ed2ab-124">Update the publish profile file</span></span>

<span data-ttu-id="ed2ab-125">Vous devez uniquement *robots.txt* dans l’environnement intermédiaire, donc le seul profil de publication vous devez mettre à jour afin de déployer est mise en lots.</span><span class="sxs-lookup"><span data-stu-id="ed2ab-125">You only need *robots.txt* in staging, so the only publish profile you need to update in order to deploy it is Staging.</span></span>

1. <span data-ttu-id="ed2ab-126">Dans Visual Studio, ouvrez *Staging.pubxml*.</span><span class="sxs-lookup"><span data-stu-id="ed2ab-126">In Visual Studio, open *Staging.pubxml*.</span></span>
2. <span data-ttu-id="ed2ab-127">À la fin du fichier, avant de fermer le `</Project>` , ajoutez le balisage suivant :</span><span class="sxs-lookup"><span data-stu-id="ed2ab-127">At the end of the file, before the closing `</Project>` tag, add the following markup:</span></span>

    [!code-xml[Main](deploying-extra-files/samples/sample1.xml)]

    <span data-ttu-id="ed2ab-128">Ce code crée un nouveau *cible* qui collectera les fichiers supplémentaires à déployer.</span><span class="sxs-lookup"><span data-stu-id="ed2ab-128">This code creates a new *target* that will collect additional files to be deployed.</span></span> <span data-ttu-id="ed2ab-129">Une cible est composée d’un ou plus de tâches MSBuild s’exécute selon des conditions que vous spécifiez.</span><span class="sxs-lookup"><span data-stu-id="ed2ab-129">A target is composed of one or more tasks that MSBuild will execute based on conditions you specify.</span></span>

    <span data-ttu-id="ed2ab-130">Le `Include` attribut spécifie que le dossier dans lequel rechercher les fichiers *ExtraFiles*, situé dans le même niveau que le dossier du projet.</span><span class="sxs-lookup"><span data-stu-id="ed2ab-130">The `Include` attribute specifies that the folder in which to find the files is *ExtraFiles*, located at the same level as the project folder.</span></span> <span data-ttu-id="ed2ab-131">MSBuild collecte tous les fichiers dans ce dossier à partir de tous les sous-dossiers (l’astérisque double Spécifie sous-dossiers récursifs) de manière récursive.</span><span class="sxs-lookup"><span data-stu-id="ed2ab-131">MSBuild will collect all files from that folder and recursively from any subfolders (the double asterisk specifies recursive subfolders).</span></span> <span data-ttu-id="ed2ab-132">Avec ce code, vous pouvez placer plusieurs fichiers et les fichiers dans les sous-dossiers contenus dans le *ExtraFiles* dossier et tout sera déployé.</span><span class="sxs-lookup"><span data-stu-id="ed2ab-132">With this code you could put multiple files, and files in subfolders inside the *ExtraFiles* folder, and all will be deployed.</span></span>

    <span data-ttu-id="ed2ab-133">Le `DestinationRelativePath` élément spécifie que les dossiers et fichiers doivent être copiées dans le dossier racine du site web de destination, dans la même structure de fichiers et dossiers comme ils sont trouvent dans le *ExtraFiles* dossier.</span><span class="sxs-lookup"><span data-stu-id="ed2ab-133">The `DestinationRelativePath` element specifies that the folders and files should be copied to the root folder of the destination web site, in the same file and folder structure as they are found in the *ExtraFiles* folder.</span></span> <span data-ttu-id="ed2ab-134">Si vous souhaitez copier le *ExtraFiles* dossier lui-même, le `DestinationRelativePath` valeur serait *ExtraFiles\%(RecursiveDir)%(Filename)%(Extension)*.</span><span class="sxs-lookup"><span data-stu-id="ed2ab-134">If you wanted to copy the *ExtraFiles* folder itself, the `DestinationRelativePath` value would be *ExtraFiles\%(RecursiveDir)%(Filename)%(Extension)*.</span></span>
3. <span data-ttu-id="ed2ab-135">À la fin du fichier, avant de fermer le `</Project>` , ajoutez le balisage suivant qui spécifie quand exécuter la nouvelle cible.</span><span class="sxs-lookup"><span data-stu-id="ed2ab-135">At the end of the file, before the closing `</Project>` tag, add the following markup that specifies when to execute the new target.</span></span>

    [!code-xml[Main](deploying-extra-files/samples/sample2.xml)]

    <span data-ttu-id="ed2ab-136">Ce code provoque la nouvelle `CustomCollectFiles` cible doit être exécutée chaque fois que la cible qui copie les fichiers vers le dossier de destination est exécutée.</span><span class="sxs-lookup"><span data-stu-id="ed2ab-136">This code causes the new `CustomCollectFiles` target to be executed whenever the target that copies files to the destination folder is executed.</span></span> <span data-ttu-id="ed2ab-137">Il existe une cible distincte pour la publication et création de package de déploiement et la nouvelle cible est injectée dans les deux cibles dans le cas où vous décidez de déployer à l’aide d’un package de déploiement au lieu de la publication.</span><span class="sxs-lookup"><span data-stu-id="ed2ab-137">There is a separate target for publish versus deployment package creation, and the new target is injected in both targets in case you decide to deploy by using a deployment package instead of publishing.</span></span>

    <span data-ttu-id="ed2ab-138">Le *.pubxml* fichier ressemble maintenant à l’exemple suivant :</span><span class="sxs-lookup"><span data-stu-id="ed2ab-138">The *.pubxml* file now looks like the following example:</span></span>

    [!code-xml[Main](deploying-extra-files/samples/sample3.xml?highlight=53-71)]
4. <span data-ttu-id="ed2ab-139">Enregistrez et fermez le *Staging.pubxml* fichier.</span><span class="sxs-lookup"><span data-stu-id="ed2ab-139">Save and close the *Staging.pubxml* file.</span></span>

## <a name="publish-to-staging"></a><span data-ttu-id="ed2ab-140">Publier dans l’environnement intermédiaire</span><span class="sxs-lookup"><span data-stu-id="ed2ab-140">Publish to staging</span></span>

<span data-ttu-id="ed2ab-141">Grâce à un clic de publication ou la ligne de commande, publier l’application à l’aide du profil de mise en lots.</span><span class="sxs-lookup"><span data-stu-id="ed2ab-141">Using one-click publish or the command line, publish the application by using the Staging profile.</span></span>

<span data-ttu-id="ed2ab-142">Si vous utilisez un seul clic publier, vous pouvez vérifier dans le **aperçu** fenêtre qui *robots.txt* sera copié.</span><span class="sxs-lookup"><span data-stu-id="ed2ab-142">If you use one-click publish, you can verify in the **Preview** window that *robots.txt* will be copied.</span></span> <span data-ttu-id="ed2ab-143">Sinon, utilisez votre outil FTP pour vérifier que le *robots.txt* fichier se trouve dans le dossier racine du site web après le déploiement.</span><span class="sxs-lookup"><span data-stu-id="ed2ab-143">Otherwise, use your FTP tool to verify that the *robots.txt* file is in the root folder of the web site after deployment.</span></span>

## <a name="summary"></a><span data-ttu-id="ed2ab-144">Récapitulatif</span><span class="sxs-lookup"><span data-stu-id="ed2ab-144">Summary</span></span>

<span data-ttu-id="ed2ab-145">Cette étape termine cette série de didacticiels sur le déploiement d’une application web ASP.NET sur un fournisseur d’hébergement tiers.</span><span class="sxs-lookup"><span data-stu-id="ed2ab-145">This completes this series of tutorials on deploying an ASP.NET web application to a third-party hosting provider.</span></span> <span data-ttu-id="ed2ab-146">Pour plus d’informations sur les sujets couverts dans ces didacticiels, consultez le [ASP.NET Deployment Content Map](https://go.microsoft.com/fwlink/p/?LinkId=282413).</span><span class="sxs-lookup"><span data-stu-id="ed2ab-146">For more information about any of the topics covered in these tutorials, see the [ASP.NET Deployment Content Map](https://go.microsoft.com/fwlink/p/?LinkId=282413).</span></span>

## <a name="more-information"></a><span data-ttu-id="ed2ab-147">Complément d'information</span><span class="sxs-lookup"><span data-stu-id="ed2ab-147">More information</span></span>

<span data-ttu-id="ed2ab-148">Si vous savez comment travailler avec des fichiers de MSBuild, vous pouvez automatiser de nombreuses autres tâches de déploiement en écrivant du code *.pubxml* fichiers (pour les tâches de profil spécifiques) ou le projet *..WPP cible* fichier (pour les tâches qui s’applique à tous les profils).</span><span class="sxs-lookup"><span data-stu-id="ed2ab-148">If you know how to work with MSBuild files, you can automate many other deployment tasks by writing code in *.pubxml* files (for profile-specific tasks) or the project *.wpp.targets* file (for tasks that apply to all profiles).</span></span> <span data-ttu-id="ed2ab-149">Pour plus d’informations sur *.pubxml* et *..WPP cible* de fichiers, consultez [Comment : Modifier les paramètres de déploiement de publier des fichiers de profil (.pubxml) et le. fichier.WPP cible dans les projets Web Visual Studio](https://msdn.microsoft.com/library/ff398069).</span><span class="sxs-lookup"><span data-stu-id="ed2ab-149">For more information about *.pubxml* and *.wpp.targets* files, see [How to: Edit Deployment Settings in Publish Profile (.pubxml) Files and the .wpp.targets File in Visual Studio Web Projects](https://msdn.microsoft.com/library/ff398069).</span></span> <span data-ttu-id="ed2ab-150">Pour obtenir une présentation générale code MSBuild, consultez **Anatomie d’un fichier de projet** dans [série de déploiement d’entreprise : Présentation du fichier projet](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span><span class="sxs-lookup"><span data-stu-id="ed2ab-150">For a basic introduction to MSBuild code, see **The Anatomy of a Project File** in [Enterprise Deployment Series: Understanding the Project File](../web-deployment-in-the-enterprise/understanding-the-project-file.md).</span></span> <span data-ttu-id="ed2ab-151">Pour savoir comment travailler avec des fichiers de MSBuild pour effectuer des tâches pour vos propres scénarios, consultez ce livre : [À l’intérieur de Microsoft Build Engine : À l’aide de MSBuild et Team Foundation Build](http://msbuildbook.com) par Sayed Ibraham Hashimi et Bartholomew de William.</span><span class="sxs-lookup"><span data-stu-id="ed2ab-151">To learn how to work with MSBuild files to perform tasks for your own scenarios, see this book: [Inside the Microsoft Build Engine: Using MSBuild and Team Foundation Build](http://msbuildbook.com) by Sayed Ibraham Hashimi and William Bartholomew.</span></span>

## <a name="acknowledgements"></a><span data-ttu-id="ed2ab-152">Remerciements</span><span class="sxs-lookup"><span data-stu-id="ed2ab-152">Acknowledgements</span></span>

<span data-ttu-id="ed2ab-153">J’aimerais remercier les personnes suivantes qui a apporté d’importantes contributions au contenu de cette série de didacticiels :</span><span class="sxs-lookup"><span data-stu-id="ed2ab-153">I would like to thank the following people who made significant contributions to the content of this tutorial series:</span></span>

- [<span data-ttu-id="ed2ab-154">Alberto Poblacion, MVP &amp; MCT, Espagne</span><span class="sxs-lookup"><span data-stu-id="ed2ab-154">Alberto Poblacion, MVP &amp; MCT, Spain</span></span>](https://mvp.microsoft.com/mvp/Alberto%20Poblacion%20Bolano-36772)
- <span data-ttu-id="ed2ab-155">Jarod Ferguson, MVP de développement de plate-forme de données, États-Unis</span><span class="sxs-lookup"><span data-stu-id="ed2ab-155">Jarod Ferguson, Data Platform Development MVP, United States</span></span>
- <span data-ttu-id="ed2ab-156">Harsh Mittal, Microsoft</span><span class="sxs-lookup"><span data-stu-id="ed2ab-156">Harsh Mittal, Microsoft</span></span>
- <span data-ttu-id="ed2ab-157">[Jon Galloway](https://weblogs.asp.net/jgalloway) (twitter : [ @jongalloway ](http://twitter.com/jongalloway))</span><span class="sxs-lookup"><span data-stu-id="ed2ab-157">[Jon Galloway](https://weblogs.asp.net/jgalloway) (twitter: [@jongalloway](http://twitter.com/jongalloway))</span></span>
- [<span data-ttu-id="ed2ab-158">Kristina Olson, Microsoft</span><span class="sxs-lookup"><span data-stu-id="ed2ab-158">Kristina Olson, Microsoft</span></span>](https://blogs.iis.net/krolson/default.aspx)
- [<span data-ttu-id="ed2ab-159">Mike Pope, Microsoft</span><span class="sxs-lookup"><span data-stu-id="ed2ab-159">Mike Pope, Microsoft</span></span>](http://www.mikepope.com/blog/DisplayBlog.aspx)
- <span data-ttu-id="ed2ab-160">Mohit Srivastava, Microsoft</span><span class="sxs-lookup"><span data-stu-id="ed2ab-160">Mohit Srivastava, Microsoft</span></span>
- [<span data-ttu-id="ed2ab-161">Raffaele Rialdi, Italie</span><span class="sxs-lookup"><span data-stu-id="ed2ab-161">Raffaele Rialdi, Italy</span></span>](http://www.iamraf.net/)
- [<span data-ttu-id="ed2ab-162">Rick Anderson, Microsoft</span><span class="sxs-lookup"><span data-stu-id="ed2ab-162">Rick Anderson, Microsoft</span></span>](https://blogs.msdn.com/b/rickandy/)
- <span data-ttu-id="ed2ab-163">[Sayed Hashimi, Microsoft](http://sedodream.com/default.aspx)(twitter : [ @sayedihashimi ](http://twitter.com/sayedihashimi))</span><span class="sxs-lookup"><span data-stu-id="ed2ab-163">[Sayed Hashimi, Microsoft](http://sedodream.com/default.aspx)(twitter: [@sayedihashimi](http://twitter.com/sayedihashimi))</span></span>
- <span data-ttu-id="ed2ab-164">[Scott Hanselman](http://www.hanselman.com/blog/) (twitter : [ @shanselman ](http://twitter.com/shanselman))</span><span class="sxs-lookup"><span data-stu-id="ed2ab-164">[Scott Hanselman](http://www.hanselman.com/blog/) (twitter: [@shanselman](http://twitter.com/shanselman))</span></span>
- <span data-ttu-id="ed2ab-165">[Scott Hunter, Microsoft](https://blogs.msdn.com/b/scothu/) (twitter : [ @coolcsh ](http://twitter.com/coolcsh))</span><span class="sxs-lookup"><span data-stu-id="ed2ab-165">[Scott Hunter, Microsoft](https://blogs.msdn.com/b/scothu/) (twitter: [@coolcsh](http://twitter.com/coolcsh))</span></span>
- [<span data-ttu-id="ed2ab-166">Srđan Božović, Serbie</span><span class="sxs-lookup"><span data-stu-id="ed2ab-166">Srđan Božović, Serbia</span></span>](http://msforge.net/blogs/zmajcek/)
- <span data-ttu-id="ed2ab-167">[Vishal Joshi, Microsoft](http://vishaljoshi.blogspot.com/) (twitter : [ @vishalrjoshi ](http://twitter.com/vishalrjoshi))</span><span class="sxs-lookup"><span data-stu-id="ed2ab-167">[Vishal Joshi, Microsoft](http://vishaljoshi.blogspot.com/) (twitter: [@vishalrjoshi](http://twitter.com/vishalrjoshi))</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="ed2ab-168">[Précédent](command-line-deployment.md)
> [Suivant](troubleshooting.md)</span><span class="sxs-lookup"><span data-stu-id="ed2ab-168">[Previous](command-line-deployment.md)
[Next](troubleshooting.md)</span></span>

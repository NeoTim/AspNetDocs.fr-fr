---
uid: web-forms/overview/deployment/visual-studio-web-deployment/deploying-a-code-update
title: 'Déploiement Web ASP.NET à l’aide de Visual Studio : déploiement d’une mise à jour du code | Microsoft Docs'
author: tdykstra
description: Cette série de didacticiels vous montre comment déployer (publier) une application Web ASP.NET sur Azure App Service Web Apps ou sur un fournisseur d’hébergement tiers, par utilisez...
ms.author: riande
ms.date: 02/15/2013
ms.assetid: c76dbc35-a914-4ee3-919c-4f4d1fa05104
msc.legacyurl: /web-forms/overview/deployment/visual-studio-web-deployment/deploying-a-code-update
msc.type: authoredcontent
ms.openlocfilehash: 3881833bfe2a50a38a357614f92f434a04a8ab08
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/28/2019
ms.locfileid: "74626778"
---
# <a name="aspnet-web-deployment-using-visual-studio-deploying-a-code-update"></a><span data-ttu-id="9042e-103">Déploiement Web ASP.NET à l’aide de Visual Studio : déploiement d’une mise à jour de code</span><span class="sxs-lookup"><span data-stu-id="9042e-103">ASP.NET Web Deployment using Visual Studio: Deploying a Code Update</span></span>

<span data-ttu-id="9042e-104">par [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="9042e-104">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

[<span data-ttu-id="9042e-105">Télécharger le projet de démarrage</span><span class="sxs-lookup"><span data-stu-id="9042e-105">Download Starter Project</span></span>](https://go.microsoft.com/fwlink/p/?LinkId=282627)

> <span data-ttu-id="9042e-106">Cette série de didacticiels vous montre comment déployer (publier) une application Web ASP.NET sur Azure App Service Web Apps ou sur un fournisseur d’hébergement tiers, à l’aide de Visual Studio 2012 ou de Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="9042e-106">This tutorial series shows you how to deploy (publish) an ASP.NET web application to Azure App Service Web Apps or to a third-party hosting provider, by using Visual Studio 2012 or Visual Studio 2010.</span></span> <span data-ttu-id="9042e-107">Pour plus d’informations sur la série, consultez [le premier didacticiel de la série](introduction.md).</span><span class="sxs-lookup"><span data-stu-id="9042e-107">For information about the series, see [the first tutorial in the series](introduction.md).</span></span>

## <a name="overview"></a><span data-ttu-id="9042e-108">Vue d'ensemble de</span><span class="sxs-lookup"><span data-stu-id="9042e-108">Overview</span></span>

<span data-ttu-id="9042e-109">Après le déploiement initial, votre travail de maintenance et de développement de votre site Web continue, et avant que vous ne souhaitiez déployer une mise à jour.</span><span class="sxs-lookup"><span data-stu-id="9042e-109">After the initial deployment, your work of maintaining and developing your web site continues, and before long you will want to deploy an update.</span></span> <span data-ttu-id="9042e-110">Ce didacticiel vous guide tout au long du processus de déploiement d’une mise à jour de votre code d’application.</span><span class="sxs-lookup"><span data-stu-id="9042e-110">This tutorial takes you through the process of deploying an update to your application code.</span></span> <span data-ttu-id="9042e-111">La mise à jour que vous implémentez et déployez dans ce didacticiel n’implique pas de modification de la base de données. Pour plus d’informations sur le déploiement d’une modification de base de données, consultez le didacticiel suivant.</span><span class="sxs-lookup"><span data-stu-id="9042e-111">The update that you implement and deploy in this tutorial does not involve a database change; you'll see what's different about deploying a database change in the next tutorial.</span></span>

<span data-ttu-id="9042e-112">Rappel : Si vous recevez un message d’erreur ou si une action ne fonctionne pas au fur et à mesure que vous parcourez le didacticiel, veillez à consulter la [page de résolution des problèmes](troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="9042e-112">Reminder: If you get an error message or something doesn't work as you go through the tutorial, be sure to check the [troubleshooting page](troubleshooting.md).</span></span>

## <a name="make-a-code-change"></a><span data-ttu-id="9042e-113">Apporter une modification au code</span><span class="sxs-lookup"><span data-stu-id="9042e-113">Make a code change</span></span>

<span data-ttu-id="9042e-114">En guise d’exemple simple de mise à jour de votre application, vous allez ajouter à la page des **enseignants** une liste de cours traités par l’instructeur sélectionné.</span><span class="sxs-lookup"><span data-stu-id="9042e-114">As a simple example of an update to your application, you'll add to the **Instructors** page a list of courses taught by the selected instructor.</span></span>

<span data-ttu-id="9042e-115">Si vous exécutez la **page des** formateurs, vous remarquerez qu’il y a des liens **sélectionnés** dans la grille, mais qu’ils ne font rien d’autre que de rendre l’arrière-plan de la ligne grisé.</span><span class="sxs-lookup"><span data-stu-id="9042e-115">If you run the **Instructors** page, you'll notice that there are **Select** links in the grid, but they don't do anything other than make the row background turn gray.</span></span>

![Page des enseignants avec sélection](deploying-a-code-update/_static/image1.png)

<span data-ttu-id="9042e-117">À présent, vous allez ajouter le code qui s’exécute lorsque vous cliquez sur le lien **Sélectionner** et afficher la liste des cours traités par l’instructeur sélectionné.</span><span class="sxs-lookup"><span data-stu-id="9042e-117">Now you'll add code that runs when the **Select** link is clicked and displays a list of courses taught by the selected instructor .</span></span>

1. <span data-ttu-id="9042e-118">Dans *Instructors. aspx*, ajoutez le balisage suivant juste après le contrôle **ErrorMessageLabel** `Label` :</span><span class="sxs-lookup"><span data-stu-id="9042e-118">In *Instructors.aspx*, add the following markup immediately after the **ErrorMessageLabel** `Label` control:</span></span>

    [!code-aspx[Main](deploying-a-code-update/samples/sample1.aspx)]
2. <span data-ttu-id="9042e-119">Exécutez la page et sélectionnez un formateur.</span><span class="sxs-lookup"><span data-stu-id="9042e-119">Run the page and select an instructor.</span></span> <span data-ttu-id="9042e-120">Vous voyez une liste des cours enseignés par cet instructeur.</span><span class="sxs-lookup"><span data-stu-id="9042e-120">You see a list of courses taught by that instructor.</span></span>

    ![Page des instructeurs avec des cours enseignés](deploying-a-code-update/_static/image2.png)
3. <span data-ttu-id="9042e-122">Fermez le navigateur.</span><span class="sxs-lookup"><span data-stu-id="9042e-122">Close the browser.</span></span>

## <a name="deploy-the-code-update-to-the-test-environment"></a><span data-ttu-id="9042e-123">Déployer la mise à jour du code dans l’environnement de test</span><span class="sxs-lookup"><span data-stu-id="9042e-123">Deploy the code update to the test environment</span></span>

<span data-ttu-id="9042e-124">Avant de pouvoir utiliser vos profils de publication pour déployer en test, intermédiaire et de production, vous devez modifier les options de publication de base de données.</span><span class="sxs-lookup"><span data-stu-id="9042e-124">Before you can use your publish profiles to deploy to test, staging, and production, you need to change database publishing options.</span></span> <span data-ttu-id="9042e-125">Vous n’avez plus besoin d’exécuter les scripts de déploiement d’octroi et de données pour la base de données d’appartenance.</span><span class="sxs-lookup"><span data-stu-id="9042e-125">You no longer need to run the grant and data deployment scripts for the membership database.</span></span>

1. <span data-ttu-id="9042e-126">Ouvrez l’Assistant **publier le site Web** en cliquant avec le bouton droit sur le projet ContosoUniversity, puis en cliquant sur **publier**.</span><span class="sxs-lookup"><span data-stu-id="9042e-126">Open the **Publish Web** wizard by right-clicking the ContosoUniversity project and clicking **Publish**.</span></span>
2. <span data-ttu-id="9042e-127">Cliquez sur le profil **test** dans la liste déroulante **Profil** .</span><span class="sxs-lookup"><span data-stu-id="9042e-127">Click the **Test** profile in the **Profile** drop-down list.</span></span>
3. <span data-ttu-id="9042e-128">Cliquez sur l’onglet **paramètres** .</span><span class="sxs-lookup"><span data-stu-id="9042e-128">Click the **Settings** tab.</span></span>
4. <span data-ttu-id="9042e-129">Sous **DefaultConnection** , dans la section **bases de données** , désactivez la case à cocher **mettre à jour la base de données** .</span><span class="sxs-lookup"><span data-stu-id="9042e-129">Under **DefaultConnection** in the **Databases** section, clear the **Update database** check box.</span></span>
5. <span data-ttu-id="9042e-130">Cliquez sur l’onglet **Profil** , puis cliquez sur le profil **intermédiaire** dans la liste déroulante **Profil** .</span><span class="sxs-lookup"><span data-stu-id="9042e-130">Click the **Profile** tab, and then click the **Staging** profile in the **Profile** drop-down list.</span></span>
6. <span data-ttu-id="9042e-131">Quand vous êtes invité à enregistrer les modifications apportées au profil de **test** , cliquez sur **Oui**.</span><span class="sxs-lookup"><span data-stu-id="9042e-131">When you are asked if you want to save the changes made to the **Test** profile, click **Yes**.</span></span>
7. <span data-ttu-id="9042e-132">Apportez la même modification dans le profil intermédiaire.</span><span class="sxs-lookup"><span data-stu-id="9042e-132">Make the same change in the Staging profile.</span></span>
8. <span data-ttu-id="9042e-133">Répétez le processus pour apporter la même modification dans le profil de production.</span><span class="sxs-lookup"><span data-stu-id="9042e-133">Repeat the process to make the same change in the Production profile.</span></span>
9. <span data-ttu-id="9042e-134">Fermez l’Assistant **publier le site Web** .</span><span class="sxs-lookup"><span data-stu-id="9042e-134">Close the **Publish Web** wizard.</span></span>

<span data-ttu-id="9042e-135">Le déploiement sur l’environnement de test est maintenant un simple problème d’exécution de la publication en un clic.</span><span class="sxs-lookup"><span data-stu-id="9042e-135">Deploying to the test environment is now a simple matter of running one-click publish again.</span></span> <span data-ttu-id="9042e-136">Pour accélérer ce processus, vous pouvez utiliser la barre d’outils de **publication Web en un clic** .</span><span class="sxs-lookup"><span data-stu-id="9042e-136">To make this process quicker, you can use the **Web One Click Publish** toolbar.</span></span>

1. <span data-ttu-id="9042e-137">Dans le menu **affichage** , choisissez **barres d’outils** , puis sélectionnez **publier sur le Web**.</span><span class="sxs-lookup"><span data-stu-id="9042e-137">In the **View** menu, choose **Toolbars** and then select **Web One Click Publish**.</span></span>

    ![Selecting_One_Click_Publish_toolbar](deploying-a-code-update/_static/image3.png)
2. <span data-ttu-id="9042e-139">Dans **Explorateur de solutions**, sélectionnez le projet ContosoUniversity.</span><span class="sxs-lookup"><span data-stu-id="9042e-139">In **Solution Explorer**, select the ContosoUniversity project.</span></span>
3. <span data-ttu-id="9042e-140">la barre d’outils **publication Web en un clic** , choisissez le profil de publication de **test** , puis cliquez sur **publier le site Web** (l’icône avec des flèches pointant vers la gauche et la droite).</span><span class="sxs-lookup"><span data-stu-id="9042e-140">the **Web One Click Publish** toolbar, choose the **Test** publish profile and then click **Publish Web** (the icon with arrows pointing left and right).</span></span>

    ![Web_One_Click_Publish_toolbar](deploying-a-code-update/_static/image4.png)
4. <span data-ttu-id="9042e-142">Visual Studio déploie l’application mise à jour et le navigateur s’ouvre automatiquement sur la page d’hébergement.</span><span class="sxs-lookup"><span data-stu-id="9042e-142">Visual Studio deploys the updated application, and the browser automatically opens to the home page.</span></span>
5. <span data-ttu-id="9042e-143">Exécutez la page enseignants et sélectionnez un formateur pour vérifier que la mise à jour a été correctement déployée.</span><span class="sxs-lookup"><span data-stu-id="9042e-143">Run the Instructors page and select an instructor to verify that the update was successfully deployed.</span></span>

<span data-ttu-id="9042e-144">En règle générale, vous effectuez des tests de régression (autrement dit, vous testez le reste du site pour vous assurer que la nouvelle modification n’a pas permis de rompre les fonctionnalités existantes).</span><span class="sxs-lookup"><span data-stu-id="9042e-144">You would normally also do regression testing (that is, test the rest of the site to make sure that the new change didn't break any existing functionality).</span></span> <span data-ttu-id="9042e-145">Toutefois, pour ce didacticiel, vous allez ignorer cette étape et procéder au déploiement de la mise à jour vers l’environnement intermédiaire et de production.</span><span class="sxs-lookup"><span data-stu-id="9042e-145">But for this tutorial you'll skip that step and proceed to deploy the update to staging and production.</span></span>

<span data-ttu-id="9042e-146">Lorsque vous redéployez, Web Deploy détermine automatiquement les fichiers qui ont changé et copie uniquement les fichiers modifiés sur le serveur.</span><span class="sxs-lookup"><span data-stu-id="9042e-146">When you redeploy, Web Deploy automatically determines which files have changed and only copies changed files to the server.</span></span> <span data-ttu-id="9042e-147">Par défaut, Web Deploy utilise des dates de dernière modification sur les fichiers pour déterminer celles qui ont changé.</span><span class="sxs-lookup"><span data-stu-id="9042e-147">By default, Web Deploy uses last-changed dates on files to determine which ones have changed.</span></span> <span data-ttu-id="9042e-148">Certains systèmes de contrôle de code source modifient les dates des fichiers même lorsque vous ne modifiez pas le contenu du fichier.</span><span class="sxs-lookup"><span data-stu-id="9042e-148">Some source control systems change file dates even when you don't change the file contents.</span></span> <span data-ttu-id="9042e-149">Dans ce cas, vous souhaiterez peut-être configurer Web Deploy pour utiliser les sommes de contrôle de fichier afin de déterminer les fichiers qui ont été modifiés.</span><span class="sxs-lookup"><span data-stu-id="9042e-149">In that case, you might want to configure Web Deploy to use file checksums to determine which files have changed.</span></span> <span data-ttu-id="9042e-150">Pour plus d’informations, consultez [pourquoi tous mes fichiers sont-ils redéployés, même si je ne les ai pas modifiés ?](https://msdn.microsoft.com/library/ee942158.aspx#use_checksum) dans le Forum aux questions sur le déploiement ASP.net.</span><span class="sxs-lookup"><span data-stu-id="9042e-150">For more information, see [Why do all of my files get redeployed although I didn't change them?](https://msdn.microsoft.com/library/ee942158.aspx#use_checksum) in the ASP.NET Deployment FAQ.</span></span>

## <a name="take-the-application-offline-during-deployment"></a><span data-ttu-id="9042e-151">Mettre l’application hors connexion pendant le déploiement</span><span class="sxs-lookup"><span data-stu-id="9042e-151">Take the application offline during deployment</span></span>

<span data-ttu-id="9042e-152">La modification que vous déployez maintenant est une simple modification apportée à une seule page.</span><span class="sxs-lookup"><span data-stu-id="9042e-152">The change you're deploying now is a simple change to a single page.</span></span> <span data-ttu-id="9042e-153">Mais parfois, vous déployez des modifications plus importantes ou vous déployez des modifications de code et de base de données, et le site peut se comporter de manière incorrecte si un utilisateur demande une page avant la fin du déploiement.</span><span class="sxs-lookup"><span data-stu-id="9042e-153">But sometimes you deploy larger changes, or you deploy both code and database changes, and the site might behave incorrectly if a user requests a page before deployment is finished.</span></span> <span data-ttu-id="9042e-154">Pour empêcher les utilisateurs d’accéder au site pendant que le déploiement est en cours, vous pouvez utiliser une *application\_fichier offline. htm* .</span><span class="sxs-lookup"><span data-stu-id="9042e-154">To prevent users from accessing the site while deployment is in progress, you can use an *app\_offline.htm* file.</span></span> <span data-ttu-id="9042e-155">Quand vous placez un fichier nommé *app\_offline. htm* dans le dossier racine de votre application, IIS affiche automatiquement ce fichier au lieu d’exécuter votre application.</span><span class="sxs-lookup"><span data-stu-id="9042e-155">When you put a file named *app\_offline.htm* in the root folder of your application, IIS automatically displays that file instead of running your application.</span></span> <span data-ttu-id="9042e-156">Pour empêcher l’accès pendant le déploiement, vous placez l' *application\_offline. htm* dans le dossier racine, vous exécutez le processus de déploiement, puis vous supprimez l' *application\_offline. htm* après un déploiement réussi.</span><span class="sxs-lookup"><span data-stu-id="9042e-156">So to prevent access during deployment, you put *app\_offline.htm* in the root folder, run the deployment process, and then remove *app\_offline.htm* after successful deployment.</span></span>

<span data-ttu-id="9042e-157">Vous pouvez configurer Web Deploy pour placer automatiquement une application par défaut *\_fichier. htm hors connexion* sur le serveur lorsqu’elle commence à déployer et à la supprimer une fois qu’elle est terminée.</span><span class="sxs-lookup"><span data-stu-id="9042e-157">You can configure Web Deploy to automatically put a default *app\_offline.htm* file on the server when it starts deploying and remove it when it finishes.</span></span> <span data-ttu-id="9042e-158">Pour ce faire, il vous suffit d’ajouter l’élément XML suivant à votre fichier de profil de publication (. pubxml) :</span><span class="sxs-lookup"><span data-stu-id="9042e-158">To do that all you have to do is add the following XML element to your publish profile (.pubxml) file:</span></span>

[!code-xml[Main](deploying-a-code-update/samples/sample2.xml)]

<span data-ttu-id="9042e-159">Pour ce didacticiel, vous allez apprendre à créer et à utiliser une *application personnalisée\_fichier offline. htm* .</span><span class="sxs-lookup"><span data-stu-id="9042e-159">For this tutorial you'll see how to create and use a custom *app\_offline.htm* file.</span></span>

<span data-ttu-id="9042e-160">L’utilisation de l' *application\_offline. htm* sur le site intermédiaire n’est pas nécessaire, car vous n’avez pas d’utilisateurs qui accèdent au site intermédiaire.</span><span class="sxs-lookup"><span data-stu-id="9042e-160">Using *app\_offline.htm* in the staging site isn't required, because you don't have users accessing the staging site.</span></span> <span data-ttu-id="9042e-161">Mais il est recommandé d’utiliser la mise en lots pour tester tout ce que vous prévoyez de déployer en production.</span><span class="sxs-lookup"><span data-stu-id="9042e-161">But it's a good practice to use staging to test everything the way you plan to deploy in production.</span></span>

### <a name="create-app_offlinehtm"></a><span data-ttu-id="9042e-162">Créer une application\_offline. htm</span><span class="sxs-lookup"><span data-stu-id="9042e-162">Create app\_offline.htm</span></span>

1. <span data-ttu-id="9042e-163">Dans **Explorateur de solutions**, cliquez avec le bouton droit sur la solution, cliquez sur **Ajouter**, puis sur **nouvel élément**.</span><span class="sxs-lookup"><span data-stu-id="9042e-163">In **Solution Explorer**, right-click the solution and click **Add**, and then click **New Item**.</span></span>
2. <span data-ttu-id="9042e-164">Créez une **page HTML** nommée *app\_offline. htm* (supprimez le « l » final de l’extension *. html* que Visual Studio crée par défaut).</span><span class="sxs-lookup"><span data-stu-id="9042e-164">Create an **HTML Page** named *app\_offline.htm* (delete the final "l" in the *.html* extension that Visual Studio creates by default).</span></span>
3. <span data-ttu-id="9042e-165">Remplacez le balisage de modèle par le balisage suivant :</span><span class="sxs-lookup"><span data-stu-id="9042e-165">Replace the template markup with the following markup:</span></span>

    [!code-html[Main](deploying-a-code-update/samples/sample3.html)]
4. <span data-ttu-id="9042e-166">Enregistrez et fermez le fichier.</span><span class="sxs-lookup"><span data-stu-id="9042e-166">Save and close the file.</span></span>

### <a name="copy-app_offlinehtm-to-the-root-folder-of-the-web-site"></a><span data-ttu-id="9042e-167">Copier l’application\_offline. htm dans le dossier racine du site Web</span><span class="sxs-lookup"><span data-stu-id="9042e-167">Copy app\_offline.htm to the root folder of the web site</span></span>

<span data-ttu-id="9042e-168">Vous pouvez utiliser n’importe quel outil FTP pour copier des fichiers sur le site Web.</span><span class="sxs-lookup"><span data-stu-id="9042e-168">You can use any FTP tool to copy files to the web site.</span></span> <span data-ttu-id="9042e-169">[FileZilla](http://filezilla-project.org/) est un outil FTP populaire qui est affiché dans les captures d’écran.</span><span class="sxs-lookup"><span data-stu-id="9042e-169">[FileZilla](http://filezilla-project.org/) is a popular FTP tool and is shown in the screen shots.</span></span>

<span data-ttu-id="9042e-170">Pour utiliser un outil FTP, vous avez besoin de trois éléments : l’URL FTP, le nom d’utilisateur et le mot de passe.</span><span class="sxs-lookup"><span data-stu-id="9042e-170">To use an FTP tool, you need three things: the FTP URL, the user name, and the password.</span></span>

<span data-ttu-id="9042e-171">L’URL s’affiche sur la page Tableau de bord du site Web dans le Portail de gestion Azure, et le nom d’utilisateur et le mot de passe pour FTP se trouvent dans le fichier *. publishsettings* que vous avez téléchargé précédemment.</span><span class="sxs-lookup"><span data-stu-id="9042e-171">The URL is shown on the web site's dashboard page in the Azure Management Portal, and the user name and password for FTP can be found in the *.publishsettings* file that you downloaded earlier.</span></span> <span data-ttu-id="9042e-172">Les étapes suivantes montrent comment récupérer ces valeurs.</span><span class="sxs-lookup"><span data-stu-id="9042e-172">The following steps show how to get these values.</span></span>

1. <span data-ttu-id="9042e-173">Dans le Portail de gestion Azure, cliquez sur l’onglet **sites Web** , puis cliquez sur le site Web intermédiaire.</span><span class="sxs-lookup"><span data-stu-id="9042e-173">In the Azure Management Portal, click **Web Sites** tab and then click the staging web site.</span></span>
2. <span data-ttu-id="9042e-174">Dans la page **tableau de bord** , faites défiler l’onglet pour rechercher le nom d’hôte FTP dans la section **Aperçu rapide** .</span><span class="sxs-lookup"><span data-stu-id="9042e-174">On the **Dashboard** page, scroll down to find the FTP host name in the **Quick Glance** section.</span></span>

    ![Nom d’hôte FTP](deploying-a-code-update/_static/image5.png)
3. <span data-ttu-id="9042e-176">Ouvrez le fichier Staging *. publishsettings* dans le bloc-notes ou dans un autre éditeur de texte.</span><span class="sxs-lookup"><span data-stu-id="9042e-176">Open the staging *.publishsettings* file in Notepad or another text editor.</span></span>
4. <span data-ttu-id="9042e-177">Recherchez l’élément `publishProfile` pour le profil FTP.</span><span class="sxs-lookup"><span data-stu-id="9042e-177">Find the `publishProfile` element for the FTP profile.</span></span>
5. <span data-ttu-id="9042e-178">Copiez les valeurs `userName` et `userPWD`.</span><span class="sxs-lookup"><span data-stu-id="9042e-178">Copy the `userName` and `userPWD` values.</span></span>

    ![Informations d’identification FTP](deploying-a-code-update/_static/image6.png)
6. <span data-ttu-id="9042e-180">Ouvrez votre outil FTP et connectez-vous à l’URL FTP.</span><span class="sxs-lookup"><span data-stu-id="9042e-180">Open your FTP tool and log on to the FTP URL.</span></span>
7. <span data-ttu-id="9042e-181">Copiez l' *application\_offline. htm* à partir du dossier de la solution dans le dossier */site/wwwroot* du site intermédiaire.</span><span class="sxs-lookup"><span data-stu-id="9042e-181">Copy *app\_offline.htm* from the solution folder to the */site/wwwroot* folder in the staging site.</span></span>

    ![Copier app_offline](deploying-a-code-update/_static/image7.png)
8. <span data-ttu-id="9042e-183">Accédez à l’URL de votre site intermédiaire.</span><span class="sxs-lookup"><span data-stu-id="9042e-183">Browse to your staging site's URL.</span></span> <span data-ttu-id="9042e-184">Vous voyez que la page *application\_offline. htm* s’affiche désormais à la place de votre page d’hébergement.</span><span class="sxs-lookup"><span data-stu-id="9042e-184">You see that the *app\_offline.htm* page is now displayed instead of your home page.</span></span>

    ![app_offline. htm dans la fenêtre du navigateur](deploying-a-code-update/_static/image8.png)

<span data-ttu-id="9042e-186">Vous êtes maintenant prêt à effectuer le déploiement dans un environnement intermédiaire.</span><span class="sxs-lookup"><span data-stu-id="9042e-186">You are now ready to deploy to staging.</span></span>

## <a name="deploy-the-code-update-to-staging-and-production"></a><span data-ttu-id="9042e-187">Déployer la mise à jour du code dans un environnement intermédiaire et de production</span><span class="sxs-lookup"><span data-stu-id="9042e-187">Deploy the code update to staging and production</span></span>

1. <span data-ttu-id="9042e-188">Dans la barre d’outils **publication Web en un clic** , choisissez le profil de publication **intermédiaire** , puis cliquez sur **publier le site Web**.</span><span class="sxs-lookup"><span data-stu-id="9042e-188">In the **Web One Click Publish** toolbar, choose the **Staging** publish profile and then click **Publish Web**.</span></span>

    <span data-ttu-id="9042e-189">Visual Studio déploie l’application mise à jour et ouvre le navigateur sur la page d’hébergement du site.</span><span class="sxs-lookup"><span data-stu-id="9042e-189">Visual Studio deploys the updated application and opens the browser to the site's home page.</span></span> <span data-ttu-id="9042e-190">L' *application\_fichier. htm hors connexion* s’affiche.</span><span class="sxs-lookup"><span data-stu-id="9042e-190">The *app\_offline.htm* file is displayed.</span></span> <span data-ttu-id="9042e-191">Avant de pouvoir effectuer un test pour vérifier que le déploiement a réussi, vous devez supprimer l' *application\_fichier offline. htm* .</span><span class="sxs-lookup"><span data-stu-id="9042e-191">Before you can test to verify successful deployment, you must remove the *app\_offline.htm* file.</span></span>
2. <span data-ttu-id="9042e-192">Revenez à votre outil FTP et supprimez l' **application\_offline. htm** du site intermédiaire.</span><span class="sxs-lookup"><span data-stu-id="9042e-192">Return to your FTP tool, and delete **app\_offline.htm** from the staging site.</span></span>
3. <span data-ttu-id="9042e-193">Dans le navigateur, ouvrez la page des instructeurs sur le site intermédiaire et sélectionnez un formateur pour vérifier que la mise à jour a été correctement déployée.</span><span class="sxs-lookup"><span data-stu-id="9042e-193">In the browser, open the Instructors page in the staging site, and select an instructor to verify that the update was successfully deployed.</span></span>
4. <span data-ttu-id="9042e-194">Suivez la même procédure pour la production que pour la mise en lots.</span><span class="sxs-lookup"><span data-stu-id="9042e-194">Follow the same procedure for production as you did for staging.</span></span>

<a id="specificfiles"></a>

## <a name="reviewing-changes-and-deploying-specific-files"></a><span data-ttu-id="9042e-195">Examen des modifications et déploiement de fichiers spécifiques</span><span class="sxs-lookup"><span data-stu-id="9042e-195">Reviewing Changes and Deploying Specific Files</span></span>

<span data-ttu-id="9042e-196">Visual Studio 2012 vous donne également la possibilité de déployer des fichiers individuels.</span><span class="sxs-lookup"><span data-stu-id="9042e-196">Visual Studio 2012 also gives you the ability to deploy individual files.</span></span> <span data-ttu-id="9042e-197">Pour un fichier sélectionné, vous pouvez afficher les différences entre la version locale et la version déployée, déployer le fichier dans l’environnement de destination ou copier le fichier de l’environnement de destination vers le projet local.</span><span class="sxs-lookup"><span data-stu-id="9042e-197">For a selected file you can view differences between the local version and the deployed version, deploy the file to the destination environment, or copy the file from the destination environment to the local project.</span></span> <span data-ttu-id="9042e-198">Dans cette section du didacticiel, vous allez apprendre à utiliser ces fonctionnalités.</span><span class="sxs-lookup"><span data-stu-id="9042e-198">In this section of the tutorial you see how to use these features.</span></span>

### <a name="make-a-change-to-deploy"></a><span data-ttu-id="9042e-199">Apporter une modification au déploiement</span><span class="sxs-lookup"><span data-stu-id="9042e-199">Make a change to deploy</span></span>

1. <span data-ttu-id="9042e-200">Ouvrez *content/site. CSS*et recherchez le bloc de la balise `body`.</span><span class="sxs-lookup"><span data-stu-id="9042e-200">Open *Content/Site.css*, and find the block for the `body` tag.</span></span>
2. <span data-ttu-id="9042e-201">Remplacez la valeur de `background-color` `#fff` par `darkblue`.</span><span class="sxs-lookup"><span data-stu-id="9042e-201">Change the value for `background-color` from `#fff` to `darkblue`.</span></span>

    [!code-css[Main](deploying-a-code-update/samples/sample4.css?highlight=2)]

### <a name="view-the-change-in-the-publish-preview-window"></a><span data-ttu-id="9042e-202">Afficher la modification dans la fenêtre d’aperçu de publication</span><span class="sxs-lookup"><span data-stu-id="9042e-202">View the change in the Publish Preview window</span></span>

<span data-ttu-id="9042e-203">Lorsque vous utilisez l’Assistant **publier le site Web** pour publier le projet, vous pouvez voir les modifications qui vont être publiées en double-cliquant sur le fichier dans la fenêtre d' **Aperçu** .</span><span class="sxs-lookup"><span data-stu-id="9042e-203">When you use the **Publish Web** wizard to publish the project, you can see what changes are going to be published by double-clicking the file in the **Preview** window.</span></span>

1. <span data-ttu-id="9042e-204">Cliquez avec le bouton droit sur le projet ContosoUniversity, puis cliquez sur **publier**.</span><span class="sxs-lookup"><span data-stu-id="9042e-204">Right-click the ContosoUniversity project and click **Publish**.</span></span>
2. <span data-ttu-id="9042e-205">Dans la liste déroulante **Profil** , sélectionnez le profil de publication de **test** .</span><span class="sxs-lookup"><span data-stu-id="9042e-205">From the **Profile** drop-down list, select the **Test** publish profile.</span></span>
3. <span data-ttu-id="9042e-206">Cliquez sur **Aperçu**, puis sur **Démarrer l’aperçu**.</span><span class="sxs-lookup"><span data-stu-id="9042e-206">Click **Preview**, and then click **Start Preview**.</span></span>
4. <span data-ttu-id="9042e-207">Dans le volet de **visualisation** , double-cliquez sur **site. CSS**.</span><span class="sxs-lookup"><span data-stu-id="9042e-207">In the **Preview** pane, double-click **Site.css**.</span></span>

    ![Double-cliquez sur site. CSS](deploying-a-code-update/_static/image9.png)

    <span data-ttu-id="9042e-209">La boîte de dialogue **aperçu des modifications** affiche un aperçu des modifications qui seront déployées.</span><span class="sxs-lookup"><span data-stu-id="9042e-209">The **Preview changes** dialog shows a preview of the changes that will be deployed.</span></span>

    ![Aperçu des modifications apportées à site. CSS](deploying-a-code-update/_static/image10.png)

    <span data-ttu-id="9042e-211">Si vous double-cliquez sur le fichier *Web. config* , la boîte de dialogue **aperçu des modifications** affiche l’effet de vos transformations de configuration de build et des transformations de profil de publication.</span><span class="sxs-lookup"><span data-stu-id="9042e-211">If you double-click the *Web.config* file, the **Preview changes** dialog shows the effect of your build configuration transformations and publish profile transformations.</span></span> <span data-ttu-id="9042e-212">À ce stade, vous n’avez rien effectué, ce qui entraînerait la modification du fichier *Web. config* sur le serveur. vous ne verrez donc aucune modification.</span><span class="sxs-lookup"><span data-stu-id="9042e-212">At this point you have not done anything that would cause the *Web.config* file on the server to change, so you expect to see no changes.</span></span> <span data-ttu-id="9042e-213">Toutefois, la fenêtre **aperçu des modifications** affiche de manière incorrecte deux modifications.</span><span class="sxs-lookup"><span data-stu-id="9042e-213">However, the **Preview changes** window incorrectly shows two changes.</span></span> <span data-ttu-id="9042e-214">Il semble que deux éléments XML seront supprimés.</span><span class="sxs-lookup"><span data-stu-id="9042e-214">It looks like two XML elements will be removed.</span></span> <span data-ttu-id="9042e-215">Ces éléments sont ajoutés par le processus de publication lorsque vous sélectionnez **exécuter migrations code First au démarrage** de l’application pour une classe de contexte code First.</span><span class="sxs-lookup"><span data-stu-id="9042e-215">These elements are added by the publish process when you select **Execute Code First Migrations on application start** for a Code First context class.</span></span> <span data-ttu-id="9042e-216">La comparaison est effectuée avant que le processus de publication n’ajoute ces éléments. il semble donc qu’ils sont supprimés même s’ils ne sont pas supprimés.</span><span class="sxs-lookup"><span data-stu-id="9042e-216">The comparison is done before the publish process adds those elements, so it looks like they are being removed although they will not be removed.</span></span> <span data-ttu-id="9042e-217">Cette erreur sera corrigée dans une version ultérieure.</span><span class="sxs-lookup"><span data-stu-id="9042e-217">This error will be corrected in a future release.</span></span>
5. <span data-ttu-id="9042e-218">Cliquez sur **Fermer**.</span><span class="sxs-lookup"><span data-stu-id="9042e-218">Click **Close**.</span></span>
6. <span data-ttu-id="9042e-219">Cliquez sur **Publier**.</span><span class="sxs-lookup"><span data-stu-id="9042e-219">Click **Publish**.</span></span>
7. <span data-ttu-id="9042e-220">Lorsque le navigateur s’ouvre sur la page d’origine du site de test, appuyez sur CTRL + F5 pour effectuer une actualisation matérielle afin de voir l’effet de la modification CSS.</span><span class="sxs-lookup"><span data-stu-id="9042e-220">When the browser opens to the home page of the Test site, press CTRL+F5 to cause a hard refresh in order to see the effect of the CSS change.</span></span>

    ![Effet de la modification CSS](deploying-a-code-update/_static/image11.png)
8. <span data-ttu-id="9042e-222">Fermez le navigateur.</span><span class="sxs-lookup"><span data-stu-id="9042e-222">Close the browser.</span></span>

### <a name="publish-specific-files-from-solution-explorer"></a><span data-ttu-id="9042e-223">Publier des fichiers spécifiques à partir d’Explorateur de solutions</span><span class="sxs-lookup"><span data-stu-id="9042e-223">Publish specific files from Solution Explorer</span></span>

<span data-ttu-id="9042e-224">Supposons que vous n’aimez pas l’arrière-plan bleu et que vous souhaitiez revenir à la couleur d’origine.</span><span class="sxs-lookup"><span data-stu-id="9042e-224">Suppose you don't like the blue background and want to revert to the original color.</span></span> <span data-ttu-id="9042e-225">Dans cette section, vous allez restaurer les paramètres d’origine en publiant un fichier spécifique directement à partir de **Explorateur de solutions**.</span><span class="sxs-lookup"><span data-stu-id="9042e-225">In this section you'll restore the original settings by publishing a specific file directly from **Solution Explorer**.</span></span>

1. <span data-ttu-id="9042e-226">Ouvrez *content/site. CSS* et restaurez le paramètre `background-color` sur `#fff`.</span><span class="sxs-lookup"><span data-stu-id="9042e-226">Open *Content/Site.css* and restore the `background-color` setting to `#fff`.</span></span>
2. <span data-ttu-id="9042e-227">Dans **Explorateur de solutions**, cliquez avec le bouton droit sur le fichier *content/site. CSS* .</span><span class="sxs-lookup"><span data-stu-id="9042e-227">In **Solution Explorer**, right-click the *Content/Site.css* file.</span></span>

    <span data-ttu-id="9042e-228">Le menu contextuel affiche trois options de publication.</span><span class="sxs-lookup"><span data-stu-id="9042e-228">The context menu shows three publish options.</span></span>

    ![Publier les options de Explorateur de solutions](deploying-a-code-update/_static/image12.png)
3. <span data-ttu-id="9042e-230">Cliquez sur **aperçu des modifications apportées à site. CSS**.</span><span class="sxs-lookup"><span data-stu-id="9042e-230">Click **Preview changes to Site.css**.</span></span>

    <span data-ttu-id="9042e-231">Une fenêtre s’ouvre pour afficher les différences entre le fichier local et sa version dans l’environnement de destination.</span><span class="sxs-lookup"><span data-stu-id="9042e-231">A window opens to show the differences between the local file and the version of it in the destination environment.</span></span>

    ![Diff-Content/site. CSS](deploying-a-code-update/_static/image13.png)
4. <span data-ttu-id="9042e-233">Dans **Explorateur de solutions**, cliquez à nouveau avec le bouton droit sur **site. CSS** , puis cliquez sur **publier le site. CSS**.</span><span class="sxs-lookup"><span data-stu-id="9042e-233">In **Solution Explorer**, right-click **Site.css** again and click **Publish Site.css**.</span></span>

    <span data-ttu-id="9042e-234">La fenêtre **activité de publication Web** indique que le fichier a été publié.</span><span class="sxs-lookup"><span data-stu-id="9042e-234">The **Web Publish Activity** window shows that the file has been published.</span></span>

    ![Fenêtre d’activité de publication Web](deploying-a-code-update/_static/image14.png)
5. <span data-ttu-id="9042e-236">Ouvrez un navigateur à l’URL `http://localhost/contosouniversity`, puis appuyez sur CTRL + F5 pour effectuer une actualisation matérielle afin de voir l’effet de la modification CSS.</span><span class="sxs-lookup"><span data-stu-id="9042e-236">Open a browser to the `http://localhost/contosouniversity` URL, and then press CTRL+F5 to cause a hard refresh in order to see the effect of the CSS change.</span></span>

    ![Page d’hébergement avec CSS normal](deploying-a-code-update/_static/image15.png)
6. <span data-ttu-id="9042e-238">Fermez le navigateur.</span><span class="sxs-lookup"><span data-stu-id="9042e-238">Close the browser.</span></span>

## <a name="summary"></a><span data-ttu-id="9042e-239">Récapitulatif</span><span class="sxs-lookup"><span data-stu-id="9042e-239">Summary</span></span>

<span data-ttu-id="9042e-240">Vous avez maintenant vu plusieurs manières de déployer une mise à jour d’application qui n’implique pas de modification de base de données, et vous avez vu comment afficher un aperçu des modifications pour vérifier que ce qui sera mis à jour est ce que vous attendez.</span><span class="sxs-lookup"><span data-stu-id="9042e-240">You've now seen several ways to deploy an application update that does not involve a database change, and you've seen how to preview the changes to verify that what will be updated is what you expect.</span></span> <span data-ttu-id="9042e-241">La page des formateurs contient maintenant une section **formations enseignées** .</span><span class="sxs-lookup"><span data-stu-id="9042e-241">The Instructors page now has a **Courses Taught** section.</span></span>

![Page des instructeurs avec des cours enseignés](deploying-a-code-update/_static/image16.png)

<span data-ttu-id="9042e-243">Le didacticiel suivant vous montre comment déployer une modification de base de données : vous ajouterez un champ BirthDate à la base de données et à la page des formateurs.</span><span class="sxs-lookup"><span data-stu-id="9042e-243">The next tutorial shows you how to deploy a database change: you'll add a birthdate field to the database and to the Instructors page.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="9042e-244">[Précédent](deploying-to-production.md)
> [Suivant](deploying-a-database-update.md)</span><span class="sxs-lookup"><span data-stu-id="9042e-244">[Previous](deploying-to-production.md)
[Next](deploying-a-database-update.md)</span></span>

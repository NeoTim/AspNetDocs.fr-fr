---
uid: web-forms/overview/older-versions-security/membership/creating-the-membership-schema-in-sql-server-cs
title: Création du schéma d’appartenance dans SQL Server (c#) | Microsoft Docs
author: rick-anderson
description: Ce didacticiel commence par examiner des techniques permettant d’ajouter le schéma nécessaire à la base de données pour pouvoir utiliser SqlMembershipProvider. Ensuite, nous wi...
ms.author: riande
ms.date: 01/18/2008
ms.assetid: b4ac129d-1b8e-41ca-a38f-9b19d7c7bb0e
msc.legacyurl: /web-forms/overview/older-versions-security/membership/creating-the-membership-schema-in-sql-server-cs
msc.type: authoredcontent
ms.openlocfilehash: 8a2cc19ea2ebd0e3be8ba5de40cd6c0c94dbc9dd
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/09/2019
ms.locfileid: "59409276"
---
# <a name="creating-the-membership-schema-in-sql-server-c"></a><span data-ttu-id="b9ed5-104">Création du schéma d’appartenance dans SQL Server (C#)</span><span class="sxs-lookup"><span data-stu-id="b9ed5-104">Creating the Membership Schema in SQL Server (C#)</span></span>

<span data-ttu-id="b9ed5-105">par [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="b9ed5-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="b9ed5-106">[Télécharger le Code](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_04_CS.zip) ou [télécharger le PDF](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial04_MembershipSetup_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="b9ed5-106">[Download Code](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/ASPNET_Security_Tutorial_04_CS.zip) or [Download PDF](http://download.microsoft.com/download/3/f/5/3f5a8605-c526-4b34-b3fd-a34167117633/aspnet_tutorial04_MembershipSetup_cs.pdf)</span></span>

> <span data-ttu-id="b9ed5-107">Ce didacticiel commence par examiner des techniques permettant d’ajouter le schéma nécessaire à la base de données pour pouvoir utiliser SqlMembershipProvider.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-107">This tutorial starts by examining techniques for adding the necessary schema to the database in order to use the SqlMembershipProvider.</span></span> <span data-ttu-id="b9ed5-108">Ensuite, nous examiner les tables de clés dans le schéma et discuter de leur utilité et leur importance.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-108">Following that, we will examine the key tables in the schema and discuss their purpose and importance.</span></span> <span data-ttu-id="b9ed5-109">Ce didacticiel se termine par examiner comment indiquer à quel fournisseur de l’infrastructure de l’appartenance doit utiliser une application ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-109">This tutorial ends with a look at how to tell an ASP.NET application which provider the Membership framework should use.</span></span>


## <a name="introduction"></a><span data-ttu-id="b9ed5-110">Introduction</span><span class="sxs-lookup"><span data-stu-id="b9ed5-110">Introduction</span></span>

<span data-ttu-id="b9ed5-111">Les deux les didacticiels précédents examinés à l’aide de l’authentification par formulaire pour identifier les visiteurs du site Web.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-111">The previous two tutorials examined using forms authentication to identify website visitors.</span></span> <span data-ttu-id="b9ed5-112">L’infrastructure d’authentification forms rend plus facile pour les développeurs à connecter un utilisateur à un site Web et se les rappeler une visite de page grâce à l’utilisation des tickets d’authentification.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-112">The forms authentication framework makes it easy for developers to log a user into a website and to remember them across page visits through the use of authentication tickets.</span></span> <span data-ttu-id="b9ed5-113">Le `FormsAuthentication` classe inclut des méthodes pour générer le ticket et son ajout à des cookies du visiteur.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-113">The `FormsAuthentication` class includes methods for generating the ticket and adding it to the visitor's cookies.</span></span> <span data-ttu-id="b9ed5-114">Le `FormsAuthenticationModule` examine toutes les demandes entrantes et, pour ceux avec un ticket d’authentification valide, crée et associe un `GenericPrincipal` et un `FormsIdentity` objet avec la requête actuelle.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-114">The `FormsAuthenticationModule` examines all incoming requests and, for those with a valid authentication ticket, creates and associates a `GenericPrincipal` and a `FormsIdentity` object with the current request.</span></span> <span data-ttu-id="b9ed5-115">L’authentification par formulaire est simplement un mécanisme permettant d’accorder un ticket d’authentification pour un visiteur lors de la connexion dans et, pour les requêtes ultérieures, l’analyse de ce ticket pour déterminer l’identité de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-115">Forms authentication is merely a mechanism for granting an authentication ticket to a visitor when logging in and, on subsequent requests, parsing that ticket to determine the user's identity.</span></span> <span data-ttu-id="b9ed5-116">Pour une application web prendre en charge les comptes d’utilisateur, nous devons toujours implémenter un magasin d’utilisateurs et ajouter des fonctionnalités pour valider les informations d’identification, puis inscrire de nouveaux utilisateurs et la myriade d’autres tâches relatives aux comptes d’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-116">For a web application to support user accounts, we still need to implement a user store and add functionality to validate credentials, register new users, and the myriad of other user account-related tasks.</span></span>

<span data-ttu-id="b9ed5-117">Avant ASP.NET 2.0, les développeurs étaient sur le raccordement pour l’implémentation de toutes ces tâches relatives aux comptes d’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-117">Prior to ASP.NET 2.0, developers were on the hook for implementing all of these user account-related tasks.</span></span> <span data-ttu-id="b9ed5-118">Heureusement, l’équipe ASP.NET reconnu cette lacune et présenté l’infrastructure d’appartenance avec ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-118">Fortunately the ASP.NET team recognized this shortcoming and introduced the Membership framework with ASP.NET 2.0.</span></span> <span data-ttu-id="b9ed5-119">L’infrastructure de l’appartenance est un ensemble de classes dans le .NET Framework qui fournissent une interface de programmation pour accomplir des tâches de relatives aux comptes utilisateur core.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-119">The Membership framework is a set of classes in the .NET Framework that provide a programmatic interface for accomplishing core user account-related tasks.</span></span> <span data-ttu-id="b9ed5-120">Cette infrastructure est construite sur le [modèle de fournisseur](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), ce qui permet aux développeurs d’incorporer une implémentation personnalisée dans une API normalisée.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-120">This framework is built atop the [provider model](http://aspnet.4guysfromrolla.com/articles/101905-1.aspx), which allows developers to plug a customized implementation into a standardized API.</span></span>

<span data-ttu-id="b9ed5-121">Comme indiqué dans le <a id="Tutorial1"> </a> [ *principes élémentaires de sécurité et la prise en charge ASP.NET* ](../introduction/security-basics-and-asp-net-support-cs.md) didacticiel, le .NET Framework est livré avec deux fournisseurs d’appartenances intégrés : [ `ActiveDirectoryMembershipProvider` ](https://msdn.microsoft.com/library/system.web.security.activedirectorymembershipprovider.aspx) et [ `SqlMembershipProvider` ](https://msdn.microsoft.com/library/system.web.security.sqlmembershipprovider.aspx).</span><span class="sxs-lookup"><span data-stu-id="b9ed5-121">As discussed in the <a id="Tutorial1"></a>[*Security Basics and ASP.NET Support*](../introduction/security-basics-and-asp-net-support-cs.md) tutorial, the .NET Framework ships with two built-in Membership providers: [`ActiveDirectoryMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.activedirectorymembershipprovider.aspx) and [`SqlMembershipProvider`](https://msdn.microsoft.com/library/system.web.security.sqlmembershipprovider.aspx).</span></span> <span data-ttu-id="b9ed5-122">Comme son nom l’indique, le `SqlMembershipProvider` utilise une base de données Microsoft SQL Server comme magasin de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-122">As its name implies, the `SqlMembershipProvider` uses a Microsoft SQL Server database as the user store.</span></span> <span data-ttu-id="b9ed5-123">Pour utiliser ce fournisseur dans une application, nous devons indiquer au fournisseur de base de données à utiliser comme magasin.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-123">In order to use this provider in an application, we need to tell the provider what database to use as the store.</span></span> <span data-ttu-id="b9ed5-124">Comme vous pouvez l’imaginer, la `SqlMembershipProvider` attend la base de données du magasin utilisateur d’avoir certaines tables de base de données, les vues et les procédures stockées.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-124">As you might imagine, the `SqlMembershipProvider` expects the user store database to have certain database tables, views, and stored procedures.</span></span> <span data-ttu-id="b9ed5-125">Nous devons ajouter ce schéma attendu à la base de données sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-125">We need to add this expected schema to the selected database.</span></span>

<span data-ttu-id="b9ed5-126">Ce didacticiel commence par examiner des techniques permettant d’ajouter le schéma nécessaire à la base de données pour pouvoir utiliser le `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-126">This tutorial starts by examining techniques for adding the necessary schema to the database in order to use the `SqlMembershipProvider`.</span></span> <span data-ttu-id="b9ed5-127">Ensuite, nous examiner les tables de clés dans le schéma et discuter de leur utilité et leur importance.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-127">Following that, we will examine the key tables in the schema and discuss their purpose and importance.</span></span> <span data-ttu-id="b9ed5-128">Ce didacticiel se termine par examiner comment indiquer à quel fournisseur de l’infrastructure de l’appartenance doit utiliser une application ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-128">This tutorial ends with a look at how to tell an ASP.NET application which provider the Membership framework should use.</span></span>

<span data-ttu-id="b9ed5-129">C’est parti !</span><span class="sxs-lookup"><span data-stu-id="b9ed5-129">Let's get started!</span></span>

## <a name="step-1-deciding-where-to-place-the-user-store"></a><span data-ttu-id="b9ed5-130">Étape 1 : Décider où placer le Store de l’utilisateur</span><span class="sxs-lookup"><span data-stu-id="b9ed5-130">Step 1: Deciding Where to Place the User Store</span></span>

<span data-ttu-id="b9ed5-131">Données d’une application ASP.NET sont généralement stockées dans un nombre de tables dans une base de données.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-131">An ASP.NET application's data is commonly stored in a number of tables in a database.</span></span> <span data-ttu-id="b9ed5-132">Lorsque vous implémentez le `SqlMembershipProvider` schéma de base de données nous devons déterminer s’il faut placer du schéma d’appartenance dans la même base de données en tant que les données d’application ou dans une autre base de données.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-132">When implementing the `SqlMembershipProvider` database schema we must decide whether to place the Membership schema in the same database as the application data or in an alternate database.</span></span>

<span data-ttu-id="b9ed5-133">Je vous recommande de localisation du schéma d’appartenance dans la même base de données en tant que les données d’application pour les raisons suivantes :</span><span class="sxs-lookup"><span data-stu-id="b9ed5-133">I recommend locating the Membership schema in the same database as the application data for the following reasons:</span></span>

- <span data-ttu-id="b9ed5-134">**La facilité de maintenance** une application dont les données sont encapsulées dans une base de données est plus facile à comprendre, gérer et déployer une application qui a deux bases de données distinctes.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-134">**Maintainability** � an application whose data is encapsulated in one database is easier to understand, maintain, and deploy than an application that has two separate databases.</span></span>
- <span data-ttu-id="b9ed5-135">**L’intégrité relationnelle** en recherchant les tables liées à l’appartenance dans la même base de données en tant que tables de l’application qu’il est possible d’établir [contraintes de clé étrangère](http://en.wikipedia.org/wiki/Foreign_key) entre les clés primaires dans le Tables liées à l’appartenance et les tables d’application associé.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-135">**Relational Integrity** � by locating the Membership-related tables in the same database as the application tables it is possible to establish [foreign key constraints](http://en.wikipedia.org/wiki/Foreign_key) between the primary keys in the Membership-related tables and related application tables.</span></span>

<span data-ttu-id="b9ed5-136">Découplage les données de magasin et l’application utilisateur dans les bases de données distinctes convient uniquement si vous possédez plusieurs applications que chacun utilise des bases de données distinctes, mais doivent partager un magasin utilisateur commun.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-136">Decoupling the user store and application data into separate databases only makes sense if you have multiple applications that each use separate databases, but need to share a common user store.</span></span>

### <a name="creating-a-database"></a><span data-ttu-id="b9ed5-137">Création d’une base de données</span><span class="sxs-lookup"><span data-stu-id="b9ed5-137">Creating a Database</span></span>

<span data-ttu-id="b9ed5-138">L’application que nous avons créé dans la mesure où le deuxième didacticiel n’a pas encore nécessaire d’une base de données.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-138">The application we have been building since the second tutorial has not yet needed a database.</span></span> <span data-ttu-id="b9ed5-139">Nous avons besoin une maintenant, toutefois, pour le magasin d’utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-139">We need one now, however, for the user store.</span></span> <span data-ttu-id="b9ed5-140">Nous allons créer un et puis lui ajouter le schéma requis par le `SqlMembershipProvider` fournisseur (voir étape 2).</span><span class="sxs-lookup"><span data-stu-id="b9ed5-140">Let's create one and then add to it the schema required by the `SqlMembershipProvider` provider (see Step 2).</span></span>

> [!NOTE]
> <span data-ttu-id="b9ed5-141">Tout au long de cette série de didacticiels nous utiliserons un [Microsoft SQL Server 2005 Express Edition](https://msdn.microsoft.com/sql/Aa336346.aspx) base de données pour stocker nos tables de l’application et le `SqlMembershipProvider` schéma.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-141">Throughout this tutorial series we will be using a [Microsoft SQL Server 2005 Express Edition](https://msdn.microsoft.com/sql/Aa336346.aspx) database to store our application tables and the `SqlMembershipProvider` schema.</span></span> <span data-ttu-id="b9ed5-142">Cette décision a été effectuée pour deux raisons : tout d’abord, en raison de son coût - gratuit - Express Edition est la version la plus lisiblement accessible de SQL Server 2005 ; Deuxièmement, les bases de données SQL Server 2005 Express Edition peuvent être placés directement dans l’application web `App_Data` dossier, en rendant un jeu d’enfant pour la base de données du package et une application web ensemble dans un seul fichier ZIP et redéployer sans les instructions de configuration spéciale options de configuration ou.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-142">This decision was made for two reasons: first, due to its cost - free - the Express Edition is the most readably accessible version of SQL Server 2005; second, SQL Server 2005 Express Edition databases can be placed directly in the web application's `App_Data` folder, making it a cinch to package the database and web application together in one ZIP file and to redeploy it without any special setup instructions or configuration options.</span></span> <span data-ttu-id="b9ed5-143">Si vous préférez suivre la procédure à l’aide d’une version non - Express Edition de SQL Server, n’hésitez pas.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-143">If you'd prefer to follow along using a non-Express Edition version of SQL Server, feel free.</span></span> <span data-ttu-id="b9ed5-144">Les étapes sont pratiquement identiques.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-144">The steps are virtually identical.</span></span> <span data-ttu-id="b9ed5-145">Le `SqlMembershipProvider` schéma travaillera avec n’importe quelle version de Microsoft SQL Server 2000 et le haut.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-145">The `SqlMembershipProvider` schema will work with any version of Microsoft SQL Server 2000 and up.</span></span>


<span data-ttu-id="b9ed5-146">À partir de l’Explorateur de solutions, cliquez sur le `App_Data` dossier et choisir d’ajouter un nouvel élément.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-146">From the Solution Explorer, right-click on the `App_Data` folder and choose to Add New Item.</span></span> <span data-ttu-id="b9ed5-147">(Si vous ne voyez pas un `App_Data` dossier dans votre projet, avec le bouton droit sur le projet dans l’Explorateur de solutions, sélectionnez Ajouter le dossier ASP.NET et choisir `App_Data`.) À partir de la boîte de dialogue Ajouter un nouvel élément, choisissez d’ajouter une nouvelle base de données SQL nommée `SecurityTutorials.mdf`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-147">(If you do not see an `App_Data` folder in your project, right-click on the project in Solution Explorer, select Add ASP.NET Folder, and pick `App_Data`.) From the Add New Item dialog box, choose to add a new SQL Database named `SecurityTutorials.mdf`.</span></span> <span data-ttu-id="b9ed5-148">Dans ce didacticiel, nous allons ajouter le `SqlMembershipProvider` schéma pour cette base de données ; dans les didacticiels suivants, nous allons créer supplémentaires tables pour capturer des données de notre application.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-148">In this tutorial we will add the `SqlMembershipProvider` schema to this database; in subsequent tutorials we will create additional tables to capture our application data.</span></span>


[![A<span data-ttu-id="b9ed5-149">une nouvelle base de données nommé SecurityTutorials.mdf base de données SQL dans le dossier App_Data de jj]</span><span class="sxs-lookup"><span data-stu-id="b9ed5-149">dd a New SQL Database Named SecurityTutorials.mdf Database to the App_Data Folder]</span></span>(creating-the-membership-schema-in-sql-server-cs/_static/image2.png)](creating-the-membership-schema-in-sql-server-cs/_static/image1.png)

<span data-ttu-id="b9ed5-150">**Figure 1**: Ajouter une nouvelle base de données SQL nommée `SecurityTutorials.mdf` base de données vers le `App_Data` dossier ([cliquez pour afficher l’image en taille réelle](creating-the-membership-schema-in-sql-server-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="b9ed5-150">**Figure 1**: Add a New SQL Database Named `SecurityTutorials.mdf` Database to the `App_Data` Folder ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image3.png))</span></span>


<span data-ttu-id="b9ed5-151">Ajout d’une base de données pour le `App_Data` dossier inclut automatiquement dans l’Explorateur de base de données.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-151">Adding a database to the `App_Data` folder automatically includes it in the Database Explorer view.</span></span> <span data-ttu-id="b9ed5-152">(Dans la version non - Express Edition de Visual Studio, l’Explorateur de base de données est appelée l’Explorateur de serveurs). Accédez à l’Explorateur de base de données et développez la juste ajouté `SecurityTutorials` base de données.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-152">(In the non-Express Edition version of Visual Studio, the Database Explorer is called the Server Explorer.) Go to the Database Explorer and expand the just-added `SecurityTutorials` database.</span></span> <span data-ttu-id="b9ed5-153">Si vous ne voyez pas l’Explorateur de base de données à l’écran, accédez au menu Affichage et choisissez Explorateur de base de données ou appuyez sur Ctrl + Alt + S.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-153">If you do not see the Database Explorer on screen, go to the View menu and choose Database Explorer, or hit Ctrl+Alt+S.</span></span> <span data-ttu-id="b9ed5-154">Comme le montre la Figure 2, le `SecurityTutorials` base de données est vide ; il contient aucune table, aucune vue et aucune procédure stockée.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-154">As Figure 2 shows, the `SecurityTutorials` database is empty - it contains no tables, no views, and no stored procedures.</span></span>


[![T<span data-ttu-id="b9ed5-155">Il SecurityTutorials la base de données est actuellement vide]</span><span class="sxs-lookup"><span data-stu-id="b9ed5-155">he SecurityTutorials Database is Currently Empty]</span></span>(creating-the-membership-schema-in-sql-server-cs/_static/image5.png)](creating-the-membership-schema-in-sql-server-cs/_static/image4.png)

<span data-ttu-id="b9ed5-156">**Figure 2**: Le `SecurityTutorials` base de données est actuellement vide ([cliquez pour afficher l’image en taille réelle](creating-the-membership-schema-in-sql-server-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="b9ed5-156">**Figure 2**: The `SecurityTutorials` Database is Currently Empty ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image6.png))</span></span>


## <a name="step-2-adding-thesqlmembershipproviderschema-to-the-database"></a><span data-ttu-id="b9ed5-157">Étape 2 : Ajout de la`SqlMembershipProvider`schéma à la base de données</span><span class="sxs-lookup"><span data-stu-id="b9ed5-157">Step 2: Adding the`SqlMembershipProvider`Schema to the Database</span></span>

<span data-ttu-id="b9ed5-158">Le `SqlMembershipProvider` requiert un jeu de tables, vues et procédures stockées doit être installé dans la base de données du magasin utilisateur particulier.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-158">The `SqlMembershipProvider` requires a particular set of tables, views, and stored procedures to be installed in the user store database.</span></span> <span data-ttu-id="b9ed5-159">Ces objets de base de données requis peuvent être ajoutés à l’aide de la [ `aspnet_regsql.exe` outil](https://msdn.microsoft.com/library/ms229862.aspx).</span><span class="sxs-lookup"><span data-stu-id="b9ed5-159">These requisite database objects can be added using the [`aspnet_regsql.exe` tool](https://msdn.microsoft.com/library/ms229862.aspx).</span></span> <span data-ttu-id="b9ed5-160">Ce fichier se trouve dans le `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\` dossier.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-160">This file is located in the `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\` folder.</span></span>

> [!NOTE]
> <span data-ttu-id="b9ed5-161">Le `aspnet_regsql.exe` outil propose des fonctionnalités de la ligne de commande et une interface utilisateur graphique.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-161">The `aspnet_regsql.exe` tool offers both command line functionality and a graphical user interface.</span></span> <span data-ttu-id="b9ed5-162">L’interface graphique plus convivial et est ce que nous allons examiner dans ce didacticiel.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-162">The graphical interface is more user friendly and is what we will examine in this tutorial.</span></span> <span data-ttu-id="b9ed5-163">L’interface de ligne de commande est utile lorsque l’ajout de la `SqlMembershipProvider` schéma doit être automatisée, comme dans la génération de scripts ou automatisée des scénarios de test.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-163">The command line interface is useful when the addition of the `SqlMembershipProvider` schema needs to be automated, such as in build scripts or automated testing scenarios.</span></span>


<span data-ttu-id="b9ed5-164">Le `aspnet_regsql.exe` outil est utilisé pour ajouter ou supprimer des *services d’application ASP.NET* à une base de données SQL Server spécifiée.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-164">The `aspnet_regsql.exe` tool is used to add or remove *ASP.NET application services* to a specified SQL Server database.</span></span> <span data-ttu-id="b9ed5-165">Les services d’application ASP.NET englobent les schémas pour le `SqlMembershipProvider` et `SqlRoleProvider`, ainsi que les schémas pour les fournisseurs basé sur SQL pour d’autres frameworks d’ASP.NET 2.0.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-165">The ASP.NET application services encompass the schemas for the `SqlMembershipProvider` and `SqlRoleProvider`, along with the schemas for the SQL-based providers for other ASP.NET 2.0 frameworks.</span></span> <span data-ttu-id="b9ed5-166">Nous devons fournir les deux bits d’information pour le `aspnet_regsql.exe` outil :</span><span class="sxs-lookup"><span data-stu-id="b9ed5-166">We need to provide two bits of information to the `aspnet_regsql.exe` tool:</span></span>

- <span data-ttu-id="b9ed5-167">Si nous souhaitons ajouter ou supprimer des services d’application, et</span><span class="sxs-lookup"><span data-stu-id="b9ed5-167">Whether we want to add or remove application services, and</span></span>
- <span data-ttu-id="b9ed5-168">La base de données à partir duquel ajouter ou supprimer le schéma de services d’application</span><span class="sxs-lookup"><span data-stu-id="b9ed5-168">The database from which to add or remove the application services schema</span></span>

<span data-ttu-id="b9ed5-169">Dans l’invite pour la base de données à utiliser, le `aspnet_regsql.exe` outil nous demande de fournir le nom du serveur sur la base de données réside sur les informations d’identification de sécurité pour la connexion à la base de données et le nom de la base de données.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-169">In prompting for the database to use, the `aspnet_regsql.exe` tool asks us to provide the name of the server the database resides on, the security credentials for connecting to the database, and the database name.</span></span> <span data-ttu-id="b9ed5-170">Si vous utilisez les non - Express Edition de SQL Server, vous devez déjà savoir ces informations, car il s’agit des mêmes informations que vous devez fournir via une chaîne de connexion lorsque vous travaillez avec la base de données via une page web ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-170">If you are using the non-Express Edition of SQL Server, you should already know this information, as it is the same information you must provide through a connection string when working with the database through an ASP.NET web page.</span></span> <span data-ttu-id="b9ed5-171">Détermination du nom de serveur et base de données lors de l’utilisation d’une base de données SQL Server 2005 Express Edition dans la `App_Data` dossier, cependant, est un peu plus complexe.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-171">Determining the server and database name when using a SQL Server 2005 Express Edition database in the `App_Data` folder, however, is a bit more involved.</span></span>

<span data-ttu-id="b9ed5-172">La section suivante examine une méthode simple pour spécifier le nom de serveur et base de données pour une base de données SQL Server 2005 Express Edition dans la `App_Data` dossier.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-172">The following section examines a straightforward way for specifying the server and database name for a SQL Server 2005 Express Edition database in the `App_Data` folder.</span></span> <span data-ttu-id="b9ed5-173">Si vous n’utilisez pas SQL Server 2005 Express Edition hésitez à passer directement à l’installation de la section de Services d’Application.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-173">If you are not using SQL Server 2005 Express Edition feel free to skip ahead to the Installing the Application Services section.</span></span>

### <a name="determining-the-server-and-database-name-for-a-sql-server-2005-express-edition-database-in-theappdatafolder"></a><span data-ttu-id="b9ed5-174">Déterminer le nom du serveur et base de données pour une base de données SQL Server 2005 Express Edition dans la`App_Data`dossier</span><span class="sxs-lookup"><span data-stu-id="b9ed5-174">Determining the Server and Database Name for a SQL Server 2005 Express Edition Database in the`App_Data`Folder</span></span>

<span data-ttu-id="b9ed5-175">Pour pouvoir utiliser le `aspnet_regsql.exe` outil que nous avons besoin de connaître les noms de serveur et base de données.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-175">In order to use the `aspnet_regsql.exe` tool we need to know the server and database names.</span></span> <span data-ttu-id="b9ed5-176">Le nom du serveur est `localhost\InstanceName`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-176">The server name is `localhost\InstanceName`.</span></span> <span data-ttu-id="b9ed5-177">Vraisemblablement, le *InstanceName* est `SQLExpress`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-177">Most likely, the *InstanceName* is `SQLExpress`.</span></span> <span data-ttu-id="b9ed5-178">Toutefois, si vous avez installé SQL Server 2005 Express Edition manuellement (autrement dit, vous n’avez pas installé il automatiquement lors de l’installation de Visual Studio), il est possible que vous avez sélectionné un autre nom d’instance.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-178">However, if you installed SQL Server 2005 Express Edition manually (that is, you did not install it automatically while installing Visual Studio), then it is possible that you selected a different instance name.</span></span>

<span data-ttu-id="b9ed5-179">Le nom de la base de données est un peu plus difficile à déterminer.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-179">The database name is a bit trickier to determine.</span></span> <span data-ttu-id="b9ed5-180">Bases de données dans le `App_Data` dossier ont généralement un nom de base de données qui inclut un [identificateur global unique](http://en.wikipedia.org/wiki/Globally_Unique_Identifier) , ainsi que le chemin d’accès au fichier de base de données.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-180">Databases in the `App_Data` folder typically have a database name that includes a [globally unique identifier](http://en.wikipedia.org/wiki/Globally_Unique_Identifier) along with the path to the database file.</span></span> <span data-ttu-id="b9ed5-181">Nous devons déterminer ce nom de base de données afin d’ajouter le schéma de services d’application via `aspnet_regsql.exe`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-181">We need to determine this database name in order to add the application services schema through `aspnet_regsql.exe`.</span></span>

<span data-ttu-id="b9ed5-182">Pour déterminer le nom de la base de données le plus simple consiste à examiner via SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-182">The easiest way to ascertain the database name is to examine it through SQL Server Management Studio.</span></span> <span data-ttu-id="b9ed5-183">SQL Server Management Studio fournit une interface graphique pour la gestion des bases de données SQL Server 2005, mais il n’est pas fourni avec le Express Edition de SQL Server 2005.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-183">SQL Server Management Studio provides a graphical interface for managing SQL Server 2005 databases, but it does not ship with the Express Edition of SQL Server 2005.</span></span> <span data-ttu-id="b9ed5-184">La bonne nouvelle est que [vous pouvez télécharger](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en) le libre Express Edition de SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-184">The good news is that [you can download](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en) the free Express Edition of SQL Server Management Studio.</span></span>

> [!NOTE]
> <span data-ttu-id="b9ed5-185">Si vous avez également une version non - Express Edition de SQL Server 2005 est installé sur votre ordinateur de bureau, la version complète de Management Studio est probablement installée.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-185">If you also have a non-Express Edition version of SQL Server 2005 installed on your desktop then the full version of Management Studio is likely installed.</span></span> <span data-ttu-id="b9ed5-186">Vous pouvez utiliser la version complète pour déterminer le nom de la base de données, suivant les mêmes étapes, comme indiqué ci-dessous pour l’édition Express.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-186">You can use the full version to determine the database name, following the same steps as outlined below for the Express Edition.</span></span>


<span data-ttu-id="b9ed5-187">Commencez par fermer Visual Studio pour vous assurer que tous les verrous imposées par Visual Studio sur le fichier de base de données sont fermées.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-187">Start by closing Visual Studio to ensure that any locks imposed by Visual Studio on the database file are closed.</span></span> <span data-ttu-id="b9ed5-188">Ensuite, lancez SQL Server Management Studio et connectez-vous à la `localhost\InstanceName` base de données pour SQL Server 2005 Express Edition.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-188">Next, launch SQL Server Management Studio and connect to the `localhost\InstanceName` database for SQL Server 2005 Express Edition.</span></span> <span data-ttu-id="b9ed5-189">Comme indiqué précédemment, il est probable qu’est le nom d’instance est `SQLExpress`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-189">As noted earlier, chances are the instance name is `SQLExpress`.</span></span> <span data-ttu-id="b9ed5-190">Pour l’option d’authentification, sélectionnez l’authentification Windows.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-190">For the Authentication option, select Windows Authentication.</span></span>


[![C<span data-ttu-id="b9ed5-191">onnecter à SQL Server 2005 Express Edition Instance]</span><span class="sxs-lookup"><span data-stu-id="b9ed5-191">onnect to the SQL Server 2005 Express Edition Instance]</span></span>(creating-the-membership-schema-in-sql-server-cs/_static/image8.png)](creating-the-membership-schema-in-sql-server-cs/_static/image7.png)

<span data-ttu-id="b9ed5-192">**Figure 3**: Se connecter à SQL Server 2005 Express Edition Instance ([cliquez pour afficher l’image en taille réelle](creating-the-membership-schema-in-sql-server-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="b9ed5-192">**Figure 3**: Connect to the SQL Server 2005 Express Edition Instance ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image9.png))</span></span>


<span data-ttu-id="b9ed5-193">Après vous être connecté à l’instance de SQL Server 2005 Express Edition, Management Studio affiche les dossiers pour les bases de données, les paramètres de sécurité, les objets de serveur et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-193">After connecting to the SQL Server 2005 Express Edition instance, Management Studio displays folders for the Databases, the Security settings, the Server Objects, and so on.</span></span> <span data-ttu-id="b9ed5-194">Si vous développez l’onglet bases de données vous verrez que le `SecurityTutorials.mdf` base de données est *pas* inscrits dans l’instance de la base de données - nous avons besoin attacher la base de données tout d’abord.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-194">If you expand the Databases tab you will see that the `SecurityTutorials.mdf` database is *not* registered in the database instance - we need to attach the database first.</span></span>

<span data-ttu-id="b9ed5-195">Avec le bouton droit sur le dossier bases de données et cliquez sur Attacher dans le menu contextuel.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-195">Right-click on the Databases folder and choose Attach from the context menu.</span></span> <span data-ttu-id="b9ed5-196">Cela affiche la boîte de dialogue Attacher les bases de données.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-196">This will display the Attach Databases dialog box.</span></span> <span data-ttu-id="b9ed5-197">À ce stade, cliquez sur le bouton Ajouter, accédez à la `SecurityTutorials.mdf` de base de données, puis cliquez sur OK.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-197">From here, click the Add button, browse to the `SecurityTutorials.mdf` database, and click OK.</span></span> <span data-ttu-id="b9ed5-198">Figure 4 montre la boîte de dialogue Attacher les bases de données après le `SecurityTutorials.mdf` base de données a été sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-198">Figure 4 shows the Attach Databases dialog box after the `SecurityTutorials.mdf` database has been selected.</span></span> <span data-ttu-id="b9ed5-199">La figure 5 illustre l’Explorateur d’objets de Management Studio une fois que la base de données a été correctement attachée.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-199">Figure 5 shows Management Studio's Object Explorer after the database has been successfully attached.</span></span>


[![A<span data-ttu-id="b9ed5-200">attac la base de données SecurityTutorials.mdf]</span><span class="sxs-lookup"><span data-stu-id="b9ed5-200">ttach the SecurityTutorials.mdf Database]</span></span>(creating-the-membership-schema-in-sql-server-cs/_static/image11.png)](creating-the-membership-schema-in-sql-server-cs/_static/image10.png)

<span data-ttu-id="b9ed5-201">**Figure 4**: Attacher le `SecurityTutorials.mdf` base de données ([cliquez pour afficher l’image en taille réelle](creating-the-membership-schema-in-sql-server-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="b9ed5-201">**Figure 4**: Attach the `SecurityTutorials.mdf` Database ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image12.png))</span></span>


[![T<span data-ttu-id="b9ed5-202">Il SecurityTutorials.mdf base de données apparaît dans le dossier de bases de données]</span><span class="sxs-lookup"><span data-stu-id="b9ed5-202">he SecurityTutorials.mdf Database Appears in the Databases Folder]</span></span>(creating-the-membership-schema-in-sql-server-cs/_static/image14.png)](creating-the-membership-schema-in-sql-server-cs/_static/image13.png)

<span data-ttu-id="b9ed5-203">**Figure 5**: Le `SecurityTutorials.mdf` base de données apparaît dans le dossier de bases de données ([cliquez pour afficher l’image en taille réelle](creating-the-membership-schema-in-sql-server-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="b9ed5-203">**Figure 5**: The `SecurityTutorials.mdf` Database Appears in the Databases Folder ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image15.png))</span></span>


<span data-ttu-id="b9ed5-204">Comme le montre la Figure 5, le `SecurityTutorials.mdf` base de données a un nom plutôt abstruse.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-204">As Figure 5 shows, the `SecurityTutorials.mdf` database has a rather abstruse name.</span></span> <span data-ttu-id="b9ed5-205">Nous allons le modifier pour une plus facile à mémoriser (et plus facile à taper) nom.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-205">Let's change it to a more memorable (and easier to type) name.</span></span> <span data-ttu-id="b9ed5-206">Avec le bouton droit sur la base de données, cliquez sur Renommer dans le menu contextuel et renommez-le `SecurityTutorialsDatabase`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-206">Right-click on the database, choose Rename from the context menu, and rename it `SecurityTutorialsDatabase`.</span></span> <span data-ttu-id="b9ed5-207">Cela ne modifie pas le nom de fichier, simplement le nom de la base de données utilise pour s’identifier sur SQL Server.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-207">This does not change the filename, just the name the database uses to identify itself to SQL Server.</span></span>


[![R<span data-ttu-id="b9ed5-208">nommer la base de données à SecurityTutorialsDatabase]</span><span class="sxs-lookup"><span data-stu-id="b9ed5-208">ename the Database to SecurityTutorialsDatabase]</span></span>(creating-the-membership-schema-in-sql-server-cs/_static/image17.png)](creating-the-membership-schema-in-sql-server-cs/_static/image16.png)

<span data-ttu-id="b9ed5-209">**Figure 6**: Renommer la base de données `SecurityTutorialsDatabase`([cliquez pour afficher l’image en taille réelle](creating-the-membership-schema-in-sql-server-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="b9ed5-209">**Figure 6**: Rename the Database to `SecurityTutorialsDatabase`([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image18.png))</span></span>


<span data-ttu-id="b9ed5-210">À ce stade nous savons que les noms de serveur et base de données pour le `SecurityTutorials.mdf` fichier de base de données : `localhost\InstanceName` et `SecurityTutorialsDatabase`, respectivement.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-210">At this point we know the server and database names for the `SecurityTutorials.mdf` database file: `localhost\InstanceName` and `SecurityTutorialsDatabase`, respectively.</span></span> <span data-ttu-id="b9ed5-211">Nous sommes maintenant prêts à installer les services d’application via le `aspnet_regsql.exe` outil.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-211">We are now ready to install the application services through the `aspnet_regsql.exe` tool.</span></span>

### <a name="installing-the-application-services"></a><span data-ttu-id="b9ed5-212">L’installation des Services d’Application</span><span class="sxs-lookup"><span data-stu-id="b9ed5-212">Installing the Application Services</span></span>

<span data-ttu-id="b9ed5-213">Pour lancer le `aspnet_regsql.exe` outil, accédez au menu Démarrer et choisissez Exécuter.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-213">To launch the `aspnet_regsql.exe` tool, go to the start menu and choose Run.</span></span> <span data-ttu-id="b9ed5-214">Entrez `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\aspnet_regsql.exe` dans la zone de texte et cliquez sur OK.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-214">Enter `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\aspnet_regsql.exe` into the textbox and click OK.</span></span> <span data-ttu-id="b9ed5-215">Vous pouvez également utiliser l’Explorateur Windows pour Explorer le dossier approprié et double-cliquez sur le `aspnet_regsql.exe` fichier.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-215">Alternatively, you can use Windows Explorer to drill down to the appropriate folder and double-click the `aspnet_regsql.exe` file.</span></span> <span data-ttu-id="b9ed5-216">Chacune de ces approches ne supprime pas les mêmes résultats.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-216">Either approach will net the same results.</span></span>

<span data-ttu-id="b9ed5-217">En cours d’exécution le `aspnet_regsql.exe` outil sans argument de ligne de commande lance l’interface utilisateur graphique d’Assistant ASP.NET SQL Server.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-217">Running the `aspnet_regsql.exe` tool without any command line arguments launches the ASP.NET SQL Server Setup Wizard graphical user interface.</span></span> <span data-ttu-id="b9ed5-218">L’Assistant rend plus facile ajouter ou supprimer les services d’application ASP.NET sur une base de données spécifiée.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-218">The wizard makes it easy to add or remove the ASP.NET application services on a specified database.</span></span> <span data-ttu-id="b9ed5-219">Le premier écran de l’Assistant, illustrée à la Figure 7, décrit l’objectif de l’outil.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-219">The first screen of the wizard, shown in Figure 7, describes the purpose of the tool.</span></span>


[![U<span data-ttu-id="b9ed5-220">se l’ASP.NET SQL Server le programme d’installation Assistant apporte à ajouter le schéma d’abonnement]</span><span class="sxs-lookup"><span data-stu-id="b9ed5-220">se the ASP.NET SQL Server Setup Wizard Makes to Add the Membership Schema]</span></span>(creating-the-membership-schema-in-sql-server-cs/_static/image20.png)](creating-the-membership-schema-in-sql-server-cs/_static/image19.png)

<span data-ttu-id="b9ed5-221">**Figure 7**: Permet du ASP.NET SQL Server Configuration Assistant permet d’ajouter le schéma d’abonnement ([cliquez pour afficher l’image en taille réelle](creating-the-membership-schema-in-sql-server-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="b9ed5-221">**Figure 7**: Use the ASP.NET SQL Server Setup Wizard Makes to Add the Membership Schema ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image21.png))</span></span>


<span data-ttu-id="b9ed5-222">La deuxième étape de l’Assistant vous demande de nous si nous souhaitons ajouter les services d’application ou les supprimer.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-222">The second step in the wizard asks us whether we want to add the application services or remove them.</span></span> <span data-ttu-id="b9ed5-223">Étant donné que nous souhaitons ajouter des tables, vues et procédures stockées nécessaires pour le `SqlMembershipProvider`, choisissez la configuration de SQL Server pour l’option de services d’application.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-223">Since we want to add the tables, views, and stored procedures necessary for the `SqlMembershipProvider`, choose the Configure SQL Server for application services option.</span></span> <span data-ttu-id="b9ed5-224">Ultérieurement, si vous souhaitez supprimer ce schéma de votre base de données, réexécutez cet Assistant, mais à la place choisir les informations de services d’application supprimer à partir d’une option de base de données existante.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-224">Later, if you want to remove this schema from your database, re-run this wizard, but instead choose the Remove application services information from an existing database option.</span></span>


[![C<span data-ttu-id="b9ed5-225">hoisir le configurer SQL Server pour l’Option de Services d’Application]</span><span class="sxs-lookup"><span data-stu-id="b9ed5-225">hoose the Configure SQL Server for Application Services Option]</span></span>(creating-the-membership-schema-in-sql-server-cs/_static/image23.png)](creating-the-membership-schema-in-sql-server-cs/_static/image22.png)

<span data-ttu-id="b9ed5-226">**Figure 8**: Choisissez la configuration de SQL Server pour l’Option de Services d’Application ([cliquez pour afficher l’image en taille réelle](creating-the-membership-schema-in-sql-server-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="b9ed5-226">**Figure 8**: Choose the Configure SQL Server for Application Services Option ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image24.png))</span></span>


<span data-ttu-id="b9ed5-227">La troisième étape invite à entrer les informations de base de données : le nom du serveur, les informations d’authentification et le nom de la base de données.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-227">The third step prompts for the database information: the server name, authentication information, and the database name.</span></span> <span data-ttu-id="b9ed5-228">Si vous avez suivi ce didacticiel et que vous avez ajouté le `SecurityTutorials.mdf` à la base de données `App_Data`, attaché à `localhost\InstanceName`et renommé en `SecurityTutorialsDatabase`, puis utilisez les valeurs suivantes :</span><span class="sxs-lookup"><span data-stu-id="b9ed5-228">If you have been following along with this tutorial and have added the `SecurityTutorials.mdf` database to `App_Data`, attached it to `localhost\InstanceName`, and renamed it to `SecurityTutorialsDatabase`, then use the following values:</span></span>

- <span data-ttu-id="b9ed5-229">Serveur :</span><span class="sxs-lookup"><span data-stu-id="b9ed5-229">Server:</span></span> `localhost\InstanceName`
- <span data-ttu-id="b9ed5-230">Authentification Windows</span><span class="sxs-lookup"><span data-stu-id="b9ed5-230">Windows authentication</span></span>
- <span data-ttu-id="b9ed5-231">Base de données :</span><span class="sxs-lookup"><span data-stu-id="b9ed5-231">Database:</span></span> `SecurityTutorialsDatabase`


[![E<span data-ttu-id="b9ed5-232">Entrez les informations de base de données]</span><span class="sxs-lookup"><span data-stu-id="b9ed5-232">nter the Database Information]</span></span>(creating-the-membership-schema-in-sql-server-cs/_static/image26.png)](creating-the-membership-schema-in-sql-server-cs/_static/image25.png)

<span data-ttu-id="b9ed5-233">**Figure 9**: Entrez les informations de base de données ([cliquez pour afficher l’image en taille réelle](creating-the-membership-schema-in-sql-server-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="b9ed5-233">**Figure 9**: Enter the Database Information ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image27.png))</span></span>


<span data-ttu-id="b9ed5-234">Après avoir entré les informations de base de données, cliquez sur Suivant.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-234">After entering the database information, click Next.</span></span> <span data-ttu-id="b9ed5-235">La dernière étape résume les étapes à entreprendre.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-235">The final step summarizes the steps that will be taken.</span></span> <span data-ttu-id="b9ed5-236">Cliquez sur Suivant pour installer les services d’application, puis sur Terminer pour terminer l’Assistant.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-236">Click Next to install the application services and then Finish to complete the wizard.</span></span>

> [!NOTE]
> <span data-ttu-id="b9ed5-237">Si vous utilisez Management Studio pour attacher la base de données et renommez le fichier de base de données, veillez à détacher la base de données et fermez Management Studio avant de rouvrir Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-237">If you used Management Studio to attach the database and rename the database file, be sure to detach the database and close Management Studio before reopening Visual Studio.</span></span> <span data-ttu-id="b9ed5-238">Pour détacher le `SecurityTutorialsDatabase` de base de données, avec le bouton droit sur le nom de la base de données et, dans le menu tâches, cliquez sur Détacher.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-238">To detach the `SecurityTutorialsDatabase` database, right-click on the database name and, from the Tasks menu, choose Detach.</span></span>


<span data-ttu-id="b9ed5-239">À l’achèvement de l’Assistant, revenez à Visual Studio et accédez à l’Explorateur de base de données.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-239">Upon completion of the wizard, return to Visual Studio and navigate to the Database Explorer.</span></span> <span data-ttu-id="b9ed5-240">Développez le dossier Tables.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-240">Expand the Tables folder.</span></span> <span data-ttu-id="b9ed5-241">Vous devez voir une série de tables dont les noms commencent par le préfixe `aspnet_`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-241">You should see a series of tables whose names start with the prefix `aspnet_`.</span></span> <span data-ttu-id="b9ed5-242">De même, vous pouvez trouver une variété de vues et procédures stockées dans les dossiers de vues et procédures stockées.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-242">Likewise, a variety of views and stored procedures can be found under the Views and Stored Procedures folders.</span></span> <span data-ttu-id="b9ed5-243">Ces objets de base de données constituent le schéma de services d’application.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-243">These database objects make up the application services schema.</span></span> <span data-ttu-id="b9ed5-244">Nous allons examiner les objets de base de données d’appartenance et de rôle spécifique à l’étape 3.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-244">We will examine the membership- and role-specific database objects in Step 3.</span></span>


[![A <span data-ttu-id="b9ed5-245">Plusieurs Tables, vues et procédures stockées ont été ajoutées à la base de données]</span><span class="sxs-lookup"><span data-stu-id="b9ed5-245">Variety of Tables, Views, and Stored Procedures Have Been Added to the Database]</span></span>(creating-the-membership-schema-in-sql-server-cs/_static/image29.png)](creating-the-membership-schema-in-sql-server-cs/_static/image28.png)

<span data-ttu-id="b9ed5-246">**Figure 10**: Une variété de Tables, vues et stockées procédures ont été ajoutées à la base de données ([cliquez pour afficher l’image en taille réelle](creating-the-membership-schema-in-sql-server-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="b9ed5-246">**Figure 10**: A Variety of Tables, Views, and Stored Procedures Have Been Added to the Database ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image30.png))</span></span>


> [!NOTE]
> <span data-ttu-id="b9ed5-247">Le `aspnet_regsql.exe` interface utilisateur graphique de l’outil installe le schéma de services d’application dans son intégralité.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-247">The `aspnet_regsql.exe` tool's graphical user interface installs the entire application services schema.</span></span> <span data-ttu-id="b9ed5-248">Mais lors de l’exécution `aspnet_regsql.exe` à partir de la ligne de commande, vous pouvez spécifier quelle application particulière services de composants pour installer (ou supprimer).</span><span class="sxs-lookup"><span data-stu-id="b9ed5-248">But when executing `aspnet_regsql.exe` from the command-line you can specify what particular application services components to install (or remove).</span></span> <span data-ttu-id="b9ed5-249">Par conséquent, si vous souhaitez ajouter uniquement les tables, vues, nécessaire pour des procédures stockées et les `SqlMembershipProvider` et `SqlRoleProvider` fournisseurs, exécutez `aspnet_regsql.exe` à partir de la ligne de commande.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-249">Therefore, if you want to add just the tables, views, and stored procedures necessary for the `SqlMembershipProvider` and `SqlRoleProvider` providers, run `aspnet_regsql.exe` from the command-line.</span></span> <span data-ttu-id="b9ed5-250">Ou bien, vous pouvez exécuter manuellement le sous-ensemble de T-SQL créer les scripts utilisés par `aspnet_regsql.exe`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-250">Alternatively, you can manually run the appropriate subset of T-SQL create scripts used by `aspnet_regsql.exe`.</span></span> <span data-ttu-id="b9ed5-251">Ces scripts se trouvent dans le `WINDIR%\Microsoft.Net\Framework\v2.0.50727\` dossier avec des noms tels que `InstallCommon.sql`,`InstallMembership.sql`,`InstallRoles.sql`, `InstallProfile.sql`,`InstallSqlState.sql`, et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-251">These scripts are located in the `WINDIR%\Microsoft.Net\Framework\v2.0.50727\` folder with names like `InstallCommon.sql`,`InstallMembership.sql`,`InstallRoles.sql`, `InstallProfile.sql`,`InstallSqlState.sql`, and so on.</span></span>


<span data-ttu-id="b9ed5-252">À ce stade, nous avons créé les objets de base de données requis par le `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-252">At this point we have created the database objects needed by the `SqlMembershipProvider`.</span></span> <span data-ttu-id="b9ed5-253">Toutefois, nous avons besoin indiquer à l’infrastructure de l’appartenance qu’il doit utiliser le `SqlMembershipProvider` (versus, par exemple, le `ActiveDirectoryMembershipProvider`) et que le `SqlMembershipProvider` doit utiliser le `SecurityTutorials` base de données.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-253">However, we still need to instruct the Membership framework that it should use the `SqlMembershipProvider` (versus, say, the `ActiveDirectoryMembershipProvider`) and that the `SqlMembershipProvider` should use the `SecurityTutorials` database.</span></span> <span data-ttu-id="b9ed5-254">Nous allons examiner comment spécifier quel fournisseur à utiliser et comment personnaliser les paramètres du fournisseur sélectionné à l’étape 4.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-254">We'll look at how to specify what provider to use and how to customize the selected provider's settings in Step 4.</span></span> <span data-ttu-id="b9ed5-255">Mais tout d’abord, jetons un œil plus approfondie sur les objets de base de données qui viennent d’être créés.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-255">But first, let's take a deeper look at the database objects that were just created.</span></span>

## <a name="step-3-a-look-at-the-schemas-core-tables"></a><span data-ttu-id="b9ed5-256">Étape 3 : Un coup de œil sur les Tables de base du schéma</span><span class="sxs-lookup"><span data-stu-id="b9ed5-256">Step 3: A Look at the Schema's Core Tables</span></span>

<span data-ttu-id="b9ed5-257">Lorsque vous travaillez avec les infrastructures d’appartenance et des rôles dans une application ASP.NET, les détails d’implémentation sont encapsulées par le fournisseur.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-257">When working with the Membership and Roles frameworks in an ASP.NET application, the implementation details are encapsulated by the provider.</span></span> <span data-ttu-id="b9ed5-258">Dans les futures didacticiels nous devra interagir avec ces infrastructures par le biais du .NET Framework `Membership` et `Roles` classes.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-258">In future tutorials we will interface with these frameworks via the .NET Framework's `Membership` and `Roles` classes.</span></span> <span data-ttu-id="b9ed5-259">Lorsque vous utilisez ces API de haut niveau nous n’avez pas besoin de nous-mêmes concernent avec les détails de bas niveau, tels que les requêtes sont exécutées ou quelles tables sont modifiées par le `SqlMembershipProvider` et `SqlRoleProvider`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-259">When using these high-level APIs we do not need to concern ourselves with the low-level details, like what queries are executed or what tables are modified by the `SqlMembershipProvider` and `SqlRoleProvider`.</span></span>

<span data-ttu-id="b9ed5-260">Pour cette raison, nous pourrions utiliser en toute confiance les infrastructures d’appartenance et des rôles sans avoir exploré le schéma de base de données créée à l’étape 2.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-260">Given this, we could confidently use the Membership and Roles frameworks without having explored the database schema created in Step 2.</span></span> <span data-ttu-id="b9ed5-261">Toutefois, lors de la création de tables pour stocker les données d’application nous pouvons besoin créer des entités qui se rapportent aux utilisateurs ou rôles.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-261">However, when creating the tables to store application data we may need to create entities that relate to users or roles.</span></span> <span data-ttu-id="b9ed5-262">Vous pour devez avoir une connaissance de la `SqlMembershipProvider` et `SqlRoleProvider` schémas lors de l’établissement étrangère clé contraintes entre les tables de données d’application et les tables créées à l’étape 2.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-262">It helps to have a familiarity with the `SqlMembershipProvider` and `SqlRoleProvider` schemas when establishing foreign key constraints between the application data tables and those tables created in Step 2.</span></span> <span data-ttu-id="b9ed5-263">En outre, dans certaines circonstances rares nous devons interagir avec l’utilisateur et rôle stocke directement au niveau de la base de données (plutôt que par le `Membership` ou `Roles` classes).</span><span class="sxs-lookup"><span data-stu-id="b9ed5-263">Moreover, in certain rare circumstances we may need to interface with the user and role stores directly at the database level (instead of through the `Membership` or `Roles` classes).</span></span>

### <a name="partitioning-the-user-store-into-applications"></a><span data-ttu-id="b9ed5-264">Partitionnement Store de l’utilisateur dans des Applications</span><span class="sxs-lookup"><span data-stu-id="b9ed5-264">Partitioning the User Store Into Applications</span></span>

<span data-ttu-id="b9ed5-265">Les frameworks d’appartenance et rôles soient conçus pour un seul magasin de l’utilisateur et le rôle peut être partagé entre différentes applications.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-265">The Membership and Roles frameworks are designed such that a single user and role store can be shared among many different applications.</span></span> <span data-ttu-id="b9ed5-266">Une application ASP.NET qui utilise les infrastructures d’appartenance ou de rôles doit spécifier quelle partition d’application à utiliser.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-266">An ASP.NET application that uses the Membership or Roles frameworks must specify what application partition to use.</span></span> <span data-ttu-id="b9ed5-267">En bref, plusieurs applications web peuvent utiliser les mêmes magasins d’utilisateur et le rôle.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-267">In short, multiple web applications can use the same user and role stores.</span></span> <span data-ttu-id="b9ed5-268">Figure 11 illustre l’utilisateur et le rôle des magasins sont partitionnés en trois applications : HRSite, CustomerSite et SalesSite.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-268">Figure 11 depicts user and role stores that are partitioned into three applications: HRSite, CustomerSite, and SalesSite.</span></span> <span data-ttu-id="b9ed5-269">Ces applications de trois web ont leurs propres utilisateurs uniques et les rôles, mais ils tous les physiquement stockent leurs informations de compte et le rôle d’utilisateur dans les mêmes tables de base de données.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-269">These three web applications each have their own unique users and roles, yet they all physically store their user account and role information in the same database tables.</span></span>


[![U<span data-ttu-id="b9ed5-270">ser comptes peuvent être partitionnées entre plusieurs Applications]</span><span class="sxs-lookup"><span data-stu-id="b9ed5-270">ser Accounts May Be Partitioned Across Multiple Applications]</span></span>(creating-the-membership-schema-in-sql-server-cs/_static/image32.png)](creating-the-membership-schema-in-sql-server-cs/_static/image31.png)

<span data-ttu-id="b9ed5-271">**Figure 11**: Comptes peuvent être partitionnées entre plusieurs Applications utilisateur ([cliquez pour afficher l’image en taille réelle](creating-the-membership-schema-in-sql-server-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="b9ed5-271">**Figure 11**: User Accounts May Be Partitioned Across Multiple Applications ([Click to view full-size image](creating-the-membership-schema-in-sql-server-cs/_static/image33.png))</span></span>


<span data-ttu-id="b9ed5-272">Le `aspnet_Applications` table est ce qui définit ces partitions.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-272">The `aspnet_Applications` table is what defines these partitions.</span></span> <span data-ttu-id="b9ed5-273">Chaque application qui utilise la base de données pour stocker les informations de compte d’utilisateur est représentée par une ligne dans cette table.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-273">Each application that uses the database to store user account information is represented by a row in this table.</span></span> <span data-ttu-id="b9ed5-274">Le `aspnet_Applications` table comporte quatre colonnes : `ApplicationId`, `ApplicationName`, `LoweredApplicationName`, et `Description`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-274">The `aspnet_Applications` table has four columns: `ApplicationId`, `ApplicationName`, `LoweredApplicationName`, and `Description`.</span></span> `ApplicationId` <span data-ttu-id="b9ed5-275">est de type [ `uniqueidentifier` ](https://msdn.microsoft.com/library/ms187942.aspx) et est la clé primaire de la table ; `ApplicationName` fournit un nom convivial unique pour chaque application.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-275">is of type [`uniqueidentifier`](https://msdn.microsoft.com/library/ms187942.aspx) and is the table's primary key; `ApplicationName` provides a unique human-friendly name for each application.</span></span>

<span data-ttu-id="b9ed5-276">Les autres tables d’appartenance et de rôle liés à un lien vers le `ApplicationId` champ `aspnet_Applications`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-276">The other Membership- and Role-related tables link back to the `ApplicationId` field in `aspnet_Applications`.</span></span> <span data-ttu-id="b9ed5-277">Par exemple, le `aspnet_Users` table, qui contient un enregistrement pour chaque compte d’utilisateur, a un `ApplicationId` champ de clé étrangère ; même chose pour le `aspnet_Roles` table.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-277">For example, the `aspnet_Users` table, which contains a record for each user account, has an `ApplicationId` foreign key field; ditto for the `aspnet_Roles` table.</span></span> <span data-ttu-id="b9ed5-278">Le `ApplicationId` champ dans ces tables spécifie la partition d’application le compte d’utilisateur ou rôle appartient.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-278">The `ApplicationId` field in these tables specifies the application partition the user account or role belongs to.</span></span>

### <a name="storing-user-account-information"></a><span data-ttu-id="b9ed5-279">Stockage des informations de compte d’utilisateur</span><span class="sxs-lookup"><span data-stu-id="b9ed5-279">Storing User Account Information</span></span>

<span data-ttu-id="b9ed5-280">Informations de compte utilisateur sont hébergées dans deux tables : `aspnet_Users` et `aspnet_Membership`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-280">User account information is housed in two tables: `aspnet_Users` and `aspnet_Membership`.</span></span> <span data-ttu-id="b9ed5-281">Le `aspnet_Users` table contient des champs qui contiennent les informations de compte utilisateur essentiels.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-281">The `aspnet_Users` table contains fields that hold the essential user account information.</span></span> <span data-ttu-id="b9ed5-282">Les trois colonnes les plus pertinents sont :</span><span class="sxs-lookup"><span data-stu-id="b9ed5-282">The three most pertinent columns are:</span></span>

- `UserId`
- `UserName`
- `ApplicationId`

`UserId` <span data-ttu-id="b9ed5-283">est la clé primaire (et de type `uniqueidentifier`).</span><span class="sxs-lookup"><span data-stu-id="b9ed5-283">is the primary key (and of type `uniqueidentifier`).</span></span> `UserName` <span data-ttu-id="b9ed5-284">est de type `nvarchar(256)` et, ainsi que le mot de passe, informations d’identification de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-284">is of type `nvarchar(256)` and, along with the password, makes up the user's credentials.</span></span> <span data-ttu-id="b9ed5-285">(Un mot de passe utilisateur est stockée dans le `aspnet_Membership` table.) `ApplicationId` lie le compte d’utilisateur à une application particulière dans `aspnet_Applications`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-285">(A user's password is stored in the `aspnet_Membership` table.) `ApplicationId` links the user account to a particular application in `aspnet_Applications`.</span></span> <span data-ttu-id="b9ed5-286">Il existe un composite [ `UNIQUE` contrainte](https://msdn.microsoft.com/library/ms191166.aspx) sur le `UserName` et `ApplicationId` colonnes.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-286">There is a composite [`UNIQUE` constraint](https://msdn.microsoft.com/library/ms191166.aspx) on the `UserName` and `ApplicationId` columns.</span></span> <span data-ttu-id="b9ed5-287">Cela garantit que dans une application donnée, chaque nom d’utilisateur est unique, mais elle permet de la même `UserName` à utiliser dans différentes applications.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-287">This ensures that in a given application each UserName is unique, yet it allows for the same `UserName` to be used in different applications.</span></span>

<span data-ttu-id="b9ed5-288">Le `aspnet_Membership` table inclut des informations de compte d’utilisateur supplémentaires, telles que le mot de passe utilisateur, adresse de messagerie, la dernière date de connexion et heure et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-288">The `aspnet_Membership` table includes additional user account information, like the user's password, email address, the last login date and time, and so forth.</span></span> <span data-ttu-id="b9ed5-289">Il existe une correspondance univoque entre les enregistrements dans le `aspnet_Users` et `aspnet_Membership` tables.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-289">There is a one-to-one correspondence between records in the `aspnet_Users` and `aspnet_Membership` tables.</span></span> <span data-ttu-id="b9ed5-290">Cette relation est assurée par le `UserId` champ `aspnet_Membership`, qui sert de clé primaire de la table.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-290">This relationship is ensured by the `UserId` field in `aspnet_Membership`, which serves as the table's primary key.</span></span> <span data-ttu-id="b9ed5-291">Comme le `aspnet_Users` table, `aspnet_Membership` inclut un `ApplicationId` champ qui lie ces informations à une partition d’application particulière.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-291">Like the `aspnet_Users` table, `aspnet_Membership` includes an `ApplicationId` field that ties this information to a particular application partition.</span></span>

### <a name="securing-passwords"></a><span data-ttu-id="b9ed5-292">Sécurisation des mots de passe</span><span class="sxs-lookup"><span data-stu-id="b9ed5-292">Securing Passwords</span></span>

<span data-ttu-id="b9ed5-293">Informations de mot de passe sont stockées dans le `aspnet_Membership` table.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-293">Password information is stored in the `aspnet_Membership` table.</span></span> <span data-ttu-id="b9ed5-294">Le `SqlMembershipProvider` permet des mots de passe soient stockés dans la base de données en utilisant l’une des trois techniques suivantes :</span><span class="sxs-lookup"><span data-stu-id="b9ed5-294">The `SqlMembershipProvider` allows for passwords to be stored in the database using one of the following three techniques:</span></span>

- <span data-ttu-id="b9ed5-295">**Effacer** -le mot de passe est stocké dans la base de données en tant que texte brut.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-295">**Clear** - the password is stored in the database as plain-text.</span></span> <span data-ttu-id="b9ed5-296">Je déconseille fortement à l’aide de cette option.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-296">I strongly discourage using this option.</span></span> <span data-ttu-id="b9ed5-297">Si la base de données est compromise - qu’il s’agisse par un pirate qui recherche une porte dérobée ou un employé mécontent qui a accès de base de données - informations d’identification de chaque utilisateur unique sont présents pour l’adoption.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-297">If the database is compromised - be it by a hacker who finds a back door or a disgruntled employee who has database access - every single user's credentials are there for the taking.</span></span>
- <span data-ttu-id="b9ed5-298">**Haché** -les mots de passe sont hachés à l’aide d’un algorithme de hachage à sens unique et une valeur salt générée de manière aléatoire.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-298">**Hashed** - passwords are hashed using a one-way hash algorithm and a randomly generated salt value.</span></span> <span data-ttu-id="b9ed5-299">Cette valeur hachée (ainsi que la valeur salt) est stockée dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-299">This hashed value (along with the salt) is stored in the database.</span></span>
- <span data-ttu-id="b9ed5-300">**Chiffré** -une version chiffrée du mot de passe est stockée dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-300">**Encrypted** - an encrypted version of the password is stored in the database.</span></span>

<span data-ttu-id="b9ed5-301">La technique de stockage de mot de passe utilisée varie selon le `SqlMembershipProvider` paramètres spécifiés dans `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-301">The password storage technique used depends on the `SqlMembershipProvider` settings specified in `Web.config`.</span></span> <span data-ttu-id="b9ed5-302">Nous allons examiner de personnalisation de le `SqlMembershipProvider` paramètres à l’étape 4.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-302">We will look at customizing the `SqlMembershipProvider` settings in Step 4.</span></span> <span data-ttu-id="b9ed5-303">Le comportement par défaut consiste à stocker le hachage du mot de passe.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-303">The default behavior is to store the hash of the password.</span></span>

<span data-ttu-id="b9ed5-304">Les colonnes responsables pour stocker le mot de passe sont `Password`, `PasswordFormat`, et `PasswordSalt`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-304">The columns responsible for storing the password are `Password`, `PasswordFormat`, and `PasswordSalt`.</span></span> `PasswordFormat` <span data-ttu-id="b9ed5-305">est un champ de type `int` dont la valeur indique la technique utilisée pour stocker le mot de passe : 0 pour effacer ; 1 pour Hashed ; 2 pour le chiffrement.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-305">is a field of type `int` whose value indicates the technique used for storing the password: 0 for Clear; 1 for Hashed; 2 for Encrypted.</span></span> `PasswordSalt` <span data-ttu-id="b9ed5-306">est affecté à une chaîne générée de manière aléatoire, quel que soit la technique de stockage de mot de passe utilisée ; la valeur de `PasswordSalt` est utilisé uniquement lors du calcul du hachage du mot de passe.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-306">is assigned a randomly generated string regardless of the password storage technique used; the value of `PasswordSalt` is only used when computing the hash of the password.</span></span> <span data-ttu-id="b9ed5-307">Enfin, le `Password` colonne contient les données de mot de passe réel, que ce soit le mot de passe en texte brut, le hachage de mot de passe ou le mot de passe chiffré.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-307">Finally, the `Password` column contains the actual password data, be it the plain-text password, the hash of the password, or the encrypted password.</span></span>

<span data-ttu-id="b9ed5-308">Le tableau 1 illustre ce que ces trois colonnes peut se présenter comme pour les différentes techniques de stockage lorsque vous stockez le mot de passe MySecret !</span><span class="sxs-lookup"><span data-stu-id="b9ed5-308">Table 1 illustrates what these three columns might look like for the various storage techniques when storing the password MySecret!</span></span> <span data-ttu-id="b9ed5-309">.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-309">.</span></span>

| **<span data-ttu-id="b9ed5-310">Technique de stockage&lt;\_o3a\_p /&gt;</span><span class="sxs-lookup"><span data-stu-id="b9ed5-310">Storage Technique&lt;\_o3a\_p /&gt;</span></span>** | **<span data-ttu-id="b9ed5-311">Mot de passe&lt;\_o3a\_p /&gt;</span><span class="sxs-lookup"><span data-stu-id="b9ed5-311">Password&lt;\_o3a\_p /&gt;</span></span>** | **<span data-ttu-id="b9ed5-312">PasswordFormat&lt;\_o3a\_p /&gt;</span><span class="sxs-lookup"><span data-stu-id="b9ed5-312">PasswordFormat&lt;\_o3a\_p /&gt;</span></span>** | **<span data-ttu-id="b9ed5-313">PasswordSalt du client&lt;\_o3a\_p /&gt;</span><span class="sxs-lookup"><span data-stu-id="b9ed5-313">PasswordSalt&lt;\_o3a\_p /&gt;</span></span>** |
| --- | --- | --- | --- |
| <span data-ttu-id="b9ed5-314">Effacer</span><span class="sxs-lookup"><span data-stu-id="b9ed5-314">Clear</span></span> | <span data-ttu-id="b9ed5-315">MySecret!</span><span class="sxs-lookup"><span data-stu-id="b9ed5-315">MySecret!</span></span> | <span data-ttu-id="b9ed5-316">0</span><span class="sxs-lookup"><span data-stu-id="b9ed5-316">0</span></span> | <span data-ttu-id="b9ed5-317">tTnkPlesqissc2y2SMEygA==</span><span class="sxs-lookup"><span data-stu-id="b9ed5-317">tTnkPlesqissc2y2SMEygA==</span></span> |
| <span data-ttu-id="b9ed5-318">Haché</span><span class="sxs-lookup"><span data-stu-id="b9ed5-318">Hashed</span></span> | <span data-ttu-id="b9ed5-319">2oXm6sZHWbTHFgjgkGQsc2Ec9ZM=</span><span class="sxs-lookup"><span data-stu-id="b9ed5-319">2oXm6sZHWbTHFgjgkGQsc2Ec9ZM=</span></span> | <span data-ttu-id="b9ed5-320">1</span><span class="sxs-lookup"><span data-stu-id="b9ed5-320">1</span></span> | <span data-ttu-id="b9ed5-321">wFgjUfhdUFOCKQiI61vtiQ==</span><span class="sxs-lookup"><span data-stu-id="b9ed5-321">wFgjUfhdUFOCKQiI61vtiQ==</span></span> |
| <span data-ttu-id="b9ed5-322">Chiffré</span><span class="sxs-lookup"><span data-stu-id="b9ed5-322">Encrypted</span></span> | <span data-ttu-id="b9ed5-323">62RZgDvhxykkqsMchZ0Yly7HS6onhpaoCYaRxV8g0F4CW56OXUU3e7Inza9j9BKp</span><span class="sxs-lookup"><span data-stu-id="b9ed5-323">62RZgDvhxykkqsMchZ0Yly7HS6onhpaoCYaRxV8g0F4CW56OXUU3e7Inza9j9BKp</span></span> | <span data-ttu-id="b9ed5-324">2</span><span class="sxs-lookup"><span data-stu-id="b9ed5-324">2</span></span> | <span data-ttu-id="b9ed5-325">LSRzhGS/aa/oqAXGLHJNBw==</span><span class="sxs-lookup"><span data-stu-id="b9ed5-325">LSRzhGS/aa/oqAXGLHJNBw==</span></span> |

<span data-ttu-id="b9ed5-326">**Tableau 1**: Exemples de valeurs pour les champs liés au mot de passe lorsque vous stockez le mot de passe MySecret !</span><span class="sxs-lookup"><span data-stu-id="b9ed5-326">**Table 1**: Example Values for the Password-Related Fields When Storing the Password MySecret!</span></span>

> [!NOTE]
> <span data-ttu-id="b9ed5-327">Le chiffrement particulier ou un algorithme de hachage utilisé par le `SqlMembershipProvider` est déterminée par les paramètres dans le `<machineKey>` élément.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-327">The particular encryption or hashing algorithm used by the `SqlMembershipProvider` is determined by the settings in the `<machineKey>` element.</span></span> <span data-ttu-id="b9ed5-328">Nous avons abordé cet élément de configuration à l’étape 3 de la <a id="Tutorial3"> </a> [ *Configuration de l’authentification de formulaires et des sujets avancés* ](../introduction/forms-authentication-configuration-and-advanced-topics-cs.md) didacticiel.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-328">We discussed this configuration element in Step 3 of the <a id="Tutorial3"></a>[*Forms Authentication Configuration and Advanced Topics*](../introduction/forms-authentication-configuration-and-advanced-topics-cs.md) tutorial.</span></span>


### <a name="storing-roles-and-role-associations"></a><span data-ttu-id="b9ed5-329">Stockage des rôles et les Associations de rôle</span><span class="sxs-lookup"><span data-stu-id="b9ed5-329">Storing Roles and Role Associations</span></span>

<span data-ttu-id="b9ed5-330">L’infrastructure de rôles permet aux développeurs de définir un ensemble de rôles et de spécifier quels utilisateurs appartiennent à quels rôles.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-330">The Roles framework allows developers to define a set of roles and specify what users belong to what roles.</span></span> <span data-ttu-id="b9ed5-331">Ces informations sont capturées dans la base de données dans les deux tables : `aspnet_Roles` et `aspnet_UsersInRoles`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-331">This information is captured in the database through two tables: `aspnet_Roles` and `aspnet_UsersInRoles`.</span></span> <span data-ttu-id="b9ed5-332">Chaque enregistrement dans le `aspnet_Roles` table représente un rôle pour une application particulière.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-332">Each record in the `aspnet_Roles` table represents a role for a particular application.</span></span> <span data-ttu-id="b9ed5-333">Comme beaucoup le `aspnet_Users` table, le `aspnet_Roles` comporte trois colonnes pertinentes pour notre discussion :</span><span class="sxs-lookup"><span data-stu-id="b9ed5-333">Much like the `aspnet_Users` table, the `aspnet_Roles` table has three columns pertinent to our discussion:</span></span>

- `RoleId`
- `RoleName`
- `ApplicationId`

`RoleId` <span data-ttu-id="b9ed5-334">est la clé primaire (et de type `uniqueidentifier`).</span><span class="sxs-lookup"><span data-stu-id="b9ed5-334">is the primary key (and of type `uniqueidentifier`).</span></span> `RoleName` <span data-ttu-id="b9ed5-335">est de type `nvarchar(256)`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-335">is of type `nvarchar(256)`.</span></span> <span data-ttu-id="b9ed5-336">Et `ApplicationId` lie le compte d’utilisateur à une application particulière dans `aspnet_Applications`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-336">And `ApplicationId` links the user account to a particular application in `aspnet_Applications`.</span></span> <span data-ttu-id="b9ed5-337">Il existe un composite `UNIQUE` contrainte sur la `RoleName` et `ApplicationId` colonnes, en garantissant que chaque nom de rôle est unique dans une application donnée.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-337">There is a composite `UNIQUE` constraint on the `RoleName` and `ApplicationId` columns, ensuring that in a given application each role name is unique.</span></span>

<span data-ttu-id="b9ed5-338">Le `aspnet_UsersInRoles` table sert un mappage entre les utilisateurs et rôles.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-338">The `aspnet_UsersInRoles` table serves as a mapping between users and roles.</span></span> <span data-ttu-id="b9ed5-339">Il existe seulement deux colonnes - `UserId` et `RoleId` - et elles constituent une clé primaire composite.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-339">There are only two columns - `UserId` and `RoleId` - and together they make up a composite primary key.</span></span>

## <a name="step-4-specifying-the-provider-and-customizing-its-settings"></a><span data-ttu-id="b9ed5-340">Étape 4 : Spécifier le fournisseur et personnaliser ses paramètres</span><span class="sxs-lookup"><span data-stu-id="b9ed5-340">Step 4: Specifying the Provider and Customizing Its Settings</span></span>

<span data-ttu-id="b9ed5-341">Tous les frameworks qui prennent en charge le modèle de fournisseur, par exemple les infrastructures d’appartenance et de rôles - ne disposent pas de détails d’implémentation eux-mêmes et à la place de déléguer cette responsabilité à une classe de fournisseur.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-341">All of the frameworks that support the provider model - such as the Membership and Roles frameworks - lack implementation details themselves and instead delegate that responsibility to a provider class.</span></span> <span data-ttu-id="b9ed5-342">Dans le cas de l’infrastructure de l’appartenance, la `Membership` classe définit l’API de gestion des comptes d’utilisateur, mais il n’interagit pas directement avec n’importe quel magasin de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-342">In the case of the Membership framework, the `Membership` class defines the API for managing user accounts, but it does not interact directly with any user store.</span></span> <span data-ttu-id="b9ed5-343">Au lieu de cela, le `Membership` rassemblerez de méthodes de la classe à la demande au fournisseur configuré - nous utiliserons le `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-343">Rather, the `Membership` class's methods hand off the request to the configured provider - we will be using the `SqlMembershipProvider`.</span></span> <span data-ttu-id="b9ed5-344">Lorsque nous appelons une des méthodes dans le `Membership` (classe), comment l’infrastructure Membership sait pour déléguer l’appel à la `SqlMembershipProvider`?</span><span class="sxs-lookup"><span data-stu-id="b9ed5-344">When we invoke one of the methods in the `Membership` class, how does the Membership framework know to delegate the call to the `SqlMembershipProvider`?</span></span>

<span data-ttu-id="b9ed5-345">Le `Membership` classe a un [ `Providers` propriété](https://msdn.microsoft.com/library/system.web.security.membership.providers.aspx) qui contient une référence à toutes les classes de fournisseur inscrit disponibles pour une utilisation par l’infrastructure d’appartenance.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-345">The `Membership` class has a [`Providers` property](https://msdn.microsoft.com/library/system.web.security.membership.providers.aspx) that contains a reference to all of the registered provider classes available for use by the Membership framework.</span></span> <span data-ttu-id="b9ed5-346">Chaque fournisseur inscrit a un nom associé et le type.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-346">Each registered provider has an associated name and type.</span></span> <span data-ttu-id="b9ed5-347">Le nom offre un moyen de conviviale pour référencer un fournisseur particulier dans le `Providers` collection, tandis que le type identifie la classe de fournisseur.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-347">The name offers a human-friendly way to reference a particular provider in the `Providers` collection, while the type identifies the provider class.</span></span> <span data-ttu-id="b9ed5-348">En outre, chaque fournisseur inscrit peut inclure des paramètres de configuration.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-348">Moreover, each registered provider may include configuration settings.</span></span> <span data-ttu-id="b9ed5-349">Incluent des paramètres de configuration de l’infrastructure de l’appartenance `passwordFormat` et `requiresUniqueEmail`, entre autres.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-349">Configuration settings for the Membership framework include `passwordFormat` and `requiresUniqueEmail`, among many others.</span></span> <span data-ttu-id="b9ed5-350">Reportez-vous au tableau 2 pour obtenir la liste complète des paramètres de configuration utilisés par le `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-350">See Table 2 for a complete list of configuration settings used by the `SqlMembershipProvider`.</span></span>

<span data-ttu-id="b9ed5-351">Le `Providers` contenu de la propriété est spécifiés via les paramètres de configuration de l’application web.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-351">The `Providers` property's contents are specified through the web application's configuration settings.</span></span> <span data-ttu-id="b9ed5-352">Par défaut, toutes les applications web ont un fournisseur nommé `AspNetSqlMembershipProvider` de type `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-352">By default, all web applications have a provider named `AspNetSqlMembershipProvider` of type `SqlMembershipProvider`.</span></span> <span data-ttu-id="b9ed5-353">Ce fournisseur d’appartenances par défaut est inscrit dans `machine.config` (situé dans `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\CONFIG)`:</span><span class="sxs-lookup"><span data-stu-id="b9ed5-353">This default Membership provider is registered in `machine.config` (located at `%WINDIR%\Microsoft.Net\Framework\v2.0.50727\CONFIG)`:</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-cs/samples/sample1.xml)]

<span data-ttu-id="b9ed5-354">En tant que le balisage ci-dessus, le [ `<membership>` élément](https://msdn.microsoft.com/library/1b9hw62f.aspx) définit les paramètres de configuration de l’infrastructure de l’appartenance lors de la [ `<providers>` élément enfant](https://msdn.microsoft.com/library/6d4936ht.aspx) spécifie inscrit fournisseurs.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-354">As the markup above shows, the [`<membership>` element](https://msdn.microsoft.com/library/1b9hw62f.aspx) defines the configuration settings for the Membership framework while the [`<providers>` child element](https://msdn.microsoft.com/library/6d4936ht.aspx) specifies the registered providers.</span></span> <span data-ttu-id="b9ed5-355">Les fournisseurs peuvent être ajoutés ou supprimés à l’aide la [ `<add>` ](https://msdn.microsoft.com/library/whae3t94.aspx) ou [ `<remove>` ](https://msdn.microsoft.com/library/aykw9a6d.aspx) éléments ; Utilisez le [ `<clear>` ](https://msdn.microsoft.com/library/t062y6yc.aspx) élément à supprimer tous les actuellement fournisseurs inscrits.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-355">Providers may be added or removed using the [`<add>`](https://msdn.microsoft.com/library/whae3t94.aspx) or [`<remove>`](https://msdn.microsoft.com/library/aykw9a6d.aspx) elements; use the [`<clear>`](https://msdn.microsoft.com/library/t062y6yc.aspx) element to remove all currently registered providers.</span></span> <span data-ttu-id="b9ed5-356">En tant que le balisage ci-dessus, `machine.config` ajoute un fournisseur nommé `AspNetSqlMembershipProvider` de type `SqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-356">As the markup above shows, `machine.config` adds a provider named `AspNetSqlMembershipProvider` of type `SqlMembershipProvider`.</span></span>

<span data-ttu-id="b9ed5-357">Outre le `name` et `type` attributs, la `<add>` élément contient des attributs qui définissent les valeurs de configuration des paramètres différents.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-357">In addition to the `name` and `type` attributes, the `<add>` element contains attributes that define the values for various configuring settings.</span></span> <span data-ttu-id="b9ed5-358">Le tableau 2 répertorie les informations disponibles `SqlMembershipProvider`-paramètres de configuration spécifiques, ainsi qu’une description de chacun d’eux.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-358">Table 2 lists the available `SqlMembershipProvider`-specific configuration settings, along with a description of each.</span></span>

> [!NOTE]
> <span data-ttu-id="b9ed5-359">Toutes les valeurs par défaut indiqués dans le tableau 2 font référence aux valeurs par défaut définies dans le `SqlMembershipProvider` classe.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-359">Any default values noted in Table 2 refer to the default values defined in the `SqlMembershipProvider` class.</span></span> <span data-ttu-id="b9ed5-360">Notez que not tous les paramètres de configuration dans `AspNetSqlMembershipProvider` correspondent aux valeurs par défaut de la `SqlMembershipProvider` classe.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-360">Note that not all of the configuration settings in `AspNetSqlMembershipProvider` correspond to the default values of the `SqlMembershipProvider` class.</span></span> <span data-ttu-id="b9ed5-361">Par exemple, si non spécifié dans un fournisseur d’appartenances, le `requiresUniqueEmail` définissant les valeurs par défaut sur true.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-361">For example, if not specified in a Membership provider, the `requiresUniqueEmail` setting defaults to true.</span></span> <span data-ttu-id="b9ed5-362">Toutefois, le `AspNetSqlMembershipProvider` remplace cette valeur par défaut en spécifiant explicitement une valeur de `false`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-362">However, the `AspNetSqlMembershipProvider` overrides this default value by explicitly specifying a value of `false`.</span></span>


| **<span data-ttu-id="b9ed5-363">Paramètre&lt;\_o3a\_p /&gt;</span><span class="sxs-lookup"><span data-stu-id="b9ed5-363">Setting&lt;\_o3a\_p /&gt;</span></span>** | **<span data-ttu-id="b9ed5-364">Description&lt;\_o3a\_p /&gt;</span><span class="sxs-lookup"><span data-stu-id="b9ed5-364">Description&lt;\_o3a\_p /&gt;</span></span>** |
| --- | --- |
| `ApplicationName` | <span data-ttu-id="b9ed5-365">Rappel qui permet à l’infrastructure de l’appartenance d’un magasin utilisateur unique d’être partitionnées entre plusieurs applications.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-365">Recall that the Membership framework allows for a single user store to be partitioned across multiple applications.</span></span> <span data-ttu-id="b9ed5-366">Ce paramètre indique le nom de la partition d’application utilisé par le fournisseur d’appartenances.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-366">This setting indicates the name of the application partition used by the Membership provider.</span></span> <span data-ttu-id="b9ed5-367">Si cette valeur n’est explicitement spécifiée, elle est définie, lors de l’exécution, à la valeur de chemin d’accès virtuel racine de l’application.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-367">If this value is not explicitly specified, it is set, at runtime, to the value of the application's virtual root path.</span></span> |
| `commandTimeout` | <span data-ttu-id="b9ed5-368">Spécifie la valeur de délai d’attente de commande SQL (en secondes).</span><span class="sxs-lookup"><span data-stu-id="b9ed5-368">Specifies the SQL command timeout value (in seconds).</span></span> <span data-ttu-id="b9ed5-369">La valeur par défaut est 30.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-369">The default value is 30.</span></span> |
| `connectionStringName` | <span data-ttu-id="b9ed5-370">Le nom de la chaîne de connexion dans le `<connectionStrings>` élément à utiliser pour se connecter à la base de données utilisateur.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-370">The name of the connection string in the `<connectionStrings>` element to use to connect to the user store database.</span></span> <span data-ttu-id="b9ed5-371">Cette valeur est obligatoire.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-371">This value is required.</span></span> |
| `description` | <span data-ttu-id="b9ed5-372">Fournit une description conviviale du fournisseur inscrit.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-372">Provides a human-friendly description of the registered provider.</span></span> |
| `enablePasswordRetrieval` | <span data-ttu-id="b9ed5-373">Spécifie si les utilisateurs peuvent récupérer leur mot de passe oublié.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-373">Specifies whether users may retrieve their forgotten password.</span></span> <span data-ttu-id="b9ed5-374">La valeur par défaut est `false`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-374">The default value is `false`.</span></span> |
| `enablePasswordReset` | <span data-ttu-id="b9ed5-375">Indique si les utilisateurs sont autorisés à réinitialiser leur mot de passe.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-375">Indicates whether users are allowed to reset their password.</span></span> <span data-ttu-id="b9ed5-376">La valeur par défaut est `true`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-376">Defaults to `true`.</span></span> |
| `maxInvalidPasswordAttempts` | <span data-ttu-id="b9ed5-377">Le nombre maximal de tentatives de connexion ayant échoué qui peuvent se produire pour un utilisateur donné au cours de le `passwordAttemptWindow` avant que l’utilisateur est verrouillé. La valeur par défaut est 5.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-377">The maximum number of unsuccessful login attempts that may occur for a given user during the specified `passwordAttemptWindow` before the user is locked out. The default value is 5.</span></span> |
| `minRequiredNonalphanumericCharacters` | <span data-ttu-id="b9ed5-378">Le nombre minimal de caractères non alphanumériques qui doivent apparaître dans un mot de passe utilisateur.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-378">The minimum number of non-alphanumeric characters that must appear in a user's password.</span></span> <span data-ttu-id="b9ed5-379">Cette valeur doit être comprise entre 0 et 128 ; la valeur par défaut est 1.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-379">This value must be between 0 and 128; the default is 1.</span></span> |
| `minRequiredPasswordLength` | <span data-ttu-id="b9ed5-380">Le nombre minimal de caractères requis dans un mot de passe.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-380">The minimum number of characters required in a password.</span></span> <span data-ttu-id="b9ed5-381">Cette valeur doit être comprise entre 0 et 128 ; la valeur par défaut est 7.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-381">This value must be between 0 and 128; the default is 7.</span></span> |
| `name` | <span data-ttu-id="b9ed5-382">Le nom du fournisseur inscrit.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-382">The name of the registered provider.</span></span> <span data-ttu-id="b9ed5-383">Cette valeur est obligatoire.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-383">This value is required.</span></span> |
| `passwordAttemptWindow` | <span data-ttu-id="b9ed5-384">Le nombre de minutes pendant lesquelles Échec de connexion tentatives sont suivies.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-384">The number of minutes during which failed login attempts are tracked.</span></span> <span data-ttu-id="b9ed5-385">Si un utilisateur fournit des informations d’identification de connexion non valide `maxInvalidPasswordAttempts` fois au cours de cette spécifié fenêtre, ils sont verrouillés. La valeur par défaut est 10.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-385">If a user supplies invalid login credentials `maxInvalidPasswordAttempts` times within this specified window, they are locked out. The default value is 10.</span></span> |
| `PasswordFormat` | <span data-ttu-id="b9ed5-386">Le format de stockage du mot de passe : `Clear`, `Hashed`, ou `Encrypted`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-386">The password storage format: `Clear`, `Hashed`, or `Encrypted`.</span></span> <span data-ttu-id="b9ed5-387">La valeur par défaut est `Hashed`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-387">The default is `Hashed`.</span></span> |
| `passwordStrengthRegularExpression` | <span data-ttu-id="b9ed5-388">S’il est fourni, cette expression régulière est utilisée pour évaluer la force de mot de passe de l’utilisateur sélectionné lors de la création d’un nouveau compte ou lors de la modification de leur mot de passe.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-388">If provided, this regular expression is used to evaluate the strength of the user's selected password when creating a new account or when changing their password.</span></span> <span data-ttu-id="b9ed5-389">La valeur par défaut est une chaîne vide.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-389">The default value is an empty string.</span></span> |
| `requiresQuestionAndAnswer` | <span data-ttu-id="b9ed5-390">Spécifie si un utilisateur doit répondre à sa question de sécurité lors de la récupération ou de réinitialiser son mot de passe.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-390">Specifies whether a user must answer his security question when retrieving or resetting his password.</span></span> <span data-ttu-id="b9ed5-391">La valeur par défaut est `true`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-391">The default value is `true`.</span></span> |
| `requiresUniqueEmail` | <span data-ttu-id="b9ed5-392">Indique si tous les comptes d’utilisateur dans une partition d’application donnée doivent avoir une adresse de messagerie unique.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-392">Indicates whether all user accounts in a given application partition must have a unique email address.</span></span> <span data-ttu-id="b9ed5-393">La valeur par défaut est `true`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-393">The default value is `true`.</span></span> |
| `type` | <span data-ttu-id="b9ed5-394">Spécifie le type du fournisseur.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-394">Specifies the type of the provider.</span></span> <span data-ttu-id="b9ed5-395">Cette valeur est obligatoire.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-395">This value is required.</span></span> |

<span data-ttu-id="b9ed5-396">**Tableau 2**: L’appartenance et `SqlMembershipProvider` paramètres de Configuration</span><span class="sxs-lookup"><span data-stu-id="b9ed5-396">**Table 2**: Membership and `SqlMembershipProvider` Configuration Settings</span></span>

<span data-ttu-id="b9ed5-397">En plus de `AspNetSqlMembershipProvider`, autres fournisseurs d’appartenance peuvent être enregistrés sur une base de l’application par application en ajoutant un balisage semblable à la `Web.config` fichier.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-397">In addition to `AspNetSqlMembershipProvider`, other Membership providers may be registered on an application-by-application basis by adding similar markup to the `Web.config` file.</span></span>

> [!NOTE]
> <span data-ttu-id="b9ed5-398">Le framework de rôles fonctionne à peu près la même façon : il existe un fournisseur de rôle inscrit par défaut dans `machine.config` et fournisseurs inscrits peuvent être personnalisés sur une base de l’application par application dans `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-398">The Roles framework works in much the same way: there is a default registered role provider in `machine.config` and the registered providers may be customized on an application-by-application basis in `Web.config`.</span></span> <span data-ttu-id="b9ed5-399">Nous allons examiner l’infrastructure de rôles et de son balisage de configuration en détail dans un futur didacticiel.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-399">We will examine the Roles framework and its configuration markup in detail in a future tutorial.</span></span>


### <a name="customizing-thesqlmembershipprovidersettings"></a><span data-ttu-id="b9ed5-400">Personnalisation de le`SqlMembershipProvider`paramètres</span><span class="sxs-lookup"><span data-stu-id="b9ed5-400">Customizing the`SqlMembershipProvider`Settings</span></span>

<span data-ttu-id="b9ed5-401">La valeur par défaut `SqlMembershipProvider` (`AspNetSqlMembershipProvider`) a sa `connectionStringName` attribut la valeur `LocalSqlServer`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-401">The default `SqlMembershipProvider` (`AspNetSqlMembershipProvider`) has its `connectionStringName` attribute set to `LocalSqlServer`.</span></span> <span data-ttu-id="b9ed5-402">Comme le `AspNetSqlMembershipProvider` fournisseur, le nom de chaîne de connexion `LocalSqlServer` est défini dans `machine.config`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-402">Like the `AspNetSqlMembershipProvider` provider, the connection string name `LocalSqlServer` is defined in `machine.config`.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-cs/samples/sample2.xml)]

<span data-ttu-id="b9ed5-403">Comme vous pouvez le voir, cette chaîne de connexion définit la base de données SQL 2005 Express Edition | DataDirectory|aspnetdb.mdf.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-403">As you can see, this connection string defines a SQL 2005 Express Edition database located at |DataDirectory|aspnetdb.mdf�.</span></span> <span data-ttu-id="b9ed5-404">La chaîne | DataDirectory | est traduite lors de l’exécution pour pointer vers le `~/App_Data/` directory, par conséquent, le chemin d’accès de la base de données | Se traduit par DataDirectory|aspnetdb.mdf » `~/App_Data` / `aspnet.mdf`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-404">The string |DataDirectory|� is translated at runtime to point to the `~/App_Data/` directory, so the database path |DataDirectory|aspnetdb.mdf" translates to `~/App_Data`/`aspnet.mdf`.</span></span>

<span data-ttu-id="b9ed5-405">Si nous ne spécifiait pas les informations de fournisseur d’appartenance dans de notre application `Web.config` fichier, l’application utilise le fournisseur d’appartenances par défaut inscrit, `AspNetSqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-405">If we did not specify any Membership provider information in our application's `Web.config` file, the application uses the default registered Membership provider, `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="b9ed5-406">Si le `~/App_Data/aspnet.mdf` base de données n’existe pas, le runtime ASP.NET crée automatiquement et ajoutez le schéma de services d’application.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-406">If the `~/App_Data/aspnet.mdf` database does not exist, the ASP.NET runtime will automatically create it and add the application services schema.</span></span> <span data-ttu-id="b9ed5-407">Toutefois, nous ne souhaitez pas utiliser le `aspnet.mdf` base de données ; au lieu de cela, nous souhaitons utiliser la `SecurityTutorials.mdf` base de données créées à l’étape 2.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-407">However, we don't want to use the `aspnet.mdf` database; rather, we want to use the `SecurityTutorials.mdf` database we created in Step 2.</span></span> <span data-ttu-id="b9ed5-408">Cette modification peut être accomplie de deux manières :</span><span class="sxs-lookup"><span data-stu-id="b9ed5-408">This modification can be accomplished in one of two ways:</span></span>

- <span data-ttu-id="b9ed5-409"><strong>Spécifiez une valeur pour le</strong><strong>`LocalSqlServer`</strong><strong>nom de chaîne de connexion dans</strong><strong>`Web.config`</strong><strong>.</strong></span><span class="sxs-lookup"><span data-stu-id="b9ed5-409"><strong>Specify a value for the</strong><strong>`LocalSqlServer`</strong><strong>connection string name in</strong><strong>`Web.config`</strong><strong>.</strong></span></span> <span data-ttu-id="b9ed5-410">En remplaçant le `LocalSqlServer` valeur du nom de chaîne de connexion `Web.config`, nous pouvons utiliser le fournisseur d’appartenances par défaut inscrit (`AspNetSqlMembershipProvider`) et que cela fonctionne correctement avec le `SecurityTutorials.mdf` base de données.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-410">By overwriting the `LocalSqlServer` connection string name value in `Web.config`, we can use the default registered Membership provider (`AspNetSqlMembershipProvider`) and have it correctly work with the `SecurityTutorials.mdf` database.</span></span> <span data-ttu-id="b9ed5-411">Cette approche est adaptée si vous êtes contenu avec les paramètres de configuration spécifiés par `AspNetSqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-411">This approach is fine if you are content with the configuration settings specified by `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="b9ed5-412">Pour plus d’informations sur cette technique, consultez [Scott Guthrie](https://weblogs.asp.net/scottgu/)du billet de blog, [configuration des Services ASP.NET 2.0 pour utiliser SQL Server 2000 ou SQL Server 2005 Application](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx).</span><span class="sxs-lookup"><span data-stu-id="b9ed5-412">For more information on this technique, see [Scott Guthrie](https://weblogs.asp.net/scottgu/)'s blog post, [Configuring ASP.NET 2.0 Application Services to Use SQL Server 2000 or SQL Server 2005](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx).</span></span>
- <span data-ttu-id="b9ed5-413"><strong>Ajouter un nouveau fournisseur inscrit du type</strong><strong>`SqlMembershipProvider`</strong><strong>et configurer ses</strong><strong>`connectionStringName`</strong><strong>paramètre pour pointer vers le</strong> <strong>`SecurityTutorials.mdf`</strong> <strong>base de données.</strong></span><span class="sxs-lookup"><span data-stu-id="b9ed5-413"><strong>Add a new registered provider of type</strong><strong>`SqlMembershipProvider`</strong><strong>and configure its</strong><strong>`connectionStringName`</strong><strong>setting to point to the</strong><strong>`SecurityTutorials.mdf`</strong><strong>database.</strong></span></span> <span data-ttu-id="b9ed5-414">Cette approche est utile dans les scénarios où vous souhaitez personnaliser les autres propriétés de configuration en plus de la chaîne de connexion de base de données.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-414">This approach is useful in scenarios where you want to customize other configuration properties in addition to the database connection string.</span></span> <span data-ttu-id="b9ed5-415">Dans mes propres projets, j’utilise toujours cette approche en raison de sa flexibilité et une meilleure lisibilité.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-415">In my own projects I always use this approach because of its flexibility and readability.</span></span>

<span data-ttu-id="b9ed5-416">Avant de pouvoir ajouter un nouveau fournisseur inscrit qui fait référence à la `SecurityTutorials.mdf` base de données, nous devons d’abord ajouter une valeur de chaîne de connexion approprié dans le `<connectionStrings>` section `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-416">Before we can add a new registered provider that references the `SecurityTutorials.mdf` database, we first need to add an appropriate connection string value in the `<connectionStrings>` section in `Web.config`.</span></span> <span data-ttu-id="b9ed5-417">Le balisage suivant ajoute une nouvelle chaîne de connexion nommée `SecurityTutorialsConnectionString` qui fait référence à SQL Server 2005 Express Edition `SecurityTutorials.mdf` de base de données dans le `App_Data` dossier.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-417">The following markup adds a new connection string named `SecurityTutorialsConnectionString` that references the SQL Server 2005 Express Edition `SecurityTutorials.mdf` database in the `App_Data` folder.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-cs/samples/sample3.xml)]

> [!NOTE]
> <span data-ttu-id="b9ed5-418">Si vous utilisez un fichier de l’autre base de données, mettre à jour la chaîne de connexion en fonction des besoins.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-418">If you are using an alternate database file, update the connection string as needed.</span></span> <span data-ttu-id="b9ed5-419">Pour plus d’informations sur la formation de la chaîne de connexion correcte, reportez-vous à [ConnectionStrings.com](http://www.connectionstrings.com/).</span><span class="sxs-lookup"><span data-stu-id="b9ed5-419">For more information on forming the correct connection string, refer to [ConnectionStrings.com](http://www.connectionstrings.com/).</span></span>

<span data-ttu-id="b9ed5-420">Ensuite, ajoutez le balisage suivant de configuration d’appartenance pour le `Web.config` fichier.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-420">Next, add the following Membership configuration markup to the `Web.config` file.</span></span> <span data-ttu-id="b9ed5-421">Ce balisage inscrit un nouveau fournisseur nommé `SecurityTutorialsSqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-421">This markup registers a new provider named `SecurityTutorialsSqlMembershipProvider`.</span></span>

[!code-xml[Main](creating-the-membership-schema-in-sql-server-cs/samples/sample4.xml)]

<span data-ttu-id="b9ed5-422">Outre l’enregistrement le `SecurityTutorialsSqlMembershipProvider` fournisseur, le balisage ci-dessus définit le `SecurityTutorialsSqlMembershipProvider` en tant que le fournisseur par défaut (via le `defaultProvider` d’attribut dans le `<membership>` élément).</span><span class="sxs-lookup"><span data-stu-id="b9ed5-422">In addition to registering the `SecurityTutorialsSqlMembershipProvider` provider, the above markup defines the `SecurityTutorialsSqlMembershipProvider` as the default provider (via the `defaultProvider` attribute in the `<membership>` element).</span></span> <span data-ttu-id="b9ed5-423">Rappelez-vous que l’infrastructure de l’appartenance peut avoir plusieurs fournisseurs enregistrés.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-423">Recall that the Membership framework can have multiple registered providers.</span></span> <span data-ttu-id="b9ed5-424">Dans la mesure où `AspNetSqlMembershipProvider` est inscrit en tant que premier fournisseur dans `machine.config`, il constitue le fournisseur par défaut, sauf si nous indiquer dans le cas contraire.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-424">Since `AspNetSqlMembershipProvider` is registered as the first provider in `machine.config`, it serves as the default provider unless we indicate otherwise.</span></span>

<span data-ttu-id="b9ed5-425">Actuellement, notre application a deux fournisseurs enregistrés : `AspNetSqlMembershipProvider` et `SecurityTutorialsSqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-425">Currently, our application has two registered providers: `AspNetSqlMembershipProvider` and `SecurityTutorialsSqlMembershipProvider`.</span></span> <span data-ttu-id="b9ed5-426">Toutefois, avant d’enregistrer le `SecurityTutorialsSqlMembershipProvider` fournisseur nous pourrions effaciez tous précédemment inscrit les fournisseurs en ajoutant un [ `<clear />` élément](https://msdn.microsoft.com/library/t062y6yc.aspx) immédiatement avant notre `<add>` élément.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-426">However, before registering the `SecurityTutorialsSqlMembershipProvider` provider we could have cleared out all previously registered providers by adding a [`<clear />` element](https://msdn.microsoft.com/library/t062y6yc.aspx) immediately before our `<add>` element.</span></span> <span data-ttu-id="b9ed5-427">Cela serait effacer la `AspNetSqlMembershipProvider` à partir de la liste des fournisseurs enregistrés, ce qui signifie que le `SecurityTutorialsSqlMembershipProvider` serait le seul fournisseur d’appartenances inscrit.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-427">This would clear out the `AspNetSqlMembershipProvider` from the list of registered providers, meaning that the `SecurityTutorialsSqlMembershipProvider` would be the only registered Membership provider.</span></span> <span data-ttu-id="b9ed5-428">Si nous avons utilisé cette approche, nous devons pas marquer la `SecurityTutorialsSqlMembershipProvider` en tant que le fournisseur par défaut, car il serait le seul fournisseur d’appartenances inscrit.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-428">If we used this approach, then we would not need to mark the `SecurityTutorialsSqlMembershipProvider` as the default provider, since it would be the only registered Membership provider.</span></span> <span data-ttu-id="b9ed5-429">Pour plus d’informations sur l’utilisation de `<clear />`, consultez [Using `<clear />` lorsque des fournisseurs ajout](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx).</span><span class="sxs-lookup"><span data-stu-id="b9ed5-429">For more information on using `<clear />`, see [Using `<clear />` When Adding Providers](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx).</span></span>

<span data-ttu-id="b9ed5-430">Notez que le `SecurityTutorialsSqlMembershipProvider`de `connectionStringName` définition de références le juste ajouté `SecurityTutorialsConnectionString` nom de chaîne de connexion et que son `applicationName` paramètre a été défini sur une valeur de SecurityTutorials.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-430">Note that the `SecurityTutorialsSqlMembershipProvider`'s `connectionStringName` setting references the just-added `SecurityTutorialsConnectionString` connection string name, and that its `applicationName` setting has been set to a value of SecurityTutorials.</span></span> <span data-ttu-id="b9ed5-431">En outre, le `requiresUniqueEmail` paramètre a été défini sur `true`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-431">Additionally, the `requiresUniqueEmail` setting has been set to `true`.</span></span> <span data-ttu-id="b9ed5-432">Toutes les autres options de configuration sont identiques aux valeurs dans `AspNetSqlMembershipProvider`.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-432">All other configuration options are identical to the values in `AspNetSqlMembershipProvider`.</span></span> <span data-ttu-id="b9ed5-433">N’hésitez pas à apporter des modifications de configuration ici, si vous le souhaitez.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-433">Feel free to make any configuration modifications here, if you wish.</span></span> <span data-ttu-id="b9ed5-434">Par exemple, vous pourrez renforcer la force de mot de passe en demandant à deux caractères non alphanumériques plutôt qu’un seul ou en augmentant la longueur de mot de passe à huit caractères au lieu de sept.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-434">For example, you could tighten the password strength by requiring two non-alphanumeric characters instead of one, or by increasing the password length to eight characters instead of seven.</span></span>

> [!NOTE]
> <span data-ttu-id="b9ed5-435">Rappel qui permet à l’infrastructure de l’appartenance d’un magasin utilisateur unique d’être partitionnées entre plusieurs applications.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-435">Recall that the Membership framework allows for a single user store to be partitioned across multiple applications.</span></span> <span data-ttu-id="b9ed5-436">Le fournisseur d’appartenances `applicationName` paramètre indique quelle application que le fournisseur utilise lorsque vous travaillez avec le magasin d’utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-436">The Membership provider's `applicationName` setting indicates what application the provider uses when working with the user store.</span></span> <span data-ttu-id="b9ed5-437">Il est important que vous définissez explicitement une valeur pour le `applicationName` paramètre de configuration, car si le `applicationName` n’est pas défini explicitement, il est affecté à un chemin d’accès virtuel racine de l’application web lors de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-437">It is important that you explicitly set a value for the `applicationName` configuration setting because if the `applicationName` is not explicitly set, it is assigned to the web application's virtual root path at runtime.</span></span> <span data-ttu-id="b9ed5-438">Cela fonctionne bien tant que chemin d’accès virtuel racine de l’application ne change pas, mais si vous déplacez l’application vers un autre chemin d’accès, le `applicationName` paramètre est modifiées.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-438">This works fine as long as the application's virtual root path doesn't change, but if you move the application to a different path, the `applicationName` setting will change too.</span></span> <span data-ttu-id="b9ed5-439">Dans ce cas, le fournisseur d’appartenances travaillerons avec une partition d’application autre que celui utilisé précédemment.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-439">When this happens, the Membership provider will start working with a different application partition than was previously used.</span></span> <span data-ttu-id="b9ed5-440">Comptes d’utilisateur créés avant le déplacement résidera dans une partition d’application différents, et ces utilisateurs ne seront plus en mesure de vous connecter au site.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-440">User accounts created prior to the move will reside in a different application partition and those users will no longer be able to log into the site.</span></span> <span data-ttu-id="b9ed5-441">Pour obtenir une explication plus approfondie sur ce sujet, consultez [toujours définir le `applicationName` propriété lors de la configuration ASP.NET 2.0 de l’appartenance et les autres fournisseurs](https://weblogs.asp.net/scottgu/443634).</span><span class="sxs-lookup"><span data-stu-id="b9ed5-441">For a more in-depth discussion on this matter, see [Always Set the `applicationName` Property When Configuring ASP.NET 2.0 Membership and Other Providers](https://weblogs.asp.net/scottgu/443634).</span></span>


## <a name="summary"></a><span data-ttu-id="b9ed5-442">Récapitulatif</span><span class="sxs-lookup"><span data-stu-id="b9ed5-442">Summary</span></span>

<span data-ttu-id="b9ed5-443">À ce stade, nous avons une base de données avec les services d’application configuré (`SecurityTutorials.mdf`) et avez configuré notre application web afin que l’infrastructure d’appartenance utilise le `SecurityTutorialsSqlMembershipProvider` fournisseur nous venez d’inscrire.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-443">At this point we have a database with the configured application services (`SecurityTutorials.mdf`) and have configured our web application so that the Membership framework uses the `SecurityTutorialsSqlMembershipProvider` provider we just registered.</span></span> <span data-ttu-id="b9ed5-444">Ce fournisseur inscrit est de type `SqlMembershipProvider` et a son `connectionStringName` défini sur la chaîne de connexion approprié (`SecurityTutorialsConnectionString`) et son `applicationName` valeur explicitement.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-444">This registered provider is of type `SqlMembershipProvider` and has its `connectionStringName` set to the appropriate connection string (`SecurityTutorialsConnectionString`) and its `applicationName` value explicitly set.</span></span>

<span data-ttu-id="b9ed5-445">Nous sommes maintenant prêts à utiliser l’infrastructure de l’appartenance à partir de notre application.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-445">We are now ready to use the Membership framework from our application.</span></span> <span data-ttu-id="b9ed5-446">Dans le didacticiel suivant, nous allons examiner comment créer de nouveaux comptes d’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-446">In the next tutorial we will examine how to create new user accounts.</span></span> <span data-ttu-id="b9ed5-447">Après que nous explorerons l’authentification des utilisateurs, effectue une autorisation basée sur l’utilisateur et le stockage des informations supplémentaires relatives à l’utilisateur dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-447">Following that we will explore authenticating users, performing user-based authorization, and storing additional user-related information in the database.</span></span>

<span data-ttu-id="b9ed5-448">Bonne programmation !</span><span class="sxs-lookup"><span data-stu-id="b9ed5-448">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="b9ed5-449">informations supplémentaires</span><span class="sxs-lookup"><span data-stu-id="b9ed5-449">Further Reading</span></span>

<span data-ttu-id="b9ed5-450">Pour plus d’informations sur les sujets abordés dans ce didacticiel, consultez les ressources suivantes :</span><span class="sxs-lookup"><span data-stu-id="b9ed5-450">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="b9ed5-451">Toujours défini le `applicationName` propriété lors de la configuration d’ASP.NET 2.0 appartenance et autres fournisseurs</span><span class="sxs-lookup"><span data-stu-id="b9ed5-451">Always Set the `applicationName` Property When Configuring ASP.NET 2.0 Membership and Other Providers</span></span>](https://weblogs.asp.net/scottgu/443634)
- [<span data-ttu-id="b9ed5-452">Configuration d’ASP.NET 2.0 des Services d’Application pour utiliser SQL Server 2000 ou SQL Server 2005</span><span class="sxs-lookup"><span data-stu-id="b9ed5-452">Configuring ASP.NET 2.0 Application Services to Use SQL Server 2000 or SQL Server 2005</span></span>](https://weblogs.asp.net/scottgu/archive/2005/08/25/423703.aspx)
- [<span data-ttu-id="b9ed5-453">Télécharger SQL Server Management Studio Express Edition</span><span class="sxs-lookup"><span data-stu-id="b9ed5-453">Download SQL Server Management Studio Express Edition</span></span>](https://www.microsoft.com/downloads/details.aspx?FamilyId=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&amp;displaylang=en)
- [<span data-ttu-id="b9ed5-454">Examen d’ASP.NET 2.0 s appartenance, rôles et profil</span><span class="sxs-lookup"><span data-stu-id="b9ed5-454">Examining ASP.NET 2.0�s Membership, Roles, and Profile</span></span>](http://aspnet.4guysfromrolla.com/articles/120705-1.aspx)
- [<span data-ttu-id="b9ed5-455">Le `<add>` élément de Providers pour Membership</span><span class="sxs-lookup"><span data-stu-id="b9ed5-455">The `<add>` Element for Providers for Membership</span></span>](https://msdn.microsoft.com/library/whae3t94.aspx)
- [<span data-ttu-id="b9ed5-456">Élément `<membership>`</span><span class="sxs-lookup"><span data-stu-id="b9ed5-456">The `<membership>` Element</span></span>](https://msdn.microsoft.com/library/1b9hw62f.aspx)
- [<span data-ttu-id="b9ed5-457">Le `<providers>` élément pour l’appartenance</span><span class="sxs-lookup"><span data-stu-id="b9ed5-457">The `<providers>` Element for Membership</span></span>](https://msdn.microsoft.com/library/6d4936ht.aspx)
- [<span data-ttu-id="b9ed5-458">À l’aide de `<clear />` lorsque vous ajoutez les fournisseurs</span><span class="sxs-lookup"><span data-stu-id="b9ed5-458">Using `<clear />` When Adding Providers</span></span>](https://weblogs.asp.net/scottgu/archive/2006/11/20/common-gotcha-don-t-forget-to-clear-when-adding-providers.aspx)
- [<span data-ttu-id="b9ed5-459">Travailler directement avec le</span><span class="sxs-lookup"><span data-stu-id="b9ed5-459">Working Directly with the</span></span> `SqlMembershipProvider`](http://aspnet.4guysfromrolla.com/articles/091207-1.aspx)

### <a name="video-training-on-topics-contained-in-this-tutorial"></a><span data-ttu-id="b9ed5-460">Vidéos de formation sur les rubriques contenues dans ce didacticiel</span><span class="sxs-lookup"><span data-stu-id="b9ed5-460">Video Training on Topics Contained in this Tutorial</span></span>

- [<span data-ttu-id="b9ed5-461">Présentation des appartenances d’ASP.NET</span><span class="sxs-lookup"><span data-stu-id="b9ed5-461">Understanding ASP.NET Memberships</span></span>](../../../videos/authentication/understanding-aspnet-memberships.md)
- [<span data-ttu-id="b9ed5-462">Configuration de SQL pour l’utilisation de schémas d’appartenance</span><span class="sxs-lookup"><span data-stu-id="b9ed5-462">Configuring SQL To Work with Membership Schemas</span></span>](../../../videos/authentication/configuring-sql-to-work-with-membership-schemas.md)
- [<span data-ttu-id="b9ed5-463">Modification des paramètres d’appartenance dans le schéma d’appartenance par défaut</span><span class="sxs-lookup"><span data-stu-id="b9ed5-463">Changing Membership Settings in the Default Membership Schema</span></span>](../../../videos/authentication/changing-membership-settings-in-the-default-membership-schema.md)

### <a name="about-the-author"></a><span data-ttu-id="b9ed5-464">À propos de l’auteur</span><span class="sxs-lookup"><span data-stu-id="b9ed5-464">About the Author</span></span>

<span data-ttu-id="b9ed5-465">Scott Mitchell, auteur de plusieurs livres sur ASP/ASP.NET et fondateur de 4GuysFromRolla.com, travaille avec les technologies Web Microsoft depuis 1998.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-465">Scott Mitchell, author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="b9ed5-466">Scott fonctionne comme un consultant indépendant, formateur et writer.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-466">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="b9ed5-467">Son dernier ouvrage est *[SAM animer vous-même ASP.NET 2.0 des dernières 24 heures](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-467">His latest book is *[Sams Teach Yourself ASP.NET 2.0 in 24 Hours](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span></span> <span data-ttu-id="b9ed5-468">Scott peut être atteint à [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) ou via son blog à [http://ScottOnWriting.NET](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="b9ed5-468">Scott can be reached at [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="b9ed5-469">Remerciements</span><span class="sxs-lookup"><span data-stu-id="b9ed5-469">Special Thanks To</span></span>

<span data-ttu-id="b9ed5-470">Cette série de didacticiels a été révisée par plusieurs réviseurs utiles.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-470">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="b9ed5-471">Entraîner un réviseur pour ce didacticiel a été Alicja Maziarz.</span><span class="sxs-lookup"><span data-stu-id="b9ed5-471">Lead reviewer for this tutorial was Alicja Maziarz.</span></span> <span data-ttu-id="b9ed5-472">Qui souhaitent consulter mes prochains articles MSDN ?</span><span class="sxs-lookup"><span data-stu-id="b9ed5-472">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="b9ed5-473">Dans ce cas, envoyez-moi une ligne à [ mitchell@4GuysFromRolla.com ](mailto:mitchell@4guysfromrolla.com).</span><span class="sxs-lookup"><span data-stu-id="b9ed5-473">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4guysfromrolla.com).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="b9ed5-474">Suivant</span><span class="sxs-lookup"><span data-stu-id="b9ed5-474">Next</span></span>](creating-user-accounts-cs.md)

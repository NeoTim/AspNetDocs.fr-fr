---
uid: web-forms/overview/older-versions-security/admin/building-an-interface-to-select-one-user-account-from-many-cs
title: Création d’une Interface pour sélectionner un compte d’utilisateur à partir de nombreux (c#) | Microsoft Docs
author: rick-anderson
description: Dans ce didacticiel, nous allons créer une interface utilisateur avec une grille paginée, filtrable. En particulier, l’interface utilisateur se compose d’une série de type LinkButton pour...
ms.author: riande
ms.date: 04/01/2008
ms.assetid: 9e4e687c-b4ec-434f-a4ef-edb0b8f365e4
msc.legacyurl: /web-forms/overview/older-versions-security/admin/building-an-interface-to-select-one-user-account-from-many-cs
msc.type: authoredcontent
ms.openlocfilehash: ede2bf737464fde47e304e23255349599c1ea663
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/06/2019
ms.locfileid: "65116286"
---
# <a name="building-an-interface-to-select-one-user-account-from-many-c"></a><span data-ttu-id="78d55-104">Création d’une interface pour sélectionner un compte d’utilisateur parmi de nombreux comptes (C#)</span><span class="sxs-lookup"><span data-stu-id="78d55-104">Building an Interface to Select One User Account from Many (C#)</span></span>

<span data-ttu-id="78d55-105">par [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="78d55-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="78d55-106">[Télécharger le Code](http://download.microsoft.com/download/6/0/e/60e1bd94-e5f9-4d5a-a079-f23c98f4f67d/CS.12.zip) ou [télécharger le PDF](http://download.microsoft.com/download/6/0/e/60e1bd94-e5f9-4d5a-a079-f23c98f4f67d/aspnet_tutorial12_SelectUser_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="78d55-106">[Download Code](http://download.microsoft.com/download/6/0/e/60e1bd94-e5f9-4d5a-a079-f23c98f4f67d/CS.12.zip) or [Download PDF](http://download.microsoft.com/download/6/0/e/60e1bd94-e5f9-4d5a-a079-f23c98f4f67d/aspnet_tutorial12_SelectUser_cs.pdf)</span></span>

> <span data-ttu-id="78d55-107">Dans ce didacticiel, nous allons créer une interface utilisateur avec une grille paginée, filtrable.</span><span class="sxs-lookup"><span data-stu-id="78d55-107">In this tutorial we will build a user interface with a paged, filterable grid.</span></span> <span data-ttu-id="78d55-108">En particulier, l’interface utilisateur se compose d’une série de type LinkButton pour filtrer les résultats en fonction de la lettre initiale du nom d’utilisateur et un contrôle GridView pour afficher les utilisateurs correspondants.</span><span class="sxs-lookup"><span data-stu-id="78d55-108">In particular, our user interface will consist of a series of LinkButtons for filtering the results based on the starting letter of the username, and a GridView control to show the matching users.</span></span> <span data-ttu-id="78d55-109">Nous allons commencer en répertoriant tous les comptes d’utilisateur dans un GridView.</span><span class="sxs-lookup"><span data-stu-id="78d55-109">We'll start by listing all of the user accounts in a GridView.</span></span> <span data-ttu-id="78d55-110">Ensuite, à l’étape 3, nous allons ajouter le filtre de type LinkButton.</span><span class="sxs-lookup"><span data-stu-id="78d55-110">Then, in Step 3, we will add the filter LinkButtons.</span></span> <span data-ttu-id="78d55-111">Étape 4 examine la pagination des résultats filtrés.</span><span class="sxs-lookup"><span data-stu-id="78d55-111">Step 4 looks at paging the filtered results.</span></span> <span data-ttu-id="78d55-112">L’interface construit dans les étapes 2 à 4 sera utilisé dans les didacticiels suivants pour effectuer des tâches administratives pour un compte d’utilisateur particulier.</span><span class="sxs-lookup"><span data-stu-id="78d55-112">The interface constructed in Steps 2 through 4 will be used in the subsequent tutorials to perform administrative tasks for a particular user account.</span></span>

## <a name="introduction"></a><span data-ttu-id="78d55-113">Introduction</span><span class="sxs-lookup"><span data-stu-id="78d55-113">Introduction</span></span>

<span data-ttu-id="78d55-114">Dans le <a id="_msoanchor_1"> </a> [ *affectation de rôles aux utilisateurs* ](../roles/assigning-roles-to-users-cs.md) didacticiel, nous avons créé une interface rudimentaire pour un administrateur de sélectionner un utilisateur et de gérer ses rôles.</span><span class="sxs-lookup"><span data-stu-id="78d55-114">In the <a id="_msoanchor_1"></a>[*Assigning Roles to Users*](../roles/assigning-roles-to-users-cs.md) tutorial, we created a rudimentary interface for an administrator to select a user and manage her roles.</span></span> <span data-ttu-id="78d55-115">Plus précisément, l’interface affiche l’administrateur une liste déroulante de tous les utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="78d55-115">Specifically, the interface presented the administrator with a drop-down list of all of the users.</span></span> <span data-ttu-id="78d55-116">Une telle interface est appropriée quand il existe mais utilisateur une douzaine de comptes, mais il est difficile à gérer pour les sites avec des centaines voire des milliers de comptes.</span><span class="sxs-lookup"><span data-stu-id="78d55-116">Such an interface is suitable when there are but a dozen or so user accounts, but is unwieldy for sites with hundreds or thousands of accounts.</span></span> <span data-ttu-id="78d55-117">Une grille paginée, filtrable est plus adapté interface utilisateur pour les sites Web avec des bases de l’utilisateur de grande taille.</span><span class="sxs-lookup"><span data-stu-id="78d55-117">A paged, filterable grid is more suitable user interface for websites with large user bases.</span></span>

<span data-ttu-id="78d55-118">Dans ce didacticiel, nous allons créer une interface utilisateur de ce type.</span><span class="sxs-lookup"><span data-stu-id="78d55-118">In this tutorial we will build such a user interface.</span></span> <span data-ttu-id="78d55-119">En particulier, l’interface utilisateur se compose d’une série de type LinkButton pour filtrer les résultats en fonction de la lettre initiale du nom d’utilisateur et un contrôle GridView pour afficher les utilisateurs correspondants.</span><span class="sxs-lookup"><span data-stu-id="78d55-119">In particular, our user interface will consist of a series of LinkButtons for filtering the results based on the starting letter of the username, and a GridView control to show the matching users.</span></span> <span data-ttu-id="78d55-120">Nous allons commencer en répertoriant tous les comptes d’utilisateur dans un GridView.</span><span class="sxs-lookup"><span data-stu-id="78d55-120">We'll start by listing all of the user accounts in a GridView.</span></span> <span data-ttu-id="78d55-121">Ensuite, à l’étape 3, nous allons ajouter le filtre de type LinkButton.</span><span class="sxs-lookup"><span data-stu-id="78d55-121">Then, in Step 3, we will add the filter LinkButtons.</span></span> <span data-ttu-id="78d55-122">Étape 4 examine la pagination des résultats filtrés.</span><span class="sxs-lookup"><span data-stu-id="78d55-122">Step 4 looks at paging the filtered results.</span></span> <span data-ttu-id="78d55-123">L’interface construit dans les étapes 2 à 4 sera utilisé dans les didacticiels suivants pour effectuer des tâches administratives pour un compte d’utilisateur particulier.</span><span class="sxs-lookup"><span data-stu-id="78d55-123">The interface constructed in Steps 2 through 4 will be used in the subsequent tutorials to perform administrative tasks for a particular user account.</span></span>

<span data-ttu-id="78d55-124">C’est parti !</span><span class="sxs-lookup"><span data-stu-id="78d55-124">Let's get started!</span></span>

## <a name="step-1-adding-new-aspnet-pages"></a><span data-ttu-id="78d55-125">Étape 1 : Ajout de nouvelles Pages ASP.NET</span><span class="sxs-lookup"><span data-stu-id="78d55-125">Step 1: Adding New ASP.NET Pages</span></span>

<span data-ttu-id="78d55-126">Dans ce didacticiel et les deux suivants, nous étudierons diverses fonctions associées à l’administration et les fonctionnalités.</span><span class="sxs-lookup"><span data-stu-id="78d55-126">In this tutorial and the next two we will be examining various administration-related functions and capabilities.</span></span> <span data-ttu-id="78d55-127">Nous aurons besoin d’une série de pages ASP.NET pour implémenter les rubriques examinés tout au long de ces didacticiels.</span><span class="sxs-lookup"><span data-stu-id="78d55-127">We will need a series of ASP.NET pages to implement the topics examined throughout these tutorials.</span></span> <span data-ttu-id="78d55-128">Nous allons créer ces pages et mettre à jour le plan du site.</span><span class="sxs-lookup"><span data-stu-id="78d55-128">Let's create these pages and update the site map.</span></span>

<span data-ttu-id="78d55-129">Commencez par créer un nouveau dossier dans le projet nommé `Administration`.</span><span class="sxs-lookup"><span data-stu-id="78d55-129">Start by creating a new folder in the project named `Administration`.</span></span> <span data-ttu-id="78d55-130">Ensuite, ajoutez deux nouvelles pages ASP.NET dans le dossier, en liant chaque page avec le `Site.master` page maître.</span><span class="sxs-lookup"><span data-stu-id="78d55-130">Next, add two new ASP.NET pages to the folder, linking each page with the `Site.master` master page.</span></span> <span data-ttu-id="78d55-131">Nommez les pages :</span><span class="sxs-lookup"><span data-stu-id="78d55-131">Name the pages:</span></span>

- `ManageUsers.aspx`
- `UserInformation.aspx`

<span data-ttu-id="78d55-132">Également ajouter deux pages pour le répertoire de racine du site Web : `ChangePassword.aspx` et `RecoverPassword.aspx`.</span><span class="sxs-lookup"><span data-stu-id="78d55-132">Also add two pages to the website's root directory: `ChangePassword.aspx` and `RecoverPassword.aspx`.</span></span>

<span data-ttu-id="78d55-133">Ces quatre pages devez à ce stade, deux contrôles de contenu, une pour chaque ContentPlaceHolders de la page maître : `MainContent` et `LoginContent`.</span><span class="sxs-lookup"><span data-stu-id="78d55-133">These four pages should, at this point, have two Content controls, one for each of the master page's ContentPlaceHolders: `MainContent` and `LoginContent`.</span></span>

[!code-aspx[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample1.aspx)]

<span data-ttu-id="78d55-134">Nous voulons afficher le balisage par défaut de la page maître pour la `LoginContent` ContentPlaceHolder pour ces pages.</span><span class="sxs-lookup"><span data-stu-id="78d55-134">We want to show the master page's default markup for the `LoginContent` ContentPlaceHolder for these pages.</span></span> <span data-ttu-id="78d55-135">Par conséquent, supprimez le balisage déclaratif pour la `Content2` contrôle de contenu.</span><span class="sxs-lookup"><span data-stu-id="78d55-135">Therefore, remove the declarative markup for the `Content2` Content control.</span></span> <span data-ttu-id="78d55-136">Après cela, les balises des pages doivent contenir qu’un seul contrôle de contenu.</span><span class="sxs-lookup"><span data-stu-id="78d55-136">After doing so, the pages' markup should contain just one Content control.</span></span>

<span data-ttu-id="78d55-137">Les pages ASP.NET dans le `Administration` dossier sont uniquement destinés aux utilisateurs administratifs.</span><span class="sxs-lookup"><span data-stu-id="78d55-137">The ASP.NET pages in the `Administration` folder are intended solely for administrative users.</span></span> <span data-ttu-id="78d55-138">Nous avons ajouté un rôle d’administrateurs du système dans le <a id="_msoanchor_2"> </a> [ *création et gestion des rôles* ](../roles/creating-and-managing-roles-cs.md) didacticiel ; restreindre l’accès à ces deux pages à ce rôle.</span><span class="sxs-lookup"><span data-stu-id="78d55-138">We added an Administrators role to the system in the <a id="_msoanchor_2"></a>[*Creating and Managing Roles*](../roles/creating-and-managing-roles-cs.md) tutorial; restrict access to these two pages to this role.</span></span> <span data-ttu-id="78d55-139">Pour ce faire, ajoutez un `Web.config` de fichiers à la `Administration` dossier et configurer ses `<authorization>` élément admettez que les utilisateurs du rôle Administrateurs et à refuser tous les autres.</span><span class="sxs-lookup"><span data-stu-id="78d55-139">To accomplish this, add a `Web.config` file to the `Administration` folder and configure its `<authorization>` element to admit users in the Administrators role and to deny all others.</span></span>

[!code-xml[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample2.xml)]

<span data-ttu-id="78d55-140">À ce stade l’Explorateur de solutions de votre projet doit ressembler à l’écran illustré à la Figure 1.</span><span class="sxs-lookup"><span data-stu-id="78d55-140">At this point your project's Solution Explorer should look similar to the screen shot shown in Figure 1.</span></span>

<span data-ttu-id="78d55-141">[![Un fichier Web.config et les quatre nouvelles Pages ont été ajoutés au site Web](building-an-interface-to-select-one-user-account-from-many-cs/_static/image2.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="78d55-141">[![Four New Pages and a Web.config File Have Been Added to the Website](building-an-interface-to-select-one-user-account-from-many-cs/_static/image2.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image1.png)</span></span>

<span data-ttu-id="78d55-142">**Figure 1**: Quatre nouvelles Pages et une `Web.config` fichier ont été ajoutés au site Web ([cliquez pour afficher l’image en taille réelle](building-an-interface-to-select-one-user-account-from-many-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="78d55-142">**Figure 1**: Four New Pages and a `Web.config` File Have Been Added to the Website  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image3.png))</span></span>

<span data-ttu-id="78d55-143">Enfin, mettez à jour le plan du site (`Web.sitemap`) pour inclure une entrée à la `ManageUsers.aspx` page.</span><span class="sxs-lookup"><span data-stu-id="78d55-143">Finally, update the site map (`Web.sitemap`) to include an entry to the `ManageUsers.aspx` page.</span></span> <span data-ttu-id="78d55-144">Ajoutez le code XML suivant après le `<siteMapNode>` nous avons ajouté pour les didacticiels de rôles.</span><span class="sxs-lookup"><span data-stu-id="78d55-144">Add the following XML after the `<siteMapNode>` we added for the Roles tutorials.</span></span>

[!code-xml[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample3.xml)]

<span data-ttu-id="78d55-145">Avec le plan de site mis à jour, visitez le site via un navigateur.</span><span class="sxs-lookup"><span data-stu-id="78d55-145">With the site map updated, visit the site through a browser.</span></span> <span data-ttu-id="78d55-146">Comme le montre la Figure 2, le volet de navigation de gauche maintenant inclut des éléments pour les didacticiels d’Administration.</span><span class="sxs-lookup"><span data-stu-id="78d55-146">As Figure 2 shows, the navigation on the left now includes items for the Administration tutorials.</span></span>

<span data-ttu-id="78d55-147">[![Le plan du Site comporte un nœud intitulé Administration des utilisateurs](building-an-interface-to-select-one-user-account-from-many-cs/_static/image5.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="78d55-147">[![The Site Map Includes a Node Titled User Administration](building-an-interface-to-select-one-user-account-from-many-cs/_static/image5.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image4.png)</span></span>

<span data-ttu-id="78d55-148">**Figure 2**: Le plan de Site inclut un nœud intitulé l’Administration des utilisateurs ([cliquez pour afficher l’image en taille réelle](building-an-interface-to-select-one-user-account-from-many-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="78d55-148">**Figure 2**: The Site Map Includes a Node Titled User Administration  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image6.png))</span></span>

## <a name="step-2-listing-all-user-accounts-in-a-gridview"></a><span data-ttu-id="78d55-149">Étape 2 : Liste de tous les comptes d’utilisateur dans un GridView</span><span class="sxs-lookup"><span data-stu-id="78d55-149">Step 2: Listing All User Accounts in a GridView</span></span>

<span data-ttu-id="78d55-150">Notre objectif final pour ce didacticiel consiste à créer une grille paginée, filtrable par le biais duquel un administrateur peut sélectionner un compte d’utilisateur à gérer.</span><span class="sxs-lookup"><span data-stu-id="78d55-150">Our end goal for this tutorial is to create a paged, filterable grid through which an administrator can select a user account to manage.</span></span> <span data-ttu-id="78d55-151">Commençons par liste *tous les* les utilisateurs dans un GridView.</span><span class="sxs-lookup"><span data-stu-id="78d55-151">Let's start by listing *all* users in a GridView.</span></span> <span data-ttu-id="78d55-152">Une fois cette opération terminée, nous allons ajouter le filtrage et de pagination interfaces et de fonctionnalités.</span><span class="sxs-lookup"><span data-stu-id="78d55-152">Once this is complete, we will add the filtering and paging interfaces and functionality.</span></span>

<span data-ttu-id="78d55-153">Ouvrir le `ManageUsers.aspx` page dans le `Administration` dossier et en ajouter un GridView, définissant son `ID` à `UserAccounts`.</span><span class="sxs-lookup"><span data-stu-id="78d55-153">Open the `ManageUsers.aspx` page in the `Administration` folder and add a GridView, setting its `ID` to `UserAccounts`.</span></span> <span data-ttu-id="78d55-154">Dans un instant, nous allons écrire du code pour lier l’ensemble des comptes d’utilisateur au GridView en utilisant le `Membership` la classe `GetAllUsers` (méthode).</span><span class="sxs-lookup"><span data-stu-id="78d55-154">In a moment, we will write code to bind the set of user accounts to the GridView using the `Membership` class's `GetAllUsers` method.</span></span> <span data-ttu-id="78d55-155">Comme expliqué dans les didacticiels précédents, la méthode GetAllUsers renvoie un `MembershipUserCollection` objet, qui est une collection de `MembershipUser` objets.</span><span class="sxs-lookup"><span data-stu-id="78d55-155">As discussed in earlier tutorials, the GetAllUsers method returns a `MembershipUserCollection` object, which is a collection of `MembershipUser` objects.</span></span> <span data-ttu-id="78d55-156">Chaque `MembershipUser` dans la collection inclut des propriétés telles que `UserName`, `Email`, `IsApproved`, et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="78d55-156">Each `MembershipUser` in the collection includes properties like `UserName`, `Email`, `IsApproved`, and so on.</span></span>

<span data-ttu-id="78d55-157">Pour afficher les informations de compte d’utilisateur de votre choix dans le contrôle GridView, définissez le GridView `AutoGenerateColumns` False à la propriété et ajoutez BoundFields pour le `UserName`, `Email`, et `Comment` propriétés et CheckBoxFields pour le `IsApproved`, `IsLockedOut`, et `IsOnline` propriétés.</span><span class="sxs-lookup"><span data-stu-id="78d55-157">In order to display the desired user account information in the GridView, set the GridView's `AutoGenerateColumns` property to False and add BoundFields for the `UserName`, `Email`, and `Comment` properties and CheckBoxFields for the `IsApproved`, `IsLockedOut`, and `IsOnline` properties.</span></span> <span data-ttu-id="78d55-158">Cette configuration peut être appliquée par un balisage déclaratif du contrôle ou par le biais de la boîte de dialogue champs.</span><span class="sxs-lookup"><span data-stu-id="78d55-158">This configuration can be applied through the control's declarative markup or via the Fields dialog box.</span></span> <span data-ttu-id="78d55-159">Figure 3 illustre une capture d’écran des champs de la boîte de dialogue une fois que la case à cocher des champs de génération automatique a été désactivée et les BoundFields CheckBoxFields ont été ajouté et configuré.</span><span class="sxs-lookup"><span data-stu-id="78d55-159">Figure 3 shows a screen shot of the Fields dialog box after the Auto-generate fields checkbox has been unchecked and the BoundFields and CheckBoxFields have been added and configured.</span></span>

<span data-ttu-id="78d55-160">[![Ajouter trois BoundFields et trois CheckBoxFields au GridView](building-an-interface-to-select-one-user-account-from-many-cs/_static/image8.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="78d55-160">[![Add Three BoundFields and Three CheckBoxFields to the GridView](building-an-interface-to-select-one-user-account-from-many-cs/_static/image8.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image7.png)</span></span>

<span data-ttu-id="78d55-161">**Figure 3**: Ajouter trois BoundFields et trois CheckBoxFields au GridView ([cliquez pour afficher l’image en taille réelle](building-an-interface-to-select-one-user-account-from-many-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="78d55-161">**Figure 3**: Add Three BoundFields and Three CheckBoxFields to the GridView  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image9.png))</span></span>

<span data-ttu-id="78d55-162">Après avoir configuré votre GridView, assurez-vous que son balisage déclaratif ressemble à ceci :</span><span class="sxs-lookup"><span data-stu-id="78d55-162">After configuring your GridView, ensure that its declarative markup resembles the following:</span></span>

[!code-aspx[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample4.aspx)]

<span data-ttu-id="78d55-163">Ensuite, nous devons écrire du code qui lie les comptes d’utilisateur pour le contrôle GridView.</span><span class="sxs-lookup"><span data-stu-id="78d55-163">Next, we need to write code that binds the user accounts to the GridView.</span></span> <span data-ttu-id="78d55-164">Créez une méthode nommée `BindUserAccounts` pour effectuer cette tâche et appelez-la à partir du `Page_Load` Gestionnaire d’événements sur la première visite de page.</span><span class="sxs-lookup"><span data-stu-id="78d55-164">Create a method named `BindUserAccounts` to perform this task and then call it from the `Page_Load` event handler on the first page visit.</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample5.cs)]

<span data-ttu-id="78d55-165">Prenez un moment pour tester la page via un navigateur.</span><span class="sxs-lookup"><span data-stu-id="78d55-165">Take a moment to test the page through a browser.</span></span> <span data-ttu-id="78d55-166">Comme le montre la Figure 4, le `UserAccounts` GridView répertorie le nom d’utilisateur, adresse de messagerie et autres informations pertinentes de compte pour tous les utilisateurs dans le système.</span><span class="sxs-lookup"><span data-stu-id="78d55-166">As Figure 4 shows, the `UserAccounts` GridView lists the username, email address, and other pertinent account information for all users in the system.</span></span>

<span data-ttu-id="78d55-167">[![Les comptes d’utilisateur sont répertoriés dans le contrôle GridView](building-an-interface-to-select-one-user-account-from-many-cs/_static/image11.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="78d55-167">[![The User Accounts are Listed in the GridView](building-an-interface-to-select-one-user-account-from-many-cs/_static/image11.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image10.png)</span></span>

<span data-ttu-id="78d55-168">**Figure 4**: Les comptes d’utilisateur sont répertoriés dans le contrôle GridView ([cliquez pour afficher l’image en taille réelle](building-an-interface-to-select-one-user-account-from-many-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="78d55-168">**Figure 4**: The User Accounts are Listed in the GridView  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image12.png))</span></span>

## <a name="step-3-filtering-the-results-by-the-first-letter-of-the-username"></a><span data-ttu-id="78d55-169">Étape 3 : Filtrage des résultats selon la première lettre du nom d’utilisateur</span><span class="sxs-lookup"><span data-stu-id="78d55-169">Step 3: Filtering the Results by the First Letter of the Username</span></span>

<span data-ttu-id="78d55-170">Actuellement le `UserAccounts` GridView affiche *tous les* des comptes d’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="78d55-170">Currently the `UserAccounts` GridView shows *all* of the user accounts.</span></span> <span data-ttu-id="78d55-171">Pour les sites Web avec des centaines voire des milliers de comptes d’utilisateur, il est impératif que l’utilisateur soit en mesure de réduire rapidement la taille les comptes affichés.</span><span class="sxs-lookup"><span data-stu-id="78d55-171">For websites with hundreds or thousands of user accounts, it is imperative that user be able to quickly pare down the displayed accounts.</span></span> <span data-ttu-id="78d55-172">Cela est possible en ajoutant le filtrage de type LinkButton à la page.</span><span class="sxs-lookup"><span data-stu-id="78d55-172">This can be accomplished by adding filtering LinkButtons to the page.</span></span> <span data-ttu-id="78d55-173">Nous allons ajouter 27 LinkButton à la page : un intitulé tous en même temps qu’un LinkButton pour chaque lettre de l’alphabet.</span><span class="sxs-lookup"><span data-stu-id="78d55-173">Let's add 27 LinkButtons to the page: one titled All along with one LinkButton for each letter of the alphabet.</span></span> <span data-ttu-id="78d55-174">Si un visiteur clique sur le LinkButton tous, le contrôle GridView affiche tous les utilisateurs.</span><span class="sxs-lookup"><span data-stu-id="78d55-174">If a visitor clicks the All LinkButton, the GridView will show all of the users.</span></span> <span data-ttu-id="78d55-175">S’il clique sur une lettre particulier, seuls les utilisateurs dont nom d’utilisateur commence par la lettre sélectionnée seront affichera.</span><span class="sxs-lookup"><span data-stu-id="78d55-175">If they click a particular letter, only those users whose username starts with the selected letter will be displayed.</span></span>

<span data-ttu-id="78d55-176">Notre première tâche consiste à ajouter des contrôles LinkButton 27.</span><span class="sxs-lookup"><span data-stu-id="78d55-176">Our first task is to add the 27 LinkButton controls.</span></span> <span data-ttu-id="78d55-177">Une option serait de créer le 27 LinkButton de façon déclarative, à la fois.</span><span class="sxs-lookup"><span data-stu-id="78d55-177">One option would be to create the 27 LinkButtons declaratively, one at a time.</span></span> <span data-ttu-id="78d55-178">Une approche plus souple consiste à utiliser un contrôle Repeater avec un `ItemTemplate` qui restitue le LinkButton et lie ensuite les options de filtrage pour le contrôle Repeater comme un `string` tableau.</span><span class="sxs-lookup"><span data-stu-id="78d55-178">A more flexible approach is to use a Repeater control with an `ItemTemplate` that renders a LinkButton and then binds the filtering options to the Repeater as a `string` array.</span></span>

<span data-ttu-id="78d55-179">Commencez par ajouter un contrôle Repeater à la page ci-dessus le `UserAccounts` GridView.</span><span class="sxs-lookup"><span data-stu-id="78d55-179">Start by adding a Repeater control to the page above the `UserAccounts` GridView.</span></span> <span data-ttu-id="78d55-180">Définir le Repeater `ID` propriété `FilteringUI`.</span><span class="sxs-lookup"><span data-stu-id="78d55-180">Set the Repeater's `ID` property to `FilteringUI`.</span></span> <span data-ttu-id="78d55-181">Configurer des modèles de répéteur afin que son `ItemTemplate` restitue un LinkButton dont `Text` et `CommandName` propriétés sont liées à l’élément de tableau actuel.</span><span class="sxs-lookup"><span data-stu-id="78d55-181">Configure the Repeater's templates so that its `ItemTemplate` renders a LinkButton whose `Text` and `CommandName` properties are bound to the current array element.</span></span> <span data-ttu-id="78d55-182">Comme nous l’avons vu dans la <a id="_msoanchor_3"> </a> [ *affectation de rôles aux utilisateurs* ](../roles/assigning-roles-to-users-cs.md) didacticiel, cela peut être accompli à l’aide de la `Container.DataItem` syntaxe de liaison de données.</span><span class="sxs-lookup"><span data-stu-id="78d55-182">As we saw in the <a id="_msoanchor_3"></a>[*Assigning Roles to Users*](../roles/assigning-roles-to-users-cs.md) tutorial, this can be accomplished using the `Container.DataItem` databinding syntax.</span></span> <span data-ttu-id="78d55-183">Utiliser le Repeater `SeparatorTemplate` pour afficher une ligne verticale entre chaque lien.</span><span class="sxs-lookup"><span data-stu-id="78d55-183">Use the Repeater's `SeparatorTemplate` to display a vertical line between each link.</span></span>

[!code-aspx[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample6.aspx)]

<span data-ttu-id="78d55-184">Pour remplir ce Repeater avec les options de filtrage de votre choisis, créez une méthode nommée `BindFilteringUI`.</span><span class="sxs-lookup"><span data-stu-id="78d55-184">To populate this Repeater with the desired filtering options, create a method named `BindFilteringUI`.</span></span> <span data-ttu-id="78d55-185">Veillez à appeler cette méthode à partir de la `Page_Load` Gestionnaire d’événements sur le premier chargement de page.</span><span class="sxs-lookup"><span data-stu-id="78d55-185">Be sure to call this method from the `Page_Load` event handler on the first page load.</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample7.cs)]

<span data-ttu-id="78d55-186">Cette méthode spécifie les options de filtrage en tant qu’éléments dans le `string` tableau `filterOptions`.</span><span class="sxs-lookup"><span data-stu-id="78d55-186">This method specifies the filtering options as elements in the `string` array `filterOptions`.</span></span> <span data-ttu-id="78d55-187">Pour chaque élément du tableau, le contrôle Repeater affichera un LinkButton avec son `Text` et `CommandName` propriétés assignées à la valeur de l’élément de tableau.</span><span class="sxs-lookup"><span data-stu-id="78d55-187">For each element in the array, the Repeater will render a LinkButton with its `Text` and `CommandName` properties assigned to the value of the array element.</span></span>

<span data-ttu-id="78d55-188">La figure 5 illustre le `ManageUsers.aspx` page lorsqu’ils sont affichés via un navigateur.</span><span class="sxs-lookup"><span data-stu-id="78d55-188">Figure 5 shows the `ManageUsers.aspx` page when viewed through a browser.</span></span>

<span data-ttu-id="78d55-189">[![Le contrôle Repeater répertorie 27 LinkButton de filtrage](building-an-interface-to-select-one-user-account-from-many-cs/_static/image14.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="78d55-189">[![The Repeater Lists 27 Filtering LinkButtons](building-an-interface-to-select-one-user-account-from-many-cs/_static/image14.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image13.png)</span></span>

<span data-ttu-id="78d55-190">**Figure 5**: Le Repeater répertorie 27 filtrage type LinkButton ([cliquez pour afficher l’image en taille réelle](building-an-interface-to-select-one-user-account-from-many-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="78d55-190">**Figure 5**: The Repeater Lists 27 Filtering LinkButtons  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image15.png))</span></span>

> [!NOTE]
> <span data-ttu-id="78d55-191">Noms d’utilisateur peut commencer par n’importe quel caractère, y compris des nombres et signes de ponctuation.</span><span class="sxs-lookup"><span data-stu-id="78d55-191">Usernames may start with any character, including numbers and punctuation.</span></span> <span data-ttu-id="78d55-192">Pour afficher ces comptes, l’administrateur devra utiliser l’option LinkButton tous les.</span><span class="sxs-lookup"><span data-stu-id="78d55-192">In order to view these accounts, the administrator will have to use the All LinkButton option.</span></span> <span data-ttu-id="78d55-193">Sinon, vous pouvez ajouter un LinkButton pour retourner tous les comptes d’utilisateur qui commencent par un nombre.</span><span class="sxs-lookup"><span data-stu-id="78d55-193">Alternatively, you could add a LinkButton to return all user accounts that start with a number.</span></span> <span data-ttu-id="78d55-194">Je laisse cela en guise d’exercice pour le lecteur.</span><span class="sxs-lookup"><span data-stu-id="78d55-194">I leave this as an exercise for the reader.</span></span>

<span data-ttu-id="78d55-195">Cliquez simplement sur le filtrage de type LinkButton entraîne une publication et déclenche le Repeater `ItemCommand` événement, mais il n’existe aucune modification dans la grille, car il nous faut encore à écrire du code pour filtrer les résultats.</span><span class="sxs-lookup"><span data-stu-id="78d55-195">Clicking any of the filtering LinkButtons causes a postback and raises the Repeater's `ItemCommand` event, but there's no change in the grid because we've yet to write any code to filter the results.</span></span> <span data-ttu-id="78d55-196">Le `Membership` classe inclut un [ `FindUsersByName` méthode](https://technet.microsoft.com/library/system.web.security.membership.findusersbyname.aspx) qui retourne ces comptes d’utilisateur dont nom d’utilisateur correspond à un modèle de recherche spécifié.</span><span class="sxs-lookup"><span data-stu-id="78d55-196">The `Membership` class includes a [`FindUsersByName` method](https://technet.microsoft.com/library/system.web.security.membership.findusersbyname.aspx) that returns those user accounts whose username matches a specified search pattern.</span></span> <span data-ttu-id="78d55-197">Nous pouvons utiliser cette méthode pour récupérer uniquement les comptes d’utilisateurs dont les noms d’utilisateur commencent par la lettre spécifiée par la `CommandName` du contrôle LinkButton filtré qui a été cliqué.</span><span class="sxs-lookup"><span data-stu-id="78d55-197">We can use this method to retrieve just those user accounts whose usernames start with the letter specified by the `CommandName` of the filtered LinkButton that was clicked.</span></span>

<span data-ttu-id="78d55-198">Commencez par la mise à jour le `ManageUser.aspx` de classe code-behind de la page afin qu’il inclue une propriété nommée `UsernameToMatch`.</span><span class="sxs-lookup"><span data-stu-id="78d55-198">Start by updating the `ManageUser.aspx` page's code-behind class so that it includes a property named `UsernameToMatch`.</span></span> <span data-ttu-id="78d55-199">Cette propriété conserve la chaîne de filtre de nom d’utilisateur sur des publications :</span><span class="sxs-lookup"><span data-stu-id="78d55-199">This property persists the username filter string across postbacks:</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample8.cs)]

<span data-ttu-id="78d55-200">Le `UsernameToMatch` propriété stocke sa valeur, elle est assignée dans le `ViewState` collection à l’aide de la clé UsernameToMatch.</span><span class="sxs-lookup"><span data-stu-id="78d55-200">The `UsernameToMatch` property stores its value it is assigned into the `ViewState` collection using the key UsernameToMatch.</span></span> <span data-ttu-id="78d55-201">Lorsque la valeur de cette propriété est en lecture, il vérifie si une valeur existe dans le `ViewState` collection ; sinon, elle retourne la valeur par défaut, une chaîne vide.</span><span class="sxs-lookup"><span data-stu-id="78d55-201">When this property's value is read, it checks to see if a value exists in the `ViewState` collection; if not, it returns the default value, an empty string.</span></span> <span data-ttu-id="78d55-202">Le `UsernameToMatch` propriété présente un modèle courant, à savoir rendre une valeur d’état d’affichage afin que toutes les modifications à la propriété sont conservées entre les postbacks.</span><span class="sxs-lookup"><span data-stu-id="78d55-202">The `UsernameToMatch` property exhibits a common pattern, namely persisting a value to view state so that any changes to the property are persisted across postbacks.</span></span> <span data-ttu-id="78d55-203">Pour plus d’informations sur ce modèle, consultez [état d’affichage ASP.NET compréhension](https://msdn.microsoft.com/library/ms972976.aspx).</span><span class="sxs-lookup"><span data-stu-id="78d55-203">For more information on this pattern, read [Understanding ASP.NET View State](https://msdn.microsoft.com/library/ms972976.aspx).</span></span>

<span data-ttu-id="78d55-204">Ensuite, mettez à jour le `BindUserAccounts` méthode afin qu’au lieu de l’appel `Membership.GetAllUsers`, il appelle `Membership.FindUsersByName`, en passant la valeur de la `UsernameToMatch` propriété ajoutée avec le caractère générique SQL, %.</span><span class="sxs-lookup"><span data-stu-id="78d55-204">Next, update the `BindUserAccounts` method so that instead of calling `Membership.GetAllUsers`, it calls `Membership.FindUsersByName`, passing in the value of the `UsernameToMatch` property appended with the SQL wildcard character, %.</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample9.cs)]

<span data-ttu-id="78d55-205">Pour afficher uniquement les utilisateurs dont nom d’utilisateur commence par la lettre A, affectez la `UsernameToMatch` à une propriété, puis appelez `BindUserAccounts`.</span><span class="sxs-lookup"><span data-stu-id="78d55-205">To display just those users whose username starts with the letter A, set the `UsernameToMatch` property to A and then call `BindUserAccounts`.</span></span> <span data-ttu-id="78d55-206">Cela entraînerait un appel à `Membership.FindUsersByName("A%")`, qui retournera tous les utilisateurs dont nom d’utilisateur commence par A. de même, pour retourner *tous les* affecter des utilisateurs, une chaîne vide à la `UsernameToMatch` propriété afin que le `BindUserAccounts` sera (méthode) appeler `Membership.FindUsersByName("%")`, ce qui permet le retour de tous les comptes d’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="78d55-206">This would result in a call to `Membership.FindUsersByName("A%")`, which will return all users whose username starts with A. Likewise, to return *all* users, assign an empty string to the `UsernameToMatch` property so that the `BindUserAccounts` method will invoke `Membership.FindUsersByName("%")`, thereby returning all user accounts.</span></span>

<span data-ttu-id="78d55-207">Créer un gestionnaire d’événements pour le Repeater `ItemCommand` événement.</span><span class="sxs-lookup"><span data-stu-id="78d55-207">Create an event handler for the Repeater's `ItemCommand` event.</span></span> <span data-ttu-id="78d55-208">Cet événement est déclenché chaque fois qu’un du filtre de type LinkButton est activé ; Il est passé de l’utilisateur a cliqué dessu LinkButton `CommandName` valeur via le `RepeaterCommandEventArgs` objet.</span><span class="sxs-lookup"><span data-stu-id="78d55-208">This event is raised whenever one of the filter LinkButtons is clicked; it is passed the clicked LinkButton's `CommandName` value through the `RepeaterCommandEventArgs` object.</span></span> <span data-ttu-id="78d55-209">Vous devez affecter la valeur appropriée pour le `UsernameToMatch` propriété, puis appelez le `BindUserAccounts` (méthode).</span><span class="sxs-lookup"><span data-stu-id="78d55-209">We need to assign the appropriate value to the `UsernameToMatch` property and then call the `BindUserAccounts` method.</span></span> <span data-ttu-id="78d55-210">Si le `CommandName` est All, affectez une chaîne vide à `UsernameToMatch` afin que tous les comptes d’utilisateur sont affichés.</span><span class="sxs-lookup"><span data-stu-id="78d55-210">If the `CommandName` is All, assign an empty string to `UsernameToMatch` so that all user accounts are displayed.</span></span> <span data-ttu-id="78d55-211">Sinon, assignez la `CommandName` valeur `UsernameToMatch`.</span><span class="sxs-lookup"><span data-stu-id="78d55-211">Otherwise, assign the `CommandName` value to `UsernameToMatch`.</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample10.cs)]

<span data-ttu-id="78d55-212">Avec ce code en place, testez la fonctionnalité de filtrage.</span><span class="sxs-lookup"><span data-stu-id="78d55-212">With this code in place, test out the filtering functionality.</span></span> <span data-ttu-id="78d55-213">Lorsque la page est visitée en premier, tous les comptes d’utilisateur sont affichés (voir la Figure 5).</span><span class="sxs-lookup"><span data-stu-id="78d55-213">When the page is first visited, all user accounts are displayed (refer back to Figure 5).</span></span> <span data-ttu-id="78d55-214">En cliquant sur le LinkButton A entraîne une publication (postback) et filtre les résultats, affichant uniquement les comptes d’utilisateur qui commencent par un.</span><span class="sxs-lookup"><span data-stu-id="78d55-214">Clicking the A LinkButton causes a postback and filters the results, displaying only those user accounts that start with A .</span></span>

<span data-ttu-id="78d55-215">[![Le filtrage de type LinkButton permet d’afficher les utilisateurs dont nom d’utilisateur commence par une lettre](building-an-interface-to-select-one-user-account-from-many-cs/_static/image17.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="78d55-215">[![Use the Filtering LinkButtons to Display those Users Whose Username Starts with a Certain Letter](building-an-interface-to-select-one-user-account-from-many-cs/_static/image17.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image16.png)</span></span>

<span data-ttu-id="78d55-216">**Figure 6**: Le filtrage de type LinkButton permet d’afficher les utilisateurs dont nom d’utilisateur commence par une lettre certains ([cliquez pour afficher l’image en taille réelle](building-an-interface-to-select-one-user-account-from-many-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="78d55-216">**Figure 6**: Use the Filtering LinkButtons to Display those Users Whose Username Starts with a Certain Letter  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image18.png))</span></span>

## <a name="step-4-updating-the-gridview-to-use-paging"></a><span data-ttu-id="78d55-217">Étape 4 : Le contrôle GridView pour utiliser la pagination de la mise à jour</span><span class="sxs-lookup"><span data-stu-id="78d55-217">Step 4: Updating the GridView to Use Paging</span></span>

<span data-ttu-id="78d55-218">Le contrôle GridView indiqué Figures 5 et 6 répertorie tous les enregistrements retournés à partir de la `FindUsersByName` (méthode).</span><span class="sxs-lookup"><span data-stu-id="78d55-218">The GridView shown in Figures 5 and 6 lists all of the records returned from the `FindUsersByName` method.</span></span> <span data-ttu-id="78d55-219">S’il existe des centaines voire des milliers de comptes d’utilisateur, cela peut entraîner de surcharge d’informations lorsque vous affichez tous les comptes (comme c’est le cas lorsque vous cliquez sur le LinkButton tous ou lors de la visite initialement la page).</span><span class="sxs-lookup"><span data-stu-id="78d55-219">If there are hundreds or thousands of user accounts this can lead to information overload when viewing all of the accounts (as is the case when clicking the All LinkButton or when initially visiting the page).</span></span> <span data-ttu-id="78d55-220">Pour aider à présenter les comptes d’utilisateur dans des segments plus gérables, nous allons configurer le contrôle GridView pour afficher les 10 comptes d’utilisateur à la fois.</span><span class="sxs-lookup"><span data-stu-id="78d55-220">To help present the user accounts in more manageable chunks, let's configure the GridView to display 10 user accounts at a time.</span></span>

<span data-ttu-id="78d55-221">Le contrôle GridView propose deux types de pagination :</span><span class="sxs-lookup"><span data-stu-id="78d55-221">The GridView control offers two types of paging:</span></span>

- <span data-ttu-id="78d55-222">**La pagination par défaut** - facile à implémenter, mais inefficace.</span><span class="sxs-lookup"><span data-stu-id="78d55-222">**Default paging** - easy to implement, but inefficient.</span></span> <span data-ttu-id="78d55-223">En bref, avec le contrôle GridView d’échange par défaut attend *tous les* des enregistrements à partir de sa source de données.</span><span class="sxs-lookup"><span data-stu-id="78d55-223">In a nutshell, with default paging the GridView expects *all* of the records from its data source.</span></span> <span data-ttu-id="78d55-224">Il affiche ensuite uniquement la page d’enregistrements appropriée.</span><span class="sxs-lookup"><span data-stu-id="78d55-224">It then only displays the appropriate page of records.</span></span>
- <span data-ttu-id="78d55-225">**La pagination personnalisée** -nécessite plus de travail à implémenter, mais est plus efficace que la pagination par défaut, car avec personnalisé la pagination des données source retourne uniquement l’ensemble précis d’enregistrements à afficher.</span><span class="sxs-lookup"><span data-stu-id="78d55-225">**Custom paging** - requires more work to implement, but is more efficient than default paging because with custom paging the data source returns only the precise set of records to display.</span></span>

<span data-ttu-id="78d55-226">La différence de performances entre la valeur par défaut et la pagination personnalisée peut être très importante lors de la pagination par le biais des milliers d’enregistrements.</span><span class="sxs-lookup"><span data-stu-id="78d55-226">The performance difference between default and custom paging can be quite substantial when paging through thousands of records.</span></span> <span data-ttu-id="78d55-227">Étant donné que nous créons cette interface en supposant qu’il est peut-être des centaines voire des milliers de comptes d’utilisateur, nous allons utiliser la pagination personnalisée.</span><span class="sxs-lookup"><span data-stu-id="78d55-227">Because we are building this interface assuming that there may be hundreds or thousands of user accounts, let's use custom paging.</span></span>

> [!NOTE]
> <span data-ttu-id="78d55-228">Pour une discussion plus détaillée sur les différences entre la valeur par défaut et la pagination personnalisée, ainsi que les problèmes liés à l’implémentation de la pagination personnalisée, consultez [efficacement la pagination par le biais d’importants volumes de données](https://asp.net/learn/data-access/tutorial-25-cs.aspx).</span><span class="sxs-lookup"><span data-stu-id="78d55-228">For a more thorough discussion on the differences between default and custom paging, as well as the challenges involved in implementing custom paging, refer to [Efficiently Paging Through Large Amounts of Data](https://asp.net/learn/data-access/tutorial-25-cs.aspx).</span></span> <span data-ttu-id="78d55-229">Pour une analyse de la différence de performances entre la valeur par défaut et la pagination personnalisée, consultez [la pagination personnalisée dans ASP.NET avec SQL Server 2005](http://aspnet.4guysfromrolla.com/articles/031506-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="78d55-229">For some analysis of the performance difference between default and custom paging, see [Custom Paging in ASP.NET with SQL Server 2005](http://aspnet.4guysfromrolla.com/articles/031506-1.aspx).</span></span>

<span data-ttu-id="78d55-230">Pour implémenter la pagination personnalisée, nous devons tout d’abord un mécanisme permettant de récupérer le sous-ensemble précis d’enregistrements affichés par le contrôle GridView.</span><span class="sxs-lookup"><span data-stu-id="78d55-230">To implement custom paging we first need some mechanism by which to retrieve the precise subset of records being displayed by the GridView.</span></span> <span data-ttu-id="78d55-231">La bonne nouvelle est que le `Membership` la classe `FindUsersByName` méthode a une surcharge qui nous permet de spécifier l’index de page et la taille de page et retourne uniquement les comptes d’utilisateur qui se situent dans la plage d’enregistrements.</span><span class="sxs-lookup"><span data-stu-id="78d55-231">The good news is that the `Membership` class's `FindUsersByName` method has an overload that allows us to specify the page index and page size, and returns only those user accounts that fall within that range of records.</span></span>

<span data-ttu-id="78d55-232">En particulier, cette surcharge possède la signature suivante : [ `FindUsersByName(usernameToMatch, pageIndex, pageSize, totalRecords)` ](https://msdn.microsoft.com/library/fa5st8b2.aspx).</span><span class="sxs-lookup"><span data-stu-id="78d55-232">In particular, this overload has the following signature: [`FindUsersByName(usernameToMatch, pageIndex, pageSize, totalRecords)`](https://msdn.microsoft.com/library/fa5st8b2.aspx).</span></span>

<span data-ttu-id="78d55-233">Le *pageIndex* paramètre spécifie la page des comptes d’utilisateur à renvoyer ; *pageSize* indique le nombre d’enregistrements à afficher par page.</span><span class="sxs-lookup"><span data-stu-id="78d55-233">The *pageIndex* parameter specifies the page of user accounts to return; *pageSize* indicates how many records to display per page.</span></span> <span data-ttu-id="78d55-234">Le *totalRecords* paramètre est un `out` paramètre qui retourne le nombre de comptes utilisateur total dans le magasin de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="78d55-234">The *totalRecords* parameter is an `out` parameter that returns the number of total user accounts in the user store.</span></span>

> [!NOTE]
> <span data-ttu-id="78d55-235">Les données retournées par `FindUsersByName` est triée par nom d’utilisateur ; les critères de tri ne peut pas être personnalisées.</span><span class="sxs-lookup"><span data-stu-id="78d55-235">The data returned by `FindUsersByName` is sorted by username; the sort criteria cannot be customized.</span></span>

<span data-ttu-id="78d55-236">Le contrôle GridView peut être configuré pour utiliser la pagination personnalisée, mais uniquement lorsqu’elle est liée à un contrôle ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="78d55-236">The GridView can be configured to utilize custom paging, but only when bound to an ObjectDataSource control.</span></span> <span data-ttu-id="78d55-237">Pour le contrôle ObjectDataSource implémenter la pagination personnalisée, elle nécessite deux méthodes : une qui est passé à un index de ligne de début et le nombre maximal d’enregistrements à afficher, et retourne le sous-ensemble précis d’enregistrements qui sont comprises dans cette étendue ; et une méthode qui retourne le nombre total d’enregistrements en cours de pagination via.</span><span class="sxs-lookup"><span data-stu-id="78d55-237">For the ObjectDataSource control to implement custom paging, it requires two methods: one that is passed a start row index and the maximum number of records to display, and returns the precise subset of records that fall within that span; and a method that returns the total number of records being paged through.</span></span> <span data-ttu-id="78d55-238">Le `FindUsersByName` surcharge accepte un index de page et la taille de la page et retourne le nombre total d’enregistrements via un `out` paramètre.</span><span class="sxs-lookup"><span data-stu-id="78d55-238">The `FindUsersByName` overload accepts a page index and page size, and returns the total number of records through an `out` parameter.</span></span> <span data-ttu-id="78d55-239">Par conséquent, il existe une incompatibilité d’interface ici.</span><span class="sxs-lookup"><span data-stu-id="78d55-239">So there is an interface mismatch here.</span></span>

<span data-ttu-id="78d55-240">Une option serait de créer une classe proxy qui expose l’interface ObjectDataSource attend et appelle en interne la `FindUsersByName` (méthode).</span><span class="sxs-lookup"><span data-stu-id="78d55-240">One option would be to create a proxy class that exposes the interface the ObjectDataSource expects, and then internally calls the `FindUsersByName` method.</span></span> <span data-ttu-id="78d55-241">Une autre option - et celui que nous allons utiliser pour cet article - sont créer notre propre interface d’échange et l’utiliser au lieu de l’interface de pagination intégrée du contrôle GridView.</span><span class="sxs-lookup"><span data-stu-id="78d55-241">Another option - and the one we'll use for this article - is to create our own paging interface and use that instead of the GridView's built-in paging interface.</span></span>

### <a name="creating-a-first-previous-next-last-paging-interface"></a><span data-ttu-id="78d55-242">Création d’un premier, précédent, ensuite, la dernière Interface de pagination</span><span class="sxs-lookup"><span data-stu-id="78d55-242">Creating a First, Previous, Next, Last Paging Interface</span></span>

<span data-ttu-id="78d55-243">Commençons par créer une interface de pagination en premier, précédent, suivant et dernier LinkButton.</span><span class="sxs-lookup"><span data-stu-id="78d55-243">Let's build a paging interface with First, Previous, Next, and Last LinkButtons.</span></span> <span data-ttu-id="78d55-244">Le premier LinkButton, lorsque vous cliquez dessus, dirige l’utilisateur à la première page de données, tandis que le précédent lui retourne à la page précédente.</span><span class="sxs-lookup"><span data-stu-id="78d55-244">The First LinkButton, when clicked, will take the user to the first page of data, whereas Previous will return him to the previous page.</span></span> <span data-ttu-id="78d55-245">De même, suivant et dernier déplacera l’utilisateur à la page suivante et dernière, respectivement.</span><span class="sxs-lookup"><span data-stu-id="78d55-245">Likewise, Next and Last will move the user to the next and last page, respectively.</span></span> <span data-ttu-id="78d55-246">Ajoutez les quatre contrôles LinkButton sous le `UserAccounts` GridView.</span><span class="sxs-lookup"><span data-stu-id="78d55-246">Add the four LinkButton controls beneath the `UserAccounts` GridView.</span></span>

[!code-aspx[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample11.aspx)]

<span data-ttu-id="78d55-247">Ensuite, créez un gestionnaire d’événements pour chacun du LinkButton `Click` événements.</span><span class="sxs-lookup"><span data-stu-id="78d55-247">Next, create an event handler for each of the LinkButton's `Click` events.</span></span>

<span data-ttu-id="78d55-248">La figure 7 illustre le quatre LinkButton lorsqu’ils sont affichés via la vue de Visual Web Developer Design.</span><span class="sxs-lookup"><span data-stu-id="78d55-248">Figure 7 shows the four LinkButtons when viewed through the Visual Web Developer Design view.</span></span>

<span data-ttu-id="78d55-249">[![Ajouter tout d’abord, précédent, suivant, et le dernier type LinkButton sous le contrôle GridView](building-an-interface-to-select-one-user-account-from-many-cs/_static/image20.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="78d55-249">[![Add First, Previous, Next, and Last LinkButtons Beneath the GridView](building-an-interface-to-select-one-user-account-from-many-cs/_static/image20.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image19.png)</span></span>

<span data-ttu-id="78d55-250">**Figure 7**: Ajoutez tout d’abord, précédent, suivant et dernier LinkButton sous GridView ([cliquez pour afficher l’image en taille réelle](building-an-interface-to-select-one-user-account-from-many-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="78d55-250">**Figure 7**: Add First, Previous, Next, and Last LinkButtons Beneath the GridView  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image21.png))</span></span>

### <a name="keeping-track-of-the-current-page-index"></a><span data-ttu-id="78d55-251">Suivi de l’Index de Page en cours</span><span class="sxs-lookup"><span data-stu-id="78d55-251">Keeping Track of the Current Page Index</span></span>

<span data-ttu-id="78d55-252">Lorsqu’un utilisateur visite tout d’abord le `ManageUsers.aspx` page ou clique sur un du filtrage boutons, nous souhaitons afficher la première page de données dans le contrôle GridView.</span><span class="sxs-lookup"><span data-stu-id="78d55-252">When a user first visits the `ManageUsers.aspx` page or clicks one of the filtering buttons, we want to display the first page of data in the GridView.</span></span> <span data-ttu-id="78d55-253">Toutefois, lorsque l’utilisateur clique sur un de la navigation de type LinkButton, nous devons mettre à jour l’index de page.</span><span class="sxs-lookup"><span data-stu-id="78d55-253">When the user clicks one of the navigation LinkButtons, however, we need to update the page index.</span></span> <span data-ttu-id="78d55-254">Pour conserver l’index de page et le nombre d’enregistrements à afficher par page, ajoutez les deux propriétés suivantes à la classe code-behind de la page :</span><span class="sxs-lookup"><span data-stu-id="78d55-254">To maintain the page index and the number of records to display per page, add the following two properties to the page's code-behind class:</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample12.cs)]

<span data-ttu-id="78d55-255">Comme le `UsernameToMatch` propriété, le `PageIndex` propriété conserve sa valeur à l’état d’affichage.</span><span class="sxs-lookup"><span data-stu-id="78d55-255">Like the `UsernameToMatch` property, the `PageIndex` property persists its value to view state.</span></span> <span data-ttu-id="78d55-256">En lecture seule `PageSize` propriété retourne une valeur codée en dur, 10.</span><span class="sxs-lookup"><span data-stu-id="78d55-256">The read-only `PageSize` property returns a hard-coded value, 10.</span></span> <span data-ttu-id="78d55-257">Inviter les lecteurs que cela intéresse pour mettre à jour de cette propriété pour utiliser le même modèle que `PageIndex`, puis d’augmenter la `ManageUsers.aspx` page telles que la personne visitant la page puisse spécifier combien de comptes utilisateur à afficher par page.</span><span class="sxs-lookup"><span data-stu-id="78d55-257">I invite the interested reader to update this property to use the same pattern as `PageIndex`, and then to augment the `ManageUsers.aspx` page such that the person visiting the page can specify how many user accounts to display per page.</span></span>

### <a name="retrieving-just-the-current-pages-records-updating-the-page-index-and-enabling-and-disabling-the-paging-interface-linkbuttons"></a><span data-ttu-id="78d55-258">Récupérer uniquement les enregistrements de la Page active, la mise à jour de l’Index de Page et l’activation et désactivation de l’Interface de pagination type LinkButton</span><span class="sxs-lookup"><span data-stu-id="78d55-258">Retrieving Just the Current Page's Records, Updating the Page Index, and Enabling and Disabling the Paging Interface LinkButtons</span></span>

<span data-ttu-id="78d55-259">Avec l’interface de pagination en place et la `PageIndex` et `PageSize` propriétés ajoutées, nous sommes prêts à mettre à jour le `BindUserAccounts` méthode afin qu’il utilise approprié `FindUsersByName` de surcharge.</span><span class="sxs-lookup"><span data-stu-id="78d55-259">With the paging interface in place and the `PageIndex` and `PageSize` properties added, we are ready to update the `BindUserAccounts` method so that it uses the appropriate `FindUsersByName` overload.</span></span> <span data-ttu-id="78d55-260">En outre, nous devons avoir cette méthode activer ou désactiver l’interface de pagination selon quelle page est affiché.</span><span class="sxs-lookup"><span data-stu-id="78d55-260">Additionally, we need to have this method enable or disable the paging interface depending on what page is being displayed.</span></span> <span data-ttu-id="78d55-261">Lorsque vous affichez la première page de données, les liens de premier et précédent doivent être désactivées ; Ensuite, dernière doit être désactivée lors de l’affichage de la dernière page.</span><span class="sxs-lookup"><span data-stu-id="78d55-261">When viewing the first page of data, the First and Previous links should be disabled; Next and Last should be disabled when viewing the last page.</span></span>

<span data-ttu-id="78d55-262">Mettez à jour la méthode `BindUserAccounts` avec le code suivant :</span><span class="sxs-lookup"><span data-stu-id="78d55-262">Update the `BindUserAccounts` method with the following code:</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample13.cs)]

<span data-ttu-id="78d55-263">Notez que le nombre total d’enregistrements en cours de pagination via est déterminé par le dernier paramètre de la `FindUsersByName` (méthode).</span><span class="sxs-lookup"><span data-stu-id="78d55-263">Note that the total number of records being paged through is determined by the last parameter of the `FindUsersByName` method.</span></span> <span data-ttu-id="78d55-264">Il s’agit d’un `out` paramètre, nous devons tout d’abord déclarer une variable pour contenir cette valeur (`totalRecords`), puis le préfixe avec le `out` mot clé.</span><span class="sxs-lookup"><span data-stu-id="78d55-264">This is an `out` parameter, so we need to first declare a variable to hold this value (`totalRecords`) and then prefix it with the `out` keyword.</span></span>

<span data-ttu-id="78d55-265">Une fois que la page spécifiée des comptes d’utilisateur sont retournés, le quatre LinkButton est activés ou désactivés, selon si la première ou dernière page de données est affichée.</span><span class="sxs-lookup"><span data-stu-id="78d55-265">After the specified page of user accounts are returned, the four LinkButtons are either enabled or disabled, depending on whether the first or last page of data is being viewed.</span></span>

<span data-ttu-id="78d55-266">La dernière étape consiste à écrire le code pour le type LinkButton quatre `Click` gestionnaires d’événements.</span><span class="sxs-lookup"><span data-stu-id="78d55-266">The last step is to write the code for the four LinkButtons' `Click` event handlers.</span></span> <span data-ttu-id="78d55-267">Ces gestionnaires d’événements doivent mettre à jour le `PageIndex` propriété, puis à relier les données au GridView via un appel à `BindUserAccounts`.</span><span class="sxs-lookup"><span data-stu-id="78d55-267">These event handlers need to update the `PageIndex` property and then rebind the data to the GridView via a call to `BindUserAccounts`.</span></span> <span data-ttu-id="78d55-268">Le premier, précédent et les gestionnaires d’événements suivants sont très simples.</span><span class="sxs-lookup"><span data-stu-id="78d55-268">The First, Previous, and Next event handlers are very simple.</span></span> <span data-ttu-id="78d55-269">Le `Click` Gestionnaire d’événements pour le dernier LinkButton, toutefois, est un peu plus complexe, car nous devons déterminer combien d’enregistrements est affichés afin de déterminer le dernier index de page.</span><span class="sxs-lookup"><span data-stu-id="78d55-269">The `Click` event handler for the Last LinkButton, however, is a bit more complex because we need to determine how many records are being displayed in order to determine the last page index.</span></span>

[!code-csharp[Main](building-an-interface-to-select-one-user-account-from-many-cs/samples/sample14.cs)]

<span data-ttu-id="78d55-270">Les figures 8 et 9 montrant l’interface de pagination personnalisée en action.</span><span class="sxs-lookup"><span data-stu-id="78d55-270">Figures 8 and 9 show the custom paging interface in action.</span></span> <span data-ttu-id="78d55-271">La figure 8 illustre la `ManageUsers.aspx` page lors de l’affichage de la première page de données pour tous les comptes d’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="78d55-271">Figure 8 shows the `ManageUsers.aspx` page when viewing the first page of data for all user accounts.</span></span> <span data-ttu-id="78d55-272">Notez que seuls 10 des 13 comptes sont affichés.</span><span class="sxs-lookup"><span data-stu-id="78d55-272">Note that only 10 of the 13 accounts are displayed.</span></span> <span data-ttu-id="78d55-273">Cliquant sur le lien suivant ou dernière provoque une publication (postback), les mises à jour le `PageIndex` à 1 et lie la deuxième page de l’utilisateur des comptes à la grille (voir Figure 9).</span><span class="sxs-lookup"><span data-stu-id="78d55-273">Clicking the Next or Last link causes a postback, updates the `PageIndex` to 1, and binds the second page of user accounts to the grid (see Figure 9).</span></span>

<span data-ttu-id="78d55-274">[![Les comptes d’utilisateur 10 premier sont affichés.](building-an-interface-to-select-one-user-account-from-many-cs/_static/image23.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="78d55-274">[![The First 10 User Accounts are Displayed](building-an-interface-to-select-one-user-account-from-many-cs/_static/image23.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image22.png)</span></span>

<span data-ttu-id="78d55-275">**Figure 8**: Les comptes d’utilisateur 10 premier sont affichés ([cliquez pour afficher l’image en taille réelle](building-an-interface-to-select-one-user-account-from-many-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="78d55-275">**Figure 8**: The First 10 User Accounts are Displayed  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image24.png))</span></span>

<span data-ttu-id="78d55-276">[![Cliquez sur le lien suivant pour afficher la deuxième Page de comptes d’utilisateur](building-an-interface-to-select-one-user-account-from-many-cs/_static/image26.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="78d55-276">[![Clicking the Next Link Displays the Second Page of User Accounts](building-an-interface-to-select-one-user-account-from-many-cs/_static/image26.png)](building-an-interface-to-select-one-user-account-from-many-cs/_static/image25.png)</span></span>

<span data-ttu-id="78d55-277">**Figure 9**: Cliquez sur le lien suivant pour afficher la deuxième Page de comptes d’utilisateur ([cliquez pour afficher l’image en taille réelle](building-an-interface-to-select-one-user-account-from-many-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="78d55-277">**Figure 9**: Clicking the Next Link Displays the Second Page of User Accounts  ([Click to view full-size image](building-an-interface-to-select-one-user-account-from-many-cs/_static/image27.png))</span></span>

## <a name="summary"></a><span data-ttu-id="78d55-278">Récapitulatif</span><span class="sxs-lookup"><span data-stu-id="78d55-278">Summary</span></span>

<span data-ttu-id="78d55-279">Les administrateurs ont souvent besoin sélectionner un utilisateur à partir de la liste des comptes.</span><span class="sxs-lookup"><span data-stu-id="78d55-279">Administrators often need to select a user from the list of accounts.</span></span> <span data-ttu-id="78d55-280">Dans les didacticiels précédents que nous avons étudié à l’aide d’une liste déroulante remplie avec les utilisateurs, mais cette approche n’évolue pas bien.</span><span class="sxs-lookup"><span data-stu-id="78d55-280">In previous tutorials we looked at using a drop-down list populated with the users, but this approach does not scale well.</span></span> <span data-ttu-id="78d55-281">Dans ce didacticiel, nous avons exploré une meilleure alternative : une interface filtrable dont les résultats sont affichés dans un GridView paginé.</span><span class="sxs-lookup"><span data-stu-id="78d55-281">In this tutorial we explored a better alternative: a filterable interface whose results are displayed in a paged GridView.</span></span> <span data-ttu-id="78d55-282">Avec cette interface utilisateur, les administrateurs peuvent rapidement et efficacement localiser et sélectionner un compte d’utilisateur parmi des milliers.</span><span class="sxs-lookup"><span data-stu-id="78d55-282">With this user interface, administrators can quickly and efficiently locate and select one user account among thousands.</span></span>

<span data-ttu-id="78d55-283">Bonne programmation !</span><span class="sxs-lookup"><span data-stu-id="78d55-283">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="78d55-284">informations supplémentaires</span><span class="sxs-lookup"><span data-stu-id="78d55-284">Further Reading</span></span>

<span data-ttu-id="78d55-285">Pour plus d’informations sur les sujets abordés dans ce didacticiel, consultez les ressources suivantes :</span><span class="sxs-lookup"><span data-stu-id="78d55-285">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="78d55-286">Pagination personnalisée dans ASP.NET avec SQL Server 2005</span><span class="sxs-lookup"><span data-stu-id="78d55-286">Custom Paging in ASP.NET with SQL Server 2005</span></span>](http://aspnet.4guysfromrolla.com/articles/031506-1.aspx)
- [<span data-ttu-id="78d55-287">Pagination efficace dans de grandes quantités de données</span><span class="sxs-lookup"><span data-stu-id="78d55-287">Efficiently Paging Through Large Amounts of Data</span></span>](https://asp.net/learn/data-access/tutorial-25-cs.aspx)
- [<span data-ttu-id="78d55-288">Déploiement de votre propre outil d’Administration de site Web</span><span class="sxs-lookup"><span data-stu-id="78d55-288">Rolling Your Own Website Administration Tool</span></span>](http://aspnet.4guysfromrolla.com/articles/052307-1.aspx)

### <a name="about-the-author"></a><span data-ttu-id="78d55-289">À propos de l’auteur</span><span class="sxs-lookup"><span data-stu-id="78d55-289">About the Author</span></span>

<span data-ttu-id="78d55-290">Scott Mitchell, auteur de plusieurs livres sur ASP/ASP.NET et fondateur de 4GuysFromRolla.com, travaille avec les technologies Web Microsoft depuis 1998.</span><span class="sxs-lookup"><span data-stu-id="78d55-290">Scott Mitchell, author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="78d55-291">Scott fonctionne comme un consultant indépendant, formateur et writer.</span><span class="sxs-lookup"><span data-stu-id="78d55-291">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="78d55-292">Son dernier ouvrage est *[SAM animer vous-même ASP.NET 2.0 des dernières 24 heures](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span><span class="sxs-lookup"><span data-stu-id="78d55-292">His latest book is *[Sams Teach Yourself ASP.NET 2.0 in 24 Hours](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco)*.</span></span> <span data-ttu-id="78d55-293">Scott peut être atteint à [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) ou via son blog à [http://ScottOnWriting.NET](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="78d55-293">Scott can be reached at [mitchell@4guysfromrolla.com](mailto:mitchell@4guysfromrolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="78d55-294">Remerciements</span><span class="sxs-lookup"><span data-stu-id="78d55-294">Special Thanks To</span></span>

<span data-ttu-id="78d55-295">Cette série de didacticiels a été révisée par plusieurs réviseurs utiles.</span><span class="sxs-lookup"><span data-stu-id="78d55-295">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="78d55-296">Entraîner un réviseur pour ce didacticiel a été Alicja Maziarz.</span><span class="sxs-lookup"><span data-stu-id="78d55-296">Lead reviewer for this tutorial was Alicja Maziarz.</span></span> <span data-ttu-id="78d55-297">Qui souhaitent consulter mes prochains articles MSDN ?</span><span class="sxs-lookup"><span data-stu-id="78d55-297">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="78d55-298">Dans ce cas, envoyez-moi une ligne à [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="78d55-298">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="78d55-299">Next</span><span class="sxs-lookup"><span data-stu-id="78d55-299">Next</span></span>](recovering-and-changing-passwords-cs.md)

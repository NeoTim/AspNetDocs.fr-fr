---
uid: web-forms/overview/older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12
title: 'Déploiement d’une Application de Web ASP.NET avec SQL Server Compact à l’aide de Visual Studio ou Visual Web Developer : Déploiement vers IIS comme environnement de Test - 5 de 12 | Microsoft Docs'
author: tdykstra
description: Cette série de didacticiels vous montre comment déployer une ASP.NET (publier) projet d’application web qui inclut une base de données SQL Server Compact à l’aide de Visual Stu...
ms.author: riande
ms.date: 11/17/2011
ms.assetid: 493b2a66-816c-485c-8315-952ed1085ccc
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12
msc.type: authoredcontent
ms.openlocfilehash: ba939012e8fb11a50992eeaef70e8ebf61cea851
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/01/2019
ms.locfileid: "57058806"
---
<a name="deploying-an-aspnet-web-application-with-sql-server-compact-using-visual-studio-or-visual-web-developer-deploying-to-iis-as-a-test-environment---5-of-12"></a><span data-ttu-id="09108-103">Déploiement d’une Application de Web ASP.NET avec SQL Server Compact à l’aide de Visual Studio ou Visual Web Developer : Déploiement vers IIS comme environnement de Test - 5 de 12</span><span class="sxs-lookup"><span data-stu-id="09108-103">Deploying an ASP.NET Web Application with SQL Server Compact using Visual Studio or Visual Web Developer: Deploying to IIS as a Test Environment - 5 of 12</span></span>
====================
<span data-ttu-id="09108-104">par [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="09108-104">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

[<span data-ttu-id="09108-105">Télécharger le projet de démarrage</span><span class="sxs-lookup"><span data-stu-id="09108-105">Download Starter Project</span></span>](http://code.msdn.microsoft.com/Deploying-an-ASPNET-Web-4e31366b)

> <span data-ttu-id="09108-106">Cette série de didacticiels vous montre comment déployer une ASP.NET (publier) projet d’application web qui inclut une base de données SQL Server Compact à l’aide de Visual Studio 2012 RC ou Visual Studio Express 2012 RC pour le Web.</span><span class="sxs-lookup"><span data-stu-id="09108-106">This series of tutorials shows you how to deploy (publish) an ASP.NET web application project that includes a SQL Server Compact database by using Visual Studio 2012 RC or Visual Studio Express 2012 RC for Web.</span></span> <span data-ttu-id="09108-107">Vous pouvez également utiliser Visual Studio 2010 si vous installez la mise à jour de publication Web.</span><span class="sxs-lookup"><span data-stu-id="09108-107">You can also use Visual Studio 2010 if you install the Web Publish Update.</span></span> <span data-ttu-id="09108-108">Pour une introduction à la série, consultez [le premier didacticiel de la série](deployment-to-a-hosting-provider-introduction-1-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="09108-108">For an introduction to the series, see [the first tutorial in the series](deployment-to-a-hosting-provider-introduction-1-of-12.md).</span></span>
> 
> <span data-ttu-id="09108-109">Pour obtenir un didacticiel qui montre les fonctionnalités de déploiement introduites après la version RC de Visual Studio 2012, montre comment déployer des éditions de SQL Server autre que SQL Server Compact et montre comment déployer dans Azure App Service Web Apps, consultez [déploiement Web ASP.NET à l’aide de Visual Studio](../../deployment/visual-studio-web-deployment/introduction.md).</span><span class="sxs-lookup"><span data-stu-id="09108-109">For a tutorial that shows deployment features introduced after the RC release of Visual Studio 2012, shows how to deploy SQL Server editions other than SQL Server Compact, and shows how to deploy to Azure App Service Web Apps, see [ASP.NET Web Deployment using Visual Studio](../../deployment/visual-studio-web-deployment/introduction.md).</span></span>


## <a name="overview"></a><span data-ttu-id="09108-110">Vue d'ensemble</span><span class="sxs-lookup"><span data-stu-id="09108-110">Overview</span></span>

<span data-ttu-id="09108-111">Ce didacticiel montre comment déployer une application web ASP.NET sur IIS sur l’ordinateur local.</span><span class="sxs-lookup"><span data-stu-id="09108-111">This tutorial shows how to deploy an ASP.NET web application to IIS on the local computer.</span></span>

<span data-ttu-id="09108-112">Lorsque vous développez une application, vous tester généralement en l’exécutant dans Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="09108-112">When you develop an application, you generally test by running it in Visual Studio.</span></span> <span data-ttu-id="09108-113">Par défaut, cela signifie que vous utilisez le serveur de développement Visual Studio (également appelé « Cassini »).</span><span class="sxs-lookup"><span data-stu-id="09108-113">By default, this means you're using the Visual Studio Development Server (also known as Cassini).</span></span> <span data-ttu-id="09108-114">Le serveur de développement Visual Studio, il est facile à tester au cours du développement dans Visual Studio, mais il ne fonctionne pas exactement comme IIS.</span><span class="sxs-lookup"><span data-stu-id="09108-114">The Visual Studio Development Server makes it easy to test during development in Visual Studio, but it doesn't work exactly like IIS.</span></span> <span data-ttu-id="09108-115">Par conséquent, il est possible qu’une application s’exécute correctement lorsque vous testez dans Visual Studio, mais échouer lorsqu’elle est déployée sur IIS dans un environnement d’hébergement.</span><span class="sxs-lookup"><span data-stu-id="09108-115">As a result, it's possible that an application will run correctly when you test it in Visual Studio, but fail when it's deployed to IIS in a hosting environment.</span></span>

<span data-ttu-id="09108-116">Vous pouvez tester votre application plus fiable des façons suivantes :</span><span class="sxs-lookup"><span data-stu-id="09108-116">You can test your application more reliably in these ways:</span></span>

1. <span data-ttu-id="09108-117">Utiliser IIS Express ou IIS complet au lieu du serveur de développement Visual Studio lorsque vous testez dans Visual Studio pendant le développement.</span><span class="sxs-lookup"><span data-stu-id="09108-117">Use IIS Express or full IIS instead of the Visual Studio Development Server when you test in Visual Studio during development.</span></span> <span data-ttu-id="09108-118">Cette méthode généralement émule plus précisément comment votre site s’exécutera sous IIS.</span><span class="sxs-lookup"><span data-stu-id="09108-118">This method generally emulates more accurately how your site will run under IIS.</span></span> <span data-ttu-id="09108-119">Toutefois, cette méthode ne pas tester votre processus de déploiement ou de valider que le résultat du processus de déploiement s’exécute correctement.</span><span class="sxs-lookup"><span data-stu-id="09108-119">However, this method does not test your deployment process or validate that the result of the deployment process will run correctly.</span></span>
2. <span data-ttu-id="09108-120">Déployer l’application à IIS sur votre ordinateur de développement à l’aide du même processus que vous utiliserez ultérieurement pour le déployer dans votre environnement de production.</span><span class="sxs-lookup"><span data-stu-id="09108-120">Deploy the application to IIS on your development computer by using the same process that you'll use later to deploy it to your production environment.</span></span> <span data-ttu-id="09108-121">Cette méthode valide votre processus de déploiement en plus de vérifier que votre application s’exécutera correctement sous IIS.</span><span class="sxs-lookup"><span data-stu-id="09108-121">This method validates your deployment process in addition to validating that your application will run correctly under IIS.</span></span>
3. <span data-ttu-id="09108-122">Déployer l’application sur un environnement de test qui est aussi proche que possible dans votre environnement de production.</span><span class="sxs-lookup"><span data-stu-id="09108-122">Deploy the application to a test environment that is as close as possible to your production environment.</span></span> <span data-ttu-id="09108-123">Étant donné que l’environnement de production pour ces didacticiels est un fournisseur d’hébergement tiers, l’environnement de test idéal serait un deuxième compte avec le fournisseur d’hébergement.</span><span class="sxs-lookup"><span data-stu-id="09108-123">Since the production environment for these tutorials is a third-party hosting provider, the ideal test environment would be a second account with the hosting provider.</span></span> <span data-ttu-id="09108-124">Vous utiliseriez cet deuxième compte uniquement pour les tests, mais il serait configurée la même façon que le compte de production.</span><span class="sxs-lookup"><span data-stu-id="09108-124">You would use this second account only for testing, but it would be set up the same way as the production account.</span></span>

<span data-ttu-id="09108-125">Ce didacticiel présente les étapes de l’option 2.</span><span class="sxs-lookup"><span data-stu-id="09108-125">This tutorial shows the steps for option 2.</span></span> <span data-ttu-id="09108-126">Conseils pour l’option 3 sont fournie à la fin de la [déploiement dans l’environnement de Production](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) (didacticiel), et à la fin de ce didacticiel, il existe des liens vers des ressources pour l’option 1.</span><span class="sxs-lookup"><span data-stu-id="09108-126">Guidance for option 3 is provided at the end of the [Deploying to the Production Environment](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) tutorial, and at the end of this tutorial there are links to resources for option 1.</span></span>

<span data-ttu-id="09108-127">Rappel : Si vous obtenez un message d’erreur ou quelque chose ne fonctionne pas lorsque vous parcourez le didacticiel, veillez à consulter le [page Résolution des problèmes](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="09108-127">Reminder: If you get an error message or something doesn't work as you go through the tutorial, be sure to check the [troubleshooting page](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12.md).</span></span>

## <a name="configuring-the-application-to-run-in-medium-trust"></a><span data-ttu-id="09108-128">Configuration de l’Application à exécuter en mode de confiance moyenne</span><span class="sxs-lookup"><span data-stu-id="09108-128">Configuring the Application to Run in Medium Trust</span></span>

<span data-ttu-id="09108-129">Avant d’installer les services IIS et le déploiement à celui-ci, vous allez modifier un paramètre du fichier Web.config afin que le site s’exécute plus comme elle le sera dans un environnement d’hébergement partagé typique.</span><span class="sxs-lookup"><span data-stu-id="09108-129">Before installing IIS and deploying to it, you'll change a Web.config file setting in order to make the site run more like it will in a typical shared hosting environment.</span></span>

<span data-ttu-id="09108-130">Fournisseurs d’hébergement exécutent généralement votre site web *confiance moyenne*, ce qui signifie que certains éléments, il n’est pas autorisé à effectuer.</span><span class="sxs-lookup"><span data-stu-id="09108-130">Hosting providers typically run your web site in *medium trust*, which means there are some things it is not allowed to do.</span></span> <span data-ttu-id="09108-131">Par exemple, code d’application ne peut pas accéder au Registre Windows et ne peut pas lire ou écrire des fichiers qui sont en dehors de l’arborescence des dossiers de votre application.</span><span class="sxs-lookup"><span data-stu-id="09108-131">For example, application code can't access the Windows registry and can't read or write files that are outside of your application's folder hierarchy.</span></span> <span data-ttu-id="09108-132">Par défaut, votre application s’exécute *de confiance élevé* sur votre ordinateur local, ce qui signifie que l’application peut être en mesure d’effectuer des opérations qui échouent lors de son déploiement en production.</span><span class="sxs-lookup"><span data-stu-id="09108-132">By default your application runs in *high trust* on your local computer, which means that the application might be able to do things that would fail when you deploy it to production.</span></span> <span data-ttu-id="09108-133">Par conséquent, pour rendre l’environnement de test que plus précisément l’environnement de production, vous configurerez l’application s’exécute en mode de confiance moyenne.</span><span class="sxs-lookup"><span data-stu-id="09108-133">Therefore, to make the test environment more accurately reflect the production environment, you'll configure the application to run in medium trust.</span></span>

<span data-ttu-id="09108-134">Dans le fichier Web.config de l’application, ajoutez un **approbation** élément dans le **system.web** élément, comme illustré dans cet exemple.</span><span class="sxs-lookup"><span data-stu-id="09108-134">In the application Web.config file, add a **trust** element in the **system.web** element, as shown in this example.</span></span>

[!code-xml[Main](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/samples/sample1.xml?highlight=4)]

<span data-ttu-id="09108-135">L’application s’exécutera désormais en mode de confiance moyenne dans IIS même sur votre ordinateur local.</span><span class="sxs-lookup"><span data-stu-id="09108-135">The application will now run in medium trust in IIS even on your local computer.</span></span> <span data-ttu-id="09108-136">Ce paramètre vous permet d’intercepter dès que possible toutes les tentatives par code d’application de faire quelque chose qui échouait en production.</span><span class="sxs-lookup"><span data-stu-id="09108-136">This setting enables you to catch as early as possible any attempts by application code to do something that would fail in production.</span></span>

> [!NOTE]
> <span data-ttu-id="09108-137">Si vous utilisez des Migrations Entity Framework Code First, assurez-vous que que vous disposez de la version 5.0 ou version ultérieure.</span><span class="sxs-lookup"><span data-stu-id="09108-137">If you are using Entity Framework Code First Migrations, make sure that you have version 5.0 or later installed.</span></span> <span data-ttu-id="09108-138">Dans Entity Framework version 4.3, Migrations requiert une confiance totale pour mettre à jour le schéma de base de données.</span><span class="sxs-lookup"><span data-stu-id="09108-138">In Entity Framework version 4.3, Migrations requires full trust in order to update the database schema.</span></span>


## <a name="installing-iis-and-web-deploy"></a><span data-ttu-id="09108-139">Déployer l’installation IIS et Web</span><span class="sxs-lookup"><span data-stu-id="09108-139">Installing IIS and Web Deploy</span></span>

<span data-ttu-id="09108-140">Pour déployer sur IIS sur votre ordinateur de développement, vous devez disposer d’IIS et Web Deploy installé.</span><span class="sxs-lookup"><span data-stu-id="09108-140">To deploy to IIS on your development computer, you must have IIS and Web Deploy installed.</span></span> <span data-ttu-id="09108-141">Ils ne sont pas inclus dans la configuration de Windows 7 par défaut.</span><span class="sxs-lookup"><span data-stu-id="09108-141">These are not included in the default Windows 7 configuration.</span></span> <span data-ttu-id="09108-142">Si vous avez déjà installé IIS et Web Deploy, passez à la section suivante.</span><span class="sxs-lookup"><span data-stu-id="09108-142">If you have already installed both IIS and Web Deploy, skip to the next section.</span></span>

<span data-ttu-id="09108-143">À l’aide de la [Web Platform Installer](https://www.microsoft.com/web/downloads/platform.aspx) est la meilleure méthode pour installer IIS et Web Deploy, étant donné que le programme Web Platform Installer installe une configuration recommandée pour IIS et il installe automatiquement la configuration requise pour IIS et Web Déployez si nécessaire.</span><span class="sxs-lookup"><span data-stu-id="09108-143">Using the [Web Platform Installer](https://www.microsoft.com/web/downloads/platform.aspx) is the preferred way to install IIS and Web Deploy, because the Web Platform Installer installs a recommended configuration for IIS and it automatically installs the prerequisites for IIS and Web Deploy if necessary.</span></span>

<span data-ttu-id="09108-144">Pour exécuter Web Platform Installer pour installer IIS et Web Deploy, utilisez le lien suivant.</span><span class="sxs-lookup"><span data-stu-id="09108-144">To run Web Platform Installer to install IIS and Web Deploy, use the following link.</span></span> <span data-ttu-id="09108-145">Si vous avez déjà installé IIS, Web Deploy ou l’un de leurs composants obligatoires, le programme Web Platform Installer installe uniquement ce qui est manquant.</span><span class="sxs-lookup"><span data-stu-id="09108-145">If you already have installed IIS, Web Deploy or any of their required components, the Web Platform Installer installs only what is missing.</span></span>

- [<span data-ttu-id="09108-146">Installer IIS et Web Deploy à l’aide de WebPI</span><span class="sxs-lookup"><span data-stu-id="09108-146">Install IIS and Web Deploy using WebPI</span></span>](https://www.microsoft.com/web/gallery/install.aspx?appsxml=&amp;appid=IIS7;ASPNET;NETFramework4;WDeploy)

## <a name="setting-the-default-application-pool-to-net-4"></a><span data-ttu-id="09108-147">Configuration du Pool d’applications par défaut .NET 4</span><span class="sxs-lookup"><span data-stu-id="09108-147">Setting the Default Application Pool to .NET 4</span></span>

<span data-ttu-id="09108-148">Après avoir installé IIS, exécutez **Gestionnaire des services Internet** pour vous assurer que le .NET Framework version 4 est affecté au pool d’applications par défaut.</span><span class="sxs-lookup"><span data-stu-id="09108-148">After installing IIS, run **IIS Manager** to make sure that the .NET Framework version 4 is assigned to the default application pool.</span></span>

<span data-ttu-id="09108-149">À partir de la Windows **Démarrer** menu, sélectionnez **exécuter**, entrez « inetmgr », puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="09108-149">From the Windows **Start** menu, select **Run**, enter "inetmgr", and then click **OK**.</span></span> <span data-ttu-id="09108-150">(Si le **exécuter** commande ne figure pas dans votre **Démarrer** menu, vous pouvez appuyer sur la clé de Windows et R pour l’ouvrir.</span><span class="sxs-lookup"><span data-stu-id="09108-150">(If the **Run** command is not in your **Start** menu, you can press the Windows Key and R to open it.</span></span> <span data-ttu-id="09108-151">Ou avec le bouton droit de la barre des tâches, cliquez sur **propriétés**, sélectionnez le **Menu Démarrer** , cliquez sur **personnaliser**, puis sélectionnez **exécuter la commande**.)</span><span class="sxs-lookup"><span data-stu-id="09108-151">Or right-click the taskbar, click **Properties**, select the **Start Menu** tab, click **Customize**, and select **Run command**.)</span></span>

<span data-ttu-id="09108-152">Dans le **connexions** volet, développez le nœud du serveur, puis sélectionnez **Pools d’applications**.</span><span class="sxs-lookup"><span data-stu-id="09108-152">In the **Connections** pane, expand the server node and select **Application Pools**.</span></span> <span data-ttu-id="09108-153">Dans le **Pools d’applications** volet, si **DefaultAppPool** est attribué pour le .NET framework version 4, comme dans l’illustration suivante, passez à la section suivante.</span><span class="sxs-lookup"><span data-stu-id="09108-153">In the **Application Pools** pane, if **DefaultAppPool** is assigned to the .NET framework version 4 as in the following illustration, skip to the next section.</span></span>

<span data-ttu-id="09108-154">[![Inetmgr_showing_4.0_app_pools](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image2.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="09108-154">[![Inetmgr_showing_4.0_app_pools](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image2.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image1.png)</span></span>

<span data-ttu-id="09108-155">Si vous voyez uniquement deux pools d’applications et de ces deux valeurs sont définies sur le .NET Framework 2.0, vous devez installer ASP.NET 4 dans IIS :</span><span class="sxs-lookup"><span data-stu-id="09108-155">If you see only two application pools and both of them are set to the .NET Framework 2.0, you have to install ASP.NET 4 in IIS:</span></span>

- <span data-ttu-id="09108-156">Ouvrez une fenêtre d’invite de commandes en cliquant en **invite de commandes** dans le Windows **Démarrer** menu et en sélectionnant **exécuter en tant qu’administrateur**.</span><span class="sxs-lookup"><span data-stu-id="09108-156">Open a command prompt window by right-clicking **Command Prompt** in the Windows **Start** menu and selecting **Run as Administrator**.</span></span> <span data-ttu-id="09108-157">Puis exécutez [aspnet\_regiis.exe](https://msdn.microsoft.com/library/k6h9cz8h.aspx) pour installer ASP.NET 4 dans IIS, en utilisant les commandes suivantes.</span><span class="sxs-lookup"><span data-stu-id="09108-157">Then run [aspnet\_regiis.exe](https://msdn.microsoft.com/library/k6h9cz8h.aspx) to install ASP.NET 4 in IIS, using the following commands.</span></span> <span data-ttu-id="09108-158">(Dans les systèmes 64 bits, remplacez « Framework » avec « Framework64 »).</span><span class="sxs-lookup"><span data-stu-id="09108-158">(In 64-bit systems, replace "Framework" with "Framework64".)</span></span>

    [!code-console[Main](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/samples/sample2.cmd)]

    <span data-ttu-id="09108-159">[![aspnet_regiis_installing_ASP.NET_4](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image4.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="09108-159">[![aspnet_regiis_installing_ASP.NET_4](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image4.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image3.png)</span></span>

    <span data-ttu-id="09108-160">Cette commande crée les nouveaux pools d’applications pour le .NET Framework 4, mais le pool d’applications par défaut sera toujours égale à 2.0.</span><span class="sxs-lookup"><span data-stu-id="09108-160">This command creates new application pools for the .NET Framework 4, but the default application pool will still be set to 2.0.</span></span> <span data-ttu-id="09108-161">Vous allez déployer une application qui cible .NET 4 pour ce pool d’applications, donc vous devez modifier le pool d’applications pour .NET 4.</span><span class="sxs-lookup"><span data-stu-id="09108-161">You'll be deploying an application that targets .NET 4 to that application pool, so you have to change the application pool to .NET 4.</span></span>

<span data-ttu-id="09108-162">Si vous avez fermé **Gestionnaire des services Internet**, exécutez-le à nouveau, développez le nœud du serveur, puis cliquez sur **Pools d’applications** pour afficher le **Pools d’applications** volet à nouveau.</span><span class="sxs-lookup"><span data-stu-id="09108-162">If you closed **IIS Manager**, run it again, expand the server node, and click **Application Pools** to display the **Application Pools** pane again.</span></span>

<span data-ttu-id="09108-163">Dans le **Pools d’applications** volet, cliquez sur **DefaultAppPool**, puis, dans le **Actions** volet, cliquez sur **paramètres de base**.</span><span class="sxs-lookup"><span data-stu-id="09108-163">In the **Application Pools** pane, click **DefaultAppPool**, and then in the **Actions** pane click **Basic Settings**.</span></span>

<span data-ttu-id="09108-164">[![Inetmgr_selecting_Basic_Settings_for_app_pool](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image6.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="09108-164">[![Inetmgr_selecting_Basic_Settings_for_app_pool](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image6.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image5.png)</span></span>

<span data-ttu-id="09108-165">Dans le **modifier le Pool d’Application** boîte de dialogue, choisissez **version du .NET Framework** à **.NET Framework v4.0.30319** et cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="09108-165">In the **Edit Application Pool** dialog box, change **.NET Framework version** to **.NET Framework v4.0.30319** and click **OK**.</span></span>

<span data-ttu-id="09108-166">[![Selecting_.NET_4_for_DefaultAppPool](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image8.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="09108-166">[![Selecting_.NET_4_for_DefaultAppPool](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image8.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image7.png)</span></span>

<span data-ttu-id="09108-167">Vous êtes maintenant prêt à publier sur IIS.</span><span class="sxs-lookup"><span data-stu-id="09108-167">You are now ready to publish to IIS.</span></span>

## <a name="publishing-to-iis"></a><span data-ttu-id="09108-168">Publication sur IIS</span><span class="sxs-lookup"><span data-stu-id="09108-168">Publishing to IIS</span></span>

<span data-ttu-id="09108-169">Il existe plusieurs façons, vous pouvez déployer à l’aide de Visual Studio 2010 et Web Deploy :</span><span class="sxs-lookup"><span data-stu-id="09108-169">There are several ways you can deploy using Visual Studio 2010 and Web Deploy:</span></span>

- <span data-ttu-id="09108-170">Utilisez Visual Studio publication en un clic.</span><span class="sxs-lookup"><span data-stu-id="09108-170">Use Visual Studio one-click publish.</span></span>
- <span data-ttu-id="09108-171">Créer un *package de déploiement* et installez-le à l’aide du Gestionnaire des services Internet UI.</span><span class="sxs-lookup"><span data-stu-id="09108-171">Create a *deployment package* and install it using the IIS Manager UI.</span></span> <span data-ttu-id="09108-172">Le package de déploiement se compose d’un *.zip* fichier qui contient tous les fichiers et les métadonnées nécessaires pour installer un site dans IIS.</span><span class="sxs-lookup"><span data-stu-id="09108-172">The deployment package consists of a *.zip* file that contains all the files and metadata needed to install a site in IIS.</span></span>
- <span data-ttu-id="09108-173">Créer un package de déploiement et l’installer à l’aide de la ligne de commande.</span><span class="sxs-lookup"><span data-stu-id="09108-173">Create a deployment package and install it using the command line.</span></span>

<span data-ttu-id="09108-174">Le processus que vous avez parcouru dans les didacticiels précédents pour configurer Visual Studio pour automatiser les tâches de déploiement s’applique à toutes ces trois méthodes.</span><span class="sxs-lookup"><span data-stu-id="09108-174">The process you went through in the previous tutorials to set up Visual Studio to automate deployment tasks applies to all of these three methods.</span></span> <span data-ttu-id="09108-175">Dans ces didacticiels, vous allez utiliser la première de ces méthodes.</span><span class="sxs-lookup"><span data-stu-id="09108-175">In these tutorials you'll use the first of these methods.</span></span> <span data-ttu-id="09108-176">Pour plus d’informations sur l’utilisation de packages de déploiement, consultez [ASP.NET Deployment Content Map](https://msdn.microsoft.com/library/bb386521.aspx).</span><span class="sxs-lookup"><span data-stu-id="09108-176">For information about using deployment packages, see [ASP.NET Deployment Content Map](https://msdn.microsoft.com/library/bb386521.aspx).</span></span>

<span data-ttu-id="09108-177">Avant la publication, assurez-vous que vous exécutez Visual Studio en mode administrateur.</span><span class="sxs-lookup"><span data-stu-id="09108-177">Before publishing, make sure that you are running Visual Studio in administrator mode.</span></span> <span data-ttu-id="09108-178">(Dans le Kit Windows 7 **Démarrer** menu, cliquez sur l’icône pour la version de Visual Studio que vous utilisez et sélectionnez **exécuter en tant qu’administrateur**.) Le mode administrateur est requis pour la publication uniquement lorsque vous publiez sur IIS sur l’ordinateur local.</span><span class="sxs-lookup"><span data-stu-id="09108-178">(In the Windows 7 **Start** menu, right-click the icon for the version of Visual Studio you're using and select **Run as Administrator**.) Administrator mode is required for publishing only when you are publishing to IIS on the local computer.</span></span>

<span data-ttu-id="09108-179">Dans **l’Explorateur de solutions**, cliquez sur le projet ContosoUniversity (pas le projet ContosoUniversity.DAL) et sélectionnez **publier**.</span><span class="sxs-lookup"><span data-stu-id="09108-179">In **Solution Explorer**, right-click the ContosoUniversity project (not the ContosoUniversity.DAL project) and select **Publish**.</span></span>

<span data-ttu-id="09108-180">Le **publier le site Web** Assistant s’affiche.</span><span class="sxs-lookup"><span data-stu-id="09108-180">The **Publish Web** wizard appears.</span></span>

![Publish_Web_wizard_Profile_tab](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image9.png)

<span data-ttu-id="09108-182">Dans la liste déroulante, sélectionnez  **&lt;nouveau... &gt;**.</span><span class="sxs-lookup"><span data-stu-id="09108-182">In the drop-down list, select **&lt;New...&gt;**.</span></span>

<span data-ttu-id="09108-183">Dans le **nouveau profil** boîte de dialogue, entrez « Test », puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="09108-183">In the **New Profile** dialog box, enter "Test", and then click **OK**.</span></span>

![New_Profile_dialog_box](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image10.png)

<span data-ttu-id="09108-185">Ce nom est que le même que le nœud central de la Web.Test.config de transformer le fichier que vous avez créé précédemment.</span><span class="sxs-lookup"><span data-stu-id="09108-185">This name is the same as the middle node of the Web.Test.config transform file that you created earlier.</span></span> <span data-ttu-id="09108-186">Cette correspondance est ce qui provoque les transformations Web.Test.config à appliquer lors de la publication à l’aide de ce profil.</span><span class="sxs-lookup"><span data-stu-id="09108-186">This correspondence is what causes the Web.Test.config transformations to be applied when you publish by using this profile.</span></span>

<span data-ttu-id="09108-187">L’Assistant passe automatiquement à la **connexion** onglet.</span><span class="sxs-lookup"><span data-stu-id="09108-187">The wizard automatically advances to the **Connection** tab.</span></span>

<span data-ttu-id="09108-188">Dans le **l’URL du Service** , entrez *localhost*.</span><span class="sxs-lookup"><span data-stu-id="09108-188">In the **Service URL** box, enter *localhost*.</span></span>

<span data-ttu-id="09108-189">Dans le **Site/application** , entrez *Default Web Site/ContosoUniversity*.</span><span class="sxs-lookup"><span data-stu-id="09108-189">In the **Site/application** box, enter *Default Web Site/ContosoUniversity*.</span></span>

<span data-ttu-id="09108-190">Dans le **URL de Destination** , entrez `http://localhost/ContosoUniversity`.</span><span class="sxs-lookup"><span data-stu-id="09108-190">In the **Destination URL** box, enter `http://localhost/ContosoUniversity`.</span></span>

<span data-ttu-id="09108-191">Le **URL de Destination** paramètre n’est pas nécessaire.</span><span class="sxs-lookup"><span data-stu-id="09108-191">The **Destination URL** setting isn't required.</span></span> <span data-ttu-id="09108-192">Visual Studio a terminé de déployer l’application, il s’ouvre automatiquement votre navigateur par défaut à cette URL.</span><span class="sxs-lookup"><span data-stu-id="09108-192">When Visual Studio finishes deploying the application, it automatically opens your default browser to this URL.</span></span> <span data-ttu-id="09108-193">Si vous ne souhaitez pas le navigateur s’ouvre automatiquement après le déploiement, laissez cette zone vide.</span><span class="sxs-lookup"><span data-stu-id="09108-193">If you don't want the browser to open automatically after deployment, leave this box blank.</span></span>

![Publish_Web_wizard_Connection_tab_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image11.png)

<span data-ttu-id="09108-195">Cliquez sur **valider la connexion** pour vérifier que les paramètres sont corrects et que vous pouvez vous connecter à IIS sur l’ordinateur local.</span><span class="sxs-lookup"><span data-stu-id="09108-195">Click **Validate Connection** to verify that the settings are correct and you can connect to IIS on the local computer.</span></span>

<span data-ttu-id="09108-196">Une coche verte vérifie que la connexion est établie.</span><span class="sxs-lookup"><span data-stu-id="09108-196">A green check mark verifies that the connection is successful.</span></span>

![Publish_Web_wizard_Connection_tab_validated](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image12.png)

<span data-ttu-id="09108-198">Cliquez sur **suivant** pour accéder à la **paramètres** onglet.</span><span class="sxs-lookup"><span data-stu-id="09108-198">Click **Next** to advance to the **Settings** tab.</span></span>

<span data-ttu-id="09108-199">Le **Configuration** zone de liste déroulante spécifie la configuration de build à déployer.</span><span class="sxs-lookup"><span data-stu-id="09108-199">The **Configuration** drop-down box specifies the build configuration to deploy.</span></span> <span data-ttu-id="09108-200">La valeur par défaut est mise en production, ce qui est ce que vous voulez.</span><span class="sxs-lookup"><span data-stu-id="09108-200">The default value is Release, which is what you want.</span></span>

<span data-ttu-id="09108-201">Laissez le **supprimer les fichiers supplémentaires à la destination** case à cocher désactivée.</span><span class="sxs-lookup"><span data-stu-id="09108-201">Leave the **Remove additional files at destination** check box cleared.</span></span> <span data-ttu-id="09108-202">Dans la mesure où il s’agit de votre premier déploiement, il n’est tous les fichiers dans le dossier de destination encore.</span><span class="sxs-lookup"><span data-stu-id="09108-202">Since this is your first deployment, there won't be any files in the destination folder yet.</span></span>

<span data-ttu-id="09108-203">Dans le **bases de données** section, entrez la valeur suivante dans la zone chaîne de connexion pour **SchoolContext**:</span><span class="sxs-lookup"><span data-stu-id="09108-203">In the **Databases** section, enter the following value in the connection string box for **SchoolContext**:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/samples/sample3.cmd)]

<span data-ttu-id="09108-204">Le processus de déploiement placera cette chaîne de connexion dans le fichier Web.config déployé, car **utiliser cette chaîne de connexion lors de l’exécution** est sélectionné.</span><span class="sxs-lookup"><span data-stu-id="09108-204">The deployment process will put this connection string in the deployed Web.config file because **Use this connection string at runtime** is selected.</span></span>

<span data-ttu-id="09108-205">Également sous **SchoolContext**, sélectionnez **appliquer des Migrations Code First**.</span><span class="sxs-lookup"><span data-stu-id="09108-205">Also under **SchoolContext**, select **Apply Code First Migrations**.</span></span> <span data-ttu-id="09108-206">Cette option provoque le processus de déploiement configurer le fichier Web.config déployé pour spécifier le `MigrateDatabaseToLatestVersion` initialiseur.</span><span class="sxs-lookup"><span data-stu-id="09108-206">This option causes the deployment process to configure the deployed Web.config file to specify the `MigrateDatabaseToLatestVersion` initializer.</span></span> <span data-ttu-id="09108-207">Cet initialiseur met automatiquement à jour la base de données vers la dernière version lors de l’application accède à la base de données pour la première fois après le déploiement.</span><span class="sxs-lookup"><span data-stu-id="09108-207">This initializer automatically updates the database to the latest version when the application accesses the database for the first time after deployment.</span></span>

<span data-ttu-id="09108-208">Dans la zone chaîne de connexion pour **DefaultConnection**, entrez la valeur suivante :</span><span class="sxs-lookup"><span data-stu-id="09108-208">In the connection string box for **DefaultConnection**, enter the following value:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/samples/sample4.cmd)]

<span data-ttu-id="09108-209">Laissez **base de données de mise à jour** désactivée.</span><span class="sxs-lookup"><span data-stu-id="09108-209">Leave **Update database** cleared.</span></span> <span data-ttu-id="09108-210">La base de données d’appartenance est déployé en copiant le fichier .sdf dans application\_données et vous ne souhaitez pas que le processus de déploiement pour continuer avec cette base de données.</span><span class="sxs-lookup"><span data-stu-id="09108-210">The membership database will be deployed by copying the .sdf file in App\_Data, and you don't want the deployment process to do anything else with this database.</span></span>

![Publish_Web_wizard_Settings_tab_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image13.png)

<span data-ttu-id="09108-212">Cliquez sur **suivant** pour accéder à la **aperçu** onglet.</span><span class="sxs-lookup"><span data-stu-id="09108-212">Click **Next** to advance to the **Preview** tab.</span></span>

<span data-ttu-id="09108-213">Dans le **aperçu** , cliquez sur **démarrer l’aperçu** pour afficher la liste des fichiers qui seront copiés.</span><span class="sxs-lookup"><span data-stu-id="09108-213">In the **Preview** tab, click **Start Preview** to see a list of the files that will be copied.</span></span>

![Publish_Web_wizard_Preview_tab_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image14.png)

![Publish_Web_wizard_Preview_tab_Test_with_file_list](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image15.png)

<span data-ttu-id="09108-216">Cliquez sur **Publier**.</span><span class="sxs-lookup"><span data-stu-id="09108-216">Click **Publish**.</span></span>

<span data-ttu-id="09108-217">Si Visual Studio n’est pas en mode administrateur, vous pouvez obtenir un message d’erreur qui indique une erreur d’autorisations.</span><span class="sxs-lookup"><span data-stu-id="09108-217">If Visual Studio is not in administrator mode, you might get an error message that indicates a permissions error.</span></span> <span data-ttu-id="09108-218">Dans ce cas, fermez Visual Studio, ouvrez-le en mode administrateur et réessayez la publication.</span><span class="sxs-lookup"><span data-stu-id="09108-218">In that case, close Visual Studio, open it in administrator mode, and try to publish again.</span></span>

<span data-ttu-id="09108-219">Si Visual Studio est en mode administrateur, le **sortie** rapports réussie de la fenêtre générer et publier.</span><span class="sxs-lookup"><span data-stu-id="09108-219">If Visual Studio is in administrator mode, the **Output** window reports successful build and publish.</span></span>

![Output_window_publish_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image16.png)

<span data-ttu-id="09108-221">Le navigateur s’ouvre automatiquement à la page d’accueil de l’Université de Contoso s’exécutant dans IIS sur l’ordinateur local.</span><span class="sxs-lookup"><span data-stu-id="09108-221">The browser automatically opens to the Contoso University Home page running in IIS on the local computer.</span></span>

<span data-ttu-id="09108-222">[![Home_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image18.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="09108-222">[![Home_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image18.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image17.png)</span></span>

## <a name="testing-in-the-test-environment"></a><span data-ttu-id="09108-223">Test dans l’environnement de Test</span><span class="sxs-lookup"><span data-stu-id="09108-223">Testing in the Test Environment</span></span>

<span data-ttu-id="09108-224">Notez que l’indicateur de l’environnement affiche « (Test) » au lieu de « (Dev) », qui montre que le *Web.config* transformation pour l’indicateur de l’environnement a réussi.</span><span class="sxs-lookup"><span data-stu-id="09108-224">Notice that the environment indicator shows "(Test)" instead of "(Dev)", which shows that the *Web.config* transformation for the environment indicator was successful.</span></span>

<span data-ttu-id="09108-225">[![Home_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image20.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="09108-225">[![Home_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image20.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image19.png)</span></span>

<span data-ttu-id="09108-226">Exécutez le **étudiants** page pour vérifier ne qu’aucun étudiant à la base de données déployée.</span><span class="sxs-lookup"><span data-stu-id="09108-226">Run the **Students** page to verify that the deployed database has no students.</span></span> <span data-ttu-id="09108-227">Lorsque vous sélectionnez cette page peut prendre quelques minutes à charger, car le Code First crée la base de données, puis exécute le `Seed` (méthode).</span><span class="sxs-lookup"><span data-stu-id="09108-227">When you select this page it may take a few minutes to load because Code First creates the database and then runs the `Seed` method.</span></span> <span data-ttu-id="09108-228">(Il n’a pas le faire quand vous étiez sur la page d’accueil, car l’application n’a pas tenter d’accéder à la base de données encore.)</span><span class="sxs-lookup"><span data-stu-id="09108-228">(It didn't do that when you were on the home page because the application didn't try to access the database yet.)</span></span>

<span data-ttu-id="09108-229">[![Students_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image22.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="09108-229">[![Students_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image22.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image21.png)</span></span>

<span data-ttu-id="09108-230">Exécutez le **formateurs** page pour vérifier que le premier Code amorcée avec des données de l’instructeur :</span><span class="sxs-lookup"><span data-stu-id="09108-230">Run the **Instructors** page to verify that Code First seeded the database with instructor data:</span></span>

<span data-ttu-id="09108-231">[![Instructors_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image24.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="09108-231">[![Instructors_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image24.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image23.png)</span></span>

<span data-ttu-id="09108-232">Sélectionnez **étudiants ajouter** à partir de la **étudiants** menu, ajouter un étudiant et afficher le nouvel étudiant dans la **étudiants** page pour vérifier que vous pouvez écrire avec succès à la base de données :</span><span class="sxs-lookup"><span data-stu-id="09108-232">Select **Add Students** from the **Students** menu, add a student, and then view the new student in the **Students** page to verify that you can successfully write to the database:</span></span>

<span data-ttu-id="09108-233">[![Add_Students_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image26.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="09108-233">[![Add_Students_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image26.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image25.png)</span></span>

<span data-ttu-id="09108-234">[![Students_page_with_new_student_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image28.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="09108-234">[![Students_page_with_new_student_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image28.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image27.png)</span></span>

<span data-ttu-id="09108-235">À partir de la **cours** menu, sélectionnez **crédits de la mise à jour**.</span><span class="sxs-lookup"><span data-stu-id="09108-235">From the **Courses** menu, select **Update Credits**.</span></span> <span data-ttu-id="09108-236">Le **crédits de la mise à jour** page requiert des autorisations d’administrateur, par conséquent, le **Log In** page s’affiche.</span><span class="sxs-lookup"><span data-stu-id="09108-236">The **Update Credits** page requires administrator permissions, so the **Log In** page is displayed.</span></span> <span data-ttu-id="09108-237">Entrez les informations d’identification du compte administrateur que vous avez créé plus haut (« admin » et « Pas$ w0rd »).</span><span class="sxs-lookup"><span data-stu-id="09108-237">Enter the administrator account credentials that you created earlier ("admin" and "Pas$w0rd").</span></span> <span data-ttu-id="09108-238">Le **mise à jour crédits** page s’affiche, qui vérifie que le compte d’administrateur que vous avez créé dans le didacticiel précédent a été correctement déployé sur l’environnement de test.</span><span class="sxs-lookup"><span data-stu-id="09108-238">The **Update Credits** page is displayed, which verifies that the administrator account that you created in the previous tutorial was correctly deployed to the test environment.</span></span>

<span data-ttu-id="09108-239">[![Log_In_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image30.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="09108-239">[![Log_In_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image30.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image29.png)</span></span>

<span data-ttu-id="09108-240">[![Update_Credits_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image32.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="09108-240">[![Update_Credits_page_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image32.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image31.png)</span></span>

<span data-ttu-id="09108-241">Vérifiez qu’un *Elmah* dossier existe avec uniquement le fichier d’espace réservé qu’il contient.</span><span class="sxs-lookup"><span data-stu-id="09108-241">Verify that an *Elmah* folder exists with only the placeholder file in it.</span></span>

<span data-ttu-id="09108-242">[![Elmah_folder_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image34.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="09108-242">[![Elmah_folder_Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image34.png)](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image33.png)</span></span>

<a id="efcfmigrations"></a>

## <a name="reviewing-the-automatic-webconfig-changes-for-code-first-migrations"></a><span data-ttu-id="09108-243">Révision des modifications de Web.config automatique pour les Migrations Code First</span><span class="sxs-lookup"><span data-stu-id="09108-243">Reviewing the Automatic Web.config Changes for Code First Migrations</span></span>

<span data-ttu-id="09108-244">Ouvrez le *Web.config* fichier dans l’application déployée sur *C:\inetpub\wwwroot\ContosoUniversity* et vous pouvez voir où le processus de déploiement configuré Migrations Code First pour automatiquement mettre à jour la base de données vers la dernière version.</span><span class="sxs-lookup"><span data-stu-id="09108-244">Open the *Web.config* file in the deployed application at *C:\inetpub\wwwroot\ContosoUniversity* and you can see where the deployment process configured Code First Migrations to automatically update the database to the latest version.</span></span>

![](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image35.png)

<span data-ttu-id="09108-245">Le processus de déploiement créé également une nouvelle chaîne de connexion pour les Migrations Code First à utiliser exclusivement pour la mise à jour le schéma de base de données :</span><span class="sxs-lookup"><span data-stu-id="09108-245">The deployment process also created a new connection string for Code First Migrations to use exclusively for updating the database schema:</span></span>

![DatabasePublish_connection_string](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12/_static/image36.png)

<span data-ttu-id="09108-247">Cette chaîne de connexion supplémentaires vous permet de spécifier un compte d’utilisateur pour les mises à jour du schéma de base de données et un autre compte d’utilisateur pour l’accès de données d’application.</span><span class="sxs-lookup"><span data-stu-id="09108-247">This additional connection string enables you to specify one user account for database schema updates, and a different user account for application data access.</span></span> <span data-ttu-id="09108-248">Par exemple, vous pouvez attribuer la base de données\_rôle de propriétaire pour les Migrations Code First et db\_datareader et db\_datawriter des rôles à l’application.</span><span class="sxs-lookup"><span data-stu-id="09108-248">For example, you could assign the db\_owner role to Code First Migrations, and db\_datareader and db\_datawriter roles to the application.</span></span> <span data-ttu-id="09108-249">Il s’agit d’un modèle courant dans défense qui empêche le code potentiellement malveillant dans l’application à partir de la modification du schéma de base de données.</span><span class="sxs-lookup"><span data-stu-id="09108-249">This is a common defense-in-depth pattern that prevents potentially malicious code in the application from changing the database schema.</span></span> <span data-ttu-id="09108-250">(Par exemple, cela peut se produire dans une attaque d’injection SQL.) Ce modèle n’est pas utilisé par ces didacticiels.</span><span class="sxs-lookup"><span data-stu-id="09108-250">(For example, this might happen in a successful SQL injection attack.) This pattern is not used by these tutorials.</span></span> <span data-ttu-id="09108-251">Il ne s’applique pas à SQL Server Compact, et il ne s’applique pas lorsque vous migrez vers SQL Server dans un didacticiel plus loin dans cette série.</span><span class="sxs-lookup"><span data-stu-id="09108-251">It does not apply to SQL Server Compact, and it does not apply when you migrate to SQL Server in a later tutorial in this series.</span></span> <span data-ttu-id="09108-252">Le site de Cytanium propose qu’un seul compte d’utilisateur pour accéder à la base de données SQL Server que vous créez au Cytanium.</span><span class="sxs-lookup"><span data-stu-id="09108-252">The Cytanium site offers just one user account for accessing the SQL Server database that you create at Cytanium.</span></span> <span data-ttu-id="09108-253">Si vous êtes en mesure d’implémenter ce modèle dans votre scénario, vous pouvez le faire en effectuant les étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="09108-253">If you are able to implement this pattern in your scenario, you can do it by performing the following steps:</span></span>

1. <span data-ttu-id="09108-254">Dans le **paramètres** onglet de la **publier le site Web** Assistant, entrez la chaîne de connexion qui spécifie un utilisateur avec les autorisations de mise à jour de schéma de base de données complète et désactivez le **utiliser cette chaîne de connexion lors de l’exécution** case à cocher.</span><span class="sxs-lookup"><span data-stu-id="09108-254">In the **Settings** tab of the **Publish Web** wizard, enter the connection string that specifies a user with full database schema update permissions, and clear the **Use this connection string at runtime** check box.</span></span> <span data-ttu-id="09108-255">Dans le fichier Web.config déployé, cela devient le `DatabasePublish` chaîne de connexion.</span><span class="sxs-lookup"><span data-stu-id="09108-255">In the deployed Web.config file, this becomes the `DatabasePublish` connection string.</span></span>
2. <span data-ttu-id="09108-256">Créer une transformation du fichier Web.config pour la chaîne de connexion que vous souhaitez que l’application à utiliser au moment de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="09108-256">Create a Web.config file transformation for the connection string that you want the application to use at run time.</span></span>

<span data-ttu-id="09108-257">Vous avez maintenant déployé votre application à IIS sur votre ordinateur de développement et testée il.</span><span class="sxs-lookup"><span data-stu-id="09108-257">You have now deployed your application to IIS on your development computer and tested it there.</span></span> <span data-ttu-id="09108-258">Cela vérifie que le processus de déploiement copie le contenu de l’application vers l’emplacement approprié (à l’exclusion de fichiers que vous ne voulez pas déployer) et également que Web Deploy IIS correctement configuré pendant le déploiement.</span><span class="sxs-lookup"><span data-stu-id="09108-258">This verifies that the deployment process copied the application's content to the right location (excluding the files that you did not want to deploy), and also that Web Deploy configured IIS correctly during deployment.</span></span> <span data-ttu-id="09108-259">Dans le didacticiel suivant, vous allez exécuter un test supplémentaire qui recherche une tâche de déploiement qui n’a pas encore été effectuée : définition des autorisations de dossier sur le *Elmah* dossier.</span><span class="sxs-lookup"><span data-stu-id="09108-259">In the next tutorial, you'll run one more test that finds a deployment task that has not yet been done: setting folder permissions on the *Elmah* folder.</span></span>

## <a name="more-information"></a><span data-ttu-id="09108-260">Informations complémentaires</span><span class="sxs-lookup"><span data-stu-id="09108-260">More Information</span></span>

<span data-ttu-id="09108-261">Pour plus d’informations sur l’exécution d’IIS ou IIS Express dans Visual Studio, consultez les ressources suivantes :</span><span class="sxs-lookup"><span data-stu-id="09108-261">For information about running IIS or IIS Express in Visual Studio, see the following resources:</span></span>

- <span data-ttu-id="09108-262">[Présentation d’IIS Express](https://www.iis.net/learn/extensions/introduction-to-iis-express/iis-express-overview) sur le site IIS.net.</span><span class="sxs-lookup"><span data-stu-id="09108-262">[IIS Express Overview](https://www.iis.net/learn/extensions/introduction-to-iis-express/iis-express-overview) on the IIS.net site.</span></span>
- <span data-ttu-id="09108-263">[Présentation d’IIS Express](https://weblogs.asp.net/scottgu/archive/2010/06/28/introducing-iis-express.aspx) sur le blog Guthrie.</span><span class="sxs-lookup"><span data-stu-id="09108-263">[Introducing IIS Express](https://weblogs.asp.net/scottgu/archive/2010/06/28/introducing-iis-express.aspx) on Scott Guthrie's blog.</span></span>
- <span data-ttu-id="09108-264">[Guide pratique pour Spécifiez le serveur Web pour les projets Web dans Visual Studio](https://msdn.microsoft.com/library/ms178108.aspx).</span><span class="sxs-lookup"><span data-stu-id="09108-264">[How to: Specify the Web Server for Web Projects in Visual Studio](https://msdn.microsoft.com/library/ms178108.aspx).</span></span>
- <span data-ttu-id="09108-265">[Principales différences entre IIS et le serveur de développement ASP.NET](../deploying-web-site-projects/core-differences-between-iis-and-the-asp-net-development-server-cs.md) sur le site ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="09108-265">[Core Differences Between IIS and the ASP.NET Development Server](../deploying-web-site-projects/core-differences-between-iis-and-the-asp-net-development-server-cs.md) on the ASP.NET site.</span></span>
- <span data-ttu-id="09108-266">[Tester votre ASP.NET MVC ou les applications Web sur IIS 7 en 30 secondes](https://blogs.msdn.com/b/rickandy/archive/2011/04/22/test-you-asp-net-mvc-or-webforms-application-on-iis-7-in-30-seconds.aspx) sur le blog de Rick Anderson.</span><span class="sxs-lookup"><span data-stu-id="09108-266">[Test your ASP.NET MVC or Web Forms Application on IIS 7 in 30 seconds](https://blogs.msdn.com/b/rickandy/archive/2011/04/22/test-you-asp-net-mvc-or-webforms-application-on-iis-7-in-30-seconds.aspx) on Rick Anderson's blog.</span></span> <span data-ttu-id="09108-267">Cette entrée fournit des exemples de pourquoi le test avec le serveur Visual Studio Development (Cassini) n’est pas aussi fiable que le test dans IIS Express, et pourquoi le test dans IIS Express n’est pas aussi fiable que le test dans IIS.</span><span class="sxs-lookup"><span data-stu-id="09108-267">This entry provides examples of why testing with the Visual Studio Development Server (Cassini) is not as reliable as testing in IIS Express, and why testing in IIS Express is not as reliable as testing in IIS.</span></span>

<span data-ttu-id="09108-268">Pour plus d’informations sur les problèmes pouvant survenir lorsque votre application s’exécute en mode de confiance moyenne, consultez [hébergeant les Applications ASP.NET en mode de confiance moyenne](http://www.4guysfromrolla.com/articles/100307-1.aspx) sur les 4 Guys Rolla site.</span><span class="sxs-lookup"><span data-stu-id="09108-268">For information about what issues might arise when your application runs in medium trust, see [Hosting ASP.NET Applications in Medium Trust](http://www.4guysfromrolla.com/articles/100307-1.aspx) on the 4 Guys from Rolla site.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="09108-269">[Précédent](deployment-to-a-hosting-provider-configuring-project-properties-4-of-12.md)
> [Suivant](deployment-to-a-hosting-provider-setting-folder-permissions-6-of-12.md)</span><span class="sxs-lookup"><span data-stu-id="09108-269">[Previous](deployment-to-a-hosting-provider-configuring-project-properties-4-of-12.md)
[Next](deployment-to-a-hosting-provider-setting-folder-permissions-6-of-12.md)</span></span>

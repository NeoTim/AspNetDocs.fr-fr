---
uid: web-forms/overview/older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12
title: 'Déploiement d’une application Web ASP.NET avec SQL Server Compact à l’aide de Visual Studio ou Visual Web Developer : déploiement sur l’environnement de production-7 sur 12 | Microsoft Docs'
author: tdykstra
description: Cette série de didacticiels vous montre comment déployer (publier) un projet d’application Web ASP.NET qui comprend une base de données SQL Server Compact à l’aide de Stu...
ms.author: riande
ms.date: 11/17/2011
ms.assetid: b83ab819-2b05-4776-b7b4-79ef78d457a5
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12
msc.type: authoredcontent
ms.openlocfilehash: db838633accdedd7c0693b126a007e254ca681e4
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/28/2019
ms.locfileid: "74627191"
---
# <a name="deploying-an-aspnet-web-application-with-sql-server-compact-using-visual-studio-or-visual-web-developer-deploying-to-the-production-environment---7-of-12"></a><span data-ttu-id="3fba0-103">Déploiement d’une application Web ASP.NET avec SQL Server Compact à l’aide de Visual Studio ou Visual Web Developer : déploiement sur l’environnement de production-7 sur 12</span><span class="sxs-lookup"><span data-stu-id="3fba0-103">Deploying an ASP.NET Web Application with SQL Server Compact using Visual Studio or Visual Web Developer: Deploying to the Production Environment - 7 of 12</span></span>

<span data-ttu-id="3fba0-104">par [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="3fba0-104">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

[<span data-ttu-id="3fba0-105">Télécharger le projet de démarrage</span><span class="sxs-lookup"><span data-stu-id="3fba0-105">Download Starter Project</span></span>](https://code.msdn.microsoft.com/Deploying-an-ASPNET-Web-4e31366b)

> <span data-ttu-id="3fba0-106">Cette série de didacticiels vous montre comment déployer (publier) un projet d’application Web ASP.NET qui comprend une base de données SQL Server Compact à l’aide de Visual Studio 2012 RC ou Visual Studio Express 2012 RC pour le Web.</span><span class="sxs-lookup"><span data-stu-id="3fba0-106">This series of tutorials shows you how to deploy (publish) an ASP.NET web application project that includes a SQL Server Compact database by using Visual Studio 2012 RC or Visual Studio Express 2012 RC for Web.</span></span> <span data-ttu-id="3fba0-107">Vous pouvez également utiliser Visual Studio 2010 si vous installez la mise à jour de publication Web.</span><span class="sxs-lookup"><span data-stu-id="3fba0-107">You can also use Visual Studio 2010 if you install the Web Publish Update.</span></span> <span data-ttu-id="3fba0-108">Pour obtenir une présentation de la série, consultez [le premier didacticiel de la série](deployment-to-a-hosting-provider-introduction-1-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="3fba0-108">For an introduction to the series, see [the first tutorial in the series](deployment-to-a-hosting-provider-introduction-1-of-12.md).</span></span>
> 
> <span data-ttu-id="3fba0-109">Pour obtenir un didacticiel qui présente les fonctionnalités de déploiement introduites après la version RC de Visual Studio 2012, montre comment déployer des éditions SQL Server autres que SQL Server Compact et montre comment déployer vers Azure App Service Web Apps, consultez [déploiement Web ASP.net à l’aide de Visual Studio](../../deployment/visual-studio-web-deployment/introduction.md).</span><span class="sxs-lookup"><span data-stu-id="3fba0-109">For a tutorial that shows deployment features introduced after the RC release of Visual Studio 2012, shows how to deploy SQL Server editions other than SQL Server Compact, and shows how to deploy to Azure App Service Web Apps, see [ASP.NET Web Deployment using Visual Studio](../../deployment/visual-studio-web-deployment/introduction.md).</span></span>

## <a name="overview"></a><span data-ttu-id="3fba0-110">Vue d'ensemble de</span><span class="sxs-lookup"><span data-stu-id="3fba0-110">Overview</span></span>

<span data-ttu-id="3fba0-111">Dans ce didacticiel, vous configurez un compte avec un fournisseur d’hébergement et déployez votre application Web ASP.NET dans l’environnement de production à l’aide de la fonctionnalité de publication en un clic de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="3fba0-111">In this tutorial, you set up an account with a hosting provider and deploy your ASP.NET web application to the production environment by using the Visual Studio one-click publish feature.</span></span>

<span data-ttu-id="3fba0-112">Rappel : Si vous recevez un message d’erreur ou si une action ne fonctionne pas au fur et à mesure que vous parcourez le didacticiel, veillez à consulter la [page de résolution des problèmes](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="3fba0-112">Reminder: If you get an error message or something doesn't work as you go through the tutorial, be sure to check the [troubleshooting page](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12.md).</span></span>

## <a name="selecting-a-hosting-provider"></a><span data-ttu-id="3fba0-113">Sélection d’un fournisseur d’hébergement</span><span class="sxs-lookup"><span data-stu-id="3fba0-113">Selecting a Hosting Provider</span></span>

<span data-ttu-id="3fba0-114">Pour l’application Contoso University et cette série de didacticiels, vous avez besoin d’un fournisseur qui prend en charge ASP.NET 4 et Web Deploy.</span><span class="sxs-lookup"><span data-stu-id="3fba0-114">For the Contoso University application and this tutorial series, you need a provider that supports ASP.NET 4 and Web Deploy.</span></span> <span data-ttu-id="3fba0-115">Une société d’hébergement spécifique a été choisie afin que les didacticiels illustrent l’expérience complète du déploiement sur un site Web en ligne.</span><span class="sxs-lookup"><span data-stu-id="3fba0-115">A specific hosting company was chosen so that the tutorials could illustrate the complete experience of deploying to a live website.</span></span> <span data-ttu-id="3fba0-116">Chaque société d’hébergement fournit des fonctionnalités différentes, et l’expérience de déploiement sur leurs serveurs varie quelque peu.</span><span class="sxs-lookup"><span data-stu-id="3fba0-116">Each hosting company provides different features, and the experience of deploying to their servers varies somewhat.</span></span> <span data-ttu-id="3fba0-117">Toutefois, le processus décrit dans ce didacticiel est courant pour le processus global.</span><span class="sxs-lookup"><span data-stu-id="3fba0-117">However, the process described in this tutorial is typical for the overall process.</span></span> <span data-ttu-id="3fba0-118">Le fournisseur d’hébergement utilisé pour ce didacticiel, Cytanium.com, est l’un des nombreux disponibles, et son utilisation dans ce didacticiel ne constitue pas une approbation ou une recommandation.</span><span class="sxs-lookup"><span data-stu-id="3fba0-118">The hosting provider used for this tutorial, Cytanium.com, is one of many that are available, and its use in this tutorial does not constitute an endorsement or recommendation.</span></span>

<span data-ttu-id="3fba0-119">Lorsque vous êtes prêt à sélectionner votre propre fournisseur d’hébergement, vous pouvez comparer les fonctionnalités et les prix dans la [Galerie de fournisseurs](https://www.microsoft.com/web/hosting) sur le site Microsoft.com/Web.</span><span class="sxs-lookup"><span data-stu-id="3fba0-119">When you are ready to select your own hosting provider, you can compare features and prices in the [gallery of providers](https://www.microsoft.com/web/hosting) on the Microsoft.com/web site.</span></span>

## <a name="creating-an-account"></a><span data-ttu-id="3fba0-120">Création d’un compte</span><span class="sxs-lookup"><span data-stu-id="3fba0-120">Creating an Account</span></span>

<span data-ttu-id="3fba0-121">Créez un compte sur le fournisseur sélectionné.</span><span class="sxs-lookup"><span data-stu-id="3fba0-121">Create an account at your selected provider.</span></span> <span data-ttu-id="3fba0-122">Si la prise en charge d’une base de données SQL Server complète est un ajout supplémentaire, vous n’avez pas besoin de la sélectionner pour ce didacticiel, mais vous en aurez besoin pour le didacticiel [sur la migration vers SQL Server](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12.md) plus loin dans cette série.</span><span class="sxs-lookup"><span data-stu-id="3fba0-122">If support for a full SQL Server database is an added extra, you do not need to select it for this tutorial, but you'll need it for the [Migrating to SQL Server](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12.md) tutorial later in this series.</span></span>

<span data-ttu-id="3fba0-123">Pour ces didacticiels, vous n’êtes pas obligé d’inscrire un nouveau nom de domaine.</span><span class="sxs-lookup"><span data-stu-id="3fba0-123">For these tutorials, you don't have to register a new domain name.</span></span> <span data-ttu-id="3fba0-124">Vous pouvez effectuer un test pour vérifier que le déploiement a réussi à l’aide de l’URL temporaire attribuée au site par le fournisseur.</span><span class="sxs-lookup"><span data-stu-id="3fba0-124">You can test to verify successful deployment by using the temporary URL assigned to the site by the provider.</span></span>

<span data-ttu-id="3fba0-125">Une fois le compte créé, vous recevez généralement un e-mail de bienvenue contenant toutes les informations dont vous avez besoin pour déployer et gérer votre site.</span><span class="sxs-lookup"><span data-stu-id="3fba0-125">After the account has been created, you typically receive a welcome email that contains all the information you need in order to deploy and manage your site.</span></span> <span data-ttu-id="3fba0-126">Les informations que votre fournisseur d’hébergement envoie vous seront similaires à ce qui est présenté ici.</span><span class="sxs-lookup"><span data-stu-id="3fba0-126">The information that your hosting provider sends you will be similar to what is shown here.</span></span> <span data-ttu-id="3fba0-127">Le courrier électronique de bienvenue Cytanium envoyé aux nouveaux propriétaires de compte comprend les informations suivantes :</span><span class="sxs-lookup"><span data-stu-id="3fba0-127">The Cytanium welcome email that's sent to new account owners includes the following information:</span></span>

- <span data-ttu-id="3fba0-128">URL vers le site du panneau de configuration du fournisseur, dans lequel vous pouvez gérer les paramètres de votre site.</span><span class="sxs-lookup"><span data-stu-id="3fba0-128">The URL to the provider's control panel site, where you can manage settings for your site.</span></span> <span data-ttu-id="3fba0-129">L’ID et le mot de passe que vous avez spécifiés sont inclus dans cette partie de l’e-mail de bienvenue afin d’en faciliter la référence.</span><span class="sxs-lookup"><span data-stu-id="3fba0-129">The ID and password you specified are included in this part of the welcome email for easy reference.</span></span> <span data-ttu-id="3fba0-130">(Les deux ont été remplacées par une valeur de démonstration pour cette illustration.)</span><span class="sxs-lookup"><span data-stu-id="3fba0-130">(Both have been changed to a demo value for this illustration.)</span></span>

    <span data-ttu-id="3fba0-131">[![Welcome_Email_Control_Panel_URL](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image2.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="3fba0-131">[![Welcome_Email_Control_Panel_URL](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image2.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image1.png)</span></span>
- <span data-ttu-id="3fba0-132">La version .NET Framework par défaut et les informations sur la façon de le modifier.</span><span class="sxs-lookup"><span data-stu-id="3fba0-132">The default .NET Framework version and information about how to change it.</span></span> <span data-ttu-id="3fba0-133">La plupart des sites d’hébergement ont par défaut la valeur 2,0, qui fonctionne avec les applications ASP.NET qui ciblent le .NET Framework 2,0, 3,0 ou 3,5.</span><span class="sxs-lookup"><span data-stu-id="3fba0-133">Many hosting sites default to 2.0, which works with ASP.NET applications that target the .NET Framework 2.0, 3.0, or 3.5.</span></span> <span data-ttu-id="3fba0-134">Toutefois, Contoso University étant une application .NET Framework 4, vous devez modifier ce paramètre.</span><span class="sxs-lookup"><span data-stu-id="3fba0-134">However Contoso University is a .NET Framework 4 application, so you have to change this setting.</span></span> <span data-ttu-id="3fba0-135">(Pour une application ASP.NET 4,5, vous utiliseriez le paramètre .NET 4,0.)</span><span class="sxs-lookup"><span data-stu-id="3fba0-135">(For an ASP.NET 4.5 application you would use the .NET 4.0 setting.)</span></span>

    <span data-ttu-id="3fba0-136">[![Welcome_Email_Framework_Version](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image4.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="3fba0-136">[![Welcome_Email_Framework_Version](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image4.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image3.png)</span></span>
- <span data-ttu-id="3fba0-137">URL temporaire que vous pouvez utiliser pour accéder à votre site Web.</span><span class="sxs-lookup"><span data-stu-id="3fba0-137">The temporary URL that you can use to access your web site.</span></span> <span data-ttu-id="3fba0-138">Lorsque ce compte a été créé, « contosouniversity.com » a été entré en tant que nom de domaine existant.</span><span class="sxs-lookup"><span data-stu-id="3fba0-138">When this account was created, "contosouniversity.com" was entered as the existing domain name.</span></span> <span data-ttu-id="3fba0-139">Par conséquent, l’URL temporaire est `http://contosouniversity.com.vserver01.cytanium.com`.</span><span class="sxs-lookup"><span data-stu-id="3fba0-139">Therefore the temporary URL is `http://contosouniversity.com.vserver01.cytanium.com`.</span></span>

    <span data-ttu-id="3fba0-140">[![Welcome_Email_Temporary_URL](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image6.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="3fba0-140">[![Welcome_Email_Temporary_URL](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image6.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image5.png)</span></span>
- <span data-ttu-id="3fba0-141">Informations sur la configuration des bases de données et les chaînes de connexion dont vous avez besoin pour y accéder :</span><span class="sxs-lookup"><span data-stu-id="3fba0-141">Information about how to set up databases, and the connection strings that you need in order to access them:</span></span>

    <span data-ttu-id="3fba0-142">[![Welcome_Email_Database_Info](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image8.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="3fba0-142">[![Welcome_Email_Database_Info](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image8.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image7.png)</span></span>
- <span data-ttu-id="3fba0-143">Informations sur les outils et les paramètres pour le déploiement de votre site.</span><span class="sxs-lookup"><span data-stu-id="3fba0-143">Information about tools and settings for deploying your site.</span></span> <span data-ttu-id="3fba0-144">(L’e-mail de Cytanium mentionne également WebMatrix, qui est omis ici.)</span><span class="sxs-lookup"><span data-stu-id="3fba0-144">(The email from Cytanium also mentions WebMatrix, which is omitted here.)</span></span>

    <span data-ttu-id="3fba0-145">[![Welcome_Email_Deploy_info](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image10.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="3fba0-145">[![Welcome_Email_Deploy_info](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image10.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image9.png)</span></span>

## <a name="setting-the-net-framework-version"></a><span data-ttu-id="3fba0-146">Définition de la version de .NET Framework</span><span class="sxs-lookup"><span data-stu-id="3fba0-146">Setting the .NET Framework Version</span></span>

<span data-ttu-id="3fba0-147">L’e-mail de bienvenue Cytanium contient un lien vers des instructions sur la façon de modifier la version du .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="3fba0-147">The Cytanium welcome email includes a link to instructions on how to change the version of the .NET Framework.</span></span> <span data-ttu-id="3fba0-148">Ces instructions expliquent que cela peut être effectué par le biais du panneau de configuration Cytanium.</span><span class="sxs-lookup"><span data-stu-id="3fba0-148">These instructions explain that this can be done through the Cytanium control panel.</span></span> <span data-ttu-id="3fba0-149">Les autres fournisseurs disposent de sites du panneau de configuration qui s’affichent différemment, ou ils peuvent vous indiquer de le faire d’une autre façon.</span><span class="sxs-lookup"><span data-stu-id="3fba0-149">Other providers have control panel sites that look different, or they may instruct you to do this in a different way.</span></span>

<span data-ttu-id="3fba0-150">Accédez à l’URL du panneau de configuration.</span><span class="sxs-lookup"><span data-stu-id="3fba0-150">Go to the control panel URL.</span></span> <span data-ttu-id="3fba0-151">Une fois connecté avec votre nom d’utilisateur et votre mot de passe, le panneau de configuration s’affiche.</span><span class="sxs-lookup"><span data-stu-id="3fba0-151">After logging in with your user name and password, you see the control panel.</span></span>

<span data-ttu-id="3fba0-152">[![Cytanium_Control_Panel](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image12.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="3fba0-152">[![Cytanium_Control_Panel](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image12.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image11.png)</span></span>

<span data-ttu-id="3fba0-153">Dans la zone **espaces d’hébergement** , maintenez le pointeur sur l’icône Web et sélectionnez **sites Web** dans le menu.</span><span class="sxs-lookup"><span data-stu-id="3fba0-153">In the **Hosting Spaces** box, hold the pointer over the Web icon and select **Web Sites** from the menu.</span></span>

<span data-ttu-id="3fba0-154">[![Cytanium_Control_Panel_selecting_Web_Sites](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image14.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="3fba0-154">[![Cytanium_Control_Panel_selecting_Web_Sites](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image14.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image13.png)</span></span>

<span data-ttu-id="3fba0-155">Dans la zone **sites Web** , cliquez sur **contosouniversity.com** (le nom du site que vous avez utilisé lors de la création du compte).</span><span class="sxs-lookup"><span data-stu-id="3fba0-155">In the **Web Sites** box, click **contosouniversity.com** (the name of the site that you used when you created the account).</span></span>

<span data-ttu-id="3fba0-156">[![Cytanium_Control_Panel_selecting_contosouniversity](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image16.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="3fba0-156">[![Cytanium_Control_Panel_selecting_contosouniversity](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image16.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image15.png)</span></span>

<span data-ttu-id="3fba0-157">Dans la zone **Propriétés du site Web** , sélectionnez l’onglet **Extensions** .</span><span class="sxs-lookup"><span data-stu-id="3fba0-157">In the **Web Site Properties** box, select the **Extensions** tab.</span></span>

<span data-ttu-id="3fba0-158">[![Cytanium_Control_Panel_Extensions_tab](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image18.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="3fba0-158">[![Cytanium_Control_Panel_Extensions_tab](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image18.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image17.png)</span></span>

<span data-ttu-id="3fba0-159">Remplacez ASP.NET du **pipeline intégré 2,0** par **4,0 (pipeline intégré)** , puis cliquez sur **mettre à jour**.</span><span class="sxs-lookup"><span data-stu-id="3fba0-159">Change ASP.NET from **2.0 Integrated Pipeline** to **4.0 (Integrated Pipeline)**, and then click **Update**.</span></span>

## <a name="publishing-to-the-hosting-provider"></a><span data-ttu-id="3fba0-160">Publication sur le fournisseur d’hébergement</span><span class="sxs-lookup"><span data-stu-id="3fba0-160">Publishing to the Hosting Provider</span></span>

<span data-ttu-id="3fba0-161">L’e-mail de bienvenue du fournisseur d’hébergement comprend tous les paramètres dont vous avez besoin pour publier le projet, et vous pouvez entrer ces informations manuellement dans un profil de publication.</span><span class="sxs-lookup"><span data-stu-id="3fba0-161">The welcome email from the hosting provider includes all of the settings you need in order to publish the project, and you can enter that information manually into a publish profile.</span></span> <span data-ttu-id="3fba0-162">Mais vous utiliserez une méthode plus simple et moins sujette aux erreurs pour configurer le déploiement sur le fournisseur : vous allez télécharger un fichier *. publishsettings* et l’importer dans un profil de publication.</span><span class="sxs-lookup"><span data-stu-id="3fba0-162">But you'll use an easier and less error-prone method to configure deployment to the provider: you'll download a *.publishsettings* file and import it into a publish profile.</span></span>

<span data-ttu-id="3fba0-163">Dans votre navigateur, accédez au panneau de configuration Cytanium, sélectionnez **Web** , puis sélectionnez **sites Web.**</span><span class="sxs-lookup"><span data-stu-id="3fba0-163">In your browser, go to the Cytanium control panel and select **Web** and then select **Web Sites.**</span></span>

![Panneau de configuration sélection de sites Web](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image19.png)

<span data-ttu-id="3fba0-165">Sélectionnez le site Web **contosouniversity.com** .</span><span class="sxs-lookup"><span data-stu-id="3fba0-165">Select the **contosouniversity.com** web site.</span></span>

![Panneau de configuration, sélection de contosouniversity.com](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image20.png)

<span data-ttu-id="3fba0-167">Sélectionnez l’onglet **publication Web** .</span><span class="sxs-lookup"><span data-stu-id="3fba0-167">Select the **Web Publishing** tab.</span></span>

![Onglet publication Web du panneau de configuration](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image21.png)

<span data-ttu-id="3fba0-169">Créez les informations d’identification à utiliser pour la publication Web en entrant un nom d’utilisateur et un mot de passe.</span><span class="sxs-lookup"><span data-stu-id="3fba0-169">Create credentials to use for web publishing by entering a user name and password.</span></span> <span data-ttu-id="3fba0-170">Vous pouvez entrer les mêmes informations d’identification que celles que vous utilisez pour ouvrir une session sur le panneau de configuration.</span><span class="sxs-lookup"><span data-stu-id="3fba0-170">You can enter the same credentials that you use to log on to the control panel.</span></span> <span data-ttu-id="3fba0-171">Cliquez ensuite sur **activer**.</span><span class="sxs-lookup"><span data-stu-id="3fba0-171">Then click **Enable**.</span></span>

![Panneau de configuration-créer des informations d’identification de publication](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image22.png)

<span data-ttu-id="3fba0-173">Cliquez sur **Télécharger le profil de publication pour ce site Web**.</span><span class="sxs-lookup"><span data-stu-id="3fba0-173">Click **Download Publishing Profile for this web site**.</span></span>

![Panneau de configuration-Télécharger le profil de publication](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image23.png)

<span data-ttu-id="3fba0-175">Lorsque vous êtes invité à ouvrir ou enregistrer le fichier, enregistrez-le.</span><span class="sxs-lookup"><span data-stu-id="3fba0-175">When you are prompted to open or save the file, save it.</span></span>

![Enregistrer le fichier de profil de publication](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image24.png)

<span data-ttu-id="3fba0-177">Dans **Explorateur de solutions** dans Visual Studio, cliquez avec le bouton droit sur le projet ContosoUniversity et sélectionnez **publier**.</span><span class="sxs-lookup"><span data-stu-id="3fba0-177">In **Solution Explorer** in Visual Studio, right-click the ContosoUniversity project and select **Publish**.</span></span> <span data-ttu-id="3fba0-178">La boîte de dialogue **publier le site Web** s’ouvre sous l’onglet **Aperçu** avec le profil de **test** sélectionné, car il s’agit du dernier profil que vous avez utilisé.</span><span class="sxs-lookup"><span data-stu-id="3fba0-178">The **Publish Web** dialog box opens on the **Preview** tab with the **Test** profile selected because that is the last profile you used.</span></span>

<span data-ttu-id="3fba0-179">Sélectionnez l’onglet **Profil** , puis cliquez sur **Importer**.</span><span class="sxs-lookup"><span data-stu-id="3fba0-179">Select the **Profile** tab and then Click **Import**.</span></span>

![Bouton d’importation de l’Assistant publier le site Web](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image25.png)

<span data-ttu-id="3fba0-181">Dans la boîte de dialogue **Importer les paramètres de publication** , sélectionnez le fichier *. publishsettings* que vous avez téléchargé, puis cliquez sur **ouvrir**.</span><span class="sxs-lookup"><span data-stu-id="3fba0-181">In the **Import Publish Settings** dialog box, select the *.publishsettings* file that you downloaded, and click **Open**.</span></span> <span data-ttu-id="3fba0-182">L’Assistant passe à l’onglet connexion avec tous les champs renseignés.</span><span class="sxs-lookup"><span data-stu-id="3fba0-182">The wizard advances to the Connection tab with all of the fields filled in.</span></span>

![Onglet de connexion de l’Assistant publier le site Web](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image26.png)

<span data-ttu-id="3fba0-184">Le fichier. publishsettings place l’URL permanente planifiée pour le site dans la zone URL de destination, mais si vous n’avez pas encore acheté ce domaine, remplacez la valeur par l’URL temporaire.</span><span class="sxs-lookup"><span data-stu-id="3fba0-184">The .publishsettings file puts the planned permanent URL for the site in the Destination URL box, but if you haven't purchased that domain yet, replace the value with the temporary URL.</span></span> <span data-ttu-id="3fba0-185">Pour cet exemple, l’URL est  *[http://contosouniversity.com.vserver01.cytanium.com](http://contosouniversity.com.vserver01.cytanium.com).*</span><span class="sxs-lookup"><span data-stu-id="3fba0-185">For this example, the URL is *[http://contosouniversity.com.vserver01.cytanium.com](http://contosouniversity.com.vserver01.cytanium.com).*</span></span> <span data-ttu-id="3fba0-186">Le seul objectif de cette zone est de spécifier l’URL à laquelle le navigateur s’ouvrira automatiquement après le déploiement.</span><span class="sxs-lookup"><span data-stu-id="3fba0-186">The only purpose of this box is to specify what URL the browser will open to automatically after successfully after deployment.</span></span> <span data-ttu-id="3fba0-187">Si vous laissez le champ vide, la seule conséquence est que le navigateur ne démarre pas automatiquement après le déploiement.</span><span class="sxs-lookup"><span data-stu-id="3fba0-187">If you leave it blank, the only consequence is that the browser won't start automatically after deployment.</span></span>

<span data-ttu-id="3fba0-188">Cliquez sur **valider la connexion** pour vérifier que les paramètres sont corrects et que vous pouvez vous connecter au serveur.</span><span class="sxs-lookup"><span data-stu-id="3fba0-188">Click **Validate Connection** to verify that the settings are correct and you can connect to the server.</span></span> <span data-ttu-id="3fba0-189">Comme vous l’avez vu précédemment, une coche verte vérifie que la connexion a réussi.</span><span class="sxs-lookup"><span data-stu-id="3fba0-189">As you saw earlier, a green check mark verifies that the connection is successful.</span></span>

<span data-ttu-id="3fba0-190">Lorsque vous cliquez sur valider la connexion, une boîte de dialogue **erreur de certificat** peut s’afficher.</span><span class="sxs-lookup"><span data-stu-id="3fba0-190">When you click Validate Connection, you might see a **Certificate Error** dialog box.</span></span> <span data-ttu-id="3fba0-191">Si vous le faites, vérifiez que le nom du serveur correspond à ce que vous attendez.</span><span class="sxs-lookup"><span data-stu-id="3fba0-191">If you do, verify that the server name is what you expect.</span></span> <span data-ttu-id="3fba0-192">Si c’est le cas, sélectionnez **enregistrer ce certificat pour les futures sessions de Visual Studio** , puis cliquez sur **accepter**.</span><span class="sxs-lookup"><span data-stu-id="3fba0-192">If it is, select **Save this certificate for future sessions of Visual Studio** and click **Accept**.</span></span> <span data-ttu-id="3fba0-193">(Cette erreur signifie que le fournisseur d’hébergement a choisi d’éviter les dépenses liées à l’achat d’un certificat SSL pour l’URL vers laquelle vous effectuez le déploiement.</span><span class="sxs-lookup"><span data-stu-id="3fba0-193">(This error means that the hosting provider has chosen to avoid the expense of purchasing an SSL certificate for the URL that you are deploying to.</span></span> <span data-ttu-id="3fba0-194">Si vous préférez établir une connexion sécurisée à l’aide d’un certificat valide, contactez votre fournisseur d’hébergement.)</span><span class="sxs-lookup"><span data-stu-id="3fba0-194">If you prefer to establish a secure connection by using a valid certificate, contact your hosting provider.)</span></span>

![Erreur de certificat](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image27.png)

<span data-ttu-id="3fba0-196">Cliquez sur **Next**.</span><span class="sxs-lookup"><span data-stu-id="3fba0-196">Click **Next**.</span></span>

<span data-ttu-id="3fba0-197">Dans la section **bases de données** de l’onglet **paramètres** , entrez les mêmes valeurs que celles que vous avez entrées pour le profil de publication de test.</span><span class="sxs-lookup"><span data-stu-id="3fba0-197">In the **Databases** section of the **Settings** tab, enter the same values that you entered for the Test publish profile.</span></span> <span data-ttu-id="3fba0-198">Vous trouverez les chaînes de connexion dont vous avez besoin dans les listes déroulantes.</span><span class="sxs-lookup"><span data-stu-id="3fba0-198">You'll find the connection strings you need in the drop-down lists.</span></span>

- <span data-ttu-id="3fba0-199">Dans la zone chaîne de connexion pour **SchoolContext,** sélectionnez `Data Source=|DataDirectory|School-Prod.sdf`</span><span class="sxs-lookup"><span data-stu-id="3fba0-199">In the connection string box for **SchoolContext,** select `Data Source=|DataDirectory|School-Prod.sdf`</span></span>
- <span data-ttu-id="3fba0-200">Sous **SchoolContext**, sélectionnez **appliquer migrations code First**.</span><span class="sxs-lookup"><span data-stu-id="3fba0-200">Under **SchoolContext**, select **Apply Code First Migrations**.</span></span>
- <span data-ttu-id="3fba0-201">Dans la zone chaîne de connexion pour **DefaultConnection**, sélectionnez `Data Source=|DataDirectory|aspnet-Prod.sdf`</span><span class="sxs-lookup"><span data-stu-id="3fba0-201">In the connection string box for **DefaultConnection**, select `Data Source=|DataDirectory|aspnet-Prod.sdf`</span></span>
- <span data-ttu-id="3fba0-202">Sous **DefaultConnection**, laissez **mettre à jour la base de données** désactivée.</span><span class="sxs-lookup"><span data-stu-id="3fba0-202">Under **DefaultConnection**, leave **Update database** cleared.</span></span>

![Onglet Paramètres de l’Assistant publier le site Web](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image28.png)

<span data-ttu-id="3fba0-204">Cliquez sur **Next**.</span><span class="sxs-lookup"><span data-stu-id="3fba0-204">Click **Next**.</span></span>

<span data-ttu-id="3fba0-205">Dans l’onglet **Aperçu** , cliquez sur **Démarrer l’aperçu** pour afficher la liste des fichiers qui seront copiés.</span><span class="sxs-lookup"><span data-stu-id="3fba0-205">In the **Preview** tab, click **Start Preview** to see a list of the files that will be copied.</span></span> <span data-ttu-id="3fba0-206">Vous voyez la même liste que celle que vous avez vue précédemment lorsque vous avez effectué le déploiement sur IIS sur l’ordinateur local.</span><span class="sxs-lookup"><span data-stu-id="3fba0-206">You see the same list that you saw earlier when you deployed to IIS on the local computer.</span></span>

<span data-ttu-id="3fba0-207">Avant de publier, modifiez le nom du profil afin que votre fichier de transformation Web. production. config s’applique.</span><span class="sxs-lookup"><span data-stu-id="3fba0-207">Before you publish, change the name of the profile so that your Web.Production.config transformation file will be applied.</span></span> <span data-ttu-id="3fba0-208">Sélectionnez l’onglet **Profil** , puis cliquez sur **gérer les profils**.</span><span class="sxs-lookup"><span data-stu-id="3fba0-208">Select the **Profile** tab and click **Manage Profiles**.</span></span>

![Assistant publier le site Web-gérer les profils](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image29.png)

<span data-ttu-id="3fba0-210">Dans la boîte de dialogue **modifier les profils de publication Web** , sélectionnez le profil de production, cliquez sur **Renommer**, puis remplacez le nom du profil par production.</span><span class="sxs-lookup"><span data-stu-id="3fba0-210">In the **Edit Web Publish Profiles** dialog box, select the production profile, click **Rename**, and change the profile name to Production.</span></span> <span data-ttu-id="3fba0-211">Cliquez ensuite sur **Fermer**.</span><span class="sxs-lookup"><span data-stu-id="3fba0-211">Then click **Close**.</span></span>

![Boîte de dialogue Modifier les profils de publication Web](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image30.png)

<span data-ttu-id="3fba0-213">Cliquez sur **Publier**.</span><span class="sxs-lookup"><span data-stu-id="3fba0-213">Click **Publish**.</span></span>

<span data-ttu-id="3fba0-214">L’application est publiée sur le fournisseur d’hébergement.</span><span class="sxs-lookup"><span data-stu-id="3fba0-214">The application is published to the hosting provider.</span></span> <span data-ttu-id="3fba0-215">Le résultat s’affiche dans la fenêtre **sortie** .</span><span class="sxs-lookup"><span data-stu-id="3fba0-215">The result shows in the **Output** window.</span></span>

![Fenêtre sortie après le déploiement](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image31.png)

<span data-ttu-id="3fba0-217">Le navigateur s’ouvre automatiquement à l’URL que vous avez entrée dans la zone **URL de destination** sous l’onglet **connexion** de l’Assistant **publier le site Web** .</span><span class="sxs-lookup"><span data-stu-id="3fba0-217">The browser automatically opens to the URL that you entered in **Destination URL** box on the **Connection** tab of the **Publish Web** wizard.</span></span> <span data-ttu-id="3fba0-218">Vous voyez la même page d’hébergement que lorsque vous exécutez le site dans Visual Studio, à l’exception du fait qu’il n’y a pas d’indicateur d’environnement « (test) » ou « (dev) » dans la barre de titre.</span><span class="sxs-lookup"><span data-stu-id="3fba0-218">You see the same home page as when you run the site in Visual Studio, except now there is no "(Test)" or "(Dev)" environment indicator in the title bar.</span></span> <span data-ttu-id="3fba0-219">Cela indique que la transformation *Web. config* de l’indicateur d’environnement fonctionnait correctement.</span><span class="sxs-lookup"><span data-stu-id="3fba0-219">This indicates that the environment indicator *Web.config* transformation worked correctly.</span></span>

> [!NOTE]
> <span data-ttu-id="3fba0-220">Si vous voyez toujours « (test) » dans le titre, supprimez le dossier *obj* du projet ContosoUniversity et redéployez.</span><span class="sxs-lookup"><span data-stu-id="3fba0-220">If you still see "(Test)" in the heading, delete the *obj* folder from the ContosoUniversity project and redeploy.</span></span> <span data-ttu-id="3fba0-221">Dans les versions préliminaires du logiciel, le fichier de transformation appliqué précédemment (Web. test. config) peut être appliqué à nouveau bien que vous utilisiez le profil de production.</span><span class="sxs-lookup"><span data-stu-id="3fba0-221">In pre-release versions of the software, the previously applied transformation file (Web.Test.config) might get applied again although you are using the Production profile.</span></span>

<span data-ttu-id="3fba0-222">[![Home_page_Prod](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image33.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image32.png)</span><span class="sxs-lookup"><span data-stu-id="3fba0-222">[![Home_page_Prod](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image33.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image32.png)</span></span>

<span data-ttu-id="3fba0-223">Avant d’exécuter une page qui provoque l’accès à la base de données, assurez-vous que ELMAH peut consigner les erreurs qui se produisent.</span><span class="sxs-lookup"><span data-stu-id="3fba0-223">Before you run a page that causes database access, make sure that Elmah will be able to log any errors that occur.</span></span>

## <a name="setting-folder-permissions-for-elmah"></a><span data-ttu-id="3fba0-224">Définition des autorisations de dossier pour ELMAH</span><span class="sxs-lookup"><span data-stu-id="3fba0-224">Setting Folder Permissions for Elmah</span></span>

<span data-ttu-id="3fba0-225">Comme vous le savez dans le didacticiel précédent de cette série, vous devez vous assurer que l’application dispose des autorisations en écriture sur le dossier de votre application où ELMAH stocke les fichiers journaux des erreurs.</span><span class="sxs-lookup"><span data-stu-id="3fba0-225">As you remember from the previous tutorial in this series, you must make sure that the application has Write permissions for the folder in your application where Elmah stores error log files.</span></span> <span data-ttu-id="3fba0-226">Lorsque vous déployez sur IIS localement sur votre ordinateur, vous définissez ces autorisations manuellement.</span><span class="sxs-lookup"><span data-stu-id="3fba0-226">When you deployed to IIS locally on your computer, you set those permissions manually.</span></span> <span data-ttu-id="3fba0-227">Dans cette section, vous allez apprendre à définir des autorisations sur Cytanium.</span><span class="sxs-lookup"><span data-stu-id="3fba0-227">In this section, you'll see how to set permissions at Cytanium.</span></span> <span data-ttu-id="3fba0-228">(Certains fournisseurs d’hébergement peuvent ne pas vous permettre de le faire ; ils peuvent proposer un ou plusieurs dossiers prédéfinis avec des autorisations d’écriture.</span><span class="sxs-lookup"><span data-stu-id="3fba0-228">(Some hosting providers may not enable you to do this; they may offer one or more predefined folders with Write permissions.</span></span> <span data-ttu-id="3fba0-229">Dans ce cas, vous devez modifier votre application pour utiliser les dossiers spécifiés.)</span><span class="sxs-lookup"><span data-stu-id="3fba0-229">In that case you would have to modify your application to use the specified folders.)</span></span>

<span data-ttu-id="3fba0-230">Vous pouvez définir des autorisations sur les dossiers dans le panneau de configuration Cytanium.</span><span class="sxs-lookup"><span data-stu-id="3fba0-230">You can set folder permissions in the Cytanium control panel.</span></span> <span data-ttu-id="3fba0-231">Accédez à l’URL du panneau de configuration et sélectionnez **Gestionnaire de fichiers**.</span><span class="sxs-lookup"><span data-stu-id="3fba0-231">Go to the control panel URL and select **File Manager**.</span></span>

<span data-ttu-id="3fba0-232">[![Cytanium_Control_Panel_with_File_Manager_selected](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image35.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="3fba0-232">[![Cytanium_Control_Panel_with_File_Manager_selected](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image35.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image34.png)</span></span>

<span data-ttu-id="3fba0-233">Dans la zone **Gestionnaire de fichiers** , sélectionnez **contosouniversity.com** , puis **wwwroot** pour afficher le dossier racine de l’application.</span><span class="sxs-lookup"><span data-stu-id="3fba0-233">In the **File Manager** box, select **contosouniversity.com** and then **wwwroot** to see the application's root folder.</span></span> <span data-ttu-id="3fba0-234">Cliquez sur l’icône de cadenas en regard de **ELMAH**.</span><span class="sxs-lookup"><span data-stu-id="3fba0-234">Click the padlock icon next to **Elmah**.</span></span>

<span data-ttu-id="3fba0-235">[![Cytanium_Control_Panel_File_Manager_at_root_folder](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image37.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image36.png)</span><span class="sxs-lookup"><span data-stu-id="3fba0-235">[![Cytanium_Control_Panel_File_Manager_at_root_folder](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image37.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image36.png)</span></span>

<span data-ttu-id="3fba0-236">Dans la fenêtre autorisations de **fichier**/**dossier** , activez les cases à cocher **lecture** et **écriture** pour **contosouniversity.com** , puis cliquez sur **définir les autorisations**.</span><span class="sxs-lookup"><span data-stu-id="3fba0-236">In the **File**/**Folder Permissions** window, select the **Read** and **Write** checkboxes for **contosouniversity.com** and click **Set Permissions**.</span></span>

<span data-ttu-id="3fba0-237">[![Cytanium_Control_Panel_File_Folder_Permissions_Elmah](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image39.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="3fba0-237">[![Cytanium_Control_Panel_File_Folder_Permissions_Elmah](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image39.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image38.png)</span></span>

<span data-ttu-id="3fba0-238">Assurez-vous que ELMAH a accès en écriture au dossier *ELMAH* en générant une erreur, puis en affichant le rapport d’erreurs ELMAH.</span><span class="sxs-lookup"><span data-stu-id="3fba0-238">Make sure that Elmah has write access to the *Elmah* folder by causing an error and then displaying the Elmah error report.</span></span> <span data-ttu-id="3fba0-239">Demandez une URL non valide telle que *Studentsxxx. aspx*.</span><span class="sxs-lookup"><span data-stu-id="3fba0-239">Request an invalid URL like *Studentsxxx.aspx*.</span></span> <span data-ttu-id="3fba0-240">Comme précédemment, vous voyez la page *GenericErrorPage. aspx* .</span><span class="sxs-lookup"><span data-stu-id="3fba0-240">As before, you see the *GenericErrorPage.aspx* page.</span></span> <span data-ttu-id="3fba0-241">Cliquez sur le lien **déconnexion** , puis exécutez *ELMAH. axd*.</span><span class="sxs-lookup"><span data-stu-id="3fba0-241">Click the **Log Out** link, and then run *Elmah.axd*.</span></span> <span data-ttu-id="3fba0-242">Vous recevez d’abord la page **de connexion** , ce qui confirme que la transformation *Web. config* a ajouté l’autorisation ELMAH.</span><span class="sxs-lookup"><span data-stu-id="3fba0-242">You get the **Log In** page first, which validates that the *Web.config* transform successfully added Elmah authorization.</span></span> <span data-ttu-id="3fba0-243">Une fois connecté, vous voyez le rapport qui affiche l’erreur que vous venez de vous produire.</span><span class="sxs-lookup"><span data-stu-id="3fba0-243">After you log in, you see the report that shows the error you just caused.</span></span>

<span data-ttu-id="3fba0-244">[![ELMAH. axd_Prod](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image41.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image40.png)</span><span class="sxs-lookup"><span data-stu-id="3fba0-244">[![Elmah.axd_Prod](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image41.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image40.png)</span></span>

## <a name="testing-in-the-production-environment"></a><span data-ttu-id="3fba0-245">Test dans l’environnement de production</span><span class="sxs-lookup"><span data-stu-id="3fba0-245">Testing in the Production Environment</span></span>

<span data-ttu-id="3fba0-246">Exécutez la page **students** .</span><span class="sxs-lookup"><span data-stu-id="3fba0-246">Run the **Students** page.</span></span> <span data-ttu-id="3fba0-247">L’application tente d’accéder à la base de données School pour la première fois, ce qui déclenche Migrations Code First pour créer la base de données.</span><span class="sxs-lookup"><span data-stu-id="3fba0-247">The application tries to access the School database for the first time, which triggers Code First Migrations to create the database.</span></span> <span data-ttu-id="3fba0-248">Lorsque la page s’affiche après un certain délai, elle indique qu’il n’y a pas d’élèves.</span><span class="sxs-lookup"><span data-stu-id="3fba0-248">When the page displays after a moment's delay, it shows that there are no students.</span></span>

<span data-ttu-id="3fba0-249">[![Students_page_Prod](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image43.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image42.png)</span><span class="sxs-lookup"><span data-stu-id="3fba0-249">[![Students_page_Prod](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image43.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image42.png)</span></span>

<span data-ttu-id="3fba0-250">Exécutez la page des **instructeurs** pour vérifier que les données de départ ont correctement inséré les données de l’instructeur dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="3fba0-250">Run the **Instructors** page to verify that the Seed data successfully inserted instructor data in the database.</span></span>

<span data-ttu-id="3fba0-251">[![Instructors_page_Prod](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image45.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image44.png)</span><span class="sxs-lookup"><span data-stu-id="3fba0-251">[![Instructors_page_Prod](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image45.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image44.png)</span></span>

<span data-ttu-id="3fba0-252">Comme vous l’avez fait dans l’environnement de test, vous souhaitez vérifier que les mises à jour de base de données fonctionnent dans l’environnement de production, mais que vous ne souhaitez généralement pas entrer de données de test dans votre base de données de production.</span><span class="sxs-lookup"><span data-stu-id="3fba0-252">As you did in the test environment, you want to verify that database updates work in the production environment, but you typically do not want to enter test data into your production database.</span></span> <span data-ttu-id="3fba0-253">Pour ce didacticiel, vous allez utiliser la même méthode que dans le test.</span><span class="sxs-lookup"><span data-stu-id="3fba0-253">For this tutorial, you'll use the same method you did in test.</span></span> <span data-ttu-id="3fba0-254">Toutefois, dans une application réelle, vous souhaiterez peut-être trouver une méthode qui valide la réussite des mises à jour de la base de données sans introduire de données de test dans la base de données de production.</span><span class="sxs-lookup"><span data-stu-id="3fba0-254">But in a real application you might want to find a method that validates that database updates are successful without introducing test data into the production database.</span></span> <span data-ttu-id="3fba0-255">Dans certaines applications, il peut être pratique d’ajouter quelque sorte, puis de le supprimer.</span><span class="sxs-lookup"><span data-stu-id="3fba0-255">In some applications, it might be practical to add something and then delete it.</span></span>

<span data-ttu-id="3fba0-256">Ajoutez un étudiant, puis affichez les données que vous avez entrées dans la page des **étudiants** pour vérifier que vous pouvez mettre à jour les données dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="3fba0-256">Add a student and then view the data you entered in the **Students** page to verify that you can update data in the database.</span></span>

<span data-ttu-id="3fba0-257">[![Add_Students_page_Prod](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image47.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image46.png)</span><span class="sxs-lookup"><span data-stu-id="3fba0-257">[![Add_Students_page_Prod](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image47.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image46.png)</span></span>

<span data-ttu-id="3fba0-258">[![Students_page_with_new_student_Prod](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image49.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image48.png)</span><span class="sxs-lookup"><span data-stu-id="3fba0-258">[![Students_page_with_new_student_Prod](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image49.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image48.png)</span></span>

<span data-ttu-id="3fba0-259">Vérifiez que les règles d’autorisation fonctionnent correctement en sélectionnant **mettre à jour les crédits** dans le menu **cours** .</span><span class="sxs-lookup"><span data-stu-id="3fba0-259">Validate that authorization rules are working correctly by selecting **Update Credits** from the **Courses** menu.</span></span> <span data-ttu-id="3fba0-260">La page **de connexion** s’affiche.</span><span class="sxs-lookup"><span data-stu-id="3fba0-260">The **Log In** page is displayed.</span></span> <span data-ttu-id="3fba0-261">Entrez les informations d’identification de votre compte d’administrateur, cliquez sur **se connecter pour**afficher la page **mettre à jour les crédits** .</span><span class="sxs-lookup"><span data-stu-id="3fba0-261">Enter your administrator account credentials, click **Log In**, and the **Update Credits** page is displayed.</span></span>

<span data-ttu-id="3fba0-262">[![Log_In_page_Prod](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image51.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image50.png)</span><span class="sxs-lookup"><span data-stu-id="3fba0-262">[![Log_In_page_Prod](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image51.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image50.png)</span></span>

<span data-ttu-id="3fba0-263">Si la connexion est établie, la page **mettre à jour les crédits** s’affiche.</span><span class="sxs-lookup"><span data-stu-id="3fba0-263">If login is successful, the **Update Credits** page is displayed.</span></span> <span data-ttu-id="3fba0-264">Cela indique que la base de données d’appartenance ASP.NET (avec le compte d’administrateur unique) a été déployée avec succès.</span><span class="sxs-lookup"><span data-stu-id="3fba0-264">This indicates that the ASP.NET membership database (with the single administrator account) was successfully deployed.</span></span>

<span data-ttu-id="3fba0-265">[![Update_Credits_page_Prod](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image53.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image52.png)</span><span class="sxs-lookup"><span data-stu-id="3fba0-265">[![Update_Credits_page_Prod](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image53.png)](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/_static/image52.png)</span></span>

<span data-ttu-id="3fba0-266">Vous avez maintenant déployé et testé votre site avec succès et il est disponible publiquement sur Internet.</span><span class="sxs-lookup"><span data-stu-id="3fba0-266">You have now successfully deployed and tested your site and it is available publicly over the Internet.</span></span>

## <a name="creating-a-more-reliable-test-environment"></a><span data-ttu-id="3fba0-267">Création d’un environnement de test plus fiable</span><span class="sxs-lookup"><span data-stu-id="3fba0-267">Creating a More Reliable Test Environment</span></span>

<span data-ttu-id="3fba0-268">Comme expliqué dans le didacticiel [sur le déploiement dans l’environnement de test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12.md) , l’environnement de test le plus fiable serait un deuxième compte au niveau du fournisseur d’hébergement, comme le compte de production.</span><span class="sxs-lookup"><span data-stu-id="3fba0-268">As explained in the [Deploying to the Test Environment](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12.md) tutorial, the most reliable test environment would be a second account at the hosting provider that's just like the production account.</span></span> <span data-ttu-id="3fba0-269">Cela serait plus onéreux que d’utiliser IIS local comme environnement de test, car vous devrez vous inscrire pour un deuxième compte d’hébergement.</span><span class="sxs-lookup"><span data-stu-id="3fba0-269">This would be more expensive than using local IIS as your test environment, since you would have to sign up for a second hosting account.</span></span> <span data-ttu-id="3fba0-270">Mais s’il empêche les erreurs ou pannes de site de production, vous pouvez décider qu’il est intéressant de le coûter.</span><span class="sxs-lookup"><span data-stu-id="3fba0-270">But if it prevents production site errors or outages, you might decide that it's worth the cost.</span></span>

<span data-ttu-id="3fba0-271">La majeure partie du processus de création et de déploiement sur un compte de test est similaire à ce que vous avez déjà fait pour effectuer un déploiement en production :</span><span class="sxs-lookup"><span data-stu-id="3fba0-271">Most of the process for creating and deploying to a test account is similar to what you've already done to deploy to production:</span></span>

- <span data-ttu-id="3fba0-272">Créez un fichier de transformation *Web. config* .</span><span class="sxs-lookup"><span data-stu-id="3fba0-272">Create a *Web.config* transformation file.</span></span>
- <span data-ttu-id="3fba0-273">Créez un compte au niveau du fournisseur d’hébergement.</span><span class="sxs-lookup"><span data-stu-id="3fba0-273">Create an account at the hosting provider.</span></span>
- <span data-ttu-id="3fba0-274">Créez un profil de publication et déployez-le sur le compte test.</span><span class="sxs-lookup"><span data-stu-id="3fba0-274">Create a new publish profile and deploy to the test account.</span></span>

### <a name="preventing-public-access-to-the-test-site"></a><span data-ttu-id="3fba0-275">Empêcher l’accès public au site de test</span><span class="sxs-lookup"><span data-stu-id="3fba0-275">Preventing Public Access to the Test Site</span></span>

<span data-ttu-id="3fba0-276">Un point important à prendre en compte pour le compte de test est qu’il est en ligne sur Internet, mais que vous ne voulez pas que le public l’utilise.</span><span class="sxs-lookup"><span data-stu-id="3fba0-276">An important consideration for the test account is that it will be live on the Internet, but you don't want the public to use it.</span></span> <span data-ttu-id="3fba0-277">Pour conserver le site privé, vous pouvez utiliser une ou plusieurs des méthodes suivantes :</span><span class="sxs-lookup"><span data-stu-id="3fba0-277">To keep the site private you can use one or more of the following methods:</span></span>

- <span data-ttu-id="3fba0-278">Contactez le fournisseur d’hébergement pour définir des règles de pare-feu qui autorisent l’accès au site de test uniquement à partir des adresses IP que vous utilisez pour le test.</span><span class="sxs-lookup"><span data-stu-id="3fba0-278">Contact the hosting provider to set firewall rules that allow access to the testing site only from IP addresses that you use for testing.</span></span>
- <span data-ttu-id="3fba0-279">Déguisez l’URL de façon à ce qu’elle ne soit pas similaire à l’URL du site public.</span><span class="sxs-lookup"><span data-stu-id="3fba0-279">Disguise the URL so that it is not similar to the public site's URL.</span></span>
- <span data-ttu-id="3fba0-280">Utilisez un fichier *robots. txt* pour vous assurer que les moteurs de recherche n’analyseront pas le site de test et les liens de rapport vers ce dernier dans les résultats de la recherche.</span><span class="sxs-lookup"><span data-stu-id="3fba0-280">Use a *robots.txt* file to ensure that search engines will not crawl the test site and report links to it in search results.</span></span>

<span data-ttu-id="3fba0-281">La première de ces méthodes est évidemment la plus sécurisée, mais la procédure pour qui est spécifique à chaque fournisseur d’hébergement et n’est pas traitée dans ce didacticiel.</span><span class="sxs-lookup"><span data-stu-id="3fba0-281">The first of these methods is obviously the most secure, but the procedure for that is specific to each hosting provider and will not be covered in this tutorial.</span></span> <span data-ttu-id="3fba0-282">Si vous utilisez votre fournisseur d’hébergement pour n’autoriser que votre adresse IP à accéder à l’URL du compte de test, vous n’avez en théorie pas à vous soucier des moteurs de recherche qui l’analysent.</span><span class="sxs-lookup"><span data-stu-id="3fba0-282">If you do arrange with your hosting provider to allow only your IP address to browse to the test account URL, you theoretically don't have to worry about search engines crawling it.</span></span> <span data-ttu-id="3fba0-283">Mais même dans ce cas, le déploiement d’un fichier *robots. txt* est une bonne idée comme une sauvegarde au cas où la règle de pare-feu serait jamais accidentellement désactivée.</span><span class="sxs-lookup"><span data-stu-id="3fba0-283">But even in that case, deploying a *robots.txt* file is a good idea as a backup in case that firewall rule is ever accidentally turned off.</span></span>

<span data-ttu-id="3fba0-284">Le fichier *robots. txt* est placé dans votre dossier de projet et doit contenir le texte suivant :</span><span class="sxs-lookup"><span data-stu-id="3fba0-284">The *robots.txt* file goes in your project folder and should have the following text in it:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12/samples/sample1.cmd)]

<span data-ttu-id="3fba0-285">La ligne `User-agent` indique aux moteurs de recherche que les règles du fichier s’appliquent à tous les robots d’indexation (robots) du moteur de recherche et que la ligne `Disallow` spécifie qu’aucune page du site ne doit être analysée.</span><span class="sxs-lookup"><span data-stu-id="3fba0-285">The `User-agent` line tells search engines that the rules in the file apply to all search engine web crawlers (robots), and the `Disallow` line specifies that no pages on the site should be crawled.</span></span>

<span data-ttu-id="3fba0-286">Vous souhaitez probablement que les moteurs de recherche cataloguent votre site de production. vous devez donc exclure ce fichier du déploiement de production.</span><span class="sxs-lookup"><span data-stu-id="3fba0-286">You probably do want search engines to catalog your production site, so you need to exclude this file from production deployment.</span></span> <span data-ttu-id="3fba0-287">Pour ce faire, consultez Comment **puis-je exclure des fichiers ou des dossiers spécifiques du déploiement ?** dans le [Forum aux questions sur le déploiement de projets d’application Web ASP.net](https://msdn.microsoft.com/library/ee942158.aspx#can_i_exclude_specific_files_or_folders_from_deployment).</span><span class="sxs-lookup"><span data-stu-id="3fba0-287">To do that, see **Can I exclude specific files or folders from deployment?** in [ASP.NET Web Application Project Deployment FAQ](https://msdn.microsoft.com/library/ee942158.aspx#can_i_exclude_specific_files_or_folders_from_deployment).</span></span> <span data-ttu-id="3fba0-288">Veillez à spécifier l’exclusion uniquement pour le profil de publication de production.</span><span class="sxs-lookup"><span data-stu-id="3fba0-288">Make sure that you specify the exclusion only for the Production publish profile.</span></span>

<span data-ttu-id="3fba0-289">La création d’un deuxième compte d’hébergement est une approche de l’utilisation d’un environnement de test qui n’est pas obligatoire, mais peut être utile pour les dépenses ajoutées.</span><span class="sxs-lookup"><span data-stu-id="3fba0-289">Creating a second hosting account is an approach to working with a test environment that is not required but might be worth the added expense.</span></span> <span data-ttu-id="3fba0-290">Dans les didacticiels suivants, vous allez continuer à utiliser IIS comme environnement de test.</span><span class="sxs-lookup"><span data-stu-id="3fba0-290">In the following tutorials, you'll continue to use IIS as your test environment.</span></span>

<span data-ttu-id="3fba0-291">Dans le didacticiel suivant, vous allez mettre à jour le code de l’application et déployer vos modifications dans les environnements de test et de production.</span><span class="sxs-lookup"><span data-stu-id="3fba0-291">In the next tutorial, you'll update application code and deploy your change to the test and production environments.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="3fba0-292">[Précédent](deployment-to-a-hosting-provider-setting-folder-permissions-6-of-12.md)
> [Suivant](deployment-to-a-hosting-provider-deploying-a-code-only-update-8-of-12.md)</span><span class="sxs-lookup"><span data-stu-id="3fba0-292">[Previous](deployment-to-a-hosting-provider-setting-folder-permissions-6-of-12.md)
[Next](deployment-to-a-hosting-provider-deploying-a-code-only-update-8-of-12.md)</span></span>

---
uid: web-forms/overview/older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12
title: 'Déploiement d’une Application de Web ASP.NET avec SQL Server Compact à l’aide de Visual Studio ou Visual Web Developer : Migration vers SQL Server - 10 12 | Microsoft Docs'
author: tdykstra
description: Cette série de didacticiels vous montre comment déployer une ASP.NET (publier) projet d’application web qui inclut une base de données SQL Server Compact à l’aide de Visual Stu...
ms.author: riande
ms.date: 11/17/2011
ms.assetid: a89d6f32-b71b-4036-8ff7-5f8ac2a6eca8
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12
msc.type: authoredcontent
ms.openlocfilehash: 98e521f348cdf1c2bd563f96badbaea6b23f4bcf
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/17/2019
ms.locfileid: "59398954"
---
# <a name="deploying-an-aspnet-web-application-with-sql-server-compact-using-visual-studio-or-visual-web-developer-migrating-to-sql-server---10-of-12"></a><span data-ttu-id="c120b-103">Déploiement d’une Application de Web ASP.NET avec SQL Server Compact à l’aide de Visual Studio ou Visual Web Developer : Migration vers SQL Server - 10 12</span><span class="sxs-lookup"><span data-stu-id="c120b-103">Deploying an ASP.NET Web Application with SQL Server Compact using Visual Studio or Visual Web Developer: Migrating to SQL Server - 10 of 12</span></span>

<span data-ttu-id="c120b-104">par [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="c120b-104">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

[<span data-ttu-id="c120b-105">Télécharger le projet de démarrage</span><span class="sxs-lookup"><span data-stu-id="c120b-105">Download Starter Project</span></span>](http://code.msdn.microsoft.com/Deploying-an-ASPNET-Web-4e31366b)

> <span data-ttu-id="c120b-106">Cette série de didacticiels vous montre comment déployer une ASP.NET (publier) projet d’application web qui inclut une base de données SQL Server Compact à l’aide de Visual Studio 2012 RC ou Visual Studio Express 2012 RC pour le Web.</span><span class="sxs-lookup"><span data-stu-id="c120b-106">This series of tutorials shows you how to deploy (publish) an ASP.NET web application project that includes a SQL Server Compact database by using Visual Studio 2012 RC or Visual Studio Express 2012 RC for Web.</span></span> <span data-ttu-id="c120b-107">Vous pouvez également utiliser Visual Studio 2010 si vous installez la mise à jour de publication Web.</span><span class="sxs-lookup"><span data-stu-id="c120b-107">You can also use Visual Studio 2010 if you install the Web Publish Update.</span></span> <span data-ttu-id="c120b-108">Pour une introduction à la série, consultez [le premier didacticiel de la série](deployment-to-a-hosting-provider-introduction-1-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="c120b-108">For an introduction to the series, see [the first tutorial in the series](deployment-to-a-hosting-provider-introduction-1-of-12.md).</span></span>
> 
> <span data-ttu-id="c120b-109">Pour obtenir un didacticiel qui montre les fonctionnalités de déploiement introduites après la version RC de Visual Studio 2012, montre comment déployer des éditions de SQL Server autre que SQL Server Compact et montre comment déployer dans Azure App Service Web Apps, consultez [déploiement Web ASP.NET à l’aide de Visual Studio](../../deployment/visual-studio-web-deployment/introduction.md).</span><span class="sxs-lookup"><span data-stu-id="c120b-109">For a tutorial that shows deployment features introduced after the RC release of Visual Studio 2012, shows how to deploy SQL Server editions other than SQL Server Compact, and shows how to deploy to Azure App Service Web Apps, see [ASP.NET Web Deployment using Visual Studio](../../deployment/visual-studio-web-deployment/introduction.md).</span></span>


## <a name="overview"></a><span data-ttu-id="c120b-110">Vue d'ensemble</span><span class="sxs-lookup"><span data-stu-id="c120b-110">Overview</span></span>

<span data-ttu-id="c120b-111">Ce didacticiel vous montre comment migrer à partir de SQL Server Compact vers SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c120b-111">This tutorial shows you how to migrate from SQL Server Compact to SQL Server.</span></span> <span data-ttu-id="c120b-112">L’une des raisons que vous souhaiterez peut-être le faire consiste à tirer parti des fonctionnalités de SQL Server SQL Server Compact ne prend pas en charge, tels que des procédures stockées, des déclencheurs, des vues ou réplication.</span><span class="sxs-lookup"><span data-stu-id="c120b-112">One reason you might want to do that is to take advantage of SQL Server features that SQL Server Compact does not support, such as stored procedures, triggers, views, or replication.</span></span> <span data-ttu-id="c120b-113">Pour plus d’informations sur les différences entre SQL Server Compact et SQL Server, consultez le [déploiement SQL Server Compact](deployment-to-a-hosting-provider-deploying-sql-server-compact-databases-2-of-12.md) didacticiel.</span><span class="sxs-lookup"><span data-stu-id="c120b-113">For more information about the differences between SQL Server Compact and SQL Server, see the [Deploying SQL Server Compact](deployment-to-a-hosting-provider-deploying-sql-server-compact-databases-2-of-12.md) tutorial.</span></span>

### <a name="sql-server-express-versus-full-sql-server-for-development"></a><span data-ttu-id="c120b-114">SQL Server Express et complète de SQL Server pour le développement</span><span class="sxs-lookup"><span data-stu-id="c120b-114">SQL Server Express versus full SQL Server for Development</span></span>

<span data-ttu-id="c120b-115">Une fois que vous avez décidé de mettre à niveau vers SQL Server, vous souhaiterez probablement utiliser SQL Server ou SQL Server Express dans vos environnements de développement et de test.</span><span class="sxs-lookup"><span data-stu-id="c120b-115">Once you've decided to upgrade to SQL Server, you might want to use SQL Server or SQL Server Express in your development and test environments.</span></span> <span data-ttu-id="c120b-116">Outre les différences de prise en charge de l’outil et les fonctionnalités du moteur de base de données, il existe de différences dans les implémentations de fournisseur SQL Server Compact et d’autres versions de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c120b-116">In addition to the differences in tool support and in database engine features, there are differences in provider implementations between SQL Server Compact and other versions of SQL Server.</span></span> <span data-ttu-id="c120b-117">Ces différences peuvent occasionner le même code générer des résultats différents.</span><span class="sxs-lookup"><span data-stu-id="c120b-117">These differences can cause the same code to generate different results.</span></span> <span data-ttu-id="c120b-118">Par conséquent, si vous décidez de conserver SQL Server Compact comme votre base de données de développement, vous devez tester votre site dans SQL Server ou SQL Server Express dans un environnement de test avant chaque déploiement en production.</span><span class="sxs-lookup"><span data-stu-id="c120b-118">Therefore, if you decide to keep SQL Server Compact as your development database, you should thoroughly test your site in SQL Server or SQL Server Express in a test environment before each deployment to production.</span></span>

<span data-ttu-id="c120b-119">Contrairement à SQL Server Compact, SQL Server Express est essentiellement le même moteur de base de données et utilise le même fournisseur .NET comme complète de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c120b-119">Unlike SQL Server Compact, SQL Server Express is essentially the same database engine and uses the same .NET provider as full SQL Server.</span></span> <span data-ttu-id="c120b-120">Lorsque vous testez avec SQL Server Express, vous pouvez être certain d’obtenir les mêmes résultats que vous allez avec SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c120b-120">When you test with SQL Server Express, you can be confident of getting the same results as you will with SQL Server.</span></span> <span data-ttu-id="c120b-121">Vous pouvez utiliser la plupart des mêmes outils de base de données avec SQL Server Express que vous pouvez utiliser avec SQL Server (une exception notable étant [SQL Server Profiler](https://msdn.microsoft.com/library/ms181091.aspx)), et il prend en charge d’autres fonctionnalités de SQL Server telles que les procédures stockées, vues, déclencheurs, et la réplication.</span><span class="sxs-lookup"><span data-stu-id="c120b-121">You can use most of the same database tools with SQL Server Express that you can use with SQL Server (a notable exception being [SQL Server Profiler](https://msdn.microsoft.com/library/ms181091.aspx)), and it supports other features of SQL Server like stored procedures, views, triggers, and replication.</span></span> <span data-ttu-id="c120b-122">(Vous avez généralement à utiliser complète de SQL Server dans un site Web de production, toutefois.</span><span class="sxs-lookup"><span data-stu-id="c120b-122">(You typically have to use full SQL Server in a production website, however.</span></span> <span data-ttu-id="c120b-123">SQL Server Express peut s’exécuter dans un environnement d’hébergement partagé, mais il n’a pas été conçu pour ce faire, et de nombreux fournisseurs d’hébergement ne le prennent pas en charge.)</span><span class="sxs-lookup"><span data-stu-id="c120b-123">SQL Server Express can run in a shared hosting environment, but it was not designed for that, and many hosting providers do not support it.)</span></span>

<span data-ttu-id="c120b-124">Si vous utilisez Visual Studio 2012, vous choisissez généralement SQL Server Express LocalDB pour votre environnement de développement, car c’est ce qui est installé par défaut avec Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="c120b-124">If you are using Visual Studio 2012, you typically choose SQL Server Express LocalDB for your development environment because that is what is installed by default with Visual Studio.</span></span> <span data-ttu-id="c120b-125">Toutefois, base de données locale ne fonctionne pas dans IIS, pour votre environnement de test, vous devez utiliser SQL Server ou SQL Server Express.</span><span class="sxs-lookup"><span data-stu-id="c120b-125">However, LocalDB does not work in IIS, so for your test environment you have to use either SQL Server or SQL Server Express.</span></span>

### <a name="combining-databases-versus-keeping-them-separate"></a><span data-ttu-id="c120b-126">Combinaison de bases de données par rapport à leur permettant de rester distinct</span><span class="sxs-lookup"><span data-stu-id="c120b-126">Combining Databases versus Keeping Them Separate</span></span>

<span data-ttu-id="c120b-127">L’application Contoso University a deux bases de données SQL Server Compact : la base de données d’appartenance (*aspnet.sdf*) et la base de données d’application (*School.sdf*).</span><span class="sxs-lookup"><span data-stu-id="c120b-127">The Contoso University application has two SQL Server Compact databases: the membership database (*aspnet.sdf*) and the application database (*School.sdf*).</span></span> <span data-ttu-id="c120b-128">Lorsque vous migrez, vous pouvez migrer ces bases de données pour les deux bases de données distinctes ou à une base de données.</span><span class="sxs-lookup"><span data-stu-id="c120b-128">When you migrate, you can migrate these databases to two separate databases or to a single database.</span></span> <span data-ttu-id="c120b-129">Vous souhaiterez peut-être les combiner afin de faciliter les jointures de bases de données entre votre base de données d’application et votre base de données d’appartenance.</span><span class="sxs-lookup"><span data-stu-id="c120b-129">You might want to combine them in order to facilitate database joins between your application database and your membership database.</span></span> <span data-ttu-id="c120b-130">Votre plan d’hébergement peut également fournir une raison de les combiner.</span><span class="sxs-lookup"><span data-stu-id="c120b-130">Your hosting plan might also provide a reason to combine them.</span></span> <span data-ttu-id="c120b-131">Par exemple, le fournisseur d’hébergement peut facturent plus pour plusieurs bases de données ou ne peut pas même permettre plusieurs bases de données.</span><span class="sxs-lookup"><span data-stu-id="c120b-131">For example, the hosting provider might charge more for multiple databases or might not even allow more than one database.</span></span> <span data-ttu-id="c120b-132">Qui est le cas avec Cytanium Lite qui héberge le compte qui est utilisé pour ce didacticiel, ce qui permet uniquement une base de données SQL Server unique.</span><span class="sxs-lookup"><span data-stu-id="c120b-132">That's the case with the Cytanium Lite hosting account that's used for this tutorial, which allows only a single SQL Server database.</span></span>

<span data-ttu-id="c120b-133">Dans ce didacticiel, vous pouvez migrer vos deux bases de données de cette façon :</span><span class="sxs-lookup"><span data-stu-id="c120b-133">In this tutorial, you'll migrate your two databases this way:</span></span>

- <span data-ttu-id="c120b-134">Migrer vers les deux bases de données de base de données locale dans l’environnement de développement.</span><span class="sxs-lookup"><span data-stu-id="c120b-134">Migrate to two LocalDB databases in the development environment.</span></span>
- <span data-ttu-id="c120b-135">Migrer vers les deux bases de données SQL Server Express dans l’environnement de test.</span><span class="sxs-lookup"><span data-stu-id="c120b-135">Migrate to two SQL Server Express databases in the test environment.</span></span>
- <span data-ttu-id="c120b-136">Migrer vers une base de SQL Server complète combinée dans l’environnement de production.</span><span class="sxs-lookup"><span data-stu-id="c120b-136">Migrate to one combined full SQL Server database in the production environment.</span></span>

<span data-ttu-id="c120b-137">Rappel : Si vous obtenez un message d’erreur ou quelque chose ne fonctionne pas lorsque vous parcourez le didacticiel, veillez à consulter le [page Résolution des problèmes](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="c120b-137">Reminder: If you get an error message or something doesn't work as you go through the tutorial, be sure to check the [troubleshooting page](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12.md).</span></span>

## <a name="installing-sql-server-express"></a><span data-ttu-id="c120b-138">L’installation de SQL Server Express</span><span class="sxs-lookup"><span data-stu-id="c120b-138">Installing SQL Server Express</span></span>

<span data-ttu-id="c120b-139">SQL Server Express est installé automatiquement par défaut avec Visual Studio 2010, mais par défaut avec Visual Studio 2012 n’est pas installé.</span><span class="sxs-lookup"><span data-stu-id="c120b-139">SQL Server Express is automatically installed by default with Visual Studio 2010, but by default it is not installed with Visual Studio 2012.</span></span> <span data-ttu-id="c120b-140">Pour installer SQL Server 2012 Express, cliquez sur le lien suivant</span><span class="sxs-lookup"><span data-stu-id="c120b-140">To install SQL Server 2012 Express, click the following link</span></span>

- [<span data-ttu-id="c120b-141">SQL Server Express 2012</span><span class="sxs-lookup"><span data-stu-id="c120b-141">SQL Server Express 2012</span></span>](https://www.microsoft.com/download/details.aspx?id=29062)

<span data-ttu-id="c120b-142">Choisissez *fra/x64/SQLEXPR\_x64\_ENU.exe* ou *fra/x86/SQLEXPR\_x86\_ENU.exe*et dans l’Assistant installation, acceptez la valeur par défaut Paramètres.</span><span class="sxs-lookup"><span data-stu-id="c120b-142">Choose *ENU/x64/SQLEXPR\_x64\_ENU.exe* or *ENU/x86/SQLEXPR\_x86\_ENU.exe*, and in the installation wizard accept the default settings.</span></span> <span data-ttu-id="c120b-143">Pour plus d’informations sur les options d’installation, consultez [installer SQL Server 2012 à partir de l’Assistant Installation (Setup)](https://msdn.microsoft.com/library/ms143219.aspx).</span><span class="sxs-lookup"><span data-stu-id="c120b-143">For more information about installation options, see [Install SQL Server 2012 from the Installation Wizard (Setup)](https://msdn.microsoft.com/library/ms143219.aspx).</span></span>

## <a name="creating-sql-server-express-databases-for-the-test-environment"></a><span data-ttu-id="c120b-144">Création de bases de données SQL Server Express pour l’environnement de Test</span><span class="sxs-lookup"><span data-stu-id="c120b-144">Creating SQL Server Express Databases for the Test Environment</span></span>

<span data-ttu-id="c120b-145">L’étape suivante consiste à créer l’appartenance d’ASP.NET et les bases de données School.</span><span class="sxs-lookup"><span data-stu-id="c120b-145">The next step is to create the ASP.NET membership and School databases.</span></span>

<span data-ttu-id="c120b-146">À partir de la **vue** menu, sélectionnez **Explorateur de serveurs** (**l’Explorateur de base de données** dans Visual Web Developer) et avec le bouton droit puis **desconnexionsdedonnées**et sélectionnez **créer une nouvelle base de données SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="c120b-146">From the **View** menu select **Server Explorer** (**Database Explorer** in Visual Web Developer), and then right-click **Data Connections** and select **Create New SQL Server Database**.</span></span>

![Selecting_Create_New_SQL_Server_Database](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image1.png)

<span data-ttu-id="c120b-148">Dans le **créer une nouvelle base de données SQL Server** boîte de dialogue, entrez «. \SQLExpress » dans le **nom du serveur** zone et « aspnet-Test » dans le **nouveau nom de base de données** zone, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="c120b-148">In the **Create New SQL Server Database** dialog box, enter ".\SQLExpress" in the **Server name** box and "aspnet-Test" in the **New database name** box, then click **OK**.</span></span>

![Create_New_SQL_Server_Database_aspnet](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image2.png)

<span data-ttu-id="c120b-150">Suivez la même procédure pour créer une nouvelle base de données School de SQL Server Express nommée « School-Test ».</span><span class="sxs-lookup"><span data-stu-id="c120b-150">Follow the same procedure to create a new SQL Server Express School database named "School-Test".</span></span>

<span data-ttu-id="c120b-151">(Vous ajoutez « Test » dans ces noms de base de données, car vous allez créer ultérieurement une instance supplémentaire de chaque base de données pour l’environnement de développement, et vous devez être en mesure de différencier les deux ensembles de bases de données.)</span><span class="sxs-lookup"><span data-stu-id="c120b-151">(You're appending "Test" to these database names because later you'll create an additional instance of each database for the development environment, and you need to be able to differentiate the two sets of databases.)</span></span>

<span data-ttu-id="c120b-152">**Explorateur de serveurs** affiche maintenant les deux nouvelles bases de données.</span><span class="sxs-lookup"><span data-stu-id="c120b-152">**Server Explorer** now shows the two new databases.</span></span>

![New_databases_in_Server_Explorer](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image3.png)

## <a name="creating-a-grant-script-for-the-new-databases"></a><span data-ttu-id="c120b-154">Création d’un Script d’octroi de nouvelles bases de données</span><span class="sxs-lookup"><span data-stu-id="c120b-154">Creating a Grant Script for the New Databases</span></span>

<span data-ttu-id="c120b-155">Lorsque l’application s’exécute dans IIS sur votre ordinateur de développement, l’application accède à la base de données à l’aide des informations d’identification du pool d’applications par défaut.</span><span class="sxs-lookup"><span data-stu-id="c120b-155">When the application runs in IIS on your development computer, the application accesses the database by using the default application pool's credentials.</span></span> <span data-ttu-id="c120b-156">Toutefois, par défaut, l’identité du pool d’application n’a pas d’autorisation pour ouvrir les bases de données.</span><span class="sxs-lookup"><span data-stu-id="c120b-156">However, by default, the application pool identity does not have permission to open the databases.</span></span> <span data-ttu-id="c120b-157">Par conséquent, vous devez exécuter un script pour accorder cette autorisation.</span><span class="sxs-lookup"><span data-stu-id="c120b-157">So you have to run a script to grant that permission.</span></span> <span data-ttu-id="c120b-158">Dans cette section, vous créez le script que vous allez exécuter par la suite pour vous assurer que l’application peut ouvrir les bases de données lorsqu’elle s’exécute dans IIS.</span><span class="sxs-lookup"><span data-stu-id="c120b-158">In this section you create the script that you'll run later to make sure that the application can open the databases when it runs in IIS.</span></span>

<span data-ttu-id="c120b-159">Dans la solution *SolutionFiles* dossier que vous avez créé dans le [déploiement dans l’environnement de Production](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) didacticiel, créez un fichier SQL nommé *Grant.sql*.</span><span class="sxs-lookup"><span data-stu-id="c120b-159">In the solution's *SolutionFiles* folder that you created in the [Deploying to the Production Environment](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) tutorial, create a new SQL file named *Grant.sql*.</span></span> <span data-ttu-id="c120b-160">Copiez les commandes SQL suivantes dans le fichier, puis enregistrez et fermez le fichier :</span><span class="sxs-lookup"><span data-stu-id="c120b-160">Copy the following SQL commands into the file, and then save and close the file:</span></span>

[!code-sql[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample1.sql)]

> [!NOTE]
> <span data-ttu-id="c120b-161">Ce script est conçu pour fonctionner avec SQL Server 2008 et les paramètres IIS dans Windows 7 comme ils sont spécifiés dans ce didacticiel.</span><span class="sxs-lookup"><span data-stu-id="c120b-161">This script is designed to work with SQL Server 2008 and with the IIS settings in Windows 7 as they are specified in this tutorial.</span></span> <span data-ttu-id="c120b-162">Si vous utilisez une version différente de SQL Server ou de Windows, ou si vous configurez IIS sur votre ordinateur différemment, les modifications apportées à ce script peuvent être nécessaire.</span><span class="sxs-lookup"><span data-stu-id="c120b-162">If you're using a different version of SQL Server or of Windows, or if you set up IIS on your computer differently, changes to this script might be required.</span></span> <span data-ttu-id="c120b-163">Pour plus d’informations sur les scripts SQL Server, consultez [la documentation en ligne de SQL Server](https://go.microsoft.com/fwlink/?LinkId=132511).</span><span class="sxs-lookup"><span data-stu-id="c120b-163">For more information about SQL Server scripts, see [SQL Server Books Online](https://go.microsoft.com/fwlink/?LinkId=132511).</span></span>


> [!NOTE] 
> 
> <span data-ttu-id="c120b-164">**Note de sécurité** ce script donne db\_autorisations de propriétaire sur l’utilisateur qui accède à la base de données au moment de l’exécution, ce qui est ce que vous aurez dans l’environnement de production.</span><span class="sxs-lookup"><span data-stu-id="c120b-164">**Security Note** This script gives db\_owner permissions to the user that accesses the database at run time, which is what you'll have in the production environment.</span></span> <span data-ttu-id="c120b-165">Dans certains scénarios, vous souhaiterez spécifier un utilisateur qui a le schéma de base de données complète mettre à jour des autorisations uniquement pour le déploiement, et spécifier pour le moment de l’exécution d’un autre utilisateur qui dispose des autorisations uniquement pour lire et écrire des données.</span><span class="sxs-lookup"><span data-stu-id="c120b-165">In some scenarios you might want to specify a user that has full database schema update permissions only for deployment, and specify for run time a different user that has permissions only to read and write data.</span></span> <span data-ttu-id="c120b-166">Pour plus d’informations, consultez **vérifié les modifications de Web.config automatique pour les Migrations Code First** dans [déploiement vers IIS comme environnement de Test](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="c120b-166">For more information, see **Reviewing the Automatic Web.config Changes for Code First Migrations** in [Deploying to IIS as a Test Environment](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12.md).</span></span>


## <a name="configuring-database-deployment-for-the-test-environment"></a><span data-ttu-id="c120b-167">Configuration du déploiement de base de données pour l’environnement de Test</span><span class="sxs-lookup"><span data-stu-id="c120b-167">Configuring Database Deployment for the Test Environment</span></span>

<span data-ttu-id="c120b-168">Ensuite, vous devez configurer Visual Studio afin qu’il le fera les tâches suivantes pour chaque base de données :</span><span class="sxs-lookup"><span data-stu-id="c120b-168">Next, you'll configure Visual Studio so that it will do the following tasks for each database:</span></span>

- <span data-ttu-id="c120b-169">Générer un script SQL qui crée la structure de la base de données source (tables, colonnes, contraintes, etc.) dans la base de données de destination.</span><span class="sxs-lookup"><span data-stu-id="c120b-169">Generate a SQL script that creates the source database's structure (tables, columns, constraints, etc.) in the destination database.</span></span>
- <span data-ttu-id="c120b-170">Générer un script SQL qui insère les données de la base de données source dans les tables dans la base de données de destination.</span><span class="sxs-lookup"><span data-stu-id="c120b-170">Generate a SQL script that inserts the source database's data into the tables in the destination database.</span></span>
- <span data-ttu-id="c120b-171">Exécuter les scripts générés et le script d’octroi que vous avez créé, dans la base de données de destination.</span><span class="sxs-lookup"><span data-stu-id="c120b-171">Run the generated scripts, and the Grant script that you created, in the destination database.</span></span>

<span data-ttu-id="c120b-172">Ouvrez le **propriétés du projet** fenêtre et sélectionnez le **Package/Publication SQL** onglet.</span><span class="sxs-lookup"><span data-stu-id="c120b-172">Open the **Project Properties** window and select the **Package/Publish SQL** tab.</span></span>

<span data-ttu-id="c120b-173">Assurez-vous que l’option **Active (Release)** ou **version** est sélectionné dans le **Configuration** liste déroulante.</span><span class="sxs-lookup"><span data-stu-id="c120b-173">Make sure that **Active (Release)** or **Release** is selected in the **Configuration** drop-down list.</span></span>

<span data-ttu-id="c120b-174">Cliquez sur **activer cette Page**.</span><span class="sxs-lookup"><span data-stu-id="c120b-174">Click **Enable this Page**.</span></span>

![Package_Publish_SQL_tab_Enable_This_page](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image4.png)

<span data-ttu-id="c120b-176">Le **Package/Publication SQL** onglet est normalement désactivée, car elle spécifie une méthode de déploiement hérité.</span><span class="sxs-lookup"><span data-stu-id="c120b-176">The **Package/Publish SQL** tab is normally disabled because it specifies a legacy deployment method.</span></span> <span data-ttu-id="c120b-177">La plupart des scénarios, vous devez configurer le déploiement de base de données dans le **publier le site Web** Assistant.</span><span class="sxs-lookup"><span data-stu-id="c120b-177">For most scenarios, you should configure database deployment in the **Publish Web** wizard.</span></span> <span data-ttu-id="c120b-178">Migration de SQL Server Compact vers SQL Server ou SQL Server Express est un cas spécial pour lequel cette méthode est un bon choix.</span><span class="sxs-lookup"><span data-stu-id="c120b-178">Migrating from SQL Server Compact to SQL Server or SQL Server Express is a special case for which this method is a good choice.</span></span>

<span data-ttu-id="c120b-179">Cliquez sur **importation à partir de Web.config**.</span><span class="sxs-lookup"><span data-stu-id="c120b-179">Click **Import from Web.config**.</span></span>

![Selecting_Import_from_Web.config](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image5.png)

<span data-ttu-id="c120b-181">Visual Studio recherche des chaînes de connexion dans le *Web.config* fichier, recherche un pour la base de données d’appartenance et un pour la base de données School et ajoute une ligne correspondant à chaque chaîne de connexion dans le **les entrées de base de données**  table.</span><span class="sxs-lookup"><span data-stu-id="c120b-181">Visual Studio looks for connection strings in the *Web.config* file, finds one for the membership database and one for the School database, and adds a row corresponding to each connection string in the **Database Entries** table.</span></span> <span data-ttu-id="c120b-182">Il recherche les chaînes de connexion sont pour les bases de données SQL Server Compact, et votre prochaine étape consistera à configurer comment et où déployer ces bases de données.</span><span class="sxs-lookup"><span data-stu-id="c120b-182">The connection strings it finds are for the existing SQL Server Compact databases, and your next step will be to configure how and where to deploy these databases.</span></span>

<span data-ttu-id="c120b-183">Vous entrez des paramètres de déploiement de base de données dans le **détails des entrées de base de données** section ci-dessous le **les entrées de base de données** table.</span><span class="sxs-lookup"><span data-stu-id="c120b-183">You enter database deployment settings in the **Database Entry Details** section below the **Database Entries** table.</span></span> <span data-ttu-id="c120b-184">Les paramètres affichés dans le **détails des entrées de base de données** section se rapportent à la retenue ligne dans le **les entrées de base de données** table est sélectionnée, comme indiqué dans l’illustration suivante.</span><span class="sxs-lookup"><span data-stu-id="c120b-184">The settings shown in the **Database Entry Details** section pertain to whichever row in the **Database Entries** table is selected, as shown in the following illustration.</span></span>

![Database_Entry_Details_section_of_Package_Publish_SQL_tab](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image6.png)

### <a name="configuring-deployment-settings-for-the-membership-database"></a><span data-ttu-id="c120b-186">Configuration des paramètres de déploiement pour la base de données d’appartenance</span><span class="sxs-lookup"><span data-stu-id="c120b-186">Configuring Deployment Settings for the Membership Database</span></span>

<span data-ttu-id="c120b-187">Sélectionnez le **DefaultConnection-déploiement** de la ligne dans le **les entrées de base de données** table afin de configurer les paramètres qui s’appliquent à la base de données d’appartenance.</span><span class="sxs-lookup"><span data-stu-id="c120b-187">Select the **DefaultConnection-Deployment** row in the **Database Entries** table in order to configure settings that apply to the membership database.</span></span>

<span data-ttu-id="c120b-188">Dans **chaîne de connexion pour la base de données de destination**, entrez une chaîne de connexion qui pointe vers la nouvelle base de l’appartenance de SQL Server Express.</span><span class="sxs-lookup"><span data-stu-id="c120b-188">In **Connection string for destination database**, enter a connection string that points to the new SQL Server Express membership database.</span></span> <span data-ttu-id="c120b-189">Vous pouvez obtenir la chaîne de connexion que vous avez besoin de **Explorateur de serveurs**.</span><span class="sxs-lookup"><span data-stu-id="c120b-189">You can get the connection string you need from **Server Explorer**.</span></span> <span data-ttu-id="c120b-190">Dans **Explorateur de serveurs**, développez **des connexions de données** et sélectionnez le **aspnetTest** base de données, puis à partir de la **propriétés** copie de la fenêtre la **Chaîne de connexion** valeur.</span><span class="sxs-lookup"><span data-stu-id="c120b-190">In **Server Explorer**, expand **Data Connections** and select the **aspnetTest** database, then from the **Properties** window copy the **Connection String** value.</span></span>

![aspnet_connection_string_in_Server_Explorer](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image7.png)

<span data-ttu-id="c120b-192">La chaîne de connexion est reproduite ici :</span><span class="sxs-lookup"><span data-stu-id="c120b-192">The same connection string is reproduced here:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample2.cmd)]

<span data-ttu-id="c120b-193">Copiez et collez cette chaîne de connexion dans **chaîne de connexion pour la base de données de destination** dans le **Package/Publication SQL** onglet.</span><span class="sxs-lookup"><span data-stu-id="c120b-193">Copy and paste this connection string into **Connection string for destination database** in the **Package/Publish SQL** tab.</span></span>

<span data-ttu-id="c120b-194">Assurez-vous que l’option **extraire les données et/ou le schéma à partir d’une base de données existante** est sélectionné.</span><span class="sxs-lookup"><span data-stu-id="c120b-194">Make sure that **Pull data and/or schema from an existing database** is selected.</span></span> <span data-ttu-id="c120b-195">C’est ce qui provoque des scripts SQL d’être automatiquement généré et exécuté dans la base de données de destination.</span><span class="sxs-lookup"><span data-stu-id="c120b-195">This is what causes SQL scripts to be automatically generated and run in the destination database.</span></span>

<span data-ttu-id="c120b-196">Le **chaîne de connexion pour la base de données source** valeur est extraite de la *Web.config* fichier et pointe vers la base de données SQL Server Compact de développement.</span><span class="sxs-lookup"><span data-stu-id="c120b-196">The **Connection string for the source database** value is extracted from the *Web.config* file and points to the development SQL Server Compact database.</span></span> <span data-ttu-id="c120b-197">Il s’agit de la base de données source qui doit être utilisé pour générer les scripts qui seront exécutera plus loin dans la base de données de destination.</span><span class="sxs-lookup"><span data-stu-id="c120b-197">This is the source database that will be used to generate the scripts that will run later in the destination database.</span></span> <span data-ttu-id="c120b-198">Étant donné que vous souhaitez déployer la version de production de la base de données, remplacez « aspnet-Dev.sdf » par « aspnet-Prod.sdf ».</span><span class="sxs-lookup"><span data-stu-id="c120b-198">Since you want to deploy the production version of the database, change "aspnet-Dev.sdf" to "aspnet-Prod.sdf".</span></span>

<span data-ttu-id="c120b-199">Modification **options de script de base de données** de **schéma uniquement** à **schéma et les données**, étant donné que vous souhaitez copier vos données (comptes d’utilisateurs et rôles), ainsi que la structure de base de données.</span><span class="sxs-lookup"><span data-stu-id="c120b-199">Change **Database scripting options** from **Schema Only** to **Schema and data**, since you want to copy your data (user accounts and roles) as well as the database structure.</span></span>

<span data-ttu-id="c120b-200">Pour configurer le déploiement pour exécuter les scripts de grant que vous avez créé précédemment, vous devez les ajouter à la **des Scripts de base de données** section.</span><span class="sxs-lookup"><span data-stu-id="c120b-200">To configure deployment to run the grant scripts that you created earlier, you have to add them to the **Database Scripts** section.</span></span> <span data-ttu-id="c120b-201">Cliquez sur **ajouter un Script**, puis, dans le **ajouter des Scripts SQL** boîte de dialogue, accédez au dossier où vous avez stocké le script d’octroi (c’est le dossier qui contient votre fichier solution).</span><span class="sxs-lookup"><span data-stu-id="c120b-201">Click **Add Script**, and in the **Add SQL Scripts** dialog box, navigate to the folder where you stored the grant script (this is the folder that contains your solution file).</span></span> <span data-ttu-id="c120b-202">Sélectionnez le fichier nommé *Grant.sql*, puis cliquez sur **Open**.</span><span class="sxs-lookup"><span data-stu-id="c120b-202">Select the file named *Grant.sql*, and click **Open**.</span></span>

<span data-ttu-id="c120b-203">[![Select_File_dialog_box_grant_script](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image9.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="c120b-203">[![Select_File_dialog_box_grant_script](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image9.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image8.png)</span></span>

<span data-ttu-id="c120b-204">Les paramètres pour le **DefaultConnection-déploiement** de la ligne dans **les entrées de base de données** maintenant ressembler à l’illustration suivante :</span><span class="sxs-lookup"><span data-stu-id="c120b-204">The settings for the **DefaultConnection-Deployment** row in **Database Entries** now look like the following illustration:</span></span>

![Database_Entry_Details_for_DefaultConnection_Test](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image10.png)

### <a name="configuring-deployment-settings-for-the-school-database"></a><span data-ttu-id="c120b-206">Configuration des paramètres de déploiement pour la base de données School</span><span class="sxs-lookup"><span data-stu-id="c120b-206">Configuring Deployment Settings for the School Database</span></span>

<span data-ttu-id="c120b-207">Ensuite, sélectionnez le **SchoolContext-déploiement** de la ligne dans le **les entrées de base de données** table afin de configurer les paramètres de déploiement pour la base de données School.</span><span class="sxs-lookup"><span data-stu-id="c120b-207">Next, select the **SchoolContext-Deployment** row in the **Database Entries** table in order to configure deployment settings for the School database.</span></span>

<span data-ttu-id="c120b-208">Vous pouvez utiliser la même méthode que vous avez utilisé précédemment pour obtenir la chaîne de connexion pour la nouvelle base de données SQL Server Express.</span><span class="sxs-lookup"><span data-stu-id="c120b-208">You can use the same method you used earlier to get the connection string for the new SQL Server Express database.</span></span> <span data-ttu-id="c120b-209">Copiez cette chaîne de connexion dans **chaîne de connexion pour la base de données de destination** dans le **Package/Publication SQL** onglet.</span><span class="sxs-lookup"><span data-stu-id="c120b-209">Copy this connection string into **Connection string for destination database** in the **Package/Publish SQL** tab.</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample3.cmd)]

<span data-ttu-id="c120b-210">Assurez-vous que l’option **extraire les données et/ou le schéma à partir d’une base de données existante** est sélectionné.</span><span class="sxs-lookup"><span data-stu-id="c120b-210">Make sure that **Pull data and/or schema from an existing database** is selected.</span></span>

<span data-ttu-id="c120b-211">Le **chaîne de connexion pour la base de données source** valeur est extraite de la *Web.config* fichier et pointe vers la base de données SQL Server Compact de développement.</span><span class="sxs-lookup"><span data-stu-id="c120b-211">The **Connection string for the source database** value is extracted from the *Web.config* file and points to the development SQL Server Compact database.</span></span> <span data-ttu-id="c120b-212">Remplacez « School Dev.sdf » par « School Prod.sdf » pour déployer la version de production de la base de données.</span><span class="sxs-lookup"><span data-stu-id="c120b-212">Change "School-Dev.sdf" to "School-Prod.sdf" to deploy the production version of the database.</span></span> <span data-ttu-id="c120b-213">(Vous avez créé jamais un fichier Prod.sdf d’établissement scolaire dans l’application\_dossier de données, afin que vous allez copier ce fichier à partir de l’environnement de test à l’application\_dossier de données dans le dossier du projet ContosoUniversity ultérieurement.)</span><span class="sxs-lookup"><span data-stu-id="c120b-213">(You never created a School-Prod.sdf file in the App\_Data folder, so you'll copy that file from the test environment to the App\_Data folder in the ContosoUniversity project folder later.)</span></span>

<span data-ttu-id="c120b-214">Modification **options de script de base de données** à **schéma et les données**.</span><span class="sxs-lookup"><span data-stu-id="c120b-214">Change **Database scripting options** to **Schema and data**.</span></span>

<span data-ttu-id="c120b-215">Vous souhaitez également exécuter le script pour accorder en lecture et écriture d’autorisation pour cette base de données à l’identité de pool d’applications, ajoutez le *Grant.sql* fichier de script comme vous l’avez fait pour la base de données d’appartenance.</span><span class="sxs-lookup"><span data-stu-id="c120b-215">You also want to run the script to grant read and write permission for this database to the application pool identity, so add the *Grant.sql* script file as you did for the membership database.</span></span>

<span data-ttu-id="c120b-216">Lorsque vous avez terminé, les paramètres le **SchoolContext-déploiement** de la ligne dans **les entrées de base de données** ressembler à l’illustration suivante :</span><span class="sxs-lookup"><span data-stu-id="c120b-216">When you're done, the settings for the **SchoolContext-Deployment** row in **Database Entries** look like the following illustration:</span></span>

![Database_Entry_Details_for_SchoolContext_Test](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image11.png)

<span data-ttu-id="c120b-218">Enregistrez les modifications apportées à la **Package/Publication SQL** onglet.</span><span class="sxs-lookup"><span data-stu-id="c120b-218">Save the changes to the **Package/Publish SQL** tab.</span></span>

<span data-ttu-id="c120b-219">Copie le *School-Prod.sdf* de fichiers à partir de la *c:\inetpub\wwwroot\ContosoUniversity\App\_données* dossier pour le *application\_données* dossier dans le projet ContosoUniversity.</span><span class="sxs-lookup"><span data-stu-id="c120b-219">Copy the *School-Prod.sdf* file from the *c:\inetpub\wwwroot\ContosoUniversity\App\_Data* folder to the *App\_Data* folder in the ContosoUniversity project.</span></span>

### <a name="specifying-transacted-mode-for-the-grant-script"></a><span data-ttu-id="c120b-220">Spécification du Mode traité pour le Script d’octroi</span><span class="sxs-lookup"><span data-stu-id="c120b-220">Specifying Transacted Mode for the Grant Script</span></span>

<span data-ttu-id="c120b-221">Le processus de déploiement génère des scripts qui déploiement le schéma de base de données et les données.</span><span class="sxs-lookup"><span data-stu-id="c120b-221">The deployment process generates scripts that deploy the database schema and data.</span></span> <span data-ttu-id="c120b-222">Par défaut, ces scripts s’exécutent dans une transaction.</span><span class="sxs-lookup"><span data-stu-id="c120b-222">By default, these scripts run in a transaction.</span></span> <span data-ttu-id="c120b-223">Toutefois, les scripts personnalisés (par exemple, les scripts grant) par défaut ne s’exécutent pas dans une transaction.</span><span class="sxs-lookup"><span data-stu-id="c120b-223">However, custom scripts (like the grant scripts) by default do not run in a transaction.</span></span> <span data-ttu-id="c120b-224">Si le processus de déploiement combine les modes de transaction, vous pouvez obtenir une erreur de délai d’attente lorsque les scripts exécutés pendant le déploiement.</span><span class="sxs-lookup"><span data-stu-id="c120b-224">If the deployment process mixes transaction modes, you might get a timeout error when the scripts run during deployment.</span></span> <span data-ttu-id="c120b-225">Dans cette section, vous modifiez le fichier de projet afin de configurer les scripts personnalisés à exécuter dans une transaction.</span><span class="sxs-lookup"><span data-stu-id="c120b-225">In this section, you edit the project file in order to configure the custom scripts to run in a transaction.</span></span>

<span data-ttu-id="c120b-226">Dans **l’Explorateur de solutions**, avec le bouton droit le **ContosoUniversity** de projet et sélectionnez **décharger le projet**.</span><span class="sxs-lookup"><span data-stu-id="c120b-226">In **Solution Explorer**, right-click the **ContosoUniversity** project and select **Unload Project**.</span></span>

![Unload_Project_in_Solution_Explorer](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image12.png)

<span data-ttu-id="c120b-228">Cliquez à nouveau sur le projet, puis sélectionnez **modifier ContosoUniversity.csproj**.</span><span class="sxs-lookup"><span data-stu-id="c120b-228">Then right-click the project again and select **Edit ContosoUniversity.csproj**.</span></span>

![Edit_Project_in_Solution_Explorer](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image13.png)

<span data-ttu-id="c120b-230">L’éditeur Visual Studio affiche le contenu XML du fichier projet.</span><span class="sxs-lookup"><span data-stu-id="c120b-230">The Visual Studio editor shows you the XML content of the project file.</span></span> <span data-ttu-id="c120b-231">Notez qu’il existe plusieurs `PropertyGroup` éléments.</span><span class="sxs-lookup"><span data-stu-id="c120b-231">Notice that there are several `PropertyGroup` elements.</span></span> <span data-ttu-id="c120b-232">(Dans l’image, le contenu de la `PropertyGroup` éléments ont été omis.)</span><span class="sxs-lookup"><span data-stu-id="c120b-232">(In the image, the contents of the `PropertyGroup` elements have been omitted.)</span></span>

![Fenêtre d’éditeur de fichier de projet](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image15.png)

<span data-ttu-id="c120b-234">Le, qui n’a pas `Condition` attribut, est pour les paramètres qui s’appliquent indépendamment de configuration de build.</span><span class="sxs-lookup"><span data-stu-id="c120b-234">The first one, which has no `Condition` attribute, is for settings that apply regardless of build configuration.</span></span> <span data-ttu-id="c120b-235">Un `PropertyGroup` élément s’applique uniquement à la configuration de build de débogage (Notez le `Condition` attribut), une s’applique uniquement à la configuration de build Release, et une s’applique uniquement à la configuration de build de Test.</span><span class="sxs-lookup"><span data-stu-id="c120b-235">One `PropertyGroup` element applies only to the Debug build configuration (note the `Condition` attribute), one applies only to the Release build configuration, and one applies only to the Test build configuration.</span></span> <span data-ttu-id="c120b-236">Dans le `PropertyGroup` élément pour la configuration de build Release, vous verrez un `PublishDatabaseSettings` élément qui contient les paramètres que vous avez entrés dans le **Package/Publication SQL** onglet. Il existe un `Object` élément qui correspond à chacun des scripts grant vous (Notez que les deux instances spécifiées de « Grant.sql »).</span><span class="sxs-lookup"><span data-stu-id="c120b-236">Within the `PropertyGroup` element for the Release build configuration, you'll see a `PublishDatabaseSettings` element that contains the settings you entered on the **Package/Publish SQL** tab. There is an `Object` element that corresponds to each of the grant scripts you specified (notice the two instances of "Grant.sql").</span></span> <span data-ttu-id="c120b-237">Par défaut, le `Transacted` attribut de la `Source` élément pour chaque script d’octroi est `False`.</span><span class="sxs-lookup"><span data-stu-id="c120b-237">By default, the `Transacted` attribute of the `Source` element for each grant script is `False`.</span></span>

![Transacted_false](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image16.png)

<span data-ttu-id="c120b-239">Modifiez la valeur de la `Transacted` attribut de la `Source` élément à `True`.</span><span class="sxs-lookup"><span data-stu-id="c120b-239">Change the value of the `Transacted` attribute of the `Source` element to `True`.</span></span>

![Transacted_true](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image17.png)

<span data-ttu-id="c120b-241">Enregistrez et fermez le fichier projet et puis cliquez sur le projet dans **l’Explorateur de solutions** et sélectionnez **recharger le projet**.</span><span class="sxs-lookup"><span data-stu-id="c120b-241">Save and close the project file, and then right-click the project in **Solution Explorer** and select **Reload Project**.</span></span>

![Reload_project](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image18.png)

## <a name="setting-up-webconfig-transformations-for-the-connection-strings"></a><span data-ttu-id="c120b-243">Configuration des Transformations Web.Config pour les chaînes de connexion</span><span class="sxs-lookup"><span data-stu-id="c120b-243">Setting up Web.Config Transformations for the Connection Strings</span></span>

<span data-ttu-id="c120b-244">Chaînes de la connexion pour le SQL Express des bases de données que vous avez entré le **Package/Publication SQL** onglet sont utilisés par Web Deploy uniquement pour la mise à jour de la base de données de destination pendant le déploiement.</span><span class="sxs-lookup"><span data-stu-id="c120b-244">The connection strings for the new SQL Express databases that you entered on the **Package/Publish SQL** tab are used by Web Deploy only for updating the destination database during deployment.</span></span> <span data-ttu-id="c120b-245">Vous devez toujours configurer *Web.config* transformations afin que la connexion des chaînes dans déployé *Web.config* fichier point pour les nouvelles bases de données SQL Server Express.</span><span class="sxs-lookup"><span data-stu-id="c120b-245">You still have to set up *Web.config* transformations so that the connection strings in the deployed *Web.config* file point to the new SQL Server Express databases.</span></span> <span data-ttu-id="c120b-246">(Lorsque vous utilisez le **Package/Publication SQL** onglet, vous ne pouvez pas configurer les chaînes de connexion dans le profil de publication.)</span><span class="sxs-lookup"><span data-stu-id="c120b-246">(When you use the **Package/Publish SQL** tab, you can't configure connection strings in the publish profile.)</span></span>

<span data-ttu-id="c120b-247">Ouvrez *Web.Test.config* et remplacez le `connectionStrings` élément avec la `connectionStrings` élément dans l’exemple suivant.</span><span class="sxs-lookup"><span data-stu-id="c120b-247">Open *Web.Test.config* and replace the `connectionStrings` element with the `connectionStrings` element in the following example.</span></span> <span data-ttu-id="c120b-248">(Veillez à que copier l’élément de connectionStrings, pas le code environnant qui est indiqué ici pour fournir un contexte uniquement.)</span><span class="sxs-lookup"><span data-stu-id="c120b-248">(Make sure you only copy the connectionStrings element, not the surrounding code that is shown here to provide context.)</span></span>

[!code-xml[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample4.xml?highlight=2-11)]

<span data-ttu-id="c120b-249">Ce code provoque la `connectionString` et `providerName` attributs de chaque `add` élément à remplacer dans déployé *Web.config* fichier.</span><span class="sxs-lookup"><span data-stu-id="c120b-249">This code causes the `connectionString` and `providerName` attributes of each `add` element to be replaced in the deployed *Web.config* file.</span></span> <span data-ttu-id="c120b-250">Ces chaînes de connexion ne sont pas identiques à ceux que vous avez entré dans le **Package/Publication SQL** onglet. Le paramètre « MultipleActiveResultSets = True » a été ajouté à eux, car il a requis pour Entity Framework et les fournisseurs universels.</span><span class="sxs-lookup"><span data-stu-id="c120b-250">These connection strings are not identical to the ones you entered in the **Package/Publish SQL** tab. The setting "MultipleActiveResultSets=True" has been added to them because it's required for the Entity Framework and the Universal Providers.</span></span>

## <a name="installing-sql-server-compact"></a><span data-ttu-id="c120b-251">L’installation de SQL Server Compact</span><span class="sxs-lookup"><span data-stu-id="c120b-251">Installing SQL Server Compact</span></span>

<span data-ttu-id="c120b-252">Le package NuGet de SqlServerCompact fournit la base de données SQL Server Compact assemblys du moteur de l’application Contoso University.</span><span class="sxs-lookup"><span data-stu-id="c120b-252">The SqlServerCompact NuGet package provides the SQL Server Compact database engine assemblies for the Contoso University application.</span></span> <span data-ttu-id="c120b-253">Mais maintenant il n’est pas l’application mais Web Deploy qui doivent être en mesure de lire les bases de données SQL Server Compact, afin de créer des scripts à exécuter dans les bases de données SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c120b-253">But now it is not the application but Web Deploy that must be able to read the SQL Server Compact databases, in order to create scripts to run in the SQL Server databases.</span></span> <span data-ttu-id="c120b-254">Pour activer Web Deploy lire les bases de données SQL Server Compact, installez SQL Server Compact sur l’ordinateur de développement en utilisant le lien suivant : [Microsoft SQL Server Compact 4.0](https://www.microsoft.com/downloads/details.aspx?FamilyID=15F7C9B3-A150-4AD2-823E-E4E0DCF85DF6).</span><span class="sxs-lookup"><span data-stu-id="c120b-254">To enable Web Deploy to read SQL Server Compact databases, install SQL Server Compact on the development computer by using the following link: [Microsoft SQL Server Compact 4.0](https://www.microsoft.com/downloads/details.aspx?FamilyID=15F7C9B3-A150-4AD2-823E-E4E0DCF85DF6).</span></span>

## <a name="deploying-to-the-test-environment"></a><span data-ttu-id="c120b-255">Déploiement sur l’environnement de Test</span><span class="sxs-lookup"><span data-stu-id="c120b-255">Deploying to the Test Environment</span></span>

<span data-ttu-id="c120b-256">Pour publier dans l’environnement de Test, vous devez créer un profil de publication est configuré pour utiliser le **Package/Publication SQL** onglet pour la base de données de publication au lieu des paramètres de base de données de profil de publication.</span><span class="sxs-lookup"><span data-stu-id="c120b-256">In order to publish to the Test environment, you have to create a publish profile that is configured to use the **Package/Publish SQL** tab for database publishing instead of the publish profile database settings.</span></span>

<span data-ttu-id="c120b-257">Tout d’abord, supprimer le profil de Test existant.</span><span class="sxs-lookup"><span data-stu-id="c120b-257">First, delete the existing Test profile.</span></span>

<span data-ttu-id="c120b-258">Dans **l’Explorateur de solutions**, cliquez sur le projet ContosoUniversity, puis cliquez sur **publier**.</span><span class="sxs-lookup"><span data-stu-id="c120b-258">In **Solution Explorer**, right-click the ContosoUniversity project, and click **Publish**.</span></span>

<span data-ttu-id="c120b-259">Sélectionnez le **profil** onglet.</span><span class="sxs-lookup"><span data-stu-id="c120b-259">Select the **Profile** tab.</span></span>

<span data-ttu-id="c120b-260">Cliquez sur **gérer les profils**.</span><span class="sxs-lookup"><span data-stu-id="c120b-260">Click **Manage Profiles**.</span></span>

<span data-ttu-id="c120b-261">Sélectionnez **Test**, cliquez sur **supprimer**, puis cliquez sur **fermer**.</span><span class="sxs-lookup"><span data-stu-id="c120b-261">Select **Test**, click **Remove**, and then click **Close**.</span></span>

<span data-ttu-id="c120b-262">Fermer le **publier le site Web** Assistant pour enregistrer cette modification.</span><span class="sxs-lookup"><span data-stu-id="c120b-262">Close the **Publish Web** wizard to save this change.</span></span>

<span data-ttu-id="c120b-263">Ensuite, créer un nouveau profil de Test et l’utiliser pour publier le projet.</span><span class="sxs-lookup"><span data-stu-id="c120b-263">Next, create a new Test profile and use it to publish the project.</span></span>

<span data-ttu-id="c120b-264">Dans **l’Explorateur de solutions**, cliquez sur le projet ContosoUniversity, puis cliquez sur **publier**.</span><span class="sxs-lookup"><span data-stu-id="c120b-264">In **Solution Explorer**, right-click the ContosoUniversity project, and click **Publish**.</span></span>

<span data-ttu-id="c120b-265">Sélectionnez le **profil** onglet.</span><span class="sxs-lookup"><span data-stu-id="c120b-265">Select the **Profile** tab.</span></span>

<span data-ttu-id="c120b-266">Sélectionnez **&lt;nouveau... &gt;** à partir de la liste déroulante liste, puis entrez « Test » en tant que le nom du profil.</span><span class="sxs-lookup"><span data-stu-id="c120b-266">Select **&lt;New...&gt;** from the drop-down list, and enter "Test" as the profile name.</span></span>

<span data-ttu-id="c120b-267">Dans le **l’URL du Service** , entrez *localhost*.</span><span class="sxs-lookup"><span data-stu-id="c120b-267">In the **Service URL** box, enter *localhost*.</span></span>

<span data-ttu-id="c120b-268">Dans le **Site/application** , entrez *Default Web Site/ContosoUniversity*.</span><span class="sxs-lookup"><span data-stu-id="c120b-268">In the **Site/application** box, enter *Default Web Site/ContosoUniversity*.</span></span>

<span data-ttu-id="c120b-269">Dans le **URL de Destination** , entrez `http://localhost/ContosoUniversity/`.</span><span class="sxs-lookup"><span data-stu-id="c120b-269">In the **Destination URL** box, enter `http://localhost/ContosoUniversity/`.</span></span>

<span data-ttu-id="c120b-270">Cliquez sur **Suivant**.</span><span class="sxs-lookup"><span data-stu-id="c120b-270">Click **Next**.</span></span>

<span data-ttu-id="c120b-271">Le **paramètres** onglet vous avertit que le **Package/Publication SQL** onglet a été configuré, et il vous donne la possibilité pour les remplacer en cliquant sur Activer la base de données nouvelles améliorations de la publication.</span><span class="sxs-lookup"><span data-stu-id="c120b-271">The **Settings** tab warns you that the **Package/Publish SQL** tab has been configured, and it gives you an opportunity to override them by clicking enable the new database publishing improvements.</span></span> <span data-ttu-id="c120b-272">Pour ce déploiement, vous souhaitez remplacer le **Package/Publication SQL** onglet Paramètres, cliquez simplement sur **suivant**.</span><span class="sxs-lookup"><span data-stu-id="c120b-272">For this deployment you don't want to override the **Package/Publish SQL** tab settings, so just click **Next**.</span></span>

![Publish_Web_wizard_Settings_tab_Migrate](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image19.png)

<span data-ttu-id="c120b-274">Un message sur le **aperçu** onglet indique que **aucune base de données n’est sélectionnés pour publication**, mais cela signifie uniquement que la publication de base de données n’est pas configurée dans le profil de publication.</span><span class="sxs-lookup"><span data-stu-id="c120b-274">A message on the **Preview** tab indicates that **No databases are selected to publish**, but this only means that database publishing is not configured in the publish profile.</span></span>

<span data-ttu-id="c120b-275">Cliquez sur **Publier**.</span><span class="sxs-lookup"><span data-stu-id="c120b-275">Click **Publish**.</span></span>

![Publish_Web_wizard_Preview_tab_Migrate](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image20.png)

<span data-ttu-id="c120b-277">Visual Studio déploie l’application et ouvre le navigateur à la page d’accueil du site dans l’environnement de test.</span><span class="sxs-lookup"><span data-stu-id="c120b-277">Visual Studio deploys the application and opens the browser to the home page of the site in the test environment.</span></span> <span data-ttu-id="c120b-278">Exécutez la page des formateurs pour voir qu’il affiche les mêmes données que vous avez vu précédemment.</span><span class="sxs-lookup"><span data-stu-id="c120b-278">Run the Instructors page to see that it displays the same data that you saw earlier.</span></span> <span data-ttu-id="c120b-279">Exécutez le **étudiants ajouter** page, ajoutez un nouvel étudiant et puis afficher le nouvel étudiant dans la **étudiants** page.</span><span class="sxs-lookup"><span data-stu-id="c120b-279">Run the **Add Students** page, add a new student, and then view the new student in the **Students** page.</span></span> <span data-ttu-id="c120b-280">Cela permet de vérifier que vous pouvez mettre à jour la base de données.</span><span class="sxs-lookup"><span data-stu-id="c120b-280">This verifies that the you can update the database.</span></span> <span data-ttu-id="c120b-281">Sélectionnez le **mise à jour crédits** page (vous aurez besoin pour vous connecter) pour vérifier que la base de données d’appartenance a été déployé et que vous avez accès à celui-ci.</span><span class="sxs-lookup"><span data-stu-id="c120b-281">Select the **Update Credits** page (you'll need to log in) to verify that the membership database was deployed and you have access to it.</span></span>

## <a name="creating-a-sql-server-database-for-the-production-environment"></a><span data-ttu-id="c120b-282">Création d’une base de données SQL Server pour l’environnement de Production</span><span class="sxs-lookup"><span data-stu-id="c120b-282">Creating a SQL Server Database for the Production Environment</span></span>

<span data-ttu-id="c120b-283">Maintenant que vous avez déployé dans l’environnement de test, vous êtes prêt à configurer le déploiement en production.</span><span class="sxs-lookup"><span data-stu-id="c120b-283">Now that you've deployed to the test environment, you're ready to set up deployment to production.</span></span> <span data-ttu-id="c120b-284">Comme vous l’avez fait pour l’environnement de test, en créant une base de données à déployer pour commencer.</span><span class="sxs-lookup"><span data-stu-id="c120b-284">You begin as you did for the test environment, by creating a database to deploy to.</span></span> <span data-ttu-id="c120b-285">Comme vous le savez à partir de la vue d’ensemble, le plan d’hébergement Cytanium Lite autorise uniquement une base de données SQL Server, afin que vous allez définir qu’une seule base de données, pas les deux.</span><span class="sxs-lookup"><span data-stu-id="c120b-285">As you recall from the Overview, the Cytanium Lite hosting plan only allows a single SQL Server database, so you will set up only one database, not two.</span></span> <span data-ttu-id="c120b-286">Toutes les tables et les données à partir de l’appartenance et les bases de données School SQL Server Compact sont déployés dans une base de données SQL Server en production.</span><span class="sxs-lookup"><span data-stu-id="c120b-286">All of the tables and data from the membership and School SQL Server Compact databases will be deployed into one SQL Server database in production.</span></span>

<span data-ttu-id="c120b-287">Accédez au panneau de commande Cytanium à [ http://panel.cytanium.com ](http://panel.cytanium.com).</span><span class="sxs-lookup"><span data-stu-id="c120b-287">Go to the Cytanium control panel at [http://panel.cytanium.com](http://panel.cytanium.com).</span></span> <span data-ttu-id="c120b-288">Maintenez la souris sur **bases de données** puis cliquez sur **SQL Server 2008**.</span><span class="sxs-lookup"><span data-stu-id="c120b-288">Hold the mouse over **Databases** and then click **SQL Server 2008**.</span></span>

<span data-ttu-id="c120b-289">[![Selecting_Databases_in_Control_Panel](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image22.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="c120b-289">[![Selecting_Databases_in_Control_Panel](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image22.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image21.png)</span></span>

<span data-ttu-id="c120b-290">Dans le **SQL Server 2008** , cliquez sur **Create Database**.</span><span class="sxs-lookup"><span data-stu-id="c120b-290">In the **SQL Server 2008** page, click **Create Database**.</span></span>

<span data-ttu-id="c120b-291">[![Selecting_Create_Database](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image24.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="c120b-291">[![Selecting_Create_Database](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image24.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image23.png)</span></span>

<span data-ttu-id="c120b-292">Nommez la base de données « School » et cliquez sur **enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="c120b-292">Name the database "School" and click **Save**.</span></span> <span data-ttu-id="c120b-293">(La page ajoute automatiquement le préfixe « contosou », le nom effectif est donc « contosouSchool ».)</span><span class="sxs-lookup"><span data-stu-id="c120b-293">(The page automatically adds the prefix "contosou", so the effective name will be "contosouSchool".)</span></span>

<span data-ttu-id="c120b-294">[![Naming_the_database](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image26.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="c120b-294">[![Naming_the_database](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image26.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image25.png)</span></span>

<span data-ttu-id="c120b-295">Dans la même page, cliquez sur **Create User**.</span><span class="sxs-lookup"><span data-stu-id="c120b-295">On the same page, click **Create User**.</span></span> <span data-ttu-id="c120b-296">Sur les serveurs de Cytanium, plutôt que d’à l’aide de la sécurité intégrée de Windows et de laisser l’identité de pool d’applications de votre base de données, vous allez créer un utilisateur qui a l’autorisation d’ouvrir votre base de données.</span><span class="sxs-lookup"><span data-stu-id="c120b-296">On Cytanium's servers, rather than using integrated Windows security and letting the application pool identity open your database, you'll create a user that has authority to open your database.</span></span> <span data-ttu-id="c120b-297">Vous allez ajouter des informations d’identification de l’utilisateur pour les chaînes de connexion qui vont dans la production *Web.config* fichier.</span><span class="sxs-lookup"><span data-stu-id="c120b-297">You'll add the user's credentials to the connection strings that go in the production *Web.config* file.</span></span> <span data-ttu-id="c120b-298">Dans cette étape, vous créez ces informations d’identification.</span><span class="sxs-lookup"><span data-stu-id="c120b-298">In this step you create those credentials.</span></span>

<span data-ttu-id="c120b-299">[![Creating_a_database_user](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image28.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="c120b-299">[![Creating_a_database_user](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image28.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image27.png)</span></span>

<span data-ttu-id="c120b-300">Renseignez les champs requis dans le **propriétés de l’utilisateur SQL** page :</span><span class="sxs-lookup"><span data-stu-id="c120b-300">Fill in the required fields in the **SQL User Properties** page:</span></span>

- <span data-ttu-id="c120b-301">Entrez « ContosoUniversityUser » comme nom.</span><span class="sxs-lookup"><span data-stu-id="c120b-301">Enter "ContosoUniversityUser" as the name.</span></span>
- <span data-ttu-id="c120b-302">Entrez un mot de passe.</span><span class="sxs-lookup"><span data-stu-id="c120b-302">Enter a password.</span></span>
- <span data-ttu-id="c120b-303">Sélectionnez **contosouSchool** en tant que la base de données par défaut.</span><span class="sxs-lookup"><span data-stu-id="c120b-303">Select **contosouSchool** as the default database.</span></span>
- <span data-ttu-id="c120b-304">Sélectionnez le **contosouSchool** case à cocher.</span><span class="sxs-lookup"><span data-stu-id="c120b-304">Select the **contosouSchool** check box.</span></span>

<span data-ttu-id="c120b-305">[![SQL_User_Properties_page](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image30.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="c120b-305">[![SQL_User_Properties_page](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image30.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image29.png)</span></span>

## <a name="configuring-database-deployment-for-the-production-environment"></a><span data-ttu-id="c120b-306">Configuration du déploiement de base de données pour l’environnement de Production</span><span class="sxs-lookup"><span data-stu-id="c120b-306">Configuring Database Deployment for the Production Environment</span></span>

<span data-ttu-id="c120b-307">Maintenant vous êtes prêt à configurer les paramètres de déploiement de base de données dans le **Package/Publication SQL** onglet, comme vous l’avez fait précédemment pour l’environnement de test.</span><span class="sxs-lookup"><span data-stu-id="c120b-307">Now you're ready to set up database deployment settings in the **Package/Publish SQL** tab, as you did earlier for the test environment.</span></span>

<span data-ttu-id="c120b-308">Ouvrir le **propriétés du projet** fenêtre, sélectionnez le **Package/Publication SQL** onglet et vous assurer que **Active (Release)** ou **version** est sélectionné dans le **Configuration** liste déroulante.</span><span class="sxs-lookup"><span data-stu-id="c120b-308">Open the **Project Properties** window, select the **Package/Publish SQL** tab, and make sure that **Active (Release)** or **Release** is selected in the **Configuration** drop-down list.</span></span>

<span data-ttu-id="c120b-309">Lorsque vous configurez les paramètres de déploiement pour chaque base de données, la principale différence entre ce que vous le feriez pour les environnements de production et de test est dans la façon dont vous configurez les chaînes de connexion.</span><span class="sxs-lookup"><span data-stu-id="c120b-309">When you configure deployment settings for each database, the key difference between what you do for production and test environments is in how you configure connection strings.</span></span> <span data-ttu-id="c120b-310">Pour l’environnement de test que vous avez entré les chaînes de connexion de base de données de destination différente, mais pour l’environnement de production, la chaîne de connexion de destination doit être le même pour les deux bases de données.</span><span class="sxs-lookup"><span data-stu-id="c120b-310">For the test environment you entered different destination database connection strings, but for the production environment the destination connection string will be the same for both databases.</span></span> <span data-ttu-id="c120b-311">Il s’agit, car vous déployez les deux bases de données à une base de données en production.</span><span class="sxs-lookup"><span data-stu-id="c120b-311">This is because you are deploying both databases to one database in production.</span></span>

### <a name="configuring-deployment-settings-for-the-membership-database"></a><span data-ttu-id="c120b-312">Configuration des paramètres de déploiement pour la base de données d’appartenance</span><span class="sxs-lookup"><span data-stu-id="c120b-312">Configuring Deployment Settings for the Membership Database</span></span>

<span data-ttu-id="c120b-313">Pour configurer les paramètres qui s’appliquent à la base de données d’appartenance, sélectionnez le **DefaultConnection-déploiement** de la ligne dans le **les entrées de base de données** table.</span><span class="sxs-lookup"><span data-stu-id="c120b-313">To configure settings that apply to the membership database, select the **DefaultConnection-Deployment** row in the **Database Entries** table.</span></span>

<span data-ttu-id="c120b-314">Dans **chaîne de connexion pour la base de données de destination**, entrez une chaîne de connexion qui pointe vers la nouvelle base de SQL Server de production que vous venez de créer.</span><span class="sxs-lookup"><span data-stu-id="c120b-314">In **Connection string for destination database**, enter a connection string that points to the new production SQL Server database that you just created.</span></span> <span data-ttu-id="c120b-315">Vous pouvez obtenir la chaîne de connexion à partir de votre e-mail de bienvenue.</span><span class="sxs-lookup"><span data-stu-id="c120b-315">You can get the connection string from your welcome email.</span></span> <span data-ttu-id="c120b-316">La partie pertinente du message électronique contient la chaîne de connexion suivante :</span><span class="sxs-lookup"><span data-stu-id="c120b-316">The relevant part of the email contains the following sample connection string:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample5.cmd)]

<span data-ttu-id="c120b-317">Une fois que vous remplacez les trois variables, la chaîne de connexion que vous avez besoin se présente comme dans cet exemple :</span><span class="sxs-lookup"><span data-stu-id="c120b-317">After you replace the three variables, the connection string you need looks like this example:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample6.cmd)]

<span data-ttu-id="c120b-318">Copiez et collez cette chaîne de connexion dans **chaîne de connexion pour la base de données de destination** dans le **Package/Publication SQL** onglet.</span><span class="sxs-lookup"><span data-stu-id="c120b-318">Copy and paste this connection string into **Connection string for destination database** in the **Package/Publish SQL** tab.</span></span>

<span data-ttu-id="c120b-319">Assurez-vous que l’option **extraire les données et/ou le schéma à partir d’une base de données existante** est toujours sélectionné et que **options de script de base de données** est toujours **schéma et les données**.</span><span class="sxs-lookup"><span data-stu-id="c120b-319">Make sure that **Pull data and/or schema from an existing database** is still selected, and that **Database scripting options** is still **Schema and Data**.</span></span>

<span data-ttu-id="c120b-320">Dans le **des Scripts de base de données** zone, désactivez la case à cocher en regard du script Grant.sql.</span><span class="sxs-lookup"><span data-stu-id="c120b-320">In the **Database Scripts** box, clear the check box next to the Grant.sql script.</span></span>

![Disable_Grant_script](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image31.png)

### <a name="configuring-deployment-settings-for-the-school-database"></a><span data-ttu-id="c120b-322">Configuration des paramètres de déploiement pour la base de données School</span><span class="sxs-lookup"><span data-stu-id="c120b-322">Configuring Deployment Settings for the School Database</span></span>

<span data-ttu-id="c120b-323">Ensuite, sélectionnez le **SchoolContext-déploiement** de la ligne dans le **les entrées de base de données** table afin de configurer les paramètres de base de données School.</span><span class="sxs-lookup"><span data-stu-id="c120b-323">Next, select the **SchoolContext-Deployment** row in the **Database Entries** table in order to configure the School database settings.</span></span>

<span data-ttu-id="c120b-324">Copiez la chaîne de connexion dans **chaîne de connexion pour la base de données de destination** que vous avez copiée dans ce champ pour la base de données d’appartenance.</span><span class="sxs-lookup"><span data-stu-id="c120b-324">Copy the same connection string into **Connection string for destination database** that you copied into that field for the membership database.</span></span>

<span data-ttu-id="c120b-325">Assurez-vous que l’option **extraire les données et/ou le schéma à partir d’une base de données existante** est toujours sélectionné et que **options de script de base de données** est toujours **schéma et les données**.</span><span class="sxs-lookup"><span data-stu-id="c120b-325">Make sure that **Pull data and/or schema from an existing database** is still selected, and that **Database scripting options** is still **Schema and Data**.</span></span>

<span data-ttu-id="c120b-326">Dans le **des Scripts de base de données** zone, désactivez la case à cocher en regard du script Grant.sql.</span><span class="sxs-lookup"><span data-stu-id="c120b-326">In the **Database Scripts** box, clear the check box next to the Grant.sql script.</span></span>

<span data-ttu-id="c120b-327">Enregistrez les modifications apportées à la **Package/Publication SQL** onglet.</span><span class="sxs-lookup"><span data-stu-id="c120b-327">Save the changes to the **Package/Publish SQL** tab.</span></span>

## <a name="setting-up-webconfig-transforms-for-the-connection-strings-to-production-databases"></a><span data-ttu-id="c120b-328">Configuration de Web.Config transforme les chaînes de connexion aux bases de données de Production</span><span class="sxs-lookup"><span data-stu-id="c120b-328">Setting Up Web.Config Transforms for the Connection Strings to Production Databases</span></span>

<span data-ttu-id="c120b-329">Ensuite, vous allez définir *Web.config* transformations afin que la connexion des chaînes dans déployé *Web.config* fichier pour pointer vers la nouvelle base de données de production.</span><span class="sxs-lookup"><span data-stu-id="c120b-329">Next, you'll set up *Web.config* transformations so that the connection strings in the deployed *Web.config* file to point to the new production database.</span></span> <span data-ttu-id="c120b-330">La chaîne de connexion que vous avez entré sur le **Package/Publication SQL** onglet pour Web Deploy à utiliser est le même que celui de l’application doit utiliser, à l’exception de l’ajout de la `MultipleResultSets` option.</span><span class="sxs-lookup"><span data-stu-id="c120b-330">The connection string that you entered on the **Package/Publish SQL** tab for Web Deploy to use is the same as the one the application needs to use, except for the addition of the `MultipleResultSets` option.</span></span>

<span data-ttu-id="c120b-331">Ouvrez *Web.Production.config* et remplacez le `connectionStrings` élément avec un `connectionStrings` élément ressemble à l’exemple suivant.</span><span class="sxs-lookup"><span data-stu-id="c120b-331">Open *Web.Production.config* and replace the `connectionStrings` element with a `connectionStrings` element that looks like the following example.</span></span> <span data-ttu-id="c120b-332">(Copier uniquement le `connectionStrings` élément, pas les balises environnants qui sont fournis pour montrer le contexte.)</span><span class="sxs-lookup"><span data-stu-id="c120b-332">(Only copy the `connectionStrings` element, not the surrounding tags that are provided to show the context.)</span></span>

[!code-xml[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample7.xml?highlight=2-11)]

<span data-ttu-id="c120b-333">Vous voyez parfois des conseils qui vous indique toujours chiffrer des chaînes de connexion dans le *Web.config* fichier.</span><span class="sxs-lookup"><span data-stu-id="c120b-333">You sometimes see advice that tells you to always encrypt connection strings in the *Web.config* file.</span></span> <span data-ttu-id="c120b-334">Cela peut être approprié si vous déployez aux serveurs sur le réseau de votre propre entreprise.</span><span class="sxs-lookup"><span data-stu-id="c120b-334">This might be appropriate if you were deploying to servers on your own company's network.</span></span> <span data-ttu-id="c120b-335">Lorsque vous déployez sur un environnement d’hébergement partagé, cependant, vous êtes autorisé à approuver les pratiques de sécurité du fournisseur d’hébergement, et il n’est pas nécessaire ni pratique pour chiffrer les chaînes de connexion.</span><span class="sxs-lookup"><span data-stu-id="c120b-335">When you are deploying to a shared hosting environment, though, you're trusting the security practices of the hosting provider, and it's not necessary or practical to encrypt the connection strings.</span></span>

## <a name="deploying-to-the-production-environment"></a><span data-ttu-id="c120b-336">Déploiement dans l’environnement de Production</span><span class="sxs-lookup"><span data-stu-id="c120b-336">Deploying to the Production Environment</span></span>

<span data-ttu-id="c120b-337">Vous êtes maintenant prêt à déployer en production.</span><span class="sxs-lookup"><span data-stu-id="c120b-337">Now you're ready to deploy to production.</span></span> <span data-ttu-id="c120b-338">Web Deploy lira les bases de données SQL Server Compact de votre projet *application\_données* dossier et recréer toutes leurs tables et les données dans la base de données de SQL Server de production.</span><span class="sxs-lookup"><span data-stu-id="c120b-338">Web Deploy will read the SQL Server Compact databases in your project's *App\_Data* folder and re-create all of their tables and data in the production SQL Server database.</span></span> <span data-ttu-id="c120b-339">Pour publier à l’aide de la **Package/Publication Web** paramètres de l’onglet, vous devez créer un nouveau profil de publication pour la production.</span><span class="sxs-lookup"><span data-stu-id="c120b-339">In order to publish by using the **Package/Publish Web** tab settings, you have to create a new publish profile for production.</span></span>

<span data-ttu-id="c120b-340">Commencez par supprimer le profil de Production existant comme le profil de Test précédemment.</span><span class="sxs-lookup"><span data-stu-id="c120b-340">First, delete the existing Production profile as you did the Test profile earlier.</span></span>

<span data-ttu-id="c120b-341">Dans **l’Explorateur de solutions**, cliquez sur le projet ContosoUniversity, puis cliquez sur **publier**.</span><span class="sxs-lookup"><span data-stu-id="c120b-341">In **Solution Explorer**, right-click the ContosoUniversity project, and click **Publish**.</span></span>

<span data-ttu-id="c120b-342">Sélectionnez le **profil** onglet.</span><span class="sxs-lookup"><span data-stu-id="c120b-342">Select the **Profile** tab.</span></span>

<span data-ttu-id="c120b-343">Cliquez sur **gérer les profils**.</span><span class="sxs-lookup"><span data-stu-id="c120b-343">Click **Manage Profiles**.</span></span>

<span data-ttu-id="c120b-344">Sélectionnez **Production**, cliquez sur **supprimer**, puis cliquez sur **fermer**.</span><span class="sxs-lookup"><span data-stu-id="c120b-344">Select **Production**, click **Remove**, and then click **Close**.</span></span>

<span data-ttu-id="c120b-345">Fermer le **publier le site Web** Assistant pour enregistrer cette modification.</span><span class="sxs-lookup"><span data-stu-id="c120b-345">Close the **Publish Web** wizard to save this change.</span></span>

<span data-ttu-id="c120b-346">Ensuite, créez un nouveau profil de Production et utilisez-le pour publier le projet.</span><span class="sxs-lookup"><span data-stu-id="c120b-346">Next, create a new Production profile and use it to publish the project.</span></span>

<span data-ttu-id="c120b-347">Dans **l’Explorateur de solutions**, cliquez sur le projet ContosoUniversity, puis cliquez sur **publier**.</span><span class="sxs-lookup"><span data-stu-id="c120b-347">In **Solution Explorer**, right-click the ContosoUniversity project, and click **Publish**.</span></span>

<span data-ttu-id="c120b-348">Sélectionnez le **profil** onglet.</span><span class="sxs-lookup"><span data-stu-id="c120b-348">Select the **Profile** tab.</span></span>

<span data-ttu-id="c120b-349">Cliquez sur **importation**, puis sélectionnez le fichier .publishsettings que vous avez téléchargé précédemment.</span><span class="sxs-lookup"><span data-stu-id="c120b-349">Click **Import**, and select the .publishsettings file that you downloaded earlier.</span></span>

<span data-ttu-id="c120b-350">Sur le **connexion** , modifiez le **URL de Destination** vers l’URL correcte temporaire, qui dans cet exemple est http://contosouniversity.com.vserver01.cytanium.com.</span><span class="sxs-lookup"><span data-stu-id="c120b-350">On the **Connection** tab, change the **Destination URL** to the correct temporary URL, which in this example is http://contosouniversity.com.vserver01.cytanium.com.</span></span>

<span data-ttu-id="c120b-351">Renommez le profil en Production.</span><span class="sxs-lookup"><span data-stu-id="c120b-351">Rename the profile to Production.</span></span> <span data-ttu-id="c120b-352">(Sélectionnez le **profil** onglet et cliquez sur **gérer les profils** à le faire).</span><span class="sxs-lookup"><span data-stu-id="c120b-352">(Select the **Profile** tab and click **Manage Profiles** to do that).</span></span>

<span data-ttu-id="c120b-353">Fermer le **publier le site Web** Assistant pour enregistrer vos modifications.</span><span class="sxs-lookup"><span data-stu-id="c120b-353">Close the **Publish Web** wizard to save your changes.</span></span>

<span data-ttu-id="c120b-354">Dans une application réelle dans laquelle la base de données a été mis à jour en production, vous le feriez deux étapes supplémentaires maintenant avant de publier :</span><span class="sxs-lookup"><span data-stu-id="c120b-354">In a real application in which the database was being updated in production, you would do two additional steps now before you publish:</span></span>

1. <span data-ttu-id="c120b-355">Télécharger *application\_offline.htm*, comme illustré dans le [déploiement dans l’environnement de Production](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) didacticiel.</span><span class="sxs-lookup"><span data-stu-id="c120b-355">Upload *app\_offline.htm*, as shown in the [Deploying to the Production Environment](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) tutorial.</span></span>
2. <span data-ttu-id="c120b-356">Utilisez le **Gestionnaire de fichiers** fonctionnalité du Panneau de Cytanium pour copier le *aspnet-Prod.sdf* et *School-Prod.sdf* fichiers à partir du site de production à la *Application\_données* dossier du projet ContosoUniversity.</span><span class="sxs-lookup"><span data-stu-id="c120b-356">Use the **File Manager** feature of the Cytanium control panel to copy the *aspnet-Prod.sdf* and *School-Prod.sdf* files from the production site to the *App\_Data* folder of the ContosoUniversity project.</span></span> <span data-ttu-id="c120b-357">Cela garantit que les données que vous déployez la nouvelle base de données SQL Server incluent les dernières mises à jour effectuées par votre site Web de production.</span><span class="sxs-lookup"><span data-stu-id="c120b-357">This ensures that the data you're deploying to the new SQL Server database includes the latest updates made by your production website.</span></span>

<span data-ttu-id="c120b-358">Dans le **publication Web en un clic** barre d’outils, assurez-vous que le **Production** profil est sélectionné, puis cliquez sur **publier**.</span><span class="sxs-lookup"><span data-stu-id="c120b-358">In the **Web One Click Publish** toolbar, make sure that the **Production** profile is selected, and then click **Publish**.</span></span>

<span data-ttu-id="c120b-359">Si vous avez téléchargé <em>application\_offline.htm</em> avant la publication, vous devez utiliser le <strong>Gestionnaire de fichiers</strong> utilitaire dans le panneau Cytanium supprimer <em>application\_hors connexion.</em> htm avant de tester.</span><span class="sxs-lookup"><span data-stu-id="c120b-359">If you uploaded <em>app\_offline.htm</em> before publishing, you have to use the <strong>File Manager</strong> utility in the Cytanium control panel to delete <em>app\_offline.</em>htm before you test.</span></span> <span data-ttu-id="c120b-360">Vous pouvez également au même moment supprimer le <em>.sdf</em> fichiers à partir de la <em>application\_données</em> dossier.</span><span class="sxs-lookup"><span data-stu-id="c120b-360">You can also at the same time delete the <em>.sdf</em> files from the <em>App\_Data</em> folder.</span></span>

<span data-ttu-id="c120b-361">Vous pouvez maintenant ouvrir un navigateur et accédez à l’URL de votre site public pour tester l’application de la même façon que vous l’avez fait après le déploiement sur l’environnement de test.</span><span class="sxs-lookup"><span data-stu-id="c120b-361">You can now open a browser and go to the URL of your public site to test the application the same way you did after deploying to the test environment.</span></span>

## <a name="switching-to-sql-server-express-localdb-in-development"></a><span data-ttu-id="c120b-362">Passage à SQL Server Express LocalDB dans le développement</span><span class="sxs-lookup"><span data-stu-id="c120b-362">Switching to SQL Server Express LocalDB in Development</span></span>

<span data-ttu-id="c120b-363">Comme expliqué dans la vue d’ensemble, il est généralement préférable d’utiliser le même moteur de base de données dans le développement que vous utilisez dans le test et de production.</span><span class="sxs-lookup"><span data-stu-id="c120b-363">As was explained in the Overview, it's generally best to use the same database engine in development that you use in test and production.</span></span> <span data-ttu-id="c120b-364">(N’oubliez pas que l’avantage d’utiliser SQL Server Express dans le développement est que la base de données fonctionnement est le même dans vos environnements de développement, test et production). Dans cette section vous allez définir le projet ContosoUniversity à utiliser SQL Server Express LocalDB lorsque vous exécutez l’application à partir de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="c120b-364">(Remember that the advantage to using SQL Server Express in development is that the database will work the same in your development, test, and production environments.) In this section you'll set up the ContosoUniversity project to use SQL Server Express LocalDB when you run the application from Visual Studio.</span></span>

<span data-ttu-id="c120b-365">Pour effectuer cette migration le plus simple consiste à laisser le Code First et le système d’appartenance crée les deux nouvelles bases de données de développement pour vous.</span><span class="sxs-lookup"><span data-stu-id="c120b-365">The simplest way to perform this migration is to let Code First and the membership system create both new development databases for you.</span></span> <span data-ttu-id="c120b-366">À l’aide de cette méthode pour migrer les trois étapes :</span><span class="sxs-lookup"><span data-stu-id="c120b-366">Using this method to migrate requires three steps:</span></span>

1. <span data-ttu-id="c120b-367">Modifier les chaînes de connexion pour spécifier les nouvelles bases de données SQL Express LocalDB.</span><span class="sxs-lookup"><span data-stu-id="c120b-367">Change the connection strings to specify new SQL Express LocalDB databases.</span></span>
2. <span data-ttu-id="c120b-368">Exécutez l’outil d’Administration de Site Web pour créer un utilisateur administrateur.</span><span class="sxs-lookup"><span data-stu-id="c120b-368">Run the Web Site Administration Tool to create an administrator user.</span></span> <span data-ttu-id="c120b-369">Cette opération crée la base de données d’appartenance.</span><span class="sxs-lookup"><span data-stu-id="c120b-369">This creates the membership database.</span></span>
3. <span data-ttu-id="c120b-370">Utilisez la commande de mise à jour la base de données de Migrations Code First pour créer et alimenter la base de données d’application.</span><span class="sxs-lookup"><span data-stu-id="c120b-370">Use the Code First Migrations update-database command to create and seed the application database.</span></span>

### <a name="updating-connection-strings-in-the-webconfig-file"></a><span data-ttu-id="c120b-371">La mise à jour des chaînes de connexion dans le fichier Web.config</span><span class="sxs-lookup"><span data-stu-id="c120b-371">Updating Connection Strings in the Web.config file</span></span>

<span data-ttu-id="c120b-372">Ouvrez le *Web.config* fichier et remplacez le `connectionStrings` élément avec le code suivant :</span><span class="sxs-lookup"><span data-stu-id="c120b-372">Open the *Web.config* file and replace the `connectionStrings` element with the following code:</span></span>

[!code-xml[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample8.xml)]

### <a name="creating-the-membership-database"></a><span data-ttu-id="c120b-373">Création de la base de données d’appartenance</span><span class="sxs-lookup"><span data-stu-id="c120b-373">Creating the Membership Database</span></span>

<span data-ttu-id="c120b-374">Dans **l’Explorateur de solutions**, sélectionnez le projet ContosoUniversity, puis cliquez sur **Configuration ASP.NET** dans le **projet** menu.</span><span class="sxs-lookup"><span data-stu-id="c120b-374">In **Solution Explorer**, select the ContosoUniversity project, and then click **ASP.NET Configuration** in the **Project** menu.</span></span>

<span data-ttu-id="c120b-375">Sélectionnez l’onglet sécurité.</span><span class="sxs-lookup"><span data-stu-id="c120b-375">Select the Security tab.</span></span>

<span data-ttu-id="c120b-376">Cliquez sur **créer ou gérer des rôles**, puis créez un **administrateur** rôle.</span><span class="sxs-lookup"><span data-stu-id="c120b-376">Click **Create or Manage Roles**, and then create an **Administrator** role.</span></span>

<span data-ttu-id="c120b-377">Revenez à l’onglet sécurité.</span><span class="sxs-lookup"><span data-stu-id="c120b-377">Return to the Security tab.</span></span>

<span data-ttu-id="c120b-378">Cliquez sur **créer un utilisateur**, puis sélectionnez le **administrateur** case à cocher et créez un utilisateur nommé administrateur.</span><span class="sxs-lookup"><span data-stu-id="c120b-378">Click **Create user**, and then select the **Administrator** check box and create a user named admin.</span></span>

<span data-ttu-id="c120b-379">Fermer le **outil d’Administration de Site Web**.</span><span class="sxs-lookup"><span data-stu-id="c120b-379">Close the **Web Site Administration Tool**.</span></span>

### <a name="creating-the-school-database"></a><span data-ttu-id="c120b-380">Création de la base de données School</span><span class="sxs-lookup"><span data-stu-id="c120b-380">Creating the School Database</span></span>

<span data-ttu-id="c120b-381">Ouvrez la fenêtre de Console du Gestionnaire de Package.</span><span class="sxs-lookup"><span data-stu-id="c120b-381">Open the Package Manager Console window.</span></span>

<span data-ttu-id="c120b-382">Dans le **projet par défaut** liste déroulante, sélectionnez le projet ContosoUniversity.DAL.</span><span class="sxs-lookup"><span data-stu-id="c120b-382">In the **Default project** drop-down list, select the ContosoUniversity.DAL project.</span></span>

<span data-ttu-id="c120b-383">Entrez la commande suivante :</span><span class="sxs-lookup"><span data-stu-id="c120b-383">Enter the following command:</span></span>

[!code-powershell[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample9.ps1)]

<span data-ttu-id="c120b-384">Migrations Code First s’applique à la migration initiale qui crée la base de données et applique ensuite la migration AddBirthDate, puis il exécute la méthode Seed.</span><span class="sxs-lookup"><span data-stu-id="c120b-384">Code First Migrations applies the Initial migration that creates the database and then applies the AddBirthDate migration, then it runs the Seed method.</span></span>

<span data-ttu-id="c120b-385">Exécutez le site en appuyant sur CTRL-F5.</span><span class="sxs-lookup"><span data-stu-id="c120b-385">Run the site by pressing Control-F5.</span></span> <span data-ttu-id="c120b-386">Comme vous l’avez fait pour les environnements de test et de production, exécutez le **étudiants ajouter** page, ajoutez un nouvel étudiant et puis afficher le nouvel étudiant dans la **étudiants** page.</span><span class="sxs-lookup"><span data-stu-id="c120b-386">As you did for the test and production environments, run the **Add Students** page, add a new student, and then view the new student in the **Students** page.</span></span> <span data-ttu-id="c120b-387">Cela vérifie que la base de données School a été créé et initialisé et que vous avez lu et l’accès en écriture à ce dernier.</span><span class="sxs-lookup"><span data-stu-id="c120b-387">This verifies that the School database was created and initialized and that you have read and write access to it.</span></span>

<span data-ttu-id="c120b-388">Sélectionnez le **mise à jour crédits** page et connectez-vous pour vérifier que la base de données d’appartenance a été déployée et que vous avez accès à celui-ci.</span><span class="sxs-lookup"><span data-stu-id="c120b-388">Select the **Update Credits** page and log in to verify that the membership database was deployed and that you have access to it.</span></span> <span data-ttu-id="c120b-389">Si vous n’avez pas migré vos comptes d’utilisateur, créez un compte d’administrateur, puis le **mise à jour crédits** page pour vérifier qu’elle fonctionne.</span><span class="sxs-lookup"><span data-stu-id="c120b-389">If you did not migrate your user accounts, create an administrator account and then select the **Update Credits** page to verify that it works.</span></span>

## <a name="cleaning-up-sql-server-compact-files"></a><span data-ttu-id="c120b-390">Nettoyage des fichiers SQL Server Compact</span><span class="sxs-lookup"><span data-stu-id="c120b-390">Cleaning Up SQL Server Compact Files</span></span>

<span data-ttu-id="c120b-391">Vous n’avez plus besoin de fichiers et les packages NuGet qui ont été inclus pour prendre en charge de SQL Server Compact.</span><span class="sxs-lookup"><span data-stu-id="c120b-391">You no longer need files and NuGet packages that were included to support SQL Server Compact.</span></span> <span data-ttu-id="c120b-392">Si vous le souhaitez (cette étape n’est pas obligatoire), vous pouvez nettoyer les fichiers inutiles et les références.</span><span class="sxs-lookup"><span data-stu-id="c120b-392">If you want (this step is not required), you can clean up unneeded files and references.</span></span>

<span data-ttu-id="c120b-393">Dans **l’Explorateur de solutions**, supprimer le *.sdf* fichiers à partir de la *application\_données* dossier et le *amd64* et *x86* dossiers à partir de la *bin* dossier.</span><span class="sxs-lookup"><span data-stu-id="c120b-393">In **Solution Explorer**, delete the *.sdf* files from the *App\_Data* folder and the *amd64* and *x86* folders from the *bin* folder.</span></span>

<span data-ttu-id="c120b-394">Dans **l’Explorateur de solutions**, avec le bouton droit de la solution (pas un des projets), puis cliquez sur **gérer les Packages NuGet pour la Solution**.</span><span class="sxs-lookup"><span data-stu-id="c120b-394">In **Solution Explorer**, right-click the solution (not one of the projects), and then click **Manage NuGet Packages for Solution**.</span></span>

<span data-ttu-id="c120b-395">Dans le volet gauche de la **gérer les Packages NuGet** boîte de dialogue, sélectionnez **packages installés**.</span><span class="sxs-lookup"><span data-stu-id="c120b-395">In the left pane of the **Manage NuGet Packages** dialog box, select **Installed packages**.</span></span>

<span data-ttu-id="c120b-396">Sélectionnez le **EntityFramework.SqlServerCompact** du package et cliquez sur **gérer**.</span><span class="sxs-lookup"><span data-stu-id="c120b-396">Select the **EntityFramework.SqlServerCompact** package and click **Manage**.</span></span>

<span data-ttu-id="c120b-397">Dans le **sélectionner les projets** boîte de dialogue, les deux projets sont sélectionnés.</span><span class="sxs-lookup"><span data-stu-id="c120b-397">In the **Select Projects** dialog box, both projects are selected.</span></span> <span data-ttu-id="c120b-398">Pour désinstaller le package dans les deux projets, désactivez les deux cases à cocher, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="c120b-398">To uninstall the package in both projects, clear both check boxes, then click **OK**.</span></span>

<span data-ttu-id="c120b-399">Dans la boîte de dialogue qui vous demande si vous voulez également désinstaller les packages dépendants, cliquez sur non.</span><span class="sxs-lookup"><span data-stu-id="c120b-399">In the dialog box that asks if you want to uninstall the dependent packages also, click No.</span></span> <span data-ttu-id="c120b-400">Un d’eux est le package d’Entity Framework que vous devez conserver.</span><span class="sxs-lookup"><span data-stu-id="c120b-400">One of these is the Entity Framework package that you have to keep.</span></span>

<span data-ttu-id="c120b-401">Suivez la même procédure pour désinstaller le **SqlServerCompact** package.</span><span class="sxs-lookup"><span data-stu-id="c120b-401">Follow the same procedure to uninstall the **SqlServerCompact** package.</span></span> <span data-ttu-id="c120b-402">(Les packages doivent être désinstallés dans cet ordre, car le **EntityFramework.SqlServerCompact** package varie selon le **SqlServerCompact** package.)</span><span class="sxs-lookup"><span data-stu-id="c120b-402">(The packages must be uninstalled in this order because the **EntityFramework.SqlServerCompact** package depends on the **SqlServerCompact** package.)</span></span>

<span data-ttu-id="c120b-403">Vous avez maintenant correctement migré vers SQL Server Express et complète de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c120b-403">You have now successfully migrated to SQL Server Express and full SQL Server.</span></span> <span data-ttu-id="c120b-404">Dans le prochain didacticiel, vous allez effectuer une autre modification de la base de données et vous verrez comment déployer les modifications de base de données lors de vos bases de données de test et de production utilisent SQL Server Express et complète de SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c120b-404">In the next tutorial you'll make another database change, and you'll see how to deploy database changes when your test and production databases use SQL Server Express and full SQL Server.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="c120b-405">[Précédent](deployment-to-a-hosting-provider-deploying-a-database-update-9-of-12.md)
> [Suivant](deployment-to-a-hosting-provider-deploying-a-sql-server-database-update-11-of-12.md)</span><span class="sxs-lookup"><span data-stu-id="c120b-405">[Previous](deployment-to-a-hosting-provider-deploying-a-database-update-9-of-12.md)
[Next](deployment-to-a-hosting-provider-deploying-a-sql-server-database-update-11-of-12.md)</span></span>

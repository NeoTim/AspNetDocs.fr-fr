---
uid: web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-5
title: Bien démarrer avec Entity Framework 4.0 Database First et 4 d’ASP.NET Web Forms - partie 5 | Microsoft Docs
author: tdykstra
description: L’exemple d’application web Contoso University montre comment créer des applications Web Forms ASP.NET à l’aide d’Entity Framework. L’exemple d’application est en cours...
ms.author: riande
ms.date: 12/03/2010
ms.assetid: 24ad4379-3fb2-44dc-ba59-85fe0ffcb2ae
msc.legacyurl: /web-forms/overview/older-versions-getting-started/getting-started-with-ef/the-entity-framework-and-aspnet-getting-started-part-5
msc.type: authoredcontent
ms.openlocfilehash: 3209ab3bca58e0dde90cf279732d177418b034e4
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/01/2019
ms.locfileid: "57036046"
---
<a name="getting-started-with-entity-framework-40-database-first-and-aspnet-4-web-forms---part-5"></a><span data-ttu-id="04cb4-104">Bien démarrer avec Entity Framework 4.0 Database First et 4 les Web Forms ASP.NET - partie 5</span><span class="sxs-lookup"><span data-stu-id="04cb4-104">Getting Started with Entity Framework 4.0 Database First and ASP.NET 4 Web Forms - Part 5</span></span>
====================
<span data-ttu-id="04cb4-105">par [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="04cb4-105">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

> <span data-ttu-id="04cb4-106">L’exemple d’application web Contoso University montre comment créer des applications Web Forms ASP.NET à l’aide de l’Entity Framework 4.0 et Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="04cb4-106">The Contoso University sample web application demonstrates how to create ASP.NET Web Forms applications using the Entity Framework 4.0 and Visual Studio 2010.</span></span> <span data-ttu-id="04cb4-107">Pour plus d’informations sur la série de didacticiels, consultez [le premier didacticiel de la série](the-entity-framework-and-aspnet-getting-started-part-1.md)</span><span class="sxs-lookup"><span data-stu-id="04cb4-107">For information about the tutorial series, see [the first tutorial in the series](the-entity-framework-and-aspnet-getting-started-part-1.md)</span></span>


## <a name="working-with-related-data-continued"></a><span data-ttu-id="04cb4-108">Utilisation des données associées, suite</span><span class="sxs-lookup"><span data-stu-id="04cb4-108">Working with Related Data, Continued</span></span>

<span data-ttu-id="04cb4-109">Dans le didacticiel précédent, vous avez commencé à utiliser le `EntityDataSource` contrôle pour travailler avec les données associées.</span><span class="sxs-lookup"><span data-stu-id="04cb4-109">In the previous tutorial you began to use the `EntityDataSource` control to work with related data.</span></span> <span data-ttu-id="04cb4-110">Vous affiche plusieurs niveaux de hiérarchie et modifier des données dans les propriétés de navigation.</span><span class="sxs-lookup"><span data-stu-id="04cb4-110">You displayed multiple levels of hierarchy and edited data in navigation properties.</span></span> <span data-ttu-id="04cb4-111">Dans ce didacticiel, vous allez continuer à travailler avec les données associées en ajoutant et supprimant des relations et en ajoutant une nouvelle entité qui a une relation à une entité existante.</span><span class="sxs-lookup"><span data-stu-id="04cb4-111">In this tutorial you'll continue to work with related data by adding and deleting relationships and by adding a new entity that has a relationship to an existing entity.</span></span>

<span data-ttu-id="04cb4-112">Vous allez créer une page qui ajoute des cours qui sont affectés aux départements.</span><span class="sxs-lookup"><span data-stu-id="04cb4-112">You'll create a page that adds courses that are assigned to departments.</span></span> <span data-ttu-id="04cb4-113">Les services existent déjà, et lorsque vous créez un nouveau cours, en même temps, vous devez établir une relation entre elles et d’un service existant.</span><span class="sxs-lookup"><span data-stu-id="04cb4-113">The departments already exist, and when you create a new course, at the same time you'll establish a relationship between it and an existing department.</span></span>

<span data-ttu-id="04cb4-114">[![Image02](the-entity-framework-and-aspnet-getting-started-part-5/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="04cb4-114">[![Image02](the-entity-framework-and-aspnet-getting-started-part-5/_static/image2.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image1.png)</span></span>

<span data-ttu-id="04cb4-115">Vous allez également créer une page qui fonctionne avec une relation plusieurs-à-plusieurs, affectez un instructeur à un cours (ajout d’une relation entre deux entités que vous sélectionnez) ou la suppression d’un formateur dans un cours (suppression d’une relation entre deux entités que vous avez Sélectionnez).</span><span class="sxs-lookup"><span data-stu-id="04cb4-115">You'll also create a page that works with a many-to-many relationship by assigning an instructor to a course (adding a relationship between two entities that you select) or removing an instructor from a course (removing a relationship between two entities that you select).</span></span> <span data-ttu-id="04cb4-116">Dans la base de données, ajout d’une relation entre un formateur et un cours entraîne une nouvelle ligne est ajoutée à la `CourseInstructor` tableau d’association ; la suppression d’une relation implique la suppression d’une ligne à partir de la `CourseInstructor` tableau d’association.</span><span class="sxs-lookup"><span data-stu-id="04cb4-116">In the database, adding a relationship between an instructor and a course results in a new row being added to the `CourseInstructor` association table; removing a relationship involves deleting a row from the `CourseInstructor` association table.</span></span> <span data-ttu-id="04cb4-117">Toutefois, cela dans Entity Framework en définissant les propriétés de navigation, sans faire référence à la `CourseInstructor` table explicitement.</span><span class="sxs-lookup"><span data-stu-id="04cb4-117">However, you do this in the Entity Framework by setting navigation properties, without referring to the `CourseInstructor` table explicitly.</span></span>

<span data-ttu-id="04cb4-118">[![Image01](the-entity-framework-and-aspnet-getting-started-part-5/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="04cb4-118">[![Image01](the-entity-framework-and-aspnet-getting-started-part-5/_static/image4.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image3.png)</span></span>

## <a name="adding-an-entity-with-a-relationship-to-an-existing-entity"></a><span data-ttu-id="04cb4-119">Ajout d’une entité avec une relation à une entité existante</span><span class="sxs-lookup"><span data-stu-id="04cb4-119">Adding an Entity with a Relationship to an Existing Entity</span></span>

<span data-ttu-id="04cb4-120">Créer une nouvelle page web nommée *CoursesAdd.aspx* qui utilise le *Site.Master* page maître, puis ajoutez le balisage suivant à la `Content` contrôle nommé `Content2`:</span><span class="sxs-lookup"><span data-stu-id="04cb4-120">Create a new web page named *CoursesAdd.aspx* that uses the *Site.Master* master page, and add the following markup to the `Content` control named `Content2`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample1.aspx)]

<span data-ttu-id="04cb4-121">Ce balisage crée un `EntityDataSource` contrôle qui sélectionne des cours, qui permet l’insertion et qui spécifie un gestionnaire pour le `Inserting` événement.</span><span class="sxs-lookup"><span data-stu-id="04cb4-121">This markup creates an `EntityDataSource` control that selects courses, that enables inserting, and that specifies a handler for the `Inserting` event.</span></span> <span data-ttu-id="04cb4-122">Vous allez utiliser le Gestionnaire de mise à jour le `Department` propriété de navigation quand un nouveau `Course` entité est créée.</span><span class="sxs-lookup"><span data-stu-id="04cb4-122">You'll use the handler to update the `Department` navigation property when a new `Course` entity is created.</span></span>

<span data-ttu-id="04cb4-123">Le balisage crée également un `DetailsView` contrôle à utiliser pour ajouter de nouveaux `Course` entités.</span><span class="sxs-lookup"><span data-stu-id="04cb4-123">The markup also creates a `DetailsView` control to use for adding new `Course` entities.</span></span> <span data-ttu-id="04cb4-124">Le balisage utilise des champs liés pour `Course` propriétés de l’entité.</span><span class="sxs-lookup"><span data-stu-id="04cb4-124">The markup uses bound fields for `Course` entity properties.</span></span> <span data-ttu-id="04cb4-125">Vous devez entrer le `CourseID` valeur comme il ne s’agit pas d’un champ d’ID généré par le système.</span><span class="sxs-lookup"><span data-stu-id="04cb4-125">You have to enter the `CourseID` value because this is not a system-generated ID field.</span></span> <span data-ttu-id="04cb4-126">Au lieu de cela, il est un numéro de cours qui doit être spécifié manuellement lorsque le cours est créé.</span><span class="sxs-lookup"><span data-stu-id="04cb4-126">Instead, it's a course number that must be specified manually when the course is created.</span></span>

<span data-ttu-id="04cb4-127">Vous utilisez un champ de modèle pour le `Department` propriété de navigation, car les propriétés de navigation ne peut pas être utilisées avec `BoundField` contrôles.</span><span class="sxs-lookup"><span data-stu-id="04cb4-127">You use a template field for the `Department` navigation property because navigation properties cannot be used with `BoundField` controls.</span></span> <span data-ttu-id="04cb4-128">Le champ de modèle fournit une liste déroulante pour sélectionner le département.</span><span class="sxs-lookup"><span data-stu-id="04cb4-128">The template field provides a drop-down list to select the department.</span></span> <span data-ttu-id="04cb4-129">La liste déroulante est liée à la `Departments` jeu à l’aide d’entités `Eval` plutôt que `Bind`, à nouveau, car vous ne pouvez pas lier directement des propriétés de navigation afin de les mettre à jour.</span><span class="sxs-lookup"><span data-stu-id="04cb4-129">The drop-down list is bound to the `Departments` entity set by using `Eval` rather than `Bind`, again because you cannot directly bind navigation properties in order to update them.</span></span> <span data-ttu-id="04cb4-130">Vous spécifiez un gestionnaire pour le `DropDownList` du contrôle `Init` événement afin que vous puissiez stocker une référence au contrôle pour une utilisation par le code qui met à jour le `DepartmentID` clé étrangère.</span><span class="sxs-lookup"><span data-stu-id="04cb4-130">You specify a handler for the `DropDownList` control's `Init` event so that you can store a reference to the control for use by the code that updates the `DepartmentID` foreign key.</span></span>

<span data-ttu-id="04cb4-131">Dans *CoursesAdd.aspx.cs* juste après la déclaration de classe partielle, ajoutez un champ de classe pour contenir une référence à la `DepartmentsDropDownList` contrôle :</span><span class="sxs-lookup"><span data-stu-id="04cb4-131">In *CoursesAdd.aspx.cs* just after the partial-class declaration, add a class field to hold a reference to the `DepartmentsDropDownList` control:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample2.cs)]

<span data-ttu-id="04cb4-132">Ajoutez un gestionnaire pour le `DepartmentsDropDownList` du contrôle `Init` événement afin que vous puissiez stocker une référence au contrôle.</span><span class="sxs-lookup"><span data-stu-id="04cb4-132">Add a handler for the `DepartmentsDropDownList` control's `Init` event so that you can store a reference to the control.</span></span> <span data-ttu-id="04cb4-133">Cela vous permet d’obtenir la valeur de l’utilisateur a entré et l’utiliser pour mettre à jour le `DepartmentID` valeur de la `Course` entité.</span><span class="sxs-lookup"><span data-stu-id="04cb4-133">This lets you get the value the user has entered and use it to update the `DepartmentID` value of the `Course` entity.</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample3.cs)]

<span data-ttu-id="04cb4-134">Ajoutez un gestionnaire pour le `DetailsView` du contrôle `Inserting` événement :</span><span class="sxs-lookup"><span data-stu-id="04cb4-134">Add a handler for the `DetailsView` control's `Inserting` event:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample4.cs)]

<span data-ttu-id="04cb4-135">Lorsque l’utilisateur clique sur `Insert`, le `Inserting` événement est déclenché avant le nouvel enregistrement est inséré.</span><span class="sxs-lookup"><span data-stu-id="04cb4-135">When the user clicks `Insert`, the `Inserting` event is raised before the new record is inserted.</span></span> <span data-ttu-id="04cb4-136">Obtient le code dans le gestionnaire le `DepartmentID` à partir de la `DropDownList` contrôler et l’utilise pour définir la valeur qui sera utilisée pour le `DepartmentID` propriété de la `Course` entité.</span><span class="sxs-lookup"><span data-stu-id="04cb4-136">The code in the handler gets the `DepartmentID` from the `DropDownList` control and uses it to set the value that will be used for the `DepartmentID` property of the `Course` entity.</span></span>

<span data-ttu-id="04cb4-137">Entity Framework se chargera de l’ajout de ce cours à la `Courses` propriété de navigation associé `Department` entité.</span><span class="sxs-lookup"><span data-stu-id="04cb4-137">The Entity Framework will take care of adding this course to the `Courses` navigation property of the associated `Department` entity.</span></span> <span data-ttu-id="04cb4-138">Il ajoute également le service pour le `Department` propriété de navigation de la `Course` entité.</span><span class="sxs-lookup"><span data-stu-id="04cb4-138">It also adds the department to the `Department` navigation property of the `Course` entity.</span></span>

<span data-ttu-id="04cb4-139">Exécutez la page.</span><span class="sxs-lookup"><span data-stu-id="04cb4-139">Run the page.</span></span>

<span data-ttu-id="04cb4-140">[![Image02](the-entity-framework-and-aspnet-getting-started-part-5/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="04cb4-140">[![Image02](the-entity-framework-and-aspnet-getting-started-part-5/_static/image6.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image5.png)</span></span>

<span data-ttu-id="04cb4-141">Entrez un ID, un titre, un nombre de crédits, sélectionnez un service, puis cliquez sur **insérer**.</span><span class="sxs-lookup"><span data-stu-id="04cb4-141">Enter an ID, a title, a number of credits, and select a department, then click **Insert**.</span></span>

<span data-ttu-id="04cb4-142">Exécutez le *Courses.aspx* page, puis sélectionnez le même service pour voir le nouveau cours.</span><span class="sxs-lookup"><span data-stu-id="04cb4-142">Run the *Courses.aspx* page, and select the same department to see the new course.</span></span>

<span data-ttu-id="04cb4-143">[![Image03](the-entity-framework-and-aspnet-getting-started-part-5/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="04cb4-143">[![Image03](the-entity-framework-and-aspnet-getting-started-part-5/_static/image8.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image7.png)</span></span>

## <a name="working-with-many-to-many-relationships"></a><span data-ttu-id="04cb4-144">Utilisation des relations plusieurs-à-plusieurs</span><span class="sxs-lookup"><span data-stu-id="04cb4-144">Working with Many-to-Many Relationships</span></span>

<span data-ttu-id="04cb4-145">La relation entre la `Courses` jeu d’entités et les `People` jeu d’entités est une relation plusieurs-à-plusieurs.</span><span class="sxs-lookup"><span data-stu-id="04cb4-145">The relationship between the `Courses` entity set and the `People` entity set is a many-to-many relationship.</span></span> <span data-ttu-id="04cb4-146">Un `Course` entité a une propriété de navigation nommée `People` qui peut contenir zéro, un ou plusieurs liées `Person` entités (représentant des formateurs affectés pour enseigner ce cours).</span><span class="sxs-lookup"><span data-stu-id="04cb4-146">A `Course` entity has a navigation property named `People` that can contain zero, one, or more related `Person` entities (representing instructors assigned to teach that course).</span></span> <span data-ttu-id="04cb4-147">Et un `Person` entité a une propriété de navigation nommée `Courses` qui peut contenir zéro, un ou plusieurs liées `Course` entités (représentant des cours de ce formateur est affecté à enseigner).</span><span class="sxs-lookup"><span data-stu-id="04cb4-147">And a `Person` entity has a navigation property named `Courses` that can contain zero, one, or more related `Course` entities (representing courses that instructor is assigned to teach).</span></span> <span data-ttu-id="04cb4-148">Un formateur peut couvrir plusieurs cours, et un cours peut être animé par plusieurs formateurs.</span><span class="sxs-lookup"><span data-stu-id="04cb4-148">One instructor might teach multiple courses, and one course might be taught by multiple instructors.</span></span> <span data-ttu-id="04cb4-149">Dans cette section de la procédure pas à pas, vous allez ajouter et supprimer des relations entre `Person` et `Course` entités en mettant à jour les propriétés de navigation des entités associées.</span><span class="sxs-lookup"><span data-stu-id="04cb4-149">In this section of the walkthrough, you'll add and remove relationships between `Person` and `Course` entities by updating the navigation properties of the related entities.</span></span>

<span data-ttu-id="04cb4-150">Créer une nouvelle page web nommée *InstructorsCourses.aspx* qui utilise le *Site.Master* page maître, puis ajoutez le balisage suivant à la `Content` contrôle nommé `Content2`:</span><span class="sxs-lookup"><span data-stu-id="04cb4-150">Create a new web page named *InstructorsCourses.aspx* that uses the *Site.Master* master page, and add the following markup to the `Content` control named `Content2`:</span></span>

[!code-aspx[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample5.aspx)]

<span data-ttu-id="04cb4-151">Ce balisage crée un `EntityDataSource` contrôle qui Récupère le nom et `PersonID` de `Person` entités pour les formateurs.</span><span class="sxs-lookup"><span data-stu-id="04cb4-151">This markup creates an `EntityDataSource` control that retrieves the name and `PersonID` of `Person` entities for instructors.</span></span> <span data-ttu-id="04cb4-152">Un `DropDrownList` contrôle est lié à la `EntityDataSource` contrôle.</span><span class="sxs-lookup"><span data-stu-id="04cb4-152">A `DropDrownList` control is bound to the `EntityDataSource` control.</span></span> <span data-ttu-id="04cb4-153">Le `DropDownList` contrôle spécifie un gestionnaire pour le `DataBound` événement.</span><span class="sxs-lookup"><span data-stu-id="04cb4-153">The `DropDownList` control specifies a handler for the `DataBound` event.</span></span> <span data-ttu-id="04cb4-154">Vous allez utiliser ce gestionnaire pour lier les deux listes déroulantes, qui affichent des cours.</span><span class="sxs-lookup"><span data-stu-id="04cb4-154">You'll use this handler to databind the two drop-down lists that display courses.</span></span>

<span data-ttu-id="04cb4-155">Le balisage crée également le groupe de contrôles à utiliser pour l’affectation d’un cours au formateur sélectionné suivant :</span><span class="sxs-lookup"><span data-stu-id="04cb4-155">The markup also creates the following group of controls to use for assigning a course to the selected instructor:</span></span>

- <span data-ttu-id="04cb4-156">Un `DropDownList` contrôle pour la sélection d’un cours à affecter.</span><span class="sxs-lookup"><span data-stu-id="04cb4-156">A `DropDownList` control for selecting a course to assign.</span></span> <span data-ttu-id="04cb4-157">Ce contrôle est renseigné avec les cours qui ne sont pas actuellement affectés au formateur sélectionné.</span><span class="sxs-lookup"><span data-stu-id="04cb4-157">This control will be populated with courses that are currently not assigned to the selected instructor.</span></span>
- <span data-ttu-id="04cb4-158">Un `Button` pour lancer l’affectation.</span><span class="sxs-lookup"><span data-stu-id="04cb4-158">A `Button` control to initiate the assignment.</span></span>
- <span data-ttu-id="04cb4-159">Un `Label` contrôle pour afficher un message d’erreur si l’affectation échoue.</span><span class="sxs-lookup"><span data-stu-id="04cb4-159">A `Label` control to display an error message if the assignment fails.</span></span>

<span data-ttu-id="04cb4-160">Enfin, le balisage crée également un groupe de contrôles à utiliser pour la suppression d’un cours à partir de l’instructeur sélectionné.</span><span class="sxs-lookup"><span data-stu-id="04cb4-160">Finally, the markup also creates a group of controls to use for removing a course from the selected instructor.</span></span>

<span data-ttu-id="04cb4-161">Dans *InstructorsCourses.aspx.cs*, ajoutez une instruction :</span><span class="sxs-lookup"><span data-stu-id="04cb4-161">In *InstructorsCourses.aspx.cs*, add a using statement:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample6.cs)]

<span data-ttu-id="04cb4-162">Ajoutez une méthode pour remplir les deux listes déroulantes qui affichent des cours :</span><span class="sxs-lookup"><span data-stu-id="04cb4-162">Add a method for populating the two drop-down lists that display courses:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample7.cs)]

<span data-ttu-id="04cb4-163">Ce code obtient tous les cours à partir de la `Courses` entité définie et obtient les cours à partir de la `Courses` propriété de navigation de la `Person` entité pour le formateur sélectionné.</span><span class="sxs-lookup"><span data-stu-id="04cb4-163">This code gets all courses from the `Courses` entity set and gets the courses from the `Courses` navigation property of the `Person` entity for the selected instructor.</span></span> <span data-ttu-id="04cb4-164">Ensuite, il détermine quels cours sont affectés à ce formateur et remplit les listes déroulantes en conséquence.</span><span class="sxs-lookup"><span data-stu-id="04cb4-164">It then determines which courses are assigned to that instructor and populates the drop-down lists accordingly.</span></span>

<span data-ttu-id="04cb4-165">Ajoutez un gestionnaire pour le `Assign` du bouton `Click` événement :</span><span class="sxs-lookup"><span data-stu-id="04cb4-165">Add a handler for the `Assign` button's `Click` event:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample8.cs)]

<span data-ttu-id="04cb4-166">Ce code obtient le `Person` Obtient de l’entité pour l’enseignant sélectionné, le `Course` entité pour le cours sélectionné et ajoute le cours sélectionné à la `Courses` propriété de navigation de l’instructeur `Person` entité.</span><span class="sxs-lookup"><span data-stu-id="04cb4-166">This code gets the `Person` entity for the selected instructor, gets the `Course` entity for the selected course, and adds the selected course to the `Courses` navigation property of the instructor's `Person` entity.</span></span> <span data-ttu-id="04cb4-167">Ensuite, il enregistre les modifications apportées à la base de données et remplit à nouveau les listes déroulantes, donc les résultats peuvent être consultés immédiatement.</span><span class="sxs-lookup"><span data-stu-id="04cb4-167">It then saves the changes to the database and repopulates the drop-down lists so the results can be seen immediately.</span></span>

<span data-ttu-id="04cb4-168">Ajoutez un gestionnaire pour le `Remove` du bouton `Click` événement :</span><span class="sxs-lookup"><span data-stu-id="04cb4-168">Add a handler for the `Remove` button's `Click` event:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample9.cs)]

<span data-ttu-id="04cb4-169">Ce code obtient le `Person` Obtient de l’entité pour l’enseignant sélectionné, le `Course` entité pour le cours sélectionné et supprime le cours sélectionné à partir de la `Person` l’entité `Courses` propriété de navigation.</span><span class="sxs-lookup"><span data-stu-id="04cb4-169">This code gets the `Person` entity for the selected instructor, gets the `Course` entity for the selected course, and removes the selected course from the `Person` entity's `Courses` navigation property.</span></span> <span data-ttu-id="04cb4-170">Ensuite, il enregistre les modifications apportées à la base de données et remplit à nouveau les listes déroulantes, donc les résultats peuvent être consultés immédiatement.</span><span class="sxs-lookup"><span data-stu-id="04cb4-170">It then saves the changes to the database and repopulates the drop-down lists so the results can be seen immediately.</span></span>

<span data-ttu-id="04cb4-171">Ajouter du code pour le `Page_Load` méthode qui garantit que les messages d’erreur ne sont pas visibles lorsque aucune erreur n’est à signaler et ajoutez des gestionnaires pour les `DataBound` et `SelectedIndexChanged` événements de la liste déroulante de formateurs pour remplir les listes déroulantes de cours :</span><span class="sxs-lookup"><span data-stu-id="04cb4-171">Add code to the `Page_Load` method that makes sure the error messages are not visible when there's no error to report, and add handlers for the `DataBound` and `SelectedIndexChanged` events of the instructors drop-down list to populate the courses drop-down lists:</span></span>

[!code-csharp[Main](the-entity-framework-and-aspnet-getting-started-part-5/samples/sample10.cs)]

<span data-ttu-id="04cb4-172">Exécutez la page.</span><span class="sxs-lookup"><span data-stu-id="04cb4-172">Run the page.</span></span>

<span data-ttu-id="04cb4-173">[![Image01](the-entity-framework-and-aspnet-getting-started-part-5/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="04cb4-173">[![Image01](the-entity-framework-and-aspnet-getting-started-part-5/_static/image10.png)](the-entity-framework-and-aspnet-getting-started-part-5/_static/image9.png)</span></span>

<span data-ttu-id="04cb4-174">Sélectionnez un formateur.</span><span class="sxs-lookup"><span data-stu-id="04cb4-174">Select an instructor.</span></span> <span data-ttu-id="04cb4-175">Le <strong>affecter un cours</strong> liste déroulante affiche les cours ne traitant de l’instructeur, et le <strong>supprimer un cours</strong> liste déroulante affiche les cours auxquels le formateur est déjà affecté à.</span><span class="sxs-lookup"><span data-stu-id="04cb4-175">The <strong>Assign a Course</strong> drop-down list displays the courses that the instructor doesn't teach, and the <strong>Remove a Course</strong> drop-down list displays the courses that the instructor is already assigned to.</span></span> <span data-ttu-id="04cb4-176">Dans le <strong>affecter un cours</strong> section, sélectionnez un cours, puis sur <strong>affecter</strong>.</span><span class="sxs-lookup"><span data-stu-id="04cb4-176">In the <strong>Assign a Course</strong> section, select a course and then click <strong>Assign</strong>.</span></span> <span data-ttu-id="04cb4-177">Le cours se déplace vers le <strong>supprimer un cours</strong> liste déroulante.</span><span class="sxs-lookup"><span data-stu-id="04cb4-177">The course moves to the <strong>Remove a Course</strong> drop-down list.</span></span> <span data-ttu-id="04cb4-178">Sélectionnez un cours dans le <strong>supprimer un cours</strong> section et cliquez sur <strong>supprimer</strong><em>.</em></span><span class="sxs-lookup"><span data-stu-id="04cb4-178">Select a course in the <strong>Remove a Course</strong> section and click <strong>Remove</strong><em>.</em></span></span> <span data-ttu-id="04cb4-179">Le cours se déplace vers le <strong>affecter un cours</strong> liste déroulante.</span><span class="sxs-lookup"><span data-stu-id="04cb4-179">The course moves to the <strong>Assign a Course</strong> drop-down list.</span></span>

<span data-ttu-id="04cb4-180">Vous avez maintenant vu certaines autres façons d’utiliser des données liées.</span><span class="sxs-lookup"><span data-stu-id="04cb4-180">You have now seen some more ways to work with related data.</span></span> <span data-ttu-id="04cb4-181">Dans ce didacticiel, vous allez apprendre à utiliser l’héritage dans le modèle de données pour améliorer la facilité de maintenance de votre application.</span><span class="sxs-lookup"><span data-stu-id="04cb4-181">In the following tutorial, you'll learn how to use inheritance in the data model to improve the maintainability of your application.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="04cb4-182">[Précédent](the-entity-framework-and-aspnet-getting-started-part-4.md)
> [Suivant](the-entity-framework-and-aspnet-getting-started-part-6.md)</span><span class="sxs-lookup"><span data-stu-id="04cb4-182">[Previous](the-entity-framework-and-aspnet-getting-started-part-4.md)
[Next](the-entity-framework-and-aspnet-getting-started-part-6.md)</span></span>

---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/configuring-the-production-web-application-to-use-the-production-database-vb
title: Configuration de l’application Web de production pour utiliser la base de données de production (VB) | Microsoft Docs
author: rick-anderson
description: Comme indiqué dans les didacticiels précédents, il n’est pas rare que les informations de configuration diffèrent entre les environnements de développement et de production. Il s’agit de es...
ms.author: riande
ms.date: 04/23/2009
ms.assetid: a64a7aa0-6608-449e-83bf-1ef8cceee504
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/configuring-the-production-web-application-to-use-the-production-database-vb
msc.type: authoredcontent
ms.openlocfilehash: 7fe4f545a76992ad687827af447d9a9e95bea73f
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/28/2019
ms.locfileid: "74633663"
---
# <a name="configuring-the-production-web-application-to-use-the-production-database-vb"></a><span data-ttu-id="4fe9d-104">Configuration de l’application web de production pour l’utilisation de la base de données de production (VB)</span><span class="sxs-lookup"><span data-stu-id="4fe9d-104">Configuring the Production Web Application to Use the Production Database (VB)</span></span>

<span data-ttu-id="4fe9d-105">par [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="4fe9d-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="4fe9d-106">[Télécharger le code](https://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_08_VB.zip) ou [Télécharger le PDF](https://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial08_DBConfig_vb.pdf)</span><span class="sxs-lookup"><span data-stu-id="4fe9d-106">[Download Code](https://download.microsoft.com/download/E/6/F/E6FE3A1F-EE3A-4119-989A-33D1A9F6F6DD/ASPNET_Hosting_Tutorial_08_VB.zip) or [Download PDF](https://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial08_DBConfig_vb.pdf)</span></span>

> <span data-ttu-id="4fe9d-107">Comme indiqué dans les didacticiels précédents, il n’est pas rare que les informations de configuration diffèrent entre les environnements de développement et de production.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-107">As discussed in earlier tutorials, it is not uncommon for configuration information to differ between the development and production environments.</span></span> <span data-ttu-id="4fe9d-108">Cela est particulièrement vrai pour les applications Web pilotées par les données, car les chaînes de connexion de base de données diffèrent entre les environnements de développement et de production.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-108">This is especially true for data-driven web applications, as the database connection strings differ between the development and production environments.</span></span> <span data-ttu-id="4fe9d-109">Ce didacticiel explore les différentes façons de configurer l’environnement de production pour inclure la chaîne de connexion appropriée plus en détail.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-109">This tutorial explores ways to configure the production environment to include the appropriate connection string in more detail.</span></span>

## <a name="introduction"></a><span data-ttu-id="4fe9d-110">Introduction</span><span class="sxs-lookup"><span data-stu-id="4fe9d-110">Introduction</span></span>

<span data-ttu-id="4fe9d-111">Les applications Web pilotées par les données utilisent généralement une base de données différente en cas de développement que dans un environnement de production.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-111">Data-driven web applications usually use a different database when in development than when in production.</span></span> <span data-ttu-id="4fe9d-112">Pour les applications hébergées par un fournisseur d’hébergement Web et développées localement, la base de données de développement réside généralement sur l’ordinateur du développeur, tandis que la base de données de production est hébergée sur un serveur de base de données au niveau de l’installation de l’entreprise d’hébergement Web.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-112">For applications hosted by a web host provider and developed locally, the development database typically resides on the developer s computer while the production database is hosted on a database server at the web hosting company s facility.</span></span> <span data-ttu-id="4fe9d-113">Le déploiement d’une application Web pilotée par les données implique la copie de la base de données de développement sur le serveur de base de données de production.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-113">Deploying a data-driven web application entails copying the development database to the production database server.</span></span> <span data-ttu-id="4fe9d-114">Dans le didacticiel précédent, nous avons examiné les façons d’accomplir cette étape.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-114">In the previous tutorial we looked at ways to accomplish this step.</span></span>

<span data-ttu-id="4fe9d-115">L’application Web utilise les informations contenues dans une *chaîne de connexion* pour établir une connexion avec la base de données.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-115">The web application uses the information in a *connection string* to establish a connection with the database.</span></span> <span data-ttu-id="4fe9d-116">La chaîne de connexion, qui est généralement stockée dans `Web.config`, spécifie le nom du serveur de base de données, le nom de la base de données, le contexte de sécurité et d’autres informations.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-116">The connection string, which is typically stored in `Web.config`, specifies the database server name, the name of the database, the security context, and other information.</span></span> <span data-ttu-id="4fe9d-117">Étant donné que la base de données utilisée par l’application Web varie selon que l’application Web s’exécute dans les environnements de développement ou de production, les chaînes de connexion doivent être différentes entre les deux environnements.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-117">Because the database used by the web application depends on whether the web application is running in the development or production environments, the connection strings must differ between the two environments.</span></span>

<span data-ttu-id="4fe9d-118">Il n’est pas rare que les informations de configuration diffèrent entre les environnements de développement et de production.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-118">It is not uncommon for configuration information to differ between the development and production environments.</span></span> <span data-ttu-id="4fe9d-119">Les *différences de configuration courantes entre* les didacticiels de développement et de production ont présenté des techniques permettant de gérer des informations de configuration distinctes entre ces deux environnements, ainsi qu’une brève discussion sur les chaînes de connexion de base de données.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-119">The *Common Configuration Differences Between Development and Production* tutorial discussed techniques for maintaining separate configuration information between these two environments, as well as a brief discussion on database connection strings.</span></span> <span data-ttu-id="4fe9d-120">Ce didacticiel explore les différentes façons de configurer l’environnement de production pour inclure la chaîne de connexion appropriée plus en détail.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-120">This tutorial explores ways to configure the production environment to include the appropriate connection string in more detail.</span></span>

## <a name="examining-the-connection-string-information"></a><span data-ttu-id="4fe9d-121">Examen des informations de la chaîne de connexion</span><span class="sxs-lookup"><span data-stu-id="4fe9d-121">Examining the Connection String Information</span></span>

<span data-ttu-id="4fe9d-122">La chaîne de connexion utilisée par l’application Web de révisions de livres est stockée dans le fichier de configuration de l’application, `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-122">The connection string used by the Book Reviews web application is stored in the application s configuration file, `Web.config`.</span></span> <span data-ttu-id="4fe9d-123">`Web.config` comprend une section spéciale pour le stockage des chaînes de connexion, nommées avec prénoms [&lt;connectionStrings&gt;](https://msdn.microsoft.com/library/bf7sd233.aspx).</span><span class="sxs-lookup"><span data-stu-id="4fe9d-123">`Web.config` includes a special section for storing connection strings, aptly named [&lt;connectionStrings&gt;](https://msdn.microsoft.com/library/bf7sd233.aspx).</span></span> <span data-ttu-id="4fe9d-124">Le fichier `Web.config` pour le site Web de révisions de livres a une chaîne de connexion définie dans cette section nommée `ReviewsConnectionString`:</span><span class="sxs-lookup"><span data-stu-id="4fe9d-124">The `Web.config` file for the Book Reviews website has one connection string defined in this section named `ReviewsConnectionString`:</span></span>

[!code-xml[Main](configuring-the-production-web-application-to-use-the-production-database-vb/samples/sample1.xml)]

<span data-ttu-id="4fe9d-125">Chaîne de connexion-source de données = .\SQLEXPRESS ; AttachDbFilename = | DataDirectory | \Reviews.mdf ; Integrated Security = true ; User Instance = true-est composé d’un certain nombre d’options et de valeurs, avec des paires option/valeur délimitées par un point-virgule et chaque option et valeur délimitée par un signe égal.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-125">The connection string - Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Reviews.mdf;Integrated Security=True;User Instance=True - is composed of a number of options and values, with option/value pairs delimited by a semicolon and each option and value delimited by an equals sign.</span></span> <span data-ttu-id="4fe9d-126">Les quatre options utilisées dans cette chaîne de connexion sont les suivantes :</span><span class="sxs-lookup"><span data-stu-id="4fe9d-126">The four options used in this connection string are:</span></span>

- <span data-ttu-id="4fe9d-127">`Data Source` : spécifie l’emplacement du serveur de base de données et le nom de l’instance du serveur de base de données (le cas échéant).</span><span class="sxs-lookup"><span data-stu-id="4fe9d-127">`Data Source` - specifies the location of the database server and the database server instance name (if any).</span></span> <span data-ttu-id="4fe9d-128">La valeur, `.\SQLEXPRESS`, est un exemple où il existe un serveur de base de données et un nom d’instance.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-128">The value, `.\SQLEXPRESS`, is an example where there is a database server and an instance name.</span></span> <span data-ttu-id="4fe9d-129">La période spécifie que le serveur de base de données se trouve sur le même ordinateur que l’application. le nom de l’instance est `SQLEXPRESS`.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-129">The period specifies that the database server is on the same computer as the application; the instance name is `SQLEXPRESS`.</span></span>
- <span data-ttu-id="4fe9d-130">`AttachDbFilename` : spécifie l’emplacement du fichier de base de données.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-130">`AttachDbFilename` - specifies the location of the database file.</span></span> <span data-ttu-id="4fe9d-131">La valeur contient l’espace réservé `|DataDirectory|`, qui est résolu en chemin d’accès complet du dossier de l’application s `App_Data` au moment de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-131">The value contains the placeholder `|DataDirectory|`, which is resolved to the full path of the application s `App_Data` folder at runtime.</span></span>
- <span data-ttu-id="4fe9d-132">`Integrated Security` : valeur booléenne qui indique s’il faut utiliser un nom d’utilisateur/mot de passe spécifié lors de la connexion à la base de données (false) ou les informations d’identification du compte Windows actuel (true).</span><span class="sxs-lookup"><span data-stu-id="4fe9d-132">`Integrated Security` - a Boolean value that indicates whether to use a specified username/password when connecting to the database (false) or the current Windows account credentials (true).</span></span>
- <span data-ttu-id="4fe9d-133">`User Instance` : option de configuration spécifique aux éditions SQL Server Express qui indique s’il faut autoriser les utilisateurs non-administrateurs sur l’ordinateur local à se connecter et à se connecter à une base de données SQL Server Express Edition.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-133">`User Instance` - a configuration option specific to the SQL Server Express Editions that indicates whether to allow non-Administrative users on the local computer attach and connect to a SQL Server Express Edition database.</span></span> <span data-ttu-id="4fe9d-134">Pour plus d’informations sur ce paramètre, consultez [SQL Server Express des instances d’utilisateur](https://msdn.microsoft.com/library/ms254504.aspx) .</span><span class="sxs-lookup"><span data-stu-id="4fe9d-134">See [SQL Server Express User Instances](https://msdn.microsoft.com/library/ms254504.aspx) for more information on this setting.</span></span>

<span data-ttu-id="4fe9d-135">Les options de chaîne de connexion autorisées dépendent de la base de données à laquelle vous vous connectez et du fournisseur de base de données [ADO.net](http://ADO.NET) utilisé.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-135">The allowable connection string options depend on the database you are connecting to and the [ADO.NET](http://ADO.NET) database provider being used.</span></span> <span data-ttu-id="4fe9d-136">Par exemple, la chaîne de connexion pour la connexion à une base de données Microsoft SQL Server diffère de celle utilisée pour se connecter à une base de données Oracle.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-136">For example, the connection string for connecting to a Microsoft SQL Server database differs from that used to connect to an Oracle database.</span></span> <span data-ttu-id="4fe9d-137">De même, la connexion à une base de données Microsoft SQL Server à l’aide du fournisseur SqlClient utilise une chaîne de connexion différente de celle utilisée lors de l’utilisation du fournisseur OLE-DB.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-137">Likewise, connecting to a Microsoft SQL Server database using the SqlClient provider uses a different connection string than when using the OLE-DB provider.</span></span>

<span data-ttu-id="4fe9d-138">Vous pouvez créer manuellement la chaîne de connexion de base de données à l’aide d’un site tel que [connectionStrings.com](http://www.connectionstrings.com/) comme ressource pour les options disponibles.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-138">You can build the database connection string by hand using a site like [ConnectionStrings.com](http://www.connectionstrings.com/) as a resource for what options are available.</span></span> <span data-ttu-id="4fe9d-139">Toutefois, une approche plus simple consiste à ajouter la base de données au Explorateur de serveurs dans Visual Studio, puis à récupérer la chaîne de connexion à partir du Fenêtre Propriétés.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-139">However, an easier approach is to add the database to the Server Explorer in Visual Studio and then to grab the connection string from the Properties window.</span></span> <span data-ttu-id="4fe9d-140">Essayons d’utiliser cette dernière technique pour construire la chaîne de connexion au serveur de base de données de production.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-140">Let s use this latter technique for constructing the connection string to the production database server.</span></span>

<span data-ttu-id="4fe9d-141">Ouvrez Visual Studio, puis accédez à la fenêtre de Explorateur de serveurs (dans Visual Web Developer, cette fenêtre est appelée explorateur de base de données).</span><span class="sxs-lookup"><span data-stu-id="4fe9d-141">Open Visual Studio and then navigate to the Server Explorer window (in Visual Web Developer, this window is called Database Explorer).</span></span> <span data-ttu-id="4fe9d-142">Cliquez avec le bouton droit sur l’option connexions de données et choisissez l’option Ajouter une connexion dans le menu contextuel.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-142">Right-click on the Data Connections option and choose the Add Connection option from the context menu.</span></span> <span data-ttu-id="4fe9d-143">Cela fait apparaître l’Assistant illustré à la figure 1.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-143">This brings up the wizard shown in Figure 1.</span></span> <span data-ttu-id="4fe9d-144">Choisissez la source de données appropriée, puis cliquez sur continuer.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-144">Choose the appropriate data source and click Continue.</span></span>

<span data-ttu-id="4fe9d-145">[![choisissez d’ajouter une nouvelle base de données au Explorateur de serveurs](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image2.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image1.jpg)</span><span class="sxs-lookup"><span data-stu-id="4fe9d-145">[![Choose to Add a New Database to the Server Explorer](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image2.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image1.jpg)</span></span> 

<span data-ttu-id="4fe9d-146">**Figure 1**: choisir d’ajouter une nouvelle base de données au Explorateur de serveurs ([cliquez pour afficher l’image en taille réelle](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image3.jpg))</span><span class="sxs-lookup"><span data-stu-id="4fe9d-146">**Figure 1**: Choose to Add a New Database to the Server Explorer ([Click to view full-size image](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image3.jpg))</span></span>

<span data-ttu-id="4fe9d-147">Ensuite, spécifiez les différentes informations de connexion à la base de données (voir la figure 2).</span><span class="sxs-lookup"><span data-stu-id="4fe9d-147">Next, specify the various database connection information (see Figure 2).</span></span> <span data-ttu-id="4fe9d-148">Lorsque vous vous êtes inscrit auprès de votre société d’hébergement Web, vous devez fournir des informations sur la façon de se connecter à la base de données (le nom du serveur de base de données, le nom de la base de données, le nom d’utilisateur et le mot de passe à utiliser pour se connecter à la base de données, etc.).</span><span class="sxs-lookup"><span data-stu-id="4fe9d-148">When you signed up with your web hosting company they should have provided information on how to connect to the database - the database server name, the database name, the username and password to use to connect to the database, and so on.</span></span> <span data-ttu-id="4fe9d-149">Après avoir entré ces informations, cliquez sur OK pour terminer cet Assistant et ajouter la base de données au Explorateur de serveurs.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-149">After entering this information click OK to complete this wizard and to add the database to the Server Explorer.</span></span>

<span data-ttu-id="4fe9d-150">[![spécifier les informations de connexion à la base de données](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image5.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image4.jpg)</span><span class="sxs-lookup"><span data-stu-id="4fe9d-150">[![Specify the Database Connection Information](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image5.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image4.jpg)</span></span> 

<span data-ttu-id="4fe9d-151">**Figure 2**: spécifier les informations de connexion à la base de données ([cliquez pour afficher l’image en taille réelle](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image6.jpg))</span><span class="sxs-lookup"><span data-stu-id="4fe9d-151">**Figure 2**: Specify the Database Connection Information ([Click to view full-size image](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image6.jpg))</span></span>

<span data-ttu-id="4fe9d-152">La base de données de l’environnement de production doit maintenant être listée dans le Explorateur de serveurs.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-152">The production environment database should now be listed in the Server Explorer.</span></span> <span data-ttu-id="4fe9d-153">Sélectionnez la base de données à partir du Explorateur de serveurs et accédez à la Fenêtre Propriétés.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-153">Select the database from the Server Explorer and go to the Properties window.</span></span> <span data-ttu-id="4fe9d-154">Vous y trouverez une propriété nommée chaîne de connexion avec la chaîne de connexion de la base de données.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-154">There you will find a property named Connection String with the database s connection string.</span></span> <span data-ttu-id="4fe9d-155">En supposant que vous utilisez une base de données Microsoft SQL Server en production et le fournisseur SqlClient, votre chaîne de connexion doit ressembler à ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="4fe9d-155">Assuming you are using a Microsoft SQL Server database on production and the SqlClient provider your connection string should look similar to the following:</span></span>

<span data-ttu-id="4fe9d-156"><strong>Source de données =<em>ServerName</em>; Catalogue initial =<em>DatabaseName</em>; Persist Security Info = true ; ID utilisateur =<em>nom d'</em>utilisateur ; Password =*mot de passe</strong>*</span><span class="sxs-lookup"><span data-stu-id="4fe9d-156"><strong>Data Source=<em>serverName</em>; Initial Catalog=<em>databaseName</em>; Persist Security Info=True; User ID=<em>username</em>; Password=*password</strong>*</span></span>

<span data-ttu-id="4fe9d-157">Où *ServerName*, *DatabaseName*, *username*et *Password* se composent des valeurs pour le nom du serveur de base de données, le nom de la base de données et le nom d’utilisateur et le mot de passe qui vous sont fournis par votre société de l’hôte Web.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-157">Where *serverName*, *databaseName*, *username*, and *password* are with the values for the database server name, the database name, and the username and password supplied to you by your web host company.</span></span>

## <a name="deploying-the-book-reviews-web-application"></a><span data-ttu-id="4fe9d-158">Déploiement de l’application Web de révisions de livres</span><span class="sxs-lookup"><span data-stu-id="4fe9d-158">Deploying the Book Reviews Web Application</span></span>

<span data-ttu-id="4fe9d-159">Le didacticiel précédent a parcouru la copie de la base de données de développement vers l’environnement de production, mais n’explore pas le déploiement de l’application pilotée par les données.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-159">The preceding tutorial stepped through copying the development database to the production environment, but did not explore deploying the data-driven application.</span></span> <span data-ttu-id="4fe9d-160">À ce stade, l’environnement de production contient la base de données, mais utilise la version de l’application de révisions de livres avec des révisions statiques.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-160">At this point the production environment contains the database but is using the version of the Book Reviews application with static reviews.</span></span> <span data-ttu-id="4fe9d-161">Nous devons déployer la nouvelle application pilotée par les données sur le serveur de production, ainsi que les informations de configuration mises à jour.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-161">We need to deploy the new, data-driven application to the production server along with the updated configuration information.</span></span>

<span data-ttu-id="4fe9d-162">Prenez un moment pour déployer l’application pilotée par les données de l’environnement de développement vers la production.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-162">Take a moment to deploy the data-driven application from the development environment to production.</span></span> <span data-ttu-id="4fe9d-163">Ce processus a été abordé en détail dans les didacticiels précédents.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-163">This process was covered in detail in previous tutorials.</span></span> <span data-ttu-id="4fe9d-164">Si vous avez besoin d’un actualisateur, consultez les didacticiels *déploiement de votre site Web à l’aide d’un client FTP* ou *déploiement de votre site Web à l’aide de Visual Studio* .</span><span class="sxs-lookup"><span data-stu-id="4fe9d-164">If you need a refresher, see the *Deploying Your Website Using an FTP Client* or the *Deploying Your Website Using Visual Studio* tutorials.</span></span> <span data-ttu-id="4fe9d-165">Vous devez vous assurer que la chaîne de connexion de la base de données de production est celle utilisée dans l’environnement de production, ce qui signifie qu’un autre `Web.config` fichier doit être déployé.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-165">You will need to ensure that the production database connection string is the one used in the production environment, which means that an alternate `Web.config` file must be deployed.</span></span> <span data-ttu-id="4fe9d-166">Plus précisément, cet élément `Web.config` file s `<connectionStrings>` modifié doit contenir la chaîne de connexion à la base de données de production et doit ressembler à ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="4fe9d-166">Specifically, this modified `Web.config` file s `<connectionStrings>` element needs to contain the production database connection string and should look similar to the following:</span></span>

[!code-xml[Main](configuring-the-production-web-application-to-use-the-production-database-vb/samples/sample2.xml)]

<span data-ttu-id="4fe9d-167">Notez que la chaîne de connexion dans l’élément `<connectionStrings>` porte le même nom (`ReviewsConnectionString`), mais contient désormais la chaîne de connexion à la base de données de production au lieu de la chaîne de connexion de la base de données de développement.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-167">Note that the connection string in the `<connectionStrings>` element is named the same (`ReviewsConnectionString`), but now contains the production database connection string instead of the development database connection string.</span></span>

<span data-ttu-id="4fe9d-168">À moins que vous n’ayez un flux de travail de déploiement plus formalisé, vous devez modifier manuellement le fichier `Web.config` pour utiliser la chaîne de connexion de la base de données de production avant de procéder au déploiement (en vous reconnectant pour revenir à l’utilisation de la chaîne de connexion de la base de données de développement) ou conserver un fichier `Web.config` distinct avec les informations de configuration de l’environnement de production</span><span class="sxs-lookup"><span data-stu-id="4fe9d-168">Unless you have a more formalized deployment workflow, either manually modify the `Web.config` file to use the production database connection string before deploying (remembering to revert it back to using the development database connection string afterwards) or maintain a separate `Web.config` file with the production environment configuration information that gets uploaded to the production environment as part of the deployment process.</span></span>

> [!NOTE]
> <span data-ttu-id="4fe9d-169">Si vous déployez accidentellement un fichier `Web.config` qui contient la chaîne de connexion à la base de données de développement, une erreur se produit lorsque l’application sur la production tente de se connecter à la base de données.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-169">If you accidentally deploy a `Web.config` file that contains the development database connection string then there will be an error when the application on production attempts to connect to the database.</span></span> <span data-ttu-id="4fe9d-170">Cette erreur se manifeste comme un `SqlException` avec un message signalant que le serveur est introuvable ou inaccessible.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-170">This error manifests as a `SqlException` with a message reporting that the server was not found or was not accessible.</span></span>

<span data-ttu-id="4fe9d-171">Une fois que le site a été déployé en production, visitez le site de production via votre navigateur.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-171">Once the site has been deployed to production, visit the production site through your browser.</span></span> <span data-ttu-id="4fe9d-172">Vous devez voir et profiter de la même expérience utilisateur que lors de l’exécution locale de l’application pilotée par les données.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-172">You should see and enjoy the same user experience as when running the data-driven application locally.</span></span> <span data-ttu-id="4fe9d-173">Bien entendu, lorsque vous accédez au site Web sur production, le site est alimenté par le serveur de base de données de production, tandis que la visite du site Web dans l’environnement de développement utilise la base de données en cours de développement.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-173">Of course when you visit the website on production the site is powered by the production database server, whereas visiting the website in the development environment uses the database in development.</span></span> <span data-ttu-id="4fe9d-174">La figure 3 illustre la page d' *apprentissage vous-même ASP.NET 3,5 dans 24 heures* à partir du site Web dans l’environnement de production (Notez l’URL dans la barre d’adresse du navigateur).</span><span class="sxs-lookup"><span data-stu-id="4fe9d-174">Figure 3 shows the *Teach Yourself ASP.NET 3.5 in 24 Hours* review page from the website in the production environment (note the URL in the browser s Address bar).</span></span>

<span data-ttu-id="4fe9d-175">[![l’application pilotée par les données est désormais disponible en production.](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image8.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image7.jpg)</span><span class="sxs-lookup"><span data-stu-id="4fe9d-175">[![The Data-Driven Application is Now Available On Production!](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image8.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image7.jpg)</span></span> 

<span data-ttu-id="4fe9d-176">**Figure 3**: l’application pilotée par les données est désormais disponible en production.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-176">**Figure 3**: The Data-Driven Application is Now Available On Production!</span></span> <span data-ttu-id="4fe9d-177">([Cliquez pour afficher l’image en taille réelle](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image9.jpg))</span><span class="sxs-lookup"><span data-stu-id="4fe9d-177">([Click to view full-size image](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image9.jpg))</span></span>

### <a name="storing-connection-strings-in-a-separate-configuration-file"></a><span data-ttu-id="4fe9d-178">Stockage des chaînes de connexion dans un fichier de configuration distinct</span><span class="sxs-lookup"><span data-stu-id="4fe9d-178">Storing Connection Strings in a Separate Configuration File</span></span>

<span data-ttu-id="4fe9d-179">Une technique courante pour gérer des informations de configuration distinctes dans les environnements de développement et de production consiste à avoir deux versions du `Web.config`: une pour l’environnement de développement et une pour la production.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-179">A common technique for maintaining separate configuration information on the development and production environments is to have two versions of the `Web.config`: one for the development environment and one for production.</span></span> <span data-ttu-id="4fe9d-180">Au moment du déploiement, la version de `Web.config` appropriée peut être copiée dans l’environnement de production.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-180">At deploy-time the appropriate `Web.config` version can be copied to the production environment.</span></span> <span data-ttu-id="4fe9d-181">Dans l’idéal, ce processus serait automatisé dans le cadre du flux de travail de déploiement.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-181">Ideally, this process would be automated as part of the deployment workflow.</span></span>

<span data-ttu-id="4fe9d-182">Au lieu de conserver deux fichiers de `Web.config` distincts, vous pouvez éventuellement fournir des différences plus granulaires.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-182">Instead of maintaining two separate `Web.config` files you can, optionally, provide more granular differences.</span></span> <span data-ttu-id="4fe9d-183">Les éléments qui composent le fichier `Web.config` peuvent être définis dans des fichiers de configuration externes qui sont ensuite référencés dans le fichier `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-183">The elements that make up the `Web.config` file can be defined in an external configuration files that are then referenced in the `Web.config` file.</span></span> <span data-ttu-id="4fe9d-184">En bref, vous pouvez avoir un fichier de `Web.config` pour les deux environnements qui fait référence à un fichier databaseConnectionStrings. config, qui contient les chaînes de connexion utilisées par l’application et qui seraient uniques pour chaque environnement.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-184">In a nutshell you can have one `Web.config` file for both environments that references a databaseConnectionStrings.config file, which would contain the connection strings used by the application and would be unique for each environment.</span></span> <span data-ttu-id="4fe9d-185">Je trouve qu’en séparant les informations de configuration différentes dans des fichiers distincts, vous obtenez un fichier de `Web.config` et un fichier plus simple, ce qui explique plus clairement les différences de configuration entre les environnements de développement et de production.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-185">I find that separating the differing configuration information into separate files provides a tidier and simpler `Web.config` file and more clearly outlines the configuration differences between the development and production environments.</span></span>

<span data-ttu-id="4fe9d-186">Pour utiliser cette technique, commencez par créer un nouveau dossier dans l’application Web nommée `ConfigSections`.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-186">To use this technique, start by creating a new folder in the web application named `ConfigSections`.</span></span> <span data-ttu-id="4fe9d-187">Ensuite, ajoutez deux fichiers à ce nouveau dossier nommé databaseConnectionStrings. dev. config et databaseConnectionStrings. production. config. Copiez ensuite l’élément `<connectionStrings>` à partir de `Web.config` dans les fichiers databaseConnectionStrings. dev. config et databaseConnectionStrings. production. config, puis modifiez la chaîne de connexion dans le fichier databaseConnectionStrings. production. config afin qu’elle spécifie la chaîne de connexion de la base de données de production.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-187">Next, add two files to this new folder named databaseConnectionStrings.dev.config and databaseConnectionStrings.production.config. Next, copy the `<connectionStrings>` element from `Web.config` into the databaseConnectionStrings.dev.config and databaseConnectionStrings.production.config files, and then modify the connection string in the databaseConnectionStrings.production.config file so that it specifies the production database connection string.</span></span> <span data-ttu-id="4fe9d-188">Par exemple, le fichier databaseConnectionStrings. dev. config doit contenir uniquement l’élément `<connectionStrings>` avec une chaîne de connexion qui fait référence à la base de données de développement :</span><span class="sxs-lookup"><span data-stu-id="4fe9d-188">For example, the databaseConnectionStrings.dev.config file should contain just the `<connectionStrings>` element with a connection string that references the development database:</span></span>

[!code-xml[Main](configuring-the-production-web-application-to-use-the-production-database-vb/samples/sample3.xml)]

<span data-ttu-id="4fe9d-189">De même, le fichier databaseConnectionStrings. production. config ne doit contenir qu’un seul élément `<connectionStrings>`, mais avec la chaîne de connexion de la base de données de production.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-189">Similarly, the databaseConnectionStrings.production.config file should contain just a `<connectionStrings>` element, but one that has the production database connection string.</span></span>

<span data-ttu-id="4fe9d-190">Effectuez une copie du fichier databaseConnectionStrings. dev. config et nommez-le databaseConnectionStrings. config.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-190">Make a copy of the databaseConnectionStrings.dev.config file and name it databaseConnectionStrings.config.</span></span>

> [!NOTE]
> <span data-ttu-id="4fe9d-191">Vous pouvez nommer un fichier de configuration autre que databaseConnectionStrings. config, si vous le souhaitez, par exemple `connectionStrings.config` ou `dbInfo.config`.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-191">You can name the configuration file something other than databaseConnectionStrings.config, if you d like, such as `connectionStrings.config` or `dbInfo.config`.</span></span> <span data-ttu-id="4fe9d-192">Toutefois, veillez à nommer le fichier avec une extension de `.config`, car les fichiers `.config` sont, par défaut, non pris en charge par le moteur ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-192">However, be sure to name the file with a `.config` extension as `.config` files are, by default, not served by the ASP.NET engine.</span></span> <span data-ttu-id="4fe9d-193">Si vous nommez le fichier autre chose, comme `connectionStrings.txt`, un utilisateur peut pointer son navigateur vers [www.yoursite.com/ConfigSettings/ConnectionStrings.txt](http://www.yoursite.com/ConfigSettings/connectionStrings.txt) et afficher le contenu du fichier !</span><span class="sxs-lookup"><span data-stu-id="4fe9d-193">If you name the file something else, like `connectionStrings.txt`, a user could point their browser to [www.yoursite.com/ConfigSettings/connectionStrings.txt](http://www.yoursite.com/ConfigSettings/connectionStrings.txt) and view the contents of the file!</span></span>

<span data-ttu-id="4fe9d-194">À ce stade, le dossier `ConfigSections` doit contenir trois fichiers (voir figure 4).</span><span class="sxs-lookup"><span data-stu-id="4fe9d-194">At this point the `ConfigSections` folder should contain three files (see Figure 4).</span></span> <span data-ttu-id="4fe9d-195">Les fichiers databaseConnectionStrings. dev. config et databaseConnectionStrings. production. config contiennent respectivement les chaînes de connexion pour les environnements de développement et de production.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-195">The databaseConnectionStrings.dev.config and databaseConnectionStrings.production.config files contain the connection strings for the development and production environments, respectively.</span></span> <span data-ttu-id="4fe9d-196">Le fichier databaseConnectionStrings. config contient les informations de chaîne de connexion qui seront utilisées par l’application Web au moment de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-196">The databaseConnectionStrings.config file contains the connection string information that will be used by the web application at runtime.</span></span> <span data-ttu-id="4fe9d-197">Par conséquent, le fichier databaseConnectionStrings. config doit être identique au fichier databaseConnectionStrings. dev. config dans l’environnement de développement, tandis que sur la production, le fichier databaseConnectionStrings. config doit être identique à databaseConnectionStrings. production. config.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-197">Consequently, the databaseConnectionStrings.config file should be identical to the databaseConnectionStrings.dev.config file in the development environment, whereas on production the databaseConnectionStrings.config file should be identical to databaseConnectionStrings.production.config.</span></span>

<span data-ttu-id="4fe9d-198">[![ConfigSections](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image11.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image10.jpg)</span><span class="sxs-lookup"><span data-stu-id="4fe9d-198">[![ConfigSections](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image11.jpg)](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image10.jpg)</span></span> 

<span data-ttu-id="4fe9d-199">**Figure 4**: ConfigSections ([cliquez pour afficher l’image en taille réelle](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image12.jpg))</span><span class="sxs-lookup"><span data-stu-id="4fe9d-199">**Figure 4**: ConfigSections ([Click to view full-size image](configuring-the-production-web-application-to-use-the-production-database-vb/_static/image12.jpg))</span></span>

<span data-ttu-id="4fe9d-200">Nous devons maintenant demander à `Web.config` d’utiliser le fichier databaseConnectionStrings. config pour son magasin de chaînes de connexion.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-200">We now need to instruct `Web.config` to use the databaseConnectionStrings.config file for its connection string store.</span></span> <span data-ttu-id="4fe9d-201">Ouvrez `Web.config` et remplacez l’élément `<connectionStrings>` existant par l’élément suivant :</span><span class="sxs-lookup"><span data-stu-id="4fe9d-201">Open `Web.config` and replace the existing `<connectionStrings>` element with the following:</span></span>

[!code-xml[Main](configuring-the-production-web-application-to-use-the-production-database-vb/samples/sample4.xml)]

<span data-ttu-id="4fe9d-202">L’attribut `configSource` spécifie un chemin d’accès physique relatif au fichier `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-202">The `configSource` attribute specifies a physical path relative to the `Web.config` file.</span></span> <span data-ttu-id="4fe9d-203">Si le fichier de `.config` externe se trouve dans le même répertoire que `Web.config`, définissez cet attribut sur le nom du fichier de `.config`.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-203">If the external `.config` file is in the same directory as `Web.config` then set this attribute to the file name of the `.config` file.</span></span> <span data-ttu-id="4fe9d-204">S’il est dans un sous-répertoire, comme c’est le cas avec databaseConnectionStrings. config, spécifiez le sous-dossier à l’aide d’une barre oblique inverse pour délimiter les noms de dossiers et de fichiers, par exemple ConfigSections\databaseConnectionStrings.config.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-204">If it s in a subdirectory, as is the case with databaseConnectionStrings.config, specify the subfolder using a backslash to delimit the folder and file names, like ConfigSections\databaseConnectionStrings.config.</span></span>

<span data-ttu-id="4fe9d-205">Avec cette modification, les environnements de développement et de production contiennent le même fichier de `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-205">With this modification, the development and production environments contain the same `Web.config` file.</span></span> <span data-ttu-id="4fe9d-206">À présent, la seule différence est le fichier databaseConnectionStrings. config.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-206">Now the only difference is the databaseConnectionStrings.config file.</span></span> <span data-ttu-id="4fe9d-207">Copiez le fichier databaseConnectionStrings. production. config en production et renommez-le databaseConnectionStrings. config. Si, à l’avenir, il y a des modifications apportées à la chaîne de connexion de la base de données de production, vous devrez les faire passer au fichier databaseConnectionStrings. production. config, puis charger ce fichier en production, en le renommant databaseConnectionStrings. config.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-207">Copy the databaseConnectionStrings.production.config file to production and rename it to databaseConnectionStrings.config. If, in the future, there are changes to the production database connection string you will need to make them to the databaseConnectionStrings.production.config file and then upload that file to production, renaming it databaseConnectionStrings.config.</span></span>

> [!NOTE]
> <span data-ttu-id="4fe9d-208">Vous pouvez spécifier les informations de tout élément `Web.config` dans un fichier distinct et utiliser l’attribut `configSource` pour référencer ce fichier à partir de `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-208">You may specify the information for any `Web.config` element in a separate file and use the `configSource` attribute to reference that file from within `Web.config`.</span></span>

## <a name="summary"></a><span data-ttu-id="4fe9d-209">Récapitulatif</span><span class="sxs-lookup"><span data-stu-id="4fe9d-209">Summary</span></span>

<span data-ttu-id="4fe9d-210">Les applications pilotées par les données utilisent généralement des bases de données différentes dans les environnements de développement et de production.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-210">Data-driven applications usually use different databases in the development and production environments.</span></span> <span data-ttu-id="4fe9d-211">Par conséquent, les chaînes de connexion à la base de données stockées dans la configuration de l’application Web doivent être uniques pour chaque environnement.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-211">Consequently, the database connection strings stored in the web application s configuration must be unique per environment.</span></span> <span data-ttu-id="4fe9d-212">Dans ce didacticiel, nous avons vu comment déterminer la chaîne de connexion à la base de données de production et comment gérer les informations de chaîne de connexion uniques dans les deux environnements.</span><span class="sxs-lookup"><span data-stu-id="4fe9d-212">In this tutorial we looked at how to determine the production database connection string and ways to maintain unique connection string information in the two environments.</span></span>

<span data-ttu-id="4fe9d-213">Bonne programmation !</span><span class="sxs-lookup"><span data-stu-id="4fe9d-213">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="4fe9d-214">informations supplémentaires</span><span class="sxs-lookup"><span data-stu-id="4fe9d-214">Further Reading</span></span>

<span data-ttu-id="4fe9d-215">Pour plus d’informations sur les sujets abordés dans ce didacticiel, reportez-vous aux ressources suivantes :</span><span class="sxs-lookup"><span data-stu-id="4fe9d-215">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="4fe9d-216">Chaînes de connexion et fichiers de configuration</span><span class="sxs-lookup"><span data-stu-id="4fe9d-216">Connection Strings and Configuration Files</span></span>](https://msdn.microsoft.com/library/ms254494.aspx)
- [<span data-ttu-id="4fe9d-217">Informations sur les chaînes de configuration de base de données @ ConnectionStrings.com</span><span class="sxs-lookup"><span data-stu-id="4fe9d-217">Database Configuration Strings Information @ ConnectionStrings.com</span></span>](http://www.connectionstrings.com/)
- [<span data-ttu-id="4fe9d-218">Déplacer les paramètres hors du fichier Web. config</span><span class="sxs-lookup"><span data-stu-id="4fe9d-218">Move Settings Out of the Web.config File</span></span>](http://www.asp101.com/tips/index.asp?id=154)
- [<span data-ttu-id="4fe9d-219">Documentation technique pour l’élément &lt;connectionStrings&gt;</span><span class="sxs-lookup"><span data-stu-id="4fe9d-219">Technical Documentation for the &lt;connectionStrings&gt; Element</span></span>](https://msdn.microsoft.com/library/bf7sd233.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="4fe9d-220">[Précédent](deploying-a-database-vb.md)
> [Suivant](configuring-a-website-that-uses-application-services-vb.md)</span><span class="sxs-lookup"><span data-stu-id="4fe9d-220">[Previous](deploying-a-database-vb.md)
[Next](configuring-a-website-that-uses-application-services-vb.md)</span></span>

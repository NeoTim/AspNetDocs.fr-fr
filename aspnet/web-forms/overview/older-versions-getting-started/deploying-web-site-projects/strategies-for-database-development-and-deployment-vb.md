---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/strategies-for-database-development-and-deployment-vb
title: Stratégies pour le développement et le déploiement de bases de données (VB) | Microsoft Docs
author: rick-anderson
description: Lorsque vous déployez une application pilotée par les données pour la première fois, vous pouvez la copier dans l’environnement de production. B...
ms.author: riande
ms.date: 04/23/2009
ms.assetid: 07b8905d-78ac-4252-97fb-8675b3fb0bbf
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/strategies-for-database-development-and-deployment-vb
msc.type: authoredcontent
ms.openlocfilehash: 1ea4ade32fb05b9e69647ece7d1a4c400fe9fb21
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/28/2019
ms.locfileid: "74616128"
---
# <a name="strategies-for-database-development-and-deployment-vb"></a><span data-ttu-id="b6882-104">Stratégies pour le développement et le déploiement des bases de données (VB)</span><span class="sxs-lookup"><span data-stu-id="b6882-104">Strategies for Database Development and Deployment (VB)</span></span>

<span data-ttu-id="b6882-105">par [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="b6882-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

[<span data-ttu-id="b6882-106">Télécharger PDF</span><span class="sxs-lookup"><span data-stu-id="b6882-106">Download PDF</span></span>](https://download.microsoft.com/download/C/3/9/C391A649-B357-4A7B-BAA4-48C96871FEA6/aspnet_tutorial10_DBDevel_vb.pdf)

> <span data-ttu-id="b6882-107">Lorsque vous déployez une application pilotée par les données pour la première fois, vous pouvez la copier dans l’environnement de production.</span><span class="sxs-lookup"><span data-stu-id="b6882-107">When deploying a data-driven application for the first time you can blindly copy the database in the development environment to the production environment.</span></span> <span data-ttu-id="b6882-108">Toutefois, l’exécution d’une copie aveugle dans les déploiements suivants remplace toutes les données entrées dans la base de données de production.</span><span class="sxs-lookup"><span data-stu-id="b6882-108">But performing a blind copy in subsequent deployments will overwrite any data entered into the production database.</span></span> <span data-ttu-id="b6882-109">Au lieu de cela, le déploiement d’une base de données implique l’application des modifications apportées à la base de données de développement depuis le dernier déploiement sur la base de données de production.</span><span class="sxs-lookup"><span data-stu-id="b6882-109">Instead, deploying a database involves applying the changes made to the development database since the last deployment onto the production database.</span></span> <span data-ttu-id="b6882-110">Ce didacticiel examine ces défis et propose différentes stratégies pour faciliter la chronique et l’application des modifications apportées à la base de données depuis le dernier déploiement.</span><span class="sxs-lookup"><span data-stu-id="b6882-110">This tutorial examines these challenges and offers various strategies to assist with chronicling and applying the changes made to the database since the last deployment.</span></span>

## <a name="introduction"></a><span data-ttu-id="b6882-111">Introduction</span><span class="sxs-lookup"><span data-stu-id="b6882-111">Introduction</span></span>

<span data-ttu-id="b6882-112">Comme indiqué dans les didacticiels précédents, le déploiement d’une application ASP.NET implique la copie du contenu pertinent de l’environnement de développement vers l’environnement de production.</span><span class="sxs-lookup"><span data-stu-id="b6882-112">As discussed in previous tutorials, deploying an ASP.NET application entails copying the pertinent content from the development environment to the production environment.</span></span> <span data-ttu-id="b6882-113">Le déploiement n’est pas un événement à usage unique, mais plutôt un événement qui se produit chaque fois qu’une nouvelle version du logiciel est publiée ou lorsque des bogues ou des problèmes de sécurité ont été identifiés et résolus.</span><span class="sxs-lookup"><span data-stu-id="b6882-113">Deployment is not a one-time event, but rather something that happens every time a new version of the software is released or when bugs or security concerns have been identified and addressed.</span></span> <span data-ttu-id="b6882-114">Lorsque vous copiez des pages ASP.NET, des images, des fichiers JavaScript et d’autres fichiers de ce type dans l’environnement de production, vous n’avez pas besoin de vous soucier de la façon dont ces fichiers ont été modifiés depuis le dernier déploiement.</span><span class="sxs-lookup"><span data-stu-id="b6882-114">When copying ASP.NET pages, images, JavaScript files, and other such files to the production environment you do not need to concern yourself with how these file have been changed since the last deployment.</span></span> <span data-ttu-id="b6882-115">Vous pouvez copier le fichier en production en écrasant le contenu existant.</span><span class="sxs-lookup"><span data-stu-id="b6882-115">You can blindly copy the file to production, overwriting the existing content.</span></span> <span data-ttu-id="b6882-116">Malheureusement, cette simplicité ne s’étend pas au déploiement de la base de données.</span><span class="sxs-lookup"><span data-stu-id="b6882-116">Unfortunately, this simplicity does not extend to deploying the database.</span></span>

<span data-ttu-id="b6882-117">Lorsque vous déployez une application pilotée par les données pour la première fois, vous pouvez la copier dans l’environnement de production.</span><span class="sxs-lookup"><span data-stu-id="b6882-117">When deploying a data-driven application for the first time you can blindly copy the database in the development environment to the production environment.</span></span> <span data-ttu-id="b6882-118">Toutefois, l’exécution d’une copie aveugle dans les déploiements suivants remplace toutes les données entrées dans la base de données de production.</span><span class="sxs-lookup"><span data-stu-id="b6882-118">But performing a blind copy in subsequent deployments will overwrite any data entered into the production database.</span></span> <span data-ttu-id="b6882-119">Au lieu de cela, le déploiement d’une base de données implique l’application des *modifications* apportées à la base de données de développement depuis le dernier déploiement sur la base de données de production.</span><span class="sxs-lookup"><span data-stu-id="b6882-119">Instead, deploying a database involves applying the *changes* made to the development database since the last deployment onto the production database.</span></span> <span data-ttu-id="b6882-120">Ce didacticiel examine ces défis et propose différentes stratégies pour faciliter la chronique et l’application des modifications apportées à la base de données depuis le dernier déploiement.</span><span class="sxs-lookup"><span data-stu-id="b6882-120">This tutorial examines these challenges and offers various strategies to assist with chronicling and applying the changes made to the database since the last deployment.</span></span>

## <a name="the-challenges-of-deploying-a-database"></a><span data-ttu-id="b6882-121">Défis liés au déploiement d’une base de données</span><span class="sxs-lookup"><span data-stu-id="b6882-121">The Challenges of Deploying a Database</span></span>

<span data-ttu-id="b6882-122">Avant qu’une application pilotée par les données ne soit déployée pour la première fois, il n’y a qu’une seule base de données, à savoir la base de données dans l’environnement de développement. c’est pourquoi, lors du premier déploiement d’une application pilotée par les données, vous pouvez la copier aveuglément dans le environnement de développement vers l’environnement de production.</span><span class="sxs-lookup"><span data-stu-id="b6882-122">Before a data-driven application has been deployed for the first time, there is only one database, namely the database in the development environment, which is why when deploying a data-driven application for the first time you can blindly copy the database in the development environment to the production environment.</span></span> <span data-ttu-id="b6882-123">Toutefois, une fois que l’application a été déployée, il existe deux copies de la base de données : une en développement et une en production.</span><span class="sxs-lookup"><span data-stu-id="b6882-123">But once the application has been deployed there are two copies of the database: one in development and one in production.</span></span>

<span data-ttu-id="b6882-124">Entre les déploiements, les bases de données de développement et de production peuvent être désynchronisées. Bien que le schéma des bases de données de production reste inchangé, le schéma s de la base de données de développement peut changer à mesure que de nouvelles fonctionnalités sont ajoutées.</span><span class="sxs-lookup"><span data-stu-id="b6882-124">Between deployments the development and production databases can become out of sync. While the production database s schema remains unchanged, the development database s schema may change as new features are added.</span></span> <span data-ttu-id="b6882-125">Vous pouvez ajouter ou supprimer des colonnes, des tables, des vues ou des procédures stockées.</span><span class="sxs-lookup"><span data-stu-id="b6882-125">You might add or remove columns, tables, views, or stored procedures.</span></span> <span data-ttu-id="b6882-126">Il peut également y avoir des données importantes qui sont ajoutées à la base de données de développement.</span><span class="sxs-lookup"><span data-stu-id="b6882-126">There may also be important data that gets added to the development database.</span></span> <span data-ttu-id="b6882-127">De nombreuses applications pilotées par les données incluent des tables de recherche remplies avec des données codées en dur, spécifiques à l’application qui ne sont pas modifiables par l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="b6882-127">Many data-driven applications include lookup tables populated with hard-coded, application-specific data that are not user-editable.</span></span> <span data-ttu-id="b6882-128">Par exemple, un site Web d’enchères peut avoir une liste déroulante avec des options qui décrivent la condition de l’article en cours de vente : nouveau, comme nouveau, bon et équitable.</span><span class="sxs-lookup"><span data-stu-id="b6882-128">For example, an auction website might have a drop-down list with choices that describe the condition of the item being auctioned: New, Like New, Good, and Fair.</span></span> <span data-ttu-id="b6882-129">Plutôt que de coder en dur ces options directement dans la liste déroulante, il est généralement préférable de les placer dans une table de base de données.</span><span class="sxs-lookup"><span data-stu-id="b6882-129">Rather than hard-coding these options directly in the drop-down list it is usually better to place them in a database table.</span></span> <span data-ttu-id="b6882-130">Si, au cours du développement, une nouvelle condition nommée médiocre est ajoutée à la table lors du déploiement de l’application, le même enregistrement doit être ajouté à la table de recherche de la base de données de production.</span><span class="sxs-lookup"><span data-stu-id="b6882-130">If, during development, a new condition named Poor is added to the table then when deploying the application this same record needs to be added to the lookup table in the production database.</span></span>

<span data-ttu-id="b6882-131">Dans l’idéal, le déploiement de la base de données implique la copie de la base de données d’un développement vers un environnement de production.</span><span class="sxs-lookup"><span data-stu-id="b6882-131">Ideally, deploying the database would involve copying the database from development to production.</span></span> <span data-ttu-id="b6882-132">Mais gardez à l’esprit qu’une fois que vous avez déployé l’application et que vous avez redémarré le développement, la base de données de production est remplie avec des données réelles des utilisateurs réels.</span><span class="sxs-lookup"><span data-stu-id="b6882-132">But keep in mind that after you have deployed the application and resumed development, the production database is being populated with real data from real users.</span></span> <span data-ttu-id="b6882-133">Par conséquent, si vous souhaitez simplement copier la base de données du développement vers le déploiement suivant, vous devez remplacer la base de données de production et perdre les données existantes.</span><span class="sxs-lookup"><span data-stu-id="b6882-133">Therefore, if you were to simply copy the database from development to production at the next deployment you would overwrite the production database and lose its existing data.</span></span> <span data-ttu-id="b6882-134">Le résultat net est que le déploiement de la base de données s’effectue par le biais de l’application des modifications apportées à la base de données de développement depuis le dernier déploiement.</span><span class="sxs-lookup"><span data-stu-id="b6882-134">The net result is that deploying the database boils down to applying the changes made to the development database since the last deployment.</span></span>

<span data-ttu-id="b6882-135">Étant donné que le déploiement d’une base de données implique l’application des modifications dans le schéma et, éventuellement, les données depuis le dernier déploiement, un historique des modifications doit être conservé (ou déterminé au moment du déploiement) pour que ces modifications puissent être appliquées en production.</span><span class="sxs-lookup"><span data-stu-id="b6882-135">Because deploying a database involves applying the changes in the schema and, possibly, the data since the last deployment, a history of changes must be maintained (or determined at deploy-time) so that those changes can be applied on production.</span></span> <span data-ttu-id="b6882-136">Il existe diverses techniques pour la gestion et l’application des modifications au modèle de données.</span><span class="sxs-lookup"><span data-stu-id="b6882-136">There are a variety of techniques for managing and applying changes to the data model.</span></span>

### <a name="defining-the-baseline"></a><span data-ttu-id="b6882-137">Définition de la ligne de base</span><span class="sxs-lookup"><span data-stu-id="b6882-137">Defining the Baseline</span></span>

<span data-ttu-id="b6882-138">Pour conserver les modifications apportées à la base de données de votre application, vous devez disposer d’un état de démarrage, une ligne de base à laquelle les modifications sont appliquées.</span><span class="sxs-lookup"><span data-stu-id="b6882-138">To maintain the changes to your application s database you need to have some starting state, a baseline to which the changes are applied to.</span></span> <span data-ttu-id="b6882-139">À une extrémité, l’état de démarrage peut être une base de données vide sans tables, vues ou procédures stockées.</span><span class="sxs-lookup"><span data-stu-id="b6882-139">At one extreme the starting state could be an empty database with no tables, views, or stored procedures.</span></span> <span data-ttu-id="b6882-140">Ce type de ligne de base génère un journal des modifications volumineux, car il doit inclure la création de toutes les tables, vues et procédures stockées de la base de données, ainsi que toutes les modifications apportées après le déploiement initial.</span><span class="sxs-lookup"><span data-stu-id="b6882-140">Such a baseline results in a large change log because it must include the creation of all of the database s tables, views, and stored procedures along with any changes made after the initial deployment.</span></span> <span data-ttu-id="b6882-141">À l’autre extrémité du spectre, vous pouvez définir la ligne de base comme version de la base de données déployée initialement dans l’environnement de production.</span><span class="sxs-lookup"><span data-stu-id="b6882-141">At the other end of the spectrum you could set the baseline as the version of the database that is initially deployed to the production environment.</span></span> <span data-ttu-id="b6882-142">Ce choix aboutit à un journal des modifications bien plus petit, car il comprend uniquement les modifications apportées à la base de données après le premier déploiement.</span><span class="sxs-lookup"><span data-stu-id="b6882-142">This choice results in a much smaller change log because it only includes the changes made to the database following the first deployment.</span></span> <span data-ttu-id="b6882-143">Il s’agit de l’approche que je préfère.</span><span class="sxs-lookup"><span data-stu-id="b6882-143">This is the approach I prefer.</span></span> <span data-ttu-id="b6882-144">Et bien sûr, vous pouvez choisir un plus grand milieu de l’approche route, en définissant la ligne de base comme un point entre la création initiale de la base de données et le moment où la base de données est déployée pour la première fois.</span><span class="sxs-lookup"><span data-stu-id="b6882-144">And of course you can choose a more middle of the road approach, defining the baseline as some point between the initial creation of the database and when the database is first deployed.</span></span>

<span data-ttu-id="b6882-145">Une fois que vous avez choisi une ligne de base, envisagez de générer un script SQL qui peut être exécuté pour recréer la version de référence.</span><span class="sxs-lookup"><span data-stu-id="b6882-145">Once you have chosen a baseline consider generating a SQL script that can be executed to recreate the baseline version.</span></span> <span data-ttu-id="b6882-146">Un tel script permet de recréer rapidement la version de référence de la base de données.</span><span class="sxs-lookup"><span data-stu-id="b6882-146">Such a script makes it possible to quickly recreate the baseline version of the database.</span></span> <span data-ttu-id="b6882-147">Cette fonctionnalité est particulièrement utile dans les projets de plus grande taille, dans lesquels plusieurs développeurs peuvent travailler sur le projet ou sur des environnements supplémentaires, tels que les tests ou la mise en lots, qui ont chacun besoin de leur propre copie de la base de données.</span><span class="sxs-lookup"><span data-stu-id="b6882-147">This functionality is especially useful in larger projects, where there may be multiple developers working on the project or additional environments, such as testing or staging, that each need their own copy of the database.</span></span>

<span data-ttu-id="b6882-148">Il existe un large éventail d’outils à votre disposition pour générer un script SQL de la version de référence.</span><span class="sxs-lookup"><span data-stu-id="b6882-148">There are a variety of tools at your disposal to generate a SQL script of the baseline version.</span></span> <span data-ttu-id="b6882-149">À partir de SQL Server Management Studio (SSMS), vous pouvez cliquer avec le bouton droit sur la base de données, accéder au sous-menu tâches et choisir l’option générer des scripts.</span><span class="sxs-lookup"><span data-stu-id="b6882-149">From SQL Server Management Studio (SSMS) you can right-click on the database, go to the Tasks submenu, and choose the Generate Scripts option.</span></span> <span data-ttu-id="b6882-150">Cette opération lance l’Assistant script, que vous pouvez demander de générer un fichier contenant les commandes SQL pour créer les objets de votre base de données.</span><span class="sxs-lookup"><span data-stu-id="b6882-150">This launches the Script Wizard, which you can instruct to generate a file that contains the SQL commands to create your database s objects.</span></span> <span data-ttu-id="b6882-151">Une autre option est l’Assistant Publication de base de données, qui peut générer les commandes SQL pour non seulement créer le schéma de base de données, mais également les données dans les tables de base de données.</span><span class="sxs-lookup"><span data-stu-id="b6882-151">Another option is the Database Publishing Wizard, which can generate the SQL commands to not only create the database schema, but also the data in the database tables.</span></span> <span data-ttu-id="b6882-152">L’Assistant Publication de base de données a été examiné en détail dans le didacticiel sur le *déploiement d’une base de données* .</span><span class="sxs-lookup"><span data-stu-id="b6882-152">The Database Publishing Wizard was examined in detail back in the *Deploying a Database* tutorial.</span></span> <span data-ttu-id="b6882-153">Quel que soit l’outil que vous utilisez, vous devez disposer d’un fichier de script que vous pouvez utiliser pour recréer la version de référence de votre base de données, en cas de besoin.</span><span class="sxs-lookup"><span data-stu-id="b6882-153">Regardless of what tool you use, in the end you should have a script file that you can use to recreate the baseline version of your database, should the need arise.</span></span>

## <a name="documenting-the-database-changes-in-prose"></a><span data-ttu-id="b6882-154">Documentation des modifications apportées à la base de données dans le Proseware</span><span class="sxs-lookup"><span data-stu-id="b6882-154">Documenting the Database Changes in Prose</span></span>

<span data-ttu-id="b6882-155">La façon la plus simple de conserver un journal des modifications apportées au modèle de données pendant la phase de développement consiste à enregistrer les modifications dans la prose.</span><span class="sxs-lookup"><span data-stu-id="b6882-155">The simplest way to maintain a log of changes to the data model during the development phase is to record the changes in prose.</span></span> <span data-ttu-id="b6882-156">Par exemple, si au cours du développement d’une application déjà déployée vous ajoutez une nouvelle colonne à la table `Employees`, supprimez une colonne de la table `Orders` et ajoutez une nouvelle table (`ProductCategories`), vous conservez un fichier texte ou un document Microsoft Word avec l’historique suivant :</span><span class="sxs-lookup"><span data-stu-id="b6882-156">For example, if during development of an already-deployed application you add a new column to the `Employees` table, remove a column from the `Orders` table, and add a new table (`ProductCategories`), you would maintain a text file or Microsoft Word document with the following history:</span></span>

<a id="0.8_table01"></a>

| <span data-ttu-id="b6882-157">**Date de modification**</span><span class="sxs-lookup"><span data-stu-id="b6882-157">**Change Date**</span></span> | <span data-ttu-id="b6882-158">**Modifier les détails**</span><span class="sxs-lookup"><span data-stu-id="b6882-158">**Change Details**</span></span> |
| --- | --- |
| <span data-ttu-id="b6882-159">2009-02-03 :</span><span class="sxs-lookup"><span data-stu-id="b6882-159">2009-02-03:</span></span> | <span data-ttu-id="b6882-160">Ajout de la `DepartmentID` de colonne (`int`, non NULL) à la table `Employees`.</span><span class="sxs-lookup"><span data-stu-id="b6882-160">Added column `DepartmentID` (`int`, NOT NULL) to the `Employees` table.</span></span> <span data-ttu-id="b6882-161">Ajout d’une contrainte de clé étrangère de `Departments.DepartmentID` à `Employees.DepartmentID`.</span><span class="sxs-lookup"><span data-stu-id="b6882-161">Added a foreign key constraint from `Departments.DepartmentID` to `Employees.DepartmentID`.</span></span> |
| <span data-ttu-id="b6882-162">2009-02-05 :</span><span class="sxs-lookup"><span data-stu-id="b6882-162">2009-02-05:</span></span> | <span data-ttu-id="b6882-163">Suppression de la `TotalWeight` de colonne de la table `Orders`.</span><span class="sxs-lookup"><span data-stu-id="b6882-163">Removed column `TotalWeight` from the `Orders` table.</span></span> <span data-ttu-id="b6882-164">Données déjà capturées dans les enregistrements de `OrderDetails` associés.</span><span class="sxs-lookup"><span data-stu-id="b6882-164">Data already captured in associated `OrderDetails` records.</span></span> |
| <span data-ttu-id="b6882-165">2009-02-12 :</span><span class="sxs-lookup"><span data-stu-id="b6882-165">2009-02-12:</span></span> | <span data-ttu-id="b6882-166">Création de la table `ProductCategories`.</span><span class="sxs-lookup"><span data-stu-id="b6882-166">Created the `ProductCategories` table.</span></span> <span data-ttu-id="b6882-167">Il y a trois colonnes : `ProductCategoryID` (`int`, `IDENTITY`, `NOT NULL`), `CategoryName` (`nvarchar(50)`, `NOT NULL`) et `Active` (`bit`, `NOT NULL`).</span><span class="sxs-lookup"><span data-stu-id="b6882-167">There are three columns: `ProductCategoryID` (`int`, `IDENTITY`, `NOT NULL`), `CategoryName` (`nvarchar(50)`, `NOT NULL`), and `Active` (`bit`, `NOT NULL`).</span></span> <span data-ttu-id="b6882-168">Ajout d’une contrainte de clé primaire à `ProductCategoryID`et une valeur par défaut de 1 à `Active`.</span><span class="sxs-lookup"><span data-stu-id="b6882-168">Added a primary key constraint to `ProductCategoryID`, and a default value of 1 to `Active`.</span></span> |

<span data-ttu-id="b6882-169">Cette approche présente un certain nombre d’inconvénients.</span><span class="sxs-lookup"><span data-stu-id="b6882-169">There are a number of drawbacks to this approach.</span></span> <span data-ttu-id="b6882-170">Pour commencer, l’automatisation n’est pas prévue.</span><span class="sxs-lookup"><span data-stu-id="b6882-170">For starters, there is no hope for automation.</span></span> <span data-ttu-id="b6882-171">Chaque fois que ces modifications doivent être appliquées à une base de données (par exemple, lorsque l’application est déployée), un développeur doit implémenter manuellement chaque modification, l’une après l’autre.</span><span class="sxs-lookup"><span data-stu-id="b6882-171">Anytime these changes need to be applied to a database - such as when the application is deployed - a developer must manually implement each change, one at a time.</span></span> <span data-ttu-id="b6882-172">En outre, si vous devez reconstruire une version particulière de la base de données à partir de la ligne de base à l’aide du journal des modifications, cela prendra davantage de temps que la taille du journal.</span><span class="sxs-lookup"><span data-stu-id="b6882-172">Moreover, if you need to reconstruct a particular version of the database from the baseline using the change log, doing so will take more and more time as the size of the log grows.</span></span> <span data-ttu-id="b6882-173">L’un des inconvénients de cette méthode est que la clarté et le niveau de détail de chaque entrée de journal des modifications sont laissés à la personne qui enregistre la modification.</span><span class="sxs-lookup"><span data-stu-id="b6882-173">Another drawback to this method is that the clarity and level of detail of each change log entry is left to the person recording the change.</span></span> <span data-ttu-id="b6882-174">Dans une équipe avec plusieurs développeurs, certains peuvent créer des entrées plus détaillées, plus lisibles ou plus précises que d’autres.</span><span class="sxs-lookup"><span data-stu-id="b6882-174">In a team with multiple developers some may make more detailed, more readable, or more precise entries than others.</span></span> <span data-ttu-id="b6882-175">En outre, des fautes de frappe et d’autres erreurs d’entrée de données liées à l’homme sont possibles.</span><span class="sxs-lookup"><span data-stu-id="b6882-175">Also, typos and other human-related data entry errors are possible.</span></span>

<span data-ttu-id="b6882-176">Le principal avantage de la documentation des modifications de base de données dans le Proseware est la simplicité.</span><span class="sxs-lookup"><span data-stu-id="b6882-176">The primary benefit of documenting the database changes in prose is simplicity.</span></span> <span data-ttu-id="b6882-177">Vous n’avez pas besoin de vous familiariser avec la syntaxe SQL pour la création et la modification d’objets de base de données.</span><span class="sxs-lookup"><span data-stu-id="b6882-177">You don t need familiarity with the SQL syntax for creating and altering database objects.</span></span> <span data-ttu-id="b6882-178">Au lieu de cela, vous pouvez enregistrer les modifications dans la prose et les implémenter par le biais de l’interface utilisateur graphique de SQL Server Management Studio s.</span><span class="sxs-lookup"><span data-stu-id="b6882-178">Instead, you can record the changes in prose and implement them through SQL Server Management Studio s graphical user interface.</span></span>

<span data-ttu-id="b6882-179">La gestion de votre journal des modifications dans le Proseware est, de manière très complexe, difficile et ne fonctionne pas correctement avec certains projets, tels que ceux dont la portée est importante, les modifications fréquentes du modèle de données ou l’implication de plusieurs développeurs.</span><span class="sxs-lookup"><span data-stu-id="b6882-179">Maintaining your change log in prose is, admittedly, not very sophisticated and won't work well with certain projects, such as ones that are large in scope, have frequent changes to the data model, or involve multiple developers.</span></span> <span data-ttu-id="b6882-180">Mais j’ai vu cette approche fonctionner très bien dans les petits projets à un homme qui n’ont que des changements occasionnels dans le modèle de données et où le développeur solo n’a pas d’arrière-plan fort dans la syntaxe SQL pour la création et la modification d’objets de base de données.</span><span class="sxs-lookup"><span data-stu-id="b6882-180">But I have seen this approach work quite well in small, one-man projects that have only occasional changes to the data model and where the solo developer does not have a strong background in the SQL syntax for creating and altering database objects.</span></span>

> [!NOTE]
> <span data-ttu-id="b6882-181">Bien que les informations contenues dans le journal des modifications soient, techniquement, uniquement nécessaires jusqu’au moment du déploiement, je vous recommande de conserver un historique des modifications.</span><span class="sxs-lookup"><span data-stu-id="b6882-181">While the information in the change log is, technically, only needed until deploy-time, I recommend keeping a history of changes.</span></span> <span data-ttu-id="b6882-182">Mais plutôt que de conserver un seul fichier journal de modification en constante évolution, pensez à avoir un fichier journal de modification différent pour chaque version de base de données.</span><span class="sxs-lookup"><span data-stu-id="b6882-182">But rather than maintaining a single, ever growing change log file, consider having a different change log file for each database version.</span></span> <span data-ttu-id="b6882-183">En général, vous souhaiterez générer la version de la base de données chaque fois qu’elle est déployée.</span><span class="sxs-lookup"><span data-stu-id="b6882-183">Typically you will want to version the database each time it is deployed.</span></span> <span data-ttu-id="b6882-184">En conservant un journal des journaux des modifications, vous pouvez, à partir de la ligne de base, recréer n’importe quelle version de base de données en exécutant les scripts de journalisation de modification à partir de la version 1 et en continuant jusqu’à la version que vous devez recréer.</span><span class="sxs-lookup"><span data-stu-id="b6882-184">By maintaining a log of change logs you can, starting from the baseline, recreate any database version by executing the change log scripts starting from version 1 and continuing until you reach the version you need to recreate.</span></span>

## <a name="recording-the-sql-change-statements"></a><span data-ttu-id="b6882-185">Enregistrement des instructions de modification SQL</span><span class="sxs-lookup"><span data-stu-id="b6882-185">Recording the SQL Change Statements</span></span>

<span data-ttu-id="b6882-186">Le principal inconvénient de la gestion du journal des modifications dans le Proseware est l’absence d’automatisation.</span><span class="sxs-lookup"><span data-stu-id="b6882-186">The primary drawback of maintaining the change log in prose is the lack of automation.</span></span> <span data-ttu-id="b6882-187">Dans l’idéal, il serait aussi facile d’implémenter les modifications de la base de données dans la base de données de production au moment du déploiement que de cliquer sur un bouton pour exécuter un script plutôt que d’avoir à effectuer manuellement une liste d’instructions.</span><span class="sxs-lookup"><span data-stu-id="b6882-187">Ideally, implementing the database changes to the production database at deploy-time would be as easy as clicking a button to execute a script rather than having to manually perform a list of instructions.</span></span> <span data-ttu-id="b6882-188">Une telle automatisation est possible en conservant un journal des modifications qui contient les commandes SQL utilisées pour modifier le modèle de données.</span><span class="sxs-lookup"><span data-stu-id="b6882-188">Such automation is possible by maintaining a change log that contains those SQL commands used to alter the data model.</span></span>

<span data-ttu-id="b6882-189">La syntaxe SQL comprend un certain nombre d’instructions pour la création et la modification de différents objets de base de données.</span><span class="sxs-lookup"><span data-stu-id="b6882-189">The SQL syntax includes a number of statements for creating and modifying various database objects.</span></span> <span data-ttu-id="b6882-190">Par exemple, l' [*instruction CREATE TABLE*](https://msdn.microsoft.com/library/ms174979.aspx), lorsqu’elle est exécutée, crée une nouvelle table avec les colonnes et les contraintes spécifiées.</span><span class="sxs-lookup"><span data-stu-id="b6882-190">For example, the [*CREATE TABLE statement*](https://msdn.microsoft.com/library/ms174979.aspx), when executed, creates a new table with the specified columns and constraints.</span></span> <span data-ttu-id="b6882-191">L' [*instruction ALTER TABLE*](https://msdn.microsoft.com/library/ms190273.aspx) modifie une table existante, en ajoutant, en supprimant ou en modifiant ses colonnes ou contraintes.</span><span class="sxs-lookup"><span data-stu-id="b6882-191">The [*ALTER TABLE statement*](https://msdn.microsoft.com/library/ms190273.aspx) modifies an existing table, adding, removing, or modifying its columns or constraints.</span></span> <span data-ttu-id="b6882-192">Il existe également des instructions pour créer, modifier et supprimer des index, des vues, des fonctions définies par l’utilisateur, des procédures stockées, des déclencheurs et d’autres objets de base de données.</span><span class="sxs-lookup"><span data-stu-id="b6882-192">There are also statements to create, modify, and drop indexes, views, user-defined functions, stored procedures, triggers, and other database objects.</span></span>

<span data-ttu-id="b6882-193">Pour revenir à notre exemple précédent, image qui, lors du développement d’une application déjà déployée, vous ajoutez une nouvelle colonne à la table `Employees`, supprimez une colonne de la table `Orders` et ajoutez une nouvelle table (`ProductCategories`).</span><span class="sxs-lookup"><span data-stu-id="b6882-193">Returning to our earlier example, image that during development of an already-deployed application you add a new column to the `Employees` table, remove a column from the `Orders` table, and add a new table (`ProductCategories`).</span></span> <span data-ttu-id="b6882-194">Ces actions entraîneraient la modification d’un fichier journal avec les commandes SQL suivantes :</span><span class="sxs-lookup"><span data-stu-id="b6882-194">Such actions would result in a change log file with the following SQL commands:</span></span>

[!code-sql[Main](strategies-for-database-development-and-deployment-vb/samples/sample1.sql)]

<span data-ttu-id="b6882-195">L’envoi de ces modifications à la base de données de production au moment du déploiement est une opération en un clic : ouvrez SQL Server Management Studio, connectez-vous à votre base de données de production, ouvrez une nouvelle fenêtre de requête, collez le contenu du journal des modifications, puis cliquez sur Exécuter pour exécuter le script.</span><span class="sxs-lookup"><span data-stu-id="b6882-195">Pushing these changes to the production database at deploy-time is a one-click operation: open SQL Server Management Studio, connect to your production database, open a New Query window, paste the contents of the change log, and click Execute to run the script.</span></span>

## <a name="using-a-comparison-tool-to-synchronize-the-data-models"></a><span data-ttu-id="b6882-196">Utilisation d’un outil de comparaison pour synchroniser les modèles de données</span><span class="sxs-lookup"><span data-stu-id="b6882-196">Using a Comparison Tool to Synchronize the Data Models</span></span>

<span data-ttu-id="b6882-197">La documentation des modifications apportées aux bases de données dans le Proseware est simple, mais l’implémentation des modifications nécessite que le développeur effectue chaque modification sur la base de données de production une à la fois ; la documentation des commandes SQL de modification facilite et accélère l’implémentation de ces modifications sur la base de données de production en cliquant sur un bouton, mais nécessite l’apprentissage et la maîtrise de la syntaxe et des instructions SQL pour la création et la modification d’objets de base de données.</span><span class="sxs-lookup"><span data-stu-id="b6882-197">Documenting database changes in prose is easy, but implementing the changes requires a developer to make each change on the production database one at a time; documenting the change SQL commands makes implementing those changes on the production database as easy and quick as clicking a button, but requires learning and mastering the SQL statements and syntax for creating and altering database objects.</span></span> <span data-ttu-id="b6882-198">Les outils de comparaison de base de données tirent le meilleur des deux approches et ignorent le pire.</span><span class="sxs-lookup"><span data-stu-id="b6882-198">Database comparison tools take the best from both approaches and discard the worst.</span></span>

<span data-ttu-id="b6882-199">Un outil de comparaison de base de données compare le schéma ou les données de deux bases de données et affiche un rapport de synthèse qui vous indique la différence entre les bases de données.</span><span class="sxs-lookup"><span data-stu-id="b6882-199">A database comparison tool compares the schema or data of two databases and displays a summary report showing you how the databases differ.</span></span> <span data-ttu-id="b6882-200">Ensuite, à l’aide d’un clic sur un bouton, vous pouvez générer les commandes SQL pour synchroniser un ou plusieurs objets de base de données.</span><span class="sxs-lookup"><span data-stu-id="b6882-200">Then, with the click of a button, you can generate the SQL commands for synchronizing one or more database objects.</span></span> <span data-ttu-id="b6882-201">En résumé, vous pouvez utiliser un outil de comparaison de base de données pour comparer les bases de données de développement et de production au moment du déploiement, en générant un fichier contenant les commandes SQL qui, lorsqu’elles sont exécutées, applique les modifications au schéma de la base de données de production afin qu’il met en miroir le schéma s de la base de données de développement.</span><span class="sxs-lookup"><span data-stu-id="b6882-201">In a nutshell, you can use a database comparison tool to compare the development and production databases at deploy-time, generating a file that contains the SQL commands that, when executed, will apply the changes to the production database s schema so that it mirrors the development database s schema.</span></span>

<span data-ttu-id="b6882-202">Il existe un large éventail d’outils de comparaison de base de données tiers proposés par de nombreux fournisseurs différents.</span><span class="sxs-lookup"><span data-stu-id="b6882-202">There are a variety of third-party database comparison tools offered by many different vendors.</span></span> <span data-ttu-id="b6882-203">Par exemple, le [*logiciel Red Gate*](http://www.red-gate.com/)est un exemple de [*comparaison SQL*](http://www.red-gate.com/products/SQL_Compare/).</span><span class="sxs-lookup"><span data-stu-id="b6882-203">One such example is [*SQL Compare*](http://www.red-gate.com/products/SQL_Compare/), by [*Red Gate Software*](http://www.red-gate.com/).</span></span> <span data-ttu-id="b6882-204">Passons en revue le processus d’utilisation de SQL Compare pour comparer et synchroniser les schémas de base de données de développement et de production.</span><span class="sxs-lookup"><span data-stu-id="b6882-204">Let s walk through the process of using SQL Compare to compare and synchronize the development and production databases schemas.</span></span>

> [!NOTE]
> <span data-ttu-id="b6882-205">Au moment de la rédaction de cet article, la version actuelle de SQL Compare était la version 7,1, avec l’édition standard d’un coût de $395.</span><span class="sxs-lookup"><span data-stu-id="b6882-205">At the time of this writing the current version of SQL Compare was version 7.1, with the Standard Edition costing $395.</span></span> <span data-ttu-id="b6882-206">Vous pouvez suivre la procédure en téléchargeant une version d’évaluation gratuite de 14 jours.</span><span class="sxs-lookup"><span data-stu-id="b6882-206">You can follow along by downloading a free 14-day trial.</span></span>

<span data-ttu-id="b6882-207">Quand la comparaison SQL démarre, la boîte de dialogue projets de comparaison s’ouvre et affiche les projets de comparaison SQL enregistrés.</span><span class="sxs-lookup"><span data-stu-id="b6882-207">When SQL Compare starts the Comparison Projects dialog box opens, showing the saved SQL Compare projects.</span></span> <span data-ttu-id="b6882-208">Créez un nouveau projet.</span><span class="sxs-lookup"><span data-stu-id="b6882-208">Create a new project.</span></span> <span data-ttu-id="b6882-209">Cette opération lance l’Assistant Configuration du projet, qui vous invite à entrer des informations sur les bases de données à comparer (voir la figure 1).</span><span class="sxs-lookup"><span data-stu-id="b6882-209">This launches the Project Configuration wizard, which prompts for information about the databases to compare (see Figure 1).</span></span> <span data-ttu-id="b6882-210">Entrez les informations pour les bases de données environnement de développement et de production.</span><span class="sxs-lookup"><span data-stu-id="b6882-210">Enter the information for the development and production environment databases.</span></span>

<span data-ttu-id="b6882-211">[![comparer les bases de données de développement et de production](strategies-for-database-development-and-deployment-vb/_static/image2.jpg)](strategies-for-database-development-and-deployment-vb/_static/image1.jpg)</span><span class="sxs-lookup"><span data-stu-id="b6882-211">[![Compare the Development and Production Databases](strategies-for-database-development-and-deployment-vb/_static/image2.jpg)](strategies-for-database-development-and-deployment-vb/_static/image1.jpg)</span></span>

<span data-ttu-id="b6882-212">**Figure 1**: comparer les bases de données de développement et de production ([cliquez pour afficher l’image en taille réelle](strategies-for-database-development-and-deployment-vb/_static/image3.jpg))</span><span class="sxs-lookup"><span data-stu-id="b6882-212">**Figure 1**: Compare the Development and Production Databases ([Click to view full-size image](strategies-for-database-development-and-deployment-vb/_static/image3.jpg))</span></span>

> [!NOTE]
> <span data-ttu-id="b6882-213">Si votre base de données de l’environnement de développement est un fichier de base de données SQL Express Edition dans le dossier `App_Data` de votre site Web, vous devez inscrire la base de données sur le serveur de base de données SQL Server Express afin de la sélectionner dans la boîte de dialogue illustrée dans la figure 1.</span><span class="sxs-lookup"><span data-stu-id="b6882-213">If your development environment database is a SQL Express Edition database file in the `App_Data` folder of your website you will need to register the database in the SQL Server Express database server in order to select it from the dialog box shown in Figure 1.</span></span> <span data-ttu-id="b6882-214">Pour ce faire, la méthode la plus simple consiste à ouvrir SQL Server Management Studio (SSMS), à se connecter au serveur de base de données SQL Server Express et à attacher la base de données.</span><span class="sxs-lookup"><span data-stu-id="b6882-214">The easiest way to accomplish this is to open SQL Server Management Studio (SSMS), connect to the SQL Server Express database server, and attach the database.</span></span> <span data-ttu-id="b6882-215">Si SSMS n’est pas installé sur votre ordinateur, vous pouvez télécharger et installer la [*version gratuite SQL Server 2008 Management Studio de base*](https://www.microsoft.com/downloads/details.aspx?FamilyId=7522A683-4CB2-454E-B908-E805E9BD4E28&amp;displaylang=en).</span><span class="sxs-lookup"><span data-stu-id="b6882-215">If you do not have SSMS installed on your computer you can download and install the free [*SQL Server 2008 Management Studio Basic version*](https://www.microsoft.com/downloads/details.aspx?FamilyId=7522A683-4CB2-454E-B908-E805E9BD4E28&amp;displaylang=en).</span></span>

<span data-ttu-id="b6882-216">En plus de sélectionner les bases de données à comparer, vous pouvez également spécifier différents paramètres de comparaison à partir de l’onglet Options. Vous pouvez activer l’option « Ignorer les contraintes et les noms d’index ».</span><span class="sxs-lookup"><span data-stu-id="b6882-216">In addition to selecting the databases to compare, you can also specify a variety of comparison settings from the Options tab. One option you may want to turn on is the "Ignore constraint and index names."</span></span> <span data-ttu-id="b6882-217">Rappelez-vous que dans le didacticiel précédent, nous avons ajouté les objets de base de données des services d’application aux bases de données de développement et de production.</span><span class="sxs-lookup"><span data-stu-id="b6882-217">Recall that in the preceding tutorial we added the application services database objects to the development and production databases.</span></span> <span data-ttu-id="b6882-218">Si vous avez utilisé l’outil `aspnet_regsql.exe` pour créer ces objets sur la base de données de production, vous constaterez que les noms de clé primaire et de contrainte unique diffèrent entre les bases de données de développement et de production.</span><span class="sxs-lookup"><span data-stu-id="b6882-218">If you used the `aspnet_regsql.exe` tool to create these objects on the production database then you will find that the primary key and unique constraint names differ between the development and production databases.</span></span> <span data-ttu-id="b6882-219">Par conséquent, la comparaison SQL marquera toutes les tables de services d’application comme différentes.</span><span class="sxs-lookup"><span data-stu-id="b6882-219">Consequently, SQL Compare will flag all of the application services tables as differing.</span></span> <span data-ttu-id="b6882-220">Vous pouvez soit ne pas cocher l’option « Ignorer les contraintes et les noms d’index » et synchroniser les noms des contraintes, soit demander à SQL Compare d’ignorer ces différences.</span><span class="sxs-lookup"><span data-stu-id="b6882-220">You can either leave the "Ignore constraint and index names" unchecked and synchronize the constraint names, or instruct SQL Compare to ignore these differences.</span></span>

<span data-ttu-id="b6882-221">Après avoir sélectionné les bases de données à comparer (et consulté les options de comparaison), cliquez sur le bouton comparer maintenant pour commencer la comparaison.</span><span class="sxs-lookup"><span data-stu-id="b6882-221">After selecting the databases to compare (and reviewing the comparison options), click the Compare Now button to begin the comparison.</span></span> <span data-ttu-id="b6882-222">Au cours des prochaines secondes, SQL Compare examine les schémas des deux bases de données et génère un rapport sur leur différence.</span><span class="sxs-lookup"><span data-stu-id="b6882-222">Over the next several seconds, SQL Compare examines the schemas of the two databases and generates a report of how they differ.</span></span> <span data-ttu-id="b6882-223">J’ai apporté des modifications intentionnelles à la base de données de développement pour montrer comment ces différences sont notées dans l’interface de comparaison SQL.</span><span class="sxs-lookup"><span data-stu-id="b6882-223">I ve purposefully made some modifications to the development database to show how such discrepancies are noted in the SQL Compare interface.</span></span> <span data-ttu-id="b6882-224">Comme le montre la figure 2, j’ai ajouté une `BirthDate` colonne à la table `Authors`, supprimé la `ISBN` colonne de la table `Books` et ajouté une nouvelle table, `Ratings`, qui est destinée à permettre aux utilisateurs visitant le site le tarif révisé.</span><span class="sxs-lookup"><span data-stu-id="b6882-224">As Figure 2 shows, I ve added a `BirthDate` column to the `Authors` table, removed the `ISBN` column from the `Books` table, and added a new table, `Ratings`, which is meant to let users visiting the site rate the reviewed books.</span></span>

> [!NOTE]
> <span data-ttu-id="b6882-225">Les modifications apportées au modèle de données dans ce didacticiel ont été effectuées pour illustrer l’utilisation d’un outil de comparaison de base de données.</span><span class="sxs-lookup"><span data-stu-id="b6882-225">The data model changes made in this tutorial were done to illustrate using a database comparison tool.</span></span> <span data-ttu-id="b6882-226">Vous ne trouverez pas ces modifications dans la base de données dans d’autres didacticiels.</span><span class="sxs-lookup"><span data-stu-id="b6882-226">You will not find these changes in the database in future tutorials.</span></span>

<span data-ttu-id="b6882-227">[![comparaison SQL répertorie les différences entre les bases de données de production et de développement](strategies-for-database-development-and-deployment-vb/_static/image5.jpg)](strategies-for-database-development-and-deployment-vb/_static/image4.jpg)</span><span class="sxs-lookup"><span data-stu-id="b6882-227">[![SQL Compare Lists the Differences Between the Development and Production Databases](strategies-for-database-development-and-deployment-vb/_static/image5.jpg)](strategies-for-database-development-and-deployment-vb/_static/image4.jpg)</span></span>

<span data-ttu-id="b6882-228">**Figure 2**: la comparaison SQL répertorie les différences entre les bases de données de production et de développement ([cliquez pour afficher l’image en taille réelle](strategies-for-database-development-and-deployment-vb/_static/image6.jpg))</span><span class="sxs-lookup"><span data-stu-id="b6882-228">**Figure 2**: SQL Compare Lists the Differences Between the Development and Production Databases ([Click to view full-size image](strategies-for-database-development-and-deployment-vb/_static/image6.jpg))</span></span>

<span data-ttu-id="b6882-229">SQL Compare divise les objets de base de données en groupes, ce qui vous permet de visualiser rapidement les objets qui existent dans les deux bases de données, mais qui sont différents, quels sont les objets présents dans une base de données mais pas dans l’autre, et quels objets sont identiques.</span><span class="sxs-lookup"><span data-stu-id="b6882-229">SQL Compare breaks down the database objects into groups, quickly showing you what objects exist in both databases but are different, which objects exist in one database but not the other, and which objects are identical.</span></span> <span data-ttu-id="b6882-230">Comme vous pouvez le voir, il existe deux objets qui existent dans les deux bases de données, mais qui sont différents : la table `Authors`, qui avait une colonne ajoutée, et la table `Books`, qui avait été supprimée.</span><span class="sxs-lookup"><span data-stu-id="b6882-230">As you can see, there are two objects that exist in both databases but are different: the `Authors` table, which had a column added, and the `Books` table, which had one removed.</span></span> <span data-ttu-id="b6882-231">Il existe un objet qui existe uniquement dans la base de données de développement, à savoir la table de `Ratings` nouvellement créée.</span><span class="sxs-lookup"><span data-stu-id="b6882-231">There is one object that exists only in the development database, namely the newly created `Ratings` table.</span></span> <span data-ttu-id="b6882-232">De plus, il existe 117 objets identiques dans les deux bases de données.</span><span class="sxs-lookup"><span data-stu-id="b6882-232">And there are 117 objects that are identical in both databases.</span></span>

<span data-ttu-id="b6882-233">La sélection d’un objet de base de données affiche la fenêtre différences SQL, qui indique la différence entre ces objets.</span><span class="sxs-lookup"><span data-stu-id="b6882-233">Selecting a database object displays the SQL Differences window, which shows how these objects differ.</span></span> <span data-ttu-id="b6882-234">La fenêtre différences SQL, affichée en bas de la figure 2, met en évidence que la table `Authors` de la base de données de développement contient la colonne `BirthDate`, qui est introuvable dans la table `Authors` de la base de données de production.</span><span class="sxs-lookup"><span data-stu-id="b6882-234">The SQL Differences window, displayed at the bottom in Figure 2, highlights that the `Authors` table in the development database has the `BirthDate` column, which is not found in the `Authors` table on the production database.</span></span>

<span data-ttu-id="b6882-235">Après avoir examiné les différences et sélectionné les objets à synchroniser, l’étape suivante consiste à générer les commandes SQL nécessaires pour mettre à jour le schéma s de la base de données de production afin qu’il corresponde à la base de données de développement.</span><span class="sxs-lookup"><span data-stu-id="b6882-235">After reviewing the differences and selecting which objects you want to synchronize, the next step is to generate the SQL commands needed to update the production database s schema to match the development database.</span></span> <span data-ttu-id="b6882-236">Pour ce faire, vous devez utiliser l’Assistant synchronisation.</span><span class="sxs-lookup"><span data-stu-id="b6882-236">This is accomplished through the Synchronization Wizard.</span></span> <span data-ttu-id="b6882-237">L’Assistant synchronisation confirme les objets à synchroniser et résume le plan d’action (voir figure 3).</span><span class="sxs-lookup"><span data-stu-id="b6882-237">The Synchronization Wizard confirms what objects to synchronize and summarizes the action plan (see Figure 3).</span></span> <span data-ttu-id="b6882-238">Vous pouvez synchroniser les bases de données immédiatement ou générer un script avec les commandes SQL qui peuvent être exécutées à votre convenance.</span><span class="sxs-lookup"><span data-stu-id="b6882-238">You can synchronize the databases immediately or generate a script with the SQL commands that can be run at your leisure.</span></span>

<span data-ttu-id="b6882-239">[![utiliser l’Assistant synchronisation pour synchroniser vos schémas de base de données](strategies-for-database-development-and-deployment-vb/_static/image8.jpg)](strategies-for-database-development-and-deployment-vb/_static/image7.jpg)</span><span class="sxs-lookup"><span data-stu-id="b6882-239">[![Use the Synchronization Wizard to Synchronize Your Databases Schemas](strategies-for-database-development-and-deployment-vb/_static/image8.jpg)](strategies-for-database-development-and-deployment-vb/_static/image7.jpg)</span></span>

<span data-ttu-id="b6882-240">**Figure 3**: utiliser l’Assistant synchronisation pour synchroniser vos schémas de base de données ([cliquez pour afficher l’image en taille réelle](strategies-for-database-development-and-deployment-vb/_static/image9.jpg))</span><span class="sxs-lookup"><span data-stu-id="b6882-240">**Figure 3**: Use the Synchronization Wizard to Synchronize Your Databases Schemas ([Click to view full-size image](strategies-for-database-development-and-deployment-vb/_static/image9.jpg))</span></span>

<span data-ttu-id="b6882-241">Les outils de comparaison de base de données tels que les comparaisons SQL du logiciel Red Gate permettent d’appliquer les modifications au schéma de la base de données de développement dans la base de données de production aussi facilement qu’un point et un clic.</span><span class="sxs-lookup"><span data-stu-id="b6882-241">Database comparison tools like Red Gate Software s SQL Compare make applying the changes to the development database schema to the production database as easy as point and click.</span></span>

> [!NOTE]
> <span data-ttu-id="b6882-242">La comparaison SQL Compare et synchronise deux *schémas*de base de données.</span><span class="sxs-lookup"><span data-stu-id="b6882-242">SQL Compare compares and synchronizes two databases *schemas*.</span></span> <span data-ttu-id="b6882-243">Malheureusement, il ne compare pas et ne synchronise pas les données dans deux tables de bases de données.</span><span class="sxs-lookup"><span data-stu-id="b6882-243">Unfortunately, it does not compare and synchronize the data within two databases tables.</span></span> <span data-ttu-id="b6882-244">Le logiciel Red Gate offre un produit nommé [*Comparaison de données SQL*](http://www.red-gate.com/products/SQL_Data_Compare/) qui compare et synchronise les données entre deux bases de données, mais il s’agit d’un produit distinct de SQL Compare et coûte un autre $395.</span><span class="sxs-lookup"><span data-stu-id="b6882-244">Red Gate Software does offer a product named [*SQL Data Compare*](http://www.red-gate.com/products/SQL_Data_Compare/) that compares and synchronizes the data between two databases, but it is a separate product from SQL Compare and costs another $395.</span></span>

## <a name="taking-the-application-offline-during-deployment"></a><span data-ttu-id="b6882-245">Mise hors connexion de l’application pendant le déploiement</span><span class="sxs-lookup"><span data-stu-id="b6882-245">Taking the Application Offline During Deployment</span></span>

<span data-ttu-id="b6882-246">Comme nous l’avons vu dans ces didacticiels, le déploiement est un processus qui implique plusieurs étapes : copie des pages ASP.NET, des pages maîtres, des fichiers CSS, des fichiers JavaScript, des images et d’autres contenus nécessaires de l’environnement de développement vers la production environnement copie des informations de configuration spécifiques à l’environnement de production, si nécessaire ; et l’application des modifications au modèle de données depuis le dernier déploiement.</span><span class="sxs-lookup"><span data-stu-id="b6882-246">As we ve seen throughout these tutorials, deployment is a process that involves multiple steps: copying the ASP.NET pages, master pages, CSS files, JavaScript files, images, and other necessary content from the development environment to the production environment; copying up the production environment-specific configuration information, if needed; and applying the changes to the data model since the last deployment.</span></span> <span data-ttu-id="b6882-247">En fonction du nombre de fichiers et de la complexité des modifications apportées à votre base de données, ces étapes peuvent prendre de quelques secondes à plusieurs minutes.</span><span class="sxs-lookup"><span data-stu-id="b6882-247">Depending on the number of files and the complexity of your database changes, these steps can take anywhere from a few seconds to several minutes to complete.</span></span> <span data-ttu-id="b6882-248">Au cours de cette fenêtre, l’application Web est en flux et les utilisateurs visitant le site peuvent rencontrer des erreurs ou un comportement inattendu.</span><span class="sxs-lookup"><span data-stu-id="b6882-248">During this window the web application is in flux and users visiting the site may experience errors or unexpected behavior.</span></span>

<span data-ttu-id="b6882-249">Lors du déploiement d’un site Web, il est préférable de mettre l’application Web hors connexion jusqu’à ce que le déploiement soit terminé.</span><span class="sxs-lookup"><span data-stu-id="b6882-249">When deploying a website it is best to take the web application "offline" until deployment has completed.</span></span> <span data-ttu-id="b6882-250">La mise hors connexion de l’application (et sa sauvegarde une fois le processus de déploiement terminé) est aussi simple que le chargement d’un fichier, puis sa suppression.</span><span class="sxs-lookup"><span data-stu-id="b6882-250">Taking the application offline (and bringing it back up once the deployment process has finished) is as easy as uploading a file and then deleting it.</span></span> <span data-ttu-id="b6882-251">À compter de ASP.NET 2,0, la simple présence d’un fichier nommé `app_offline.htm` dans le répertoire racine de l’application prend l’intégralité du site Web « hors connexion ».</span><span class="sxs-lookup"><span data-stu-id="b6882-251">Starting with ASP.NET 2.0, the mere presence of a file named `app_offline.htm` in the application s root directory takes the entire website "offline."</span></span> <span data-ttu-id="b6882-252">Toute demande à une page ASP.NET sur ce site répond automatiquement au contenu du fichier `app_offline.htm`.</span><span class="sxs-lookup"><span data-stu-id="b6882-252">Any request to an ASP.NET page on that site is automatically responded with the contents of the `app_offline.htm` file.</span></span> <span data-ttu-id="b6882-253">Une fois ce fichier supprimé, l’application est de nouveau en ligne.</span><span class="sxs-lookup"><span data-stu-id="b6882-253">Once that file is removed, the application comes back online.</span></span>

<span data-ttu-id="b6882-254">Mettre une application hors connexion pendant le déploiement, est aussi simple que de charger un fichier `app_offline.htm` dans le répertoire racine de l’environnement de production avant de commencer le processus de déploiement, puis de le supprimer (ou de le renommer autre chose) une fois le déploiement terminé.</span><span class="sxs-lookup"><span data-stu-id="b6882-254">Taking an application offline during deployment, then, is as simple as uploading an `app_offline.htm` file to the production environment s root directory prior to beginning the deployment process and then deleting it (or renaming it to something else) once deployment is complete.</span></span> <span data-ttu-id="b6882-255">Pour plus d’informations sur cette technique, reportez-vous à l’article John Peterson s, mise [*hors connexion d’une Application ASP.net*](http://www.15seconds.com/issue/061207.htm).</span><span class="sxs-lookup"><span data-stu-id="b6882-255">For more information on this technique refer to John Peterson s article, Taking an [*ASP.NET Application Offline*](http://www.15seconds.com/issue/061207.htm).</span></span>

## <a name="summary"></a><span data-ttu-id="b6882-256">Récapitulatif</span><span class="sxs-lookup"><span data-stu-id="b6882-256">Summary</span></span>

<span data-ttu-id="b6882-257">Le principal défi du déploiement d’une application pilotée par les données consiste à délimiter le déploiement de la base de données.</span><span class="sxs-lookup"><span data-stu-id="b6882-257">The main challenge in deploying a data-driven application centers around deploying the database.</span></span> <span data-ttu-id="b6882-258">Comme il existe deux versions de la base de données, une dans l’environnement de développement et l’autre dans l’environnement de production, ces deux schémas de bases de données peuvent être désynchronisés à mesure que de nouvelles fonctionnalités sont ajoutées au développement.</span><span class="sxs-lookup"><span data-stu-id="b6882-258">Because there are two versions of the database - one in the development environment and one in the production environment - these two databases schemas can become out of sync as new features are added in development.</span></span> <span data-ttu-id="b6882-259">En effet, comme la base de données de production est remplie avec des données réelles d’utilisateurs réels, vous ne pouvez pas remplacer la base de données de production par la base de données de développement modifiée, comme vous pouvez le faire lors du déploiement des fichiers qui composent l’application (les pages ASP.NET, fichiers image, et ainsi de suite).</span><span class="sxs-lookup"><span data-stu-id="b6882-259">What s more, because the production database as being populated with real data from real users, you cannot overwrite the production database with the modified development database like you can when deploying the files that make up the application (the ASP.NET pages, image files, and so forth).</span></span> <span data-ttu-id="b6882-260">Au lieu de cela, le déploiement d’une base de données implique l’implémentation de l’ensemble précis des modifications apportées à la base de données de développement sur la base de données de production depuis le dernier déploiement.</span><span class="sxs-lookup"><span data-stu-id="b6882-260">Instead, deploying a database entails implementing the precise set of changes made to the development database on the production database since the last deployment.</span></span>

<span data-ttu-id="b6882-261">Ce didacticiel a étudié trois techniques pour la gestion et l’application d’un journal des modifications de la base de données.</span><span class="sxs-lookup"><span data-stu-id="b6882-261">This tutorial looked at three techniques for maintaining and applying a log of database changes.</span></span> <span data-ttu-id="b6882-262">L’approche la plus simple consiste à enregistrer les modifications dans le proseware.</span><span class="sxs-lookup"><span data-stu-id="b6882-262">The simplest approach is to record the changes in prose.</span></span> <span data-ttu-id="b6882-263">Bien que cette tactique rende l’implémentation de ces modifications sur la base de données de production un processus manuel, elle ne nécessite pas de connaissance des commandes SQL pour la création et la modification d’objets de base de données.</span><span class="sxs-lookup"><span data-stu-id="b6882-263">While this tactic makes implementing these changes on the production database a manual process, it does not require knowledge of the SQL commands for creating and altering database objects.</span></span> <span data-ttu-id="b6882-264">Une approche plus sophistiquée, qui est bien plus facile à utiliser dans les projets de plus grande envergure ou avec plusieurs développeurs, consiste à enregistrer les modifications sous la forme d’une série de commandes SQL.</span><span class="sxs-lookup"><span data-stu-id="b6882-264">A more sophisticated approach, and one that is much more palatable in larger projects or projects with multiple developers, is to record the changes as a series of SQL commands.</span></span> <span data-ttu-id="b6882-265">Cela Hastens le déploiement de ces modifications dans la base de données cible.</span><span class="sxs-lookup"><span data-stu-id="b6882-265">This greatly hastens rolling out these changes to the target database.</span></span> <span data-ttu-id="b6882-266">Le meilleur des deux approches peut être obtenu à l’aide d’un outil de comparaison de base de données, tel que la comparaison SQL de Red Gate Software s.</span><span class="sxs-lookup"><span data-stu-id="b6882-266">The best of both approaches can be achieved by using a database comparison tool, such as Red Gate Software s SQL Compare.</span></span>

<span data-ttu-id="b6882-267">Ce didacticiel se concentre sur le déploiement d’une application pilotée par les données.</span><span class="sxs-lookup"><span data-stu-id="b6882-267">This tutorial concludes our focus on deploying a data-driven application.</span></span> <span data-ttu-id="b6882-268">L’ensemble suivant de didacticiels explique comment répondre aux erreurs dans l’environnement de production.</span><span class="sxs-lookup"><span data-stu-id="b6882-268">The next set of tutorials looks at how to respond to errors in the production environment.</span></span> <span data-ttu-id="b6882-269">Nous allons voir comment afficher une page d’erreur conviviale plutôt que l’écran jaune de décès.</span><span class="sxs-lookup"><span data-stu-id="b6882-269">We'll look at how to display a friendly error page rather instead of the Yellow Screen of Death.</span></span> <span data-ttu-id="b6882-270">Et nous verrons comment consigner les détails des erreurs et comment vous alerter lorsque de telles erreurs se produisent.</span><span class="sxs-lookup"><span data-stu-id="b6882-270">And we'll see how to log the error s details and how to alert you when such errors occur.</span></span>

<span data-ttu-id="b6882-271">Bonne programmation !</span><span class="sxs-lookup"><span data-stu-id="b6882-271">Happy Programming!</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="b6882-272">[Précédent](configuring-a-website-that-uses-application-services-vb.md)
> [Suivant](displaying-a-custom-error-page-vb.md)</span><span class="sxs-lookup"><span data-stu-id="b6882-272">[Previous](configuring-a-website-that-uses-application-services-vb.md)
[Next](displaying-a-custom-error-page-vb.md)</span></span>

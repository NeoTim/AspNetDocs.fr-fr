---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/core-differences-between-iis-and-the-asp-net-development-server-cs
title: Principales différences entre IIS et le Serveur de développement ASP.NET (C#) | Microsoft Docs
author: rick-anderson
description: Lors du test d’une application ASP.NET localement, il est probable que vous utilisez le serveur Web de développement ASP.NET. Toutefois, le site Web de production est probablement pow...
ms.author: riande
ms.date: 04/01/2009
ms.assetid: 13a5a423-9235-4dde-b408-2fd10f791d63
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/core-differences-between-iis-and-the-asp-net-development-server-cs
msc.type: authoredcontent
ms.openlocfilehash: 7fea3939bd910a052340215c207013e2269f32a2
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/28/2019
ms.locfileid: "74617531"
---
# <a name="core-differences-between-iis-and-the-aspnet-development-server-c"></a><span data-ttu-id="066cb-104">Différences principales entre IIS et le serveur de développement ASP.NET (C#)</span><span class="sxs-lookup"><span data-stu-id="066cb-104">Core Differences Between IIS and the ASP.NET Development Server (C#)</span></span>

<span data-ttu-id="066cb-105">par [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="066cb-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="066cb-106">[Télécharger le code](https://download.microsoft.com/download/4/5/F/45F815EC-8B0E-46D3-9FB8-2DC015CCA306/ASPNET_Hosting_Tutorial_06_CS.zip) ou [Télécharger le PDF](https://download.microsoft.com/download/E/8/9/E8920AE6-D441-41A7-8A77-9EF8FF970D8B/aspnet_tutorial06_WebServerDiff_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="066cb-106">[Download Code](https://download.microsoft.com/download/4/5/F/45F815EC-8B0E-46D3-9FB8-2DC015CCA306/ASPNET_Hosting_Tutorial_06_CS.zip) or [Download PDF](https://download.microsoft.com/download/E/8/9/E8920AE6-D441-41A7-8A77-9EF8FF970D8B/aspnet_tutorial06_WebServerDiff_cs.pdf)</span></span>

> <span data-ttu-id="066cb-107">Lors du test d’une application ASP.NET localement, il est probable que vous utilisez le serveur Web de développement ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="066cb-107">When testing an ASP.NET application locally, chances are you are using the ASP.NET Development Web Server.</span></span> <span data-ttu-id="066cb-108">Toutefois, le site Web de production est probablement doté d’IIS.</span><span class="sxs-lookup"><span data-stu-id="066cb-108">However, the production website is most likely powered IIS.</span></span> <span data-ttu-id="066cb-109">Il existe quelques différences entre la façon dont ces serveurs Web gèrent les demandes et ces différences peuvent avoir des conséquences importantes.</span><span class="sxs-lookup"><span data-stu-id="066cb-109">There are some differences between how these web servers handle requests, and these differences can have important consequences.</span></span> <span data-ttu-id="066cb-110">Ce didacticiel explore quelques-unes des différences les plus allemandes.</span><span class="sxs-lookup"><span data-stu-id="066cb-110">This tutorial explores some of the more germane differences.</span></span>

## <a name="introduction"></a><span data-ttu-id="066cb-111">Introduction</span><span class="sxs-lookup"><span data-stu-id="066cb-111">Introduction</span></span>

<span data-ttu-id="066cb-112">Chaque fois qu’un utilisateur visite une application ASP.NET, son navigateur envoie une demande au site Web.</span><span class="sxs-lookup"><span data-stu-id="066cb-112">Whenever a user visits an ASP.NET application his browser sends a request to the website.</span></span> <span data-ttu-id="066cb-113">Cette requête est récupérée par le logiciel de serveur Web, qui coordonne le runtime ASP.NET pour générer et retourner le contenu de la ressource demandée.</span><span class="sxs-lookup"><span data-stu-id="066cb-113">That request is picked up by the web server software, which coordinates with the ASP.NET runtime to generate and return the content for the requested resource.</span></span> <span data-ttu-id="066cb-114">Le[ POI i nformations **S** ervices (IIS)](http://en.wikipedia.org/wiki/Internet_Information_Services) est une suite de services qui fournit des fonctionnalités Internet courantes pour les serveurs Windows.</span><span class="sxs-lookup"><span data-stu-id="066cb-114">The[**I** nternet **I** nformation **S** ervices (IIS)](http://en.wikipedia.org/wiki/Internet_Information_Services) are a suite of services that provide common Internet-based functionality for Windows servers.</span></span> <span data-ttu-id="066cb-115">IIS est le serveur Web le plus couramment utilisé pour les applications ASP.NET dans des environnements de production. Il est probable que le logiciel de serveur Web utilisé par votre fournisseur d’hébergement Web serve à votre application ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="066cb-115">IIS is the most commonly used web server for ASP.NET applications in production environments; it's most likely the web server software being used by your web host provider to serve your ASP.NET application.</span></span> <span data-ttu-id="066cb-116">IIS peut également être utilisé comme logiciel de serveur Web dans l’environnement de développement, même si cela implique l’installation d’IIS et sa configuration correcte.</span><span class="sxs-lookup"><span data-stu-id="066cb-116">IIS can also be used as the web server software in the development environment, although this entails installing IIS and properly configuring it.</span></span>

<span data-ttu-id="066cb-117">Le Serveur de développement ASP.NET est une autre option de serveur Web pour l’environnement de développement. elle est fournie avec et est intégrée à Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="066cb-117">The ASP.NET Development Server is an alternative web server option for the development environment; it ships with and is integrated into Visual Studio.</span></span> <span data-ttu-id="066cb-118">À moins que l’application Web ne soit configurée pour utiliser IIS, le Serveur de développement ASP.NET est automatiquement démarré et utilisé comme serveur Web la première fois que vous visitez une page Web dans Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="066cb-118">Unless the web application has been configured to use IIS, the ASP.NET Development Server is automatically started and used as the web server the first time you visit a web page from within Visual Studio.</span></span> <span data-ttu-id="066cb-119">Les applications Web de démonstration que nous avons créées dans le didacticiel [*détermination des fichiers qui doivent être déployés*](determining-what-files-need-to-be-deployed-cs.md) étaient à la fois des applications Web basées sur le système de fichiers qui n’ont pas été configurées pour utiliser IIS.</span><span class="sxs-lookup"><span data-stu-id="066cb-119">The demo web applications we created back in the [*Determining What Files Need to Be Deployed*](determining-what-files-need-to-be-deployed-cs.md) tutorial were both file system-based web applications that were not configured to use IIS.</span></span> <span data-ttu-id="066cb-120">Par conséquent, lorsque vous visitez l’un de ces sites Web dans Visual Studio, le Serveur de développement ASP.NET est utilisé.</span><span class="sxs-lookup"><span data-stu-id="066cb-120">Therefore, when visiting either of these websites from within Visual Studio the ASP.NET Development Server is used.</span></span>

<span data-ttu-id="066cb-121">Dans un monde parfait, les environnements de développement et de production seraient identiques.</span><span class="sxs-lookup"><span data-stu-id="066cb-121">In a perfect world the development and production environments would be identical.</span></span> <span data-ttu-id="066cb-122">Toutefois, comme nous l’avons vu dans le didacticiel précédent, il n’est pas rare que les environnements aient des paramètres de configuration différents.</span><span class="sxs-lookup"><span data-stu-id="066cb-122">However, as we discussed in the preceding tutorial it is not uncommon for the environments to have differing configuration settings.</span></span> <span data-ttu-id="066cb-123">L’utilisation de différents logiciels de serveur Web dans les environnements ajoute une autre variable qui doit être prise en considération lors du déploiement d’une application.</span><span class="sxs-lookup"><span data-stu-id="066cb-123">Using different web server software in the environments adds another variable that must be taken into consideration when deploying an application.</span></span> <span data-ttu-id="066cb-124">Ce didacticiel couvre les principales différences entre IIS et le Serveur de développement ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="066cb-124">This tutorial covers the key differences between IIS and the ASP.NET Development Server.</span></span> <span data-ttu-id="066cb-125">En raison de ces différences, il existe des scénarios dans lesquels le code qui s’exécute parfaitement dans l’environnement de développement lève une exception ou se comporte différemment lorsqu’il est exécuté en production.</span><span class="sxs-lookup"><span data-stu-id="066cb-125">Because of these differences there are scenarios where code that runs flawlessly in the development environment throws an exception or behaves differently when executed in production.</span></span>

## <a name="security-context-differences"></a><span data-ttu-id="066cb-126">Différences du contexte de sécurité</span><span class="sxs-lookup"><span data-stu-id="066cb-126">Security Context Differences</span></span>

<span data-ttu-id="066cb-127">Chaque fois que le logiciel de serveur Web gère une demande entrante, il l’associe à un contexte de sécurité particulier.</span><span class="sxs-lookup"><span data-stu-id="066cb-127">Whenever the web server software handles an incoming request it associates that request with a particular security context.</span></span> <span data-ttu-id="066cb-128">Ces informations de contexte de sécurité sont utilisées par le système d’exploitation pour déterminer les actions autorisées par la demande.</span><span class="sxs-lookup"><span data-stu-id="066cb-128">This security context information is used by the operating system to determine what actions are permissible by the request.</span></span> <span data-ttu-id="066cb-129">Par exemple, une page ASP.NET peut inclure du code qui journalise un message dans un fichier sur le disque.</span><span class="sxs-lookup"><span data-stu-id="066cb-129">For example, an ASP.NET page might include code that logs some message to a file on disk.</span></span> <span data-ttu-id="066cb-130">Pour que cette page ASP.NET s’exécute sans erreur, le contexte de sécurité doit avoir les autorisations de niveau système de fichiers appropriées, à savoir les autorisations d’écriture sur ce fichier.</span><span class="sxs-lookup"><span data-stu-id="066cb-130">In order for this ASP.NET page to execute without error, the security context must have the appropriate file system-level permissions, namely write permissions on that file.</span></span>

<span data-ttu-id="066cb-131">Le Serveur de développement ASP.NET associe les demandes entrantes au contexte de sécurité de l’utilisateur actuellement connecté.</span><span class="sxs-lookup"><span data-stu-id="066cb-131">The ASP.NET Development Server associates incoming requests with the security context of the currently logged on user.</span></span> <span data-ttu-id="066cb-132">Si vous êtes connecté à votre bureau en tant qu’administrateur, les pages ASP.NET desservies par le Serveur de développement ASP.NET auront les mêmes droits d’accès qu’un administrateur.</span><span class="sxs-lookup"><span data-stu-id="066cb-132">If you are logged on to your desktop as an administrator, then the ASP.NET pages served by the ASP.NET Development Server will have the same access rights as an administrator.</span></span> <span data-ttu-id="066cb-133">Toutefois, les requêtes ASP.NET gérées par IIS sont associées à un compte d’ordinateur spécifique.</span><span class="sxs-lookup"><span data-stu-id="066cb-133">However, ASP.NET requests handled by IIS are associated with a specific machine account.</span></span> <span data-ttu-id="066cb-134">Par défaut, le compte d’ordinateur de service réseau est utilisé par les versions 6 et 7 d’IIS, même si votre fournisseur d’hébergement Web peut avoir configuré un compte unique pour chaque client.</span><span class="sxs-lookup"><span data-stu-id="066cb-134">By default, the Network Service machine account is used by IIS versions 6 and 7, although your web host provider may have configured a unique account for each customer.</span></span> <span data-ttu-id="066cb-135">De plus, votre fournisseur d’hébergement Web a probablement accordé des autorisations limitées à ce compte d’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="066cb-135">What's more, your web host provider has likely given limited permissions to this machine account.</span></span> <span data-ttu-id="066cb-136">Le résultat net est que vous pouvez avoir des pages Web qui s’exécutent sans erreur dans l’environnement de développement, mais génèrent des exceptions liées aux autorisations lorsqu’elles sont hébergées dans l’environnement de production.</span><span class="sxs-lookup"><span data-stu-id="066cb-136">The net result is that you may have web pages that execute without error in the development environment, but generate authorization-related exceptions when hosted in the production environment.</span></span>

<span data-ttu-id="066cb-137">Pour afficher ce type d’erreur dans l’action, j’ai créé une page sur le site Web de révisions de livres qui crée un fichier sur le disque qui stocke la date et l’heure les plus récentes auxquelles quelqu’un a consulté le *ASP.NET 3,5 en 24 heures* .</span><span class="sxs-lookup"><span data-stu-id="066cb-137">To show this type of error in action I've created a page in the Book Reviews website that creates a file on disk that stores the most recent date and time someone viewed the *Teach Yourself ASP.NET 3.5 in 24 Hours* review.</span></span> <span data-ttu-id="066cb-138">Pour suivre la procédure, ouvrez la page `~/Tech/TYASP35.aspx` et ajoutez le code suivant au gestionnaire d’événements `Page_Load` :</span><span class="sxs-lookup"><span data-stu-id="066cb-138">To follow along, open the `~/Tech/TYASP35.aspx` page and add the following code to the `Page_Load` event handler:</span></span>

[!code-csharp[Main](core-differences-between-iis-and-the-asp-net-development-server-cs/samples/sample1.cs)]

> [!NOTE]
> <span data-ttu-id="066cb-139">La [méthode`File.WriteAllText`](https://msdn.microsoft.com/library/system.io.file.writealltext.aspx) crée un fichier s’il n’existe pas, puis y écrit le contenu spécifié.</span><span class="sxs-lookup"><span data-stu-id="066cb-139">The [`File.WriteAllText` method](https://msdn.microsoft.com/library/system.io.file.writealltext.aspx) creates a new file if it does not exist and then writes the specified contents to it.</span></span> <span data-ttu-id="066cb-140">Si le fichier existe déjà, son contenu est remplacé.</span><span class="sxs-lookup"><span data-stu-id="066cb-140">If the file already exists, it's existing content is overwritten.</span></span>

<span data-ttu-id="066cb-141">Ensuite, visitez la page *enseigner vous-même ASP.NET 3,5 en 24 heures* dans l’environnement de développement à l’aide du serveur de développement ASP.net.</span><span class="sxs-lookup"><span data-stu-id="066cb-141">Next, visit the *Teach Yourself ASP.NET 3.5 in 24 Hours* book review page in the development environment using the ASP.NET Development Server.</span></span> <span data-ttu-id="066cb-142">En supposant que vous êtes connecté à votre ordinateur à l’aide d’un compte disposant des autorisations adéquates pour créer et modifier un fichier texte dans le répertoire racine de l’application Web, la revue de livre est la même que précédemment, mais chaque fois que la page est visitée, la date et l’heure et l’adresse IP de l’utilisateur sont stockées dans le fichier `LastTYASP35Access.txt`.</span><span class="sxs-lookup"><span data-stu-id="066cb-142">Assuming that you are logged on to your computer with an account that has adequate permissions to create and modify a text file in the web application's root directory the book review appears the same as before, but each time the page is visited the date and time and user's IP address is stored in the `LastTYASP35Access.txt` file.</span></span> <span data-ttu-id="066cb-143">Pointez votre navigateur sur ce fichier ; vous devez voir un message similaire à celui illustré à la figure 1.</span><span class="sxs-lookup"><span data-stu-id="066cb-143">Point your browser to this file; you should see a message similar to the one shown in Figure 1.</span></span>

<span data-ttu-id="066cb-144">[![le fichier texte contient la date et l’heure de la dernière consultation du livre](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image2.png)](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="066cb-144">[![The Text File Contains the Last Date and Time the Book Review was Visited](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image2.png)](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image1.png)</span></span>

<span data-ttu-id="066cb-145">**Figure 1**: le fichier texte contient la date et l’heure de la dernière consultation du livre ([cliquez pour afficher l’image en taille réelle](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="066cb-145">**Figure 1**: The Text File Contains the Last Date and Time the Book Review was Visited ([Click to view full-size image](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image3.png))</span></span>

<span data-ttu-id="066cb-146">Déployez l’application Web en production, puis accédez à la page de vérification *de l’apprentissage hébergé par vous-même ASP.NET 3,5 dans 24 heures* .</span><span class="sxs-lookup"><span data-stu-id="066cb-146">Deploy the web application to production and then visit the hosted *Teach Yourself ASP.NET 3.5 in 24 Hours* book review page.</span></span> <span data-ttu-id="066cb-147">À ce stade, vous devriez voir la page de révision de livre normale ou le message d’erreur illustré à la figure 2.</span><span class="sxs-lookup"><span data-stu-id="066cb-147">At this point you should either see the book review page as normal or the error message shown in Figure 2.</span></span> <span data-ttu-id="066cb-148">Certains fournisseurs d’hôtes Web accordent des autorisations en écriture au compte d’ordinateur ASP.NET anonyme, auquel cas la page fonctionne sans erreur.</span><span class="sxs-lookup"><span data-stu-id="066cb-148">Some web host providers grant write permissions to the anonymous ASP.NET machine account, in which case the page will work without error.</span></span> <span data-ttu-id="066cb-149">Toutefois, si votre fournisseur d’hébergement Web interdit l’accès en écriture au compte anonyme, une [exception`UnauthorizedAccessException`](https://msdn.microsoft.com/library/system.unauthorizedaccessexception.aspx) est déclenchée lorsque la page `TYASP35.aspx` tente d’écrire la date et l’heure actuelles dans le fichier `LastTYASP35Access.txt`.</span><span class="sxs-lookup"><span data-stu-id="066cb-149">If, however, your web host provider prohibits write access for the anonymous account then an [`UnauthorizedAccessException` exception](https://msdn.microsoft.com/library/system.unauthorizedaccessexception.aspx) is raised when the `TYASP35.aspx` page attempts to write the current date and time to the `LastTYASP35Access.txt` file.</span></span>

<span data-ttu-id="066cb-150">[![le compte d’ordinateur par défaut utilisé par IIS ne dispose pas des autorisations nécessaires pour écrire dans le système de fichiers](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image5.png)](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="066cb-150">[![The Default Machine Account Used by IIS Does Not Have Permissions to Write to the File System](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image5.png)](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image4.png)</span></span>

<span data-ttu-id="066cb-151">**Figure 2**: le compte d’ordinateur par défaut utilisé par IIS ne dispose pas des autorisations nécessaires pour écrire dans le système de fichiers ([Cliquer pour afficher l’image en taille réelle](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="066cb-151">**Figure 2**: The Default Machine Account Used by IIS Does Not Have Permissions to Write to the File System ([Click to view full-size image](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image6.png))</span></span>

<span data-ttu-id="066cb-152">La bonne nouvelle, c’est que la plupart des fournisseurs d’hôtes Web disposent d’un outil d’autorisation qui vous permet de spécifier des autorisations de système de fichiers dans votre site Web.</span><span class="sxs-lookup"><span data-stu-id="066cb-152">The good news is that most web host providers have some sort of permissions tool that allows you to specify file system permissions in your website.</span></span> <span data-ttu-id="066cb-153">Accordez au compte ASP.NET anonyme l’accès en écriture au répertoire racine, puis revisitez la page de révision du livre.</span><span class="sxs-lookup"><span data-stu-id="066cb-153">Grant the anonymous ASP.NET account write access to the root directory and then revisit the book review page.</span></span> <span data-ttu-id="066cb-154">(Si nécessaire, contactez votre fournisseur d’hébergement Web pour obtenir de l’aide sur la façon d’accorder des autorisations en écriture au compte ASP.NET par défaut.) Cette fois, la page doit se charger sans erreur et le fichier `LastTYASP35Access.txt` doit être créé avec succès.</span><span class="sxs-lookup"><span data-stu-id="066cb-154">(If needed, contact your web host provider for assistance on how to grant write permissions to the default ASP.NET account.) This time the page should load without error and the `LastTYASP35Access.txt` file should be created successfully.</span></span>

<span data-ttu-id="066cb-155">Le fait est que, étant donné que le Serveur de développement ASP.NET fonctionne dans un contexte de sécurité différent de celui d’IIS, il est possible que vos pages ASP.NET lisent ou écrivent dans le système de fichiers, lisent ou écrivent dans le journal des événements Windows, ou lisent ou écrivent dans Windows  le registre fonctionne comme prévu au moment du développement, mais génère des exceptions en cas de production.</span><span class="sxs-lookup"><span data-stu-id="066cb-155">The take away here is that because the ASP.NET Development Server operates under a different security context than IIS, it is possible that your ASP.NET pages that read or write to the file system, read from or write to the Windows Event Log, or read or write to the Windows registry will work as expected on development but generate exceptions when on production.</span></span> <span data-ttu-id="066cb-156">Lors de la création d’une application Web qui sera déployée dans un environnement d’hébergement Web partagé, n’effectuez aucune opération de lecture ou d’écriture dans le journal des événements ou le Registre Windows.</span><span class="sxs-lookup"><span data-stu-id="066cb-156">When building a web application that will be deployed to a shared web hosting environment, do not read or write to the Event Log or the Windows registry.</span></span> <span data-ttu-id="066cb-157">Notez également les pages ASP.NET qui lisent ou écrivent dans le système de fichiers, car vous devrez peut-être accorder des privilèges de lecture et d’écriture sur les dossiers appropriés dans l’environnement de production.</span><span class="sxs-lookup"><span data-stu-id="066cb-157">Also take note of any ASP.NET pages that read from or write to the file system as you may need to grant read and write privileges on the appropriate folders in the production environment.</span></span>

## <a name="differences-on-serving-static-content"></a><span data-ttu-id="066cb-158">Différences relatives au service du contenu statique</span><span class="sxs-lookup"><span data-stu-id="066cb-158">Differences On Serving Static Content</span></span>

<span data-ttu-id="066cb-159">Une autre différence fondamentale entre IIS et le Serveur de développement ASP.NET est la manière dont ils gèrent les demandes de contenu statique.</span><span class="sxs-lookup"><span data-stu-id="066cb-159">Another core difference between IIS and the ASP.NET Development Server is how they handle requests for static content.</span></span> <span data-ttu-id="066cb-160">Chaque demande qui arrive dans le Serveur de développement ASP.NET, qu’il s’agisse d’une page ASP.NET, d’une image ou d’un fichier JavaScript, est traitée par le runtime ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="066cb-160">Every request that comes into the ASP.NET Development Server, whether for an ASP.NET page, an image, or a JavaScript file, is processed by the ASP.NET runtime.</span></span> <span data-ttu-id="066cb-161">Par défaut, IIS appelle uniquement le runtime ASP.NET lorsqu’une demande est envoyée pour une ressource ASP.NET, telle qu’une page Web ASP.NET, un service Web, etc.</span><span class="sxs-lookup"><span data-stu-id="066cb-161">By default, IIS only invokes the ASP.NET runtime when a request comes in for an ASP.NET resource, such as an ASP.NET web page, a Web Service, and so forth.</span></span> <span data-ttu-id="066cb-162">Les demandes de contenu statique-images, fichiers CSS, fichiers JavaScript, fichiers PDF, fichiers ZIP et similaires sont récupérées par IIS sans implication du runtime ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="066cb-162">Requests for static content - images, CSS files, JavaScript files, PDF files, ZIP files, and the like - are retrieved by IIS without the involvement of the ASP.NET runtime.</span></span> <span data-ttu-id="066cb-163">(Il est possible d’indiquer à IIS de travailler avec le runtime ASP.NET en cas de contenu statique. pour plus d’informations, consultez la section « exécution de l’authentification basée sur les formulaires et authentification des URL sur les fichiers statiques avec IIS 7 » dans ce didacticiel.)</span><span class="sxs-lookup"><span data-stu-id="066cb-163">(It is possible to instruct IIS to work with the ASP.NET runtime when serving static content; consult the "Performing Forms-Based Authentication and URL Authentication on Static Files with IIS 7" section in this tutorial for more information.)</span></span>

<span data-ttu-id="066cb-164">Le runtime ASP.NET effectue un certain nombre d’étapes pour générer le contenu demandé, y compris l’authentification (identifiant le demandeur) et l’autorisation (en déterminant si le demandeur est autorisé à afficher le contenu demandé).</span><span class="sxs-lookup"><span data-stu-id="066cb-164">The ASP.NET runtime performs a number of steps to generate the requested content, including authentication (identifying the requestor) and authorization (determining if the requestor has permission to view the requested content).</span></span> <span data-ttu-id="066cb-165">Une forme d’authentification courante est *l’authentification basée sur les formulaires*, dans laquelle un utilisateur est identifié en entrant ses informations d’identification (généralement un nom d’utilisateur et un mot de passe dans les zones de texte dans une page Web).</span><span class="sxs-lookup"><span data-stu-id="066cb-165">A popular form of authentication is *forms-based authentication*, in which a user is identified by entering their credentials - usually a username and password - into textboxes on a web page.</span></span> <span data-ttu-id="066cb-166">Lors de la validation de leurs informations d’identification, le site Web stocke un cookie de *ticket d’authentification* sur le navigateur de l’utilisateur, qui est envoyé avec chaque requête suivante au site Web et est utilisé pour authentifier l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="066cb-166">Upon validating their credentials, the website stores an *authentication ticket* cookie on the user's browser, which is sent with every subsequent request to the website and is what is used to authenticate the user.</span></span> <span data-ttu-id="066cb-167">En outre, il est possible de spécifier des règles *d’autorisation d’URL* qui déterminent ce que les utilisateurs peuvent ou ne peuvent pas accéder à un dossier particulier.</span><span class="sxs-lookup"><span data-stu-id="066cb-167">Moreover, it is possible to specify *URL authorization* rules that dictate what users can or cannot access a particular folder.</span></span> <span data-ttu-id="066cb-168">De nombreux sites Web ASP.NET utilisent l’authentification basée sur les formulaires et l’autorisation d’URL pour prendre en charge les comptes d’utilisateur et pour définir des parties du site qui sont uniquement accessibles aux utilisateurs authentifiés ou aux utilisateurs qui appartiennent à un certain rôle.</span><span class="sxs-lookup"><span data-stu-id="066cb-168">Many ASP.NET websites use forms-based authentication and URL authorization to support user accounts and to define portions of the site that are only accessible to authenticated users or users that belong to a certain role.</span></span>

> [!NOTE]
> <span data-ttu-id="066cb-169">Pour un examen approfondi d’ASP. L’authentification basée sur les formulaires, l’autorisation d’URL et d’autres fonctionnalités associées au compte d’utilisateur, consultez les didacticiels sur la sécurité de mon [site Web](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span><span class="sxs-lookup"><span data-stu-id="066cb-169">For a thorough examination of ASP.NET's forms-based authentication, URL authorization, and other user account-related features, be sure to check out my [Website Security Tutorials](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span></span>

<span data-ttu-id="066cb-170">Imaginez un site Web qui prend en charge les comptes d’utilisateur à l’aide de l’autorisation basée sur les formulaires et qui possède un dossier qui, à l’aide de l’autorisation d’URL, est configuré pour autoriser uniquement les utilisateurs authentifiés.</span><span class="sxs-lookup"><span data-stu-id="066cb-170">Consider a website that supports user accounts using forms-based authorization and has a folder that, using URL authorization, is configured to only allow authenticated users.</span></span> <span data-ttu-id="066cb-171">Imaginez que ce dossier contient des pages ASP.NET et des fichiers PDF et que seuls les utilisateurs authentifiés peuvent afficher ces fichiers PDF.</span><span class="sxs-lookup"><span data-stu-id="066cb-171">Imagine that this folder contains ASP.NET pages and PDF files and that the intent is that only authenticated users can view these PDF files.</span></span>

<span data-ttu-id="066cb-172">Que se passe-t-il si un visiteur tente d’afficher l’un de ces fichiers PDF en entrant l’URL directement dans la barre d’adresse de son navigateur ?</span><span class="sxs-lookup"><span data-stu-id="066cb-172">What happens if a visitor attempts to view one of these PDF files by entering the URL directly in his browser's Address bar?</span></span> <span data-ttu-id="066cb-173">Pour le savoir, nous allons créer un nouveau dossier dans le site de révisions de livres, ajouter des fichiers PDF et configurer le site pour qu’il utilise l’autorisation d’URL pour empêcher les utilisateurs anonymes de visiter ce dossier.</span><span class="sxs-lookup"><span data-stu-id="066cb-173">To find out, let's create a new folder in the Book Reviews site, add some PDF files, and configure the site to use URL authorization to prohibit anonymous users from visiting this folder.</span></span> <span data-ttu-id="066cb-174">Si vous téléchargez l’application de démonstration, vous verrez que j’ai créé un dossier nommé `PrivateDocs` et ajouté un fichier PDF à partir des didacticiels sur la sécurité de mon [site Web](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md) (comment ajuster !).</span><span class="sxs-lookup"><span data-stu-id="066cb-174">If you download the demo application you'll see that I created a folder called `PrivateDocs` and added a PDF from my [Website Security Tutorials](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md) (how fitting!).</span></span> <span data-ttu-id="066cb-175">Le dossier `PrivateDocs` contient également un fichier `Web.config` qui spécifie les règles d’autorisation d’URL pour refuser les utilisateurs anonymes :</span><span class="sxs-lookup"><span data-stu-id="066cb-175">The `PrivateDocs` folder also contains a `Web.config` file that specifies the URL authorization rules to deny anonymous users:</span></span>

[!code-xml[Main](core-differences-between-iis-and-the-asp-net-development-server-cs/samples/sample2.xml)]

<span data-ttu-id="066cb-176">Enfin, j’ai configuré l’application Web pour utiliser l’authentification basée sur les formulaires en mettant à jour le fichier `Web.config` dans le répertoire racine, en remplaçant :</span><span class="sxs-lookup"><span data-stu-id="066cb-176">Finally, I configured the web application to use forms-based authentication by updating the `Web.config` file in the root directory, replacing:</span></span>

[!code-xml[Main](core-differences-between-iis-and-the-asp-net-development-server-cs/samples/sample3.xml)]

<span data-ttu-id="066cb-177">Par :</span><span class="sxs-lookup"><span data-stu-id="066cb-177">With:</span></span>

[!code-xml[Main](core-differences-between-iis-and-the-asp-net-development-server-cs/samples/sample4.xml)]

<span data-ttu-id="066cb-178">À l’aide de la Serveur de développement ASP.NET, accédez au site et entrez l’URL directe vers l’un des fichiers PDF dans la barre d’adresse de votre navigateur.</span><span class="sxs-lookup"><span data-stu-id="066cb-178">Using the ASP.NET Development Server, visit the site and enter the direct URL to one of the PDF files in your browser's Address bar.</span></span> <span data-ttu-id="066cb-179">Si vous avez téléchargé le site Web associé à ce didacticiel, l’URL doit se présenter comme suit : `http://localhost:portNumber/PrivateDocs/aspnet_tutorial01_Basics_vb.pdf`</span><span class="sxs-lookup"><span data-stu-id="066cb-179">If you downloaded the website associated with this tutorial the URL should look something like: `http://localhost:portNumber/PrivateDocs/aspnet_tutorial01_Basics_vb.pdf`</span></span>

<span data-ttu-id="066cb-180">Si vous entrez cette URL dans la barre d’adresses, le navigateur envoie une demande au Serveur de développement ASP.NET pour le fichier.</span><span class="sxs-lookup"><span data-stu-id="066cb-180">Entering this URL into the Address bar causes the browser to send a request to the ASP.NET Development Server for the file.</span></span> <span data-ttu-id="066cb-181">Le Serveur de développement ASP.NET transmet la requête au runtime ASP.NET pour traitement.</span><span class="sxs-lookup"><span data-stu-id="066cb-181">The ASP.NET Development Server hands off the request to the ASP.NET runtime for processing.</span></span> <span data-ttu-id="066cb-182">Étant donné que nous n’avons pas encore ouvert de session et que la `Web.config` dans le dossier `PrivateDocs` est configurée pour refuser l’accès anonyme, le runtime ASP.NET redirige automatiquement vers la page de connexion, `Login.aspx` (voir figure 3).</span><span class="sxs-lookup"><span data-stu-id="066cb-182">Because we have not yet logged in, and because the `Web.config` in the `PrivateDocs` folder is configured to deny anonymous access, the ASP.NET runtime automatically redirects us to the login page, `Login.aspx` (see Figure 3).</span></span> <span data-ttu-id="066cb-183">Lorsque vous redirigez l’utilisateur vers la page de connexion, ASP.NET comprend un paramètre `ReturnUrl` QueryString qui indique la page que l’utilisateur tentait d’afficher.</span><span class="sxs-lookup"><span data-stu-id="066cb-183">When redirecting the user to the log in page, ASP.NET includes a `ReturnUrl` querystring parameter that indicates the page the user was attempting to view.</span></span> <span data-ttu-id="066cb-184">Une fois la connexion établie, l’utilisateur peut retourner à cette page.</span><span class="sxs-lookup"><span data-stu-id="066cb-184">After successfully logging in the user can be returned to this page.</span></span>

<span data-ttu-id="066cb-185">[![les utilisateurs non autorisés sont automatiquement redirigés vers la page de connexion.](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image8.png)](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="066cb-185">[![Unauthorized Users are Automatically Redirected to the Login Page](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image8.png)](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image7.png)</span></span>

<span data-ttu-id="066cb-186">**Figure 3**: les utilisateurs non autorisés sont automatiquement redirigés vers la page de connexion ([cliquez pour afficher l’image en taille réelle](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="066cb-186">**Figure 3**: Unauthorized Users are Automatically Redirected to the Login Page ([Click to view full-size image](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image9.png))</span></span>

<span data-ttu-id="066cb-187">Voyons maintenant comment cela se comporte en production.</span><span class="sxs-lookup"><span data-stu-id="066cb-187">Now let's see how this behaves on production.</span></span> <span data-ttu-id="066cb-188">Déployez votre application et entrez l’URL directe vers l’un des fichiers PDF dans le dossier `PrivateDocs` en production.</span><span class="sxs-lookup"><span data-stu-id="066cb-188">Deploy your application and enter the direct URL to one of the PDFs in the `PrivateDocs` folder in production.</span></span> <span data-ttu-id="066cb-189">Cela invite votre navigateur à envoyer une requête IIS pour le fichier.</span><span class="sxs-lookup"><span data-stu-id="066cb-189">This prompts your browser to send a request IIS for the file.</span></span> <span data-ttu-id="066cb-190">Comme un fichier statique est demandé, IIS récupère et retourne le fichier sans appeler le runtime ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="066cb-190">Because a static file is requested, IIS retrieves and returns the file without invoking the ASP.NET runtime.</span></span> <span data-ttu-id="066cb-191">Par conséquent, aucun contrôle d’autorisation d’URL n’a été effectué. le contenu du fichier PDF privé est accessible à toute personne connaissant l’URL directe du fichier.</span><span class="sxs-lookup"><span data-stu-id="066cb-191">As a result, there was no URL authorization check performed; the contents of the supposedly private PDF are accessible to anyone who knows the direct URL to the file.</span></span>

<span data-ttu-id="066cb-192">[![utilisateurs anonymes peuvent télécharger les fichiers PDF privés en entrant l’URL directe vers le fichier](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image11.png)](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="066cb-192">[![Anonymous Users Can Download the Private PDF Files By Entering the Direct URL to the File](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image11.png)](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image10.png)</span></span>

<span data-ttu-id="066cb-193">**Figure 4**: les utilisateurs anonymes peuvent télécharger les fichiers PDF privés en entrant l’URL directe vers le fichier ([cliquez pour afficher l’image en taille réelle](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="066cb-193">**Figure 4**: Anonymous Users Can Download the Private PDF Files By Entering the Direct URL to the File ([Click to view full-size image](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image12.png))</span></span>

### <a name="performing-forms-based-authentication-and-url-authentication-on-static-files-with-iis-7"></a><span data-ttu-id="066cb-194">Exécution de l’authentification basée sur les formulaires et authentification des URL sur des fichiers statiques avec IIS 7</span><span class="sxs-lookup"><span data-stu-id="066cb-194">Performing Forms-Based Authentication and URL Authentication on Static Files with IIS 7</span></span>

<span data-ttu-id="066cb-195">Il existe quelques techniques que vous pouvez utiliser pour protéger le contenu statique contre les utilisateurs non autorisés.</span><span class="sxs-lookup"><span data-stu-id="066cb-195">There are a couple of techniques you can use to protect static content from unauthorized users.</span></span> <span data-ttu-id="066cb-196">IIS 7 a introduit le *pipeline intégré*qui alliant le flux de travail d’IIS avec le flux de travail du runtime ASP.net.</span><span class="sxs-lookup"><span data-stu-id="066cb-196">IIS 7 introduced the *integrated pipeline*, which marries IIS's workflow with the ASP.NET runtime's workflow.</span></span> <span data-ttu-id="066cb-197">En résumé, vous pouvez demander à IIS d’appeler les modules d’authentification et d’autorisation du runtime ASP.NET toutes les demandes entrantes (y compris le contenu statique comme les fichiers PDF).</span><span class="sxs-lookup"><span data-stu-id="066cb-197">In a nutshell, you can instruct IIS to invoke the ASP.NET runtime's authentication and authorization modules all incoming requests (including static content like PDF files).</span></span> <span data-ttu-id="066cb-198">Contactez votre fournisseur d’hébergement Web pour savoir comment configurer votre site Web pour utiliser le pipeline intégré.</span><span class="sxs-lookup"><span data-stu-id="066cb-198">Contact your web host provider to find out how to configure your website to use the integrated pipeline.</span></span>

<span data-ttu-id="066cb-199">Une fois qu’IIS a été configuré pour utiliser le pipeline intégré, ajoutez le balisage suivant au fichier `Web.config` dans le répertoire racine :</span><span class="sxs-lookup"><span data-stu-id="066cb-199">Once IIS has been configured to use the integrated pipeline add the following markup to the `Web.config` file in the root directory:</span></span>

[!code-xml[Main](core-differences-between-iis-and-the-asp-net-development-server-cs/samples/sample5.xml)]

<span data-ttu-id="066cb-200">Ce balisage indique à IIS 7 d’utiliser les modules d’authentification et d’autorisation basés sur ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="066cb-200">This markup instructs IIS 7 to use the ASP.NET-based authentication and authorization modules.</span></span> <span data-ttu-id="066cb-201">Redéployez votre application, puis réexaminez le fichier PDF.</span><span class="sxs-lookup"><span data-stu-id="066cb-201">Re-deploy your application and then re-visit the PDF file.</span></span> <span data-ttu-id="066cb-202">Cette fois-ci, lorsque IIS traite la demande, il donne à la logique d’authentification et d’autorisation de l’exécution de ASP.NET la possibilité d’inspecter la requête.</span><span class="sxs-lookup"><span data-stu-id="066cb-202">This time when IIS handles the request it gives the ASP.NET runtime's authentication and authorization logic an opportunity to inspect the request.</span></span> <span data-ttu-id="066cb-203">Étant donné que seuls les utilisateurs authentifiés sont autorisés à afficher le contenu du dossier `PrivateDocs`, le visiteur anonyme est automatiquement redirigé vers la page de connexion (reportez-vous à la figure 3).</span><span class="sxs-lookup"><span data-stu-id="066cb-203">Because only authenticated users are authorized to view the contents in the `PrivateDocs` folder, the anonymous visitor is automatically redirected to the login page (refer back to Figure 3).</span></span>

> [!NOTE]
> <span data-ttu-id="066cb-204">Si votre fournisseur d’hébergement Web utilise toujours IIS 6, vous ne pouvez pas utiliser la fonctionnalité de pipeline intégré.</span><span class="sxs-lookup"><span data-stu-id="066cb-204">If your web host provider is still using IIS 6 then you cannot use the integrated pipeline feature.</span></span> <span data-ttu-id="066cb-205">Une solution de contournement consiste à placer vos documents privés dans un dossier qui interdit l’accès HTTP (par exemple, `App_Data`), puis à créer une page pour traiter ces documents.</span><span class="sxs-lookup"><span data-stu-id="066cb-205">One workaround is to put your private documents in a folder that prohibits HTTP access (such as `App_Data`) and then create a page to serve these documents.</span></span> <span data-ttu-id="066cb-206">Cette page peut être appelée `GetPDF.aspx`et reçoit le nom du fichier PDF via un paramètre QueryString.</span><span class="sxs-lookup"><span data-stu-id="066cb-206">This page might be called `GetPDF.aspx`, and is passed the name of the PDF through a querystring parameter.</span></span> <span data-ttu-id="066cb-207">La page `GetPDF.aspx` vérifie d’abord que l’utilisateur est autorisé à afficher le fichier et, le cas échéant, utilise la méthode [`Response.WriteFile(filePath)`](https://msdn.microsoft.com/library/system.web.httpresponse.writefile.aspx) pour renvoyer le contenu du fichier PDF demandé au client demandeur.</span><span class="sxs-lookup"><span data-stu-id="066cb-207">The `GetPDF.aspx` page would first verify that the user has permission to view the file and, if so, would use the [`Response.WriteFile(filePath)`](https://msdn.microsoft.com/library/system.web.httpresponse.writefile.aspx) method to send the contents of the requested PDF file back to the requesting client.</span></span> <span data-ttu-id="066cb-208">Cette technique fonctionne également pour IIS 7 Si vous ne souhaitez pas activer le pipeline intégré.</span><span class="sxs-lookup"><span data-stu-id="066cb-208">This technique would also work for IIS 7 if you did not wish to enable the integrated pipeline.</span></span>

## <a name="summary"></a><span data-ttu-id="066cb-209">Récapitulatif</span><span class="sxs-lookup"><span data-stu-id="066cb-209">Summary</span></span>

<span data-ttu-id="066cb-210">Les applications Web dans un environnement de production sont hébergées à l’aide du logiciel de serveur Web IIS de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="066cb-210">Web applications in a production environment are hosted using Microsoft's IIS web server software.</span></span> <span data-ttu-id="066cb-211">Dans l’environnement de développement, toutefois, l’application peut être hébergée à l’aide d’IIS ou de l’Serveur de développement ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="066cb-211">In the development environment, however, the application may be hosted using IIS or the ASP.NET Development Server.</span></span> <span data-ttu-id="066cb-212">Dans l’idéal, le même logiciel de serveur Web doit être utilisé dans les deux environnements, car l’utilisation de différents logiciels ajoute une autre variable dans la combinaison.</span><span class="sxs-lookup"><span data-stu-id="066cb-212">Ideally, the same web server software should be used in both environments because using different software adds another variable in the mix.</span></span> <span data-ttu-id="066cb-213">Toutefois, la facilité d’utilisation du Serveur de développement ASP.NET en fait un choix attrayant dans l’environnement de développement.</span><span class="sxs-lookup"><span data-stu-id="066cb-213">However, the ease of use of the ASP.NET Development Server makes it an attractive choice in the development environment.</span></span> <span data-ttu-id="066cb-214">La bonne nouvelle, c’est qu’il n’y a que quelques différences fondamentales entre IIS et le Serveur de développement ASP.NET, et si vous êtes conscient de ces différences, vous pouvez prendre des mesures pour vous assurer que l’application fonctionne et fonctionne de la même manière, quelle que soit la environnement.</span><span class="sxs-lookup"><span data-stu-id="066cb-214">The good news is that there are only a few fundamental differences between IIS and the ASP.NET Development Server, and if you are aware of these differences you can take steps to help ensure that the application works and functions the same way regardless of the environment.</span></span>

<span data-ttu-id="066cb-215">Bonne programmation !</span><span class="sxs-lookup"><span data-stu-id="066cb-215">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="066cb-216">informations supplémentaires</span><span class="sxs-lookup"><span data-stu-id="066cb-216">Further Reading</span></span>

<span data-ttu-id="066cb-217">Pour plus d’informations sur les sujets abordés dans ce didacticiel, reportez-vous aux ressources suivantes :</span><span class="sxs-lookup"><span data-stu-id="066cb-217">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="066cb-218">Intégration de ASP.NET avec IIS 7,0</span><span class="sxs-lookup"><span data-stu-id="066cb-218">ASP.NET Integration with IIS 7.0</span></span>](https://www.iis.net/learn/application-frameworks/building-and-running-aspnet-applications/aspnet-integration-with-iis)
- <span data-ttu-id="066cb-219">[Utilisation de l’authentification des Forums ASP.net avec tous les types de contenu sur IIS 7](https://blogs.iis.net/bills/archive/2007/05/19/using-asp-net-forms-authentication-with-all-types-of-content-with-iis7-video.aspx) (vidéo)</span><span class="sxs-lookup"><span data-stu-id="066cb-219">[Using ASP.NET Forums Authentication With All Types of Content on IIS 7](https://blogs.iis.net/bills/archive/2007/05/19/using-asp-net-forms-authentication-with-all-types-of-content-with-iis7-video.aspx) (Video)</span></span>
- [<span data-ttu-id="066cb-220">Serveurs Web dans Visual Web Developer</span><span class="sxs-lookup"><span data-stu-id="066cb-220">Web Servers in Visual Web Developer</span></span>](https://msdn.microsoft.com/library/58wxa9w5.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="066cb-221">[Précédent](common-configuration-differences-between-development-and-production-cs.md)
> [Suivant](deploying-a-database-cs.md)</span><span class="sxs-lookup"><span data-stu-id="066cb-221">[Previous](common-configuration-differences-between-development-and-production-cs.md)
[Next](deploying-a-database-cs.md)</span></span>

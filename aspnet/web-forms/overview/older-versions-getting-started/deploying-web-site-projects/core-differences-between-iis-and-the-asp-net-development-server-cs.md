---
uid: web-forms/overview/older-versions-getting-started/deploying-web-site-projects/core-differences-between-iis-and-the-asp-net-development-server-cs
title: Principales différences entre IIS et le serveur de développement ASP.NET (c#) | Microsoft Docs
author: rick-anderson
description: Lorsque vous testez une application ASP.NET localement, sans doute à l’aide de serveur Web de développement ASP.NET. Toutefois, le site Web de production est plus probable pow...
ms.author: riande
ms.date: 04/01/2009
ms.assetid: 13a5a423-9235-4dde-b408-2fd10f791d63
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deploying-web-site-projects/core-differences-between-iis-and-the-asp-net-development-server-cs
msc.type: authoredcontent
ms.openlocfilehash: a5b67728a2232d59ae879bac1d6480840744871b
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/06/2019
ms.locfileid: "65132407"
---
# <a name="core-differences-between-iis-and-the-aspnet-development-server-c"></a><span data-ttu-id="80417-104">Différences principales entre IIS et le serveur de développement ASP.NET (C#)</span><span class="sxs-lookup"><span data-stu-id="80417-104">Core Differences Between IIS and the ASP.NET Development Server (C#)</span></span>

<span data-ttu-id="80417-105">par [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="80417-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="80417-106">[Télécharger le Code](http://download.microsoft.com/download/4/5/F/45F815EC-8B0E-46D3-9FB8-2DC015CCA306/ASPNET_Hosting_Tutorial_06_CS.zip) ou [télécharger le PDF](http://download.microsoft.com/download/E/8/9/E8920AE6-D441-41A7-8A77-9EF8FF970D8B/aspnet_tutorial06_WebServerDiff_cs.pdf)</span><span class="sxs-lookup"><span data-stu-id="80417-106">[Download Code](http://download.microsoft.com/download/4/5/F/45F815EC-8B0E-46D3-9FB8-2DC015CCA306/ASPNET_Hosting_Tutorial_06_CS.zip) or [Download PDF](http://download.microsoft.com/download/E/8/9/E8920AE6-D441-41A7-8A77-9EF8FF970D8B/aspnet_tutorial06_WebServerDiff_cs.pdf)</span></span>

> <span data-ttu-id="80417-107">Lorsque vous testez une application ASP.NET localement, sans doute à l’aide de serveur Web de développement ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="80417-107">When testing an ASP.NET application locally, chances are you are using the ASP.NET Development Web Server.</span></span> <span data-ttu-id="80417-108">Toutefois, le site Web de production est plus probable IIS mise hors tension.</span><span class="sxs-lookup"><span data-stu-id="80417-108">However, the production website is most likely powered IIS.</span></span> <span data-ttu-id="80417-109">Il existe certaines différences entre ces serveurs web comment gérer les demandes, et ces différences peuvent avoir des conséquences importantes.</span><span class="sxs-lookup"><span data-stu-id="80417-109">There are some differences between how these web servers handle requests, and these differences can have important consequences.</span></span> <span data-ttu-id="80417-110">Ce didacticiel explore certaines des différences plus pertinentes.</span><span class="sxs-lookup"><span data-stu-id="80417-110">This tutorial explores some of the more germane differences.</span></span>

## <a name="introduction"></a><span data-ttu-id="80417-111">Introduction</span><span class="sxs-lookup"><span data-stu-id="80417-111">Introduction</span></span>

<span data-ttu-id="80417-112">Chaque fois qu’un utilisateur visite une application ASP.NET son navigateur envoie une demande au site Web.</span><span class="sxs-lookup"><span data-stu-id="80417-112">Whenever a user visits an ASP.NET application his browser sends a request to the website.</span></span> <span data-ttu-id="80417-113">Cette demande est récupérée par le logiciel de serveur web, qui coordonne avec le runtime ASP.NET pour générer et retourner le contenu de la ressource demandée.</span><span class="sxs-lookup"><span data-stu-id="80417-113">That request is picked up by the web server software, which coordinates with the ASP.NET runtime to generate and return the content for the requested resource.</span></span> <span data-ttu-id="80417-114">Le[**je** POI **je** nformation **S** ervices (IIS)](http://en.wikipedia.org/wiki/Internet_Information_Services) sont une suite de services qui fournissent des fonctionnalités communes basés sur Internet pour Serveurs Windows.</span><span class="sxs-lookup"><span data-stu-id="80417-114">The[**I** nternet **I** nformation **S** ervices (IIS)](http://en.wikipedia.org/wiki/Internet_Information_Services) are a suite of services that provide common Internet-based functionality for Windows servers.</span></span> <span data-ttu-id="80417-115">IIS est le serveur web couramment utilisés pour les applications ASP.NET dans les environnements de production ; Il est très probablement le logiciel de serveur web utilisé par votre fournisseur d’hébergement web pour servir votre application ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="80417-115">IIS is the most commonly used web server for ASP.NET applications in production environments; it's most likely the web server software being used by your web host provider to serve your ASP.NET application.</span></span> <span data-ttu-id="80417-116">IIS peut également servir en tant que le logiciel de serveur web dans l’environnement de développement, bien que cela implique l’installation d’IIS et le configurer correctement.</span><span class="sxs-lookup"><span data-stu-id="80417-116">IIS can also be used as the web server software in the development environment, although this entails installing IIS and properly configuring it.</span></span>

<span data-ttu-id="80417-117">Le serveur de développement ASP.NET est une option de serveur web de remplacement pour l’environnement de développement ; Il est fourni avec et est intégré à Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="80417-117">The ASP.NET Development Server is an alternative web server option for the development environment; it ships with and is integrated into Visual Studio.</span></span> <span data-ttu-id="80417-118">Sauf si l’application web a été configurée pour utiliser IIS, le serveur de développement ASP.NET est automatiquement démarré et utilisé en tant que le serveur web la première fois que vous visitez une page web à partir de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="80417-118">Unless the web application has been configured to use IIS, the ASP.NET Development Server is automatically started and used as the web server the first time you visit a web page from within Visual Studio.</span></span> <span data-ttu-id="80417-119">Les applications web de démonstration nous avons créé dans le [ *déterminer quels fichiers doivent être déployés* ](determining-what-files-need-to-be-deployed-cs.md) didacticiel ont été les deux applications web basés sur le système de fichier qui n’ont pas été configurées pour utiliser IIS.</span><span class="sxs-lookup"><span data-stu-id="80417-119">The demo web applications we created back in the [*Determining What Files Need to Be Deployed*](determining-what-files-need-to-be-deployed-cs.md) tutorial were both file system-based web applications that were not configured to use IIS.</span></span> <span data-ttu-id="80417-120">Par conséquent, lors de la visite d’un de ces sites Web à partir de Visual Studio, le serveur de développement ASP.NET est utilisé.</span><span class="sxs-lookup"><span data-stu-id="80417-120">Therefore, when visiting either of these websites from within Visual Studio the ASP.NET Development Server is used.</span></span>

<span data-ttu-id="80417-121">Dans un monde parfait, les environnements de développement et de production seraient identiques.</span><span class="sxs-lookup"><span data-stu-id="80417-121">In a perfect world the development and production environments would be identical.</span></span> <span data-ttu-id="80417-122">Toutefois, comme expliqué dans le didacticiel précédent il n’est pas rare pour les environnements d’avoir différents paramètres de configuration.</span><span class="sxs-lookup"><span data-stu-id="80417-122">However, as we discussed in the preceding tutorial it is not uncommon for the environments to have differing configuration settings.</span></span> <span data-ttu-id="80417-123">À l’aide du logiciel de serveur web différentes dans les environnements ajoute une autre variable qui doit prendre en considération lors du déploiement d’une application.</span><span class="sxs-lookup"><span data-stu-id="80417-123">Using different web server software in the environments adds another variable that must be taken into consideration when deploying an application.</span></span> <span data-ttu-id="80417-124">Ce didacticiel décrit les principales différences entre IIS et le serveur de développement ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="80417-124">This tutorial covers the key differences between IIS and the ASP.NET Development Server.</span></span> <span data-ttu-id="80417-125">En raison de ces différences, il existe des scénarios où le code qui s’exécute parfaitement dans l’environnement de développement lève une exception ou se comporte différemment lors de l’exécution en production.</span><span class="sxs-lookup"><span data-stu-id="80417-125">Because of these differences there are scenarios where code that runs flawlessly in the development environment throws an exception or behaves differently when executed in production.</span></span>

## <a name="security-context-differences"></a><span data-ttu-id="80417-126">Différences de contexte de sécurité</span><span class="sxs-lookup"><span data-stu-id="80417-126">Security Context Differences</span></span>

<span data-ttu-id="80417-127">Chaque fois que le logiciel de serveur web traite une demande entrante elle associe cette demande à un contexte de sécurité particulier.</span><span class="sxs-lookup"><span data-stu-id="80417-127">Whenever the web server software handles an incoming request it associates that request with a particular security context.</span></span> <span data-ttu-id="80417-128">Ces informations de contexte de sécurité sont utilisées par le système d’exploitation pour déterminer quelles actions sont autorisées par la demande.</span><span class="sxs-lookup"><span data-stu-id="80417-128">This security context information is used by the operating system to determine what actions are permissible by the request.</span></span> <span data-ttu-id="80417-129">Par exemple, une page ASP.NET peut inclure du code qui enregistre un message dans un fichier sur disque.</span><span class="sxs-lookup"><span data-stu-id="80417-129">For example, an ASP.NET page might include code that logs some message to a file on disk.</span></span> <span data-ttu-id="80417-130">Pour cette page ASP.NET de s’exécuter sans erreur, le contexte de sécurité doit avoir approprié les autorisations au niveau du système de fichiers, à savoir des autorisations sur le fichier en écriture.</span><span class="sxs-lookup"><span data-stu-id="80417-130">In order for this ASP.NET page to execute without error, the security context must have the appropriate file system-level permissions, namely write permissions on that file.</span></span>

<span data-ttu-id="80417-131">Le serveur de développement ASP.NET associe les demandes entrantes avec le contexte de sécurité de l’utilisateur actuellement connecté.</span><span class="sxs-lookup"><span data-stu-id="80417-131">The ASP.NET Development Server associates incoming requests with the security context of the currently logged on user.</span></span> <span data-ttu-id="80417-132">Si vous êtes connecté à votre bureau en tant qu’administrateur, les pages ASP.NET pris en charge par le serveur de développement ASP.NET aura les mêmes droits d’accès en tant qu’administrateur.</span><span class="sxs-lookup"><span data-stu-id="80417-132">If you are logged on to your desktop as an administrator, then the ASP.NET pages served by the ASP.NET Development Server will have the same access rights as an administrator.</span></span> <span data-ttu-id="80417-133">Toutefois, les demandes ASP.NET traitées par IIS sont associés à un compte d’ordinateur spécifique.</span><span class="sxs-lookup"><span data-stu-id="80417-133">However, ASP.NET requests handled by IIS are associated with a specific machine account.</span></span> <span data-ttu-id="80417-134">Par défaut, le compte d’ordinateur de Service réseau est utilisé par IIS versions 6 et 7, même si votre fournisseur d’hébergement web peut avoir configuré un compte unique pour chaque client.</span><span class="sxs-lookup"><span data-stu-id="80417-134">By default, the Network Service machine account is used by IIS versions 6 and 7, although your web host provider may have configured a unique account for each customer.</span></span> <span data-ttu-id="80417-135">De plus, votre fournisseur d’hébergement web a probablement limité des autorisations accordées pour ce compte d’ordinateur.</span><span class="sxs-lookup"><span data-stu-id="80417-135">What's more, your web host provider has likely given limited permissions to this machine account.</span></span> <span data-ttu-id="80417-136">Le résultat net est que vous pouvez avoir des pages web qui s’exécutent sans erreur dans l’environnement de développement, mais génèrent des exceptions liées aux autorisations quand ils sont hébergés dans l’environnement de production.</span><span class="sxs-lookup"><span data-stu-id="80417-136">The net result is that you may have web pages that execute without error in the development environment, but generate authorization-related exceptions when hosted in the production environment.</span></span>

<span data-ttu-id="80417-137">Pour afficher ce type d’erreur en action, j’ai créé une page dans le site Web de critiques de livres qui crée un fichier sur disque qui stocke la date et l’heure la plus récente quelqu'un affiché le *enseigner vous-même ASP.NET 3.5 des dernières 24 heures* passez en revue.</span><span class="sxs-lookup"><span data-stu-id="80417-137">To show this type of error in action I've created a page in the Book Reviews website that creates a file on disk that stores the most recent date and time someone viewed the *Teach Yourself ASP.NET 3.5 in 24 Hours* review.</span></span> <span data-ttu-id="80417-138">Pour suivre la procédure, ouvrez le `~/Tech/TYASP35.aspx` page et ajoutez le code suivant à la `Page_Load` Gestionnaire d’événements :</span><span class="sxs-lookup"><span data-stu-id="80417-138">To follow along, open the `~/Tech/TYASP35.aspx` page and add the following code to the `Page_Load` event handler:</span></span>

[!code-csharp[Main](core-differences-between-iis-and-the-asp-net-development-server-cs/samples/sample1.cs)]

> [!NOTE]
> <span data-ttu-id="80417-139">Le [ `File.WriteAllText` méthode](https://msdn.microsoft.com/library/system.io.file.writealltext.aspx) crée un nouveau fichier s’il n’existe pas et puis écrit le contenu spécifié.</span><span class="sxs-lookup"><span data-stu-id="80417-139">The [`File.WriteAllText` method](https://msdn.microsoft.com/library/system.io.file.writealltext.aspx) creates a new file if it does not exist and then writes the specified contents to it.</span></span> <span data-ttu-id="80417-140">Si le fichier existe déjà, son contenu existant est remplacé.</span><span class="sxs-lookup"><span data-stu-id="80417-140">If the file already exists, it's existing content is overwritten.</span></span>

<span data-ttu-id="80417-141">Ensuite, visitez le *enseigner vous-même ASP.NET 3.5 des dernières 24 heures* page de révision de livre dans l’environnement de développement à l’aide du serveur de développement ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="80417-141">Next, visit the *Teach Yourself ASP.NET 3.5 in 24 Hours* book review page in the development environment using the ASP.NET Development Server.</span></span> <span data-ttu-id="80417-142">En supposant que vous êtes connecté à votre ordinateur avec un compte qui dispose des autorisations adéquates pour créer et modifier un fichier texte dans le site web du répertoire racine application cette critique de livre s’affiche le même qu’avant, mais chaque fois que la page est visité la date et de temps et de l’utilisateur  Adresse IP est stockée dans le `LastTYASP35Access.txt` fichier.</span><span class="sxs-lookup"><span data-stu-id="80417-142">Assuming that you are logged on to your computer with an account that has adequate permissions to create and modify a text file in the web application's root directory the book review appears the same as before, but each time the page is visited the date and time and user's IP address is stored in the `LastTYASP35Access.txt` file.</span></span> <span data-ttu-id="80417-143">Pointez votre navigateur sur ce fichier. Vous devez voir un message similaire à celui illustré dans la Figure 1.</span><span class="sxs-lookup"><span data-stu-id="80417-143">Point your browser to this file; you should see a message similar to the one shown in Figure 1.</span></span>

<span data-ttu-id="80417-144">[![Le fichier texte contient la dernière Date et l’heure cette critique de livre a été visitée.](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image2.png)](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="80417-144">[![The Text File Contains the Last Date and Time the Book Review was Visited](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image2.png)](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image1.png)</span></span>

<span data-ttu-id="80417-145">**Figure 1**: Le fichier texte contient la dernière Date et l’heure cette critique de livre a été visitée ([cliquez pour afficher l’image en taille réelle](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="80417-145">**Figure 1**: The Text File Contains the Last Date and Time the Book Review was Visited ([Click to view full-size image](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image3.png))</span></span>

<span data-ttu-id="80417-146">Déployer l’application web en production, puis visitez hébergé *enseigner vous-même ASP.NET 3.5 des dernières 24 heures* page de révision de livre.</span><span class="sxs-lookup"><span data-stu-id="80417-146">Deploy the web application to production and then visit the hosted *Teach Yourself ASP.NET 3.5 in 24 Hours* book review page.</span></span> <span data-ttu-id="80417-147">À ce stade doit soit affiche la page de révision du livre normal ou le message d’erreur indiqué dans la Figure 2.</span><span class="sxs-lookup"><span data-stu-id="80417-147">At this point you should either see the book review page as normal or the error message shown in Figure 2.</span></span> <span data-ttu-id="80417-148">Certains fournisseurs d’hébergement web accorder des autorisations d’écriture pour le compte d’ordinateur ASP.NET anonyme, dans lequel cas la page fonctionnera sans erreur.</span><span class="sxs-lookup"><span data-stu-id="80417-148">Some web host providers grant write permissions to the anonymous ASP.NET machine account, in which case the page will work without error.</span></span> <span data-ttu-id="80417-149">Si, toutefois, votre fournisseur d’hébergement web interdit l’accès en écriture pour le compte anonyme une [ `UnauthorizedAccessException` exception](https://msdn.microsoft.com/library/system.unauthorizedaccessexception.aspx) est déclenché lorsque le `TYASP35.aspx` page tente d’écrire la date et heure actuelles pour le `LastTYASP35Access.txt` fichier.</span><span class="sxs-lookup"><span data-stu-id="80417-149">If, however, your web host provider prohibits write access for the anonymous account then an [`UnauthorizedAccessException` exception](https://msdn.microsoft.com/library/system.unauthorizedaccessexception.aspx) is raised when the `TYASP35.aspx` page attempts to write the current date and time to the `LastTYASP35Access.txt` file.</span></span>

<span data-ttu-id="80417-150">[![Le compte d’ordinateur par défaut utilisé par IIS ne dispose pas des autorisations pour écrire dans le système de fichiers](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image5.png)](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="80417-150">[![The Default Machine Account Used by IIS Does Not Have Permissions to Write to the File System](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image5.png)](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image4.png)</span></span>

<span data-ttu-id="80417-151">**Figure 2**: La valeur par défaut Machine compte utilisé par IIS est pas disposer des autorisations en écriture au système de fichiers ([cliquez pour afficher l’image en taille réelle](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="80417-151">**Figure 2**: The Default Machine Account Used by IIS Does Not Have Permissions to Write to the File System ([Click to view full-size image](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image6.png))</span></span>

<span data-ttu-id="80417-152">La bonne nouvelle est que la plupart des fournisseurs d’hébergement web ont une sorte de l’outil d’autorisations qui vous permet de spécifier des autorisations de système de fichiers dans votre site Web.</span><span class="sxs-lookup"><span data-stu-id="80417-152">The good news is that most web host providers have some sort of permissions tool that allows you to specify file system permissions in your website.</span></span> <span data-ttu-id="80417-153">Accorder l’accès en écriture ASP.NET compte anonyme au répertoire racine et puis revenir sur la page de révision du livre.</span><span class="sxs-lookup"><span data-stu-id="80417-153">Grant the anonymous ASP.NET account write access to the root directory and then revisit the book review page.</span></span> <span data-ttu-id="80417-154">(Si nécessaire, contactez votre fournisseur d’hébergement web pour obtenir une assistance sur la façon d’accorder des autorisations d’écriture au compte ASP.NET par défaut). Cette fois, la page doit charger sans erreur et le `LastTYASP35Access.txt` fichier doit être créé avec succès.</span><span class="sxs-lookup"><span data-stu-id="80417-154">(If needed, contact your web host provider for assistance on how to grant write permissions to the default ASP.NET account.) This time the page should load without error and the `LastTYASP35Access.txt` file should be created successfully.</span></span>

<span data-ttu-id="80417-155">Le take retenir, c’est qu’étant donné que le serveur de développement ASP.NET s’exécute sous un contexte de sécurité différent que IIS, il est possible que vos pages ASP.NET de lire ou écrire dans le système de fichiers, lire ou écrire dans le journal des événements Windows, ou lire ou écrire dans le Windows  Registre fonctionne comme prévu sur le développement, mais génèrent des exceptions sur la production.</span><span class="sxs-lookup"><span data-stu-id="80417-155">The take away here is that because the ASP.NET Development Server operates under a different security context than IIS, it is possible that your ASP.NET pages that read or write to the file system, read from or write to the Windows Event Log, or read or write to the Windows registry will work as expected on development but generate exceptions when on production.</span></span> <span data-ttu-id="80417-156">Lors de la création d’une application web qui sera déployée sur un environnement d’hébergement de web partagée, ne pas lire ou écrire dans le journal des événements ou le Registre Windows.</span><span class="sxs-lookup"><span data-stu-id="80417-156">When building a web application that will be deployed to a shared web hosting environment, do not read or write to the Event Log or the Windows registry.</span></span> <span data-ttu-id="80417-157">Notez également de toutes les pages ASP.NET de lire ou écrire dans le système de fichiers que vous devrez peut-être accorder en lecture et en écriture sur les dossiers appropriés dans l’environnement de production.</span><span class="sxs-lookup"><span data-stu-id="80417-157">Also take note of any ASP.NET pages that read from or write to the file system as you may need to grant read and write privileges on the appropriate folders in the production environment.</span></span>

## <a name="differences-on-serving-static-content"></a><span data-ttu-id="80417-158">Différences de proposer du contenu statique</span><span class="sxs-lookup"><span data-stu-id="80417-158">Differences On Serving Static Content</span></span>

<span data-ttu-id="80417-159">Une autre différence core entre IIS et le serveur de développement ASP.NET est la façon dont ils gèrent les demandes pour le contenu statique.</span><span class="sxs-lookup"><span data-stu-id="80417-159">Another core difference between IIS and the ASP.NET Development Server is how they handle requests for static content.</span></span> <span data-ttu-id="80417-160">Chaque requête qui est fourni dans le serveur de développement ASP.NET, que ce soit sur une page ASP.NET, une image ou un fichier JavaScript, est traitée par le runtime ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="80417-160">Every request that comes into the ASP.NET Development Server, whether for an ASP.NET page, an image, or a JavaScript file, is processed by the ASP.NET runtime.</span></span> <span data-ttu-id="80417-161">Par défaut, IIS appelle uniquement le runtime ASP.NET lorsqu’une demande arrive pour une ressource ASP.NET, comme une page web ASP.NET, un Service Web et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="80417-161">By default, IIS only invokes the ASP.NET runtime when a request comes in for an ASP.NET resource, such as an ASP.NET web page, a Web Service, and so forth.</span></span> <span data-ttu-id="80417-162">Requêtes de contenu statique - images, fichiers CSS, fichiers JavaScript, les fichiers PDF, fichiers ZIP, etc. - sont récupérés par IIS sans l’intervention du runtime ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="80417-162">Requests for static content - images, CSS files, JavaScript files, PDF files, ZIP files, and the like - are retrieved by IIS without the involvement of the ASP.NET runtime.</span></span> <span data-ttu-id="80417-163">(Il est possible de demander à IIS de fonctionner avec le runtime ASP.NET lorsque le traitement du contenu statique ; dans ce didacticiel pour plus d’informations, consultez la section « Authentification basée sur les formulaires d’exécution et l’authentification d’URL sur des fichiers statiques avec IIS 7 »).</span><span class="sxs-lookup"><span data-stu-id="80417-163">(It is possible to instruct IIS to work with the ASP.NET runtime when serving static content; consult the "Performing Forms-Based Authentication and URL Authentication on Static Files with IIS 7" section in this tutorial for more information.)</span></span>

<span data-ttu-id="80417-164">Le runtime ASP.NET effectue un nombre d’étapes pour générer le contenu demandé, y compris l’authentification (qui identifie le demandeur) et l’autorisation (en déterminant si le demandeur est autorisé à afficher le contenu demandé).</span><span class="sxs-lookup"><span data-stu-id="80417-164">The ASP.NET runtime performs a number of steps to generate the requested content, including authentication (identifying the requestor) and authorization (determining if the requestor has permission to view the requested content).</span></span> <span data-ttu-id="80417-165">Un formulaire populaires d’authentification est *l’authentification basée sur les formulaires*, dans lequel un utilisateur est identifié en entrant leurs informations d’identification (généralement un nom d’utilisateur et mot de passe) dans les zones de texte sur une page web.</span><span class="sxs-lookup"><span data-stu-id="80417-165">A popular form of authentication is *forms-based authentication*, in which a user is identified by entering their credentials - usually a username and password - into textboxes on a web page.</span></span> <span data-ttu-id="80417-166">Lors de la validation de leurs informations d’identification, le site Web stocke un *ticket d’authentification* cookie sur le navigateur de l’utilisateur, qui est envoyé avec chaque requête suivante adressée au site Web et est celui qui est utilisé pour authentifier l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="80417-166">Upon validating their credentials, the website stores an *authentication ticket* cookie on the user's browser, which is sent with every subsequent request to the website and is what is used to authenticate the user.</span></span> <span data-ttu-id="80417-167">En outre, il est possible de spécifier *l’autorisation d’URL* des règles qui déterminent quels utilisateurs peuvent ou ne peut pas accéder à un dossier particulier.</span><span class="sxs-lookup"><span data-stu-id="80417-167">Moreover, it is possible to specify *URL authorization* rules that dictate what users can or cannot access a particular folder.</span></span> <span data-ttu-id="80417-168">De nombreux sites Web ASP.NET utilisent l’authentification basée sur les formulaires et l’autorisation d’URL pour prendre en charge les comptes d’utilisateur et de définir les parties du site qui sont uniquement accessibles aux utilisateurs authentifiés ou les utilisateurs qui appartiennent à un rôle donné.</span><span class="sxs-lookup"><span data-stu-id="80417-168">Many ASP.NET websites use forms-based authentication and URL authorization to support user accounts and to define portions of the site that are only accessible to authenticated users or users that belong to a certain role.</span></span>

> [!NOTE]
> <span data-ttu-id="80417-169">Pour un examen approfondi de ASP. L’authentification basée sur les formulaires de NET, l’autorisation d’URL et autres fonctionnalités de compte utilisateur, veillez à consulter mes [didacticiels de sécurité de site Web](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span><span class="sxs-lookup"><span data-stu-id="80417-169">For a thorough examination of ASP.NET's forms-based authentication, URL authorization, and other user account-related features, be sure to check out my [Website Security Tutorials](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md).</span></span>

<span data-ttu-id="80417-170">Envisagez d’un site Web qui prend en charge les comptes d’utilisateur à l’aide d’autorisation basée sur les formulaires et un dossier, à l’aide de l’autorisation d’URL, est configuré pour autoriser uniquement les utilisateurs authentifiés.</span><span class="sxs-lookup"><span data-stu-id="80417-170">Consider a website that supports user accounts using forms-based authorization and has a folder that, using URL authorization, is configured to only allow authenticated users.</span></span> <span data-ttu-id="80417-171">Imaginez que ce dossier contient les pages ASP.NET et les fichiers PDF et que l’intention est que seuls les utilisateurs authentifiés peuvent afficher ces fichiers PDF.</span><span class="sxs-lookup"><span data-stu-id="80417-171">Imagine that this folder contains ASP.NET pages and PDF files and that the intent is that only authenticated users can view these PDF files.</span></span>

<span data-ttu-id="80417-172">Que se passe-t-il si un visiteur tente d’afficher un de ces fichiers PDF en entrant l’URL directement dans la barre d’adresse de son navigateur ?</span><span class="sxs-lookup"><span data-stu-id="80417-172">What happens if a visitor attempts to view one of these PDF files by entering the URL directly in his browser's Address bar?</span></span> <span data-ttu-id="80417-173">Pour découvrir, nous allons créer un nouveau dossier dans le site de critiques de livres, ajouter des fichiers PDF et configurer le site pour utiliser l’autorisation d’URL pour interdire aux utilisateurs anonymes d’accéder à ce dossier.</span><span class="sxs-lookup"><span data-stu-id="80417-173">To find out, let's create a new folder in the Book Reviews site, add some PDF files, and configure the site to use URL authorization to prohibit anonymous users from visiting this folder.</span></span> <span data-ttu-id="80417-174">Si vous téléchargez l’application de démonstration vous verrez que j’ai créé un dossier appelé `PrivateDocs` et ajouté un fichier PDF à partir de mon [didacticiels de sécurité de site Web](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md) (comment raccord !).</span><span class="sxs-lookup"><span data-stu-id="80417-174">If you download the demo application you'll see that I created a folder called `PrivateDocs` and added a PDF from my [Website Security Tutorials](../../older-versions-security/introduction/security-basics-and-asp-net-support-cs.md) (how fitting!).</span></span> <span data-ttu-id="80417-175">Le `PrivateDocs` dossier contient également un `Web.config` fichier qui spécifie les règles de l’autorisation d’URL pour refuser les utilisateurs anonymes :</span><span class="sxs-lookup"><span data-stu-id="80417-175">The `PrivateDocs` folder also contains a `Web.config` file that specifies the URL authorization rules to deny anonymous users:</span></span>

[!code-xml[Main](core-differences-between-iis-and-the-asp-net-development-server-cs/samples/sample2.xml)]

<span data-ttu-id="80417-176">Enfin, j’ai configuré l’application web pour utiliser l’authentification basée sur les formulaires en mettant à jour le `Web.config` fichier dans le répertoire racine, en remplaçant :</span><span class="sxs-lookup"><span data-stu-id="80417-176">Finally, I configured the web application to use forms-based authentication by updating the `Web.config` file in the root directory, replacing:</span></span>

[!code-xml[Main](core-differences-between-iis-and-the-asp-net-development-server-cs/samples/sample3.xml)]

<span data-ttu-id="80417-177">Par :</span><span class="sxs-lookup"><span data-stu-id="80417-177">With:</span></span>

[!code-xml[Main](core-differences-between-iis-and-the-asp-net-development-server-cs/samples/sample4.xml)]

<span data-ttu-id="80417-178">À l’aide du serveur de développement ASP.NET, visitez le site et entrez l’URL directe vers un des fichiers PDF dans la barre d’adresses de votre navigateur.</span><span class="sxs-lookup"><span data-stu-id="80417-178">Using the ASP.NET Development Server, visit the site and enter the direct URL to one of the PDF files in your browser's Address bar.</span></span> <span data-ttu-id="80417-179">Si vous avez téléchargé le site Web associé à ce didacticiel, à que l’URL doit ressembler : `http://localhost:portNumber/PrivateDocs/aspnet_tutorial01_Basics_vb.pdf`</span><span class="sxs-lookup"><span data-stu-id="80417-179">If you downloaded the website associated with this tutorial the URL should look something like: `http://localhost:portNumber/PrivateDocs/aspnet_tutorial01_Basics_vb.pdf`</span></span>

<span data-ttu-id="80417-180">Entrer cette URL dans la barre d’adresses de demande au navigateur d’envoyer une demande au serveur de développement ASP.NET pour le fichier.</span><span class="sxs-lookup"><span data-stu-id="80417-180">Entering this URL into the Address bar causes the browser to send a request to the ASP.NET Development Server for the file.</span></span> <span data-ttu-id="80417-181">Le serveur de développement ASP.NET remet la demande adressée au runtime ASP.NET pour le traitement.</span><span class="sxs-lookup"><span data-stu-id="80417-181">The ASP.NET Development Server hands off the request to the ASP.NET runtime for processing.</span></span> <span data-ttu-id="80417-182">Étant donné que nous n’avons pas encore connecté et parce que le `Web.config` dans le `PrivateDocs` dossier est configuré pour refuser l’accès anonyme, le runtime ASP.NET nous redirige automatiquement vers la page de connexion, `Login.aspx` (voir Figure 3).</span><span class="sxs-lookup"><span data-stu-id="80417-182">Because we have not yet logged in, and because the `Web.config` in the `PrivateDocs` folder is configured to deny anonymous access, the ASP.NET runtime automatically redirects us to the login page, `Login.aspx` (see Figure 3).</span></span> <span data-ttu-id="80417-183">Lors de la redirection de l’utilisateur dans le journal dans la page, ASP.NET propose une `ReturnUrl` paramètre de chaîne de requête qui indique la page de l’utilisateur a tenté à afficher.</span><span class="sxs-lookup"><span data-stu-id="80417-183">When redirecting the user to the log in page, ASP.NET includes a `ReturnUrl` querystring parameter that indicates the page the user was attempting to view.</span></span> <span data-ttu-id="80417-184">Après vous être connecté avec succès l’utilisateur peut être retournée à cette page.</span><span class="sxs-lookup"><span data-stu-id="80417-184">After successfully logging in the user can be returned to this page.</span></span>

<span data-ttu-id="80417-185">[![Les utilisateurs non autorisés sont automatiquement redirigés vers la Page de connexion](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image8.png)](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="80417-185">[![Unauthorized Users are Automatically Redirected to the Login Page](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image8.png)](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image7.png)</span></span>

<span data-ttu-id="80417-186">**Figure 3**: Les utilisateurs non autorisés sont automatiquement redirigés vers la Page de connexion ([cliquez pour afficher l’image en taille réelle](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="80417-186">**Figure 3**: Unauthorized Users are Automatically Redirected to the Login Page ([Click to view full-size image](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image9.png))</span></span>

<span data-ttu-id="80417-187">Maintenant nous allons voir comment cela se comporte sur la production.</span><span class="sxs-lookup"><span data-stu-id="80417-187">Now let's see how this behaves on production.</span></span> <span data-ttu-id="80417-188">Déployer votre application et entrez l’URL directe vers un fichier PDF dans le `PrivateDocs` dossier en production.</span><span class="sxs-lookup"><span data-stu-id="80417-188">Deploy your application and enter the direct URL to one of the PDFs in the `PrivateDocs` folder in production.</span></span> <span data-ttu-id="80417-189">Cela vous demande votre navigateur pour envoyer une demande IIS pour le fichier.</span><span class="sxs-lookup"><span data-stu-id="80417-189">This prompts your browser to send a request IIS for the file.</span></span> <span data-ttu-id="80417-190">Car un fichier statique est demandé, IIS extrait et renvoie le fichier sans appeler le runtime ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="80417-190">Because a static file is requested, IIS retrieves and returns the file without invoking the ASP.NET runtime.</span></span> <span data-ttu-id="80417-191">Par conséquent, il n’a aucune vérification de l’autorisation d’URL effectuée ; le contenu du fichier PDF soi-disant privé est accessible à toute personne connaissant l’URL directe au fichier.</span><span class="sxs-lookup"><span data-stu-id="80417-191">As a result, there was no URL authorization check performed; the contents of the supposedly private PDF are accessible to anyone who knows the direct URL to the file.</span></span>

<span data-ttu-id="80417-192">[![Les utilisateurs anonymes peuvent télécharger les fichiers de PDF de privé en entrant l’URL directe du fichier](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image11.png)](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="80417-192">[![Anonymous Users Can Download the Private PDF Files By Entering the Direct URL to the File](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image11.png)](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image10.png)</span></span>

<span data-ttu-id="80417-193">**Figure 4**: Les utilisateurs anonymes peuvent télécharger le privé PDF fichiers en entrant l’URL directe dans le fichier ([cliquez pour afficher l’image en taille réelle](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="80417-193">**Figure 4**: Anonymous Users Can Download the Private PDF Files By Entering the Direct URL to the File ([Click to view full-size image](core-differences-between-iis-and-the-asp-net-development-server-cs/_static/image12.png))</span></span>

### <a name="performing-forms-based-authentication-and-url-authentication-on-static-files-with-iis-7"></a><span data-ttu-id="80417-194">Exécution de l’authentification basée sur les formulaires et authentification de l’URL sur des fichiers statiques avec IIS 7</span><span class="sxs-lookup"><span data-stu-id="80417-194">Performing Forms-Based Authentication and URL Authentication on Static Files with IIS 7</span></span>

<span data-ttu-id="80417-195">Il existe quelques techniques que vous pouvez utiliser pour protéger le contenu statique des utilisateurs non autorisés.</span><span class="sxs-lookup"><span data-stu-id="80417-195">There are a couple of techniques you can use to protect static content from unauthorized users.</span></span> <span data-ttu-id="80417-196">IIS 7 a introduit le *pipeline intégré*, lequel Marie des flux de travail d’IIS avec les flux de travail du runtime ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="80417-196">IIS 7 introduced the *integrated pipeline*, which marries IIS's workflow with the ASP.NET runtime's workflow.</span></span> <span data-ttu-id="80417-197">En bref, vous pouvez demander à IIS pour appeler l’authentification du runtime ASP.NET et les modules d’autorisation de toutes les demandes entrantes (y compris le contenu statique tel que des fichiers PDF).</span><span class="sxs-lookup"><span data-stu-id="80417-197">In a nutshell, you can instruct IIS to invoke the ASP.NET runtime's authentication and authorization modules all incoming requests (including static content like PDF files).</span></span> <span data-ttu-id="80417-198">Contactez votre fournisseur d’hébergement web pour savoir comment configurer votre site Web pour utiliser le pipeline intégré.</span><span class="sxs-lookup"><span data-stu-id="80417-198">Contact your web host provider to find out how to configure your website to use the integrated pipeline.</span></span>

<span data-ttu-id="80417-199">Une fois qu’IIS a été configuré pour utiliser le pipeline intégré ajoutez le balisage suivant à la `Web.config` fichier dans le répertoire racine :</span><span class="sxs-lookup"><span data-stu-id="80417-199">Once IIS has been configured to use the integrated pipeline add the following markup to the `Web.config` file in the root directory:</span></span>

[!code-xml[Main](core-differences-between-iis-and-the-asp-net-development-server-cs/samples/sample5.xml)]

<span data-ttu-id="80417-200">Ce balisage indique à IIS 7 pour utiliser les modules d’authentification et d’autorisation basés sur ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="80417-200">This markup instructs IIS 7 to use the ASP.NET-based authentication and authorization modules.</span></span> <span data-ttu-id="80417-201">Redéployez votre application et puis vous accédez à nouveau le fichier PDF.</span><span class="sxs-lookup"><span data-stu-id="80417-201">Re-deploy your application and then re-visit the PDF file.</span></span> <span data-ttu-id="80417-202">Instant lorsqu’IIS gère la demande il donne la logique d’authentification et d’autorisation du runtime ASP.NET possibilité pour inspecter la demande.</span><span class="sxs-lookup"><span data-stu-id="80417-202">This time when IIS handles the request it gives the ASP.NET runtime's authentication and authorization logic an opportunity to inspect the request.</span></span> <span data-ttu-id="80417-203">Étant donné que seuls les utilisateurs authentifiés sont autorisés à afficher le contenu dans le `PrivateDocs` dossier, le visiteur anonyme est automatiquement redirigé vers la page de connexion (voir la Figure 3).</span><span class="sxs-lookup"><span data-stu-id="80417-203">Because only authenticated users are authorized to view the contents in the `PrivateDocs` folder, the anonymous visitor is automatically redirected to the login page (refer back to Figure 3).</span></span>

> [!NOTE]
> <span data-ttu-id="80417-204">Si votre fournisseur d’hébergement web continue d’utiliser IIS 6 vous ne pouvez pas utiliser la fonctionnalité de pipeline intégré.</span><span class="sxs-lookup"><span data-stu-id="80417-204">If your web host provider is still using IIS 6 then you cannot use the integrated pipeline feature.</span></span> <span data-ttu-id="80417-205">Une solution de contournement consiste à placer vos documents privés dans un dossier qui interdit l’accès HTTP (comme `App_Data`), puis créez une page pour répondre à ces documents.</span><span class="sxs-lookup"><span data-stu-id="80417-205">One workaround is to put your private documents in a folder that prohibits HTTP access (such as `App_Data`) and then create a page to serve these documents.</span></span> <span data-ttu-id="80417-206">Cette page peut être appelée `GetPDF.aspx`et est transmis le nom du fichier PDF via un paramètre de chaîne de requête.</span><span class="sxs-lookup"><span data-stu-id="80417-206">This page might be called `GetPDF.aspx`, and is passed the name of the PDF through a querystring parameter.</span></span> <span data-ttu-id="80417-207">Le `GetPDF.aspx` serait tout d’abord la vérification de page que l’utilisateur a l’autorisation d’afficher le fichier et, si tel est le cas, utilisez le [ `Response.WriteFile(filePath)` ](https://msdn.microsoft.com/library/system.web.httpresponse.writefile.aspx) méthode pour envoyer le contenu du fichier PDF demandé au client demandeur.</span><span class="sxs-lookup"><span data-stu-id="80417-207">The `GetPDF.aspx` page would first verify that the user has permission to view the file and, if so, would use the [`Response.WriteFile(filePath)`](https://msdn.microsoft.com/library/system.web.httpresponse.writefile.aspx) method to send the contents of the requested PDF file back to the requesting client.</span></span> <span data-ttu-id="80417-208">Cette technique fonctionne également pour IIS 7 si vous n’avez pas souhaité activer le pipeline intégré.</span><span class="sxs-lookup"><span data-stu-id="80417-208">This technique would also work for IIS 7 if you did not wish to enable the integrated pipeline.</span></span>

## <a name="summary"></a><span data-ttu-id="80417-209">Récapitulatif</span><span class="sxs-lookup"><span data-stu-id="80417-209">Summary</span></span>

<span data-ttu-id="80417-210">Applications Web dans un environnement de production sont hébergées à l’aide du logiciel de serveur web IIS de Microsoft.</span><span class="sxs-lookup"><span data-stu-id="80417-210">Web applications in a production environment are hosted using Microsoft's IIS web server software.</span></span> <span data-ttu-id="80417-211">Dans l’environnement de développement, toutefois, l’application peut être hébergée en utilisant IIS ou le serveur de développement ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="80417-211">In the development environment, however, the application may be hosted using IIS or the ASP.NET Development Server.</span></span> <span data-ttu-id="80417-212">Dans l’idéal, le même logiciel de serveur web doit être utilisé dans les deux environnements, car à l’aide d’un logiciel différent ajoute une autre variable dans la combinaison.</span><span class="sxs-lookup"><span data-stu-id="80417-212">Ideally, the same web server software should be used in both environments because using different software adds another variable in the mix.</span></span> <span data-ttu-id="80417-213">Toutefois, la facilité d’utilisation du serveur de développement ASP.NET rend un choix intéressant dans l’environnement de développement.</span><span class="sxs-lookup"><span data-stu-id="80417-213">However, the ease of use of the ASP.NET Development Server makes it an attractive choice in the development environment.</span></span> <span data-ttu-id="80417-214">La bonne nouvelle est qu’il existe uniquement quelques différences fondamentales entre IIS et le serveur de développement ASP.NET, et si vous avez pris connaissance de ces différences vous pouvez prendre des mesures pour vous assurer que l’application fonctionne et qu’il fonctionne de la même façon quel que soit le environnement.</span><span class="sxs-lookup"><span data-stu-id="80417-214">The good news is that there are only a few fundamental differences between IIS and the ASP.NET Development Server, and if you are aware of these differences you can take steps to help ensure that the application works and functions the same way regardless of the environment.</span></span>

<span data-ttu-id="80417-215">Bonne programmation !</span><span class="sxs-lookup"><span data-stu-id="80417-215">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="80417-216">informations supplémentaires</span><span class="sxs-lookup"><span data-stu-id="80417-216">Further Reading</span></span>

<span data-ttu-id="80417-217">Pour plus d’informations sur les sujets abordés dans ce didacticiel, consultez les ressources suivantes :</span><span class="sxs-lookup"><span data-stu-id="80417-217">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="80417-218">Intégration d’ASP.NET à IIS 7.0</span><span class="sxs-lookup"><span data-stu-id="80417-218">ASP.NET Integration with IIS 7.0</span></span>](https://www.iis.net/learn/application-frameworks/building-and-running-aspnet-applications/aspnet-integration-with-iis)
- <span data-ttu-id="80417-219">[À l’aide de l’authentification de Forums ASP.NET avec tous les Types de contenu sur IIS 7](https://blogs.iis.net/bills/archive/2007/05/19/using-asp-net-forms-authentication-with-all-types-of-content-with-iis7-video.aspx) (vidéo)</span><span class="sxs-lookup"><span data-stu-id="80417-219">[Using ASP.NET Forums Authentication With All Types of Content on IIS 7](https://blogs.iis.net/bills/archive/2007/05/19/using-asp-net-forms-authentication-with-all-types-of-content-with-iis7-video.aspx) (Video)</span></span>
- [<span data-ttu-id="80417-220">Serveurs Web dans Visual Web Developer</span><span class="sxs-lookup"><span data-stu-id="80417-220">Web Servers in Visual Web Developer</span></span>](https://msdn.microsoft.com/library/58wxa9w5.aspx)

> [!div class="step-by-step"]
> <span data-ttu-id="80417-221">[Précédent](common-configuration-differences-between-development-and-production-cs.md)
> [Suivant](deploying-a-database-cs.md)</span><span class="sxs-lookup"><span data-stu-id="80417-221">[Previous](common-configuration-differences-between-development-and-production-cs.md)
[Next](deploying-a-database-cs.md)</span></span>

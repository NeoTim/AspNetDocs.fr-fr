---
uid: web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-web-services
title: Présentation des Services Web ASP.NET AJAX | Microsoft Docs
author: scottcate
description: Services Web font partie intégrante du .NET framework qui fournissent une solution multiplateforme pour échanger des données entre les systèmes distribués. Bien que Web...
ms.author: riande
ms.date: 03/28/2008
ms.assetid: 3332d6e7-e2e1-4144-b805-e71d51e7e415
msc.legacyurl: /web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-web-services
msc.type: authoredcontent
ms.openlocfilehash: e576e11d63f940f1683ed26d217ff255a31b007c
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/09/2019
ms.locfileid: "59388411"
---
# <a name="understanding-aspnet-ajax-web-services"></a><span data-ttu-id="173e3-104">Présentation des services web ASP.NET AJAX</span><span class="sxs-lookup"><span data-stu-id="173e3-104">Understanding ASP.NET AJAX Web Services</span></span>

<span data-ttu-id="173e3-105">par [Scott Cate](https://github.com/scottcate)</span><span class="sxs-lookup"><span data-stu-id="173e3-105">by [Scott Cate](https://github.com/scottcate)</span></span>

[<span data-ttu-id="173e3-106">Télécharger le PDF</span><span class="sxs-lookup"><span data-stu-id="173e3-106">Download PDF</span></span>](http://download.microsoft.com/download/C/1/9/C19A3451-1D14-477C-B703-54EF22E197EE/AJAX_tutorial05_Web_Services_with_MS_Ajax_cs.pdf)

> <span data-ttu-id="173e3-107">Services Web font partie intégrante du .NET framework qui fournissent une solution multiplateforme pour échanger des données entre les systèmes distribués.</span><span class="sxs-lookup"><span data-stu-id="173e3-107">Web Services are an integral part of the .NET framework that provide a cross-platform solution for exchanging data between distributed systems.</span></span> <span data-ttu-id="173e3-108">Bien que les Services Web sont normalement utilisés pour autoriser différents systèmes d’exploitation, les modèles d’objet et les langages de programmation pour envoyer et recevoir des données, elles peuvent également servir pour injecter des données dans une page ASP.NET AJAX ou envoyer des données à partir d’une page à un système back-end de manière dynamique.</span><span class="sxs-lookup"><span data-stu-id="173e3-108">Although Web Services are normally used to allow different operating systems, object models and programming languages to send and receive data, they can also be used to dynamically inject data into an ASP.NET AJAX page or send data from a page to a back-end system.</span></span> <span data-ttu-id="173e3-109">Tout cela est possible sans avoir recours pour les opérations de publication (postback).</span><span class="sxs-lookup"><span data-stu-id="173e3-109">All of this can be done without resorting to postback operations.</span></span>


## <a name="calling-web-services-with-aspnet-ajax"></a><span data-ttu-id="173e3-110">Appel de Services Web avec ASP.NET AJAX</span><span class="sxs-lookup"><span data-stu-id="173e3-110">Calling Web Services with ASP.NET AJAX</span></span>

<span data-ttu-id="173e3-111">Dan Wahlin</span><span class="sxs-lookup"><span data-stu-id="173e3-111">Dan Wahlin</span></span>

<span data-ttu-id="173e3-112">Services Web font partie intégrante du .NET framework qui fournissent une solution multiplateforme pour échanger des données entre les systèmes distribués.</span><span class="sxs-lookup"><span data-stu-id="173e3-112">Web Services are an integral part of the .NET framework that provide a cross-platform solution for exchanging data between distributed systems.</span></span> <span data-ttu-id="173e3-113">Bien que les Services Web sont normalement utilisés pour autoriser différents systèmes d’exploitation, les modèles d’objet et les langages de programmation pour envoyer et recevoir des données, elles peuvent également servir pour injecter des données dans une page ASP.NET AJAX ou envoyer des données à partir d’une page à un système back-end de manière dynamique.</span><span class="sxs-lookup"><span data-stu-id="173e3-113">Although Web Services are normally used to allow different operating systems, object models and programming languages to send and receive data, they can also be used to dynamically inject data into an ASP.NET AJAX page or send data from a page to a back-end system.</span></span> <span data-ttu-id="173e3-114">Tout cela est possible sans avoir recours pour les opérations de publication (postback).</span><span class="sxs-lookup"><span data-stu-id="173e3-114">All of this can be done without resorting to postback operations.</span></span>

<span data-ttu-id="173e3-115">Bien que le contrôle UpdatePanel d’ASP.NET AJAX fournit un moyen simple d’AJAX activer n’importe quelle page ASP.NET, il peut arriver que vous deviez accéder dynamiquement des données sur le serveur sans utiliser un UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="173e3-115">While the ASP.NET AJAX UpdatePanel control provides a simple way to AJAX enable any ASP.NET page, there may be times when you need to dynamically access data on the server without using an UpdatePanel.</span></span> <span data-ttu-id="173e3-116">Dans cet article, vous verrez comment accomplir cette tâche en créant et en consommation de Services Web au sein des pages ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="173e3-116">In this article you'll see how to accomplish this by creating and consuming Web Services within ASP.NET AJAX pages.</span></span>

<span data-ttu-id="173e3-117">Cet article se concentrera sur les fonctionnalités disponibles dans les Extensions AJAX de ASP.NET core, ainsi que d’un contrôle de Service Web est activé dans le Kit de ressources ASP.NET AJAX appelé le AutoCompleteExtender.</span><span class="sxs-lookup"><span data-stu-id="173e3-117">This article will focus on functionality available in the core ASP.NET AJAX Extensions as well as a Web Service enabled control in the ASP.NET AJAX Toolkit called the AutoCompleteExtender.</span></span> <span data-ttu-id="173e3-118">Les sujets abordés incluent la définition des Services Web compatibles AJAX, création de proxys de client et appeler les Services Web avec JavaScript.</span><span class="sxs-lookup"><span data-stu-id="173e3-118">Topics covered include defining AJAX-enabled Web Services, creating client proxies and calling Web Services with JavaScript.</span></span> <span data-ttu-id="173e3-119">Vous verrez également comment les appels de Service Web peuvent être effectués directement à des méthodes de page ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="173e3-119">You'll also see how Web Service calls can be made directly to ASP.NET page methods.</span></span>

## <a name="web-services-configuration"></a><span data-ttu-id="173e3-120">Configuration des Services Web</span><span class="sxs-lookup"><span data-stu-id="173e3-120">Web Services Configuration</span></span>

<span data-ttu-id="173e3-121">Quand un nouveau projet de Site Web est créé avec Visual Studio 2008, le fichier web.config a un nombre de nouveaux ajouts qui peuvent être peu familières aux utilisateurs des versions antérieures de Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="173e3-121">When a new Web Site project is created with Visual Studio 2008, the web.config file has a number of new additions that may be unfamiliar to users of previous versions of Visual Studio.</span></span> <span data-ttu-id="173e3-122">Parmi ces modifications mapper le préfixe « asp » aux contrôles ASP.NET AJAX afin de pouvoir être utilisés dans les pages alors que d’autres définissent obligatoires HttpHandlers et HttpModules.</span><span class="sxs-lookup"><span data-stu-id="173e3-122">Some of these modifications map the "asp" prefix to ASP.NET AJAX controls so they can be used in pages while others define required HttpHandlers and HttpModules.</span></span> <span data-ttu-id="173e3-123">Liste 1 montre les modifications apportées à la `<httpHandlers>` élément dans le fichier web.config qui affecte les appels de Service Web.</span><span class="sxs-lookup"><span data-stu-id="173e3-123">Listing 1 shows modifications made to the `<httpHandlers>` element in web.config that affects Web Service calls.</span></span> <span data-ttu-id="173e3-124">La valeur par défaut que HttpHandler utilisée pour traiter les appels .asmx est supprimé et remplacé par une classe ScriptHandlerFactory située dans l’assembly System.Web.Extensions.dll.</span><span class="sxs-lookup"><span data-stu-id="173e3-124">The default HttpHandler used to process .asmx calls is removed and replaced with a ScriptHandlerFactory class located in the System.Web.Extensions.dll assembly.</span></span> <span data-ttu-id="173e3-125">System.Web.Extensions.dll contient toutes les fonctionnalités de base utilisée par ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="173e3-125">System.Web.Extensions.dll contains all of the core functionality used by ASP.NET AJAX.</span></span>

**<span data-ttu-id="173e3-126">Listing 1.</span><span class="sxs-lookup"><span data-stu-id="173e3-126">Listing 1.</span></span> <span data-ttu-id="173e3-127">Configuration du Gestionnaire de Service Web ASP.NET AJAX</span><span class="sxs-lookup"><span data-stu-id="173e3-127">ASP.NET AJAX Web Service Handler Configuration</span></span>**

[!code-xml[Main](understanding-asp-net-ajax-web-services/samples/sample1.xml)]

<span data-ttu-id="173e3-128">Ce remplacement HttpHandler est effectué afin de permettre les appels JavaScript Objet Notation (JSON) à être effectué à partir de pages ASP.NET AJAX pour les Services Web .NET à l’aide d’un proxy de Service Web de JavaScript.</span><span class="sxs-lookup"><span data-stu-id="173e3-128">This HttpHandler replacement is made in order to allow JavaScript Object Notation (JSON) calls to be made from ASP.NET AJAX pages to .NET Web Services using a JavaScript Web Service proxy.</span></span> <span data-ttu-id="173e3-129">ASP.NET AJAX envoie des messages JSON aux Services Web plutôt que les appels SOAP Simple Object Access Protocol () standard généralement associés aux Services Web.</span><span class="sxs-lookup"><span data-stu-id="173e3-129">ASP.NET AJAX sends JSON messages to Web Services as opposed to the standard Simple Object Access Protocol (SOAP) calls typically associated with Web Services.</span></span> <span data-ttu-id="173e3-130">Cela entraîne plus petits messages de demande et réponse globales.</span><span class="sxs-lookup"><span data-stu-id="173e3-130">This results in smaller request and response messages overall.</span></span> <span data-ttu-id="173e3-131">Il permet également de traitement côté client plus efficace de données dans la mesure où la bibliothèque JavaScript AJAX ASP.NET est optimisée pour travailler avec des objets JSON.</span><span class="sxs-lookup"><span data-stu-id="173e3-131">It also allows for more efficient client-side processing of data since the ASP.NET AJAX JavaScript library is optimized to work with JSON objects.</span></span> <span data-ttu-id="173e3-132">Listing 2 et des exemples de show Listing 3 Service Web messages de demande et réponse sérialisés au format JSON.</span><span class="sxs-lookup"><span data-stu-id="173e3-132">Listing 2 and Listing 3 show examples of Web Service request and response messages serialized to JSON format.</span></span> <span data-ttu-id="173e3-133">Le message de demande indiqué dans le Listing 2 passe un paramètre de pays avec la valeur « Belgique » alors que le message de réponse dans le Listing 3 passe un tableau d’objets Customer et leurs propriétés associées.</span><span class="sxs-lookup"><span data-stu-id="173e3-133">The request message shown in Listing 2 passes a country parameter with a value of "Belgium" while the response message in Listing 3 passes an array of Customer objects and their associated properties.</span></span>

**<span data-ttu-id="173e3-134">Listing 2.</span><span class="sxs-lookup"><span data-stu-id="173e3-134">Listing 2.</span></span> <span data-ttu-id="173e3-135">Message de demande de Service Web sérialisé vers JSON</span><span class="sxs-lookup"><span data-stu-id="173e3-135">Web Service Request Message Serialized to JSON</span></span>**

[!code-json[Main](understanding-asp-net-ajax-web-services/samples/sample2.json)]

> *> [!NOTE]
> <span data-ttu-id="173e3-136">le nom de l’opération est défini dans le cadre de l’URL pour le service web. en outre, les messages de demande ne sont pas toujours soumis par le biais de JSON.</span><span class="sxs-lookup"><span data-stu-id="173e3-136">the operation name is defined as part of the URL to the web service; additionally, request messages are not always submitted via JSON.</span></span> <span data-ttu-id="173e3-137">Services Web peuvent utiliser l’attribut ScriptMethod avec le paramètre UseHttpGet défini sur true, ce qui entraîne des paramètres à passer un les paramètres de chaîne de requête.</span><span class="sxs-lookup"><span data-stu-id="173e3-137">Web Services can utilize the ScriptMethod attribute with the UseHttpGet parameter set to true, which causes parameters to be passed via a the query string parameters.</span></span>*


**<span data-ttu-id="173e3-138">Liste 3.</span><span class="sxs-lookup"><span data-stu-id="173e3-138">Listing 3.</span></span> <span data-ttu-id="173e3-139">Message de réponse de Service Web sérialisé vers JSON</span><span class="sxs-lookup"><span data-stu-id="173e3-139">Web Service Response Message Serialized to JSON</span></span>**

[!code-json[Main](understanding-asp-net-ajax-web-services/samples/sample3.json)]

<span data-ttu-id="173e3-140">Dans la section suivante, vous allez apprendre à créer des Services Web capable de gérer les messages de demande JSON et répond avec les types simples et complexes.</span><span class="sxs-lookup"><span data-stu-id="173e3-140">In the next section you'll see how to create Web Services capable of handling JSON request messages and responding with both simple and complex types.</span></span>

## <a name="creating-ajax-enabled-web-services"></a><span data-ttu-id="173e3-141">Création de Services Web compatibles AJAX</span><span class="sxs-lookup"><span data-stu-id="173e3-141">Creating AJAX-Enabled Web Services</span></span>

<span data-ttu-id="173e3-142">L’infrastructure ASP.NET AJAX fournit plusieurs façons d’appeler des Services Web.</span><span class="sxs-lookup"><span data-stu-id="173e3-142">The ASP.NET AJAX framework provides several different ways to call Web Services.</span></span> <span data-ttu-id="173e3-143">Vous pouvez utiliser le contrôle AutoCompleteExtender (disponible dans le Kit de ressources ASP.NET AJAX) ou JavaScript.</span><span class="sxs-lookup"><span data-stu-id="173e3-143">You can use the AutoCompleteExtender control (available in the ASP.NET AJAX Toolkit) or JavaScript.</span></span> <span data-ttu-id="173e3-144">Toutefois, avant d’appeler un service vous devez activer AJAX il afin qu’il peut être appelé par le code de script client.</span><span class="sxs-lookup"><span data-stu-id="173e3-144">However, before calling a service you have to AJAX-enable it so that it can be called by client-script code.</span></span>

<span data-ttu-id="173e3-145">Si vous débutez avec les Services Web ASP.NET, vous trouverez il simples à créer et AJAX-activer les services.</span><span class="sxs-lookup"><span data-stu-id="173e3-145">Whether or not you're new to ASP.NET Web Services, you'll find it straightforward to create and AJAX-enable services.</span></span> <span data-ttu-id="173e3-146">Le .NET framework prend en charge la création de Services Web ASP.NET depuis sa publication initiale en 2002 et les Extensions ASP.NET AJAX fournissent des fonctionnalités AJAX supplémentaires qui s’appuie sur l’ensemble de fonctionnalités par défaut du .NET framework.</span><span class="sxs-lookup"><span data-stu-id="173e3-146">The .NET framework has supported the creation of ASP.NET Web Services since its initial release in 2002 and the ASP.NET AJAX Extensions provide additional AJAX functionality that builds upon the .NET framework's default set of features.</span></span> <span data-ttu-id="173e3-147">Visual Studio .NET 2008 Bêta 2 a une prise en charge intégrée pour la création des fichiers de Service Web .asmx et déduit automatiquement le code associé à côté des classes à partir de la classe System.Web.Services.WebService.</span><span class="sxs-lookup"><span data-stu-id="173e3-147">Visual Studio .NET 2008 Beta 2 has built-in support for creating .asmx Web Service files and automatically derives associated code beside classes from the System.Web.Services.WebService class.</span></span> <span data-ttu-id="173e3-148">Lorsque vous ajoutez des méthodes dans la classe, vous devez appliquer l’attribut WebMethod dans l’ordre pour qu’ils puissent être appelées par les consommateurs de services Web.</span><span class="sxs-lookup"><span data-stu-id="173e3-148">As you add methods into the class you must apply the WebMethod attribute in order for them to be called by Web Service consumers.</span></span>

<span data-ttu-id="173e3-149">Liste 4 montre un exemple d’application de l’attribut WebMethod à une méthode nommée GetCustomersByCountry().</span><span class="sxs-lookup"><span data-stu-id="173e3-149">Listing 4 shows an example of applying the WebMethod attribute to a method named GetCustomersByCountry().</span></span>

**<span data-ttu-id="173e3-150">Liste 4.</span><span class="sxs-lookup"><span data-stu-id="173e3-150">Listing 4.</span></span> <span data-ttu-id="173e3-151">À l’aide de l’attribut WebMethod dans un Service Web</span><span class="sxs-lookup"><span data-stu-id="173e3-151">Using the WebMethod Attribute in a Web Service</span></span>**

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample4.cs)]

<span data-ttu-id="173e3-152">La méthode GetCustomersByCountry() accepte un paramètre de pays et retourne un client tableau d’objets.</span><span class="sxs-lookup"><span data-stu-id="173e3-152">The GetCustomersByCountry() method accepts a country parameter and returns a Customer object array.</span></span> <span data-ttu-id="173e3-153">La valeur de pays passée dans la méthode est transférée à une classe de couche métier qui à son tour appelle une classe de couche données pour récupérer les données à partir de la base de données, remplir les propriétés d’objet client avec des données et retourner le tableau.</span><span class="sxs-lookup"><span data-stu-id="173e3-153">The country value passed into the method is forwarded to a business layer class which in turn calls a data layer class to retrieve the data from the database, fill the Customer object properties with data and return the array.</span></span>

## <a name="using-the-scriptservice-attribute"></a><span data-ttu-id="173e3-154">À l’aide de l’attribut ScriptService</span><span class="sxs-lookup"><span data-stu-id="173e3-154">Using the ScriptService Attribute</span></span>

<span data-ttu-id="173e3-155">Lors de l’ajout de la méthode Web attribut permet à la méthode GetCustomersByCountry() doit être appelée par les clients qui envoient des messages SOAP standard pour le Service Web, il n’autorise pas les appels JSON à partir des applications ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="173e3-155">While adding the WebMethod attribute allows the GetCustomersByCountry() method to be called by clients that send standard SOAP messages to the Web Service, it doesn't allow JSON calls to be made from ASP.NET AJAX applications out of the box.</span></span> <span data-ttu-id="173e3-156">Pour permettre les appels JSON qu’il veut vous devez appliquer l’Extension d’ASP.NET AJAX `ScriptService` attribut à la classe de Service Web.</span><span class="sxs-lookup"><span data-stu-id="173e3-156">To allow JSON calls to be made you have to apply the ASP.NET AJAX Extension's `ScriptService` attribute to the Web Service class.</span></span> <span data-ttu-id="173e3-157">Cela permet à un Service Web envoyer des messages de réponse mis en forme à l’aide de JSON et permet à un script côté client appeler un service en envoyant des messages JSON.</span><span class="sxs-lookup"><span data-stu-id="173e3-157">This enables a Web Service to send response messages formatted using JSON and allows client-side script to call a service by sending JSON messages.</span></span>

<span data-ttu-id="173e3-158">Liste 5 illustre un exemple d’application de l’attribut ScriptService à une classe de Service Web nommée CustomersService.</span><span class="sxs-lookup"><span data-stu-id="173e3-158">Listing 5 shows an example of applying the ScriptService attribute to a Web Service class named CustomersService.</span></span>

**<span data-ttu-id="173e3-159">Liste 5.</span><span class="sxs-lookup"><span data-stu-id="173e3-159">Listing 5.</span></span> <span data-ttu-id="173e3-160">À l’aide de l’attribut ScriptService à un Service Web compatible AJAX</span><span class="sxs-lookup"><span data-stu-id="173e3-160">Using the ScriptService Attribute to AJAX-enable a Web Service</span></span>**

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample5.cs)]

<span data-ttu-id="173e3-161">L’attribut ScriptService joue un marqueur qui indique qu’il peut être appelée à partir du code de script AJAX.</span><span class="sxs-lookup"><span data-stu-id="173e3-161">The ScriptService attribute acts as a marker that indicates it can be called from AJAX script code.</span></span> <span data-ttu-id="173e3-162">Il en fait ne gère pas les tâches de sérialisation ou désérialisation JSON qui se produisent en arrière-plan.</span><span class="sxs-lookup"><span data-stu-id="173e3-162">It doesn't actually handle any of the JSON serialization or deserialization tasks that occur behind the scenes.</span></span> <span data-ttu-id="173e3-163">Le ScriptHandlerFactory (configuré dans le fichier web.config) et autres classes connexes effectuent le plus gros de traitement JSON.</span><span class="sxs-lookup"><span data-stu-id="173e3-163">The ScriptHandlerFactory (configured in web.config) and other related classes do the bulk of JSON processing.</span></span>

## <a name="using-the-scriptmethod-attribute"></a><span data-ttu-id="173e3-164">À l’aide de l’attribut ScriptMethod</span><span class="sxs-lookup"><span data-stu-id="173e3-164">Using the ScriptMethod Attribute</span></span>

<span data-ttu-id="173e3-165">L’attribut ScriptService est le seul attribut d’ASP.NET AJAX qui doit être définie dans un Service Web de .NET pour qu’il utilisable par les pages ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="173e3-165">The ScriptService attribute is the only ASP.NET AJAX attribute that has to be defined in a .NET Web Service in order for it to be used by ASP.NET AJAX pages.</span></span> <span data-ttu-id="173e3-166">Toutefois, un autre attribut nommé ScriptMethod peut également être appliqué directement à des méthodes Web dans un service.</span><span class="sxs-lookup"><span data-stu-id="173e3-166">However, another attribute named ScriptMethod can also be applied directly to Web Methods in a service.</span></span> <span data-ttu-id="173e3-167">ScriptMethod définit trois propriétés, y compris `UseHttpGet`, `ResponseFormat` et `XmlSerializeString`.</span><span class="sxs-lookup"><span data-stu-id="173e3-167">ScriptMethod defines three properties including `UseHttpGet`, `ResponseFormat` and `XmlSerializeString`.</span></span> <span data-ttu-id="173e3-168">Modification des valeurs de ces propriétés peut être utile dans les cas où le type de demande acceptée par une méthode Web doit être modifié pour GET, lorsqu’une méthode Web doit renvoyer des données XML brutes sous la forme d’un `XmlDocument` ou `XmlElement` objet ou lorsque les données retournées à partir d’un  service doit toujours être sérialisé au format XML au lieu de JSON.</span><span class="sxs-lookup"><span data-stu-id="173e3-168">Changing the values of these properties can be useful in cases where the type of request accepted by a Web Method needs to be changed to GET, when a Web Method needs to return raw XML data in the form of an `XmlDocument` or `XmlElement` object or when data returned from a service should always be serialized as XML instead of JSON.</span></span>

<span data-ttu-id="173e3-169">La propriété peut être utilisée lorsqu’une méthode Web doit accepter de UseHttpGet obtenir des demandes par opposition aux requêtes POST.</span><span class="sxs-lookup"><span data-stu-id="173e3-169">The UseHttpGet property can be used when a Web Method should accept GET requests as opposed to POST requests.</span></span> <span data-ttu-id="173e3-170">Demandes sont envoyées à l’aide d’une URL avec des paramètres d’entrée de méthode Web convertie en fonction des paramètres.</span><span class="sxs-lookup"><span data-stu-id="173e3-170">Requests are sent using a URL with Web Method input parameters converted to QueryString parameters.</span></span> <span data-ttu-id="173e3-171">Le UseHttpGet propriété par défaut est false et doit uniquement être définie sur `true` lorsque les opérations sont connues pour être sécurisée et lorsque les données sensibles ne sont pas transmises à un Service Web.</span><span class="sxs-lookup"><span data-stu-id="173e3-171">The UseHttpGet property defaults to false and should only be set to `true` when operations are known to be safe and when sensitive data is not passed to a Web Service.</span></span> <span data-ttu-id="173e3-172">Liste 6 montre un exemple d’utilisation de l’attribut ScriptMethod avec la propriété UseHttpGet.</span><span class="sxs-lookup"><span data-stu-id="173e3-172">Listing 6 shows an example of using the ScriptMethod attribute with the UseHttpGet property.</span></span>

**<span data-ttu-id="173e3-173">Liste 6.</span><span class="sxs-lookup"><span data-stu-id="173e3-173">Listing 6.</span></span> <span data-ttu-id="173e3-174">À l’aide de l’attribut ScriptMethod avec la propriété UseHttpGet.</span><span class="sxs-lookup"><span data-stu-id="173e3-174">Using the ScriptMethod attribute with the UseHttpGet property.</span></span>**

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample6.cs)]

<span data-ttu-id="173e3-175">Les en-têtes envoyés lorsque la méthode Web HttpGetEcho indiqué dans la liste 6 est appelée sont montre suivant :</span><span class="sxs-lookup"><span data-stu-id="173e3-175">An example of the headers sent when the HttpGetEcho Web Method shown in Listing 6 is called are shown next:</span></span>

`GET /CustomerViewer/DemoService.asmx/HttpGetEcho?input=%22Input Value%22 HTTP/1.1`

<span data-ttu-id="173e3-176">En plus de permettre des méthodes Web à accepter les demandes HTTP GET, l’attribut ScriptMethod peut également servir lorsque des réponses XML doivent être retournés à partir d’un service plutôt que JSON.</span><span class="sxs-lookup"><span data-stu-id="173e3-176">In addition to allowing Web Methods to accept HTTP GET requests, the ScriptMethod attribute can also be used when XML responses need to be returned from a service rather than JSON.</span></span> <span data-ttu-id="173e3-177">Par exemple, un Service Web peut récupérer un flux RSS à partir d’un site distant et le retourner comme un objet XmlDocument ou XmlElement.</span><span class="sxs-lookup"><span data-stu-id="173e3-177">For example, a Web Service may retrieve an RSS feed from a remote site and return it as an XmlDocument or XmlElement object.</span></span> <span data-ttu-id="173e3-178">Traitement des données XML données peuvent ensuite se produire sur le client.</span><span class="sxs-lookup"><span data-stu-id="173e3-178">Processing of the XML data can then occur on the client.</span></span>

<span data-ttu-id="173e3-179">Liste 7 montre un exemple d’utilisation de la propriété ResponseFormat pour spécifier que les données XML doivent être retournées par une méthode Web.</span><span class="sxs-lookup"><span data-stu-id="173e3-179">Listing 7 shows an example of using the ResponseFormat property to specify that XML data should be returned from a Web Method.</span></span>

**<span data-ttu-id="173e3-180">Liste 7.</span><span class="sxs-lookup"><span data-stu-id="173e3-180">Listing 7.</span></span> <span data-ttu-id="173e3-181">À l’aide de l’attribut ScriptMethod avec la propriété ResponseFormat.</span><span class="sxs-lookup"><span data-stu-id="173e3-181">Using the ScriptMethod attribute with the ResponseFormat property.</span></span>**

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample7.cs)]

<span data-ttu-id="173e3-182">La propriété ResponseFormat peut également être utilisée avec la propriété XmlSerializeString.</span><span class="sxs-lookup"><span data-stu-id="173e3-182">The ResponseFormat property can also be used along with the XmlSerializeString property.</span></span> <span data-ttu-id="173e3-183">La propriété XmlSerializeString a la valeur false, ce qui signifie que tous les retournent les types à l’exception des chaînes retournées par une méthode Web sont sérialisés au format XML par défaut lorsque le `ResponseFormat` propriété est définie sur `ResponseFormat.Xml`.</span><span class="sxs-lookup"><span data-stu-id="173e3-183">The XmlSerializeString property has a default value of false which means that all return types except strings returned from a Web Method are serialized as XML when the `ResponseFormat` property is set to `ResponseFormat.Xml`.</span></span> <span data-ttu-id="173e3-184">Lorsque `XmlSerializeString` a la valeur `true`, tous les types retournés à partir d’une méthode Web sont sérialisées en XML, y compris les types de chaîne.</span><span class="sxs-lookup"><span data-stu-id="173e3-184">When `XmlSerializeString` is set to `true`, all types returned from a Web Method are serialized as XML including string types.</span></span> <span data-ttu-id="173e3-185">Si la propriété ResponseFormat a la valeur `ResponseFormat.Json` la propriété XmlSerializeString est ignorée.</span><span class="sxs-lookup"><span data-stu-id="173e3-185">If the ResponseFormat property has a value of `ResponseFormat.Json` the XmlSerializeString property is ignored.</span></span>

<span data-ttu-id="173e3-186">Liste 8 montre un exemple d’utilisation de la propriété XmlSerializeString pour forcer les chaînes doit être sérialisé au format XML.</span><span class="sxs-lookup"><span data-stu-id="173e3-186">Listing 8 shows an example of using the XmlSerializeString property to force strings to be serialized as XML.</span></span>

**<span data-ttu-id="173e3-187">Liste 8.</span><span class="sxs-lookup"><span data-stu-id="173e3-187">Listing 8.</span></span> <span data-ttu-id="173e3-188">À l’aide de l’attribut ScriptMethod avec la propriété XmlSerializeString</span><span class="sxs-lookup"><span data-stu-id="173e3-188">Using the ScriptMethod attribute with the XmlSerializeString property</span></span>**

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample8.cs)]

<span data-ttu-id="173e3-189">La valeur retournée par la méthode GetXmlString Web indiqué dans la liste 8 est indiquée ci-après :</span><span class="sxs-lookup"><span data-stu-id="173e3-189">The value returned from calling the GetXmlString Web Method shown in Listing 8 is shown next:</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample9.cs)]

<span data-ttu-id="173e3-190">Bien que le format JSON par défaut réduit la taille globale des messages de demande et de réponse et est plus facilement consommé par les clients ASP.NET AJAX de manière multinavigateurs, les propriétés ResponseFormat et XmlSerializeString peuvent être utilisé lorsque client les applications telles que Internet Explorer 5 ou version ultérieure attendent des données XML doit être retourné à partir d’une méthode Web.</span><span class="sxs-lookup"><span data-stu-id="173e3-190">Although the default JSON format minimizes the overall size of request and response messages and is more readily consumed by ASP.NET AJAX clients in a cross-browser manner, the ResponseFormat and XmlSerializeString properties can be utilized when client applications such as Internet Explorer 5 or higher expect XML data to be returned from a Web Method.</span></span>

## <a name="working-with-complex-types"></a><span data-ttu-id="173e3-191">Utilisation des Types complexes</span><span class="sxs-lookup"><span data-stu-id="173e3-191">Working with Complex Types</span></span>

<span data-ttu-id="173e3-192">Liste 5 a montré un exemple de retourner un type complexe nommé client à partir d’un Service Web.</span><span class="sxs-lookup"><span data-stu-id="173e3-192">Listing 5 showed an example of returning a complex type named Customer from a Web Service.</span></span> <span data-ttu-id="173e3-193">La classe Customer définit plusieurs types simples en interne en tant que propriétés telles que FirstName et LastName.</span><span class="sxs-lookup"><span data-stu-id="173e3-193">The Customer class defines several different simple types internally as properties such as FirstName and LastName.</span></span> <span data-ttu-id="173e3-194">Les types complexes utilisés en tant que paramètre d’entrée ou le type de retour sur une méthode Web compatibles AJAX sont automatiquement sérialisés en JSON avant d’être envoyés au côté client.</span><span class="sxs-lookup"><span data-stu-id="173e3-194">Complex types used as an input parameter or return type on an AJAX-enabled Web Method are automatically serialized into JSON before being sent to the client-side.</span></span> <span data-ttu-id="173e3-195">Toutefois, les types complexes imbriqués (celles définies en interne dans un autre type) ne sont pas accessibles au client en tant qu’objets autonomes par défaut.</span><span class="sxs-lookup"><span data-stu-id="173e3-195">However, nested complex types (those defined internally within another type) are not made available to the client as standalone objects by default.</span></span>

<span data-ttu-id="173e3-196">Dans les cas où un type complexe imbriqué utilisé par un Service Web doit également être utilisé dans une page de client, l’attribut d’ASP.NET AJAX GenerateScriptType peut être ajouté au Service Web.</span><span class="sxs-lookup"><span data-stu-id="173e3-196">In cases where a nested complex type used by a Web Service must also be used in a client page, the ASP.NET AJAX GenerateScriptType attribute can be added to the Web Service.</span></span> <span data-ttu-id="173e3-197">Par exemple, la classe CustomerDetails indiquée dans la liste 9 contient les propriétés d’adresse et le sexe qui ***représentent des types complexes imbriqués.***</span><span class="sxs-lookup"><span data-stu-id="173e3-197">For example, the CustomerDetails class shown in Listing 9 contains Address and Gender properties which ***represent nested complex types.***</span></span>

**<span data-ttu-id="173e3-198">Liste 9.</span><span class="sxs-lookup"><span data-stu-id="173e3-198">Listing 9.</span></span> <span data-ttu-id="173e3-199">La classe CustomerDetails affichée ici contient deux types complexes imbriqués.</span><span class="sxs-lookup"><span data-stu-id="173e3-199">The CustomerDetails class shown here contains two nested complex types.</span></span>**

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample10.cs)]

<span data-ttu-id="173e3-200">Les objets d’adresse et le sexe définis dans la classe CustomerDetails indiquée dans la liste 9 ne sont pas automatiquement rendus disponibles pour une utilisation du côté client à l’aide de JavaScript dans la mesure où ils sont les types imbriqués (adresse est une classe et sexe est une énumération).</span><span class="sxs-lookup"><span data-stu-id="173e3-200">The Address and Gender objects defined within the CustomerDetails class shown in Listing 9 won't automatically be made available for use on the client-side via JavaScript since they are nested types (Address is a class and Gender is an enumeration).</span></span> <span data-ttu-id="173e3-201">Dans les situations où un type imbriqué est utilisé au sein d’un Service Web doit être disponible sur la côté client, l’attribut GenerateScriptType mentionné plus haut peut être utilisé (voir Listing 10).</span><span class="sxs-lookup"><span data-stu-id="173e3-201">In situations where a nested type used within a Web Service must be available on the client-side, the GenerateScriptType attribute mentioned earlier can be used (see Listing 10).</span></span> <span data-ttu-id="173e3-202">Cet attribut peut être ajouté plusieurs fois dans les cas où les différents types complexes imbriqués sont retournées à partir d’un service.</span><span class="sxs-lookup"><span data-stu-id="173e3-202">This attribute can be added multiple times in cases where different nested complex types are returned from a service.</span></span> <span data-ttu-id="173e3-203">Il peut être appliqué directement à la classe de Service Web ou au-dessus de méthodes Web spécifiques.</span><span class="sxs-lookup"><span data-stu-id="173e3-203">It can be applied directly to the Web Service class or above specific Web Methods.</span></span>

**<span data-ttu-id="173e3-204">Liste 10.</span><span class="sxs-lookup"><span data-stu-id="173e3-204">Listing 10.</span></span> <span data-ttu-id="173e3-205">À l’aide de l’attribut GenerateScriptService pour définir les types imbriqués qui doivent être disponibles pour le client.</span><span class="sxs-lookup"><span data-stu-id="173e3-205">Using the GenerateScriptService attribute to define nested types that should be available to the client.</span></span>**

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample11.cs)]

<span data-ttu-id="173e3-206">En appliquant la `GenerateScriptType` attribut pour les types de Service Web, l’adresse et le sexe automatiquement sera disponible pour une utilisation par le code d’ASP.NET AJAX JavaScript côté client.</span><span class="sxs-lookup"><span data-stu-id="173e3-206">By applying the `GenerateScriptType` attribute to the Web Service, the Address and Gender types will automatically be made available for use by client-side ASP.NET AJAX JavaScript code.</span></span> <span data-ttu-id="173e3-207">Liste 11 montre le code JavaScript qui est automatiquement généré et envoyé au client en ajoutant l’attribut GenerateScriptType sur un Service Web.</span><span class="sxs-lookup"><span data-stu-id="173e3-207">An example of the JavaScript that is automatically generated and sent to the client by adding the GenerateScriptType attribute on a Web Service is shown in Listing 11.</span></span> <span data-ttu-id="173e3-208">Vous verrez comment utiliser des types complexes imbriqués plus loin dans l’article.</span><span class="sxs-lookup"><span data-stu-id="173e3-208">You'll see how to use nested complex types later in the article.</span></span>

**<span data-ttu-id="173e3-209">Liste 11.</span><span class="sxs-lookup"><span data-stu-id="173e3-209">Listing 11.</span></span> <span data-ttu-id="173e3-210">Types complexes imbriqués mis à disposition une page ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="173e3-210">Nested complex types made available to an ASP.NET AJAX page.</span></span>**

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample12.cs)]

<span data-ttu-id="173e3-211">Maintenant que vous avez vu comment créer des Services Web et les rendre accessibles aux pages ASP.NET AJAX, examinons comment créer et utiliser les proxys JavaScript afin que les données peuvent être récupérées ou envoyées aux Services Web.</span><span class="sxs-lookup"><span data-stu-id="173e3-211">Now that you've seen how to create Web Services and make them accessible to ASP.NET AJAX pages, let's take a look at how to create and use JavaScript proxies so that data can be retrieved or sent to Web Services.</span></span>

## <a name="creating-javascript-proxies"></a><span data-ttu-id="173e3-212">Création de proxys de JavaScript</span><span class="sxs-lookup"><span data-stu-id="173e3-212">Creating JavaScript Proxies</span></span>

<span data-ttu-id="173e3-213">Appel de Service Web standard (.NET ou une autre plateforme) généralement implique la création d’un objet proxy qui vous protège contre la complexité de l’envoi de messages de demande et de réponse SOAP.</span><span class="sxs-lookup"><span data-stu-id="173e3-213">Calling a standard Web Service (.NET or another platform) typically involves creating a proxy object that shields you from the complexities of sending SOAP request and response messages.</span></span> <span data-ttu-id="173e3-214">Lors des appels de Service Web de ASP.NET AJAX, les proxys JavaScript peuvent être créées et utilisées pour appeler facilement des services sans vous soucier de sérialiser et désérialiser les messages JSON.</span><span class="sxs-lookup"><span data-stu-id="173e3-214">With ASP.NET AJAX Web Service calls, JavaScript proxies can be created and used to easily call services without worrying about serializing and deserializing JSON messages.</span></span> <span data-ttu-id="173e3-215">Les proxys JavaScript peuvent être générées automatiquement en utilisant le contrôle ASP.NET AJAX ScriptManager.</span><span class="sxs-lookup"><span data-stu-id="173e3-215">JavaScript proxies can be automatically generated by using the ASP.NET AJAX ScriptManager control.</span></span>

<span data-ttu-id="173e3-216">Création d’un proxy JavaScript pouvant appeler des Services Web s’effectue à l’aide de la propriété de ScriptManager Services.</span><span class="sxs-lookup"><span data-stu-id="173e3-216">Creating a JavaScript proxy that can call Web Services is accomplished by using the ScriptManager's Services property.</span></span> <span data-ttu-id="173e3-217">Cette propriété vous permet de définir un ou plusieurs services une page ASP.NET AJAX peut appeler de façon asynchrone pour envoyer ou recevoir des données sans nécessiter d’opérations de publication (postback).</span><span class="sxs-lookup"><span data-stu-id="173e3-217">This property allows you to define one or more services that an ASP.NET AJAX page can call asynchronously to send or receive data without requiring postback operations.</span></span> <span data-ttu-id="173e3-218">Vous définissez un service à l’aide d’ASP.NET AJAX `ServiceReference` contrôle et l’affectation de l’URL du Service Web pour le contrôle `Path` propriété.</span><span class="sxs-lookup"><span data-stu-id="173e3-218">You define a service by using the ASP.NET AJAX `ServiceReference` control and assigning the Web Service URL to the control's `Path` property.</span></span> <span data-ttu-id="173e3-219">Liste 12 montre un exemple de référencement d’un service nommé CustomersService.asmx.</span><span class="sxs-lookup"><span data-stu-id="173e3-219">Listing 12 shows an example of referencing a service named CustomersService.asmx.</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-web-services/samples/sample13.aspx)]

**<span data-ttu-id="173e3-220">Liste 12.</span><span class="sxs-lookup"><span data-stu-id="173e3-220">Listing 12.</span></span> <span data-ttu-id="173e3-221">Définition d’un Service Web utilisé dans une page ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="173e3-221">Defining a Web Service used in an ASP.NET AJAX page.</span></span>**

<span data-ttu-id="173e3-222">Ajout d’une référence à la CustomersService.asmx via le contrôle ScriptManager provoque un proxy JavaScript être générés dynamiquement et référencé par la page.</span><span class="sxs-lookup"><span data-stu-id="173e3-222">Adding a reference to the CustomersService.asmx through the ScriptManager control causes a JavaScript proxy to be dynamically generated and referenced by the page.</span></span> <span data-ttu-id="173e3-223">Le proxy est incorporé à l’aide de la &lt;script&gt; balise et chargées dynamiquement en appelant le fichier CustomersService.asmx et en ajoutant/js à la fin de celle-ci.</span><span class="sxs-lookup"><span data-stu-id="173e3-223">The proxy is embedded by using the &lt;script&gt; tag and dynamically loaded by calling the CustomersService.asmx file and appending /js to the end of it.</span></span> <span data-ttu-id="173e3-224">L’exemple suivant montre comment le proxy JavaScript est incorporé dans la page lorsque le débogage est désactivé dans le fichier web.config :</span><span class="sxs-lookup"><span data-stu-id="173e3-224">The following example shows how the JavaScript proxy is embedded in the page when debugging is disabled in web.config:</span></span>

[!code-html[Main](understanding-asp-net-ajax-web-services/samples/sample14.html)]

> *> [!NOTE]
> <span data-ttu-id="173e3-225">Si vous aimeriez voir le code proxy JavaScript qui est généré vous pouvez tapez l’URL de Service Web .NET souhaité dans la zone d’adresse d’Internet Explorer et ajouter/js à la fin de celle-ci.</span><span class="sxs-lookup"><span data-stu-id="173e3-225">If you'd like to see the actual JavaScript proxy code that is generated you can type the URL to the desired .NET Web Service into Internet Explorer's address box and append /js to the end of it.</span></span>*


<span data-ttu-id="173e3-226">Si le débogage est activé dans le fichier web.config qu'une version debug du proxy JavaScript est incorporée dans la page, comme indiqué ci-après :</span><span class="sxs-lookup"><span data-stu-id="173e3-226">If debugging is enabled in web.config a debug version of the JavaScript proxy will be embedded in the page as shown next:</span></span>

[!code-html[Main](understanding-asp-net-ajax-web-services/samples/sample15.html)]

<span data-ttu-id="173e3-227">Le proxy JavaScript créé par ScriptManager peut également être incorporé directement dans la page plutôt que référencées à l’aide du &lt;script&gt; attribut src de la balise.</span><span class="sxs-lookup"><span data-stu-id="173e3-227">The JavaScript proxy created by the ScriptManager can also be embedded directly into the page rather than referenced using the &lt;script&gt; tag's src attribute.</span></span> <span data-ttu-id="173e3-228">Cela est possible en définissant la ServiceReference propriété du contrôle InlineScript sur true (la valeur par défaut est false).</span><span class="sxs-lookup"><span data-stu-id="173e3-228">This can be done by setting the ServiceReference control's InlineScript property to true (the default is false).</span></span> <span data-ttu-id="173e3-229">Cela peut être utile lorsqu’un proxy n’est pas partagé sur plusieurs pages, et lorsque vous souhaitez réduire le nombre d’appels réseau vers le serveur.</span><span class="sxs-lookup"><span data-stu-id="173e3-229">This can be useful when a proxy isn't shared across multiple pages and when you'd like to reduce the number of network calls made to the server.</span></span> <span data-ttu-id="173e3-230">Quand les InlineScript est définie sur true le script de proxy ne sont pas être mis en cache par le navigateur la valeur par défaut False est recommandée dans les cas où le proxy est utilisé par plusieurs pages dans une application ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="173e3-230">When InlineScript is set to true the proxy script won't be cached by the browser so the default value of false is recommended in cases where the proxy is used by multiple pages in an ASP.NET AJAX application.</span></span> <span data-ttu-id="173e3-231">Voici un exemple d’utilisation de la propriété InlineScript suivant :</span><span class="sxs-lookup"><span data-stu-id="173e3-231">An example of using the InlineScript property is shown next:</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-web-services/samples/sample16.aspx)]

## <a name="using-javascript-proxies"></a><span data-ttu-id="173e3-232">À l’aide de proxys JavaScript</span><span class="sxs-lookup"><span data-stu-id="173e3-232">Using JavaScript Proxies</span></span>

<span data-ttu-id="173e3-233">Une fois qu’un Service Web est référencé par une page ASP.NET AJAX à l’aide du contrôle ScriptManager, un appel peut être effectué pour le Service Web et les données renvoyées peuvent être gérées à l’aide des fonctions de rappel.</span><span class="sxs-lookup"><span data-stu-id="173e3-233">Once a Web Service is referenced by an ASP.NET AJAX page using the ScriptManager control, a call can be made to the Web Service and the returned data can be handled using callback functions.</span></span> <span data-ttu-id="173e3-234">Un Service Web est appelé par faisant référence à son espace de noms (le cas échéant), nom de la classe et le nom de la méthode Web.</span><span class="sxs-lookup"><span data-stu-id="173e3-234">A Web Service is called by referencing its namespace (if one exists), class name and Web Method name.</span></span> <span data-ttu-id="173e3-235">Tous les paramètres transmis au Service Web peuvent être définies avec une fonction de rappel qui gère les données retournées.</span><span class="sxs-lookup"><span data-stu-id="173e3-235">Any parameters passed to the Web Service can be defined along with a callback function that handles the returned data.</span></span>

<span data-ttu-id="173e3-236">Un exemple d’utilisation d’un proxy JavaScript pour appeler une méthode Web nommée GetCustomersByCountry() est indiqué dans la liste 13.</span><span class="sxs-lookup"><span data-stu-id="173e3-236">An example of using a JavaScript proxy to call a Web Method named GetCustomersByCountry() is shown in Listing 13.</span></span> <span data-ttu-id="173e3-237">La fonction GetCustomersByCountry() est appelée lorsqu’un utilisateur final clique sur un bouton sur la page.</span><span class="sxs-lookup"><span data-stu-id="173e3-237">The GetCustomersByCountry() function is called when an end user clicks a button on the page.</span></span>

**<span data-ttu-id="173e3-238">Liste 13.</span><span class="sxs-lookup"><span data-stu-id="173e3-238">Listing 13.</span></span> <span data-ttu-id="173e3-239">Appel d’un Service Web avec un proxy JavaScript.</span><span class="sxs-lookup"><span data-stu-id="173e3-239">Calling a Web Service with a JavaScript proxy.</span></span>**

[!code-javascript[Main](understanding-asp-net-ajax-web-services/samples/sample17.js)]

<span data-ttu-id="173e3-240">Cet appel fait référence à l’espace de noms InterfaceTraining, CustomersService classe et méthode de Web GetCustomersByCountry définis dans le service.</span><span class="sxs-lookup"><span data-stu-id="173e3-240">This call references the InterfaceTraining namespace, CustomersService class and GetCustomersByCountry Web Method defined in the service.</span></span> <span data-ttu-id="173e3-241">Il transmet une valeur de pays obtenue à partir d’une zone de texte ainsi que d’une fonction de rappel nommée OnWSRequestComplete qui doit être appelé lors de l’appel de Service Web asynchrone retourne.</span><span class="sxs-lookup"><span data-stu-id="173e3-241">It passes a country value obtained from a textbox as well as a callback function named OnWSRequestComplete that should be invoked when the asynchronous Web Service call returns.</span></span> <span data-ttu-id="173e3-242">OnWSRequestComplete gère le tableau d’objets de client renvoyé par le service et les convertit en une table qui s’affiche dans la page.</span><span class="sxs-lookup"><span data-stu-id="173e3-242">OnWSRequestComplete handles the array of Customer objects returned from the service and converts them into a table that is displayed in the page.</span></span> <span data-ttu-id="173e3-243">La sortie générée à partir de l’appel est illustrée dans la Figure 1.</span><span class="sxs-lookup"><span data-stu-id="173e3-243">The output generated from the call is shown in Figure 1.</span></span>


[![B<span data-ttu-id="173e3-244">iaison données obtenues en effectuant un appel AJAX asynchrone à un Service Web.]</span><span class="sxs-lookup"><span data-stu-id="173e3-244">inding data obtained by making an asynchronous AJAX call to a Web Service.]</span></span>(understanding-asp-net-ajax-web-services/_static/image2.png)](understanding-asp-net-ajax-web-services/_static/image1.png)

<span data-ttu-id="173e3-245">**Figure 1**: Liaison de données obtenues en effectuant un appel AJAX asynchrone à un Service Web.</span><span class="sxs-lookup"><span data-stu-id="173e3-245">**Figure 1**: Binding data obtained by making an asynchronous AJAX call to a Web Service.</span></span>  <span data-ttu-id="173e3-246">([Cliquez pour afficher l’image en taille réelle](understanding-asp-net-ajax-web-services/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="173e3-246">([Click to view full-size image](understanding-asp-net-ajax-web-services/_static/image3.png))</span></span>


<span data-ttu-id="173e3-247">Les proxys JavaScript peuvent également effectuer des appels unidirectionnels aux Services Web dans les cas où une méthode Web doit être appelée, mais le proxy ne doit pas attendre une réponse.</span><span class="sxs-lookup"><span data-stu-id="173e3-247">JavaScript proxies can also make one-way calls to Web Services in cases where a Web Method should be called but the proxy shouldn't wait for a response.</span></span> <span data-ttu-id="173e3-248">Vous souhaiterez par exemple, appeler un Service Web pour démarrer un processus tel qu’un flux de travail, mais pas attendre une valeur de retour à partir du service.</span><span class="sxs-lookup"><span data-stu-id="173e3-248">For example, you may want to call a Web Service to start a process such as a work-flow but not wait for a return value from the service.</span></span> <span data-ttu-id="173e3-249">Dans les cas où un appel à sens unique doit être apportées à un service, la fonction de rappel illustrée à la liste 13 peut simplement être omise.</span><span class="sxs-lookup"><span data-stu-id="173e3-249">In cases where a one-way call needs to be made to a service, the callback function shown in Listing 13 can simply be omitted.</span></span> <span data-ttu-id="173e3-250">Dans la mesure où aucune fonction de rappel n’est défini par l’objet proxy n’attend pas le Service Web retourner des données.</span><span class="sxs-lookup"><span data-stu-id="173e3-250">Since no callback function is defined the proxy object will not wait for the Web Service to return data.</span></span>

## <a name="handling-errors"></a><span data-ttu-id="173e3-251">Gestion des erreurs</span><span class="sxs-lookup"><span data-stu-id="173e3-251">Handling Errors</span></span>

<span data-ttu-id="173e3-252">Les rappels asynchrones aux Services Web peuvent rencontrer des différents types d’erreurs telles que le réseau en cours vers le bas, l’indisponibilité du Service Web ou une exception qui est retourné.</span><span class="sxs-lookup"><span data-stu-id="173e3-252">Asynchronous callbacks to Web Services can encounter different types of errors such as the network being down, the Web Service being unavailable or an exception being returned.</span></span> <span data-ttu-id="173e3-253">Heureusement, les objets de proxy JavaScript générés par le ScriptManager autorisent plusieurs rappels doivent être définies pour gérer les erreurs et échecs en plus de rappel de réussite illustrée précédemment.</span><span class="sxs-lookup"><span data-stu-id="173e3-253">Fortunately, JavaScript proxy objects generated by the ScriptManager allow multiple callbacks to be defined to handle errors and failures in addition to the success callback shown earlier.</span></span> <span data-ttu-id="173e3-254">Une fonction de rappel d’erreur peut être définie immédiatement après la fonction de rappel standard dans l’appel à la méthode Web comme indiqué dans la liste de 14.</span><span class="sxs-lookup"><span data-stu-id="173e3-254">An error callback function can be defined immediately after the standard callback function in the call to the Web Method as shown in Listing 14.</span></span>

**<span data-ttu-id="173e3-255">Liste 14.</span><span class="sxs-lookup"><span data-stu-id="173e3-255">Listing 14.</span></span> <span data-ttu-id="173e3-256">Définition d’une fonction de rappel d’erreur et affichage des erreurs.</span><span class="sxs-lookup"><span data-stu-id="173e3-256">Defining an error callback function and displaying errors.</span></span>**

[!code-javascript[Main](understanding-asp-net-ajax-web-services/samples/sample18.js)]

<span data-ttu-id="173e3-257">Les erreurs qui surviennent lorsque le Service Web est appelé déclenchera la fonction de rappel OnWSRequestFailed() pour être appelé qui accepte un objet représentant l’erreur en tant que paramètre.</span><span class="sxs-lookup"><span data-stu-id="173e3-257">Any errors that occur when the Web Service is called will trigger the OnWSRequestFailed() callback function to be called which accepts an object representing the error as a parameter.</span></span> <span data-ttu-id="173e3-258">L’objet d’erreur expose plusieurs fonctions pour déterminer la cause de l’erreur également ou non l’appel a expiré. Liste 14 montre un exemple de l’utilisation des fonctions d’erreur différent et la Figure 2 montre un exemple de la sortie générée par les fonctions.</span><span class="sxs-lookup"><span data-stu-id="173e3-258">The error object exposes several different functions to determine the cause of the error as well as whether or not the call timed out. Listing 14 shows an example of using the different error functions and Figure 2 shows an example of the output generated by the functions.</span></span>


[![O<span data-ttu-id="173e3-259">Affi généré en appelant des fonctions d’erreur ASP.NET AJAX.]</span><span class="sxs-lookup"><span data-stu-id="173e3-259">utput generated by calling ASP.NET AJAX error functions.]</span></span>(understanding-asp-net-ajax-web-services/_static/image5.png)](understanding-asp-net-ajax-web-services/_static/image4.png)

<span data-ttu-id="173e3-260">**Figure 2**: Sortie générée par l’appel de fonctions d’erreur ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="173e3-260">**Figure 2**: Output generated by calling ASP.NET AJAX error functions.</span></span>  <span data-ttu-id="173e3-261">([Cliquez pour afficher l’image en taille réelle](understanding-asp-net-ajax-web-services/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="173e3-261">([Click to view full-size image](understanding-asp-net-ajax-web-services/_static/image6.png))</span></span>


## <a name="handling-xml-data-returned-from-a-web-service"></a><span data-ttu-id="173e3-262">Gestion des données XML retournées à partir d’un Service Web</span><span class="sxs-lookup"><span data-stu-id="173e3-262">Handling XML Data Returned from a Web Service</span></span>

<span data-ttu-id="173e3-263">Vous avez vu précédemment comment une méthode Web peut retourner des données XML brutes à l’aide de l’attribut ScriptMethod, ainsi que sa propriété ResponseFormat.</span><span class="sxs-lookup"><span data-stu-id="173e3-263">Earlier you saw how a Web Method could return raw XML data by using the ScriptMethod attribute along with its ResponseFormat property.</span></span> <span data-ttu-id="173e3-264">Lorsque ResponseFormat est définie sur ResponseFormat.Xml, les données retournées par le Service Web sont sérialisées XML plutôt que JSON.</span><span class="sxs-lookup"><span data-stu-id="173e3-264">When ResponseFormat is set to ResponseFormat.Xml, data returned from the Web Service is serialized as XML rather than JSON.</span></span> <span data-ttu-id="173e3-265">Cela peut être utile lorsque les données XML doivent être transmis directement au client pour traitement à l’aide de JavaScript ou XSLT.</span><span class="sxs-lookup"><span data-stu-id="173e3-265">This can be useful when XML data needs to be passed directly to the client for processing using JavaScript or XSLT.</span></span> <span data-ttu-id="173e3-266">À l’heure actuelle, Internet Explorer 5 ou version ultérieure fournit le meilleur modèle objet côté client pour l’analyse et le filtrage des données XML en raison de sa prise en charge intégrée pour MSXML.</span><span class="sxs-lookup"><span data-stu-id="173e3-266">At the current time, Internet Explorer 5 or higher provides the best client-side object model for parsing and filtering XML data due to its built-in support for MSXML.</span></span>

<span data-ttu-id="173e3-267">Extraction de données XML à partir d’un Service Web n’est pas différente de la récupération des autres types de données.</span><span class="sxs-lookup"><span data-stu-id="173e3-267">Retrieving XML data from a Web Service is no different than retrieving other data types.</span></span> <span data-ttu-id="173e3-268">Commencez par appeler le proxy JavaScript pour appeler la fonction appropriée et de définir une fonction de rappel.</span><span class="sxs-lookup"><span data-stu-id="173e3-268">Start by invoking the JavaScript proxy to call the appropriate function and define a callback function.</span></span> <span data-ttu-id="173e3-269">Une fois que l’appel retourne vous pouvez ensuite traiter les données dans la fonction de rappel.</span><span class="sxs-lookup"><span data-stu-id="173e3-269">Once the call returns you can then process the data in the callback function.</span></span>

<span data-ttu-id="173e3-270">Liste 15 montre un exemple d’appel d’une méthode Web nommée GetRssFeed() qui retourne un objet XmlElement.</span><span class="sxs-lookup"><span data-stu-id="173e3-270">Listing 15 shows an example of calling a Web Method named GetRssFeed() that returns an XmlElement object.</span></span> <span data-ttu-id="173e3-271">GetRssFeed() accepte un paramètre unique représentant l’URL pour le flux RSS pour récupérer.</span><span class="sxs-lookup"><span data-stu-id="173e3-271">GetRssFeed() accepts a single parameter representing the URL for the RSS feed to retrieve.</span></span>

**<span data-ttu-id="173e3-272">Liste 15.</span><span class="sxs-lookup"><span data-stu-id="173e3-272">Listing 15.</span></span> <span data-ttu-id="173e3-273">Utilisation des données XML retournées à partir d’un Service Web.</span><span class="sxs-lookup"><span data-stu-id="173e3-273">Working with XML data returned from a Web Service.</span></span>**

[!code-html[Main](understanding-asp-net-ajax-web-services/samples/sample19.html)]

<span data-ttu-id="173e3-274">Cet exemple transmet une URL vers un flux RSS et traite les données XML renvoyées dans la fonction OnWSRequestComplete().</span><span class="sxs-lookup"><span data-stu-id="173e3-274">This example passes a URL to an RSS feed and processes the returned XML data in the OnWSRequestComplete() function.</span></span> <span data-ttu-id="173e3-275">OnWSRequestComplete() vérifie d’abord si le navigateur est Internet Explorer de savoir si l’analyseur MSXML est disponible.</span><span class="sxs-lookup"><span data-stu-id="173e3-275">OnWSRequestComplete() first checks to see if the browser is Internet Explorer to know whether or not the MSXML parser is available.</span></span> <span data-ttu-id="173e3-276">Dans le cas, une instruction XPath est utilisée pour localiser tous les &lt;élément&gt; balises dans le flux RSS.</span><span class="sxs-lookup"><span data-stu-id="173e3-276">If it is, an XPath statement is used to locate all &lt;item&gt; tags within the RSS feed.</span></span> <span data-ttu-id="173e3-277">Chaque élément est ensuite parcouru et associé &lt;titre&gt; et &lt;lien&gt; balises sont situés et traitées pour afficher les données de chaque élément.</span><span class="sxs-lookup"><span data-stu-id="173e3-277">Each item is then iterated through and the associated &lt;title&gt; and &lt;link&gt; tags are located and processed to display each item's data.</span></span> <span data-ttu-id="173e3-278">Figure 3 montre un exemple de la sortie générée d’apporter un ASP.NET AJAX à appeler via un proxy JavaScript à la méthode Web GetRssFeed().</span><span class="sxs-lookup"><span data-stu-id="173e3-278">Figure 3 shows an example of the output generated from making an ASP.NET AJAX call through a JavaScript proxy to the GetRssFeed() Web Method.</span></span>

## <a name="handling-complex-types"></a><span data-ttu-id="173e3-279">Gestion des Types complexes</span><span class="sxs-lookup"><span data-stu-id="173e3-279">Handling Complex Types</span></span>

<span data-ttu-id="173e3-280">Les types complexes accepté ou retournées par un Service Web sont automatiquement exposés via un proxy JavaScript.</span><span class="sxs-lookup"><span data-stu-id="173e3-280">Complex types accepted or returned by a Web Service are automatically exposed through a JavaScript proxy.</span></span> <span data-ttu-id="173e3-281">Toutefois, les types complexes imbriqués ne sont pas directement accessibles sur la côté client, sauf si l’attribut GenerateScriptType est appliquée au service, comme indiqué précédemment.</span><span class="sxs-lookup"><span data-stu-id="173e3-281">However, nested complex types are not directly accessible on the client-side unless the GenerateScriptType attribute is applied to the service as discussed earlier.</span></span> <span data-ttu-id="173e3-282">Pourquoi voudriez-vous utiliser un type complexe imbriqué côté client ?</span><span class="sxs-lookup"><span data-stu-id="173e3-282">Why would you want to use a nested complex type on the client-side?</span></span>

<span data-ttu-id="173e3-283">Pour répondre à cette question, supposons qu’une page ASP.NET AJAX affiche les données client et permet aux utilisateurs finaux mettre à jour l’adresse d’un client.</span><span class="sxs-lookup"><span data-stu-id="173e3-283">To answer this question, assume that an ASP.NET AJAX page displays customer data and allows end users to update a customer's address.</span></span> <span data-ttu-id="173e3-284">Si le Service Web spécifie que le type d’adresse (un type complexe défini dans une classe CustomerDetails) peut être envoyé au client, puis le processus de mise à jour peuvent être divisé en séparer les fonctions afin de mieux réutiliser le code.</span><span class="sxs-lookup"><span data-stu-id="173e3-284">If the Web Service specifies that the Address type (a complex type defined within a CustomerDetails class) can be sent to the client then the update process can be divided into separate functions for better code re-use.</span></span>


[![O<span data-ttu-id="173e3-285">Affi création à partir de l’appel d’un Service Web qui retourne des données RSS.]</span><span class="sxs-lookup"><span data-stu-id="173e3-285">utput creating from calling a Web Service that returns RSS data.]</span></span>(understanding-asp-net-ajax-web-services/_static/image8.png)](understanding-asp-net-ajax-web-services/_static/image7.png)

<span data-ttu-id="173e3-286">**Figure 3**: Sortie de création à partir de l’appel d’un Service Web qui retourne des données RSS.</span><span class="sxs-lookup"><span data-stu-id="173e3-286">**Figure 3**: Output creating from calling a Web Service that returns RSS data.</span></span>  <span data-ttu-id="173e3-287">([Cliquez pour afficher l’image en taille réelle](understanding-asp-net-ajax-web-services/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="173e3-287">([Click to view full-size image](understanding-asp-net-ajax-web-services/_static/image9.png))</span></span>


<span data-ttu-id="173e3-288">Liste 16 montre un exemple de code côté client qui appelle un objet d’adresse défini dans un espace de noms de modèle, il remplit avec les données mises à jour et affecte à la propriété d’adresse d’un objet CustomerDetails.</span><span class="sxs-lookup"><span data-stu-id="173e3-288">Listing 16 shows an example of client-side code that invokes an Address object defined in a Model namespace, fills it with updated data and assigns it to a CustomerDetails object's Address property.</span></span> <span data-ttu-id="173e3-289">L’objet CustomerDetails est ensuite passé au Service Web pour le traitement.</span><span class="sxs-lookup"><span data-stu-id="173e3-289">The CustomerDetails object is then passed to the Web Service for processing.</span></span>

**<span data-ttu-id="173e3-290">Liste 16.</span><span class="sxs-lookup"><span data-stu-id="173e3-290">Listing 16.</span></span> <span data-ttu-id="173e3-291">À l’aide de types complexes imbriqués</span><span class="sxs-lookup"><span data-stu-id="173e3-291">Using nested complex types</span></span>**

[!code-javascript[Main](understanding-asp-net-ajax-web-services/samples/sample20.js)]

## <a name="creating-and-using-page-methods"></a><span data-ttu-id="173e3-292">Création et utilisation des méthodes de Page</span><span class="sxs-lookup"><span data-stu-id="173e3-292">Creating and Using Page Methods</span></span>

<span data-ttu-id="173e3-293">Services Web fournissent un excellent moyen d’exposer des services réutilisables à une variété de clients, y compris les pages ASP.NET AJAX.</span><span class="sxs-lookup"><span data-stu-id="173e3-293">Web Services provide an excellent way to expose re-useable services to a variety of clients including ASP.NET AJAX pages.</span></span> <span data-ttu-id="173e3-294">Toutefois, il peut arriver dans lequel une page a besoin pour récupérer des données qui ne jamais être utilisées ou être partagées par d’autres pages.</span><span class="sxs-lookup"><span data-stu-id="173e3-294">However, there may be cases where a page needs to retrieve data that won't ever be used or shared by other pages.</span></span> <span data-ttu-id="173e3-295">Dans ce cas, rendre un fichier .asmx pour permettre la page pour accéder aux données peut sembler excessifs, car le service est uniquement utilisé par une seule page.</span><span class="sxs-lookup"><span data-stu-id="173e3-295">In this case, making an .asmx file to allow the page to access the data may seem like overkill since the service is only used by a single page.</span></span>

<span data-ttu-id="173e3-296">ASP.NET AJAX fournit un autre mécanisme pour effectuer des appels de Service de type Web sans créer les fichiers .asmx autonome.</span><span class="sxs-lookup"><span data-stu-id="173e3-296">ASP.NET AJAX provides another mechanism for making Web Service-like calls without creating standalone .asmx files.</span></span> <span data-ttu-id="173e3-297">Cela permet à l’aide d’une technique appelée « méthodes de page ».</span><span class="sxs-lookup"><span data-stu-id="173e3-297">This is done by using a technique referred to as "page methods".</span></span> <span data-ttu-id="173e3-298">Méthodes de page sont des méthodes statiques (partagées dans VB.NET) intégrées directement dans un fichier de page ou code-beside qui ont l’attribut WebMethod est appliqué pour les.</span><span class="sxs-lookup"><span data-stu-id="173e3-298">Page methods are static (shared in VB.NET) methods embedded directly in a page or code-beside file that have the WebMethod attribute applied to them.</span></span> <span data-ttu-id="173e3-299">En appliquant l’attribut WebMethod, elles peuvent être appelées à l’aide d’un objet JavaScript spécial nommé PageMethods qui est créée dynamiquement lors de l’exécution.</span><span class="sxs-lookup"><span data-stu-id="173e3-299">By applying the WebMethod attribute they can be called using a special JavaScript object named PageMethods that gets dynamically created at runtime.</span></span> <span data-ttu-id="173e3-300">L’objet PageMethods agit comme un proxy qui vous protège le processus de sérialisation/désérialisation JSON.</span><span class="sxs-lookup"><span data-stu-id="173e3-300">The PageMethods object acts as a proxy that shields you from the JSON serialization/deserialization process.</span></span> <span data-ttu-id="173e3-301">Notez que pour pouvoir utiliser l’objet PageMethods vous devez définir la propriété EnablePageMethods de ScriptManager sur true.</span><span class="sxs-lookup"><span data-stu-id="173e3-301">Note that in order to use the PageMethods object you must set the ScriptManager's EnablePageMethods property to true.</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-web-services/samples/sample21.aspx)]

<span data-ttu-id="173e3-302">Liste 17 montre un exemple de définition des deux méthodes de page dans une classe code-beside ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="173e3-302">Listing 17 shows an example of defining two page methods in an ASP.NET code-beside class.</span></span> <span data-ttu-id="173e3-303">Ces méthodes récupèrent des données à partir d’une classe de couche métier située dans l’application\_dossier de Code du site Web.</span><span class="sxs-lookup"><span data-stu-id="173e3-303">These methods retrieve data from a business layer class located in the App\_Code folder of the Website.</span></span>

**<span data-ttu-id="173e3-304">Liste 17.</span><span class="sxs-lookup"><span data-stu-id="173e3-304">Listing 17.</span></span> <span data-ttu-id="173e3-305">Définition des méthodes de page.</span><span class="sxs-lookup"><span data-stu-id="173e3-305">Defining page methods.</span></span>**

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample22.cs)]

<span data-ttu-id="173e3-306">Lorsque ScriptManager détecte la présence des méthodes Web dans la page, il génère une référence dynamique à l’objet PageMethods mentionné précédemment.</span><span class="sxs-lookup"><span data-stu-id="173e3-306">When ScriptManager detects the presence of Web Methods in the page it generates a dynamic reference to the PageMethods object mentioned earlier.</span></span> <span data-ttu-id="173e3-307">Appel d’une méthode Web s’effectue en faisant référence à la classe PageMethods suivie du nom de la méthode et toutes les données de paramètre requis qui doivent être passées.</span><span class="sxs-lookup"><span data-stu-id="173e3-307">Calling a Web Method is accomplished by referencing the PageMethods class followed by the name of the method and any necessary parameter data that should be passed.</span></span> <span data-ttu-id="173e3-308">Liste 18 présente des exemples d’appeler les deux méthodes de page indiquées précédemment.</span><span class="sxs-lookup"><span data-stu-id="173e3-308">Listing 18 shows examples of calling the two page methods shown earlier.</span></span>

**<span data-ttu-id="173e3-309">Liste 18.</span><span class="sxs-lookup"><span data-stu-id="173e3-309">Listing 18.</span></span> <span data-ttu-id="173e3-310">Appel de méthodes de page avec l’objet PageMethods JavaScript.</span><span class="sxs-lookup"><span data-stu-id="173e3-310">Calling page methods with the PageMethods JavaScript object.</span></span>**

[!code-javascript[Main](understanding-asp-net-ajax-web-services/samples/sample23.js)]

<span data-ttu-id="173e3-311">À l’aide de l’objet PageMethods est très similaire à l’aide d’un objet proxy JavaScript.</span><span class="sxs-lookup"><span data-stu-id="173e3-311">Using the PageMethods object is very similar to using a JavaScript proxy object.</span></span> <span data-ttu-id="173e3-312">Vous spécifiez d’abord toutes les données de paramètre qui doivent être passées à la méthode de page, puis définissent la fonction de rappel qui doit être appelée lorsque l’appel asynchrone est retournée.</span><span class="sxs-lookup"><span data-stu-id="173e3-312">You first specify all of the parameter data that should be passed to the page method and then define the callback function that should be called when the asynchronous call returns.</span></span> <span data-ttu-id="173e3-313">Un rappel d’échec peut également être spécifié (consultez répertoriant les 14 pour obtenir un exemple de gérer les défaillances).</span><span class="sxs-lookup"><span data-stu-id="173e3-313">A failure callback can also be specified (refer to Listing 14 for an example of handling failures).</span></span>

## <a name="the-autocompleteextender-and-the-aspnet-ajax-toolkit"></a><span data-ttu-id="173e3-314">Le AutoCompleteExtender et le Kit de ressources ASP.NET AJAX</span><span class="sxs-lookup"><span data-stu-id="173e3-314">The AutoCompleteExtender and the ASP.NET AJAX Toolkit</span></span>

<span data-ttu-id="173e3-315">Le Kit de ressources ASP.NET AJAX (disponible à partir de [ http://ajax.asp.net ](http://ajax.asp.net)) offre plusieurs contrôles qui peuvent être utilisées pour accéder aux Services Web.</span><span class="sxs-lookup"><span data-stu-id="173e3-315">The ASP.NET AJAX Toolkit (available from [http://ajax.asp.net](http://ajax.asp.net)) offers several controls that can be used to access Web Services.</span></span> <span data-ttu-id="173e3-316">Plus précisément, le Kit de ressources contienne un contrôle utile nommé `AutoCompleteExtender` qui peut être utilisé pour appeler des Services Web et afficher les données dans les pages sans écrire de code JavaScript du tout.</span><span class="sxs-lookup"><span data-stu-id="173e3-316">Specifically, the toolkit contains a useful control named `AutoCompleteExtender` that can be used to call Web Services and show data in pages without writing any JavaScript code at all.</span></span>

<span data-ttu-id="173e3-317">Le contrôle de AutoCompleteExtender peut être utilisé pour étendre les fonctionnalités existantes d’une zone de texte et aident les utilisateurs à localiser facilement les données recherchées.</span><span class="sxs-lookup"><span data-stu-id="173e3-317">The AutoCompleteExtender control can be used to extend existing functionality of a textbox and help users more easily locate data they're looking for.</span></span> <span data-ttu-id="173e3-318">Frappe dans une zone de texte le contrôle peut être utilisé pour interroger un Service Web et affiche les résultats sous la zone de texte dynamiquement.</span><span class="sxs-lookup"><span data-stu-id="173e3-318">As they type into a textbox the control can be used to query a Web Service and shows results below the textbox dynamically.</span></span> <span data-ttu-id="173e3-319">Figure 4 montre un exemple d’utilisation du contrôle AutoCompleteExtender pour afficher les ID de client pour une application de prise en charge.</span><span class="sxs-lookup"><span data-stu-id="173e3-319">Figure 4 shows an example of using the AutoCompleteExtender control to display customer ids for a support application.</span></span> <span data-ttu-id="173e3-320">Comme l’utilisateur tape des caractères différents dans la zone de texte, différents éléments seront affichées ci-dessous en fonction de leur entrée.</span><span class="sxs-lookup"><span data-stu-id="173e3-320">As the user types different characters into the textbox, different items will be shown below it based upon their input.</span></span> <span data-ttu-id="173e3-321">Les utilisateurs peuvent sélectionner ensuite l’id de client souhaité.</span><span class="sxs-lookup"><span data-stu-id="173e3-321">Users can then select the desired customer id.</span></span>

<span data-ttu-id="173e3-322">À l’aide de la AutoCompleteExtender au sein d’une page ASP.NET AJAX requiert que l’assembly AjaxControlToolkit.dll ajouté au dossier bin du site Web.</span><span class="sxs-lookup"><span data-stu-id="173e3-322">Using the AutoCompleteExtender within an ASP.NET AJAX page requires that the AjaxControlToolkit.dll assembly be added to the Website's bin folder.</span></span> <span data-ttu-id="173e3-323">Une fois que l’assembly du Kit de ressources a été ajoutée, vous souhaitez référencer dans le fichier web.config afin que les contrôles qu’il contient sont disponibles pour toutes les pages dans une application.</span><span class="sxs-lookup"><span data-stu-id="173e3-323">Once the toolkit assembly has been added, you'll want to reference it in web.config so that the controls it contains are available to all pages in an application.</span></span> <span data-ttu-id="173e3-324">Cela est possible en ajoutant la balise suivante au sein de web.config &lt;contrôles&gt; balise :</span><span class="sxs-lookup"><span data-stu-id="173e3-324">This can be done by adding the following tag within web.config's &lt;controls&gt; tag:</span></span>

[!code-xml[Main](understanding-asp-net-ajax-web-services/samples/sample24.xml)]

<span data-ttu-id="173e3-325">Dans les cas où vous devez uniquement utiliser le contrôle dans une page spécifique, vous pouvez le référencer en ajoutant la directive de référence vers le haut d’une page, comme indiqué ci-après au lieu de la mise à jour de web.config :</span><span class="sxs-lookup"><span data-stu-id="173e3-325">In cases where you only need to use the control in a specific page you can reference it by adding the Reference directive to the top of a page as shown next rather than updating web.config:</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-web-services/samples/sample25.aspx)]


[![U<span data-ttu-id="173e3-326">à l’aide du contrôle AutoCompleteExtender.]</span><span class="sxs-lookup"><span data-stu-id="173e3-326">sing the AutoCompleteExtender control.]</span></span>(understanding-asp-net-ajax-web-services/_static/image11.png)](understanding-asp-net-ajax-web-services/_static/image10.png)

<span data-ttu-id="173e3-327">**Figure 4**: Utilisation du contrôle AutoCompleteExtender.</span><span class="sxs-lookup"><span data-stu-id="173e3-327">**Figure 4**: Using the AutoCompleteExtender control.</span></span>  <span data-ttu-id="173e3-328">([Cliquez pour afficher l’image en taille réelle](understanding-asp-net-ajax-web-services/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="173e3-328">([Click to view full-size image](understanding-asp-net-ajax-web-services/_static/image12.png))</span></span>


<span data-ttu-id="173e3-329">Une fois que le site Web a été configuré pour utiliser le Kit de ressources ASP.NET AJAX, un contrôle AutoCompleteExtender peut être ajouté dans la page bien comme vous ajouteriez un contrôle de serveur ASP.NET normal.</span><span class="sxs-lookup"><span data-stu-id="173e3-329">Once the Website has been configured to use the ASP.NET AJAX Toolkit, an AutoCompleteExtender control can be added into the page much like you'd add a regular ASP.NET server control.</span></span> <span data-ttu-id="173e3-330">Liste 19 montre un exemple d’utilisation du contrôle pour appeler un Service Web.</span><span class="sxs-lookup"><span data-stu-id="173e3-330">Listing 19 shows an example of using the control to call a Web Service.</span></span>

**<span data-ttu-id="173e3-331">Liste 19.</span><span class="sxs-lookup"><span data-stu-id="173e3-331">Listing 19.</span></span> <span data-ttu-id="173e3-332">Utilisation du contrôle ASP.NET AJAX Toolkit AutoCompleteExtender.</span><span class="sxs-lookup"><span data-stu-id="173e3-332">Using the ASP.NET AJAX Toolkit AutoCompleteExtender control.</span></span>**

[!code-aspx[Main](understanding-asp-net-ajax-web-services/samples/sample26.aspx)]

<span data-ttu-id="173e3-333">Le AutoCompleteExtender a plusieurs propriétés différentes, y compris les propriétés ID et runat standard trouvées sur les contrôles serveur.</span><span class="sxs-lookup"><span data-stu-id="173e3-333">The AutoCompleteExtender has several different properties including the standard ID and runat properties found on server controls.</span></span> <span data-ttu-id="173e3-334">Outre ces éléments, il vous permet de définir le nombre de caractères un type d’utilisateur final avant que le Service Web est interrogée pour les données.</span><span class="sxs-lookup"><span data-stu-id="173e3-334">In addition to these, it allows you to define how many characters an end user types before the Web Service is queried for data.</span></span> <span data-ttu-id="173e3-335">La propriété MinimumPrefixLength illustrée à la liste de 19, le service à être appelée chaque fois qu’un caractère est tapé dans la zone de texte.</span><span class="sxs-lookup"><span data-stu-id="173e3-335">The MinimumPrefixLength property shown in Listing 19 causes the service to be called each time a character is typed into the textbox.</span></span> <span data-ttu-id="173e3-336">Vous souhaiterez être prudent de définition de cette valeur dans la mesure où chaque fois que l’utilisateur tape un caractère, le Service Web sera appelé pour rechercher des valeurs qui correspondent aux caractères dans la zone de texte.</span><span class="sxs-lookup"><span data-stu-id="173e3-336">You'll want to be careful setting this value since each time the user types a character the Web Service will be called to search for values that match the characters in the textbox.</span></span> <span data-ttu-id="173e3-337">Le Service Web à appeler, ainsi que la méthode Web cible est définie à l’aide des propriétés ServicePath et ServiceMethod respectivement.</span><span class="sxs-lookup"><span data-stu-id="173e3-337">The Web Service to call as well as the target Web Method are defined using the ServicePath and ServiceMethod properties respectively.</span></span> <span data-ttu-id="173e3-338">Enfin, la propriété TargetControlID identifie quelle zone de texte pour raccorder le contrôle AutoCompleteExtender.</span><span class="sxs-lookup"><span data-stu-id="173e3-338">Finally, the TargetControlID property identifies which textbox to hook the AutoCompleteExtender control to.</span></span>

<span data-ttu-id="173e3-339">Le Service Web appelé doit avoir l’attribut ScriptService appliquée comme indiqué précédemment, et la cible de méthode Web doit accepter deux paramètres nommés prefixText et nombre.</span><span class="sxs-lookup"><span data-stu-id="173e3-339">The Web Service being called must have the ScriptService attribute applied as discussed earlier and the target Web Method must accept two parameters named prefixText and count.</span></span> <span data-ttu-id="173e3-340">Le paramètre prefixText représente les caractères tapés par l’utilisateur final et le paramètre count représente le nombre d’éléments à renvoyer (la valeur par défaut est 10).</span><span class="sxs-lookup"><span data-stu-id="173e3-340">The prefixText parameter represents the characters typed by the end user and the count parameter represents how many items to return (the default is 10).</span></span> <span data-ttu-id="173e3-341">Liste des 20 montre un exemple de la méthode Web GetCustomerIDs appelé par le contrôle AutoCompleteExtender indiqué plus haut dans la liste de 19.</span><span class="sxs-lookup"><span data-stu-id="173e3-341">Listing 20 shows an example of the GetCustomerIDs Web Method called by the AutoCompleteExtender control shown earlier in Listing 19.</span></span> <span data-ttu-id="173e3-342">La méthode Web appelle une méthode de couche métier qu’à son tour appelle une de la couche données méthode qui gère le filtrage des données et en retournant les résultats de correspondance.</span><span class="sxs-lookup"><span data-stu-id="173e3-342">The Web Method calls a business layer method that in turn calls a data layer method that handles filtering the data and returning the matching results.</span></span> <span data-ttu-id="173e3-343">Le code pour la méthode de la couche données est illustré à la liste de 21.</span><span class="sxs-lookup"><span data-stu-id="173e3-343">The code for the data layer method is shown in Listing 21.</span></span>

**<span data-ttu-id="173e3-344">Liste de 20.</span><span class="sxs-lookup"><span data-stu-id="173e3-344">Listing 20.</span></span> <span data-ttu-id="173e3-345">Filtrage des données envoyées à partir du contrôle AutoCompleteExtender.</span><span class="sxs-lookup"><span data-stu-id="173e3-345">Filtering data sent from the AutoCompleteExtender control.</span></span>**

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample27.cs)]

**<span data-ttu-id="173e3-346">Liste 21.</span><span class="sxs-lookup"><span data-stu-id="173e3-346">Listing 21.</span></span> <span data-ttu-id="173e3-347">Filtrage des résultats en fonction des entrées de l’utilisateur final.</span><span class="sxs-lookup"><span data-stu-id="173e3-347">Filtering results based upon end user input.</span></span>**

[!code-csharp[Main](understanding-asp-net-ajax-web-services/samples/sample28.cs)]

## <a name="conclusion"></a><span data-ttu-id="173e3-348">Conclusion</span><span class="sxs-lookup"><span data-stu-id="173e3-348">Conclusion</span></span>

<span data-ttu-id="173e3-349">ASP.NET AJAX fournit une excellente prise en charge pour l’appel des Services Web sans écrire beaucoup de code JavaScript personnalisé pour gérer les messages de demande et de réponse.</span><span class="sxs-lookup"><span data-stu-id="173e3-349">ASP.NET AJAX provides excellent support for calling Web Services without writing a lot of custom JavaScript code to handle the request and response messages.</span></span> <span data-ttu-id="173e3-350">Dans cet article, vous avez vu comment les Services Web compatible AJAX .NET pour leur permettre de traiter des messages JSON et comment définir les proxys JavaScript en utilisant le contrôle ScriptManager.</span><span class="sxs-lookup"><span data-stu-id="173e3-350">In this article you've seen how to AJAX-enable .NET Web Services to enable them to process JSON messages and how to define JavaScript proxies using the ScriptManager control.</span></span> <span data-ttu-id="173e3-351">Vous avez également vu comment JavaScript proxys peuvent être utilisées pour appeler des Services Web, gérer des types simples et complexes et gérer les échecs.</span><span class="sxs-lookup"><span data-stu-id="173e3-351">You've also seen how JavaScript proxies can be used to call Web Services, handle simple and complex types and deal with failures.</span></span> <span data-ttu-id="173e3-352">Enfin, vous avez vu comment les méthodes de page peuvent être utilisées pour simplifier le processus de création et d’effectuer des appels de Service Web et comment le contrôle AutoCompleteExtender peut permettre aux utilisateurs finaux frappe.</span><span class="sxs-lookup"><span data-stu-id="173e3-352">Finally, you've seen how page methods can be used to simplify the process of creating and making Web Service calls and how the AutoCompleteExtender control can provide help to end users as they type.</span></span> <span data-ttu-id="173e3-353">Bien que le contrôle UpdatePanel disponible dans ASP.NET AJAX sera certainement le contrôle de choix pour nombreux programmeurs AJAX en raison de sa simplicité, en sachant comment appeler des Services Web par proxy JavaScript peut être utile dans de nombreuses applications.</span><span class="sxs-lookup"><span data-stu-id="173e3-353">Although the UpdatePanel available in ASP.NET AJAX will certainly be the control of choice for many AJAX programmers due to its simplicity, knowing how to call Web Services through JavaScript proxies can be useful in many applications.</span></span>

## <a name="bio"></a><span data-ttu-id="173e3-354">Bio</span><span class="sxs-lookup"><span data-stu-id="173e3-354">Bio</span></span>

<span data-ttu-id="173e3-355">Dan Wahlin (Microsoft Most Valuable Professional pour ASP.NET et des Services Web XML) est développement instructor et architecture consultant .NET à la formation technique d’Interface ([http://www.interfacett.com](http://www.interfacett.com)).</span><span class="sxs-lookup"><span data-stu-id="173e3-355">Dan Wahlin (Microsoft Most Valuable Professional for ASP.NET and XML Web Services) is a .NET development instructor and architecture consultant at Interface Technical Training ([http://www.interfacett.com](http://www.interfacett.com)).</span></span> <span data-ttu-id="173e3-356">Dan fondé le code XML pour le site Web des développeurs ASP.NET ([www.XMLforASP.NET](http://www.XMLforASP.NET)), se trouve sur le Bureau de l’INETA et participe à des conférences plusieurs.</span><span class="sxs-lookup"><span data-stu-id="173e3-356">Dan founded the XML for ASP.NET Developers Web site ([www.XMLforASP.NET](http://www.XMLforASP.NET)), is on the INETA Speaker's Bureau and speaks at several conferences.</span></span> <span data-ttu-id="173e3-357">Dan co-écrit Professional Windows DNA (Wrox), ASP.NET : Conseils, didacticiels et Code (SAM), ASP.NET 1.1 Insider Solutions, Professional ASP.NET 2.0 AJAX (Wrox), ASP.NET 2.0 MVP Hacks et créés par XML pour les développeurs ASP.NET (SAM).</span><span class="sxs-lookup"><span data-stu-id="173e3-357">Dan co-authored Professional Windows DNA (Wrox), ASP.NET: Tips, Tutorials and Code (Sams), ASP.NET 1.1 Insider Solutions, Professional ASP.NET 2.0 AJAX (Wrox), ASP.NET 2.0 MVP Hacks and authored XML for ASP.NET Developers (Sams).</span></span> <span data-ttu-id="173e3-358">Lorsqu’il n’écrit pas de code, des articles ou des livres, Dan bénéficie d’écriture et d’enregistrement de musique et de lecture de golf et basket-ball avec sa femme et les enfants.</span><span class="sxs-lookup"><span data-stu-id="173e3-358">When he's not writing code, articles or books, Dan enjoys writing and recording music and playing golf and basketball with his wife and kids.</span></span>

<span data-ttu-id="173e3-359">Scott Cate travaille avec les technologies Web Microsoft depuis 1997 et est le président de myKB.com ([www.myKB.com](http://www.myKB.com)) où il est spécialisé dans l’écriture d’ASP.NET en fonction des applications axées sur les solutions logicielles de la Base de connaissances.</span><span class="sxs-lookup"><span data-stu-id="173e3-359">Scott Cate has been working with Microsoft Web technologies since 1997 and is the President of myKB.com ([www.myKB.com](http://www.myKB.com)) where he specializes in writing ASP.NET based applications focused on Knowledge Base Software solutions.</span></span> <span data-ttu-id="173e3-360">Scott peut être contacté par courrier électronique en [ scott.cate@myKB.com ](mailto:scott.cate@myKB.com) ou son blog à l’adresse [ScottCate.com](http://ScottCate.com)</span><span class="sxs-lookup"><span data-stu-id="173e3-360">Scott can be contacted via email at [scott.cate@myKB.com](mailto:scott.cate@myKB.com) or his blog at [ScottCate.com](http://ScottCate.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="173e3-361">[Précédent](understanding-asp-net-ajax-localization.md)
> [Suivant](understanding-asp-net-ajax-debugging-capabilities.md)</span><span class="sxs-lookup"><span data-stu-id="173e3-361">[Previous](understanding-asp-net-ajax-localization.md)
[Next](understanding-asp-net-ajax-debugging-capabilities.md)</span></span>

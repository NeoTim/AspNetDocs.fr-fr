---
uid: web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers
title: Fonctionnement des déclencheurs UpdatePanel ASP.NET AJAX | Microsoft Docs
author: scottcate
description: Lorsque vous travaillez dans l’éditeur de balises dans Visual Studio, vous pouvez remarquer (à partir d’IntelliSense) qu’il y a deux éléments enfants d’un contrôle UpdatePanel. L’une des Wh...
ms.author: riande
ms.date: 03/12/2008
ms.assetid: faab8503-2984-48a9-8a40-7728461abc50
msc.legacyurl: /web-forms/overview/older-versions-getting-started/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers
msc.type: authoredcontent
ms.openlocfilehash: b1cc869f373d4f8283b4d92af74707c3f11fef61
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78547452"
---
# <a name="understanding-aspnet-ajax-updatepanel-triggers"></a><span data-ttu-id="a8905-104">Présentation des déclencheurs UpdatePanel d’ASP.NET AJAX</span><span class="sxs-lookup"><span data-stu-id="a8905-104">Understanding ASP.NET AJAX UpdatePanel Triggers</span></span>

<span data-ttu-id="a8905-105">par [Scott Cate](https://github.com/scottcate)</span><span class="sxs-lookup"><span data-stu-id="a8905-105">by [Scott Cate](https://github.com/scottcate)</span></span>

[<span data-ttu-id="a8905-106">Télécharger PDF</span><span class="sxs-lookup"><span data-stu-id="a8905-106">Download PDF</span></span>](https://download.microsoft.com/download/C/1/9/C19A3451-1D14-477C-B703-54EF22E197EE/AJAX_tutorial02_Triggers_cs.pdf)

> <span data-ttu-id="a8905-107">Lorsque vous travaillez dans l’éditeur de balises dans Visual Studio, vous pouvez remarquer (à partir d’IntelliSense) qu’il y a deux éléments enfants d’un contrôle UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="a8905-107">When working in the markup editor in Visual Studio, you may notice (from IntelliSense) that there are two child elements of an UpdatePanel control.</span></span> <span data-ttu-id="a8905-108">L’un d’eux est l’élément déclencheurs, qui spécifie les contrôles sur la page (ou le contrôle utilisateur, si vous en utilisez un) qui déclenchera un rendu partiel du contrôle UpdatePanel dans lequel réside l’élément.</span><span class="sxs-lookup"><span data-stu-id="a8905-108">One of which is the Triggers element, which specifies the controls on the page (or the user control, if you are using one) that will trigger a partial render of the UpdatePanel control in which the element resides.</span></span>

## <a name="introduction"></a><span data-ttu-id="a8905-109">Introduction</span><span class="sxs-lookup"><span data-stu-id="a8905-109">Introduction</span></span>

<span data-ttu-id="a8905-110">La technologie ASP.NET de Microsoft propose un modèle de programmation orienté objet et piloté par les événements, et l’intègre aux avantages du code compilé.</span><span class="sxs-lookup"><span data-stu-id="a8905-110">Microsoft's ASP.NET technology brings an object-oriented and event-driven programming model and unites it with the benefits of compiled code.</span></span> <span data-ttu-id="a8905-111">Toutefois, son modèle de traitement côté serveur présente plusieurs inconvénients inhérents à la technologie, dont la plupart peuvent être traités par les nouvelles fonctionnalités incluses dans les extensions Microsoft ASP.NET 3,5 AJAX.</span><span class="sxs-lookup"><span data-stu-id="a8905-111">However, its server-side processing model has several drawbacks inherent in the technology, many of which can be addressed by the new features included in the Microsoft ASP.NET 3.5 AJAX Extensions.</span></span> <span data-ttu-id="a8905-112">Ces extensions permettent de nombreuses nouvelles fonctionnalités clientes riches, y compris le rendu partiel des pages sans nécessiter une actualisation complète de la page, la possibilité d’accéder aux services Web via le script client (y compris l’API de profilage ASP.NET) et une API côté client étendue. conçu pour mettre en miroir un grand nombre des schémas de contrôle vus dans le jeu de contrôles côté serveur ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="a8905-112">These extensions enable many new rich client features, including partial rendering of pages without requiring a full page refresh, the ability to access Web Services via client script (including the ASP.NET profiling API), and an extensive client-side API designed to mirror many of the control schemes seen in the ASP.NET server-side control set.</span></span>

<span data-ttu-id="a8905-113">Ce livre blanc examine les fonctionnalités des déclencheurs XML du composant `UpdatePanel` AJAX ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="a8905-113">This whitepaper examines the XML Triggers functionality of the ASP.NET AJAX `UpdatePanel` component.</span></span> <span data-ttu-id="a8905-114">Les déclencheurs XML donnent un contrôle granulaire sur les composants qui peuvent provoquer un rendu partiel pour des contrôles UpdatePanel spécifiques.</span><span class="sxs-lookup"><span data-stu-id="a8905-114">XML Triggers give granular control over the components that can cause partial rendering for specific UpdatePanel controls.</span></span>

<span data-ttu-id="a8905-115">Ce livre blanc est basé sur la version bêta 2 de la .NET Framework 3,5 et de Visual Studio 2008.</span><span class="sxs-lookup"><span data-stu-id="a8905-115">This whitepaper is based on the Beta 2 release of the .NET Framework 3.5 and Visual Studio 2008.</span></span> <span data-ttu-id="a8905-116">Les extensions ASP.NET AJAX, précédemment un assembly complémentaire ciblé à ASP.NET 2,0, sont désormais intégrées dans la bibliothèque de classes de base .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="a8905-116">The ASP.NET AJAX Extensions, previously an add-on assembly targeted at ASP.NET 2.0, are now integrated into the .NET Framework Base Class Library.</span></span> <span data-ttu-id="a8905-117">Ce livre blanc suppose également que vous travaillez avec Visual Studio 2008, et non Visual Web Developer Express, et vous fournira des procédures pas à pas en fonction de l’interface utilisateur de Visual Studio (bien que les listes de code soient entièrement compatibles, quelle que soit la environnement de développement).</span><span class="sxs-lookup"><span data-stu-id="a8905-117">This whitepaper also assumes that you will be working with Visual Studio 2008, not Visual Web Developer Express, and will provide walkthroughs according to the user interface of Visual Studio (although code listings will be entirely compatible regardless of development environment).</span></span>

## <a name="triggers"></a><span data-ttu-id="a8905-118">*Déclencheurs*</span><span class="sxs-lookup"><span data-stu-id="a8905-118">*Triggers*</span></span>

<span data-ttu-id="a8905-119">Les déclencheurs pour un UpdatePanel donné, par défaut, incluent automatiquement tous les contrôles enfants qui appellent une publication, y compris les contrôles TextBox (par exemple) dont la propriété `AutoPostBack` a la valeur **true**.</span><span class="sxs-lookup"><span data-stu-id="a8905-119">Triggers for a given UpdatePanel, by default, automatically include any child controls that invoke a postback, including (for example) TextBox controls that have their `AutoPostBack` property set to **true**.</span></span> <span data-ttu-id="a8905-120">Toutefois, les déclencheurs peuvent également être inclus de manière déclarative à l’aide du balisage. Cette opération s’effectue dans la section `<triggers>` de la déclaration de contrôle UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="a8905-120">However, triggers can also be included declaratively using markup; this is done within the `<triggers>` section of the UpdatePanel control declaration.</span></span> <span data-ttu-id="a8905-121">Bien que les déclencheurs soient accessibles via la propriété de collection `Triggers`, il est recommandé d’inscrire tous les déclencheurs de rendu partiels au moment de l’exécution (par exemple, si un contrôle n’est pas disponible au moment de la conception) à l’aide de la méthode `RegisterAsyncPostBackControl(Control)` de l’objet ScriptManager de votre page, dans l’événement `Page_Load`.</span><span class="sxs-lookup"><span data-stu-id="a8905-121">Although triggers can be accessed via the `Triggers` collection property, it is recommended that you register any partial render triggers at run-time (for instance, if a control is not available at design time) by using the `RegisterAsyncPostBackControl(Control)` method of the ScriptManager object for your page, within the `Page_Load` event.</span></span> <span data-ttu-id="a8905-122">N’oubliez pas que les pages sont sans État et que vous devez donc réinscrire ces contrôles à chaque fois qu’ils sont créés.</span><span class="sxs-lookup"><span data-stu-id="a8905-122">Remember that Pages are stateless, and so you should re-register these controls every time they are created.</span></span>

<span data-ttu-id="a8905-123">L’inclusion automatique d’un déclencheur enfant peut également être désactivée (afin que les contrôles enfants qui créent des publications ne déclenchent pas automatiquement des rendus partiels) en affectant à la propriété `ChildrenAsTriggers` la **valeur false**.</span><span class="sxs-lookup"><span data-stu-id="a8905-123">Automatic child trigger inclusion can also be disabled (so that child controls that create postbacks do not automatically trigger partial renders) by setting the `ChildrenAsTriggers` property to **false**.</span></span> <span data-ttu-id="a8905-124">Cela vous permet de bénéficier de la plus grande flexibilité pour attribuer les contrôles spécifiques susceptibles d’appeler un rendu de page et est recommandé, afin qu’un développeur s’abonne pour répondre à un événement, plutôt que de gérer les événements susceptibles de se produire.</span><span class="sxs-lookup"><span data-stu-id="a8905-124">This allows you the greatest flexibility in assigning which specific controls may invoke a page render, and is recommended, so that a developer will opt-in to respond to an event, rather than handling any events that may arise.</span></span>

<span data-ttu-id="a8905-125">Notez que lorsque les contrôles UpdatePanel sont imbriqués, lorsque UpdateMode a la valeur **Conditional**, si l’UpdatePanel enfant est déclenché, alors que le parent n’est pas, seul le UpdatePanel enfant est actualisé.</span><span class="sxs-lookup"><span data-stu-id="a8905-125">Note that when UpdatePanel controls are nested, when the UpdateMode is set to **Conditional**, if the child UpdatePanel is triggered, but the parent is not, then only the child UpdatePanel will refresh.</span></span> <span data-ttu-id="a8905-126">Toutefois, si le UpdatePanel parent est actualisé, alors l’UpdatePanel enfant est également actualisé.</span><span class="sxs-lookup"><span data-stu-id="a8905-126">However, if the parent UpdatePanel is refreshed, then the child UpdatePanel will also be refreshed.</span></span>

## <a name="the-lttriggersgt-element"></a><span data-ttu-id="a8905-127">*&lt;déclencheurs&gt; élément*</span><span class="sxs-lookup"><span data-stu-id="a8905-127">*The &lt;Triggers&gt; Element*</span></span>

<span data-ttu-id="a8905-128">Lorsque vous travaillez dans l’éditeur de balises dans Visual Studio, vous pouvez remarquer (à partir d’IntelliSense) qu’il y a deux éléments enfants d’un contrôle `UpdatePanel`.</span><span class="sxs-lookup"><span data-stu-id="a8905-128">When working in the markup editor in Visual Studio, you may notice (from IntelliSense) that there are two child elements of an `UpdatePanel` control.</span></span> <span data-ttu-id="a8905-129">L’élément le plus fréquemment vu est l’élément `<ContentTemplate>`, qui encapsule essentiellement le contenu qui sera détenu par le panneau de mise à jour (le contenu pour lequel nous activez le rendu partiel).</span><span class="sxs-lookup"><span data-stu-id="a8905-129">The most-frequently seen element is the `<ContentTemplate>` element, which essentially encapsulates the content that will be held by the update panel (the content for which we are enabling partial rendering).</span></span> <span data-ttu-id="a8905-130">L’autre élément est l’élément `<Triggers>`, qui spécifie les contrôles sur la page (ou le contrôle utilisateur, si vous en utilisez un) qui déclenchera un rendu partiel du contrôle UpdatePanel dans lequel le &lt;déclenche&gt; élément.</span><span class="sxs-lookup"><span data-stu-id="a8905-130">The other element is the `<Triggers>` element, which specifies the controls on the page (or the user control, if you are using one) that will trigger a partial render of the UpdatePanel control in which the &lt;Triggers&gt; element resides.</span></span>

<span data-ttu-id="a8905-131">L’élément `<Triggers>` peut contenir n’importe quel nombre de deux nœuds enfants : `<asp:AsyncPostBackTrigger>` et `<asp:PostBackTrigger>`.</span><span class="sxs-lookup"><span data-stu-id="a8905-131">The `<Triggers>` element can contain any number each of two child nodes: `<asp:AsyncPostBackTrigger>` and `<asp:PostBackTrigger>`.</span></span> <span data-ttu-id="a8905-132">Ils acceptent deux attributs, `ControlID` et `EventName`et peuvent spécifier n’importe quel contrôle dans l’unité d’encapsulation actuelle (par exemple, si votre contrôle UpdatePanel réside dans un contrôle utilisateur Web, vous ne devez pas tenter de référencer un contrôle sur la page sur laquelle le contrôle utilisateur résidera).</span><span class="sxs-lookup"><span data-stu-id="a8905-132">They both accept two attributes, `ControlID` and `EventName`, and can specify any Control within the current unit of encapsulation (for instance, if your UpdatePanel control resides within a Web User Control, you should not attempt to reference a Control on the Page on which the User Control will reside).</span></span>

<span data-ttu-id="a8905-133">L’élément `<asp:AsyncPostBackTrigger>` est particulièrement utile en ce sens qu’il peut cibler n’importe quel événement à partir d’un contrôle qui existe en tant qu’enfant de *n’importe quel* contrôle UpdatePanel dans l’unité d’encapsulation, pas seulement le UpdatePanel sous lequel ce déclencheur est un enfant.</span><span class="sxs-lookup"><span data-stu-id="a8905-133">The `<asp:AsyncPostBackTrigger>` element is particularly useful in that it can target any event from a Control that exists as a child of *any* UpdatePanel control in the unit of encapsulation, not just the UpdatePanel under which this trigger is a child.</span></span> <span data-ttu-id="a8905-134">Ainsi, tous les contrôles peuvent être effectués pour déclencher une mise à jour de page partielle.</span><span class="sxs-lookup"><span data-stu-id="a8905-134">Thus, any control can be made to trigger a partial page update.</span></span>

<span data-ttu-id="a8905-135">De même, l’élément `<asp:PostBackTrigger>` peut être utilisé pour déclencher un rendu de page partiel, mais un qui nécessite un aller-retour complet au serveur.</span><span class="sxs-lookup"><span data-stu-id="a8905-135">Similarly, the `<asp:PostBackTrigger>` element can be used to trigger a partial page render, but one that requires a full round-trip to the server.</span></span> <span data-ttu-id="a8905-136">Cet élément déclencheur peut également être utilisé pour forcer un rendu de page entière lorsqu’un contrôle déclenche normalement un rendu de page partiel (par exemple, lorsqu’un contrôle `Button` existe dans l’élément `<ContentTemplate>` d’un contrôle UpdatePanel).</span><span class="sxs-lookup"><span data-stu-id="a8905-136">This trigger element can also be used to force a full page render when a control would otherwise normally trigger a partial page render (for instance, when a `Button` control exists in the `<ContentTemplate>` element of an UpdatePanel control).</span></span> <span data-ttu-id="a8905-137">Là encore, l’élément PostBackTrigger peut spécifier n’importe quel contrôle qui est un enfant de n’importe quel contrôle UpdatePanel dans l’unité actuelle d’encapsulation.</span><span class="sxs-lookup"><span data-stu-id="a8905-137">Again, the PostBackTrigger element can specify any control that is a child of any UpdatePanel control in the current unit of encapsulation.</span></span>

## <a name="lttriggersgt-element-reference"></a><span data-ttu-id="a8905-138">*&lt;déclencheurs&gt; référence d’élément*</span><span class="sxs-lookup"><span data-stu-id="a8905-138">*&lt;Triggers&gt; Element Reference*</span></span>

<span data-ttu-id="a8905-139">*Descendants de balisage :*</span><span class="sxs-lookup"><span data-stu-id="a8905-139">*Markup Descendants:*</span></span>

| <span data-ttu-id="a8905-140">**Tag**</span><span class="sxs-lookup"><span data-stu-id="a8905-140">**Tag**</span></span> | <span data-ttu-id="a8905-141">**Description**</span><span class="sxs-lookup"><span data-stu-id="a8905-141">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="a8905-142">&lt;asp : AsyncPostBackTrigger&gt;</span><span class="sxs-lookup"><span data-stu-id="a8905-142">&lt;asp:AsyncPostBackTrigger&gt;</span></span> | <span data-ttu-id="a8905-143">Spécifie un contrôle et un événement qui entraînent une mise à jour de page partielle pour le UpdatePanel qui contient cette référence de déclencheur.</span><span class="sxs-lookup"><span data-stu-id="a8905-143">Specifies a control and event that will cause a partial page update for the UpdatePanel that contains this trigger reference.</span></span> |
| <span data-ttu-id="a8905-144">&lt;asp : PostBackTrigger&gt;</span><span class="sxs-lookup"><span data-stu-id="a8905-144">&lt;asp:PostBackTrigger&gt;</span></span> | <span data-ttu-id="a8905-145">Spécifie un contrôle et un événement qui entraînent une mise à jour de page complète (actualisation de page complète).</span><span class="sxs-lookup"><span data-stu-id="a8905-145">Specifies a control and event that will cause a full page update (a full page refresh).</span></span> <span data-ttu-id="a8905-146">Cette balise peut être utilisée pour forcer une actualisation complète lorsqu’un contrôle déclencherait un rendu partiel.</span><span class="sxs-lookup"><span data-stu-id="a8905-146">This tag can be used to force a full refresh when a control would otherwise trigger partial rendering.</span></span> |

## <a name="walkthrough-cross-updatepanel-triggers"></a><span data-ttu-id="a8905-147">*Procédure pas à pas : déclencheurs Cross-UpdatePanel*</span><span class="sxs-lookup"><span data-stu-id="a8905-147">*Walkthrough: Cross-UpdatePanel Triggers*</span></span>

1. <span data-ttu-id="a8905-148">Créez une nouvelle page ASP.NET avec un objet ScriptManager défini pour activer le rendu partiel.</span><span class="sxs-lookup"><span data-stu-id="a8905-148">Create a new ASP.NET page with a ScriptManager object set to enable partial rendering.</span></span> <span data-ttu-id="a8905-149">Ajoutez deux UpdatePanel à cette page : dans le premier, incluez un contrôle Label (Label1) et deux contrôles Button (button1 et button2).</span><span class="sxs-lookup"><span data-stu-id="a8905-149">Add two UpdatePanels to this page - in the first, include a Label control ( Label1 ) and two Button controls ( Button1 and Button2 ).</span></span> <span data-ttu-id="a8905-150">Button1 doit indiquer Cliquer pour mettre à jour et button2 doit indiquer Cliquer pour mettre à jour ce ou une ligne.</span><span class="sxs-lookup"><span data-stu-id="a8905-150">Button1 should say Click to Update Both and Button2 should say Click to Update This, or something along those lines.</span></span> <span data-ttu-id="a8905-151">Dans le second UpdatePanel, incluez uniquement un contrôle Label (Label2), mais définissez sa propriété ForeColor sur une valeur autre que la valeur par défaut pour le différencier.</span><span class="sxs-lookup"><span data-stu-id="a8905-151">In the second UpdatePanel, include only a Label control ( Label2 ), but set its ForeColor property to something other than the default to differentiate it.</span></span>
2. <span data-ttu-id="a8905-152">Affectez à la propriété UpdateMode des deux balises UpdatePanel la valeur **Conditional**.</span><span class="sxs-lookup"><span data-stu-id="a8905-152">Set the UpdateMode property of both UpdatePanel tags to **Conditional**.</span></span>

<span data-ttu-id="a8905-153">**Liste 1 : balisage pour default. aspx :**</span><span class="sxs-lookup"><span data-stu-id="a8905-153">**Listing 1: Markup for default.aspx:**</span></span> 

[!code-aspx[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample1.aspx)]

1. <span data-ttu-id="a8905-154">Dans le gestionnaire d’événements Click pour Button1, définissez Label1. Text et Label2. Text sur un nom dépendant du temps (par exemple, DateTime. Now. ToLongTimeString ()).</span><span class="sxs-lookup"><span data-stu-id="a8905-154">In the Click event handler for Button1, set Label1.Text and Label2.Text to something time-dependent (such as DateTime.Now.ToLongTimeString()).</span></span> <span data-ttu-id="a8905-155">Pour le gestionnaire d’événements Click pour Button2, définissez uniquement Label1. Text sur la valeur qui dépend du temps.</span><span class="sxs-lookup"><span data-stu-id="a8905-155">For the Click event handler for Button2, set only Label1.Text to the time-dependent value.</span></span>

<span data-ttu-id="a8905-156">**Liste 2 : codebehind (tronqué) dans default.aspx.cs :**</span><span class="sxs-lookup"><span data-stu-id="a8905-156">**Listing 2: Codebehind (trimmed) in default.aspx.cs:**</span></span> 

[!code-csharp[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample2.cs)]

1. <span data-ttu-id="a8905-157">Appuyez sur F5 pour générer et exécuter le projet.</span><span class="sxs-lookup"><span data-stu-id="a8905-157">Press F5 to build and run the project.</span></span> <span data-ttu-id="a8905-158">Notez que lorsque vous cliquez sur mettre à jour les deux panneaux, les deux étiquettes changent de texte ; Toutefois, lorsque vous cliquez sur mettre à jour ce panneau, seules les mises à jour Label1 sont mises à jour.</span><span class="sxs-lookup"><span data-stu-id="a8905-158">Note that, when you click Update Both Panels, both labels change text; however, when you click Update This Panel, only Label1 updates.</span></span>

[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image2.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image1.png)

<span data-ttu-id="a8905-159">([Cliquez pour afficher l’image en taille réelle](understanding-asp-net-ajax-updatepanel-triggers/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="a8905-159">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image3.png))</span></span>

## <a name="under-the-hood"></a><span data-ttu-id="a8905-160">*Rouages du système*</span><span class="sxs-lookup"><span data-stu-id="a8905-160">*Under the Hood*</span></span>

<span data-ttu-id="a8905-161">À l’aide de l’exemple que nous venons de construire, nous pouvons examiner ce que fait ASP.NET AJAX et comment nos déclencheurs multivolets UpdatePanel fonctionnent.</span><span class="sxs-lookup"><span data-stu-id="a8905-161">Utilizing the example we just constructed, we can take a look at what ASP.NET AJAX is doing and how our UpdatePanel cross-panel triggers work.</span></span> <span data-ttu-id="a8905-162">Pour ce faire, nous allons utiliser le code HTML source de la page générée, ainsi que l’extension Mozilla Firefox appelée FireBug, nous pouvons examiner facilement les publications (postback) AJAX.</span><span class="sxs-lookup"><span data-stu-id="a8905-162">To do so, we will work with the generated page source HTML, as well as the Mozilla Firefox extension called FireBug - with it, we can easily examine the AJAX postbacks.</span></span> <span data-ttu-id="a8905-163">Nous utiliserons également l’outil .NET Reflector de Lutz Roeder.</span><span class="sxs-lookup"><span data-stu-id="a8905-163">We will also use the .NET Reflector tool by Lutz Roeder.</span></span> <span data-ttu-id="a8905-164">Ces deux outils sont disponibles en ligne librement et se trouvent dans une recherche Internet.</span><span class="sxs-lookup"><span data-stu-id="a8905-164">Both of these tools are freely available online, and can be found with an internet search.</span></span>

<span data-ttu-id="a8905-165">Un examen du code source de la page n’affiche presque rien du tout. les contrôles UpdatePanel sont rendus sous la forme de conteneurs `<div>`, et nous pouvons voir les ressources de script incluses dans le `<asp:ScriptManager>`.</span><span class="sxs-lookup"><span data-stu-id="a8905-165">An examination of the page source code shows almost nothing out of the ordinary; the UpdatePanel controls are rendered as `<div>` containers, and we can see the script resource includes provided by the `<asp:ScriptManager>`.</span></span> <span data-ttu-id="a8905-166">Il existe également de nouveaux appels spécifiques à AJAX au PageRequestManager qui sont internes à la bibliothèque de scripts client AJAX.</span><span class="sxs-lookup"><span data-stu-id="a8905-166">There are also some new AJAX-specific calls to the PageRequestManager that are internal to the AJAX client script library.</span></span> <span data-ttu-id="a8905-167">Enfin, nous voyons les deux conteneurs UpdatePanel : l’un avec les boutons de `<input>` rendus avec les deux contrôles `<asp:Label>` rendus sous la forme de conteneurs `<span>`.</span><span class="sxs-lookup"><span data-stu-id="a8905-167">Finally, we see the two UpdatePanel containers - one with the rendered `<input>` buttons with the two `<asp:Label>` controls rendered as `<span>` containers.</span></span> <span data-ttu-id="a8905-168">(Si vous examinez l’arborescence DOM dans FireBug, vous remarquerez que les étiquettes sont estompées pour indiquer qu’elles ne produisent pas de contenu visible).</span><span class="sxs-lookup"><span data-stu-id="a8905-168">(If you inspect the DOM tree in FireBug, you will notice that the labels are dimmed to indicate that they are not producing visible content).</span></span>

<span data-ttu-id="a8905-169">Cliquez sur le bouton mettre à jour ce panneau, et notez que le UpdatePanel supérieur est mis à jour avec l’heure actuelle du serveur.</span><span class="sxs-lookup"><span data-stu-id="a8905-169">Click the Update This Panel button, and notice the top UpdatePanel will be updated with the current server time.</span></span> <span data-ttu-id="a8905-170">Dans FireBug, choisissez l’onglet Console pour pouvoir examiner la demande.</span><span class="sxs-lookup"><span data-stu-id="a8905-170">In FireBug, choose the Console tab so that you can examine the request.</span></span> <span data-ttu-id="a8905-171">Examinez d’abord les paramètres de la demande de publication :</span><span class="sxs-lookup"><span data-stu-id="a8905-171">Examine the POST request parameters first:</span></span>

[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image5.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image4.png)

<span data-ttu-id="a8905-172">([Cliquez pour afficher l’image en taille réelle](understanding-asp-net-ajax-updatepanel-triggers/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="a8905-172">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image6.png))</span></span>

<span data-ttu-id="a8905-173">Notez que UpdatePanel a indiqué au code AJAX côté serveur l’arborescence de contrôle qui a été déclenchée avec le paramètre ScriptManager1 : `Button1` du contrôle `UpdatePanel1`.</span><span class="sxs-lookup"><span data-stu-id="a8905-173">Note that the UpdatePanel has indicated to the server-side AJAX code precisely which control tree was fired via the ScriptManager1 parameter: `Button1` of the `UpdatePanel1` control.</span></span> <span data-ttu-id="a8905-174">Maintenant, cliquez sur le bouton mettre à jour les deux panneaux.</span><span class="sxs-lookup"><span data-stu-id="a8905-174">Now, click on the Update Both Panels button.</span></span> <span data-ttu-id="a8905-175">Ensuite, en examinant la réponse, nous voyons une série de variables délimitées par des barres verticales qui sont définies dans une chaîne. plus précisément, nous voyons le plus haut UpdatePanel, `UpdatePanel1`, a l’intégralité de son HTML envoyé au navigateur.</span><span class="sxs-lookup"><span data-stu-id="a8905-175">Then, examining the response, we see a pipe-delimited series of variables set in a string; specifically, we see the top UpdatePanel, `UpdatePanel1`, has the entirety of its HTML sent to the browser.</span></span> <span data-ttu-id="a8905-176">La bibliothèque de scripts client AJAX remplace le contenu HTML d’origine de UpdatePanel par le nouveau contenu via la propriété `.innerHTML`, de sorte que le serveur envoie le contenu modifié à partir du serveur au format HTML.</span><span class="sxs-lookup"><span data-stu-id="a8905-176">The AJAX client script library substitutes the UpdatePanel's original HTML content with the new content via the `.innerHTML` property, and so the server sends the changed content from the server as HTML.</span></span>

<span data-ttu-id="a8905-177">Maintenant, cliquez sur le bouton mettre à jour les deux panneaux, puis examinez les résultats du serveur.</span><span class="sxs-lookup"><span data-stu-id="a8905-177">Now, click on the Update Both Panels button and examine the results from the server.</span></span> <span data-ttu-id="a8905-178">Les résultats sont très similaires : les deux UpdatePanel reçoivent le nouveau code HTML du serveur.</span><span class="sxs-lookup"><span data-stu-id="a8905-178">The results are very similar - both UpdatePanels receive new HTML from the server.</span></span> <span data-ttu-id="a8905-179">Comme avec le rappel précédent, l’état de la page supplémentaire est envoyé.</span><span class="sxs-lookup"><span data-stu-id="a8905-179">As with the previous callback, additional page state is sent.</span></span>

<span data-ttu-id="a8905-180">Comme nous pouvons le voir, dans la mesure où aucun code spécial n’est utilisé pour effectuer un postback AJAX, la bibliothèque de scripts client AJAX est en mesure d’intercepter les publications de formulaire sans code supplémentaire.</span><span class="sxs-lookup"><span data-stu-id="a8905-180">As we can see, because no special code is utilized to perform an AJAX postback, the AJAX client script library is able to intercept form postbacks without any additional code.</span></span> <span data-ttu-id="a8905-181">Les contrôles serveur utilisent automatiquement JavaScript pour qu’ils n’envoient pas automatiquement le formulaire-ASP.NET injecte automatiquement le code pour la validation de formulaire et l’état déjà, principalement réalisé par l’inclusion automatique des ressources de script, la classe PostBackOptions et la classe ClientScriptManager.</span><span class="sxs-lookup"><span data-stu-id="a8905-181">Server controls automatically utilize JavaScript so that they do not automatically submit the form - ASP.NET automatically injects code for form validation and state already, primarily achieved by automatic script resource inclusion, the PostBackOptions class, and the ClientScriptManager class.</span></span>

<span data-ttu-id="a8905-182">Par exemple, considérez un contrôle de case à cocher ; Examinez le code machine de la classe dans .NET Reflector.</span><span class="sxs-lookup"><span data-stu-id="a8905-182">For instance, consider a CheckBox control; examine the class disassembly in .NET Reflector.</span></span> <span data-ttu-id="a8905-183">Pour ce faire, assurez-vous que votre assembly System. Web est ouvert et accédez à la classe `System.Web.UI.WebControls.CheckBox`, en ouvrant la méthode `RenderInputTag`.</span><span class="sxs-lookup"><span data-stu-id="a8905-183">To do so, ensure that your System.Web assembly is open, and navigate to the `System.Web.UI.WebControls.CheckBox` class, opening the `RenderInputTag` method.</span></span> <span data-ttu-id="a8905-184">Recherchez une condition conditionnelle qui vérifie la propriété `AutoPostBack` :</span><span class="sxs-lookup"><span data-stu-id="a8905-184">Look for a conditional that checks the `AutoPostBack` property:</span></span>

[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image8.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image7.png)

<span data-ttu-id="a8905-185">([Cliquez pour afficher l’image en taille réelle](understanding-asp-net-ajax-updatepanel-triggers/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="a8905-185">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image9.png))</span></span>

<span data-ttu-id="a8905-186">Lorsque la publication automatique est activée sur un contrôle `CheckBox` (via la propriété AutoPostBack true), la balise `<input>` résultante est donc restituée avec un script de gestion des événements ASP.NET dans son attribut `onclick`.</span><span class="sxs-lookup"><span data-stu-id="a8905-186">When automatic postback is enabled on a `CheckBox` control (via the AutoPostBack property being true), the resultant `<input>` tag is therefore rendered with an ASP.NET event handling script in its `onclick` attribute.</span></span> <span data-ttu-id="a8905-187">L’interception de la soumission du formulaire, puis permet à ASP.NET AJAX d’être injecté dans la page de manière non intrusive, ce qui contribue à éviter toute modification avec rupture potentielle qui peut se produire en utilisant un remplacement de chaîne éventuellement inexact.</span><span class="sxs-lookup"><span data-stu-id="a8905-187">The interception of the form's submission, then, allows ASP.NET AJAX to be injected into the page nonintrusively, helping to avoid any potential breaking changes that might occur by utilizing a possibly-imprecise string replacement.</span></span> <span data-ttu-id="a8905-188">En outre, cela permet à *n’importe quel* contrôle ASP.NET personnalisé d’utiliser la puissance de ASP.NET AJAX sans aucun code supplémentaire pour prendre en charge son utilisation dans un conteneur UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="a8905-188">Furthermore, this enables *any* custom ASP.NET control to utilize the power of ASP.NET AJAX without any additional code to support its use within an UpdatePanel container.</span></span>

<span data-ttu-id="a8905-189">La fonctionnalité `<triggers>` correspond aux valeurs initialisées dans l’appel PageRequestManager à \_updateControls (Notez que la bibliothèque de scripts client ASP.NET AJAX utilise la Convention selon laquelle les méthodes, les événements et les noms de champs qui commencent par un trait de soulignement sont marqués comme internes et ne sont pas destinés à être utilisés en dehors de la bibliothèque elle-même).</span><span class="sxs-lookup"><span data-stu-id="a8905-189">The `<triggers>` functionality corresponds to the values initialized in the PageRequestManager call to \_updateControls (note that the ASP.NET AJAX client script library utilizes the convention that methods, events, and field names that begin with an underscore are marked as internal, and are not meant for use outside of the library itself).</span></span> <span data-ttu-id="a8905-190">Avec elle, nous pouvons observer les contrôles qui sont destinés à provoquer des publications (postback) AJAX.</span><span class="sxs-lookup"><span data-stu-id="a8905-190">With it, we can observe which controls are intended to cause AJAX postbacks.</span></span>

<span data-ttu-id="a8905-191">Par exemple, nous allons ajouter deux contrôles supplémentaires à la page, en laissant entièrement un contrôle en dehors des UpdatePanel et en laissant un contrôle dans un UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="a8905-191">For example, let's add two additional controls to the page, leaving one control outside of the UpdatePanels entirely, and leaving one within an UpdatePanel.</span></span> <span data-ttu-id="a8905-192">Nous allons ajouter un contrôle de case à cocher dans l’UpdatePanel supérieur et supprimer un DropDownList avec un nombre de couleurs défini dans la liste.</span><span class="sxs-lookup"><span data-stu-id="a8905-192">We will add a CheckBox control within the upper UpdatePanel, and drop a DropDownList with a number of colors defined within the list.</span></span> <span data-ttu-id="a8905-193">Voici le nouveau balisage :</span><span class="sxs-lookup"><span data-stu-id="a8905-193">Here is the new markup:</span></span>

<span data-ttu-id="a8905-194">**Liste 3 : nouveau balisage**</span><span class="sxs-lookup"><span data-stu-id="a8905-194">**Listing 3: New Markup**</span></span>

[!code-aspx[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample3.aspx)]

<span data-ttu-id="a8905-195">Et voici le nouveau code-behind :</span><span class="sxs-lookup"><span data-stu-id="a8905-195">And here is the new code-behind:</span></span>

<span data-ttu-id="a8905-196">**Liste 4 : codebehind**</span><span class="sxs-lookup"><span data-stu-id="a8905-196">**Listing 4: Codebehind**</span></span>

[!code-csharp[Main](understanding-asp-net-ajax-updatepanel-triggers/samples/sample4.cs)]

<span data-ttu-id="a8905-197">L’idée derrière cette page est que la liste déroulante sélectionne l’une des trois couleurs pour afficher la deuxième étiquette, que la case à cocher détermine si elle est en gras, et si les étiquettes affichent la date et l’heure.</span><span class="sxs-lookup"><span data-stu-id="a8905-197">The idea behind this page is that the drop-down list selects one of three colors to show the second label, that the check box determines both whether it is bold, and whether the labels display the date as well as the time.</span></span> <span data-ttu-id="a8905-198">La case à cocher ne doit pas provoquer de mise à jour AJAX, mais la liste déroulante doit, même si elle n’est pas hébergée dans un UpdatePanel.</span><span class="sxs-lookup"><span data-stu-id="a8905-198">The check box should not cause an AJAX update, but the drop-down list should, even though it is not housed within an UpdatePanel.</span></span>

[![](understanding-asp-net-ajax-updatepanel-triggers/_static/image11.png)](understanding-asp-net-ajax-updatepanel-triggers/_static/image10.png)

<span data-ttu-id="a8905-199">([Cliquez pour afficher l’image en taille réelle](understanding-asp-net-ajax-updatepanel-triggers/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="a8905-199">([Click to view full-size image](understanding-asp-net-ajax-updatepanel-triggers/_static/image12.png))</span></span>

<span data-ttu-id="a8905-200">Comme indiqué dans la capture d’écran ci-dessus, le bouton le plus récent sur lequel vous pouvez cliquer était le bouton droit mettre à jour ce panneau, ce qui a mis à jour le temps le plus élevé indépendamment du temps inférieur.</span><span class="sxs-lookup"><span data-stu-id="a8905-200">As is apparent in the above screen shot, the most-recent button to be clicked was the right button Update This Panel, which updated the top time independent of the bottom time.</span></span> <span data-ttu-id="a8905-201">La date a également été déplacée entre les clics, car la date est visible dans l’étiquette du bas.</span><span class="sxs-lookup"><span data-stu-id="a8905-201">The date was also switched off between clicks, as the date is visible in the bottom label.</span></span> <span data-ttu-id="a8905-202">Enfin, l’intérêt est la couleur de l’étiquette inférieure : elle a été mise à jour plus récemment que le texte de l’étiquette, ce qui démontre que l’état du contrôle est important et que les utilisateurs s’attendent à ce qu’elle soit conservée via des publications AJAX.</span><span class="sxs-lookup"><span data-stu-id="a8905-202">Finally of interest is the bottom label's color: it was updated more recently than the label's text, which demonstrates that control state is important, and users expect it to be preserved through AJAX postbacks.</span></span> <span data-ttu-id="a8905-203">*Toutefois*, l’heure n’a pas été mise à jour.</span><span class="sxs-lookup"><span data-stu-id="a8905-203">*However*, the time was not updated.</span></span> <span data-ttu-id="a8905-204">L’heure a été automatiquement régénérée par la persistance de la \_\_champ VIEWSTATE de la page qui est interprétée par le runtime ASP.NET lorsque le contrôle a été rerendu sur le serveur.</span><span class="sxs-lookup"><span data-stu-id="a8905-204">The time was automatically repopulated through the persistence of the \_\_VIEWSTATE field of the page being interpreted by the ASP.NET runtime when the control was being re-rendered on the server.</span></span> <span data-ttu-id="a8905-205">Le code du serveur ASP.NET AJAX ne reconnaît pas les méthodes dans lesquelles les contrôles changent d’État ; Il se repeuple simplement à partir de l’état d’affichage, puis exécute les événements appropriés.</span><span class="sxs-lookup"><span data-stu-id="a8905-205">The ASP.NET AJAX server code does not recognize in which methods the controls are changing state; it simply repopulates from view state and then runs the events that are appropriate.</span></span>

<span data-ttu-id="a8905-206">Toutefois, il faut noter que j’ai initialisé l’heure dans la page\_événement de chargement, le temps aurait été incrémenté correctement.</span><span class="sxs-lookup"><span data-stu-id="a8905-206">It should be pointed out, however, that had I initialized the time within the Page\_Load event, the time would have been incremented correctly.</span></span> <span data-ttu-id="a8905-207">Par conséquent, les développeurs doivent faire attention au fait que le code approprié est exécuté pendant les gestionnaires d’événements appropriés et éviter l’utilisation du chargement de page\_lorsqu’un gestionnaire d’événements de contrôle est approprié.</span><span class="sxs-lookup"><span data-stu-id="a8905-207">Consequently, developers should be wary that the appropriate code is being run during the appropriate event handlers, and avoid use of Page\_Load when a control event handler would be appropriate.</span></span>

## <a name="summary"></a><span data-ttu-id="a8905-208">Récapitulatif</span><span class="sxs-lookup"><span data-stu-id="a8905-208">Summary</span></span>

<span data-ttu-id="a8905-209">Le contrôle UpdatePanel des extensions ASP.NET AJAX est polyvalent et peut utiliser un certain nombre de méthodes pour identifier les événements de contrôle qui doivent provoquer la mise à jour de celui-ci.</span><span class="sxs-lookup"><span data-stu-id="a8905-209">The ASP.NET AJAX Extensions UpdatePanel control is versatile, and can utilize a number of methods for identifying control events that should cause it to be updated.</span></span> <span data-ttu-id="a8905-210">Il prend en charge la mise à jour automatique par ses contrôles enfants, mais il peut également répondre aux événements de contrôle ailleurs sur la page.</span><span class="sxs-lookup"><span data-stu-id="a8905-210">It supports being updated automatically by its child controls, but can also respond to control events elsewhere on the page.</span></span>

<span data-ttu-id="a8905-211">Pour réduire la charge de traitement du serveur, il est recommandé de définir la propriété `ChildrenAsTriggers` d’un UpdatePanel sur `false`, et de faire en sorte que les événements soient activés au lieu d’être inclus par défaut.</span><span class="sxs-lookup"><span data-stu-id="a8905-211">To reduce potential for server processing load, it is recommended that the `ChildrenAsTriggers` property of an UpdatePanel be set to `false`, and that events be opted-into rather than included by default.</span></span> <span data-ttu-id="a8905-212">Cela empêche également les événements inutiles de provoquer des effets potentiellement indésirables, y compris la validation et les modifications apportées aux champs d’entrée.</span><span class="sxs-lookup"><span data-stu-id="a8905-212">This also prevents any unneeded events from causing potentially-unwanted effects, including validation, and changes to input fields.</span></span> <span data-ttu-id="a8905-213">Ces types de bogues peuvent être difficiles à isoler, car la page se met à jour de façon transparente pour l’utilisateur, et la cause peut donc ne pas être immédiatement évidente.</span><span class="sxs-lookup"><span data-stu-id="a8905-213">These types of bugs may be difficult to isolate, because the page updates transparently to the user, and the cause may therefore not be immediately obvious.</span></span>

<span data-ttu-id="a8905-214">En examinant le fonctionnement interne du modèle d’interception de la publication de formulaire AJAX ASP.NET, nous avons pu déterminer qu’il utilise l’infrastructure déjà fournie par ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="a8905-214">By examining the inner workings of the ASP.NET AJAX form post interception model, we were able to determine that it utilizes the framework already provided by ASP.NET.</span></span> <span data-ttu-id="a8905-215">Ce faisant, il préserve la compatibilité maximale avec les contrôles conçus à l’aide de la même infrastructure, et les intrus au minimum sur tout JavaScript supplémentaire écrit pour la page.</span><span class="sxs-lookup"><span data-stu-id="a8905-215">In doing so, it preserves maximum compatibility with controls designed using the same framework, and intrudes minimally on any additional JavaScript written for the page.</span></span>

## <a name="bio"></a><span data-ttu-id="a8905-216">Équivalence</span><span class="sxs-lookup"><span data-stu-id="a8905-216">Bio</span></span>

<span data-ttu-id="a8905-217">Rob Paveza est développeur d’applications .NET senior chez Terralever ([www.Terralever.com](http://www.terralever.com)), une société de marketing interactive de pointe dans Tempe, AZ.</span><span class="sxs-lookup"><span data-stu-id="a8905-217">Rob Paveza is a senior .NET application developer at Terralever ([www.terralever.com](http://www.terralever.com)), a leading interactive marketing firm in Tempe, AZ.</span></span> <span data-ttu-id="a8905-218">Il peut être contacté à [robpaveza@gmail.com](mailto:robpaveza@gmail.com)et son blog se trouve sur [http://geekswithblogs.net/robp/](http://geekswithblogs.net/robp/).</span><span class="sxs-lookup"><span data-stu-id="a8905-218">He can be reached at [robpaveza@gmail.com](mailto:robpaveza@gmail.com), and his blog is located at [http://geekswithblogs.net/robp/](http://geekswithblogs.net/robp/).</span></span>

<span data-ttu-id="a8905-219">Scott Cate travaille avec les technologies Web de Microsoft depuis 1997 et est le Président de myKB.com ([www.myKB.com](http://www.myKB.com)), où il se spécialise dans l’écriture d’applications ASP.net axées sur les solutions logicielles de la base de connaissances.</span><span class="sxs-lookup"><span data-stu-id="a8905-219">Scott Cate has been working with Microsoft Web technologies since 1997 and is the President of myKB.com ([www.myKB.com](http://www.myKB.com)) where he specializes in writing ASP.NET based applications focused on Knowledge Base Software solutions.</span></span> <span data-ttu-id="a8905-220">Scott peut être contacté par e-mail à [scott.cate@myKB.com](mailto:scott.cate@myKB.com) ou son blog à l’adresse [ScottCate.com](http://ScottCate.com)</span><span class="sxs-lookup"><span data-stu-id="a8905-220">Scott can be contacted via email at [scott.cate@myKB.com](mailto:scott.cate@myKB.com) or his blog at [ScottCate.com](http://ScottCate.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="a8905-221">[Précédent](understanding-partial-page-updates-with-asp-net-ajax.md)
> [Suivant](understanding-asp-net-ajax-authentication-and-profile-application-services.md)</span><span class="sxs-lookup"><span data-stu-id="a8905-221">[Previous](understanding-partial-page-updates-with-asp-net-ajax.md)
[Next](understanding-asp-net-ajax-authentication-and-profile-application-services.md)</span></span>

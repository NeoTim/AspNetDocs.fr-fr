---
uid: web-forms/overview/older-versions-getting-started/master-pages/interacting-with-the-content-page-from-the-master-page-cs
title: Interaction avec la Page de contenu à partir de la Page maître (c#) | Microsoft Docs
author: rick-anderson
description: Examine la manière d’appeler des méthodes, définissez des propriétés, etc. de la Page de contenu à partir du code dans la Page maître.
ms.author: riande
ms.date: 07/11/2008
ms.assetid: 3282df5e-516c-4972-8666-313828b90fb5
msc.legacyurl: /web-forms/overview/older-versions-getting-started/master-pages/interacting-with-the-content-page-from-the-master-page-cs
msc.type: authoredcontent
ms.openlocfilehash: a2b6d3a5ceb66c14a78b02182f49d76c72becbd4
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/17/2019
ms.locfileid: "59413644"
---
# <a name="interacting-with-the-content-page-from-the-master-page-c"></a><span data-ttu-id="8301f-103">Interaction avec la page de contenu à partir de la page maître (C#)</span><span class="sxs-lookup"><span data-stu-id="8301f-103">Interacting with the Content Page from the Master Page (C#)</span></span>

<span data-ttu-id="8301f-104">par [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="8301f-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="8301f-105">[Télécharger le Code](http://download.microsoft.com/download/1/8/4/184e24fa-fcc8-47fa-ac99-4b6a52d41e97/ASPNET_MasterPages_Tutorial_07_CS.zip) ou [télécharger le PDF](http://download.microsoft.com/download/e/b/4/eb4abb10-c416-4ba4-9899-32577715b1bd/ASPNET_MasterPages_Tutorial_07_CS.pdf)</span><span class="sxs-lookup"><span data-stu-id="8301f-105">[Download Code](http://download.microsoft.com/download/1/8/4/184e24fa-fcc8-47fa-ac99-4b6a52d41e97/ASPNET_MasterPages_Tutorial_07_CS.zip) or [Download PDF](http://download.microsoft.com/download/e/b/4/eb4abb10-c416-4ba4-9899-32577715b1bd/ASPNET_MasterPages_Tutorial_07_CS.pdf)</span></span>

> <span data-ttu-id="8301f-106">Examine la manière d’appeler des méthodes, définissez des propriétés, etc. de la Page de contenu à partir du code dans la Page maître.</span><span class="sxs-lookup"><span data-stu-id="8301f-106">Examines how to call methods, set properties, etc. of the Content Page from code in the Master Page.</span></span>


## <a name="introduction"></a><span data-ttu-id="8301f-107">Introduction</span><span class="sxs-lookup"><span data-stu-id="8301f-107">Introduction</span></span>

<span data-ttu-id="8301f-108">Le didacticiel précédent examiné comment avoir à la page de contenu d’interagir par programmation avec sa page maître.</span><span class="sxs-lookup"><span data-stu-id="8301f-108">The preceding tutorial examined how to have the content page programmatically interact with its master page.</span></span> <span data-ttu-id="8301f-109">Rappel que nous avons mis à jour la page maître pour inclure un contrôle GridView qui liste les cinq plus récemment ajouté des produits.</span><span class="sxs-lookup"><span data-stu-id="8301f-109">Recall that we updated the master page to include a GridView control that listed the five most recently added products.</span></span> <span data-ttu-id="8301f-110">Nous avons ensuite créé une page de contenu à partir de laquelle l’utilisateur peut ajouter un nouveau produit.</span><span class="sxs-lookup"><span data-stu-id="8301f-110">We then created a content page from which the user could add a new product.</span></span> <span data-ttu-id="8301f-111">Lors de l’ajout d’un nouveau produit, la page de contenu nécessaire pour indiquer à la page maître pour actualiser ses GridView afin qu’il doit inclure le produit juste-ajouté.</span><span class="sxs-lookup"><span data-stu-id="8301f-111">Upon adding a new product, the content page needed to instruct the master page to refresh its GridView so that it would include the just-added product.</span></span> <span data-ttu-id="8301f-112">Cette fonctionnalité a été effectuée en ajoutant une méthode publique à la page maître qu’actualisé les données liées au GridView et puis en appelant cette méthode à partir de la page de contenu.</span><span class="sxs-lookup"><span data-stu-id="8301f-112">This functionality was accomplished by adding a public method to the master page that refreshed the data bound to the GridView, and then invoking that method from the content page.</span></span>

<span data-ttu-id="8301f-113">La forme la plus courante de contenu et l’interaction de la page maître provient de la page de contenu.</span><span class="sxs-lookup"><span data-stu-id="8301f-113">The most common form of content and master page interaction originates from the content page.</span></span> <span data-ttu-id="8301f-114">Toutefois, il est possible pour la page maître pour rouse la page de contenu actuelle en action, et cette fonctionnalité peut être nécessaire si la page maître contient les éléments d’interface utilisateur qui permettent aux utilisateurs de modifier les données qui s’affiche également sur la page de contenu.</span><span class="sxs-lookup"><span data-stu-id="8301f-114">However, it is possible for the master page to rouse the current content page into action, and such functionality may be needed if the master page contains user interface elements that enable users to modify data that is also displayed on the content page.</span></span> <span data-ttu-id="8301f-115">Considérez qu’affiche les informations de produits dans un GridView contrôle et une page maître qui inclut un bouton de contrôle qui, lorsque vous cliquez sur une page de contenu, de double les prix de tous les produits.</span><span class="sxs-lookup"><span data-stu-id="8301f-115">Consider a content page that displays the products information in a GridView control and a master page that includes a Button control that, when clicked, doubles the prices of all products.</span></span> <span data-ttu-id="8301f-116">Comme l’exemple dans le didacticiel précédent, le contrôle GridView doit être actualisé après le prix double clic sur le bouton afin qu’il affiche les nouveaux prix, mais dans ce scénario, il est la page maître devant rouse la page de contenu à l’action.</span><span class="sxs-lookup"><span data-stu-id="8301f-116">Much like the example in the preceding tutorial, the GridView needs to be refreshed after the double price Button is clicked so that it displays the new prices, but in this scenario it's the master page that needs to rouse the content page into action.</span></span>

<span data-ttu-id="8301f-117">Ce didacticiel explore comment procéder pour que la page maître à appeler la fonctionnalité définie dans la page de contenu.</span><span class="sxs-lookup"><span data-stu-id="8301f-117">This tutorial explores how to have the master page invoke functionality defined in the content page.</span></span>

### <a name="instigating-programmatic-interaction-via-an-event-and-event-handlers"></a><span data-ttu-id="8301f-118">Incitation des interactions par programme via un événement et des gestionnaires d’événements</span><span class="sxs-lookup"><span data-stu-id="8301f-118">Instigating Programmatic Interaction via an Event and Event Handlers</span></span>

<span data-ttu-id="8301f-119">L’appel de fonctionnalité de page de contenu à partir d’une page maître est plus complexe que l’autre sens.</span><span class="sxs-lookup"><span data-stu-id="8301f-119">Invoking content page functionality from a master page is more challenging than the other way around.</span></span> <span data-ttu-id="8301f-120">Car une page de contenu a une seule page maître, lors de l’interaction par programmation à partir de la page de contenu d’origine de celles-ci, nous savons ce que sont les propriétés et les méthodes publiques à notre disposition.</span><span class="sxs-lookup"><span data-stu-id="8301f-120">Because a content page has a single master page, when instigating the programmatic interaction from the content page we know what public methods and properties are at our disposal.</span></span> <span data-ttu-id="8301f-121">Une page maître, cependant, peut avoir plusieurs pages de contenu différents, chacun avec son propre ensemble de propriétés et méthodes.</span><span class="sxs-lookup"><span data-stu-id="8301f-121">A master page, however, can have many different content pages, each with its own set of properties and methods.</span></span> <span data-ttu-id="8301f-122">Comment procéder, puis, pouvons nous écrire du code dans la page maître pour effectuer une action dans sa page de contenu lorsque nous ne savez pas quelle page de contenu sera appelé avant l’exécution ?</span><span class="sxs-lookup"><span data-stu-id="8301f-122">How, then, can we write code in the master page to perform some action in its content page when we don't know what content page will be invoked until runtime?</span></span>

<span data-ttu-id="8301f-123">Envisagez un contrôle Web ASP.NET, tels que le contrôle de bouton.</span><span class="sxs-lookup"><span data-stu-id="8301f-123">Consider an ASP.NET Web control, such as the Button control.</span></span> <span data-ttu-id="8301f-124">Un contrôle de bouton peut apparaître sur n’importe quel nombre de pages ASP.NET et a besoin d’un mécanisme par lequel peut signaler la page qu’il a été cliqué.</span><span class="sxs-lookup"><span data-stu-id="8301f-124">A Button control can appear on any number of ASP.NET pages and needs a mechanism by which it can alert the page that it has been clicked.</span></span> <span data-ttu-id="8301f-125">Pour cela, à l’aide de *événements*.</span><span class="sxs-lookup"><span data-stu-id="8301f-125">This is accomplished using *events*.</span></span> <span data-ttu-id="8301f-126">En particulier, le contrôle de bouton déclenche son `Click` événement lorsque l’utilisateur a cliqué dessus ; la page ASP.NET qui contient le bouton peut éventuellement répondre à cette notification via un *Gestionnaire d’événements*.</span><span class="sxs-lookup"><span data-stu-id="8301f-126">In particular, the Button control raises its `Click` event when it is clicked; the ASP.NET page that contains the Button can optionally respond to that notification via an *event handler*.</span></span>

<span data-ttu-id="8301f-127">Ce même modèle peut être utilisé pour avoir une fonctionnalité de déclencheur de page maître dans ses pages de contenu :</span><span class="sxs-lookup"><span data-stu-id="8301f-127">This same pattern can be used to have a master page trigger functionality in its content pages:</span></span>

1. <span data-ttu-id="8301f-128">Ajouter un événement à la page maître.</span><span class="sxs-lookup"><span data-stu-id="8301f-128">Add an event to the master page.</span></span>
2. <span data-ttu-id="8301f-129">Déclenchez l’événement chaque fois que la page maître a besoin pour communiquer avec sa page de contenu.</span><span class="sxs-lookup"><span data-stu-id="8301f-129">Raise the event whenever the master page needs to communicate with its content page.</span></span> <span data-ttu-id="8301f-130">Par exemple, si la page maître a besoin être averti sa page de contenu que l’utilisateur a doublé les prix, son événement est déclenché immédiatement après que les prix ont été doublés.</span><span class="sxs-lookup"><span data-stu-id="8301f-130">For example, if the master page needs to alert its content page that the user has doubled the prices, its event would be raised immediately after the prices have been doubled.</span></span>
3. <span data-ttu-id="8301f-131">Créez un gestionnaire d’événements dans les pages de contenu qui doivent prendre des mesures.</span><span class="sxs-lookup"><span data-stu-id="8301f-131">Create an event handler in those content pages that need to take some action.</span></span>

<span data-ttu-id="8301f-132">Cette suite de ce didacticiel implémente l’exemple présenté dans l’Introduction ; à savoir, une page de contenu qui répertorie les produits dans la base de données et une page maître qui inclut un bouton de contrôle à double les prix.</span><span class="sxs-lookup"><span data-stu-id="8301f-132">This remainder of this tutorial implements the example outlined in the Introduction; namely, a content page that lists the products in the database and a master page that includes a Button control to double the prices.</span></span>

## <a name="step-1-displaying-products-in-a-content-page"></a><span data-ttu-id="8301f-133">Étape 1 : Affichage des produits dans une Page de contenu</span><span class="sxs-lookup"><span data-stu-id="8301f-133">Step 1: Displaying Products in a Content Page</span></span>

<span data-ttu-id="8301f-134">Notre première chose consiste à créer une page de contenu qui répertorie les produits à partir de la base de données Northwind.</span><span class="sxs-lookup"><span data-stu-id="8301f-134">Our first order of business is to create a content page that lists the products from the Northwind database.</span></span> <span data-ttu-id="8301f-135">(Nous avons ajouté la base de données Northwind au projet dans le didacticiel précédent, [ *interagir avec la Page maître depuis la Page de contenu*](interacting-with-the-master-page-from-the-content-page-cs.md).) Commencez par ajouter une nouvelle page ASP.NET pour le `~/Admin` dossier nommé `Products.aspx`, veillez à lier à la `Site.master` page maître.</span><span class="sxs-lookup"><span data-stu-id="8301f-135">(We added the Northwind database to the project in the preceding tutorial, [*Interacting with the Master Page from the Content Page*](interacting-with-the-master-page-from-the-content-page-cs.md).) Start by adding a new ASP.NET page to the `~/Admin` folder named `Products.aspx`, making sure to bind it to the `Site.master` master page.</span></span> <span data-ttu-id="8301f-136">Figure 1 illustre l’Explorateur de solutions, une fois que cette page a été ajoutée au site Web.</span><span class="sxs-lookup"><span data-stu-id="8301f-136">Figure 1 shows the Solution Explorer after this page has been added to the website.</span></span>


<span data-ttu-id="8301f-137">[![Ajouter une nouvelle Page ASP.NET dans le dossier Admin](interacting-with-the-content-page-from-the-master-page-cs/_static/image2.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="8301f-137">[![Add a New ASP.NET Page to the Admin Folder](interacting-with-the-content-page-from-the-master-page-cs/_static/image2.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image1.png)</span></span>

<span data-ttu-id="8301f-138">**Figure 01**: Ajoutez une nouvelle Page ASP.NET pour le `Admin` dossier ([cliquez pour afficher l’image en taille réelle](interacting-with-the-content-page-from-the-master-page-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="8301f-138">**Figure 01**: Add a New ASP.NET Page to the `Admin` Folder ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image3.png))</span></span>


<span data-ttu-id="8301f-139">N’oubliez pas que dans le [ *spécifiant le titre, les balises Meta et les autres en-têtes HTML dans la Page maître* ](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs.md) didacticiel, nous avons créé une classe de page de base personnalisée nommée `BasePage` qui génère le titre de la page si elle n’est pas définir explicitement.</span><span class="sxs-lookup"><span data-stu-id="8301f-139">Recall that in the [*Specifying the Title, Meta Tags, and Other HTML Headers in the Master Page*](specifying-the-title-meta-tags-and-other-html-headers-in-the-master-page-cs.md) tutorial we created a custom base page class named `BasePage` that generates the page's title if it is not explicitly set.</span></span> <span data-ttu-id="8301f-140">Accédez à la `Products.aspx` code-behind de la page de classe et de la dériver de `BasePage` (au lieu d’à partir de `System.Web.UI.Page`).</span><span class="sxs-lookup"><span data-stu-id="8301f-140">Go to the `Products.aspx` page's code-behind class and have it derive from `BasePage` (instead of from `System.Web.UI.Page`).</span></span>

<span data-ttu-id="8301f-141">Enfin, mettez à jour le `Web.sitemap` fichier à inclure une entrée pour cette leçon.</span><span class="sxs-lookup"><span data-stu-id="8301f-141">Finally, update the `Web.sitemap` file to include an entry for this lesson.</span></span> <span data-ttu-id="8301f-142">Ajoutez le balisage suivant sous le `<siteMapNode>` pour le contenu à la leçon d’Interaction de la Page maître :</span><span class="sxs-lookup"><span data-stu-id="8301f-142">Add the following markup beneath the `<siteMapNode>` for the Content to Master Page Interaction lesson:</span></span>


[!code-xml[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample1.xml)]

<span data-ttu-id="8301f-143">L’ajout de ce `<siteMapNode>` élément est reflété dans les leçons liste (voir Figure 5).</span><span class="sxs-lookup"><span data-stu-id="8301f-143">The addition of this `<siteMapNode>` element is reflected in the Lessons list (see Figure 5).</span></span>

<span data-ttu-id="8301f-144">Retour à `Products.aspx`.</span><span class="sxs-lookup"><span data-stu-id="8301f-144">Return to `Products.aspx`.</span></span> <span data-ttu-id="8301f-145">Dans le contrôle de contenu pour `MainContent`, ajoutez un contrôle GridView et nommez-le `ProductsGrid`.</span><span class="sxs-lookup"><span data-stu-id="8301f-145">In the Content control for `MainContent`, add a GridView control and name it `ProductsGrid`.</span></span> <span data-ttu-id="8301f-146">Lier le contrôle GridView à un nouveau contrôle SqlDataSource nommé `ProductsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="8301f-146">Bind the GridView to a new SqlDataSource control named `ProductsDataSource`.</span></span>


<span data-ttu-id="8301f-147">[![Lier le contrôle GridView à un nouveau contrôle SqlDataSource](interacting-with-the-content-page-from-the-master-page-cs/_static/image5.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="8301f-147">[![Bind the GridView to a New SqlDataSource Control](interacting-with-the-content-page-from-the-master-page-cs/_static/image5.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image4.png)</span></span>

<span data-ttu-id="8301f-148">**Figure 02**: Lier le contrôle GridView à un nouveau contrôle SqlDataSource ([cliquez pour afficher l’image en taille réelle](interacting-with-the-content-page-from-the-master-page-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="8301f-148">**Figure 02**: Bind the GridView to a New SqlDataSource Control  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image6.png))</span></span>


<span data-ttu-id="8301f-149">Configurer l’Assistant afin qu’il utilise la base de données Northwind.</span><span class="sxs-lookup"><span data-stu-id="8301f-149">Configure the wizard so that it uses the Northwind database.</span></span> <span data-ttu-id="8301f-150">Si vous avez parcouru le didacticiel précédent, vous devez déjà disposer d’une chaîne de connexion nommée `NorthwindConnectionString` dans `Web.config`.</span><span class="sxs-lookup"><span data-stu-id="8301f-150">If you worked through the previous tutorial then you should already have a connection string named `NorthwindConnectionString` in `Web.config`.</span></span> <span data-ttu-id="8301f-151">Choisissez cette chaîne de connexion dans la liste déroulante, comme illustré dans la Figure 3.</span><span class="sxs-lookup"><span data-stu-id="8301f-151">Choose this connection string from the drop-down list, as shown in Figure 3.</span></span>


<span data-ttu-id="8301f-152">[![Configurer SqlDataSource pour utiliser la base de données Northwind](interacting-with-the-content-page-from-the-master-page-cs/_static/image8.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="8301f-152">[![Configure the SqlDataSource to Use the Northwind Database](interacting-with-the-content-page-from-the-master-page-cs/_static/image8.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image7.png)</span></span>

<span data-ttu-id="8301f-153">**Figure 03**: Configurer SqlDataSource pour utiliser la base de données Northwind ([cliquez pour afficher l’image en taille réelle](interacting-with-the-content-page-from-the-master-page-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="8301f-153">**Figure 03**: Configure the SqlDataSource to Use the Northwind Database  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image9.png))</span></span>


<span data-ttu-id="8301f-154">Ensuite, spécifiez le contrôle de source de données `SELECT` instruction en choisissant la table Products dans la liste déroulante et en retournant le `ProductName` et `UnitPrice` colonnes (voir Figure 4).</span><span class="sxs-lookup"><span data-stu-id="8301f-154">Next, specify the data source control's `SELECT` statement by choosing the Products table from the drop-down list and returning the `ProductName` and `UnitPrice` columns (see Figure 4).</span></span> <span data-ttu-id="8301f-155">Cliquez sur Suivant, puis terminez l’Assistant Configurer la Source de données.</span><span class="sxs-lookup"><span data-stu-id="8301f-155">Click Next and then Finish to complete the Configure Data Source wizard.</span></span>


<span data-ttu-id="8301f-156">[![Retourner le ProductName et UnitPrice champs de la Table Products](interacting-with-the-content-page-from-the-master-page-cs/_static/image11.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="8301f-156">[![Return the ProductName and UnitPrice Fields from the Products Table](interacting-with-the-content-page-from-the-master-page-cs/_static/image11.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image10.png)</span></span>

<span data-ttu-id="8301f-157">**Figure 04**: Retourner le `ProductName` et `UnitPrice` champs à partir de la `Products` Table ([cliquez pour afficher l’image en taille réelle](interacting-with-the-content-page-from-the-master-page-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="8301f-157">**Figure 04**: Return the `ProductName` and `UnitPrice` Fields from the `Products` Table  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image12.png))</span></span>


<span data-ttu-id="8301f-158">C’est aussi simple que cela !</span><span class="sxs-lookup"><span data-stu-id="8301f-158">That's all there is to it!</span></span> <span data-ttu-id="8301f-159">Après la fin de l’Assistant Visual Studio ajoute deux BoundFields pour le contrôle GridView à mettre en miroir de deux champs retournés par le contrôle SqlDataSource.</span><span class="sxs-lookup"><span data-stu-id="8301f-159">After completing the wizard Visual Studio adds two BoundFields to the GridView to mirror the two fields returned by the SqlDataSource control.</span></span> <span data-ttu-id="8301f-160">Balisage des contrôles GridView et SqlDataSource suit.</span><span class="sxs-lookup"><span data-stu-id="8301f-160">The GridView and SqlDataSource controls' markup follows.</span></span> <span data-ttu-id="8301f-161">Figure 5 montre les résultats lorsqu’ils sont affichés via un navigateur.</span><span class="sxs-lookup"><span data-stu-id="8301f-161">Figure 5 shows the results when viewed through a browser.</span></span>


[!code-aspx[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample2.aspx)]


<span data-ttu-id="8301f-162">[![Chaque produit et son prix est répertorié dans le contrôle GridView](interacting-with-the-content-page-from-the-master-page-cs/_static/image14.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="8301f-162">[![Each Product and its Price is Listed in the GridView](interacting-with-the-content-page-from-the-master-page-cs/_static/image14.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image13.png)</span></span>

<span data-ttu-id="8301f-163">**Figure 05**: Chaque produit et son prix est répertorié dans le contrôle GridView ([cliquez pour afficher l’image en taille réelle](interacting-with-the-content-page-from-the-master-page-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="8301f-163">**Figure 05**: Each Product and its Price is Listed in the GridView  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image15.png))</span></span>


> [!NOTE]
> <span data-ttu-id="8301f-164">N’hésitez pas à nettoyer l’apparence du contrôle GridView.</span><span class="sxs-lookup"><span data-stu-id="8301f-164">Feel free to clean up the appearance of the GridView.</span></span> <span data-ttu-id="8301f-165">Quelques suggestions incluent la mise en forme de la valeur de UnitPrice affichée sous forme de devise et à l’aide de couleurs d’arrière-plan et polices pour améliorer l’apparence de la grille.</span><span class="sxs-lookup"><span data-stu-id="8301f-165">Some suggestions include formatting the displayed UnitPrice value as a currency and using background colors and fonts to improve the grid's appearance.</span></span> <span data-ttu-id="8301f-166">Pour plus d’informations sur l’affichage et la mise en forme des données dans ASP.NET, reportez-vous à mon [fonctionne avec la série de didacticiels de données](../../data-access/index.md).</span><span class="sxs-lookup"><span data-stu-id="8301f-166">For more information on displaying and formatting data in ASP.NET, refer to my [Working with Data tutorial series](../../data-access/index.md).</span></span>


## <a name="step-2-adding-a-double-prices-button-to-the-master-page"></a><span data-ttu-id="8301f-167">Étape 2 : Ajout d’un bouton de Double les prix à la Page maître</span><span class="sxs-lookup"><span data-stu-id="8301f-167">Step 2: Adding a Double Prices Button to the Master Page</span></span>

<span data-ttu-id="8301f-168">La tâche suivante consiste à ajouter un contrôle de bouton Web pour le contrôleur de page qui, lorsque vous cliquez dessus, sera double le prix de tous les produits dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="8301f-168">Our next task is to add a Button Web control to the master page that, when clicked, will double the price of all products in the database.</span></span> <span data-ttu-id="8301f-169">Ouvrez le `Site.master` page maître et faites glisser un bouton à partir de la boîte à outils vers le concepteur, en le plaçant sous la `RecentProductsDataSource` contrôle SqlDataSource que nous avons ajouté dans le didacticiel précédent.</span><span class="sxs-lookup"><span data-stu-id="8301f-169">Open the `Site.master` master page and drag a Button from the Toolbox onto the Designer, placing it beneath the `RecentProductsDataSource` SqlDataSource control we added in the previous tutorial.</span></span> <span data-ttu-id="8301f-170">Le bouton Définir `ID` propriété `DoublePrice` et son `Text` propriété à « Double les prix des produits ».</span><span class="sxs-lookup"><span data-stu-id="8301f-170">Set the Button's `ID` property to `DoublePrice` and its `Text` property to "Double Product Prices".</span></span>

<span data-ttu-id="8301f-171">Ensuite, ajoutez un contrôle SqlDataSource à la page maître, nommez-le `DoublePricesDataSource`.</span><span class="sxs-lookup"><span data-stu-id="8301f-171">Next, add a SqlDataSource control to the master page, naming it `DoublePricesDataSource`.</span></span> <span data-ttu-id="8301f-172">Cette SqlDataSource sera utilisé pour exécuter la `UPDATE` instruction en double tous les prix.</span><span class="sxs-lookup"><span data-stu-id="8301f-172">This SqlDataSource will be used to execute the `UPDATE` statement to double all prices.</span></span> <span data-ttu-id="8301f-173">Plus précisément, nous devons définir son `ConnectionString` et `UpdateCommand` propriétés à la chaîne de connexion appropriée et `UPDATE` instruction.</span><span class="sxs-lookup"><span data-stu-id="8301f-173">Specifically, we need to set its `ConnectionString` and `UpdateCommand` properties to the appropriate connection string and `UPDATE` statement.</span></span> <span data-ttu-id="8301f-174">Puis nous devons appeler ce contrôle SqlDataSource `Update` méthode lorsque le `DoublePrice` bouton.</span><span class="sxs-lookup"><span data-stu-id="8301f-174">Then we need to call this SqlDataSource control's `Update` method when the `DoublePrice` Button is clicked.</span></span> <span data-ttu-id="8301f-175">Pour définir le `ConnectionString` et `UpdateCommand` propriétés, sélectionnez le contrôle SqlDataSource et passez à la fenêtre Propriétés.</span><span class="sxs-lookup"><span data-stu-id="8301f-175">To set the `ConnectionString` and `UpdateCommand` properties, select the SqlDataSource control and then go to the Properties window.</span></span> <span data-ttu-id="8301f-176">Le `ConnectionString` ces chaînes de connexion déjà stockés dans des listes de propriétés `Web.config` dans une liste déroulante ; choisissez la `NorthwindConnectionString` option comme illustré dans la Figure 6.</span><span class="sxs-lookup"><span data-stu-id="8301f-176">The `ConnectionString` property lists those connection strings already stored in `Web.config` in a drop-down list; choose the `NorthwindConnectionString` option as shown in Figure 6.</span></span>


<span data-ttu-id="8301f-177">[![Configurer pour utiliser le NorthwindConnectionString SqlDataSource](interacting-with-the-content-page-from-the-master-page-cs/_static/image17.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="8301f-177">[![Configure the SqlDataSource to Use the NorthwindConnectionString](interacting-with-the-content-page-from-the-master-page-cs/_static/image17.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image16.png)</span></span>

<span data-ttu-id="8301f-178">**Figure 06**: Configurer SqlDataSource à utiliser le `NorthwindConnectionString` ([cliquez pour afficher l’image en taille réelle](interacting-with-the-content-page-from-the-master-page-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="8301f-178">**Figure 06**: Configure the SqlDataSource to Use the `NorthwindConnectionString` ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image18.png))</span></span>


<span data-ttu-id="8301f-179">Pour définir le `UpdateCommand` propriété, recherchez l’option UpdateQuery dans la fenêtre Propriétés.</span><span class="sxs-lookup"><span data-stu-id="8301f-179">To set the `UpdateCommand` property, locate the UpdateQuery option in the Properties window.</span></span> <span data-ttu-id="8301f-180">Lorsqu’elle est sélectionnée, cette propriété affiche un bouton avec des points de suspension ; Cliquez sur ce bouton pour afficher la boîte de dialogue Éditeur de commandes et paramètre indiquée dans la Figure 7.</span><span class="sxs-lookup"><span data-stu-id="8301f-180">This property, when selected, displays a button with ellipses; click this button to display the Command and Parameter Editor dialog box shown in Figure 7.</span></span> <span data-ttu-id="8301f-181">Tapez la commande suivante `UPDATE` instruction dans la zone de texte de la boîte de dialogue :</span><span class="sxs-lookup"><span data-stu-id="8301f-181">Type the following `UPDATE` statement into the dialog box's textbox:</span></span>


[!code-sql[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample3.sql)]

<span data-ttu-id="8301f-182">Cette instruction, lors de l’exécution, doubler la `UnitPrice` valeur pour chaque enregistrement dans le `Products` table.</span><span class="sxs-lookup"><span data-stu-id="8301f-182">This statement, when executed, will double the `UnitPrice` value for each record in the `Products` table.</span></span>


<span data-ttu-id="8301f-183">[![Définir la propriété UpdateCommand de SqlDataSource](interacting-with-the-content-page-from-the-master-page-cs/_static/image20.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="8301f-183">[![Set SqlDataSource's UpdateCommand Property](interacting-with-the-content-page-from-the-master-page-cs/_static/image20.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image19.png)</span></span>

<span data-ttu-id="8301f-184">**Figure 07**: Définir de SqlDataSource `UpdateCommand` propriété ([cliquez pour afficher l’image en taille réelle](interacting-with-the-content-page-from-the-master-page-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="8301f-184">**Figure 07**: Set SqlDataSource's `UpdateCommand` Property  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image21.png))</span></span>


<span data-ttu-id="8301f-185">Après avoir défini ces propriétés, balisage déclaratif de vos contrôles bouton et SqlDataSource doit ressembler à ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="8301f-185">After setting these properties, your Button and SqlDataSource controls' declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample4.aspx)]

<span data-ttu-id="8301f-186">Ne reste qu’à appeler son `Update` méthode lorsque le `DoublePrice` bouton.</span><span class="sxs-lookup"><span data-stu-id="8301f-186">All that remains is to call its `Update` method when the `DoublePrice` Button is clicked.</span></span> <span data-ttu-id="8301f-187">Créer un `Click` Gestionnaire d’événements pour le `DoublePrice` bouton et ajoutez le code suivant :</span><span class="sxs-lookup"><span data-stu-id="8301f-187">Create a `Click` event handler for the `DoublePrice` Button and add the following code:</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample5.cs)]

<span data-ttu-id="8301f-188">Pour tester cette fonctionnalité, visitez le `~/Admin/Products.aspx` page, nous avons créé à l’étape 1 et cliquez sur le bouton « Les prix des produits Double ».</span><span class="sxs-lookup"><span data-stu-id="8301f-188">To test this functionality, visit the `~/Admin/Products.aspx` page we created in Step 1 and click the "Double Product Prices" button.</span></span> <span data-ttu-id="8301f-189">En cliquant sur le bouton provoque une publication (postback) et exécute la `DoublePrice` du bouton `Click` Gestionnaire d’événements, le fait de doubler les prix de tous les produits.</span><span class="sxs-lookup"><span data-stu-id="8301f-189">Clicking the button causes a postback and executes the `DoublePrice` Button's `Click` event handler, doubling the prices of all products.</span></span> <span data-ttu-id="8301f-190">Puis nouveau rendu de la page et le balisage est retourné et nouveau affiché dans le navigateur.</span><span class="sxs-lookup"><span data-stu-id="8301f-190">The page is then re-rendered and the markup is returned and re-displayed in the browser.</span></span> <span data-ttu-id="8301f-191">Le contrôle GridView dans la page de contenu, répertorie Toutefois, les mêmes prix comme avant la « Double les prix des produits » bouton.</span><span class="sxs-lookup"><span data-stu-id="8301f-191">The GridView in the content page, however, lists the same prices as before the "Double Product Prices" button was clicked.</span></span> <span data-ttu-id="8301f-192">Il s’agit, car les données sont initialement chargées dans le contrôle GridView avaient son état stockée dans l’état d’affichage, donc il n’est pas rechargée sur les publications sauf instruction contraire.</span><span class="sxs-lookup"><span data-stu-id="8301f-192">This is because the data initially loaded in the GridView had its state stored in view state, so it's not reloaded on postbacks unless instructed otherwise.</span></span> <span data-ttu-id="8301f-193">Si vous visitez une page différente, puis revenez à la `~/Admin/Products.aspx` page, vous verrez les prix mis à jour.</span><span class="sxs-lookup"><span data-stu-id="8301f-193">If you visit a different page and then return to the `~/Admin/Products.aspx` page you'll see the updated prices.</span></span>

## <a name="step-3-raising-an-event-when-the-prices-are-doubled"></a><span data-ttu-id="8301f-194">Étape 3 : Déclencher un événement lorsque le prix sont doublées.</span><span class="sxs-lookup"><span data-stu-id="8301f-194">Step 3: Raising an Event When the Prices are Doubled</span></span>

<span data-ttu-id="8301f-195">Étant donné que le contrôle GridView dans le `~/Admin/Products.aspx` page ne reflète pas immédiatement le doublement des prix, un utilisateur peut naturellement pensez qu’ils s’est pas cliquer sur le bouton « Les prix des produits Double », ou qu’il n’a pas fonctionné.</span><span class="sxs-lookup"><span data-stu-id="8301f-195">Because the GridView in the `~/Admin/Products.aspx` page does not immediately reflect the price doubling, a user may understandably think that they did not click the "Double Product Prices" button, or that it didn't work.</span></span> <span data-ttu-id="8301f-196">Ils peuvent essayer d’en cliquant sur le bouton que d’autres fois, le fait de doubler les prix encore et encore.</span><span class="sxs-lookup"><span data-stu-id="8301f-196">They may try clicking the button a few more times, doubling the prices again and again.</span></span> <span data-ttu-id="8301f-197">Pour corriger cela nous devons disposer de la grille dans le contenu page Afficher les nouveaux tarifs dès qu’ils sont doublées.</span><span class="sxs-lookup"><span data-stu-id="8301f-197">To fix this we need to have the grid in the content page display the new prices immediately after they are doubled.</span></span>

<span data-ttu-id="8301f-198">Comme indiqué précédemment dans ce didacticiel, nous devons déclencher un événement dans la page maître chaque fois que l’utilisateur clique sur le `DoublePrice` bouton.</span><span class="sxs-lookup"><span data-stu-id="8301f-198">As discussed earlier in this tutorial, we need to raise an event in the master page whenever the user clicks the `DoublePrice` Button.</span></span> <span data-ttu-id="8301f-199">Un événement est un moyen d’une classe (un éditeur d’événements) à notifier à un autre un ensemble d’autres classes que quelque chose d’intéressant s’est produite (les abonnés aux événements).</span><span class="sxs-lookup"><span data-stu-id="8301f-199">An event is a way for one class (an event publisher) to notify another a set of other classes (the event subscribers) that something interesting has occurred.</span></span> <span data-ttu-id="8301f-200">Dans cet exemple, la page maître est l’éditeur d’événements ; les pages de contenu qui s’intéressent à lorsque le `DoublePrice` bouton sont les abonnés.</span><span class="sxs-lookup"><span data-stu-id="8301f-200">In this example, the master page is the event publisher; those content pages that care about when the `DoublePrice` Button is clicked are the subscribers.</span></span>

<span data-ttu-id="8301f-201">Une classe s’abonne à un événement en créant un *Gestionnaire d’événements*, qui est une méthode qui est exécutée en réponse à l’événement déclenché.</span><span class="sxs-lookup"><span data-stu-id="8301f-201">A class subscribes to an event by creating an *event handler*, which is a method that is executed in response to the event being raised.</span></span> <span data-ttu-id="8301f-202">Le serveur de publication définit les événements qu’il déclenche en définissant un *délégué d’événement*.</span><span class="sxs-lookup"><span data-stu-id="8301f-202">The publisher defines the events he raises by defining an *event delegate*.</span></span> <span data-ttu-id="8301f-203">Le délégué d’événement spécifie les paramètres d’entrée, le Gestionnaire d’événements doit accepter.</span><span class="sxs-lookup"><span data-stu-id="8301f-203">The event delegate specifies what input parameters the event handler must accept.</span></span> <span data-ttu-id="8301f-204">Dans le .NET Framework, les délégués d’événements ne pas retourner n’importe quelle valeur et accepter deux paramètres d’entrée :</span><span class="sxs-lookup"><span data-stu-id="8301f-204">In the .NET Framework, event delegates do not return any value and accept two input parameters:</span></span>

- <span data-ttu-id="8301f-205">Un `Object`, qui identifie la source d’événements, et</span><span class="sxs-lookup"><span data-stu-id="8301f-205">An `Object`, which identifies the event source, and</span></span>
- <span data-ttu-id="8301f-206">Une classe dérivée à partir de `System.EventArgs`</span><span class="sxs-lookup"><span data-stu-id="8301f-206">A class derived from `System.EventArgs`</span></span>

<span data-ttu-id="8301f-207">Le deuxième paramètre passé à un gestionnaire d’événements peut inclure des informations supplémentaires sur l’événement.</span><span class="sxs-lookup"><span data-stu-id="8301f-207">The second parameter passed to an event handler can include additional information about the event.</span></span> <span data-ttu-id="8301f-208">Alors que la base de `EventArgs` classe ne passe pas le long de toutes les informations, le .NET Framework inclut un nombre de classes qui étendent `EventArgs` et englobent des propriétés supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="8301f-208">While the base `EventArgs` class does not pass along any information, the .NET Framework includes a number of classes that extend `EventArgs` and encompass additional properties.</span></span> <span data-ttu-id="8301f-209">Par exemple, un `CommandEventArgs` instance est passée aux gestionnaires d’événements qui répondent à la `Command` événement et inclut deux propriétés d’information : `CommandArgument` et `CommandName`.</span><span class="sxs-lookup"><span data-stu-id="8301f-209">For example, a `CommandEventArgs` instance is passed to event handlers that respond to the `Command` event, and includes two informational properties: `CommandArgument` and `CommandName`.</span></span>

> [!NOTE]
> <span data-ttu-id="8301f-210">Pour plus d’informations sur la création, le déclenchement et la gestion des événements, consultez [événements et délégués](https://msdn.microsoft.com/library/17sde2xt.aspx) et [délégués d’événements en anglais Simple](http://www.codeproject.com/KB/cs/eventdelegates.aspx).</span><span class="sxs-lookup"><span data-stu-id="8301f-210">For more information on creating, raising, and handling events, see [Events and Delegates](https://msdn.microsoft.com/library/17sde2xt.aspx) and [Event Delegates in Simple English](http://www.codeproject.com/KB/cs/eventdelegates.aspx).</span></span>


<span data-ttu-id="8301f-211">Pour définir un événement utilisent la syntaxe suivante :</span><span class="sxs-lookup"><span data-stu-id="8301f-211">To define an event use the following syntax:</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample6.cs)]

<span data-ttu-id="8301f-212">Étant donné que nous avons besoin uniquement à la page de contenu d’alerte lorsque l’utilisateur a cliqué sur le `DoublePrice` bouton et n’avez pas besoin de transmettre à d’autres informations supplémentaires, nous pouvons utiliser le délégué d’événement `EventHandler`, qui définit un gestionnaire d’événements qui accepte en tant que son deuxième un objet de type de paramètre `System.EventArgs`.</span><span class="sxs-lookup"><span data-stu-id="8301f-212">Because we only need to alert the content page when the user has clicked the `DoublePrice` Button and do not need to pass along any other additional information, we can use the event delegate `EventHandler`, which defines an event handler that accepts as its second parameter an object of type `System.EventArgs`.</span></span> <span data-ttu-id="8301f-213">Pour créer l’événement dans la page maître, ajoutez la ligne de code suivante à la classe de code-behind de la page maître :</span><span class="sxs-lookup"><span data-stu-id="8301f-213">To create the event in the master page, add the following line of code to the master page's code-behind class:</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample7.cs)]

<span data-ttu-id="8301f-214">Le code ci-dessus ajoute un événement public à la page maître nommée `PricesDoubled`.</span><span class="sxs-lookup"><span data-stu-id="8301f-214">The above code adds a public event to the master page named `PricesDoubled`.</span></span> <span data-ttu-id="8301f-215">Nous devons maintenant déclencher cet événement une fois que les prix ont été doublés.</span><span class="sxs-lookup"><span data-stu-id="8301f-215">We now need to raise this event after the prices have been doubled.</span></span> <span data-ttu-id="8301f-216">Pour déclencher un événement utilisent la syntaxe suivante :</span><span class="sxs-lookup"><span data-stu-id="8301f-216">To raise an event use the following syntax:</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample8.cs)]

<span data-ttu-id="8301f-217">Où *expéditeur* et *eventArgs* sont les valeurs que vous souhaitez passer au gestionnaire d’événements de l’abonné.</span><span class="sxs-lookup"><span data-stu-id="8301f-217">Where *sender* and *eventArgs* are the values you want to pass to the subscriber's event handler.</span></span>

<span data-ttu-id="8301f-218">Mise à jour le `DoublePrice` `Click` Gestionnaire d’événements par le code suivant :</span><span class="sxs-lookup"><span data-stu-id="8301f-218">Update the `DoublePrice` `Click` event handler with the following code:</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample9.cs)]

<span data-ttu-id="8301f-219">Comme auparavant, le `Click` Gestionnaire d’événements démarre en appelant le `DoublePricesDataSource` du contrôle SqlDataSource `Update` méthode à doubler les prix de tous les produits.</span><span class="sxs-lookup"><span data-stu-id="8301f-219">As before, the `Click` event handler starts by calling the `DoublePricesDataSource` SqlDataSource control's `Update` method to double the prices of all products.</span></span> <span data-ttu-id="8301f-220">Après qu’il n’y a deux ajouts au gestionnaire d’événements.</span><span class="sxs-lookup"><span data-stu-id="8301f-220">Following that there are two additions to the event handler.</span></span> <span data-ttu-id="8301f-221">Tout d’abord, le `RecentProducts` les données du contrôle GridView sont actualisées.</span><span class="sxs-lookup"><span data-stu-id="8301f-221">First, the `RecentProducts` GridView's data is refreshed.</span></span> <span data-ttu-id="8301f-222">Ce GridView a été ajouté à la page maître dans le didacticiel précédent et affiche les cinq produits les plus récemment ajouté.</span><span class="sxs-lookup"><span data-stu-id="8301f-222">This GridView was added to the master page in the preceding tutorial and displays the five most recently-added products.</span></span> <span data-ttu-id="8301f-223">Nous devons actualiser cette grille pour qu’il affiche les prix juste à double pour ces cinq produits.</span><span class="sxs-lookup"><span data-stu-id="8301f-223">We need to refresh this grid so that it shows the just-doubled prices for these five products.</span></span> <span data-ttu-id="8301f-224">Ensuite, le `PricesDoubled` événement est déclenché.</span><span class="sxs-lookup"><span data-stu-id="8301f-224">Following that, the `PricesDoubled` event is raised.</span></span> <span data-ttu-id="8301f-225">Une référence à la page maître proprement dit (`this`) est envoyé au gestionnaire d’événements en tant que la source d’événements et les vide `EventArgs` objet est envoyé en tant que les arguments d’événement.</span><span class="sxs-lookup"><span data-stu-id="8301f-225">A reference to the master page itself (`this`) is sent to the event handler as the event source and an empty `EventArgs` object is sent as the event arguments.</span></span>

## <a name="step-4-handling-the-event-in-the-content-page"></a><span data-ttu-id="8301f-226">Étape 4 : Gérer l’événement dans la Page de contenu</span><span class="sxs-lookup"><span data-stu-id="8301f-226">Step 4: Handling the Event in the Content Page</span></span>

<span data-ttu-id="8301f-227">À ce stade la page maître déclenche son `PricesDoubled` événement chaque fois que le `DoublePrice` contrôle bouton est activé.</span><span class="sxs-lookup"><span data-stu-id="8301f-227">At this point the master page raises its `PricesDoubled` event whenever the `DoublePrice` Button control is clicked.</span></span> <span data-ttu-id="8301f-228">Toutefois, il s’agit uniquement démontrer : nous avons besoin gérer l’événement dans l’abonné.</span><span class="sxs-lookup"><span data-stu-id="8301f-228">However, this is only half the battle - we still need to handle the event in the subscriber.</span></span> <span data-ttu-id="8301f-229">Cela implique deux étapes : création du Gestionnaire d’événements et l’ajout de code de câblage d’événement afin que lorsque l’événement est déclenché le Gestionnaire d’événements soit exécuté.</span><span class="sxs-lookup"><span data-stu-id="8301f-229">This involves two steps: creating the event handler and adding event wiring code so that when the event is raised the event handler is executed.</span></span>

<span data-ttu-id="8301f-230">Commencez par créer un gestionnaire d’événements nommé `Master_PricesDoubled`.</span><span class="sxs-lookup"><span data-stu-id="8301f-230">Start by creating an event handler named `Master_PricesDoubled`.</span></span> <span data-ttu-id="8301f-231">En raison de la façon dont nous avons défini le `PricesDoubled` événement dans la page maître paramètres d’entrée deux du Gestionnaire d’événements doivent être de types `Object` et `EventArgs`, respectivement.</span><span class="sxs-lookup"><span data-stu-id="8301f-231">Because of how we defined the `PricesDoubled` event in the master page the event handler's two input parameters must be of types `Object` and `EventArgs`, respectively.</span></span> <span data-ttu-id="8301f-232">Dans l’appel de gestionnaire d’événements le `ProductsGrid` contrôle GridView `DataBind` méthode pour relier les données à la grille.</span><span class="sxs-lookup"><span data-stu-id="8301f-232">In the event handler call the `ProductsGrid` GridView's `DataBind` method to rebind the data to the grid.</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample10.cs)]

<span data-ttu-id="8301f-233">Le code du Gestionnaire d’événements est terminé, mais il nous faut encore au fil de la page maître `PricesDoubled` événement à ce gestionnaire d’événements.</span><span class="sxs-lookup"><span data-stu-id="8301f-233">The code for the event handler is complete but we've yet to wire the master page's `PricesDoubled` event to this event handler.</span></span> <span data-ttu-id="8301f-234">L’abonné associe un événement à un gestionnaire d’événements par le biais de la syntaxe suivante :</span><span class="sxs-lookup"><span data-stu-id="8301f-234">The subscriber wires an event to an event handler via the following syntax:</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample11.cs)]

<span data-ttu-id="8301f-235">*serveur de publication* est une référence à l’objet qui offre l’événement *eventName*, et *Nom_méthode* est le nom du Gestionnaire d’événements défini dans l’abonné qui a une signature correspondant à le *eventDelegate*.</span><span class="sxs-lookup"><span data-stu-id="8301f-235">*publisher* is a reference to the object that offers the event *eventName*, and *methodName* is the name of the event handler defined in the subscriber that has a signature corresponding to the *eventDelegate*.</span></span> <span data-ttu-id="8301f-236">En d’autres termes, si le délégué de l’événement est `EventHandler`, puis *Nom_méthode* doit être le nom d’une méthode dans l’abonné qui ne retourne pas de valeur et accepte deux paramètres de types d’entrée `Object` et `EventArgs`, respectivement.</span><span class="sxs-lookup"><span data-stu-id="8301f-236">In other words, if the event delegate is `EventHandler`, then *methodName* must be the name of a method in the subscriber that does not return a value and accepts two input parameters of types `Object` and `EventArgs`, respectively.</span></span>

<span data-ttu-id="8301f-237">Ce code de câblage d’événement doit être exécuté sur la première visite de page et les publications suivantes et doit se produire à un point dans le cycle de vie de page qui précède lorsque l’événement peut être déclenché.</span><span class="sxs-lookup"><span data-stu-id="8301f-237">This event wiring code must be executed on the first page visit and subsequent postbacks and should occur at a point in the page lifecycle that precedes when the event may be raised.</span></span> <span data-ttu-id="8301f-238">Un bon moment pour ajouter du code de câblage d’événement est dans la phase de PreInit, ce qui se produit très tôt dans le cycle de vie de page.</span><span class="sxs-lookup"><span data-stu-id="8301f-238">A good time to add event wiring code is in the PreInit stage, which occurs very early in the page lifecycle.</span></span>

<span data-ttu-id="8301f-239">Ouvrez `~/Admin/Products.aspx` et créer un `Page_PreInit` Gestionnaire d’événements :</span><span class="sxs-lookup"><span data-stu-id="8301f-239">Open `~/Admin/Products.aspx` and create a `Page_PreInit` event handler:</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample12.cs)]

<span data-ttu-id="8301f-240">Pour pouvoir exécuter ce code de câblage nous avons besoin d’une référence de programmation à la page maître à partir de la page de contenu.</span><span class="sxs-lookup"><span data-stu-id="8301f-240">In order to complete this wiring code we need a programmatic reference to the master page from the content page.</span></span> <span data-ttu-id="8301f-241">Comme indiqué dans le didacticiel précédent, il existe deux manières de procéder :</span><span class="sxs-lookup"><span data-stu-id="8301f-241">As noted in the previous tutorial, there are two ways to do this:</span></span>

- <span data-ttu-id="8301f-242">En castant le faiblement typé `Page.Master` propriété vers le type de page maître approprié, ou</span><span class="sxs-lookup"><span data-stu-id="8301f-242">By casting the loosely-typed `Page.Master` property to the appropriate master page type, or</span></span>
- <span data-ttu-id="8301f-243">En ajoutant un `@MasterType` directive dans le `.aspx` page, puis en utilisant le fortement typée `Master` propriété.</span><span class="sxs-lookup"><span data-stu-id="8301f-243">By adding a `@MasterType` directive in the `.aspx` page and then using the strongly-typed `Master` property.</span></span>

<span data-ttu-id="8301f-244">Nous allons utiliser cette dernière approche.</span><span class="sxs-lookup"><span data-stu-id="8301f-244">Let's use the latter approach.</span></span> <span data-ttu-id="8301f-245">Ajoutez le code suivant `@MasterType` directive au début du balisage déclaratif de la page :</span><span class="sxs-lookup"><span data-stu-id="8301f-245">Add the following `@MasterType` directive to the top of the page's declarative markup:</span></span>


[!code-aspx[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample13.aspx)]

<span data-ttu-id="8301f-246">Puis ajoutez le code de câblage d’événement suivant dans le `Page_PreInit` Gestionnaire d’événements :</span><span class="sxs-lookup"><span data-stu-id="8301f-246">Then add the following event wiring code in the `Page_PreInit` event handler:</span></span>


[!code-csharp[Main](interacting-with-the-content-page-from-the-master-page-cs/samples/sample14.cs)]

<span data-ttu-id="8301f-247">Avec ce code en place, le contrôle GridView dans la page de contenu est actualisé chaque fois que le `DoublePrice` bouton.</span><span class="sxs-lookup"><span data-stu-id="8301f-247">With this code in place, the GridView in the content page is refreshed whenever the `DoublePrice` Button is clicked.</span></span>

<span data-ttu-id="8301f-248">Les figures 8 et 9 illustrent ce comportement.</span><span class="sxs-lookup"><span data-stu-id="8301f-248">Figures 8 and 9 illustrate this behavior.</span></span> <span data-ttu-id="8301f-249">La figure 8 illustre la page lors de la première visite.</span><span class="sxs-lookup"><span data-stu-id="8301f-249">Figure 8 shows the page when first visited.</span></span> <span data-ttu-id="8301f-250">Notez que le prix des valeurs à la fois dans le `RecentProducts` GridView (dans la colonne de gauche de la page maître) et le `ProductsGrid` GridView (dans la page de contenu).</span><span class="sxs-lookup"><span data-stu-id="8301f-250">Note that price values in both the `RecentProducts` GridView (in the left column of the master page) and the `ProductsGrid` GridView (in the content page).</span></span> <span data-ttu-id="8301f-251">Montre la figure 9 le même écran immédiatement après le `DoublePrice` a cliqué.</span><span class="sxs-lookup"><span data-stu-id="8301f-251">Figure 9 shows the same screen immediately after the `DoublePrice` Button has been clicked.</span></span> <span data-ttu-id="8301f-252">Comme vous pouvez le voir, les nouveaux prix sont répercutées instantanément dans les deux contrôles GridView.</span><span class="sxs-lookup"><span data-stu-id="8301f-252">As you can see, the new prices are instantaneously reflected in both GridViews.</span></span>


<span data-ttu-id="8301f-253">[![Les valeurs de prix Initial](interacting-with-the-content-page-from-the-master-page-cs/_static/image23.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="8301f-253">[![The Initial Price Values](interacting-with-the-content-page-from-the-master-page-cs/_static/image23.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image22.png)</span></span>

<span data-ttu-id="8301f-254">**Figure 08**: Les valeurs initiales de prix ([cliquez pour afficher l’image en taille réelle](interacting-with-the-content-page-from-the-master-page-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="8301f-254">**Figure 08**: The Initial Price Values  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image24.png))</span></span>


<span data-ttu-id="8301f-255">[![Les prix Just-Doubled s’affichent dans les contrôles GridView](interacting-with-the-content-page-from-the-master-page-cs/_static/image26.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="8301f-255">[![The Just-Doubled Prices are Displayed in the GridViews](interacting-with-the-content-page-from-the-master-page-cs/_static/image26.png)](interacting-with-the-content-page-from-the-master-page-cs/_static/image25.png)</span></span>

<span data-ttu-id="8301f-256">**Figure 09**: Les prix Just-Doubled s’affichent dans les contrôles GridView ([cliquez pour afficher l’image en taille réelle](interacting-with-the-content-page-from-the-master-page-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="8301f-256">**Figure 09**: The Just-Doubled Prices are Displayed in the GridViews  ([Click to view full-size image](interacting-with-the-content-page-from-the-master-page-cs/_static/image27.png))</span></span>


## <a name="summary"></a><span data-ttu-id="8301f-257">Récapitulatif</span><span class="sxs-lookup"><span data-stu-id="8301f-257">Summary</span></span>

<span data-ttu-id="8301f-258">Dans l’idéal, une page maître et ses pages de contenu sont complètement séparées les unes des autres et ne nécessitent aucun niveau d’interaction.</span><span class="sxs-lookup"><span data-stu-id="8301f-258">Ideally, a master page and its content pages are completely separate from one another and require no level of interaction.</span></span> <span data-ttu-id="8301f-259">Toutefois, si vous avez une page maître ou la page de contenu qui affiche les données qui peuvent être modifiées dans la page maître ou la page de contenu, puis vous devrez peut-être d’avoir à la page maître de la page de contenu (ou inversement a) d’alerte lorsque les données sont modifiées afin que l’affichage peut être mis à jour.</span><span class="sxs-lookup"><span data-stu-id="8301f-259">However, if you have a master page or content page that displays data that can be modified from the master page or content page, then you may need to have the master page alert the content page (or vice-a-versa) when data is modified so that the display can be updated.</span></span> <span data-ttu-id="8301f-260">Dans le didacticiel précédent, nous avons vu comment une page de contenu interagir par programmation avec sa page maître ; Dans ce didacticiel, nous avons vu comment faire en sorte d’une page maître d’initier l’interaction.</span><span class="sxs-lookup"><span data-stu-id="8301f-260">In the preceding tutorial we saw how to have a content page programmatically interact with its master page; in this tutorial we looked at how to have a master page initiate the interaction.</span></span>

<span data-ttu-id="8301f-261">Tandis que les interactions par programme entre un contenu et de la page maître peuvent provenir de contenu ou la page maître, le modèle d’interaction utilisé dépend de l’origine.</span><span class="sxs-lookup"><span data-stu-id="8301f-261">While programmatic interaction between a content and master page can originate from either the content or master page, the interaction pattern used depends on the origination.</span></span> <span data-ttu-id="8301f-262">Les différences sont dû au fait qu’une page de contenu a une seule page maître, mais une page maître peut avoir plusieurs pages de contenu.</span><span class="sxs-lookup"><span data-stu-id="8301f-262">The differences are due to the fact that a content page has a single master page, but a master page can have many different content pages.</span></span> <span data-ttu-id="8301f-263">Au lieu d’avoir une page maître interagissent directement avec une page de contenu, une meilleure approche est d’avoir à la page maître de déclencher un événement pour signaler qu’une action a eu lieu.</span><span class="sxs-lookup"><span data-stu-id="8301f-263">Rather than having a master page directly interact with a content page, a better approach is to have the master page raise an event to signal that some action has taken place.</span></span> <span data-ttu-id="8301f-264">Ces pages de contenu qui s’intéressent à l’action peuvent créer des gestionnaires d’événements.</span><span class="sxs-lookup"><span data-stu-id="8301f-264">Those content pages that care about the action can create event handlers.</span></span>

<span data-ttu-id="8301f-265">Bonne programmation !</span><span class="sxs-lookup"><span data-stu-id="8301f-265">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="8301f-266">informations supplémentaires</span><span class="sxs-lookup"><span data-stu-id="8301f-266">Further Reading</span></span>

<span data-ttu-id="8301f-267">Pour plus d’informations sur les sujets abordés dans ce didacticiel, consultez les ressources suivantes :</span><span class="sxs-lookup"><span data-stu-id="8301f-267">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="8301f-268">L’accès et la mise à jour des données dans ASP.NET</span><span class="sxs-lookup"><span data-stu-id="8301f-268">Accessing and Updating Data in ASP.NET</span></span>](http://aspnet.4guysfromrolla.com/articles/011106-1.aspx)
- [<span data-ttu-id="8301f-269">Événements et délégués</span><span class="sxs-lookup"><span data-stu-id="8301f-269">Events and Delegates</span></span>](https://msdn.microsoft.com/library/17sde2xt.aspx)
- [<span data-ttu-id="8301f-270">Informations de transmission entre le contenu et les Pages maîtres</span><span class="sxs-lookup"><span data-stu-id="8301f-270">Passing Information Between Content and Master Pages</span></span>](http://aspnet.4guysfromrolla.com/articles/013107-1.aspx)
- [<span data-ttu-id="8301f-271">Utilisation des données dans les didacticiels ASP.NET</span><span class="sxs-lookup"><span data-stu-id="8301f-271">Working with Data in ASP.NET Tutorials</span></span>](../../data-access/index.md)

### <a name="about-the-author"></a><span data-ttu-id="8301f-272">À propos de l’auteur</span><span class="sxs-lookup"><span data-stu-id="8301f-272">About the Author</span></span>

<span data-ttu-id="8301f-273">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), auteur de plusieurs livres de sur ASP/ASP.NET et fondateur de 4GuysFromRolla.com, travaille avec les technologies Web Microsoft depuis 1998.</span><span class="sxs-lookup"><span data-stu-id="8301f-273">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="8301f-274">Scott fonctionne comme un consultant indépendant, formateur et writer.</span><span class="sxs-lookup"><span data-stu-id="8301f-274">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="8301f-275">Son dernier livre s’intitule [ *Sams Teach vous-même ASP.NET 3.5 des dernières 24 heures*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="8301f-275">His latest book is [*Sams Teach Yourself ASP.NET 3.5 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco).</span></span> <span data-ttu-id="8301f-276">Scott peut être atteint à [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) ou via son blog à [http://ScottOnWriting.NET](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="8301f-276">Scott can be reached at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="8301f-277">Remerciements</span><span class="sxs-lookup"><span data-stu-id="8301f-277">Special Thanks To</span></span>

<span data-ttu-id="8301f-278">Cette série de didacticiels a été révisée par plusieurs réviseurs utiles.</span><span class="sxs-lookup"><span data-stu-id="8301f-278">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="8301f-279">Entraîner un réviseur pour ce didacticiel a été Suchi Banerjee.</span><span class="sxs-lookup"><span data-stu-id="8301f-279">Lead reviewer for this tutorial was Suchi Banerjee.</span></span> <span data-ttu-id="8301f-280">Qui souhaitent consulter mes prochains articles MSDN ?</span><span class="sxs-lookup"><span data-stu-id="8301f-280">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="8301f-281">Dans ce cas, envoyez-moi une ligne à [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="8301f-281">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="8301f-282">[Précédent](interacting-with-the-master-page-from-the-content-page-cs.md)
> [Suivant](master-pages-and-asp-net-ajax-cs.md)</span><span class="sxs-lookup"><span data-stu-id="8301f-282">[Previous](interacting-with-the-master-page-from-the-content-page-cs.md)
[Next](master-pages-and-asp-net-ajax-cs.md)</span></span>

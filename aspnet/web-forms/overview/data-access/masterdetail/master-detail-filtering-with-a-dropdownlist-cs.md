---
uid: web-forms/overview/data-access/masterdetail/master-detail-filtering-with-a-dropdownlist-cs
title: Filtrage maître/détail avec un contrôle DropDownListC#() | Microsoft Docs
author: rick-anderson
description: Dans ce didacticiel, nous allons voir comment afficher les enregistrements maîtres dans un contrôle DropDownList et les détails de l’élément de liste sélectionné dans un GridView.
ms.author: riande
ms.date: 03/31/2010
ms.assetid: 53e659cc-eefb-40c1-a1dc-559481c99443
msc.legacyurl: /web-forms/overview/data-access/masterdetail/master-detail-filtering-with-a-dropdownlist-cs
msc.type: authoredcontent
ms.openlocfilehash: 3ec549f9da7a2b3a021e77827f0039e6ae60b5c5
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/28/2019
ms.locfileid: "74616073"
---
# <a name="masterdetail-filtering-with-a-dropdownlist-c"></a><span data-ttu-id="8849d-103">Filtrage maître/détail avec une DropDownList (C#)</span><span class="sxs-lookup"><span data-stu-id="8849d-103">Master/Detail Filtering With a DropDownList (C#)</span></span>

<span data-ttu-id="8849d-104">par [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="8849d-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="8849d-105">[Télécharger l’exemple d’application](https://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_7_CS.exe) ou [Télécharger le PDF](master-detail-filtering-with-a-dropdownlist-cs/_static/datatutorial07cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="8849d-105">[Download Sample App](https://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_7_CS.exe) or [Download PDF](master-detail-filtering-with-a-dropdownlist-cs/_static/datatutorial07cs1.pdf)</span></span>

> <span data-ttu-id="8849d-106">Dans ce didacticiel, nous allons voir comment afficher les enregistrements maîtres dans un contrôle DropDownList et les détails de l’élément de liste sélectionné dans un GridView.</span><span class="sxs-lookup"><span data-stu-id="8849d-106">In this tutorial we'll see how to display the master records in a DropDownList control and the details of the selected list item in a GridView.</span></span>

## <a name="introduction"></a><span data-ttu-id="8849d-107">Présentation</span><span class="sxs-lookup"><span data-stu-id="8849d-107">Introduction</span></span>

<span data-ttu-id="8849d-108">Un type de rapport commun est le *rapport maître/détail*dans lequel le rapport commence en présentant un ensemble d’enregistrements « maîtres ».</span><span class="sxs-lookup"><span data-stu-id="8849d-108">A common type of report is the *master/detail report*, in which the report begins by showing some set of "master" records.</span></span> <span data-ttu-id="8849d-109">L’utilisateur peut ensuite accéder à l’un des enregistrements principaux, ce qui affiche les détails de l’enregistrement maître.</span><span class="sxs-lookup"><span data-stu-id="8849d-109">The user can then drill down into one of the master records, thereby viewing that master record's "details."</span></span> <span data-ttu-id="8849d-110">Les rapports maître/détail constituent un choix idéal pour visualiser les relations un-à-plusieurs, comme un rapport affichant toutes les catégories, puis permettant à un utilisateur de sélectionner une catégorie particulière et d’afficher ses produits associés.</span><span class="sxs-lookup"><span data-stu-id="8849d-110">Master/detail reports are an ideal choice for visualizing one-to-many relationships, such as a report showing all of the categories and then allowing a user to select a particular category and display its associated products.</span></span> <span data-ttu-id="8849d-111">En outre, les rapports maître/détail sont utiles pour afficher des informations détaillées à partir de tables « larges » (celles qui comportent un grand nombre de colonnes).</span><span class="sxs-lookup"><span data-stu-id="8849d-111">Additionally, master/detail reports are useful for displaying detailed information from particularly "wide" tables (ones that have a lot of columns).</span></span> <span data-ttu-id="8849d-112">Par exemple, le niveau « maître » d’un rapport maître/détail peut afficher uniquement le nom de produit et le prix unitaire des produits dans la base de données, et l’exploration d’un produit particulier affiche les champs de produit supplémentaires (catégorie, fournisseur, quantité par unité, etc.).</span><span class="sxs-lookup"><span data-stu-id="8849d-112">For example, the "master" level of a master/detail report might show just the product name and unit price of the products in the database, and drilling down into a particular product would show the additional product fields (category, supplier, quantity per unit, and so on).</span></span>

<span data-ttu-id="8849d-113">Il existe de nombreuses façons d’implémenter un rapport maître/détail.</span><span class="sxs-lookup"><span data-stu-id="8849d-113">There are many ways with which a master/detail report can be implemented.</span></span> <span data-ttu-id="8849d-114">Sur ce point et les trois didacticiels suivants, nous allons examiner un large éventail de rapports maître/détail.</span><span class="sxs-lookup"><span data-stu-id="8849d-114">Over this and the next three tutorials we'll look at a variety of master/detail reports.</span></span> <span data-ttu-id="8849d-115">Dans ce didacticiel, nous allons voir comment afficher les enregistrements maîtres dans un [contrôle DropDownList](https://msdn.microsoft.com/library/dtx91y0z.aspx) et les détails de l’élément de liste sélectionné dans un GridView.</span><span class="sxs-lookup"><span data-stu-id="8849d-115">In this tutorial we'll see how to display the master records in a [DropDownList control](https://msdn.microsoft.com/library/dtx91y0z.aspx) and the details of the selected list item in a GridView.</span></span> <span data-ttu-id="8849d-116">En particulier, le rapport maître/détail de ce didacticiel répertorie les informations sur les catégories et les produits.</span><span class="sxs-lookup"><span data-stu-id="8849d-116">In particular, this tutorial's master/detail report will list category and product information.</span></span>

## <a name="step-1-displaying-the-categories-in-a-dropdownlist"></a><span data-ttu-id="8849d-117">Étape 1 : Affichage des catégories dans un DropDownList</span><span class="sxs-lookup"><span data-stu-id="8849d-117">Step 1: Displaying the Categories in a DropDownList</span></span>

<span data-ttu-id="8849d-118">Notre rapport maître/détail répertorie les catégories dans un contrôle DropDownList, avec les produits de l’élément de liste sélectionnés affichés plus en détail dans la page d’un GridView.</span><span class="sxs-lookup"><span data-stu-id="8849d-118">Our master/detail report will list the categories in a DropDownList, with the selected list item's products displayed further down in the page in a GridView.</span></span> <span data-ttu-id="8849d-119">La première tâche devant nous, est alors de faire en sorte que les catégories s’affichent dans un DropDownList.</span><span class="sxs-lookup"><span data-stu-id="8849d-119">The first task ahead of us, then, is to have the categories displayed in a DropDownList.</span></span> <span data-ttu-id="8849d-120">Ouvrez la page `FilterByDropDownList.aspx` dans le dossier `Filtering`, faites glisser un contrôle DropDownList de la boîte à outils vers le concepteur de la page, puis définissez sa propriété `ID` sur `Categories`.</span><span class="sxs-lookup"><span data-stu-id="8849d-120">Open the `FilterByDropDownList.aspx` page in the `Filtering` folder, drag on a DropDownList from the Toolbox onto the page's designer, and set its `ID` property to `Categories`.</span></span> <span data-ttu-id="8849d-121">Ensuite, cliquez sur le lien choisir la source de données à partir de la balise active de DropDownList.</span><span class="sxs-lookup"><span data-stu-id="8849d-121">Next, click on the Choose Data Source link from the DropDownList's smart tag.</span></span> <span data-ttu-id="8849d-122">L’Assistant Configuration de source de données s’affiche.</span><span class="sxs-lookup"><span data-stu-id="8849d-122">This will display the Data Source Configuration wizard.</span></span>

<span data-ttu-id="8849d-123">[![spécifier la source de données de DropDownList](master-detail-filtering-with-a-dropdownlist-cs/_static/image2.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="8849d-123">[![Specify the DropDownList's Data Source](master-detail-filtering-with-a-dropdownlist-cs/_static/image2.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image1.png)</span></span>

<span data-ttu-id="8849d-124">**Figure 1**: Spécifier la source de données de DropDownList ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-a-dropdownlist-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="8849d-124">**Figure 1**: Specify the DropDownList's Data Source ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image3.png))</span></span>

<span data-ttu-id="8849d-125">Choisissez d’ajouter un nouvel ObjectDataSource nommé `CategoriesDataSource` qui appelle la méthode `GetCategories()` de la classe `CategoriesBLL`.</span><span class="sxs-lookup"><span data-stu-id="8849d-125">Choose to add a new ObjectDataSource named `CategoriesDataSource` that invokes the `CategoriesBLL` class's `GetCategories()` method.</span></span>

<span data-ttu-id="8849d-126">[![ajouter un nouvel ObjectDataSource nommé CategoriesDataSource](master-detail-filtering-with-a-dropdownlist-cs/_static/image5.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="8849d-126">[![Add a New ObjectDataSource Named CategoriesDataSource](master-detail-filtering-with-a-dropdownlist-cs/_static/image5.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image4.png)</span></span>

<span data-ttu-id="8849d-127">**Figure 2**: Ajouter un nouvel ObjectDataSource nommé `CategoriesDataSource` ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-a-dropdownlist-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="8849d-127">**Figure 2**: Add a New ObjectDataSource Named `CategoriesDataSource` ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image6.png))</span></span>

<span data-ttu-id="8849d-128">[![choisir d’utiliser la classe CategoriesBLL](master-detail-filtering-with-a-dropdownlist-cs/_static/image8.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="8849d-128">[![Choose to Use the CategoriesBLL Class](master-detail-filtering-with-a-dropdownlist-cs/_static/image8.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image7.png)</span></span>

<span data-ttu-id="8849d-129">**Figure 3**: Choisissez d’utiliser la classe `CategoriesBLL` ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-a-dropdownlist-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="8849d-129">**Figure 3**: Choose to Use the `CategoriesBLL` Class ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image9.png))</span></span>

<span data-ttu-id="8849d-130">[![configurer ObjectDataSource pour utiliser la méthode GetCategories ()](master-detail-filtering-with-a-dropdownlist-cs/_static/image11.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="8849d-130">[![Configure the ObjectDataSource to Use the GetCategories() Method](master-detail-filtering-with-a-dropdownlist-cs/_static/image11.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image10.png)</span></span>

<span data-ttu-id="8849d-131">**Figure 4**: Configurer ObjectDataSource pour utiliser la méthode `GetCategories()` ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-a-dropdownlist-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="8849d-131">**Figure 4**: Configure the ObjectDataSource to Use the `GetCategories()` Method ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image12.png))</span></span>

<span data-ttu-id="8849d-132">Après avoir configuré l’ObjectDataSource, nous devons toujours spécifier le champ de source de données à afficher dans DropDownList et celui qui doit être associé comme valeur pour l’élément de liste.</span><span class="sxs-lookup"><span data-stu-id="8849d-132">After configuring the ObjectDataSource we still need to specify what data source field should be displayed in DropDownList and which one should be associated as the value for the list item.</span></span> <span data-ttu-id="8849d-133">Utilisez le champ `CategoryName` comme affichage et `CategoryID` comme valeur pour chaque élément de liste.</span><span class="sxs-lookup"><span data-stu-id="8849d-133">Have the `CategoryName` field as the display and `CategoryID` as the value for each list item.</span></span>

<span data-ttu-id="8849d-134">[![que le DropDownList affiche le champ CategoryName et utilise CategoryID comme valeur](master-detail-filtering-with-a-dropdownlist-cs/_static/image14.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="8849d-134">[![Have the DropDownList Display the CategoryName Field and Use CategoryID as the Value](master-detail-filtering-with-a-dropdownlist-cs/_static/image14.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image13.png)</span></span>

<span data-ttu-id="8849d-135">**Figure 5**: Si le DropDownList affiche le champ `CategoryName` et utilise `CategoryID` comme valeur ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-a-dropdownlist-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="8849d-135">**Figure 5**: Have the DropDownList Display the `CategoryName` Field and Use `CategoryID` as the Value ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image15.png))</span></span>

<span data-ttu-id="8849d-136">À ce stade, nous disposons d’un contrôle DropDownList qui est rempli avec les enregistrements de la table `Categories` (tous sont exécutés en environ six secondes).</span><span class="sxs-lookup"><span data-stu-id="8849d-136">At this point we have a DropDownList control that's populated with the records from the `Categories` table (all accomplished in about six seconds).</span></span> <span data-ttu-id="8849d-137">La figure 6 montre notre progression jusqu’à présent dans un navigateur.</span><span class="sxs-lookup"><span data-stu-id="8849d-137">Figure 6 shows our progress thus far when viewed through a browser.</span></span>

<span data-ttu-id="8849d-138">[![une liste déroulante répertorie les catégories actuelles](master-detail-filtering-with-a-dropdownlist-cs/_static/image17.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="8849d-138">[![A Drop-Down Lists the Current Categories](master-detail-filtering-with-a-dropdownlist-cs/_static/image17.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image16.png)</span></span>

<span data-ttu-id="8849d-139">**Figure 6**: Une liste déroulante répertorie les catégories actuelles ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-a-dropdownlist-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="8849d-139">**Figure 6**: A Drop-Down Lists the Current Categories ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image18.png))</span></span>

## <a name="step-2-adding-the-products-gridview"></a><span data-ttu-id="8849d-140">Étape 2 : Ajout du GridView Products</span><span class="sxs-lookup"><span data-stu-id="8849d-140">Step 2: Adding the Products GridView</span></span>

<span data-ttu-id="8849d-141">Cette dernière étape de notre rapport maître/détail consiste à répertorier les produits associés à la catégorie sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="8849d-141">That last step in our master/detail report is to list the products associated with the selected category.</span></span> <span data-ttu-id="8849d-142">Pour ce faire, ajoutez un GridView à la page et créez un nouvel ObjectDataSource nommé `productsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="8849d-142">To accomplish this, add a GridView to the page and create a new ObjectDataSource named `productsDataSource`.</span></span> <span data-ttu-id="8849d-143">Faire en sorte que le contrôle `productsDataSource` élimine ses données de la méthode `GetProductsByCategoryID(categoryID)` de la classe `ProductsBLL`.</span><span class="sxs-lookup"><span data-stu-id="8849d-143">Have the `productsDataSource` control cull its data from the `ProductsBLL` class's `GetProductsByCategoryID(categoryID)` method.</span></span>

<span data-ttu-id="8849d-144">[![sélectionnez la méthode GetProductsByCategoryID (categoryID)](master-detail-filtering-with-a-dropdownlist-cs/_static/image20.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="8849d-144">[![Select the GetProductsByCategoryID(categoryID) Method](master-detail-filtering-with-a-dropdownlist-cs/_static/image20.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image19.png)</span></span>

<span data-ttu-id="8849d-145">**Figure 7**: Sélectionnez la méthode `GetProductsByCategoryID(categoryID)` ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-a-dropdownlist-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="8849d-145">**Figure 7**: Select the `GetProductsByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image21.png))</span></span>

<span data-ttu-id="8849d-146">Après avoir choisi cette méthode, l’Assistant ObjectDataSource nous invite à entrer la valeur du paramètre *`categoryID`* de la méthode.</span><span class="sxs-lookup"><span data-stu-id="8849d-146">After choosing this method, the ObjectDataSource wizard prompts us for the value for the method's *`categoryID`* parameter.</span></span> <span data-ttu-id="8849d-147">Pour utiliser la valeur de l’élément `categories` DropDownList sélectionné, définissez la source de paramètre sur Control et ControlID sur `Categories`.</span><span class="sxs-lookup"><span data-stu-id="8849d-147">To use the value of the selected `categories` DropDownList item set the Parameter source to Control and the ControlID to `Categories`.</span></span>

<span data-ttu-id="8849d-148">[![affectez à la valeur du paramètre categoryID la valeur des catégories DropDownList](master-detail-filtering-with-a-dropdownlist-cs/_static/image23.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="8849d-148">[![Set the categoryID Parameter to the Value of the Categories DropDownList](master-detail-filtering-with-a-dropdownlist-cs/_static/image23.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image22.png)</span></span>

<span data-ttu-id="8849d-149">**Figure 8**: Définissez le paramètre *`categoryID`* sur la valeur de la `Categories` DropDownList ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-a-dropdownlist-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="8849d-149">**Figure 8**: Set the *`categoryID`* Parameter to the Value of the `Categories` DropDownList ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image24.png))</span></span>

<span data-ttu-id="8849d-150">Prenez un moment pour consulter notre progression dans un navigateur.</span><span class="sxs-lookup"><span data-stu-id="8849d-150">Take a moment to check out our progress in a browser.</span></span> <span data-ttu-id="8849d-151">Lors de la première visite de la page, ces produits appartiennent à la catégorie sélectionnée (boissons), comme illustré à la figure 9, mais la modification de la classe DropDownList ne met pas à jour les données.</span><span class="sxs-lookup"><span data-stu-id="8849d-151">When first visiting the page, those products belong to the selected category (Beverages) are displayed (as shown in Figure 9), but changing the DropDownList doesn't update the data.</span></span> <span data-ttu-id="8849d-152">Cela est dû au fait qu’une publication doit se produire pour que le GridView soit mis à jour.</span><span class="sxs-lookup"><span data-stu-id="8849d-152">This is because a postback must occur for the GridView to update.</span></span> <span data-ttu-id="8849d-153">Pour ce faire, nous avons deux options (ne nécessitant aucune écriture de code) :</span><span class="sxs-lookup"><span data-stu-id="8849d-153">To accomplish this we have two options (neither of which requires writing any code):</span></span>

- <span data-ttu-id="8849d-154">**Affectez à la propriété AutoPostBack**[de la catégorie DropDownList](https://msdn.microsoft.com/library/system.web.ui.webcontrols.listcontrol.autopostback%28VS.80%29.aspx)**la valeur true.**</span><span class="sxs-lookup"><span data-stu-id="8849d-154">**Set the categories DropDownList's**[AutoPostBack property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.listcontrol.autopostback%28VS.80%29.aspx)**to True.**</span></span> <span data-ttu-id="8849d-155">(Pour ce faire, vous pouvez activer l’option Activer AutoPostBack dans la balise active de DropDownList.) Cette opération déclenche une publication (postback) chaque fois que l’élément sélectionné de la DropDownList est modifié par l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="8849d-155">(You can accomplish this by checking the Enable AutoPostBack option in the DropDownList's smart tag.) This will trigger a postback whenever the DropDownList's selected item is changed by the user.</span></span> <span data-ttu-id="8849d-156">Par conséquent, lorsque l’utilisateur sélectionne une nouvelle catégorie à partir du contrôle DropDownList, une publication s’affichera et le GridView sera mis à jour avec les produits de la catégorie nouvellement sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="8849d-156">Therefore, when the user selects a new category from the DropDownList a postback will ensue and the GridView will be updated with the products for the newly selected category.</span></span> <span data-ttu-id="8849d-157">(Il s’agit de l’approche que j’ai utilisée dans ce didacticiel.)</span><span class="sxs-lookup"><span data-stu-id="8849d-157">(This is the approach I've used in this tutorial.)</span></span>
- <span data-ttu-id="8849d-158">**Ajoutez un contrôle Web Button à côté de DropDownList.**</span><span class="sxs-lookup"><span data-stu-id="8849d-158">**Add a Button Web control next to the DropDownList.**</span></span> <span data-ttu-id="8849d-159">Affectez à sa propriété `Text` la valeur Refresh ou un nom similaire.</span><span class="sxs-lookup"><span data-stu-id="8849d-159">Set its `Text` property to Refresh or something similar.</span></span> <span data-ttu-id="8849d-160">Avec cette approche, l’utilisateur doit sélectionner une nouvelle catégorie, puis cliquer sur le bouton.</span><span class="sxs-lookup"><span data-stu-id="8849d-160">With this approach, the user will need to select a new category and then click the Button.</span></span> <span data-ttu-id="8849d-161">Le fait de cliquer sur le bouton entraîne une publication (postback) et met à jour le contrôle GridView pour répertorier les produits de la catégorie sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="8849d-161">Clicking the Button will cause a postback and update the GridView to list those products of the selected category.</span></span>

<span data-ttu-id="8849d-162">Les figures 9 et 10 illustrent le rapport maître/détail en action.</span><span class="sxs-lookup"><span data-stu-id="8849d-162">Figures 9 and 10 illustrate the master/detail report in action.</span></span>

<span data-ttu-id="8849d-163">[![lors de la première visite de la page, les produits de boisson s’affichent](master-detail-filtering-with-a-dropdownlist-cs/_static/image26.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="8849d-163">[![When First Visiting the Page, the Beverage Products are Displayed](master-detail-filtering-with-a-dropdownlist-cs/_static/image26.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image25.png)</span></span>

<span data-ttu-id="8849d-164">**Figure 9**: Lors de la première visite de la page, les produits de boisson s’affichent ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-a-dropdownlist-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="8849d-164">**Figure 9**: When First Visiting the Page, the Beverage Products are Displayed ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image27.png))</span></span>

<span data-ttu-id="8849d-165">[![la sélection d’un nouveau produit (produit) entraîne automatiquement une publication (PostBack), en mettant à jour le contrôle GridView](master-detail-filtering-with-a-dropdownlist-cs/_static/image29.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="8849d-165">[![Selecting a New Product (Produce) Automatically Causes a PostBack, Updating the GridView](master-detail-filtering-with-a-dropdownlist-cs/_static/image29.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image28.png)</span></span>

<span data-ttu-id="8849d-166">**Figure 10**: La sélection d’un nouveau produit (produit) entraîne automatiquement une publication (PostBack), ce qui a pour effet de mettre à jour le contrôle GridView ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-a-dropdownlist-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="8849d-166">**Figure 10**: Selecting a New Product (Produce) Automatically Causes a PostBack, Updating the GridView ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image30.png))</span></span>

## <a name="adding-a----choose-a-category----list-item"></a><span data-ttu-id="8849d-167">Ajout d’une « --choisir une catégorie-- » élément de liste</span><span class="sxs-lookup"><span data-stu-id="8849d-167">Adding a "-- Choose a Category --" List Item</span></span>

<span data-ttu-id="8849d-168">Lorsque vous accédez pour la première fois à la page de `FilterByDropDownList.aspx`, le premier élément de liste (boissons) des catégories DropDownList est sélectionné par défaut, ce qui indique les produits de boisson dans le GridView.</span><span class="sxs-lookup"><span data-stu-id="8849d-168">When first visiting the `FilterByDropDownList.aspx` page the categories DropDownList's first list item (Beverages) is selected by default, showing the beverage products in the GridView.</span></span> <span data-ttu-id="8849d-169">Au lieu d’utiliser les produits de la première catégorie, nous pouvons souhaiter qu’un élément DropDownList soit sélectionné, à l’instar de « --choisir une catégorie-- ».</span><span class="sxs-lookup"><span data-stu-id="8849d-169">Rather than showing the first category's products, we may want to instead have a DropDownList item selected that says something like, "-- Choose a Category --".</span></span>

<span data-ttu-id="8849d-170">Pour ajouter un nouvel élément de liste au DropDownList, accédez à la Fenêtre Propriétés et cliquez sur les ellipses dans la propriété `Items`.</span><span class="sxs-lookup"><span data-stu-id="8849d-170">To add a new list item to the DropDownList, go to the Properties window and click on the ellipses in the `Items` property.</span></span> <span data-ttu-id="8849d-171">Ajoutez un nouvel élément de liste avec le `Text` « --choisissez une catégorie-- » et le `-1``Value`.</span><span class="sxs-lookup"><span data-stu-id="8849d-171">Add a new list item with the `Text` "-- Choose a Category --" and the `Value` `-1`.</span></span>

<span data-ttu-id="8849d-172">[![ajouter un--choisir une catégorie--élément de liste](master-detail-filtering-with-a-dropdownlist-cs/_static/image32.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="8849d-172">[![Add a -- Choose a Category -- List Item](master-detail-filtering-with-a-dropdownlist-cs/_static/image32.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image31.png)</span></span>

<span data-ttu-id="8849d-173">**Figure 11**: Ajouter un--choisir une catégorie--élément de liste ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-a-dropdownlist-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="8849d-173">**Figure 11**: Add a -- Choose a Category -- List Item ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image33.png))</span></span>

<span data-ttu-id="8849d-174">Vous pouvez également ajouter l’élément de liste en ajoutant le balisage suivant au DropDownList :</span><span class="sxs-lookup"><span data-stu-id="8849d-174">Alternatively, you can add the list item by adding the following markup to the DropDownList:</span></span>

[!code-aspx[Main](master-detail-filtering-with-a-dropdownlist-cs/samples/sample1.aspx)]

<span data-ttu-id="8849d-175">En outre, nous devons définir le `AppendDataBoundItems` du contrôle DropDownList sur true car, lorsque les catégories sont liées à DropDownList de l’ObjectDataSource, elles remplacent tous les éléments de liste ajoutés manuellement si `AppendDataBoundItems` n’est pas true.</span><span class="sxs-lookup"><span data-stu-id="8849d-175">Additionally, we need to set the DropDownList control's `AppendDataBoundItems` to True because when the categories are bound to the DropDownList from the ObjectDataSource they'll overwrite any manually-added list items if `AppendDataBoundItems` isn't True.</span></span>

![Affectez la valeur true à la propriété AppendDataBoundItems](master-detail-filtering-with-a-dropdownlist-cs/_static/image34.png)

<span data-ttu-id="8849d-177">**Figure 12**: Affectez la valeur true à la propriété `AppendDataBoundItems`</span><span class="sxs-lookup"><span data-stu-id="8849d-177">**Figure 12**: Set the `AppendDataBoundItems` Property to True</span></span>

<span data-ttu-id="8849d-178">Après ces modifications, lors de la première visite de la page, l’option « --choisir une catégorie-- » est sélectionnée et aucun produit n’est affiché.</span><span class="sxs-lookup"><span data-stu-id="8849d-178">After these changes, when first visiting the page the "-- Choose a Category --" option is selected and no products are displayed.</span></span>

<span data-ttu-id="8849d-179">[![sur le chargement de la page initiale, aucun produit n’est affiché](master-detail-filtering-with-a-dropdownlist-cs/_static/image36.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="8849d-179">[![On the Initial Page Load No Products are Displayed](master-detail-filtering-with-a-dropdownlist-cs/_static/image36.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image35.png)</span></span>

<span data-ttu-id="8849d-180">**Figure 13**: Dans la page chargement initial, aucun produit n’est affiché ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-a-dropdownlist-cs/_static/image37.png))</span><span class="sxs-lookup"><span data-stu-id="8849d-180">**Figure 13**: On the Initial Page Load No Products are Displayed ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image37.png))</span></span>

<span data-ttu-id="8849d-181">La raison pour laquelle aucun produit n’est affiché lorsque l’élément de liste « --choisir une catégorie-- » est sélectionné est car sa valeur est `-1` et qu’il n’existe aucun produit dans la base de données avec un `CategoryID` de `-1`.</span><span class="sxs-lookup"><span data-stu-id="8849d-181">The reason no products are displayed when because the "-- Choose a Category --" list item is selected is because its value is `-1` and there are no products in the database with a `CategoryID` of `-1`.</span></span> <span data-ttu-id="8849d-182">S’il s’agit du comportement que vous souhaitez, vous avez terminé à ce stade.</span><span class="sxs-lookup"><span data-stu-id="8849d-182">If this is the behavior you want then you're done at this point!</span></span> <span data-ttu-id="8849d-183">Toutefois, si vous souhaitez afficher *toutes* les catégories quand l’élément de liste « --choisir une catégorie-- » est sélectionné, revenez à la classe `ProductsBLL` et personnalisez la méthode `GetProductsByCategoryID(categoryID)` afin qu’elle appelle la méthode `GetProducts()` si le paramètre passé *`categoryID`* est inférieur à zéro :</span><span class="sxs-lookup"><span data-stu-id="8849d-183">If, however, you want to display *all* of the categories when the "-- Choose a Category --" list item is selected, return to the `ProductsBLL` class and customize the `GetProductsByCategoryID(categoryID)` method so that it invokes the `GetProducts()` method if the passed in *`categoryID`* parameter is less than zero:</span></span>

[!code-csharp[Main](master-detail-filtering-with-a-dropdownlist-cs/samples/sample2.cs)]

<span data-ttu-id="8849d-184">La technique utilisée ici est similaire à l’approche utilisée pour afficher tous les fournisseurs dans le didacticiel sur les [paramètres déclaratifs](../basic-reporting/declarative-parameters-cs.md) , bien que pour cet exemple, nous utilisons la valeur `-1` pour indiquer que tous les enregistrements doivent être récupérés au lieu de `null`.</span><span class="sxs-lookup"><span data-stu-id="8849d-184">The technique used here is similar to the approach we used to display all suppliers back in the [Declarative Parameters](../basic-reporting/declarative-parameters-cs.md) tutorial, although for this example we're using a value of `-1` to indicate that all records should be retrieved as opposed to `null`.</span></span> <span data-ttu-id="8849d-185">Cela est dû au fait que le paramètre *`categoryID`* de la méthode `GetProductsByCategoryID(categoryID)` s’attend à ce que la valeur entière soit passée, tandis que dans le didacticiel sur les paramètres déclaratifs nous passons un paramètre d’entrée de chaîne.</span><span class="sxs-lookup"><span data-stu-id="8849d-185">This is because the *`categoryID`* parameter of the `GetProductsByCategoryID(categoryID)` method expects as integer value passed in, whereas in the Declarative Parameters tutorial we were passing in a string input parameter.</span></span>

<span data-ttu-id="8849d-186">La figure 14 illustre une capture d’écran de `FilterByDropDownList.aspx` lorsque l’option « --choisir une catégorie-- » est sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="8849d-186">Figure 14 shows a screen shot of `FilterByDropDownList.aspx` when the "-- Choose a Category --" option is selected.</span></span> <span data-ttu-id="8849d-187">Ici, tous les produits s’affichent par défaut et l’utilisateur peut affiner l’affichage en choisissant une catégorie spécifique.</span><span class="sxs-lookup"><span data-stu-id="8849d-187">Here, all of the products are displayed by default, and the user can narrow the display by choosing a specific category.</span></span>

<span data-ttu-id="8849d-188">[![tous les produits sont désormais répertoriés par défaut](master-detail-filtering-with-a-dropdownlist-cs/_static/image39.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="8849d-188">[![All of the Products are Now Listed By Default](master-detail-filtering-with-a-dropdownlist-cs/_static/image39.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image38.png)</span></span>

<span data-ttu-id="8849d-189">**Figure 14**: Tous les produits sont désormais répertoriés par défaut ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-a-dropdownlist-cs/_static/image40.png))</span><span class="sxs-lookup"><span data-stu-id="8849d-189">**Figure 14**: All of the Products are Now Listed By Default ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image40.png))</span></span>

## <a name="summary"></a><span data-ttu-id="8849d-190">Récapitulatif</span><span class="sxs-lookup"><span data-stu-id="8849d-190">Summary</span></span>

<span data-ttu-id="8849d-191">Lors de l’affichage de données hiérarchiques, il est souvent utile de présenter les données à l’aide de rapports maître/détail, à partir desquels l’utilisateur peut commencer à utiliser les données du haut de la hiérarchie et descendre en détail dans les détails.</span><span class="sxs-lookup"><span data-stu-id="8849d-191">When displaying hierarchically-related data, it often helps to present the data using master/detail reports, from which the user can start perusing the data from the top of the hierarchy and drill down into details.</span></span> <span data-ttu-id="8849d-192">Dans ce didacticiel, nous avons examiné la création d’un rapport maître/détail simple indiquant les produits d’une catégorie sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="8849d-192">In this tutorial we examined building a simple master/detail report showing a selected category's products.</span></span> <span data-ttu-id="8849d-193">Pour ce faire, utilisez un contrôle DropDownList pour la liste des catégories et un GridView pour les produits appartenant à la catégorie sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="8849d-193">This was accomplished by using a DropDownList for the list of categories and a GridView for the products belonging to the selected category.</span></span>

<span data-ttu-id="8849d-194">Dans le [didacticiel suivant](master-detail-filtering-with-two-dropdownlists-cs.md) , nous allons utiliser l’interface DropDownList une étape supplémentaire, en utilisant deux DropDownList.</span><span class="sxs-lookup"><span data-stu-id="8849d-194">In the [next tutorial](master-detail-filtering-with-two-dropdownlists-cs.md) we'll take the DropDownList interface one step further, using two DropDownLists.</span></span>

<span data-ttu-id="8849d-195">Bonne programmation !</span><span class="sxs-lookup"><span data-stu-id="8849d-195">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="8849d-196">À propos de l’auteur</span><span class="sxs-lookup"><span data-stu-id="8849d-196">About the Author</span></span>

<span data-ttu-id="8849d-197">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), auteur de sept livres ASP/ASP. net et fondateur de [4GuysFromRolla.com](http://www.4guysfromrolla.com), travaille avec des technologies Web Microsoft depuis 1998.</span><span class="sxs-lookup"><span data-stu-id="8849d-197">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="8849d-198">Scott travaille en tant que consultant, formateur et auteur indépendant.</span><span class="sxs-lookup"><span data-stu-id="8849d-198">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="8849d-199">Son dernier ouvrage est [*SAM animer vous-même ASP.NET 2.0 des dernières 24 heures*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="8849d-199">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="8849d-200">Il peut être contacté à [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="8849d-200">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="8849d-201">ou via son blog, qui se trouve sur [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="8849d-201">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="8849d-202">Next</span><span class="sxs-lookup"><span data-stu-id="8849d-202">Next</span></span>](master-detail-filtering-with-two-dropdownlists-cs.md)

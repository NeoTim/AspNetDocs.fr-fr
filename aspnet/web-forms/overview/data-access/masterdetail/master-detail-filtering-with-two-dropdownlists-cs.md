---
uid: web-forms/overview/data-access/masterdetail/master-detail-filtering-with-two-dropdownlists-cs
title: Filtrage maître/détail avec deux DropDownList (C#) | Microsoft Docs
author: rick-anderson
description: Ce didacticiel développe la relation maître/détail pour ajouter une troisième couche, à l’aide de deux contrôles DropDownList pour sélectionner les dit parent et grand-parent souhaités...
ms.author: riande
ms.date: 03/31/2010
ms.assetid: ac4b0d77-4816-4ded-afd0-88dab667aedd
msc.legacyurl: /web-forms/overview/data-access/masterdetail/master-detail-filtering-with-two-dropdownlists-cs
msc.type: authoredcontent
ms.openlocfilehash: e24b7f91d34fbce1676f7f28ebb7d23903157f7f
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78528489"
---
# <a name="masterdetail-filtering-with-two-dropdownlists-c"></a><span data-ttu-id="54d7f-103">Filtrage maître/détail avec deux DropDownList (C#)</span><span class="sxs-lookup"><span data-stu-id="54d7f-103">Master/Detail Filtering With Two DropDownLists (C#)</span></span>

<span data-ttu-id="54d7f-104">par [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="54d7f-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="54d7f-105">[Télécharger l’exemple d’application](https://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_8_CS.exe) ou [Télécharger le PDF](master-detail-filtering-with-two-dropdownlists-cs/_static/datatutorial08cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="54d7f-105">[Download Sample App](https://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_8_CS.exe) or [Download PDF](master-detail-filtering-with-two-dropdownlists-cs/_static/datatutorial08cs1.pdf)</span></span>

> <span data-ttu-id="54d7f-106">Ce didacticiel développe la relation maître/détail pour ajouter une troisième couche, à l’aide de deux contrôles DropDownList pour sélectionner les enregistrements parents et grand-parent souhaités.</span><span class="sxs-lookup"><span data-stu-id="54d7f-106">This tutorial expands the master/detail relationship to add a third layer, using two DropDownList controls to select the desired parent and grandparent records.</span></span>

## <a name="introduction"></a><span data-ttu-id="54d7f-107">Introduction</span><span class="sxs-lookup"><span data-stu-id="54d7f-107">Introduction</span></span>

<span data-ttu-id="54d7f-108">Dans le [didacticiel précédent](master-detail-filtering-with-a-dropdownlist-cs.md) , nous avons examiné comment afficher un simple rapport maître/détails à l’aide d’un seul contrôle DropDownList rempli avec les catégories et un GridView affichant les produits appartenant à la catégorie sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="54d7f-108">In the [previous tutorial](master-detail-filtering-with-a-dropdownlist-cs.md) we examined how to display a simple master/details report using a single DropDownList populated with the categories and a GridView showing those products that belong to the selected category.</span></span> <span data-ttu-id="54d7f-109">Ce modèle de rapport fonctionne bien lorsque vous affichez des enregistrements qui ont une relation un-à-plusieurs et qui peuvent être facilement étendus pour fonctionner dans des scénarios qui incluent plusieurs relations un-à-plusieurs.</span><span class="sxs-lookup"><span data-stu-id="54d7f-109">This report pattern works well when displaying records that have a one-to-many relationship and can easily be extended to work for scenarios that include multiple one-to-many relationships.</span></span> <span data-ttu-id="54d7f-110">Par exemple, un système de saisie des commandes aurait des tables qui correspondent à des articles clients, commandes et lignes de commande.</span><span class="sxs-lookup"><span data-stu-id="54d7f-110">For example, an order entry system would have tables that correspond to customers, orders, and order line items.</span></span> <span data-ttu-id="54d7f-111">Un client donné peut avoir plusieurs commandes avec chaque commande composée de plusieurs éléments.</span><span class="sxs-lookup"><span data-stu-id="54d7f-111">A given customer may have multiple orders with each order consisting of multiple items.</span></span> <span data-ttu-id="54d7f-112">Ces données peuvent être présentées à l’utilisateur avec deux DropDownList et un GridView.</span><span class="sxs-lookup"><span data-stu-id="54d7f-112">Such data can be presented to the user with two DropDownLists and a GridView.</span></span> <span data-ttu-id="54d7f-113">Le premier DropDownList a un élément de liste pour chaque client de la base de données, avec le contenu du deuxième qui correspond aux commandes passées par le client sélectionné.</span><span class="sxs-lookup"><span data-stu-id="54d7f-113">The first DropDownList would have a list item for each customer in the database with the second one's contents being the orders placed by the selected customer.</span></span> <span data-ttu-id="54d7f-114">Un GridView répertorie les éléments de ligne de la commande sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="54d7f-114">A GridView would list the line items from the selected order.</span></span>

<span data-ttu-id="54d7f-115">Tandis que la base de données Northwind inclut les informations sur les détails des commandes et des clients canoniques dans ses tables `Customers`, `Orders`et `Order Details`, ces tables ne sont pas capturées dans notre architecture.</span><span class="sxs-lookup"><span data-stu-id="54d7f-115">While the Northwind database include the canonical customer/order/order details information in its `Customers`, `Orders`, and `Order Details` tables, these tables aren't captured in our architecture.</span></span> <span data-ttu-id="54d7f-116">Néanmoins, nous pouvons toujours illustrer l’utilisation de deux DropDownList dépendants.</span><span class="sxs-lookup"><span data-stu-id="54d7f-116">Nonetheless, we can still illustrate using two dependent DropDownLists.</span></span> <span data-ttu-id="54d7f-117">Le premier DropDownList répertorie les catégories et les produits appartenant à la catégorie sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="54d7f-117">The first DropDownList will list the categories and the second the products belonging to the selected category.</span></span> <span data-ttu-id="54d7f-118">Un DetailsView affiche ensuite les détails du produit sélectionné.</span><span class="sxs-lookup"><span data-stu-id="54d7f-118">A DetailsView will then list the details of the selected product.</span></span>

## <a name="step-1-creating-and-populating-the-categories-dropdownlist"></a><span data-ttu-id="54d7f-119">Étape 1 : création et remplissage des catégories DropDownList</span><span class="sxs-lookup"><span data-stu-id="54d7f-119">Step 1: Creating and Populating the Categories DropDownList</span></span>

<span data-ttu-id="54d7f-120">Notre premier objectif consiste à ajouter le DropDownList qui répertorie les catégories.</span><span class="sxs-lookup"><span data-stu-id="54d7f-120">Our first goal is to add the DropDownList that lists the categories.</span></span> <span data-ttu-id="54d7f-121">Ces étapes ont été examinées en détail dans le didacticiel précédent, mais sont résumées ici à des fins d’exhaustivité.</span><span class="sxs-lookup"><span data-stu-id="54d7f-121">These steps were examined in detail in the preceding tutorial, but are summarized here for completeness.</span></span>

<span data-ttu-id="54d7f-122">Ouvrez la page `MasterDetailsDetails.aspx` dans le dossier `Filtering`, ajoutez un contrôle DropDownList à la page, définissez sa propriété `ID` sur `Categories`, puis cliquez sur le lien configurer la source de données dans sa balise active.</span><span class="sxs-lookup"><span data-stu-id="54d7f-122">Open the `MasterDetailsDetails.aspx` page in the `Filtering` folder, add a DropDownList to the page, set its `ID` property to `Categories`, and then click the Configure Data Source link in its smart tag.</span></span> <span data-ttu-id="54d7f-123">À partir de l’Assistant Configuration de source de données, choisissez d’ajouter une nouvelle source de données.</span><span class="sxs-lookup"><span data-stu-id="54d7f-123">From the Data Source Configuration Wizard choose to add a new data source.</span></span>

<span data-ttu-id="54d7f-124">[![ajouter une nouvelle source de données pour le DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image2.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="54d7f-124">[![Add a New Data Source for the DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image2.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image1.png)</span></span>

<span data-ttu-id="54d7f-125">**Figure 1**: ajouter une nouvelle source de données pour le DropDownList ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-two-dropdownlists-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="54d7f-125">**Figure 1**: Add a New Data Source for the DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image3.png))</span></span>

<span data-ttu-id="54d7f-126">La nouvelle source de données doit naturellement être un ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="54d7f-126">The new data source should, naturally, be an ObjectDataSource.</span></span> <span data-ttu-id="54d7f-127">Nommez ce nouvel ObjectDataSource `CategoriesDataSource` et appelez la méthode `GetCategories()` de l’objet `CategoriesBLL`.</span><span class="sxs-lookup"><span data-stu-id="54d7f-127">Name this new ObjectDataSource `CategoriesDataSource` and have it invoke the `CategoriesBLL` object's `GetCategories()` method.</span></span>

<span data-ttu-id="54d7f-128">[![choisir d’utiliser la classe CategoriesBLL](master-detail-filtering-with-two-dropdownlists-cs/_static/image5.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="54d7f-128">[![Choose to Use the CategoriesBLL Class](master-detail-filtering-with-two-dropdownlists-cs/_static/image5.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image4.png)</span></span>

<span data-ttu-id="54d7f-129">**Figure 2**: choisir d’utiliser la classe `CategoriesBLL` ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-two-dropdownlists-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="54d7f-129">**Figure 2**: Choose to Use the `CategoriesBLL` Class ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image6.png))</span></span>

<span data-ttu-id="54d7f-130">[![configurer ObjectDataSource pour utiliser la méthode GetCategories ()](master-detail-filtering-with-two-dropdownlists-cs/_static/image8.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="54d7f-130">[![Configure the ObjectDataSource to Use the GetCategories() Method](master-detail-filtering-with-two-dropdownlists-cs/_static/image8.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image7.png)</span></span>

<span data-ttu-id="54d7f-131">**Figure 3**: configurer ObjectDataSource pour utiliser la méthode `GetCategories()` ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-two-dropdownlists-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="54d7f-131">**Figure 3**: Configure the ObjectDataSource to Use the `GetCategories()` Method ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image9.png))</span></span>

<span data-ttu-id="54d7f-132">Après avoir configuré l’ObjectDataSource, nous devons toujours spécifier le champ de source de données à afficher dans le `Categories` DropDownList et celui qui doit être configuré comme valeur pour l’élément de liste.</span><span class="sxs-lookup"><span data-stu-id="54d7f-132">After configuring the ObjectDataSource we still need to specify which data source field should be displayed in the `Categories` DropDownList and which one should be configured as the value for the list item.</span></span> <span data-ttu-id="54d7f-133">Définissez le champ `CategoryName` comme affichage et `CategoryID` comme valeur pour chaque élément de liste.</span><span class="sxs-lookup"><span data-stu-id="54d7f-133">Set the `CategoryName` field as the display and `CategoryID` as the value for each list item.</span></span>

<span data-ttu-id="54d7f-134">[![que le DropDownList affiche le champ CategoryName et utilise CategoryID comme valeur](master-detail-filtering-with-two-dropdownlists-cs/_static/image11.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="54d7f-134">[![Have the DropDownList Display the CategoryName Field and Use CategoryID as the Value](master-detail-filtering-with-two-dropdownlists-cs/_static/image11.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image10.png)</span></span>

<span data-ttu-id="54d7f-135">**Figure 4**: afficher le champ `CategoryName` dans le champ et utiliser `CategoryID` comme valeur ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-two-dropdownlists-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="54d7f-135">**Figure 4**: Have the DropDownList Display the `CategoryName` Field and Use `CategoryID` as the Value ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image12.png))</span></span>

<span data-ttu-id="54d7f-136">À ce stade, nous disposons d’un contrôle DropDownList (`Categories`) rempli avec les enregistrements de la table `Categories`.</span><span class="sxs-lookup"><span data-stu-id="54d7f-136">At this point we have a DropDownList control (`Categories`) that's populated with the records from the `Categories` table.</span></span> <span data-ttu-id="54d7f-137">Quand l’utilisateur choisit une nouvelle catégorie dans le DropDownList, nous voulons qu’une publication (postback) se produise pour actualiser le DropDownList du produit que nous allons créer à l’étape 2.</span><span class="sxs-lookup"><span data-stu-id="54d7f-137">When the user chooses a new category from the DropDownList we'll want a postback to occur in order to refresh the product DropDownList that we're going to create in Step 2.</span></span> <span data-ttu-id="54d7f-138">Par conséquent, activez l’option Activer AutoPostBack à partir de la balise active de `categories` DropDownList.</span><span class="sxs-lookup"><span data-stu-id="54d7f-138">Therefore, check the Enable AutoPostBack option from the `categories` DropDownList's smart tag.</span></span>

<span data-ttu-id="54d7f-139">[![activer AutoPostBack pour les catégories DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image14.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="54d7f-139">[![Enable AutoPostBack for the Categories DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image14.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image13.png)</span></span>

<span data-ttu-id="54d7f-140">**Figure 5**: activer AutoPostBack pour le `Categories` DropDownList ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-two-dropdownlists-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="54d7f-140">**Figure 5**: Enable AutoPostBack for the `Categories` DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image15.png))</span></span>

## <a name="step-2-displaying-the-selected-categorys-products-in-a-second-dropdownlist"></a><span data-ttu-id="54d7f-141">Étape 2 : affichage des produits de la catégorie sélectionnée dans un deuxième DropDownList</span><span class="sxs-lookup"><span data-stu-id="54d7f-141">Step 2: Displaying the Selected Category's Products in a Second DropDownList</span></span>

<span data-ttu-id="54d7f-142">Une fois la `Categories` DropDownList terminée, l’étape suivante consiste à afficher un DropDownList des produits appartenant à la catégorie sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="54d7f-142">With the `Categories` DropDownList completed, our next step is to display a DropDownList of products belonging to the selected category.</span></span> <span data-ttu-id="54d7f-143">Pour ce faire, ajoutez un autre contrôle DropDownList à la page nommée `ProductsByCategory`.</span><span class="sxs-lookup"><span data-stu-id="54d7f-143">To accomplish this, add another DropDownList to the page named `ProductsByCategory`.</span></span> <span data-ttu-id="54d7f-144">Comme avec la `Categories` DropDownList, créez un ObjectDataSource pour le `ProductsByCategory` DropDownList nommé `ProductsByCategoryDataSource`.</span><span class="sxs-lookup"><span data-stu-id="54d7f-144">As with the `Categories` DropDownList, create a new ObjectDataSource for the `ProductsByCategory` DropDownList named `ProductsByCategoryDataSource`.</span></span>

<span data-ttu-id="54d7f-145">[![ajouter une nouvelle source de données pour le DropDownList ProductsByCategory](master-detail-filtering-with-two-dropdownlists-cs/_static/image17.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="54d7f-145">[![Add a New Data Source for the ProductsByCategory DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image17.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image16.png)</span></span>

<span data-ttu-id="54d7f-146">**Figure 6**: ajouter une nouvelle source de données pour le `ProductsByCategory` DropDownList ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-two-dropdownlists-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="54d7f-146">**Figure 6**: Add a New Data Source for the `ProductsByCategory` DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image18.png))</span></span>

<span data-ttu-id="54d7f-147">[![créer un ObjectDataSource nommé ProductsByCategoryDataSource](master-detail-filtering-with-two-dropdownlists-cs/_static/image20.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="54d7f-147">[![Create a New ObjectDataSource Named ProductsByCategoryDataSource](master-detail-filtering-with-two-dropdownlists-cs/_static/image20.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image19.png)</span></span>

<span data-ttu-id="54d7f-148">**Figure 7**: créer un ObjectDataSource nommé `ProductsByCategoryDataSource` ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-two-dropdownlists-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="54d7f-148">**Figure 7**: Create a New ObjectDataSource Named `ProductsByCategoryDataSource` ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image21.png))</span></span>

<span data-ttu-id="54d7f-149">Étant donné que le DropDownList `ProductsByCategory` doit afficher uniquement les produits appartenant à la catégorie sélectionnée, faites en sorte que ObjectDataSource appelle la méthode `GetProductsByCategoryID(categoryID)` à partir de l’objet `ProductsBLL`.</span><span class="sxs-lookup"><span data-stu-id="54d7f-149">Since the `ProductsByCategory` DropDownList needs to display just those products belonging to the selected category, have the ObjectDataSource invoke the `GetProductsByCategoryID(categoryID)` method from the `ProductsBLL` object.</span></span>

<span data-ttu-id="54d7f-150">[![choisir d’utiliser la classe ProductsBLL](master-detail-filtering-with-two-dropdownlists-cs/_static/image23.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="54d7f-150">[![Choose to Use the ProductsBLL Class](master-detail-filtering-with-two-dropdownlists-cs/_static/image23.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image22.png)</span></span>

<span data-ttu-id="54d7f-151">**Figure 8**: choisir d’utiliser la classe `ProductsBLL` ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-two-dropdownlists-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="54d7f-151">**Figure 8**: Choose to Use the `ProductsBLL` Class ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image24.png))</span></span>

<span data-ttu-id="54d7f-152">[![configurer ObjectDataSource pour utiliser la méthode GetProductsByCategoryID (categoryID)](master-detail-filtering-with-two-dropdownlists-cs/_static/image26.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="54d7f-152">[![Configure the ObjectDataSource to Use the GetProductsByCategoryID(categoryID) Method](master-detail-filtering-with-two-dropdownlists-cs/_static/image26.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image25.png)</span></span>

<span data-ttu-id="54d7f-153">**Figure 9**: configurer ObjectDataSource pour utiliser la méthode `GetProductsByCategoryID(categoryID)` ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-two-dropdownlists-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="54d7f-153">**Figure 9**: Configure the ObjectDataSource to Use the `GetProductsByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image27.png))</span></span>

<span data-ttu-id="54d7f-154">Dans la dernière étape de l’Assistant, vous devez spécifier la valeur du paramètre *`categoryID`* .</span><span class="sxs-lookup"><span data-stu-id="54d7f-154">In the final step of the wizard we need to specify the value of the *`categoryID`* parameter.</span></span> <span data-ttu-id="54d7f-155">Affectez ce paramètre à l’élément sélectionné à partir de la `Categories` DropDownList.</span><span class="sxs-lookup"><span data-stu-id="54d7f-155">Assign this parameter to the selected item from the `Categories` DropDownList.</span></span>

<span data-ttu-id="54d7f-156">[![de l’extraction de la valeur du paramètre categoryID des catégories DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image29.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="54d7f-156">[![Pull the categoryID Parameter Value from the Categories DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image29.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image28.png)</span></span>

<span data-ttu-id="54d7f-157">**Figure 10**: extraire la valeur de paramètre *`categoryID`* du `Categories` DropDownList ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-two-dropdownlists-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="54d7f-157">**Figure 10**: Pull the *`categoryID`* Parameter Value from the `Categories` DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image30.png))</span></span>

<span data-ttu-id="54d7f-158">Avec ObjectDataSource configuré, il ne reste plus qu’à spécifier les champs de source de données utilisés pour l’affichage et la valeur des éléments du DropDownList.</span><span class="sxs-lookup"><span data-stu-id="54d7f-158">With the ObjectDataSource configured, all that remains is to specify what data source fields are used for the display and value of the DropDownList's items.</span></span> <span data-ttu-id="54d7f-159">Affichez le champ `ProductName` et utilisez le champ `ProductID` comme valeur.</span><span class="sxs-lookup"><span data-stu-id="54d7f-159">Display the `ProductName` field and use the `ProductID` field as the value.</span></span>

<span data-ttu-id="54d7f-160">[![spécifier les champs de source de données utilisés pour les propriétés du texte et de la valeur de l’ListItems de DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image32.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="54d7f-160">[![Specify the Data Source Fields Used for the DropDownList's ListItems' Text and Value Properties](master-detail-filtering-with-two-dropdownlists-cs/_static/image32.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image31.png)</span></span>

<span data-ttu-id="54d7f-161">**Figure 11**: spécifier les champs de source de données utilisés pour les propriétés du `ListItem` s’du DropDownList `Text` et `Value` ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-two-dropdownlists-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="54d7f-161">**Figure 11**: Specify the Data Source Fields Used for the DropDownList's `ListItem` s' `Text` and `Value` Properties ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image33.png))</span></span>

<span data-ttu-id="54d7f-162">Avec ObjectDataSource et `ProductsByCategory` DropDownList configurés, notre page affiche deux DropDownList : la première liste toutes les catégories, tandis que la seconde répertorie les produits appartenant à la catégorie sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="54d7f-162">With the ObjectDataSource and `ProductsByCategory` DropDownList configured our page will display two DropDownLists: the first will list all of the categories while the second will list those products belonging to the selected category.</span></span> <span data-ttu-id="54d7f-163">Lorsque l’utilisateur sélectionne une nouvelle catégorie à partir du premier DropDownList, une publication s’affiche et le deuxième DropDownList est relié, indiquant les produits qui appartiennent à la catégorie nouvellement sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="54d7f-163">When the user selects a new category from the first DropDownList, a postback will ensue and the second DropDownList will be rebound, showing those products that belong to the newly selected category.</span></span> <span data-ttu-id="54d7f-164">Les figures 12 et 13 affichent `MasterDetailsDetails.aspx` en action lorsqu’ils sont affichés dans un navigateur.</span><span class="sxs-lookup"><span data-stu-id="54d7f-164">Figures 12 and 13 show `MasterDetailsDetails.aspx` in action when viewed through a browser.</span></span>

<span data-ttu-id="54d7f-165">[![lors de la première visite de la page, la catégorie boissons est sélectionnée](master-detail-filtering-with-two-dropdownlists-cs/_static/image35.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="54d7f-165">[![When First Visiting the Page, the Beverages Category is Selected](master-detail-filtering-with-two-dropdownlists-cs/_static/image35.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image34.png)</span></span>

<span data-ttu-id="54d7f-166">**Figure 12**: lors de la première visite de la page, la catégorie boissons est sélectionnée ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-two-dropdownlists-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="54d7f-166">**Figure 12**: When First Visiting the Page, the Beverages Category is Selected ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image36.png))</span></span>

<span data-ttu-id="54d7f-167">[![le choix d’une autre catégorie affiche les produits de la nouvelle catégorie](master-detail-filtering-with-two-dropdownlists-cs/_static/image38.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="54d7f-167">[![Choosing a Different Category Displays the New Category's Products](master-detail-filtering-with-two-dropdownlists-cs/_static/image38.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image37.png)</span></span>

<span data-ttu-id="54d7f-168">**Figure 13**: choix d’une autre catégorie affiche les produits de la nouvelle catégorie ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-two-dropdownlists-cs/_static/image39.png))</span><span class="sxs-lookup"><span data-stu-id="54d7f-168">**Figure 13**: Choosing a Different Category Displays the New Category's Products ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image39.png))</span></span>

<span data-ttu-id="54d7f-169">Actuellement, la `productsByCategory` DropDownList, en cas de modification, n’entraîne *pas* de publication (postback).</span><span class="sxs-lookup"><span data-stu-id="54d7f-169">Currently the `productsByCategory` DropDownList, when changed, does *not* cause a postback.</span></span> <span data-ttu-id="54d7f-170">Toutefois, nous souhaitons qu’une publication (postback) se produise une fois que nous ajoutons un DetailsView pour afficher les détails du produit sélectionné (étape 3).</span><span class="sxs-lookup"><span data-stu-id="54d7f-170">However, we will want a postback to occur once we add a DetailsView to display the selected product's details (Step 3).</span></span> <span data-ttu-id="54d7f-171">Par conséquent, activez la case à cocher Activer AutoPostBack à partir de la balise active de `productsByCategory` DropDownList.</span><span class="sxs-lookup"><span data-stu-id="54d7f-171">Therefore, check the Enable AutoPostBack checkbox from the `productsByCategory` DropDownList's smart tag.</span></span>

<span data-ttu-id="54d7f-172">[![activer la fonctionnalité AutoPostBack pour le DropDownList productsByCategory](master-detail-filtering-with-two-dropdownlists-cs/_static/image41.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image40.png)</span><span class="sxs-lookup"><span data-stu-id="54d7f-172">[![Enable the AutoPostBack Feature for the productsByCategory DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image41.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image40.png)</span></span>

<span data-ttu-id="54d7f-173">**Figure 14**: activer la fonctionnalité AutoPostBack pour le `productsByCategory` DropDownList ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-two-dropdownlists-cs/_static/image42.png))</span><span class="sxs-lookup"><span data-stu-id="54d7f-173">**Figure 14**: Enable the AutoPostBack Feature for the `productsByCategory` DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image42.png))</span></span>

## <a name="step-3-using-a-detailsview-to-display-details-for-the-selected-product"></a><span data-ttu-id="54d7f-174">Étape 3 : utilisation d’un DetailsView pour afficher les détails du produit sélectionné</span><span class="sxs-lookup"><span data-stu-id="54d7f-174">Step 3: Using a DetailsView to Display Details for the Selected Product</span></span>

<span data-ttu-id="54d7f-175">La dernière étape consiste à afficher les détails du produit sélectionné dans un DetailsView.</span><span class="sxs-lookup"><span data-stu-id="54d7f-175">The final step is to display the details for the selected product in a DetailsView.</span></span> <span data-ttu-id="54d7f-176">Pour ce faire, ajoutez un DetailsView à la page, affectez à sa propriété `ID` la valeur `ProductDetails`et créez un ObjectDataSource pour celui-ci.</span><span class="sxs-lookup"><span data-stu-id="54d7f-176">To accomplish this, add a DetailsView to the page, set its `ID` property to `ProductDetails`, and create a new ObjectDataSource for it.</span></span> <span data-ttu-id="54d7f-177">Configurez cet ObjectDataSource pour extraire ses données de la méthode `GetProductByProductID(productID)` de la classe `ProductsBLL` à l’aide de la valeur sélectionnée de la `ProductsByCategory` DropDownList pour la valeur du paramètre *`productID`* .</span><span class="sxs-lookup"><span data-stu-id="54d7f-177">Configure this ObjectDataSource to pull its data from the `ProductsBLL` class's `GetProductByProductID(productID)` method using the selected value of the `ProductsByCategory` DropDownList for the value of the *`productID`* parameter.</span></span>

<span data-ttu-id="54d7f-178">[![choisir d’utiliser la classe ProductsBLL](master-detail-filtering-with-two-dropdownlists-cs/_static/image44.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image43.png)</span><span class="sxs-lookup"><span data-stu-id="54d7f-178">[![Choose to Use the ProductsBLL Class](master-detail-filtering-with-two-dropdownlists-cs/_static/image44.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image43.png)</span></span>

<span data-ttu-id="54d7f-179">**Figure 15**: choisir d’utiliser la classe `ProductsBLL` ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-two-dropdownlists-cs/_static/image45.png))</span><span class="sxs-lookup"><span data-stu-id="54d7f-179">**Figure 15**: Choose to Use the `ProductsBLL` Class ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image45.png))</span></span>

<span data-ttu-id="54d7f-180">[![configurer ObjectDataSource pour utiliser la méthode GetProductByProductID (productID)](master-detail-filtering-with-two-dropdownlists-cs/_static/image47.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image46.png)</span><span class="sxs-lookup"><span data-stu-id="54d7f-180">[![Configure the ObjectDataSource to Use the GetProductByProductID(productID) Method](master-detail-filtering-with-two-dropdownlists-cs/_static/image47.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image46.png)</span></span>

<span data-ttu-id="54d7f-181">**Figure 16**: configurer ObjectDataSource pour utiliser la méthode `GetProductByProductID(productID)` ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-two-dropdownlists-cs/_static/image48.png))</span><span class="sxs-lookup"><span data-stu-id="54d7f-181">**Figure 16**: Configure the ObjectDataSource to Use the `GetProductByProductID(productID)` Method ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image48.png))</span></span>

<span data-ttu-id="54d7f-182">[![de l’extraction de la valeur de paramètre productID à partir du DropDownList ProductsByCategory](master-detail-filtering-with-two-dropdownlists-cs/_static/image50.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image49.png)</span><span class="sxs-lookup"><span data-stu-id="54d7f-182">[![Pull the productID Parameter Value from the ProductsByCategory DropDownList](master-detail-filtering-with-two-dropdownlists-cs/_static/image50.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image49.png)</span></span>

<span data-ttu-id="54d7f-183">**Figure 17**: extraire la valeur de paramètre *`productID`* du `ProductsByCategory` DropDownList ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-two-dropdownlists-cs/_static/image51.png))</span><span class="sxs-lookup"><span data-stu-id="54d7f-183">**Figure 17**: Pull the *`productID`* Parameter Value from the `ProductsByCategory` DropDownList ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image51.png))</span></span>

<span data-ttu-id="54d7f-184">Vous pouvez choisir d’afficher les champs disponibles dans le contrôle DetailsView.</span><span class="sxs-lookup"><span data-stu-id="54d7f-184">You can choose to display any of the available fields in the DetailsView.</span></span> <span data-ttu-id="54d7f-185">J’ai choisi de supprimer les champs `ProductID`, `SupplierID`et `CategoryID` et de réorganiser et mettre en forme les champs restants.</span><span class="sxs-lookup"><span data-stu-id="54d7f-185">I've opted to remove the `ProductID`, `SupplierID`, and `CategoryID` fields and reordered and formatted the remaining fields.</span></span> <span data-ttu-id="54d7f-186">En outre, j’ai effacé les propriétés `Height` et `Width` du contrôle DetailsView, ce qui permet au DetailsView de se développer jusqu’à la largeur nécessaire pour afficher ses données au lieu de les limiter à une taille spécifiée.</span><span class="sxs-lookup"><span data-stu-id="54d7f-186">In addition, I cleared out the DetailsView's `Height` and `Width` properties, allowing the DetailsView to expand to the width needed to best display its data rather than having it constrained to a specified size.</span></span> <span data-ttu-id="54d7f-187">Le balisage complet apparaît ci-dessous :</span><span class="sxs-lookup"><span data-stu-id="54d7f-187">The full markup appears below:</span></span>

[!code-aspx[Main](master-detail-filtering-with-two-dropdownlists-cs/samples/sample1.aspx)]

<span data-ttu-id="54d7f-188">Prenez un moment pour tester la page `MasterDetailsDetails.aspx` dans un navigateur.</span><span class="sxs-lookup"><span data-stu-id="54d7f-188">Take a moment to try out the `MasterDetailsDetails.aspx` page in a browser.</span></span> <span data-ttu-id="54d7f-189">À première vue, il peut sembler que tout fonctionne comme vous le souhaitez, mais qu’il y a un problème subtil.</span><span class="sxs-lookup"><span data-stu-id="54d7f-189">At first glance it may appear that everything is working as desired, but there's a subtle problem.</span></span> <span data-ttu-id="54d7f-190">Lorsque vous choisissez une nouvelle catégorie, la `ProductsByCategory` DropDownList est mise à jour pour inclure ces produits pour la catégorie sélectionnée, mais le `ProductDetails` DetailsView continue d’afficher les informations sur le produit précédent.</span><span class="sxs-lookup"><span data-stu-id="54d7f-190">When you choose a new category the `ProductsByCategory` DropDownList is updated to include those products for the selected category, but the `ProductDetails` DetailsView continued to show the previous product information.</span></span> <span data-ttu-id="54d7f-191">Le contrôle DetailsView est mis à jour lors du choix d’un autre produit pour la catégorie sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="54d7f-191">The DetailsView is updated when choosing a different product for the selected category.</span></span> <span data-ttu-id="54d7f-192">En outre, si vous testez suffisamment de temps, vous constaterez que si vous choisissez continuellement de nouvelles catégories (par exemple, en choisissant des boissons dans le `Categories` DropDownList, puis des condiments, puis des friandises), l' `ProductDetails` DetailsView est actualisé.</span><span class="sxs-lookup"><span data-stu-id="54d7f-192">Furthermore, if you test thoroughly enough, you'll find that if you continually choose new categories (such as choosing Beverages from the `Categories` DropDownList, then Condiments, then Confections) every other category selection causes the `ProductDetails` DetailsView to be refreshed.</span></span>

<span data-ttu-id="54d7f-193">Pour vous aider à concrétiser LAR ce problème, examinons un exemple spécifique.</span><span class="sxs-lookup"><span data-stu-id="54d7f-193">To help concretize this problem, let's look at a specific example.</span></span> <span data-ttu-id="54d7f-194">Lorsque vous accédez pour la première fois à la page, la catégorie boissons est sélectionnée et les produits associés sont chargés dans le `ProductsByCategory` DropDownList.</span><span class="sxs-lookup"><span data-stu-id="54d7f-194">When you first visit the page the Beverages category is selected and the related products are loaded in the `ProductsByCategory` DropDownList.</span></span> <span data-ttu-id="54d7f-195">Chai est le produit sélectionné et ses détails s’affichent dans le `ProductDetails` DetailsView, comme illustré à la figure 18.</span><span class="sxs-lookup"><span data-stu-id="54d7f-195">Chai is the selected product and its details are displayed in the `ProductDetails` DetailsView, as shown in Figure 18.</span></span>

<span data-ttu-id="54d7f-196">[![les détails du produit sélectionné s’affichent dans un DetailsView](master-detail-filtering-with-two-dropdownlists-cs/_static/image53.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image52.png)</span><span class="sxs-lookup"><span data-stu-id="54d7f-196">[![The Selected Product's Details are Displayed in a DetailsView](master-detail-filtering-with-two-dropdownlists-cs/_static/image53.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image52.png)</span></span>

<span data-ttu-id="54d7f-197">**Figure 18**: les détails du produit sélectionné s’affichent dans un DetailsView ([cliquez pour afficher l’image en plein écran](master-detail-filtering-with-two-dropdownlists-cs/_static/image54.png))</span><span class="sxs-lookup"><span data-stu-id="54d7f-197">**Figure 18**: The Selected Product's Details are Displayed in a DetailsView ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image54.png))</span></span>

<span data-ttu-id="54d7f-198">Si vous modifiez la sélection de catégorie de boissons en condiments, une publication (postback) se produit et le `ProductsByCategory` DropDownList est mis à jour en conséquence, mais le DetailsView affiche toujours les détails pour Chai.</span><span class="sxs-lookup"><span data-stu-id="54d7f-198">If you change the category selection from Beverages to Condiments, a postback occurs and the `ProductsByCategory` DropDownList is updated accordingly, but the DetailsView still displays details for Chai.</span></span>

<span data-ttu-id="54d7f-199">[![les détails du produit précédemment sélectionné s’affichent toujours](master-detail-filtering-with-two-dropdownlists-cs/_static/image56.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image55.png)</span><span class="sxs-lookup"><span data-stu-id="54d7f-199">[![The Previously Selected Product's Details are Still Displayed](master-detail-filtering-with-two-dropdownlists-cs/_static/image56.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image55.png)</span></span>

<span data-ttu-id="54d7f-200">**Figure 19**: les détails du produit précédemment sélectionné sont toujours affichés ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-two-dropdownlists-cs/_static/image57.png))</span><span class="sxs-lookup"><span data-stu-id="54d7f-200">**Figure 19**: The Previously Selected Product's Details are Still Displayed ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image57.png))</span></span>

<span data-ttu-id="54d7f-201">Le choix d’un nouveau produit dans la liste actualise le DetailsView comme prévu.</span><span class="sxs-lookup"><span data-stu-id="54d7f-201">Picking a new product from the list refreshes the DetailsView as expected.</span></span> <span data-ttu-id="54d7f-202">Si vous choisissez une nouvelle catégorie après avoir modifié le produit, le contrôle DetailsView ne s’actualise pas.</span><span class="sxs-lookup"><span data-stu-id="54d7f-202">If you pick a new category after changing the product, the DetailsView again won't refresh.</span></span> <span data-ttu-id="54d7f-203">Toutefois, si au lieu de choisir un nouveau produit, vous avez sélectionné une nouvelle catégorie, le contrôle DetailsView est actualisé.</span><span class="sxs-lookup"><span data-stu-id="54d7f-203">However, if instead of choosing a new product you selected a new category, the DetailsView would refresh.</span></span> <span data-ttu-id="54d7f-204">Que se passe-t-il dans le monde ?</span><span class="sxs-lookup"><span data-stu-id="54d7f-204">What in the world is going on here?</span></span>

<span data-ttu-id="54d7f-205">Le problème est un problème de synchronisation dans le cycle de vie de la page.</span><span class="sxs-lookup"><span data-stu-id="54d7f-205">The problem is a timing issue in the page's lifecycle.</span></span> <span data-ttu-id="54d7f-206">Chaque fois qu’une page est demandée, elle passe par un certain nombre d’étapes comme son rendu.</span><span class="sxs-lookup"><span data-stu-id="54d7f-206">Whenever a page is requested it proceeds through a number of steps as its rendering.</span></span> <span data-ttu-id="54d7f-207">Dans l’une de ces étapes, les contrôles ObjectDataSource vérifient si l’une de leurs valeurs `SelectParameters` a été modifiée.</span><span class="sxs-lookup"><span data-stu-id="54d7f-207">In one of these steps the ObjectDataSource controls check to see if any of their `SelectParameters` values have changed.</span></span> <span data-ttu-id="54d7f-208">Si c’est le cas, le contrôle Web des données lié à l’ObjectDataSource sait qu’il doit actualiser son affichage.</span><span class="sxs-lookup"><span data-stu-id="54d7f-208">If so, the data Web control bound to the ObjectDataSource knows that it needs to refresh its display.</span></span> <span data-ttu-id="54d7f-209">Par exemple, lorsqu’une nouvelle catégorie est sélectionnée, le `ProductsByCategoryDataSource` ObjectDataSource détecte que ses valeurs de paramètres ont changé et le `ProductsByCategory` DropDownList se lie de nouveau, en obtenant les produits pour la catégorie sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="54d7f-209">For example, when a new category is selected, the `ProductsByCategoryDataSource` ObjectDataSource detects that its parameter values have changed and the `ProductsByCategory` DropDownList rebinds itself, getting the products for the selected category.</span></span>

<span data-ttu-id="54d7f-210">Le problème qui survient dans cette situation est que le point dans le cycle de vie de la page que le contrôle ObjectDataSources pour les paramètres modifiés se produit *avant* la reliaison des contrôles Web de données associés.</span><span class="sxs-lookup"><span data-stu-id="54d7f-210">The problem that arises in this situation is that the point in the page lifecycle that the ObjectDataSources check for changed parameters occurs *before* the rebinding of the associated data Web controls.</span></span> <span data-ttu-id="54d7f-211">Par conséquent, lors de la sélection d’une nouvelle catégorie, le `ProductsByCategoryDataSource` ObjectDataSource détecte une modification de sa valeur.</span><span class="sxs-lookup"><span data-stu-id="54d7f-211">Therefore, when selecting a new category the `ProductsByCategoryDataSource` ObjectDataSource detects a change in its parameter's value.</span></span> <span data-ttu-id="54d7f-212">Toutefois, l’ObjectDataSource utilisé par le `ProductDetails` DetailsView ne note pas de telles modifications, car le `ProductsByCategory` DropDownList n’a pas encore été relié.</span><span class="sxs-lookup"><span data-stu-id="54d7f-212">The ObjectDataSource used by the `ProductDetails` DetailsView, however, doesn't note any such changes because the `ProductsByCategory` DropDownList has yet to be rebound.</span></span> <span data-ttu-id="54d7f-213">Plus tard dans le cycle de vie, le `ProductsByCategory` DropDownList est lié à son ObjectDataSource, en saisissant les produits de la catégorie nouvellement sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="54d7f-213">Later in the lifecycle the `ProductsByCategory` DropDownList rebinds to its ObjectDataSource, grabbing the products for the newly selected category.</span></span> <span data-ttu-id="54d7f-214">Tandis que la valeur de la `ProductsByCategory` DropDownList a changé, le ObjectDataSource du `ProductDetails` DetailsView a déjà effectué la vérification de sa valeur de paramètre ; par conséquent, le contrôle DetailsView affiche ses résultats précédents.</span><span class="sxs-lookup"><span data-stu-id="54d7f-214">While the `ProductsByCategory` DropDownList's value has changed, the `ProductDetails` DetailsView's ObjectDataSource has already done its parameter value check; therefore, the DetailsView displays its previous results.</span></span> <span data-ttu-id="54d7f-215">Cette interaction est illustrée à la figure 20.</span><span class="sxs-lookup"><span data-stu-id="54d7f-215">This interaction is depicted in Figure 20.</span></span>

<span data-ttu-id="54d7f-216">[![la valeur DropDownList ProductsByCategory change après que l’ObjectDataSource de ProductDetails DetailsView a vérifié les modifications](master-detail-filtering-with-two-dropdownlists-cs/_static/image59.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image58.png)</span><span class="sxs-lookup"><span data-stu-id="54d7f-216">[![The ProductsByCategory DropDownList Value Changes After the ProductDetails DetailsView's ObjectDataSource Checks for Changes](master-detail-filtering-with-two-dropdownlists-cs/_static/image59.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image58.png)</span></span>

<span data-ttu-id="54d7f-217">**Figure 20**: la valeur de la `ProductsByCategory` DropDownList change après que l’ObjectDataSource du `ProductDetails` DetailsView a vérifié les modifications ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-two-dropdownlists-cs/_static/image60.png))</span><span class="sxs-lookup"><span data-stu-id="54d7f-217">**Figure 20**: The `ProductsByCategory` DropDownList Value Changes After the `ProductDetails` DetailsView's ObjectDataSource Checks for Changes ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image60.png))</span></span>

<span data-ttu-id="54d7f-218">Pour remédier à cela, nous devons lier explicitement la `ProductDetails` DetailsView une fois que le contrôle DropDownList `ProductsByCategory` a été lié.</span><span class="sxs-lookup"><span data-stu-id="54d7f-218">To remedy this we need to explicitly rebind the `ProductDetails` DetailsView after the `ProductsByCategory` DropDownList has been bound.</span></span> <span data-ttu-id="54d7f-219">Pour ce faire, nous appelons la méthode `DataBind()` de `ProductDetails` DetailsView lorsque l’événement `DataBound` de `ProductsByCategory` DropDownList est déclenché.</span><span class="sxs-lookup"><span data-stu-id="54d7f-219">We can accomplish this by calling the `ProductDetails` DetailsView's `DataBind()` method when the `ProductsByCategory` DropDownList's `DataBound` event fires.</span></span> <span data-ttu-id="54d7f-220">Ajoutez le code de gestionnaire d’événements suivant à la classe code-behind de la page `MasterDetailsDetails.aspx` (reportez-vous à la section «[définition par programmation des valeurs de paramètre ObjectDataSource](../basic-reporting/programmatically-setting-the-objectdatasource-s-parameter-values-cs.md)» pour une discussion sur l’ajout d’un gestionnaire d’événements) :</span><span class="sxs-lookup"><span data-stu-id="54d7f-220">Add the following event handler code to the `MasterDetailsDetails.aspx` page's code-behind class (refer to the "[Programmatically Setting the ObjectDataSource's Parameter Values](../basic-reporting/programmatically-setting-the-objectdatasource-s-parameter-values-cs.md)" for a discussion on how to add an event handler):</span></span>

[!code-csharp[Main](master-detail-filtering-with-two-dropdownlists-cs/samples/sample2.cs)]

<span data-ttu-id="54d7f-221">Après l’ajout de cet appel explicite à la méthode `DataBind()` de `ProductDetails` DetailsView, le didacticiel fonctionne comme prévu.</span><span class="sxs-lookup"><span data-stu-id="54d7f-221">After this explicit call to the `ProductDetails` DetailsView's `DataBind()` method has been added, the tutorial works as expected.</span></span> <span data-ttu-id="54d7f-222">La figure 21 met en évidence la manière dont le problème précédent a été résolu.</span><span class="sxs-lookup"><span data-stu-id="54d7f-222">Figure 21 highlights how this changed remedied our earlier problem.</span></span>

<span data-ttu-id="54d7f-223">[![le DetailsView ProductDetails est actualisé de manière explicite lorsque l’événement DataBound de ProductsByCategory DropDownList est déclenché](master-detail-filtering-with-two-dropdownlists-cs/_static/image62.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image61.png)</span><span class="sxs-lookup"><span data-stu-id="54d7f-223">[![The ProductDetails DetailsView is Explicitly Refreshed When the ProductsByCategory DropDownList's DataBound Event Fires](master-detail-filtering-with-two-dropdownlists-cs/_static/image62.png)](master-detail-filtering-with-two-dropdownlists-cs/_static/image61.png)</span></span>

<span data-ttu-id="54d7f-224">**Figure 21**: le `ProductDetails` DetailsView est actualisé de manière explicite lorsque l’événement `DataBound` de la `ProductsByCategory` DropDownList est déclenché ([cliquez pour afficher l’image en taille réelle](master-detail-filtering-with-two-dropdownlists-cs/_static/image63.png))</span><span class="sxs-lookup"><span data-stu-id="54d7f-224">**Figure 21**: The `ProductDetails` DetailsView is Explicitly Refreshed When the `ProductsByCategory` DropDownList's `DataBound` Event Fires ([Click to view full-size image](master-detail-filtering-with-two-dropdownlists-cs/_static/image63.png))</span></span>

## <a name="summary"></a><span data-ttu-id="54d7f-225">Récapitulatif</span><span class="sxs-lookup"><span data-stu-id="54d7f-225">Summary</span></span>

<span data-ttu-id="54d7f-226">Le DropDownList constitue un élément d’interface utilisateur idéal pour les rapports maître/détail dans lesquels il existe une relation un-à-plusieurs entre les enregistrements maître et détail.</span><span class="sxs-lookup"><span data-stu-id="54d7f-226">The DropDownList serves as an ideal user interface element for master/detail reports where there is a one-to-many relationship between the master and detail records.</span></span> <span data-ttu-id="54d7f-227">Dans le didacticiel précédent, nous avons vu comment utiliser un seul DropDownList pour filtrer les produits affichés par la catégorie sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="54d7f-227">In the preceding tutorial we saw how to use a single DropDownList to filter the products displayed by the selected category.</span></span> <span data-ttu-id="54d7f-228">Dans ce didacticiel, nous avons remplacé le contrôle GridView des produits par un contrôle DropDownList et utilisé un contrôle DetailsView pour afficher les détails du produit sélectionné.</span><span class="sxs-lookup"><span data-stu-id="54d7f-228">In this tutorial we replaced the GridView of products with a DropDownList, and used a DetailsView to display the details of the selected product.</span></span> <span data-ttu-id="54d7f-229">Les concepts abordés dans ce didacticiel peuvent être facilement étendus aux modèles de données impliquant plusieurs relations un-à-plusieurs, telles que les clients, les commandes et les Articles de commande.</span><span class="sxs-lookup"><span data-stu-id="54d7f-229">The concepts discussed in this tutorial can easily be extended to data models involving multiple one-to-many relationships, such as customers, orders, and order items.</span></span> <span data-ttu-id="54d7f-230">En général, vous pouvez toujours ajouter un DropDownList pour chacune des entités « une » dans les relations un-à-plusieurs.</span><span class="sxs-lookup"><span data-stu-id="54d7f-230">In general, you can always add a DropDownList for each of the "one" entities in the one-to-many relationships.</span></span>

<span data-ttu-id="54d7f-231">Bonne programmation !</span><span class="sxs-lookup"><span data-stu-id="54d7f-231">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="54d7f-232">À propos de l’auteur</span><span class="sxs-lookup"><span data-stu-id="54d7f-232">About the Author</span></span>

<span data-ttu-id="54d7f-233">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), auteur de sept livres ASP/ASP. net et fondateur de [4GuysFromRolla.com](http://www.4guysfromrolla.com), travaille avec des technologies Web Microsoft depuis 1998.</span><span class="sxs-lookup"><span data-stu-id="54d7f-233">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="54d7f-234">Scott travaille en tant que consultant, formateur et auteur indépendant.</span><span class="sxs-lookup"><span data-stu-id="54d7f-234">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="54d7f-235">Son dernier livre est [*Sams vous apprend vous-même ASP.NET 2,0 en 24 heures*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="54d7f-235">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="54d7f-236">Il peut être contacté à [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="54d7f-236">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="54d7f-237">ou via son blog, qui se trouve sur [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="54d7f-237">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="54d7f-238">Remerciements à</span><span class="sxs-lookup"><span data-stu-id="54d7f-238">Special Thanks To</span></span>

<span data-ttu-id="54d7f-239">Cette série de didacticiels a été examinée par de nombreux réviseurs utiles.</span><span class="sxs-lookup"><span data-stu-id="54d7f-239">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="54d7f-240">Le réviseur de leads pour ce didacticiel était Hilton Giesenow.</span><span class="sxs-lookup"><span data-stu-id="54d7f-240">Lead reviewer for this tutorial was Hilton Giesenow.</span></span> <span data-ttu-id="54d7f-241">Vous souhaitez revoir mes prochains articles MSDN ?</span><span class="sxs-lookup"><span data-stu-id="54d7f-241">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="54d7f-242">Si c’est le cas, insérez une ligne sur [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="54d7f-242">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="54d7f-243">[Précédent](master-detail-filtering-with-a-dropdownlist-cs.md)
> [Suivant](master-detail-filtering-across-two-pages-cs.md)</span><span class="sxs-lookup"><span data-stu-id="54d7f-243">[Previous](master-detail-filtering-with-a-dropdownlist-cs.md)
[Next](master-detail-filtering-across-two-pages-cs.md)</span></span>

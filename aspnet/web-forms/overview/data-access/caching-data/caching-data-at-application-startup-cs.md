---
uid: web-forms/overview/data-access/caching-data/caching-data-at-application-startup-cs
title: Mise en cache des données auC#démarrage de l’application () | Microsoft Docs
author: rick-anderson
description: Dans toutes les applications Web, certaines données seront fréquemment utilisées et certaines données seront rarement utilisées. Nous pouvons améliorer les performances de notre application ASP.NET b...
ms.author: riande
ms.date: 05/30/2007
ms.assetid: 22ca8efa-7cd1-45a7-b9ce-ce6eb3b3ff95
msc.legacyurl: /web-forms/overview/data-access/caching-data/caching-data-at-application-startup-cs
msc.type: authoredcontent
ms.openlocfilehash: a0b55b0df1b7843120de284891e16178df23fabe
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78576908"
---
# <a name="caching-data-at-application-startup-c"></a><span data-ttu-id="0031b-104">Mise en cache de données au démarrage de l’application (C#)</span><span class="sxs-lookup"><span data-stu-id="0031b-104">Caching Data at Application Startup (C#)</span></span>

<span data-ttu-id="0031b-105">par [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="0031b-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

[<span data-ttu-id="0031b-106">Télécharger PDF</span><span class="sxs-lookup"><span data-stu-id="0031b-106">Download PDF</span></span>](caching-data-at-application-startup-cs/_static/datatutorial60cs1.pdf)

> <span data-ttu-id="0031b-107">Dans toutes les applications Web, certaines données seront fréquemment utilisées et certaines données seront rarement utilisées.</span><span class="sxs-lookup"><span data-stu-id="0031b-107">In any Web application some data will be frequently used and some data will be infrequently used.</span></span> <span data-ttu-id="0031b-108">Nous pouvons améliorer les performances de notre application ASP.NET en chargeant à l’avance les données fréquemment utilisées, une technique appelée Caching.</span><span class="sxs-lookup"><span data-stu-id="0031b-108">We can improve the performance of our ASP.NET application by loading in advance the frequently-used data, a technique known as Caching.</span></span> <span data-ttu-id="0031b-109">Ce didacticiel présente une approche du chargement proactif, qui consiste à charger des données dans le cache au démarrage de l’application.</span><span class="sxs-lookup"><span data-stu-id="0031b-109">This tutorial demonstrates one approach to proactive loading, which is to load data into the cache at application startup.</span></span>

## <a name="introduction"></a><span data-ttu-id="0031b-110">Introduction</span><span class="sxs-lookup"><span data-stu-id="0031b-110">Introduction</span></span>

<span data-ttu-id="0031b-111">Les deux didacticiels précédents ont examiné la mise en cache des données dans les couches de présentation et de mise en cache.</span><span class="sxs-lookup"><span data-stu-id="0031b-111">The two previous tutorials looked at caching data in the Presentation and Caching Layers.</span></span> <span data-ttu-id="0031b-112">Lors de la [mise en cache des données avec ObjectDataSource](caching-data-with-the-objectdatasource-cs.md), nous avons examiné l’utilisation des fonctionnalités de mise en cache d’ObjectDataSource pour mettre en cache les données dans la couche de présentation.</span><span class="sxs-lookup"><span data-stu-id="0031b-112">In [Caching Data with the ObjectDataSource](caching-data-with-the-objectdatasource-cs.md), we looked at using the ObjectDataSource's caching features to cache data in the Presentation Layer.</span></span> <span data-ttu-id="0031b-113">[La mise en cache des données dans l’architecture](caching-data-in-the-architecture-cs.md) a examiné la mise en cache dans une nouvelle couche de mise en cache distincte.</span><span class="sxs-lookup"><span data-stu-id="0031b-113">[Caching Data in the Architecture](caching-data-in-the-architecture-cs.md) examined caching in a new, separate Caching Layer.</span></span> <span data-ttu-id="0031b-114">Ces deux didacticiels ont utilisé le *chargement réactif* dans l’utilisation du cache de données.</span><span class="sxs-lookup"><span data-stu-id="0031b-114">Both of these tutorials used *reactive loading* in working with the data cache.</span></span> <span data-ttu-id="0031b-115">Avec le chargement réactif, chaque fois que les données sont demandées, le système vérifie d’abord s’il se trouve dans le cache.</span><span class="sxs-lookup"><span data-stu-id="0031b-115">With reactive loading, each time the data is requested, the system first checks if it's in the cache.</span></span> <span data-ttu-id="0031b-116">Si ce n’est pas le cas, il récupère les données de la source d’origine, telles que la base de données, puis les stocke dans le cache.</span><span class="sxs-lookup"><span data-stu-id="0031b-116">If not, it grabs the data from the originating source, such as the database, and then stores it in the cache.</span></span> <span data-ttu-id="0031b-117">Le principal avantage du chargement réactif est sa facilité d’implémentation.</span><span class="sxs-lookup"><span data-stu-id="0031b-117">The main advantage to reactive loading is its ease of implementation.</span></span> <span data-ttu-id="0031b-118">L’un de ses inconvénients est sa performance inégale entre les requêtes.</span><span class="sxs-lookup"><span data-stu-id="0031b-118">One of its disadvantages is its uneven performance across requests.</span></span> <span data-ttu-id="0031b-119">Imaginez une page qui utilise la couche de mise en cache du didacticiel précédent pour afficher des informations sur le produit.</span><span class="sxs-lookup"><span data-stu-id="0031b-119">Imagine a page that uses the Caching Layer from the preceding tutorial to display product information.</span></span> <span data-ttu-id="0031b-120">Lorsque cette page est visitée pour la première fois, ou lorsqu’elle est visitée pour la première fois après la suppression des données mises en cache en raison de contraintes de mémoire ou si l’expiration spécifiée a été atteinte, les données doivent être récupérées de la base de données.</span><span class="sxs-lookup"><span data-stu-id="0031b-120">When this page is visited for the first time, or visited for the first time after the cached data has been evicted due to memory constraints or the specified expiry having been reached, the data must be retrieved from the database.</span></span> <span data-ttu-id="0031b-121">Par conséquent, les demandes des utilisateurs prendront plus de temps que les demandes des utilisateurs qui peuvent être traitées par le cache.</span><span class="sxs-lookup"><span data-stu-id="0031b-121">Therefore, these users requests will take longer than users requests that can be served by the cache.</span></span>

<span data-ttu-id="0031b-122">Le *chargement proactif* offre une autre stratégie de gestion du cache qui permet de lisser les performances entre les demandes en chargeant les données mises en cache avant qu’elles ne soient nécessaires.</span><span class="sxs-lookup"><span data-stu-id="0031b-122">*Proactive loading* provides an alternative cache management strategy that smoothes out the performance across requests by loading the cached data before it's needed.</span></span> <span data-ttu-id="0031b-123">En règle générale, le chargement proactif utilise un processus qui vérifie périodiquement ou est averti lorsqu’une mise à jour a été effectuée sur les données sous-jacentes.</span><span class="sxs-lookup"><span data-stu-id="0031b-123">Typically, proactive loading uses some process that either periodically checks or is notified when there has been an update to the underlying data.</span></span> <span data-ttu-id="0031b-124">Ce processus met ensuite à jour le cache pour le conserver à nouveau.</span><span class="sxs-lookup"><span data-stu-id="0031b-124">This process then updates the cache to keep it fresh.</span></span> <span data-ttu-id="0031b-125">Le chargement proactif est particulièrement utile si les données sous-jacentes proviennent d’une connexion lente à la base de données, d’un service Web ou d’une source de données particulièrement lente.</span><span class="sxs-lookup"><span data-stu-id="0031b-125">Proactive loading is especially useful if the underlying data comes from a slow database connection, a Web service, or some other particularly sluggish data source.</span></span> <span data-ttu-id="0031b-126">Toutefois, cette approche du chargement proactif est plus difficile à implémenter, car elle nécessite la création, la gestion et le déploiement d’un processus pour vérifier les modifications et mettre à jour le cache.</span><span class="sxs-lookup"><span data-stu-id="0031b-126">But this approach to proactive loading is more difficult to implement, as it requires creating, managing, and deploying a process to check for changes and update the cache.</span></span>

<span data-ttu-id="0031b-127">Une autre version du chargement proactif, et le type que nous allons explorer dans ce didacticiel, chargent les données dans le cache au démarrage de l’application.</span><span class="sxs-lookup"><span data-stu-id="0031b-127">Another flavor of proactive loading, and the type we'll be exploring in this tutorial, is loading data into the cache at application startup.</span></span> <span data-ttu-id="0031b-128">Cette approche est particulièrement utile pour mettre en cache des données statiques, telles que les enregistrements dans les tables de recherche de base de données.</span><span class="sxs-lookup"><span data-stu-id="0031b-128">This approach is especially useful for caching static data, such as the records in database lookup tables.</span></span>

> [!NOTE]
> <span data-ttu-id="0031b-129">Pour plus d’informations sur les différences entre le chargement proactif et réactif, ainsi que sur les listes des avantages, les inconvénients et les recommandations d’implémentation, reportez-vous à la section [gestion du contenu d’un cache](https://msdn.microsoft.com/library/ms978503.aspx) du [Guide d’architecture de mise en cache pour les applications .NET Framework](https://msdn.microsoft.com/library/ms978498.aspx).</span><span class="sxs-lookup"><span data-stu-id="0031b-129">For a more in-depth look at the differences between proactive and reactive loading, as well as lists of pros, cons, and implementation recommendations, refer to the [Managing the Contents of a Cache](https://msdn.microsoft.com/library/ms978503.aspx) section of the [Caching Architecture Guide for .NET Framework Applications](https://msdn.microsoft.com/library/ms978498.aspx).</span></span>

## <a name="step-1-determining-what-data-to-cache-at-application-startup"></a><span data-ttu-id="0031b-130">Étape 1 : détermination des données à mettre en cache au démarrage de l’application</span><span class="sxs-lookup"><span data-stu-id="0031b-130">Step 1: Determining What Data to Cache at Application Startup</span></span>

<span data-ttu-id="0031b-131">Les exemples de mise en cache qui utilisent le chargement réactif que nous avons examinés dans les deux didacticiels précédents fonctionnent bien avec les données qui peuvent changer régulièrement et ne prend pas exorbitantly de temps à générer.</span><span class="sxs-lookup"><span data-stu-id="0031b-131">The caching examples using reactive loading that we examined in the previous two tutorials work well with data that may periodically change and does not take exorbitantly long to generate.</span></span> <span data-ttu-id="0031b-132">Toutefois, si les données mises en cache ne changent jamais, l’expiration utilisée par le chargement réactif est superflue.</span><span class="sxs-lookup"><span data-stu-id="0031b-132">But if the cached data never changes, the expiry used by reactive loading is superfluous.</span></span> <span data-ttu-id="0031b-133">De même, si la génération des données mises en cache prend beaucoup de temps, alors les utilisateurs dont les demandes recherchent le cache vide devront supporter une longue attente pendant l’extraction des données sous-jacentes.</span><span class="sxs-lookup"><span data-stu-id="0031b-133">Likewise, if the data being cached takes an exceedingly long time to generate, then those users whose requests find the cache empty will have to endure a lengthy wait while the underlying data is retrieved.</span></span> <span data-ttu-id="0031b-134">Envisagez de mettre en cache des données et des données statiques qui prennent un temps exceptionnellement long pour la génération au démarrage de l’application.</span><span class="sxs-lookup"><span data-stu-id="0031b-134">Consider caching static data and data that takes an exceptionally long time to generate at application startup.</span></span>

<span data-ttu-id="0031b-135">Bien que les bases de données aient de nombreuses valeurs dynamiques et changeantes, elles ont également une quantité de données statiques équitable.</span><span class="sxs-lookup"><span data-stu-id="0031b-135">While databases have many dynamic, frequently-changing values, most also have a fair amount of static data.</span></span> <span data-ttu-id="0031b-136">Par exemple, presque tous les modèles de données ont une ou plusieurs colonnes qui contiennent une valeur particulière d’un ensemble fixe de choix.</span><span class="sxs-lookup"><span data-stu-id="0031b-136">For example, virtually all data models have one or more columns that contain a particular value from a fixed set of choices.</span></span> <span data-ttu-id="0031b-137">Une `Patients` table de base de données peut avoir une `PrimaryLanguage` colonne, dont l’ensemble de valeurs peut être l’anglais, l’espagnol, le français, le russe, le japonais, etc.</span><span class="sxs-lookup"><span data-stu-id="0031b-137">A `Patients` database table might have a `PrimaryLanguage` column, whose set of values could be English, Spanish, French, Russian, Japanese, and so on.</span></span> <span data-ttu-id="0031b-138">Ces types de colonnes sont souvent implémentés à l’aide de *tables de choix*.</span><span class="sxs-lookup"><span data-stu-id="0031b-138">Oftentimes, these types of columns are implemented using *lookup tables*.</span></span> <span data-ttu-id="0031b-139">Au lieu de stocker la chaîne anglais ou français dans la table `Patients`, une deuxième table est créée avec, généralement, deux colonnes : un identificateur unique et une description de chaîne, avec un enregistrement pour chaque valeur possible.</span><span class="sxs-lookup"><span data-stu-id="0031b-139">Rather than storing the string English or French in the `Patients` table, a second table is created that has, commonly, two columns - a unique identifier and a string description - with a record for each possible value.</span></span> <span data-ttu-id="0031b-140">La colonne `PrimaryLanguage` de la table `Patients` stocke l’identificateur unique correspondant dans la table de recherche.</span><span class="sxs-lookup"><span data-stu-id="0031b-140">The `PrimaryLanguage` column in the `Patients` table stores the corresponding unique identifier in the lookup table.</span></span> <span data-ttu-id="0031b-141">Dans la figure 1, la langue principale du patient John Doe est l’anglais, tandis que Ed Johnson est russe.</span><span class="sxs-lookup"><span data-stu-id="0031b-141">In Figure 1, patient John Doe's primary language is English, while Ed Johnson's is Russian.</span></span>

![La table de langues est une table de recherche utilisée par la table patients](caching-data-at-application-startup-cs/_static/image1.png)

<span data-ttu-id="0031b-143">**Figure 1**: la table de `Languages` est une table de recherche utilisée par la table `Patients`</span><span class="sxs-lookup"><span data-stu-id="0031b-143">**Figure 1**: The `Languages` Table is a Lookup Table Used by the `Patients` Table</span></span>

<span data-ttu-id="0031b-144">L’interface utilisateur pour la modification ou la création d’un nouveau patient inclut une liste déroulante des langues autorisées remplies par les enregistrements dans la table `Languages`.</span><span class="sxs-lookup"><span data-stu-id="0031b-144">The user interface for editing or creating a new patient would include a drop-down list of allowable languages populated by the records in the `Languages` table.</span></span> <span data-ttu-id="0031b-145">Sans mise en cache, chaque fois que cette interface est visitée, le système doit interroger la table `Languages`.</span><span class="sxs-lookup"><span data-stu-id="0031b-145">Without caching, each time this interface is visited the system must query the `Languages` table.</span></span> <span data-ttu-id="0031b-146">C’est un gaspillage et inutile, car les valeurs de la table de recherche changent très rarement, si jamais.</span><span class="sxs-lookup"><span data-stu-id="0031b-146">This is wasteful and unnecessary since lookup table values change very infrequently, if ever.</span></span>

<span data-ttu-id="0031b-147">Nous pourrions mettre en cache les données `Languages` à l’aide des mêmes techniques de chargement réactives que celles étudiées dans les didacticiels précédents.</span><span class="sxs-lookup"><span data-stu-id="0031b-147">We could cache the `Languages` data using the same reactive loading techniques examined in the previous tutorials.</span></span> <span data-ttu-id="0031b-148">Toutefois, le chargement réactif utilise une expiration basée sur la durée, ce qui n’est pas nécessaire pour les données de table de recherche statique.</span><span class="sxs-lookup"><span data-stu-id="0031b-148">Reactive loading, however, uses a time-based expiry, which is not needed for static lookup table data.</span></span> <span data-ttu-id="0031b-149">Bien que la mise en cache à l’aide du chargement réactif soit meilleure qu’aucune mise en cache, la meilleure approche consiste à charger de manière proactive les données de la table de recherche dans le cache au démarrage de l’application.</span><span class="sxs-lookup"><span data-stu-id="0031b-149">While caching using reactive loading would be better than no caching at all, the best approach would be to proactively load the lookup table data into the cache at application startup.</span></span>

<span data-ttu-id="0031b-150">Dans ce didacticiel, nous allons examiner comment mettre en cache les données de table de recherche et d’autres informations statiques.</span><span class="sxs-lookup"><span data-stu-id="0031b-150">In this tutorial we will look at how to cache lookup table data and other static information.</span></span>

## <a name="step-2-examining-the-different-ways-to-cache-data"></a><span data-ttu-id="0031b-151">Étape 2 : examen des différentes façons de mettre en cache des données</span><span class="sxs-lookup"><span data-stu-id="0031b-151">Step 2: Examining the Different Ways to Cache Data</span></span>

<span data-ttu-id="0031b-152">Les informations peuvent être mises en cache par programmation dans une application ASP.NET à l’aide d’une variété d’approches.</span><span class="sxs-lookup"><span data-stu-id="0031b-152">Information can be programmatically cached in an ASP.NET application using a variety of approaches.</span></span> <span data-ttu-id="0031b-153">Nous avons déjà vu comment utiliser le cache de données dans les didacticiels précédents.</span><span class="sxs-lookup"><span data-stu-id="0031b-153">We ve already seen how to use the data cache in previous tutorials.</span></span> <span data-ttu-id="0031b-154">Les objets peuvent également être mis en cache par programmation à l’aide de *membres statiques* ou de l’état de l' *application*.</span><span class="sxs-lookup"><span data-stu-id="0031b-154">Alternatively, objects can be programmatically cached using *static members* or *application state*.</span></span>

<span data-ttu-id="0031b-155">Lorsque vous utilisez une classe, en général, la classe doit d’abord être instanciée pour pouvoir accéder à ses membres.</span><span class="sxs-lookup"><span data-stu-id="0031b-155">When working with a class, typically the class must first be instantiated before its members can be accessed.</span></span> <span data-ttu-id="0031b-156">Par exemple, pour appeler une méthode à partir de l’une des classes de notre couche de logique métier, nous devons d’abord créer une instance de la classe :</span><span class="sxs-lookup"><span data-stu-id="0031b-156">For example, in order to invoke a method from one of the classes in our Business Logic Layer, we must first create an instance of the class:</span></span>

[!code-csharp[Main](caching-data-at-application-startup-cs/samples/sample1.cs)]

<span data-ttu-id="0031b-157">Avant de pouvoir appeler *SomeMethod* ou Work with *SomeProperty*, nous devons d’abord créer une instance de la classe à l’aide du mot clé `new`.</span><span class="sxs-lookup"><span data-stu-id="0031b-157">Before we can invoke *SomeMethod* or work with *SomeProperty*, we must first create an instance of the class using the `new` keyword.</span></span> <span data-ttu-id="0031b-158">*SomeMethod* et *SomeProperty* sont associés à une instance particulière.</span><span class="sxs-lookup"><span data-stu-id="0031b-158">*SomeMethod* and *SomeProperty* are associated with a particular instance.</span></span> <span data-ttu-id="0031b-159">La durée de vie de ces membres est liée à la durée de vie de l’objet associé.</span><span class="sxs-lookup"><span data-stu-id="0031b-159">The lifetime of these members is tied to the lifetime of their associated object.</span></span> <span data-ttu-id="0031b-160">Les *membres statiques*, quant à eux, sont des variables, des propriétés et des méthodes qui sont partagées entre *toutes les* instances de la classe et, par conséquent, ont une durée de vie aussi longue que la classe.</span><span class="sxs-lookup"><span data-stu-id="0031b-160">*Static members*, on the other hand, are variables, properties, and methods that are shared among *all* instances of the class and, consequently, have a lifetime as long as the class.</span></span> <span data-ttu-id="0031b-161">Les membres statiques sont dénotés par le mot clé `static`.</span><span class="sxs-lookup"><span data-stu-id="0031b-161">Static members are denoted by the keyword `static`.</span></span>

<span data-ttu-id="0031b-162">En plus des membres statiques, les données peuvent être mises en cache à l’aide de l’état de l’application.</span><span class="sxs-lookup"><span data-stu-id="0031b-162">In addition to static members, data can be cached using application state.</span></span> <span data-ttu-id="0031b-163">Chaque application ASP.NET gère une collection nom/valeur qui est partagée entre tous les utilisateurs et les pages de l’application.</span><span class="sxs-lookup"><span data-stu-id="0031b-163">Each ASP.NET application maintains a name/value collection that's shared across all users and pages of the application.</span></span> <span data-ttu-id="0031b-164">Cette collection est accessible à l’aide de la [propriété`Application`](https://msdn.microsoft.com/library/system.web.httpcontext.application.aspx)de la [classe`HttpContext`](https://msdn.microsoft.com/library/system.web.httpcontext.aspx)et utilisée à partir de la classe code-behind d’une page ASP.net, comme suit :</span><span class="sxs-lookup"><span data-stu-id="0031b-164">This collection can be accessed using the [`HttpContext` class](https://msdn.microsoft.com/library/system.web.httpcontext.aspx)'s [`Application` property](https://msdn.microsoft.com/library/system.web.httpcontext.application.aspx), and used from an ASP.NET page's code-behind class like so:</span></span>

[!code-csharp[Main](caching-data-at-application-startup-cs/samples/sample2.cs)]

<span data-ttu-id="0031b-165">Le cache de données fournit une API beaucoup plus riche pour la mise en cache des données, en fournissant des mécanismes pour les expirations basées sur le temps et la dépendance, les priorités des éléments de cache, etc.</span><span class="sxs-lookup"><span data-stu-id="0031b-165">The data cache provides a much richer API for caching data, providing mechanisms for time- and dependency-based expiries, cache item priorities, and so forth.</span></span> <span data-ttu-id="0031b-166">Avec les membres statiques et l’état de l’application, ces fonctionnalités doivent être ajoutées manuellement par le développeur de pages.</span><span class="sxs-lookup"><span data-stu-id="0031b-166">With static members and application state, such features must be manually added by the page developer.</span></span> <span data-ttu-id="0031b-167">Toutefois, lors de la mise en cache des données au démarrage de l’application pendant la durée de vie de l’application, les avantages du cache de données sont discutable.</span><span class="sxs-lookup"><span data-stu-id="0031b-167">When caching data at application startup for the lifetime of the application, however, the data cache's advantages are moot.</span></span> <span data-ttu-id="0031b-168">Dans ce didacticiel, nous allons examiner le code qui utilise les trois techniques de mise en cache des données statiques.</span><span class="sxs-lookup"><span data-stu-id="0031b-168">In this tutorial we'll look at code that uses all three techniques for caching static data.</span></span>

## <a name="step-3-caching-thesupplierstable-data"></a><span data-ttu-id="0031b-169">Étape 3 : mise en cache des données de la table`Suppliers`</span><span class="sxs-lookup"><span data-stu-id="0031b-169">Step 3: Caching the`Suppliers`Table Data</span></span>

<span data-ttu-id="0031b-170">Les tables de base de données Northwind que nous avons implémentées jusqu’à ce jour n’incluent pas les tables de recherche traditionnelles.</span><span class="sxs-lookup"><span data-stu-id="0031b-170">The Northwind database tables we ve implemented to date do not include any traditional lookup tables.</span></span> <span data-ttu-id="0031b-171">Les quatre DataTables implémentés dans notre couche DAL toutes les tables de modèle dont les valeurs sont non statiques.</span><span class="sxs-lookup"><span data-stu-id="0031b-171">The four DataTables implemented in our DAL all model tables whose values are non-static.</span></span> <span data-ttu-id="0031b-172">Plutôt que de passer le temps d’ajouter un nouveau DataTable à la couche DAL, puis une nouvelle classe et de nouvelles méthodes à la couche BLL, pour ce didacticiel, nous supposons simplement que les données de la table `Suppliers` sont statiques.</span><span class="sxs-lookup"><span data-stu-id="0031b-172">Rather than spending the time to add a new DataTable to the DAL and then a new class and methods to the BLL, for this tutorial let's just pretend that the `Suppliers` table's data is static.</span></span> <span data-ttu-id="0031b-173">Par conséquent, nous pourrions mettre en cache ces données au démarrage de l’application.</span><span class="sxs-lookup"><span data-stu-id="0031b-173">Therefore, we could cache this data at application startup.</span></span>

<span data-ttu-id="0031b-174">Pour commencer, créez une nouvelle classe nommée `StaticCache.cs` dans le dossier `CL`.</span><span class="sxs-lookup"><span data-stu-id="0031b-174">To start, create a new class named `StaticCache.cs` in the `CL` folder.</span></span>

![Créer la classe StaticCache.cs dans le dossier CL](caching-data-at-application-startup-cs/_static/image2.png)

<span data-ttu-id="0031b-176">**Figure 2**: créer la classe `StaticCache.cs` dans le dossier `CL`</span><span class="sxs-lookup"><span data-stu-id="0031b-176">**Figure 2**: Create the `StaticCache.cs` Class in the `CL` Folder</span></span>

<span data-ttu-id="0031b-177">Nous devons ajouter une méthode qui charge les données au démarrage dans le magasin de cache approprié, ainsi que les méthodes qui retournent des données à partir de ce cache.</span><span class="sxs-lookup"><span data-stu-id="0031b-177">We need to add a method that loads the data at startup into the appropriate cache store, as well as methods that return data from this cache.</span></span>

[!code-csharp[Main](caching-data-at-application-startup-cs/samples/sample3.cs)]

<span data-ttu-id="0031b-178">Le code ci-dessus utilise une variable membre statique, `suppliers`, pour contenir les résultats de la méthode `GetSuppliers()` de la classe `SuppliersBLL`, qui est appelée à partir de la méthode `LoadStaticCache()`.</span><span class="sxs-lookup"><span data-stu-id="0031b-178">The above code uses a static member variable, `suppliers`, to hold the results from the `SuppliersBLL` class's `GetSuppliers()` method, which is called from the `LoadStaticCache()` method.</span></span> <span data-ttu-id="0031b-179">La méthode `LoadStaticCache()` est destinée à être appelée pendant le démarrage de l’application.</span><span class="sxs-lookup"><span data-stu-id="0031b-179">The `LoadStaticCache()` method is meant to be called during the application's start.</span></span> <span data-ttu-id="0031b-180">Une fois que ces données ont été chargées au démarrage de l’application, toute page devant fonctionner avec des données de fournisseur peut appeler la méthode `GetSuppliers()` de la classe `StaticCache`.</span><span class="sxs-lookup"><span data-stu-id="0031b-180">Once this data has been loaded at application startup, any page that needs to work with supplier data can call the `StaticCache` class's `GetSuppliers()` method.</span></span> <span data-ttu-id="0031b-181">Par conséquent, l’appel à la base de données pour récupérer les fournisseurs ne se produit qu’une seule fois, au démarrage de l’application.</span><span class="sxs-lookup"><span data-stu-id="0031b-181">Therefore, the call to the database to get the suppliers only happens once, at application start.</span></span>

<span data-ttu-id="0031b-182">Au lieu d’utiliser une variable de membre statique comme stockage de cache, nous aurions pu utiliser l’état de l’application ou le cache de données.</span><span class="sxs-lookup"><span data-stu-id="0031b-182">Rather than using a static member variable as the cache store, we could have alternatively used application state or the data cache.</span></span> <span data-ttu-id="0031b-183">Le code suivant illustre la classe reoutils pour utiliser l’état de l’application :</span><span class="sxs-lookup"><span data-stu-id="0031b-183">The following code shows the class retooled to use application state:</span></span>

[!code-csharp[Main](caching-data-at-application-startup-cs/samples/sample4.cs)]

<span data-ttu-id="0031b-184">Dans `LoadStaticCache()`, les informations sur les fournisseurs sont stockées dans la *clé*de la variable d’application.</span><span class="sxs-lookup"><span data-stu-id="0031b-184">In `LoadStaticCache()`, the supplier information is stored to the application variable *key*.</span></span> <span data-ttu-id="0031b-185">Elle est retournée en tant que type approprié (`Northwind.SuppliersDataTable`) à partir de `GetSuppliers()`.</span><span class="sxs-lookup"><span data-stu-id="0031b-185">It's returned as the appropriate type (`Northwind.SuppliersDataTable`) from `GetSuppliers()`.</span></span> <span data-ttu-id="0031b-186">Tandis que l’état de l’application est accessible dans les classes code-behind des pages ASP.NET à l’aide de `Application["key"]`, dans l’architecture, nous devons utiliser `HttpContext.Current.Application["key"]` afin d’accéder au `HttpContext`actuel.</span><span class="sxs-lookup"><span data-stu-id="0031b-186">While application state can be accessed in the code-behind classes of ASP.NET pages using `Application["key"]`, in the architecture we must use `HttpContext.Current.Application["key"]` in order to get the current `HttpContext`.</span></span>

<span data-ttu-id="0031b-187">De même, le cache de données peut être utilisé comme un magasin de cache, comme le montre le code suivant :</span><span class="sxs-lookup"><span data-stu-id="0031b-187">Likewise, the data cache can be used as a cache store, as the following code shows:</span></span>

[!code-csharp[Main](caching-data-at-application-startup-cs/samples/sample5.cs)]

<span data-ttu-id="0031b-188">Pour ajouter un élément au cache de données sans expiration basée sur la durée, utilisez les valeurs `System.Web.Caching.Cache.NoAbsoluteExpiration` et `System.Web.Caching.Cache.NoSlidingExpiration` en tant que paramètres d’entrée.</span><span class="sxs-lookup"><span data-stu-id="0031b-188">To add an item to the data cache with no time-based expiry, use the `System.Web.Caching.Cache.NoAbsoluteExpiration` and `System.Web.Caching.Cache.NoSlidingExpiration` values as input parameters.</span></span> <span data-ttu-id="0031b-189">Cette surcharge particulière de la méthode `Insert` du cache de données a été sélectionnée afin que nous puissions spécifier la *priorité* de l’élément de cache.</span><span class="sxs-lookup"><span data-stu-id="0031b-189">This particular overload of the data cache's `Insert` method was selected so that we could specify the *priority* of the cache item.</span></span> <span data-ttu-id="0031b-190">La priorité est utilisée pour déterminer les éléments à nettoyer à partir du cache lorsque la mémoire disponible est faible.</span><span class="sxs-lookup"><span data-stu-id="0031b-190">The priority is used to determine what items to scavenge from the cache when available memory runs low.</span></span> <span data-ttu-id="0031b-191">Ici, nous utilisons la priorité `NotRemovable`, qui garantit que cet élément de cache ne sera pas nettoyé.</span><span class="sxs-lookup"><span data-stu-id="0031b-191">Here we use the priority `NotRemovable`, which ensures that this cache item won't be scavenged.</span></span>

> [!NOTE]
> <span data-ttu-id="0031b-192">Le téléchargement de ce didacticiel implémente la classe `StaticCache` à l’aide de l’approche de variable de membre statique.</span><span class="sxs-lookup"><span data-stu-id="0031b-192">This tutorial's download implements the `StaticCache` class using the static member variable approach.</span></span> <span data-ttu-id="0031b-193">Le code pour les techniques d’État et de cache de données de l’application est disponible dans les commentaires du fichier de classe.</span><span class="sxs-lookup"><span data-stu-id="0031b-193">The code for the application state and data cache techniques is available in the comments in the class file.</span></span>

## <a name="step-4-executing-code-at-application-startup"></a><span data-ttu-id="0031b-194">Étape 4 : exécution du code au démarrage de l’application</span><span class="sxs-lookup"><span data-stu-id="0031b-194">Step 4: Executing Code at Application Startup</span></span>

<span data-ttu-id="0031b-195">Pour exécuter du code lors du premier démarrage d’une application Web, nous devons créer un fichier spécial nommé `Global.asax`.</span><span class="sxs-lookup"><span data-stu-id="0031b-195">To execute code when a web application first starts, we need to create a special file named `Global.asax`.</span></span> <span data-ttu-id="0031b-196">Ce fichier peut contenir des gestionnaires d’événements pour les événements application, session et au niveau de la demande, et c’est ici que nous pouvons ajouter du code qui sera exécuté à chaque démarrage de l’application.</span><span class="sxs-lookup"><span data-stu-id="0031b-196">This file can contain event handlers for application-, session-, and request-level events, and it is here where we can add code that will be executed whenever the application starts.</span></span>

<span data-ttu-id="0031b-197">Ajoutez le fichier `Global.asax` au répertoire racine de votre application Web en cliquant avec le bouton droit sur le nom du projet de site Web dans le Explorateur de solutions de Visual Studio, puis en sélectionnant Ajouter un nouvel élément.</span><span class="sxs-lookup"><span data-stu-id="0031b-197">Add the `Global.asax` file to your web application's root directory by right-clicking on the website project name in Visual Studio's Solution Explorer and choosing Add New Item.</span></span> <span data-ttu-id="0031b-198">Dans la boîte de dialogue Ajouter un nouvel élément, sélectionnez le type d’élément classe d’application globale, puis cliquez sur le bouton Ajouter.</span><span class="sxs-lookup"><span data-stu-id="0031b-198">From the Add New Item dialog box, select the Global Application Class item type and then click the Add button.</span></span>

> [!NOTE]
> <span data-ttu-id="0031b-199">Si vous avez déjà un fichier `Global.asax` dans votre projet, le type d’élément de classe d’application globale ne figurera pas dans la boîte de dialogue Ajouter un nouvel élément.</span><span class="sxs-lookup"><span data-stu-id="0031b-199">If you already have a `Global.asax` file in your project, the Global Application Class item type will not be listed in the Add New Item dialog box.</span></span>

<span data-ttu-id="0031b-200">[![ajouter le fichier global. asax au répertoire racine de votre application Web](caching-data-at-application-startup-cs/_static/image4.png)](caching-data-at-application-startup-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="0031b-200">[![Add the Global.asax File to Your Web Application's Root Directory](caching-data-at-application-startup-cs/_static/image4.png)](caching-data-at-application-startup-cs/_static/image3.png)</span></span>

<span data-ttu-id="0031b-201">**Figure 3**: ajouter le fichier `Global.asax` au répertoire racine de votre application Web ([cliquez pour afficher l’image en taille réelle](caching-data-at-application-startup-cs/_static/image5.png))</span><span class="sxs-lookup"><span data-stu-id="0031b-201">**Figure 3**: Add the `Global.asax` File to Your Web Application's Root Directory ([Click to view full-size image](caching-data-at-application-startup-cs/_static/image5.png))</span></span>

<span data-ttu-id="0031b-202">Le modèle de fichier `Global.asax` par défaut comprend cinq méthodes au sein d’une balise `<script>` côté serveur :</span><span class="sxs-lookup"><span data-stu-id="0031b-202">The default `Global.asax` file template includes five methods within a server-side `<script>` tag:</span></span>

- <span data-ttu-id="0031b-203">**`Application_Start`** s’exécute lors du premier démarrage de l’application Web</span><span class="sxs-lookup"><span data-stu-id="0031b-203">**`Application_Start`** executes when the web application first starts</span></span>
- <span data-ttu-id="0031b-204">**`Application_End`** s’exécute quand l’application est en cours d’arrêt</span><span class="sxs-lookup"><span data-stu-id="0031b-204">**`Application_End`** runs when the application is shutting down</span></span>
- <span data-ttu-id="0031b-205">**`Application_Error`** s’exécute chaque fois qu’une exception non gérée atteint l’application</span><span class="sxs-lookup"><span data-stu-id="0031b-205">**`Application_Error`** executes whenever an unhandled exception reaches the application</span></span>
- <span data-ttu-id="0031b-206">**`Session_Start`** s’exécute lors de la création d’une nouvelle session</span><span class="sxs-lookup"><span data-stu-id="0031b-206">**`Session_Start`** executes when a new session is created</span></span>
- <span data-ttu-id="0031b-207">**`Session_End`** s’exécute lors de l’expiration ou de l’abandon d’une session</span><span class="sxs-lookup"><span data-stu-id="0031b-207">**`Session_End`** runs when a session is expired or abandoned</span></span>

<span data-ttu-id="0031b-208">Le gestionnaire d’événements `Application_Start` n’est appelé qu’une seule fois pendant le cycle de vie d’une application.</span><span class="sxs-lookup"><span data-stu-id="0031b-208">The `Application_Start` event handler is called only once during an application's life cycle.</span></span> <span data-ttu-id="0031b-209">L’application démarre la première fois qu’une ressource ASP.NET est demandée à partir de l’application et continue de s’exécuter jusqu’à ce que l’application soit redémarrée, ce qui peut se produire en modifiant le contenu du dossier `/Bin`, en modifiant `Global.asax`, en modifiant le contenu du dossier `App_Code` ou en modifiant le fichier `Web.config`, entre autres causes.</span><span class="sxs-lookup"><span data-stu-id="0031b-209">The application starts the first time an ASP.NET resource is requested from the application and continues to run until the application is restarted, which can happen by modifying the contents of the `/Bin` folder, modifying `Global.asax`, modifying the contents in the `App_Code` folder, or modifying the `Web.config` file, among other causes.</span></span> <span data-ttu-id="0031b-210">Pour plus d’informations sur le cycle de vie de l’application, consultez [vue d’ensemble du cycle de vie des applications ASP.net](https://msdn.microsoft.com/library/ms178473.aspx) .</span><span class="sxs-lookup"><span data-stu-id="0031b-210">Refer to [ASP.NET Application Life Cycle Overview](https://msdn.microsoft.com/library/ms178473.aspx) for a more detailed discussion on the application life cycle.</span></span>

<span data-ttu-id="0031b-211">Pour ces didacticiels, nous devons uniquement ajouter du code à la méthode `Application_Start`. n’hésitez donc pas à supprimer les autres.</span><span class="sxs-lookup"><span data-stu-id="0031b-211">For these tutorials we only need to add code to the `Application_Start` method, so feel free to remove the others.</span></span> <span data-ttu-id="0031b-212">Dans `Application_Start`, appelez simplement la méthode `LoadStaticCache()` de la classe `StaticCache`, qui chargera et mettra en cache les informations sur le fournisseur :</span><span class="sxs-lookup"><span data-stu-id="0031b-212">In `Application_Start`, simply call the `StaticCache` class's `LoadStaticCache()` method, which will load and cache the supplier information:</span></span>

[!code-aspx[Main](caching-data-at-application-startup-cs/samples/sample6.aspx)]

<span data-ttu-id="0031b-213">C’est aussi simple que cela !</span><span class="sxs-lookup"><span data-stu-id="0031b-213">That's all there is to it!</span></span> <span data-ttu-id="0031b-214">Au démarrage de l’application, la méthode `LoadStaticCache()` récupère les informations de fournisseur de la couche BLL et les stocke dans une variable membre statique (ou dans la Banque de cache que vous avez terminée à l’aide de dans la classe `StaticCache`).</span><span class="sxs-lookup"><span data-stu-id="0031b-214">At application startup, the `LoadStaticCache()` method will grab the supplier information from the BLL, and store it in a static member variable (or whatever cache store you ended up using in the `StaticCache` class).</span></span> <span data-ttu-id="0031b-215">Pour vérifier ce comportement, définissez un point d’arrêt dans la méthode `Application_Start` et exécutez votre application.</span><span class="sxs-lookup"><span data-stu-id="0031b-215">To verify this behavior, set a breakpoint in the `Application_Start` method and run your application.</span></span> <span data-ttu-id="0031b-216">Notez que le point d’arrêt est atteint lors du démarrage de l’application.</span><span class="sxs-lookup"><span data-stu-id="0031b-216">Note that the breakpoint is hit upon the application starting.</span></span> <span data-ttu-id="0031b-217">Toutefois, les requêtes suivantes n’entraînent pas l’exécution de la méthode `Application_Start`.</span><span class="sxs-lookup"><span data-stu-id="0031b-217">Subsequent requests, however, do not cause the `Application_Start` method to execute.</span></span>

<span data-ttu-id="0031b-218">[![utiliser un point d’arrêt pour vérifier que le gestionnaire d’événements Application_Start est en cours d’exécution](caching-data-at-application-startup-cs/_static/image7.png)](caching-data-at-application-startup-cs/_static/image6.png)</span><span class="sxs-lookup"><span data-stu-id="0031b-218">[![Use a Breakpoint to Verify that the Application_Start Event Handler is Being Executed](caching-data-at-application-startup-cs/_static/image7.png)](caching-data-at-application-startup-cs/_static/image6.png)</span></span>

<span data-ttu-id="0031b-219">**Figure 4**: utiliser un point d’arrêt pour vérifier que le gestionnaire d’événements `Application_Start` est en cours d’exécution ([cliquez pour afficher l’image en taille réelle](caching-data-at-application-startup-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="0031b-219">**Figure 4**: Use a Breakpoint to Verify that the `Application_Start` Event Handler is Being Executed ([Click to view full-size image](caching-data-at-application-startup-cs/_static/image8.png))</span></span>

> [!NOTE]
> <span data-ttu-id="0031b-220">Si vous n’atteignez pas le point d’arrêt `Application_Start` lorsque vous démarrez le débogage pour la première fois, cela est dû au fait que votre application a déjà démarré.</span><span class="sxs-lookup"><span data-stu-id="0031b-220">If you do not hit the `Application_Start` breakpoint when you first start debugging, it is because your application has already started.</span></span> <span data-ttu-id="0031b-221">Forcez l’application à redémarrer en modifiant vos fichiers `Global.asax` ou `Web.config`, puis réessayez.</span><span class="sxs-lookup"><span data-stu-id="0031b-221">Force the application to restart by modifying your `Global.asax` or `Web.config` files and then try again.</span></span> <span data-ttu-id="0031b-222">Vous pouvez simplement ajouter (ou supprimer) une ligne vide à la fin de l’un de ces fichiers pour redémarrer rapidement l’application.</span><span class="sxs-lookup"><span data-stu-id="0031b-222">You can simply add (or remove) a blank line at the end of one of these files to quickly restart the application.</span></span>

## <a name="step-5-displaying-the-cached-data"></a><span data-ttu-id="0031b-223">Étape 5 : affichage des données mises en cache</span><span class="sxs-lookup"><span data-stu-id="0031b-223">Step 5: Displaying the Cached Data</span></span>

<span data-ttu-id="0031b-224">À ce stade, la classe `StaticCache` possède une version des données du fournisseur mise en cache au démarrage de l’application, accessible par le biais de sa méthode `GetSuppliers()`.</span><span class="sxs-lookup"><span data-stu-id="0031b-224">At this point the `StaticCache` class has a version of the supplier data cached at application startup that can be accessed through its `GetSuppliers()` method.</span></span> <span data-ttu-id="0031b-225">Pour utiliser ces données à partir de la couche de présentation, nous pouvons utiliser un ObjectDataSource ou appeler par programmation la méthode `GetSuppliers()` de la classe `StaticCache` à partir de la classe code-behind d’une page ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="0031b-225">To work with this data from the Presentation Layer, we can use an ObjectDataSource or programmatically invoke the `StaticCache` class's `GetSuppliers()` method from an ASP.NET page's code-behind class.</span></span> <span data-ttu-id="0031b-226">Examinons l’utilisation des contrôles ObjectDataSource et GridView pour afficher les informations sur les fournisseurs mises en cache.</span><span class="sxs-lookup"><span data-stu-id="0031b-226">Let's look at using the ObjectDataSource and GridView controls to display the cached supplier information.</span></span>

<span data-ttu-id="0031b-227">Commencez par ouvrir la page `AtApplicationStartup.aspx` dans le dossier `Caching`.</span><span class="sxs-lookup"><span data-stu-id="0031b-227">Start by opening the `AtApplicationStartup.aspx` page in the `Caching` folder.</span></span> <span data-ttu-id="0031b-228">Faites glisser un contrôle GridView de la boîte à outils vers le concepteur, en affectant à sa propriété `ID` la valeur `Suppliers`.</span><span class="sxs-lookup"><span data-stu-id="0031b-228">Drag a GridView from the Toolbox onto the designer, setting its `ID` property to `Suppliers`.</span></span> <span data-ttu-id="0031b-229">Ensuite, à partir de la balise active de GridView, choisissez de créer une nouvelle ObjectDataSource nommée `SuppliersCachedDataSource`.</span><span class="sxs-lookup"><span data-stu-id="0031b-229">Next, from the GridView's smart tag choose to create a new ObjectDataSource named `SuppliersCachedDataSource`.</span></span> <span data-ttu-id="0031b-230">Configurez l’ObjectDataSource pour utiliser la méthode `GetSuppliers()` de la classe `StaticCache`.</span><span class="sxs-lookup"><span data-stu-id="0031b-230">Configure the ObjectDataSource to use the `StaticCache` class's `GetSuppliers()` method.</span></span>

<span data-ttu-id="0031b-231">[![configurer ObjectDataSource pour utiliser la classe StaticCache](caching-data-at-application-startup-cs/_static/image10.png)](caching-data-at-application-startup-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="0031b-231">[![Configure the ObjectDataSource to use the StaticCache Class](caching-data-at-application-startup-cs/_static/image10.png)](caching-data-at-application-startup-cs/_static/image9.png)</span></span>

<span data-ttu-id="0031b-232">**Figure 5**: configurer ObjectDataSource pour utiliser la classe `StaticCache` ([cliquez pour afficher l’image en taille réelle](caching-data-at-application-startup-cs/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="0031b-232">**Figure 5**: Configure the ObjectDataSource to use the `StaticCache` Class ([Click to view full-size image](caching-data-at-application-startup-cs/_static/image11.png))</span></span>

<span data-ttu-id="0031b-233">[![utiliser la méthode GetSuppliers () pour récupérer les données des fournisseurs mises en cache](caching-data-at-application-startup-cs/_static/image13.png)](caching-data-at-application-startup-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="0031b-233">[![Use the GetSuppliers() Method to Retrieve the Cached Supplier Data](caching-data-at-application-startup-cs/_static/image13.png)](caching-data-at-application-startup-cs/_static/image12.png)</span></span>

<span data-ttu-id="0031b-234">**Figure 6**: utiliser la méthode `GetSuppliers()` pour récupérer les données des fournisseurs mises en cache ([cliquez pour afficher l’image en taille réelle](caching-data-at-application-startup-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="0031b-234">**Figure 6**: Use the `GetSuppliers()` Method to Retrieve the Cached Supplier Data ([Click to view full-size image](caching-data-at-application-startup-cs/_static/image14.png))</span></span>

<span data-ttu-id="0031b-235">Une fois l’Assistant terminé, Visual Studio ajoute automatiquement BoundFields pour chacun des champs de données dans `SuppliersDataTable`.</span><span class="sxs-lookup"><span data-stu-id="0031b-235">After completing the wizard, Visual Studio will automatically add BoundFields for each of the data fields in `SuppliersDataTable`.</span></span> <span data-ttu-id="0031b-236">Le balisage déclaratif de GridView et de ObjectDataSource doit ressembler à ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="0031b-236">Your GridView and ObjectDataSource's declarative markup should look similar to the following:</span></span>

[!code-aspx[Main](caching-data-at-application-startup-cs/samples/sample7.aspx)]

<span data-ttu-id="0031b-237">La figure 7 illustre la page affichée dans un navigateur.</span><span class="sxs-lookup"><span data-stu-id="0031b-237">Figure 7 shows the page when viewed through a browser.</span></span> <span data-ttu-id="0031b-238">La sortie est la même que nous avons extrait les données de la classe de `SuppliersBLL` de la couche BLL, mais l’utilisation de la classe `StaticCache` retourne les données de fournisseur mises en cache au démarrage de l’application.</span><span class="sxs-lookup"><span data-stu-id="0031b-238">The output is the same had we pulled the data from the BLL's `SuppliersBLL` class, but using the `StaticCache` class returns the supplier data as cached at application startup.</span></span> <span data-ttu-id="0031b-239">Vous pouvez définir des points d’arrêt dans la méthode `GetSuppliers()` de la classe `StaticCache` pour vérifier ce comportement.</span><span class="sxs-lookup"><span data-stu-id="0031b-239">You can set breakpoints in the `StaticCache` class's `GetSuppliers()` method to verify this behavior.</span></span>

<span data-ttu-id="0031b-240">[![les données des fournisseurs mises en cache s’affichent dans un GridView](caching-data-at-application-startup-cs/_static/image16.png)](caching-data-at-application-startup-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="0031b-240">[![The Cached Supplier Data is Displayed in a GridView](caching-data-at-application-startup-cs/_static/image16.png)](caching-data-at-application-startup-cs/_static/image15.png)</span></span>

<span data-ttu-id="0031b-241">**Figure 7**: les données des fournisseurs mises en cache s’affichent dans un GridView ([cliquez pour afficher l’image en taille réelle](caching-data-at-application-startup-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="0031b-241">**Figure 7**: The Cached Supplier Data is Displayed in a GridView ([Click to view full-size image](caching-data-at-application-startup-cs/_static/image17.png))</span></span>

## <a name="summary"></a><span data-ttu-id="0031b-242">Récapitulatif</span><span class="sxs-lookup"><span data-stu-id="0031b-242">Summary</span></span>

<span data-ttu-id="0031b-243">La plupart des modèles de données contiennent une quantité équitable de données statiques, généralement implémentées sous la forme de tables de choix.</span><span class="sxs-lookup"><span data-stu-id="0031b-243">Most every data model contains a fair amount of static data, usually implemented in the form of lookup tables.</span></span> <span data-ttu-id="0031b-244">Étant donné que ces informations sont statiques, il n’y a aucune raison d’accéder continuellement à la base de données chaque fois que ces informations doivent être affichées.</span><span class="sxs-lookup"><span data-stu-id="0031b-244">Since this information is static, there's no reason to continually access the database each time this information needs to be displayed.</span></span> <span data-ttu-id="0031b-245">En outre, en raison de sa nature statique, lors de la mise en cache des données, il n’est pas nécessaire d’effectuer une expiration.</span><span class="sxs-lookup"><span data-stu-id="0031b-245">Furthermore, due to its static nature, when caching the data there's no need for an expiry.</span></span> <span data-ttu-id="0031b-246">Dans ce didacticiel, nous avons vu comment prendre ces données et les mettre en cache dans le cache de données, l’état de l’application et par le biais d’une variable de membre statique.</span><span class="sxs-lookup"><span data-stu-id="0031b-246">In this tutorial we saw how to take such data and cache it in the data cache, application state, and through a static member variable.</span></span> <span data-ttu-id="0031b-247">Ces informations sont mises en cache au démarrage de l’application et restent dans le cache tout au long de la durée de vie de l’application.</span><span class="sxs-lookup"><span data-stu-id="0031b-247">This information is cached at application startup and remains in the cache throughout the application's lifetime.</span></span>

<span data-ttu-id="0031b-248">Dans ce didacticiel et les deux dernières, nous avons examiné la mise en cache des données pendant la durée de vie de l’application, ainsi que l’utilisation d’expirations temporelles.</span><span class="sxs-lookup"><span data-stu-id="0031b-248">In this tutorial and the past two, we ve looked at caching data for the duration of the application's lifetime as well as using time-based expiries.</span></span> <span data-ttu-id="0031b-249">Toutefois, lors de la mise en cache des données de base de données, une expiration basée sur la durée peut être inférieure à la solution idéale.</span><span class="sxs-lookup"><span data-stu-id="0031b-249">When caching database data, though, a time-based expiry may be less than ideal.</span></span> <span data-ttu-id="0031b-250">Au lieu de vider régulièrement le cache, il est préférable de supprimer uniquement l’élément mis en cache lorsque les données de la base de données sous-jacente sont modifiées.</span><span class="sxs-lookup"><span data-stu-id="0031b-250">Rather than periodically flushing the cache, it would be optimal to only evict the cached item when the underlying database data is modified.</span></span> <span data-ttu-id="0031b-251">Cette solution idéale est possible grâce à l’utilisation de dépendances de cache SQL, que nous examinerons dans le prochain didacticiel.</span><span class="sxs-lookup"><span data-stu-id="0031b-251">This ideal is possible through the use of SQL cache dependencies, which we'll examine in our next tutorial.</span></span>

<span data-ttu-id="0031b-252">Bonne programmation !</span><span class="sxs-lookup"><span data-stu-id="0031b-252">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="0031b-253">À propos de l’auteur</span><span class="sxs-lookup"><span data-stu-id="0031b-253">About the Author</span></span>

<span data-ttu-id="0031b-254">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), auteur de sept livres ASP/ASP. net et fondateur de [4GuysFromRolla.com](http://www.4guysfromrolla.com), travaille avec des technologies Web Microsoft depuis 1998.</span><span class="sxs-lookup"><span data-stu-id="0031b-254">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="0031b-255">Scott travaille en tant que consultant, formateur et auteur indépendant.</span><span class="sxs-lookup"><span data-stu-id="0031b-255">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="0031b-256">Son dernier livre est [*Sams vous apprend vous-même ASP.NET 2,0 en 24 heures*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="0031b-256">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="0031b-257">Il peut être contacté à [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="0031b-257">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="0031b-258">ou via son blog, qui se trouve sur [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="0031b-258">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="0031b-259">Remerciements à</span><span class="sxs-lookup"><span data-stu-id="0031b-259">Special Thanks To</span></span>

<span data-ttu-id="0031b-260">Cette série de didacticiels a été examinée par de nombreux réviseurs utiles.</span><span class="sxs-lookup"><span data-stu-id="0031b-260">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="0031b-261">Les réviseurs de leads pour ce didacticiel étaient Teresa Murphy et Zack Jones.</span><span class="sxs-lookup"><span data-stu-id="0031b-261">Lead reviewers for this tutorial were Teresa Murphy and Zack Jones.</span></span> <span data-ttu-id="0031b-262">Vous souhaitez revoir mes prochains articles MSDN ?</span><span class="sxs-lookup"><span data-stu-id="0031b-262">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="0031b-263">Si c’est le cas, insérez une ligne sur [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="0031b-263">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="0031b-264">[Précédent](caching-data-in-the-architecture-cs.md)
> [Suivant](using-sql-cache-dependencies-cs.md)</span><span class="sxs-lookup"><span data-stu-id="0031b-264">[Previous](caching-data-in-the-architecture-cs.md)
[Next](using-sql-cache-dependencies-cs.md)</span></span>

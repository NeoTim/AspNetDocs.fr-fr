---
uid: web-forms/overview/data-access/working-with-batched-data/batch-deleting-cs
title: Suppression par lotsC#() | Microsoft Docs
author: rick-anderson
description: Découvrez comment supprimer plusieurs enregistrements de base de données en une seule opération. Dans la couche d’interface utilisateur, nous créons un GridView amélioré créé dans une TUT antérieure...
ms.author: riande
ms.date: 06/26/2007
ms.assetid: ac6916d0-a5ab-4218-9760-7ba9e72d258c
msc.legacyurl: /web-forms/overview/data-access/working-with-batched-data/batch-deleting-cs
msc.type: authoredcontent
ms.openlocfilehash: ed832c38b4972f440ab64c141e29c85f0a9df920
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/28/2019
ms.locfileid: "74588909"
---
# <a name="batch-deleting-c"></a><span data-ttu-id="38b6b-104">Suppression par lots (C#)</span><span class="sxs-lookup"><span data-stu-id="38b6b-104">Batch Deleting (C#)</span></span>

<span data-ttu-id="38b6b-105">par [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="38b6b-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="38b6b-106">[Télécharger le code](https://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_65_CS.zip) ou [Télécharger le PDF](batch-deleting-cs/_static/datatutorial65cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="38b6b-106">[Download Code](https://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_65_CS.zip) or [Download PDF](batch-deleting-cs/_static/datatutorial65cs1.pdf)</span></span>

> <span data-ttu-id="38b6b-107">Découvrez comment supprimer plusieurs enregistrements de base de données en une seule opération.</span><span class="sxs-lookup"><span data-stu-id="38b6b-107">Learn how to delete multiple database records in a single operation.</span></span> <span data-ttu-id="38b6b-108">Dans la couche d’interface utilisateur, nous créons un GridView amélioré créé dans un didacticiel précédent.</span><span class="sxs-lookup"><span data-stu-id="38b6b-108">In the User Interface Layer we build upon an enhanced GridView created in an earlier tutorial.</span></span> <span data-ttu-id="38b6b-109">Dans la couche d’accès aux données, nous encapsulons les multiples opérations de suppression dans une transaction pour vous assurer que toutes les suppressions ont été effectuées correctement ou que toutes les suppressions sont annulées.</span><span class="sxs-lookup"><span data-stu-id="38b6b-109">In the Data Access Layer we wrap the multiple Delete operations within a transaction to ensure that all deletions succeed or all deletions are rolled back.</span></span>

## <a name="introduction"></a><span data-ttu-id="38b6b-110">Introduction</span><span class="sxs-lookup"><span data-stu-id="38b6b-110">Introduction</span></span>

<span data-ttu-id="38b6b-111">Le [didacticiel précédent](batch-updating-cs.md) a abordé la création d’une interface de modification par lot à l’aide d’un GridView entièrement modifiable.</span><span class="sxs-lookup"><span data-stu-id="38b6b-111">The [preceding tutorial](batch-updating-cs.md) explored how to create a batch editing interface using a fully-editable GridView.</span></span> <span data-ttu-id="38b6b-112">Dans les situations où les utilisateurs modifient souvent un grand nombre d’enregistrements à la fois, une interface de modification par lot nécessite beaucoup moins de publications et de commutateurs de contexte clavier à souris, ce qui améliore l’efficacité des utilisateurs finaux.</span><span class="sxs-lookup"><span data-stu-id="38b6b-112">In situations where users are commonly editing many records at once, a batch editing interface will require far fewer postbacks and keyboard-to-mouse context switches, thereby improving the end user s efficiency.</span></span> <span data-ttu-id="38b6b-113">Cette technique est également utile pour les pages où les utilisateurs peuvent supprimer de nombreux enregistrements en une seule fois.</span><span class="sxs-lookup"><span data-stu-id="38b6b-113">This technique is similarly useful for pages where it is common for users to delete many records in one go.</span></span>

<span data-ttu-id="38b6b-114">Toute personne qui a utilisé un client de messagerie en ligne est déjà familiarisé avec l’une des interfaces de suppression de lot les plus courantes : une case à cocher dans chaque ligne d’une grille avec un bouton supprimer tous les éléments sélectionnés correspondant (voir la figure 1).</span><span class="sxs-lookup"><span data-stu-id="38b6b-114">Anyone who has used an online email client is already familiar with one of the most common batch deleting interfaces: a checkbox in each row in a grid with a corresponding Delete All Checked Items button (see Figure 1).</span></span> <span data-ttu-id="38b6b-115">Ce didacticiel est plutôt concis, car nous avons déjà fait tout le travail des didacticiels précédents pour créer l’interface Web et une méthode pour supprimer une série d’enregistrements en une seule opération atomique.</span><span class="sxs-lookup"><span data-stu-id="38b6b-115">This tutorial is rather short because we ve already done all of the hard work in previous tutorials in creating both the web-based interface and a method to delete a series of records as a single atomic operation.</span></span> <span data-ttu-id="38b6b-116">Dans le didacticiel [Ajout d’une colonne GridView de cases à cocher](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) , nous avons créé un GridView avec une colonne de cases à cocher et dans le didacticiel [modifications de la base de données dans un](wrapping-database-modifications-within-a-transaction-cs.md) didacticiel de transaction, nous avons créé une méthode dans la couche BLL qui utiliserait une transaction pour supprimer une `List<T>` de valeurs `ProductID`.</span><span class="sxs-lookup"><span data-stu-id="38b6b-116">In the [Adding a GridView Column of Checkboxes](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) tutorial we created a GridView with a column of checkboxes and in the [Wrapping Database Modifications within a Transaction](wrapping-database-modifications-within-a-transaction-cs.md) tutorial we created a method in the BLL that would use a transaction to delete a `List<T>` of `ProductID` values.</span></span> <span data-ttu-id="38b6b-117">Dans ce didacticiel, nous allons créer et fusionner nos expériences précédentes pour créer un exemple de suppression de lot fonctionnel.</span><span class="sxs-lookup"><span data-stu-id="38b6b-117">In this tutorial, we will build upon and merge our previous experiences to create a working batch deleting example.</span></span>

<span data-ttu-id="38b6b-118">[![chaque ligne contient une case à cocher](batch-deleting-cs/_static/image1.gif)](batch-deleting-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="38b6b-118">[![Each Row Includes a Checkbox](batch-deleting-cs/_static/image1.gif)](batch-deleting-cs/_static/image1.png)</span></span>

<span data-ttu-id="38b6b-119">**Figure 1**: chaque ligne contient une case à cocher ([cliquez pour afficher l’image en taille réelle](batch-deleting-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="38b6b-119">**Figure 1**: Each Row Includes a Checkbox ([Click to view full-size image](batch-deleting-cs/_static/image2.png))</span></span>

## <a name="step-1-creating-the-batch-deleting-interface"></a><span data-ttu-id="38b6b-120">Étape 1 : création de l’interface de suppression d’un lot</span><span class="sxs-lookup"><span data-stu-id="38b6b-120">Step 1: Creating the Batch Deleting Interface</span></span>

<span data-ttu-id="38b6b-121">Étant donné que nous avons déjà créé l’interface de suppression de lots dans le didacticiel [Ajout d’une colonne GridView de cases à cocher](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) , nous pouvons simplement la copier dans `BatchDelete.aspx` plutôt que de la créer à partir de zéro.</span><span class="sxs-lookup"><span data-stu-id="38b6b-121">Since we already created the batch deleting interface in the [Adding a GridView Column of Checkboxes](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) tutorial, we can simply copy it to `BatchDelete.aspx` rather than creating it from scratch.</span></span> <span data-ttu-id="38b6b-122">Commencez par ouvrir la page `BatchDelete.aspx` dans le dossier `BatchData` et la page `CheckBoxField.aspx` dans le dossier `EnhancedGridView`.</span><span class="sxs-lookup"><span data-stu-id="38b6b-122">Start by opening the `BatchDelete.aspx` page in the `BatchData` folder and the `CheckBoxField.aspx` page in the `EnhancedGridView` folder.</span></span> <span data-ttu-id="38b6b-123">Dans la page `CheckBoxField.aspx`, accédez à la vue source et copiez le balisage entre les balises `<asp:Content>`, comme illustré à la figure 2.</span><span class="sxs-lookup"><span data-stu-id="38b6b-123">From the `CheckBoxField.aspx` page, go to the Source view and copy the markup between the `<asp:Content>` tags as shown in Figure 2.</span></span>

<span data-ttu-id="38b6b-124">[![copier la balise déclarative de CheckBoxField. aspx dans le presse-papiers](batch-deleting-cs/_static/image2.gif)](batch-deleting-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="38b6b-124">[![Copy the Declarative Markup of CheckBoxField.aspx to the Clipboard](batch-deleting-cs/_static/image2.gif)](batch-deleting-cs/_static/image3.png)</span></span>

<span data-ttu-id="38b6b-125">**Figure 2**: copier la balise déclarative de `CheckBoxField.aspx` dans le presse-papiers ([cliquez pour afficher l’image en taille réelle](batch-deleting-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="38b6b-125">**Figure 2**: Copy the Declarative Markup of `CheckBoxField.aspx` to the Clipboard ([Click to view full-size image](batch-deleting-cs/_static/image4.png))</span></span>

<span data-ttu-id="38b6b-126">Ensuite, accédez à la vue source dans `BatchDelete.aspx` et collez le contenu du presse-papiers dans les balises `<asp:Content>`.</span><span class="sxs-lookup"><span data-stu-id="38b6b-126">Next, go to the Source view in `BatchDelete.aspx` and paste the contents of the clipboard within the `<asp:Content>` tags.</span></span> <span data-ttu-id="38b6b-127">Vous pouvez également copier et coller le code à partir de la classe code-behind dans `CheckBoxField.aspx.cs` dans la classe code-behind de `BatchDelete.aspx.cs` (le bouton de `DeleteSelectedProducts` `Click` gestionnaire d’événements, la méthode `ToggleCheckState` et les gestionnaires d’événements `Click` pour les boutons `CheckAll` et `UncheckAll`).</span><span class="sxs-lookup"><span data-stu-id="38b6b-127">Also copy and paste the code from within the code-behind class in `CheckBoxField.aspx.cs` to within the code-behind class in `BatchDelete.aspx.cs` (the `DeleteSelectedProducts` Button s `Click` event handler, the `ToggleCheckState` method, and the `Click` event handlers for the `CheckAll` and `UncheckAll` Buttons).</span></span> <span data-ttu-id="38b6b-128">Après avoir copié ce contenu, la classe code-behind de la page s de `BatchDelete.aspx` doit contenir le code suivant :</span><span class="sxs-lookup"><span data-stu-id="38b6b-128">After copying over this content, the `BatchDelete.aspx` page s code-behind class should contain the following code:</span></span>

[!code-csharp[Main](batch-deleting-cs/samples/sample1.cs)]

<span data-ttu-id="38b6b-129">Après avoir copié sur le balisage déclaratif et le code source, prenez un moment pour tester `BatchDelete.aspx` en l’affichant dans un navigateur.</span><span class="sxs-lookup"><span data-stu-id="38b6b-129">After copying over the declarative markup and source code, take a moment to test `BatchDelete.aspx` by viewing it through a browser.</span></span> <span data-ttu-id="38b6b-130">Vous devez voir un GridView qui répertorie les dix premiers produits dans un GridView avec chaque ligne qui répertorie le nom, la catégorie et le prix du produit, ainsi qu’une case à cocher.</span><span class="sxs-lookup"><span data-stu-id="38b6b-130">You should see a GridView listing the first ten products in a GridView with each row listing the product s name, category, and price along with a checkbox.</span></span> <span data-ttu-id="38b6b-131">Il doit y avoir trois boutons : tout sélectionner, désélectionner tout et supprimer les produits sélectionnés.</span><span class="sxs-lookup"><span data-stu-id="38b6b-131">There should be three buttons: Check All, Uncheck All, and Delete Selected Products.</span></span> <span data-ttu-id="38b6b-132">Le fait de cliquer sur le bouton Sélectionner tout sélectionne toutes les cases à cocher et décocher toutes les cases.</span><span class="sxs-lookup"><span data-stu-id="38b6b-132">Clicking the Check All button selects all checkboxes, while Uncheck All clears all checkboxes.</span></span> <span data-ttu-id="38b6b-133">Le fait de cliquer sur supprimer les produits sélectionnés affiche un message qui répertorie les valeurs de `ProductID` des produits sélectionnés, mais ne supprime pas réellement les produits.</span><span class="sxs-lookup"><span data-stu-id="38b6b-133">Clicking Delete Selected Products displays a message that lists the `ProductID` values of the selected products, but does not actually delete the products.</span></span>

<span data-ttu-id="38b6b-134">[![l’interface de CheckBoxField. aspx a été déplacée vers BatchDeleting. aspx](batch-deleting-cs/_static/image3.gif)](batch-deleting-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="38b6b-134">[![The Interface from CheckBoxField.aspx has been Moved to BatchDeleting.aspx](batch-deleting-cs/_static/image3.gif)](batch-deleting-cs/_static/image5.png)</span></span>

<span data-ttu-id="38b6b-135">**Figure 3**: l’Interface de `CheckBoxField.aspx` a été déplacée vers `BatchDeleting.aspx` ([cliquez pour afficher l’image en taille réelle](batch-deleting-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="38b6b-135">**Figure 3**: The Interface from `CheckBoxField.aspx` has been Moved to `BatchDeleting.aspx` ([Click to view full-size image](batch-deleting-cs/_static/image6.png))</span></span>

## <a name="step-2-deleting-the-checked-products-using-transactions"></a><span data-ttu-id="38b6b-136">Étape 2 : suppression des produits vérifiés à l’aide de transactions</span><span class="sxs-lookup"><span data-stu-id="38b6b-136">Step 2: Deleting the Checked Products Using Transactions</span></span>

<span data-ttu-id="38b6b-137">Avec l’interface de suppression par lot correctement copiée sur `BatchDeleting.aspx`, il ne reste plus qu’à mettre à jour le code afin que le bouton supprimer les produits sélectionnés supprime les produits vérifiés à l’aide de la méthode `DeleteProductsWithTransaction` de la classe `ProductsBLL`.</span><span class="sxs-lookup"><span data-stu-id="38b6b-137">With the batch deleting interface successfully copied over to `BatchDeleting.aspx`, all that remains is to update the code so that the Delete Selected Products button deletes the checked products using the `DeleteProductsWithTransaction` method in the `ProductsBLL` class.</span></span> <span data-ttu-id="38b6b-138">Cette méthode, ajoutée dans les [modifications d’encapsulation de la base de données dans un](wrapping-database-modifications-within-a-transaction-cs.md) didacticiel de transaction, accepte comme entrée une `List<T>` de `ProductID` valeurs et supprime chaque `ProductID` correspondante dans l’étendue d’une transaction.</span><span class="sxs-lookup"><span data-stu-id="38b6b-138">This method, added in the [Wrapping Database Modifications within a Transaction](wrapping-database-modifications-within-a-transaction-cs.md) tutorial, accepts as its input a `List<T>` of `ProductID` values and deletes each corresponding `ProductID` within the scope of a transaction.</span></span>

<span data-ttu-id="38b6b-139">Le gestionnaire d’événements `DeleteSelectedProducts` Button s `Click` utilise actuellement la boucle `foreach` suivante pour itérer au sein de chaque ligne GridView :</span><span class="sxs-lookup"><span data-stu-id="38b6b-139">The `DeleteSelectedProducts` Button s `Click` event handler currently uses the following `foreach` loop to iterate through each GridView row:</span></span>

[!code-csharp[Main](batch-deleting-cs/samples/sample2.cs)]

<span data-ttu-id="38b6b-140">Pour chaque ligne, le contrôle Web case à cocher `ProductSelector` est référencé par programmation.</span><span class="sxs-lookup"><span data-stu-id="38b6b-140">For each row, the `ProductSelector` CheckBox Web control is programmatically referenced.</span></span> <span data-ttu-id="38b6b-141">Si elle est activée, les `ProductID` de ligne sont récupérées à partir de la collection de `DataKeys` et la propriété `DeleteResults` de l’étiquette s `Text` est mise à jour pour inclure un message indiquant que la ligne a été sélectionnée pour être supprimée.</span><span class="sxs-lookup"><span data-stu-id="38b6b-141">If it is checked, the row s `ProductID` is retrieved from the `DataKeys` collection and the `DeleteResults` Label s `Text` property is updated to include a message indicating that the row was selected for deletion.</span></span>

<span data-ttu-id="38b6b-142">Le code ci-dessus ne supprime pas réellement les enregistrements, car l’appel à la méthode `ProductsBLL` classe s `Delete` est commenté. Si cette logique de suppression devait être appliquée, le code supprimerait les produits, mais pas au sein d’une opération atomique.</span><span class="sxs-lookup"><span data-stu-id="38b6b-142">The above code does not actually delete any records as the call to the `ProductsBLL` class s `Delete` method is commented out. Were this delete logic to be applied, the code would delete the products but not within an atomic operation.</span></span> <span data-ttu-id="38b6b-143">Autrement dit, si les premières suppressions de la séquence ont réussi, mais qu’une autre a échoué (peut-être en raison d’une violation de contrainte de clé étrangère), une exception est levée, mais les produits déjà supprimés restent supprimés.</span><span class="sxs-lookup"><span data-stu-id="38b6b-143">That is, if the first few deletes in the sequence succeeded, but a later one failed (perhaps due to a foreign key constraint violation), an exception would be thrown but those products already deleted would remain deleted.</span></span>

<span data-ttu-id="38b6b-144">Pour garantir l’atomicité, nous devons à la place utiliser la méthode `ProductsBLL` classe s `DeleteProductsWithTransaction`.</span><span class="sxs-lookup"><span data-stu-id="38b6b-144">In order to assure atomicity, we need to instead use the `ProductsBLL` class s `DeleteProductsWithTransaction` method.</span></span> <span data-ttu-id="38b6b-145">Étant donné que cette méthode accepte une liste de valeurs `ProductID`, nous devons tout d’abord compiler cette liste à partir de la grille, puis la passer en tant que paramètre.</span><span class="sxs-lookup"><span data-stu-id="38b6b-145">Because this method accepts a list of `ProductID` values, we need to first compile this list from the grid and then pass it as a parameter.</span></span> <span data-ttu-id="38b6b-146">Nous créons d’abord une instance d’une `List<T>` de type `int`.</span><span class="sxs-lookup"><span data-stu-id="38b6b-146">We first create an instance of a `List<T>` of type `int`.</span></span> <span data-ttu-id="38b6b-147">Dans l' `foreach` boucle, nous devons ajouter les produits sélectionnés `ProductID` valeurs à cette `List<T>`.</span><span class="sxs-lookup"><span data-stu-id="38b6b-147">Within the `foreach` loop we need to add the selected products `ProductID` values to this `List<T>`.</span></span> <span data-ttu-id="38b6b-148">Après la boucle, ce `List<T>` doit être passé à la méthode `DeleteProductsWithTransaction` de la classe `ProductsBLL`.</span><span class="sxs-lookup"><span data-stu-id="38b6b-148">After the loop this `List<T>` must be passed to the `ProductsBLL` class s `DeleteProductsWithTransaction` method.</span></span> <span data-ttu-id="38b6b-149">Mettez à jour le gestionnaire d’événements du bouton `DeleteSelectedProducts` `Click` à l’aide du code suivant :</span><span class="sxs-lookup"><span data-stu-id="38b6b-149">Update the `DeleteSelectedProducts` Button s `Click` event handler with the following code:</span></span>

[!code-csharp[Main](batch-deleting-cs/samples/sample3.cs)]

<span data-ttu-id="38b6b-150">Le code mis à jour crée une `List<T>` de type `int` (`productIDsToDelete`) et le remplit avec les valeurs `ProductID` à supprimer.</span><span class="sxs-lookup"><span data-stu-id="38b6b-150">The updated code creates a `List<T>` of type `int` (`productIDsToDelete`) and populates it with the `ProductID` values to delete.</span></span> <span data-ttu-id="38b6b-151">Après la `foreach` boucle, si au moins un produit est sélectionné, la méthode `ProductsBLL` classe s `DeleteProductsWithTransaction` est appelée et reçoit cette liste.</span><span class="sxs-lookup"><span data-stu-id="38b6b-151">After the `foreach` loop, if there is at least one product selected, the `ProductsBLL` class s `DeleteProductsWithTransaction` method is called and passed this list.</span></span> <span data-ttu-id="38b6b-152">L’étiquette `DeleteResults` est également affichée et les données sont reliées au GridView (afin que les enregistrements récemment supprimés n’apparaissent plus sous forme de lignes dans la grille).</span><span class="sxs-lookup"><span data-stu-id="38b6b-152">The `DeleteResults` Label is also displayed and the data rebound to the GridView (so that the newly-deleted records no longer appear as rows in the grid).</span></span>

<span data-ttu-id="38b6b-153">La figure 4 montre le GridView après qu’un certain nombre de lignes ont été sélectionnées pour la suppression.</span><span class="sxs-lookup"><span data-stu-id="38b6b-153">Figure 4 shows the GridView after a number of rows have been selected for deletion.</span></span> <span data-ttu-id="38b6b-154">La figure 5 montre l’écran immédiatement après avoir cliqué sur le bouton supprimer les produits sélectionnés.</span><span class="sxs-lookup"><span data-stu-id="38b6b-154">Figure 5 shows the screen immediately after the Delete Selected Products button has been clicked.</span></span> <span data-ttu-id="38b6b-155">Notez que dans la figure 5, les valeurs `ProductID` des enregistrements supprimés s’affichent dans l’étiquette sous le contrôle GridView et ces lignes ne sont plus dans le GridView.</span><span class="sxs-lookup"><span data-stu-id="38b6b-155">Note that in Figure 5 the `ProductID` values of the deleted records are displayed in the Label beneath the GridView and those rows are no longer in the GridView.</span></span>

<span data-ttu-id="38b6b-156">[![les produits sélectionnés seront supprimés](batch-deleting-cs/_static/image4.gif)](batch-deleting-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="38b6b-156">[![The Selected Products Will Be Deleted](batch-deleting-cs/_static/image4.gif)](batch-deleting-cs/_static/image7.png)</span></span>

<span data-ttu-id="38b6b-157">**Figure 4**: les produits sélectionnés seront supprimés ([cliquez pour afficher l’image en taille réelle](batch-deleting-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="38b6b-157">**Figure 4**: The Selected Products Will Be Deleted ([Click to view full-size image](batch-deleting-cs/_static/image8.png))</span></span>

<span data-ttu-id="38b6b-158">[![les valeurs ProductID des produits supprimés sont répertoriées sous le contrôle GridView](batch-deleting-cs/_static/image5.gif)](batch-deleting-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="38b6b-158">[![The Deleted Products ProductID Values are Listed Beneath the GridView](batch-deleting-cs/_static/image5.gif)](batch-deleting-cs/_static/image9.png)</span></span>

<span data-ttu-id="38b6b-159">**Figure 5**: les valeurs des produits `ProductID` supprimés sont répertoriées sous le contrôle GridView ([cliquez pour afficher l’image en taille réelle](batch-deleting-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="38b6b-159">**Figure 5**: The Deleted Products `ProductID` Values are Listed Beneath the GridView ([Click to view full-size image](batch-deleting-cs/_static/image10.png))</span></span>

> [!NOTE]
> <span data-ttu-id="38b6b-160">Pour tester l’atomicité de la méthode `DeleteProductsWithTransaction`, ajoutez manuellement une entrée pour un produit dans la table `Order Details`, puis essayez de supprimer ce produit (ainsi que d’autres).</span><span class="sxs-lookup"><span data-stu-id="38b6b-160">To test the `DeleteProductsWithTransaction` method s atomicity, manually add an entry for a product in the `Order Details` table and then attempt to delete that product (along with others).</span></span> <span data-ttu-id="38b6b-161">Vous recevrez une violation de contrainte de clé étrangère lors de la tentative de suppression du produit avec une commande associée, mais notez comment les autres suppressions de produits sélectionnés sont annulées.</span><span class="sxs-lookup"><span data-stu-id="38b6b-161">You will receive a foreign key constraint violation when attempting to delete the product with an associated order, but note how the other selected products deletions are rolled back.</span></span>

## <a name="summary"></a><span data-ttu-id="38b6b-162">Récapitulatif</span><span class="sxs-lookup"><span data-stu-id="38b6b-162">Summary</span></span>

<span data-ttu-id="38b6b-163">La création d’une interface de suppression de lot implique l’ajout d’un GridView avec une colonne de cases à cocher et un contrôle Web bouton qui, lorsque vous cliquez dessus, supprime toutes les lignes sélectionnées comme une seule opération atomique.</span><span class="sxs-lookup"><span data-stu-id="38b6b-163">Creating a batch deleting interface involves adding a GridView with a column of checkboxes and a Button Web control that, when clicked, will delete all of the selected rows as a single atomic operation.</span></span> <span data-ttu-id="38b6b-164">Dans ce didacticiel, nous avons créé une telle interface par accolant ensemble du travail effectué dans deux didacticiels précédents, en [ajoutant une colonne GridView de cases à cocher](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) et en [encapsulant les modifications apportées à la base de données dans une transaction](wrapping-database-modifications-within-a-transaction-cs.md).</span><span class="sxs-lookup"><span data-stu-id="38b6b-164">In this tutorial we built such an interface by piecing together work done in two previous tutorials, [Adding a GridView Column of Checkboxes](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) and [Wrapping Database Modifications within a Transaction](wrapping-database-modifications-within-a-transaction-cs.md).</span></span> <span data-ttu-id="38b6b-165">Dans le premier didacticiel, nous avons créé un GridView avec une colonne de cases à cocher et, dans ce dernier, nous avons implémenté une méthode dans la couche BLL qui, lorsqu’elle a passé une `List<T>` de valeurs `ProductID`, les a supprimées dans l’étendue d’une transaction.</span><span class="sxs-lookup"><span data-stu-id="38b6b-165">In the first tutorial we created a GridView with a column of checkboxes and in the latter we implemented a method in the BLL that, when passed a `List<T>` of `ProductID` values, deleted them all within the scope of a transaction.</span></span>

<span data-ttu-id="38b6b-166">Dans le didacticiel suivant, nous allons créer une interface pour effectuer des insertions par lot.</span><span class="sxs-lookup"><span data-stu-id="38b6b-166">In the next tutorial we'll create an interface for performing batch inserts.</span></span>

<span data-ttu-id="38b6b-167">Bonne programmation !</span><span class="sxs-lookup"><span data-stu-id="38b6b-167">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="38b6b-168">À propos de l’auteur</span><span class="sxs-lookup"><span data-stu-id="38b6b-168">About the Author</span></span>

<span data-ttu-id="38b6b-169">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), auteur de sept livres ASP/ASP. net et fondateur de [4GuysFromRolla.com](http://www.4guysfromrolla.com), travaille avec des technologies Web Microsoft depuis 1998.</span><span class="sxs-lookup"><span data-stu-id="38b6b-169">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="38b6b-170">Scott travaille en tant que consultant, formateur et auteur indépendant.</span><span class="sxs-lookup"><span data-stu-id="38b6b-170">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="38b6b-171">Son dernier livre est [*Sams vous apprend vous-même ASP.NET 2,0 en 24 heures*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="38b6b-171">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="38b6b-172">Il peut être contacté à [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="38b6b-172">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="38b6b-173">ou via son blog, qui se trouve sur [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="38b6b-173">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="38b6b-174">Remerciements à</span><span class="sxs-lookup"><span data-stu-id="38b6b-174">Special Thanks To</span></span>

<span data-ttu-id="38b6b-175">Cette série de didacticiels a été examinée par de nombreux réviseurs utiles.</span><span class="sxs-lookup"><span data-stu-id="38b6b-175">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="38b6b-176">Les réviseurs de leads pour ce didacticiel étaient Hilton Giesenow et Teresa Murphy.</span><span class="sxs-lookup"><span data-stu-id="38b6b-176">Lead reviewers for this tutorial were Hilton Giesenow and Teresa Murphy.</span></span> <span data-ttu-id="38b6b-177">Vous souhaitez revoir mes prochains articles MSDN ?</span><span class="sxs-lookup"><span data-stu-id="38b6b-177">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="38b6b-178">Si c’est le cas, insérez une ligne sur [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="38b6b-178">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="38b6b-179">[Précédent](batch-updating-cs.md)
> [Suivant](batch-inserting-cs.md)</span><span class="sxs-lookup"><span data-stu-id="38b6b-179">[Previous](batch-updating-cs.md)
[Next](batch-inserting-cs.md)</span></span>

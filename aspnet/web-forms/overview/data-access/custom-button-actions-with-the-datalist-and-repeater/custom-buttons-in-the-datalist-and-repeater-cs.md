---
uid: web-forms/overview/data-access/custom-button-actions-with-the-datalist-and-repeater/custom-buttons-in-the-datalist-and-repeater-cs
title: Boutons personnalisés dans les contrôles DataList et Repeater (C#) | Microsoft Docs
author: rick-anderson
description: Dans ce didacticiel, nous allons créer une interface qui utilise un répéteur pour répertorier les catégories dans le système, chaque catégorie fournissant un bouton permettant d’afficher son associ...
ms.author: riande
ms.date: 11/13/2006
ms.assetid: 1f42e332-78dc-438b-9e35-0c97aa0ad929
msc.legacyurl: /web-forms/overview/data-access/custom-button-actions-with-the-datalist-and-repeater/custom-buttons-in-the-datalist-and-repeater-cs
msc.type: authoredcontent
ms.openlocfilehash: e8cb1054068327c25e057b6df1cc7506feec8d37
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/28/2019
ms.locfileid: "74601773"
---
# <a name="custom-buttons-in-the-datalist-and-repeater-c"></a><span data-ttu-id="95eee-103">Boutons personnalisés dans les contrôles DataList et Repeater (C#)</span><span class="sxs-lookup"><span data-stu-id="95eee-103">Custom Buttons in the DataList and Repeater (C#)</span></span>

<span data-ttu-id="95eee-104">par [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="95eee-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="95eee-105">[Télécharger l’exemple d’application](https://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_46_CS.exe) ou [Télécharger le PDF](custom-buttons-in-the-datalist-and-repeater-cs/_static/datatutorial46cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="95eee-105">[Download Sample App](https://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_46_CS.exe) or [Download PDF](custom-buttons-in-the-datalist-and-repeater-cs/_static/datatutorial46cs1.pdf)</span></span>

> <span data-ttu-id="95eee-106">Dans ce didacticiel, nous allons créer une interface qui utilise un Repeater pour répertorier les catégories dans le système, chaque catégorie fournissant un bouton permettant d’afficher ses produits associés à l’aide d’un contrôle BulletedList.</span><span class="sxs-lookup"><span data-stu-id="95eee-106">In this tutorial we'll build an interface that uses a Repeater to list the categories in the system, with each category providing a button to show its associated products using a BulletedList control.</span></span>

## <a name="introduction"></a><span data-ttu-id="95eee-107">Introduction</span><span class="sxs-lookup"><span data-stu-id="95eee-107">Introduction</span></span>

<span data-ttu-id="95eee-108">Dans les dix derniers sept didacticiels de DataList et de Repeater, nous avons créé des exemples en lecture seule et des exemples de modification et de suppression.</span><span class="sxs-lookup"><span data-stu-id="95eee-108">Throughout the past seventeen DataList and Repeater tutorials, we ve created both read-only examples and editing and deleting examples.</span></span> <span data-ttu-id="95eee-109">Pour faciliter la modification et la suppression des fonctionnalités au sein d’un contrôle DataList, nous avons ajouté des boutons aux contrôles DataList `ItemTemplate` qui, lorsque vous cliquez dessus, ont provoqué une publication et déclenché un événement DataList correspondant à la propriété Button s `CommandName`.</span><span class="sxs-lookup"><span data-stu-id="95eee-109">To facilitate editing and deleting capabilities within a DataList, we added buttons to the DataList s `ItemTemplate` that, when clicked, caused a postback and raised a DataList event corresponding to the button s `CommandName` property.</span></span> <span data-ttu-id="95eee-110">Par exemple, si vous ajoutez un bouton au `ItemTemplate` avec une valeur de propriété `CommandName` de Edit, les contrôles DataList `EditCommand` se déclenchent lors de la publication (postback); l’un avec l' `CommandName` DELETE déclenche l' `DeleteCommand`.</span><span class="sxs-lookup"><span data-stu-id="95eee-110">For example, adding a button to the `ItemTemplate` with a `CommandName` property value of Edit causes the DataList s `EditCommand` to fire on postback; one with the `CommandName` Delete raises the `DeleteCommand`.</span></span>

<span data-ttu-id="95eee-111">Outre les boutons modifier et supprimer, les contrôles DataList et Repeater peuvent également inclure des boutons, LinkButtons ou ImageButtons qui, lorsque vous cliquez dessus, exécutent une logique personnalisée côté serveur.</span><span class="sxs-lookup"><span data-stu-id="95eee-111">In addition to Edit and Delete buttons, the DataList and Repeater controls can also include Buttons, LinkButtons, or ImageButtons that, when clicked, perform some custom server-side logic.</span></span> <span data-ttu-id="95eee-112">Dans ce didacticiel, nous allons créer une interface qui utilise un répéteur pour répertorier les catégories dans le système.</span><span class="sxs-lookup"><span data-stu-id="95eee-112">In this tutorial we'll build an interface that uses a Repeater to list the categories in the system.</span></span> <span data-ttu-id="95eee-113">Pour chaque catégorie, le Repeater inclut un bouton pour afficher les produits associés de catégorie à l’aide d’un contrôle BulletedList (voir figure 1).</span><span class="sxs-lookup"><span data-stu-id="95eee-113">For each category, the Repeater will include a button to show the category s associated products using a BulletedList control (see Figure 1).</span></span>

<span data-ttu-id="95eee-114">[![cliquant sur le lien Afficher les produits affiche les produits de la catégorie dans une liste à puces](custom-buttons-in-the-datalist-and-repeater-cs/_static/image2.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="95eee-114">[![Clicking the Show Products Link Displays the Category s Products in a Bulleted List](custom-buttons-in-the-datalist-and-repeater-cs/_static/image2.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image1.png)</span></span>

<span data-ttu-id="95eee-115">**Figure 1**: lorsque vous cliquez sur le lien Afficher les produits, les produits de la catégorie s’affichent dans une liste à puces ([cliquez pour afficher l’image en plein écran](custom-buttons-in-the-datalist-and-repeater-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="95eee-115">**Figure 1**: Clicking the Show Products Link Displays the Category s Products in a Bulleted List ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-cs/_static/image3.png))</span></span>

## <a name="step-1-adding-the-custom-button-tutorial-web-pages"></a><span data-ttu-id="95eee-116">Étape 1 : ajout des pages Web du didacticiel du bouton personnalisé</span><span class="sxs-lookup"><span data-stu-id="95eee-116">Step 1: Adding the Custom Button Tutorial Web Pages</span></span>

<span data-ttu-id="95eee-117">Avant d’examiner comment ajouter un bouton personnalisé, commençons par prendre un moment pour créer les pages ASP.NET dans notre projet de site Web dont nous aurons besoin pour ce didacticiel.</span><span class="sxs-lookup"><span data-stu-id="95eee-117">Before we look at how to add a custom button, let s first take a moment to create the ASP.NET pages in our website project that we'll need for this tutorial.</span></span> <span data-ttu-id="95eee-118">Commencez par ajouter un nouveau dossier nommé `CustomButtonsDataListRepeater`.</span><span class="sxs-lookup"><span data-stu-id="95eee-118">Start by adding a new folder named `CustomButtonsDataListRepeater`.</span></span> <span data-ttu-id="95eee-119">Ensuite, ajoutez les deux pages ASP.NET suivantes à ce dossier, en veillant à associer chaque page à la page maître `Site.master` :</span><span class="sxs-lookup"><span data-stu-id="95eee-119">Next, add the following two ASP.NET pages to that folder, making sure to associate each page with the `Site.master` master page:</span></span>

- `Default.aspx`
- `CustomButtons.aspx`

![Ajouter les pages ASP.NET pour les didacticiels associés aux boutons personnalisés](custom-buttons-in-the-datalist-and-repeater-cs/_static/image4.png)

<span data-ttu-id="95eee-121">**Figure 2**: ajouter les pages ASP.net pour les didacticiels associés aux boutons personnalisés</span><span class="sxs-lookup"><span data-stu-id="95eee-121">**Figure 2**: Add the ASP.NET Pages for the Custom Buttons-Related Tutorials</span></span>

<span data-ttu-id="95eee-122">Comme dans les autres dossiers, `Default.aspx` dans le dossier `CustomButtonsDataListRepeater` répertorie les didacticiels de la section.</span><span class="sxs-lookup"><span data-stu-id="95eee-122">Like in the other folders, `Default.aspx` in the `CustomButtonsDataListRepeater` folder will list the tutorials in its section.</span></span> <span data-ttu-id="95eee-123">N’oubliez pas que le contrôle utilisateur `SectionLevelTutorialListing.ascx` fournit cette fonctionnalité.</span><span class="sxs-lookup"><span data-stu-id="95eee-123">Recall that the `SectionLevelTutorialListing.ascx` User Control provides this functionality.</span></span> <span data-ttu-id="95eee-124">Ajoutez ce contrôle utilisateur à `Default.aspx` en le faisant glisser de l’Explorateur de solutions sur la page s Mode Création.</span><span class="sxs-lookup"><span data-stu-id="95eee-124">Add this User Control to `Default.aspx` by dragging it from the Solution Explorer onto the page s Design view.</span></span>

<span data-ttu-id="95eee-125">[![ajouter le contrôle utilisateur SectionLevelTutorialListing. ascx à default. aspx](custom-buttons-in-the-datalist-and-repeater-cs/_static/image6.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="95eee-125">[![Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](custom-buttons-in-the-datalist-and-repeater-cs/_static/image6.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image5.png)</span></span>

<span data-ttu-id="95eee-126">**Figure 3**: ajouter le contrôle utilisateur `SectionLevelTutorialListing.ascx` à `Default.aspx` ([cliquez pour afficher l’image en taille réelle](custom-buttons-in-the-datalist-and-repeater-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="95eee-126">**Figure 3**: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-cs/_static/image7.png))</span></span>

<span data-ttu-id="95eee-127">Enfin, ajoutez les pages en tant qu’entrées au fichier `Web.sitemap`.</span><span class="sxs-lookup"><span data-stu-id="95eee-127">Lastly, add the pages as entries to the `Web.sitemap` file.</span></span> <span data-ttu-id="95eee-128">Plus précisément, ajoutez le balisage suivant après la pagination et le tri avec les `<siteMapNode>`DataList et Repeater :</span><span class="sxs-lookup"><span data-stu-id="95eee-128">Specifically, add the following markup after the Paging and Sorting with the DataList and Repeater `<siteMapNode>`:</span></span>

[!code-xml[Main](custom-buttons-in-the-datalist-and-repeater-cs/samples/sample1.xml)]

<span data-ttu-id="95eee-129">Après avoir mis à jour `Web.sitemap`, prenez un moment pour afficher le site Web des didacticiels via un navigateur.</span><span class="sxs-lookup"><span data-stu-id="95eee-129">After updating `Web.sitemap`, take a moment to view the tutorials website through a browser.</span></span> <span data-ttu-id="95eee-130">Le menu à gauche contient maintenant des éléments pour les didacticiels de modification, d’insertion et de suppression.</span><span class="sxs-lookup"><span data-stu-id="95eee-130">The menu on the left now includes items for the editing, inserting, and deleting tutorials.</span></span>

![Le plan de site comprend désormais l’entrée du didacticiel sur les boutons personnalisés](custom-buttons-in-the-datalist-and-repeater-cs/_static/image8.png)

<span data-ttu-id="95eee-132">**Figure 4**: le plan de site comprend désormais l’entrée du didacticiel sur les boutons personnalisés</span><span class="sxs-lookup"><span data-stu-id="95eee-132">**Figure 4**: The Site Map Now Includes the Entry for the Custom Buttons Tutorial</span></span>

## <a name="step-2-adding-the-list-of-categories"></a><span data-ttu-id="95eee-133">Étape 2 : ajout de la liste des catégories</span><span class="sxs-lookup"><span data-stu-id="95eee-133">Step 2: Adding the List of Categories</span></span>

<span data-ttu-id="95eee-134">Pour ce didacticiel, nous devons créer un répéteur qui répertorie toutes les catégories avec un LinkButton afficher les produits qui, lorsque vous cliquez dessus, affiche les produits des catégories associées dans une liste à puces.</span><span class="sxs-lookup"><span data-stu-id="95eee-134">For this tutorial we need to create a Repeater that lists all categories along with a Show Products LinkButton that, when clicked, displays the associated category s products in a bulleted list.</span></span> <span data-ttu-id="95eee-135">Commençons par créer un répéteur simple qui répertorie les catégories dans le système.</span><span class="sxs-lookup"><span data-stu-id="95eee-135">Let s first create a simple Repeater that lists the categories in the system.</span></span> <span data-ttu-id="95eee-136">Commencez par ouvrir la page `CustomButtons.aspx` dans le dossier `CustomButtonsDataListRepeater`.</span><span class="sxs-lookup"><span data-stu-id="95eee-136">Start by opening the `CustomButtons.aspx` page in the `CustomButtonsDataListRepeater` folder.</span></span> <span data-ttu-id="95eee-137">Faites glisser un Repeater de la boîte à outils vers le concepteur et affectez à sa propriété `ID` la valeur `Categories`.</span><span class="sxs-lookup"><span data-stu-id="95eee-137">Drag a Repeater from the Toolbox onto the Designer and set its `ID` property to `Categories`.</span></span> <span data-ttu-id="95eee-138">Ensuite, créez un nouveau contrôle de source de données à partir de la balise active de Repeater s.</span><span class="sxs-lookup"><span data-stu-id="95eee-138">Next, create a new data source control from the Repeater s smart tag.</span></span> <span data-ttu-id="95eee-139">En particulier, créez un nouveau contrôle ObjectDataSource nommé `CategoriesDataSource` qui sélectionne ses données à partir de la méthode de `CategoriesBLL` classe s `GetCategories()`.</span><span class="sxs-lookup"><span data-stu-id="95eee-139">Specifically, create a new ObjectDataSource control named `CategoriesDataSource` that selects its data from the `CategoriesBLL` class s `GetCategories()` method.</span></span>

<span data-ttu-id="95eee-140">[![configurer ObjectDataSource pour utiliser la méthode CategoriesBLL de la classe s GetCategories ()](custom-buttons-in-the-datalist-and-repeater-cs/_static/image10.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="95eee-140">[![Configure the ObjectDataSource to Use the CategoriesBLL Class s GetCategories() Method](custom-buttons-in-the-datalist-and-repeater-cs/_static/image10.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image9.png)</span></span>

<span data-ttu-id="95eee-141">**Figure 5**: configurer ObjectDataSource pour utiliser la méthode `CategoriesBLL` classe s `GetCategories()` ([cliquez pour afficher l’image en taille réelle](custom-buttons-in-the-datalist-and-repeater-cs/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="95eee-141">**Figure 5**: Configure the ObjectDataSource to Use the `CategoriesBLL` Class s `GetCategories()` Method ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-cs/_static/image11.png))</span></span>

<span data-ttu-id="95eee-142">Contrairement au contrôle DataList, pour lequel Visual Studio crée une `ItemTemplate` par défaut basée sur la source de données, les modèles Repeater s doivent être définis manuellement.</span><span class="sxs-lookup"><span data-stu-id="95eee-142">Unlike the DataList control, for which Visual Studio creates a default `ItemTemplate` based on the data source, the Repeater s templates must be manually defined.</span></span> <span data-ttu-id="95eee-143">En outre, les modèles Repeater s doivent être créés et modifiés de façon déclarative (autrement dit, il n’y a pas d’option modifier les modèles dans la balise active de Repeater s).</span><span class="sxs-lookup"><span data-stu-id="95eee-143">Furthermore, the Repeater s templates must be created and edited declaratively (that is, there s no Edit Templates option in the Repeater s smart tag).</span></span>

<span data-ttu-id="95eee-144">Cliquez sur l’onglet source dans le coin inférieur gauche et ajoutez une `ItemTemplate` qui affiche le nom de la catégorie dans un élément `<h3>` et sa description dans une balise de paragraphe. incluez une `SeparatorTemplate` qui affiche une règle horizontale (`<hr />`) entre chaque catégorie.</span><span class="sxs-lookup"><span data-stu-id="95eee-144">Click on the Source tab in the bottom left corner and add an `ItemTemplate` that displays the category s name in an `<h3>` element and its description in a paragraph tag; include a `SeparatorTemplate` that displays a horizontal rule (`<hr />`) between each category.</span></span> <span data-ttu-id="95eee-145">Ajoutez également un LinkButton dont la propriété `Text` est définie sur Afficher les produits.</span><span class="sxs-lookup"><span data-stu-id="95eee-145">Also add a LinkButton with its `Text` property set to Show Products.</span></span> <span data-ttu-id="95eee-146">Une fois ces étapes terminées, le balisage déclaratif de votre page doit ressembler à ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="95eee-146">After completing these steps, your page s declarative markup should look like the following:</span></span>

[!code-aspx[Main](custom-buttons-in-the-datalist-and-repeater-cs/samples/sample2.aspx)]

<span data-ttu-id="95eee-147">La figure 6 illustre la page affichée dans un navigateur.</span><span class="sxs-lookup"><span data-stu-id="95eee-147">Figure 6 shows the page when viewed through a browser.</span></span> <span data-ttu-id="95eee-148">Chaque nom de catégorie et description est listé.</span><span class="sxs-lookup"><span data-stu-id="95eee-148">Each category name and description is listed.</span></span> <span data-ttu-id="95eee-149">Quand l’utilisateur clique sur le bouton afficher les produits, provoque une publication mais n’effectue aucune action.</span><span class="sxs-lookup"><span data-stu-id="95eee-149">The Show Products button, when clicked, causes a postback but does not yet perform any action.</span></span>

<span data-ttu-id="95eee-150">[![le nom et la description de chaque catégorie s’affichent, ainsi qu’un LinkButton afficher les produits](custom-buttons-in-the-datalist-and-repeater-cs/_static/image13.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="95eee-150">[![Each Category s Name and Description is Displayed, Along with a Show Products LinkButton](custom-buttons-in-the-datalist-and-repeater-cs/_static/image13.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image12.png)</span></span>

<span data-ttu-id="95eee-151">**Figure 6**: le nom et la description de chaque catégorie s’affichent, ainsi qu’un LinkButton afficher les produits ([cliquez pour afficher l’image en plein écran](custom-buttons-in-the-datalist-and-repeater-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="95eee-151">**Figure 6**: Each Category s Name and Description is Displayed, Along with a Show Products LinkButton ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-cs/_static/image14.png))</span></span>

## <a name="step-3-executing-server-side-logic-when-the-show-products-linkbutton-is-clicked"></a><span data-ttu-id="95eee-152">Étape 3 : exécution de la logique côté serveur lorsque l’utilisateur clique sur le LinkButton afficher les produits</span><span class="sxs-lookup"><span data-stu-id="95eee-152">Step 3: Executing Server-Side Logic When the Show Products LinkButton is Clicked</span></span>

<span data-ttu-id="95eee-153">Chaque fois qu’un utilisateur clique sur un bouton, LinkButton ou ImageButton dans un modèle dans un contrôle DataList ou Repeater, une publication (postback) se produit et l’événement DataList ou Repeater s `ItemCommand` se déclenche.</span><span class="sxs-lookup"><span data-stu-id="95eee-153">Anytime a Button, LinkButton, or ImageButton within a template in a DataList or Repeater is clicked, a postback occurs and the DataList or Repeater s `ItemCommand` event fires.</span></span> <span data-ttu-id="95eee-154">En plus de l’événement `ItemCommand`, le contrôle DataList peut également déclencher un autre événement plus spécifique si la propriété Button s `CommandName` est définie sur l’une des chaînes réservées (Delete, Edit, Cancel, Update ou Select), mais que l’événement `ItemCommand` est *toujours* déclenché.</span><span class="sxs-lookup"><span data-stu-id="95eee-154">In addition to the `ItemCommand` event, the DataList control may also raise another, more specific event if the button s `CommandName` property is set to one of the reserved strings ( Delete, Edit, Cancel, Update, or Select ), but the `ItemCommand` event is *always* fired.</span></span>

<span data-ttu-id="95eee-155">Lorsque vous cliquez sur un bouton dans un contrôle DataList ou Repeater, il est souvent nécessaire de passer le long du bouton sur lequel l’utilisateur a cliqué (dans le cas où il peut y avoir plusieurs boutons dans le contrôle, comme un bouton modifier et supprimer) et peut-être des informations supplémentaires (par exemple, valeur de clé primaire de l’élément sur lequel l’utilisateur a cliqué sur le bouton).</span><span class="sxs-lookup"><span data-stu-id="95eee-155">When a button is clicked within a DataList or Repeater, oftentimes we need to pass along which button was clicked (in the case that there may be multiple buttons within the control, such as both an Edit and Delete button) and perhaps some additional information (such as the primary key value of the item whose button was clicked).</span></span> <span data-ttu-id="95eee-156">Le bouton, LinkButton et ImageButton fournissent deux propriétés dont les valeurs sont passées au gestionnaire d’événements `ItemCommand` :</span><span class="sxs-lookup"><span data-stu-id="95eee-156">The Button, LinkButton, and ImageButton provide two properties whose values are passed to the `ItemCommand` event handler:</span></span>

- <span data-ttu-id="95eee-157">`CommandName` une chaîne généralement utilisée pour identifier chaque bouton dans le modèle</span><span class="sxs-lookup"><span data-stu-id="95eee-157">`CommandName` a string typically used to identify each button in the template</span></span>
- <span data-ttu-id="95eee-158">`CommandArgument` couramment utilisé pour contenir la valeur d’un champ de données, tel que la valeur de clé primaire.</span><span class="sxs-lookup"><span data-stu-id="95eee-158">`CommandArgument` commonly used to hold the value of some data field, such as the primary key value</span></span>

<span data-ttu-id="95eee-159">Pour cet exemple, définissez la propriété LinkButton s `CommandName` sur ShowProducts et liez la valeur de clé primaire de l’enregistrement actuel `CategoryID` à la propriété `CommandArgument` à l’aide de la syntaxe de liaison de liaison `CategoryArgument='<%# Eval("CategoryID") %>'`.</span><span class="sxs-lookup"><span data-stu-id="95eee-159">For this example, set the LinkButton s `CommandName` property to ShowProducts and bind the current record s primary key value `CategoryID` to the `CommandArgument` property using the databinding syntax `CategoryArgument='<%# Eval("CategoryID") %>'`.</span></span> <span data-ttu-id="95eee-160">Une fois ces deux propriétés spécifiées, la syntaxe déclarative des LinkButtons doit ressembler à ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="95eee-160">After specifying these two properties, the LinkButton s declarative syntax should look like the following:</span></span>

[!code-aspx[Main](custom-buttons-in-the-datalist-and-repeater-cs/samples/sample3.aspx)]

<span data-ttu-id="95eee-161">Lorsque l’utilisateur clique sur le bouton, une publication (postback) se produit et l’événement DataList ou Repeater s `ItemCommand` se déclenche.</span><span class="sxs-lookup"><span data-stu-id="95eee-161">When the button is clicked, a postback occurs and the DataList or Repeater s `ItemCommand` event fires.</span></span> <span data-ttu-id="95eee-162">Le gestionnaire d’événements reçoit le bouton s `CommandName` et `CommandArgument` valeurs.</span><span class="sxs-lookup"><span data-stu-id="95eee-162">The event handler is passed the button s `CommandName` and `CommandArgument` values.</span></span>

<span data-ttu-id="95eee-163">Créez un gestionnaire d’événements pour l’événement Repeater s `ItemCommand` et notez le second paramètre transmis au gestionnaire d’événements (nommé `e`).</span><span class="sxs-lookup"><span data-stu-id="95eee-163">Create an event handler for the Repeater s `ItemCommand` event and note the second parameter passed into the event handler (named `e`).</span></span> <span data-ttu-id="95eee-164">Ce deuxième paramètre est de type [`RepeaterCommandEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeatercommandeventargs.aspx) et possède les quatre propriétés suivantes :</span><span class="sxs-lookup"><span data-stu-id="95eee-164">This second parameter is of type [`RepeaterCommandEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeatercommandeventargs.aspx) and has the following four properties:</span></span>

- <span data-ttu-id="95eee-165">`CommandArgument` la valeur du bouton cliqué s `CommandArgument` propriété</span><span class="sxs-lookup"><span data-stu-id="95eee-165">`CommandArgument` the value of the clicked button s `CommandArgument` property</span></span>
- <span data-ttu-id="95eee-166">`CommandName` la valeur de la propriété Button s `CommandName`</span><span class="sxs-lookup"><span data-stu-id="95eee-166">`CommandName` the value of the button s `CommandName` property</span></span>
- <span data-ttu-id="95eee-167">`CommandSource` une référence au contrôle bouton sur lequel l’utilisateur a cliqué</span><span class="sxs-lookup"><span data-stu-id="95eee-167">`CommandSource` a reference to the button control that was clicked</span></span>
- <span data-ttu-id="95eee-168">`Item` une référence au [`RepeaterItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeateritem.aspx) qui contient le bouton sur lequel l’utilisateur a cliqué ; chaque enregistrement lié au répéteur est représenté sous la forme d’un `RepeaterItem`</span><span class="sxs-lookup"><span data-stu-id="95eee-168">`Item` a reference to the [`RepeaterItem`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.repeateritem.aspx) that contains the button that was clicked; each record bound to the Repeater is manifested as a `RepeaterItem`</span></span>

<span data-ttu-id="95eee-169">Étant donné que les `CategoryID` des catégories sélectionnées sont transmises via la propriété `CommandArgument`, nous pouvons récupérer l’ensemble des produits associés à la catégorie sélectionnée dans le gestionnaire d’événements `ItemCommand`.</span><span class="sxs-lookup"><span data-stu-id="95eee-169">Since the selected category s `CategoryID` is passed in via the `CommandArgument` property, we can get the set of products associated with the selected category in the `ItemCommand` event handler.</span></span> <span data-ttu-id="95eee-170">Ces produits peuvent ensuite être liés à un contrôle BulletedList dans le `ItemTemplate` (que nous avons encore ajoutés).</span><span class="sxs-lookup"><span data-stu-id="95eee-170">These products can then be bound to a BulletedList control in the `ItemTemplate` (which we ve yet to add).</span></span> <span data-ttu-id="95eee-171">Tout ce qui reste, c’est d’ajouter la fonction BulletedList, de la référencer dans le gestionnaire d’événements `ItemCommand` et de la lier à l’ensemble des produits pour la catégorie sélectionnée, que nous allons aborder à l’étape 4.</span><span class="sxs-lookup"><span data-stu-id="95eee-171">All that remains, then, is to add the BulletedList, reference it in the `ItemCommand` event handler, and bind to it the set of products for the selected category, which we'll tackle in Step 4.</span></span>

> [!NOTE]
> <span data-ttu-id="95eee-172">Le gestionnaire d’événements `ItemCommand` DataList est passé à un objet de type [`DataListCommandEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistcommandeventargs.aspx), qui offre les quatre mêmes propriétés que la classe `RepeaterCommandEventArgs`.</span><span class="sxs-lookup"><span data-stu-id="95eee-172">The DataList s `ItemCommand` event handler is passed an object of type [`DataListCommandEventArgs`](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datalistcommandeventargs.aspx), which offers the same four properties as the `RepeaterCommandEventArgs` class.</span></span>

## <a name="step-4-displaying-the-selected-category-s-products-in-a-bulleted-list"></a><span data-ttu-id="95eee-173">Étape 4 : affichage des produits de la catégorie sélectionnée dans une liste à puces</span><span class="sxs-lookup"><span data-stu-id="95eee-173">Step 4: Displaying the Selected Category s Products in a Bulleted List</span></span>

<span data-ttu-id="95eee-174">Les produits de la catégorie sélectionnée peuvent être affichés dans le `ItemTemplate` du répétiteur à l’aide d’un nombre quelconque de contrôles.</span><span class="sxs-lookup"><span data-stu-id="95eee-174">The selected category s products can be displayed within the Repeater s `ItemTemplate` using any number of controls.</span></span> <span data-ttu-id="95eee-175">Nous pourrions ajouter un autre Repeater imbriqué, un contrôle DataList, un contrôle DropDownList, un GridView, etc.</span><span class="sxs-lookup"><span data-stu-id="95eee-175">We could add another nested Repeater, a DataList, a DropDownList, a GridView, and so on.</span></span> <span data-ttu-id="95eee-176">Étant donné que nous souhaitons afficher les produits sous la forme d’une liste à puces, nous allons utiliser le contrôle BulletedList.</span><span class="sxs-lookup"><span data-stu-id="95eee-176">Since we want to display the products as a bulleted list, though, we'll use the BulletedList control.</span></span> <span data-ttu-id="95eee-177">En revenant au balisage déclaratif de la page `CustomButtons.aspx`, ajoutez un contrôle BulletedList au `ItemTemplate` après le LinkButton Show Products.</span><span class="sxs-lookup"><span data-stu-id="95eee-177">Returning to the `CustomButtons.aspx` page s declarative markup, add a BulletedList control to the `ItemTemplate` after the Show Products LinkButton.</span></span> <span data-ttu-id="95eee-178">Définissez le `ID` s BulletedLists sur `ProductsInCategory`.</span><span class="sxs-lookup"><span data-stu-id="95eee-178">Set the BulletedLists s `ID` to `ProductsInCategory`.</span></span> <span data-ttu-id="95eee-179">L’BulletedList affiche la valeur du champ de données spécifié via la propriété `DataTextField` ; étant donné que ce contrôle sera lié à des informations sur le produit, définissez la propriété `DataTextField` sur `ProductName`.</span><span class="sxs-lookup"><span data-stu-id="95eee-179">The BulletedList displays the value of the data field specified via the `DataTextField` property; since this control will have product information bound to it, set the `DataTextField` property to `ProductName`.</span></span>

[!code-aspx[Main](custom-buttons-in-the-datalist-and-repeater-cs/samples/sample4.aspx)]

<span data-ttu-id="95eee-180">Dans le gestionnaire d’événements `ItemCommand`, référencez ce contrôle à l’aide de `e.Item.FindControl("ProductsInCategory")` et liez-le à l’ensemble des produits associés à la catégorie sélectionnée.</span><span class="sxs-lookup"><span data-stu-id="95eee-180">In the `ItemCommand` event handler, reference this control using `e.Item.FindControl("ProductsInCategory")` and bind it to the set of products associated with the selected category.</span></span>

[!code-csharp[Main](custom-buttons-in-the-datalist-and-repeater-cs/samples/sample5.cs)]

<span data-ttu-id="95eee-181">Avant d’effectuer une action dans le gestionnaire d’événements `ItemCommand`, il est prudent de vérifier d’abord la valeur de la `CommandName`entrante.</span><span class="sxs-lookup"><span data-stu-id="95eee-181">Before performing any action in the `ItemCommand` event handler, it s prudent to first check the value of the incoming `CommandName`.</span></span> <span data-ttu-id="95eee-182">Étant donné que le gestionnaire d’événements `ItemCommand` se déclenche lorsque l’utilisateur clique sur *un* bouton, s’il y a plusieurs boutons dans le modèle, utilisez la valeur `CommandName` pour identifier l’action à entreprendre.</span><span class="sxs-lookup"><span data-stu-id="95eee-182">Since the `ItemCommand` event handler fires when *any* button is clicked, if there are multiple buttons in the template use the `CommandName` value to discern what action to take.</span></span> <span data-ttu-id="95eee-183">La vérification de la `CommandName` ici est discutable, car nous n’avons qu’un seul bouton, mais il s’agit d’une bonne habitude de forme.</span><span class="sxs-lookup"><span data-stu-id="95eee-183">Checking the `CommandName` here is moot, since we only have a single button, but it is a good habit to form.</span></span> <span data-ttu-id="95eee-184">Ensuite, les `CategoryID` de la catégorie sélectionnée sont récupérés à partir de la propriété `CommandArgument`.</span><span class="sxs-lookup"><span data-stu-id="95eee-184">Next, the `CategoryID` of the selected category is retrieved from the `CommandArgument` property.</span></span> <span data-ttu-id="95eee-185">Le contrôle BulletedList dans le modèle est ensuite référencé et lié aux résultats de la méthode `ProductsBLL` classe s `GetProductsByCategoryID(categoryID)`.</span><span class="sxs-lookup"><span data-stu-id="95eee-185">The BulletedList control in the template is then referenced and bound to the results of the `ProductsBLL` class s `GetProductsByCategoryID(categoryID)` method.</span></span>

<span data-ttu-id="95eee-186">Dans les didacticiels précédents qui utilisaient les boutons d’un contrôle DataList, comme [une vue d’ensemble de la modification et de la suppression de données dans le contrôle DataList](../editing-and-deleting-data-through-the-datalist/an-overview-of-editing-and-deleting-data-in-the-datalist-cs.md), nous avons déterminé la valeur de clé primaire d’un élément donné via la collection `DataKeys`.</span><span class="sxs-lookup"><span data-stu-id="95eee-186">In previous tutorials that used the buttons within a DataList, such as [An Overview of Editing and Deleting Data in the DataList](../editing-and-deleting-data-through-the-datalist/an-overview-of-editing-and-deleting-data-in-the-datalist-cs.md), we determined the primary key value of a given item via the `DataKeys` collection.</span></span> <span data-ttu-id="95eee-187">Bien que cette approche fonctionne bien avec la DataList, le Repeater n’a pas de propriété `DataKeys`.</span><span class="sxs-lookup"><span data-stu-id="95eee-187">While this approach works well with the DataList, the Repeater does not have a `DataKeys` property.</span></span> <span data-ttu-id="95eee-188">Au lieu de cela, nous devons utiliser une autre approche pour fournir la valeur de clé primaire, par exemple par le biais de la propriété Button s `CommandArgument` ou en affectant la valeur de clé primaire à un contrôle Web d’étiquette masqué dans le modèle et en lisant sa valeur dans le gestionnaire d’événements `ItemCommand` à l’aide de `e.Item.FindControl("LabelID")`.</span><span class="sxs-lookup"><span data-stu-id="95eee-188">Instead, we must use an alternative approach for supplying the primary key value, such as through the button s `CommandArgument` property or by assigning the primary key value to a hidden Label Web control within the template and reading its value back in the `ItemCommand` event handler using `e.Item.FindControl("LabelID")`.</span></span>

<span data-ttu-id="95eee-189">Après avoir terminé le gestionnaire d’événements `ItemCommand`, prenez un moment pour tester cette page dans un navigateur.</span><span class="sxs-lookup"><span data-stu-id="95eee-189">After completing the `ItemCommand` event handler, take a moment to test out this page in a browser.</span></span> <span data-ttu-id="95eee-190">Comme le montre la figure 7, le fait de cliquer sur le lien Afficher les produits entraîne une publication et affiche les produits pour la catégorie sélectionnée dans un BulletedList.</span><span class="sxs-lookup"><span data-stu-id="95eee-190">As Figure 7 shows, clicking the Show Products link causes a postback and displays the products for the selected category in a BulletedList.</span></span> <span data-ttu-id="95eee-191">En outre, Notez que ces informations sur les produits sont conservées, même si vous cliquez sur autres catégories, vous pouvez cliquer sur les liens des produits.</span><span class="sxs-lookup"><span data-stu-id="95eee-191">Furthermore, note that this product information remains, even if other categories Show Products links are clicked.</span></span>

> [!NOTE]
> <span data-ttu-id="95eee-192">Si vous souhaitez modifier le comportement de ce rapport, de sorte que les seuls produits de la catégorie sont répertoriés à la fois, il suffit de définir la propriété du contrôle BulletedList s `EnableViewState` sur `False`.</span><span class="sxs-lookup"><span data-stu-id="95eee-192">If you want to modify the behavior of this report, such that the only one category s products are listed at a time, simply set the BulletedList control s `EnableViewState` property to `False`.</span></span>

<span data-ttu-id="95eee-193">[![un BulletedList est utilisé pour afficher les produits de la catégorie sélectionnée](custom-buttons-in-the-datalist-and-repeater-cs/_static/image16.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="95eee-193">[![A BulletedList is used to Display the Products of the Selected Category](custom-buttons-in-the-datalist-and-repeater-cs/_static/image16.png)](custom-buttons-in-the-datalist-and-repeater-cs/_static/image15.png)</span></span>

<span data-ttu-id="95eee-194">**Figure 7**: un BulletedList est utilisé pour afficher les produits de la catégorie sélectionnée ([cliquez pour afficher l’image en taille réelle](custom-buttons-in-the-datalist-and-repeater-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="95eee-194">**Figure 7**: A BulletedList is used to Display the Products of the Selected Category ([Click to view full-size image](custom-buttons-in-the-datalist-and-repeater-cs/_static/image17.png))</span></span>

## <a name="summary"></a><span data-ttu-id="95eee-195">Récapitulatif</span><span class="sxs-lookup"><span data-stu-id="95eee-195">Summary</span></span>

<span data-ttu-id="95eee-196">Les contrôles DataList et Repeater peuvent inclure un nombre quelconque de boutons, LinkButtons ou ImageButtons dans leurs modèles.</span><span class="sxs-lookup"><span data-stu-id="95eee-196">The DataList and Repeater controls can include any number of Buttons, LinkButtons, or ImageButtons within their templates.</span></span> <span data-ttu-id="95eee-197">De tels boutons, lorsque vous cliquez dessus, provoquent une publication (postback) et déclenchent l’événement `ItemCommand`.</span><span class="sxs-lookup"><span data-stu-id="95eee-197">Such buttons, when clicked, cause a postback and raise the `ItemCommand` event.</span></span> <span data-ttu-id="95eee-198">Pour associer une action personnalisée côté serveur à un clic sur un bouton, créez un gestionnaire d’événements pour l’événement `ItemCommand`.</span><span class="sxs-lookup"><span data-stu-id="95eee-198">To associate custom server-side action with a button being clicked, create an event handler for the `ItemCommand` event.</span></span> <span data-ttu-id="95eee-199">Dans ce gestionnaire d’événements, vérifiez d’abord la valeur de `CommandName` entrant pour déterminer le bouton sur lequel l’utilisateur a cliqué.</span><span class="sxs-lookup"><span data-stu-id="95eee-199">In this event handler first check the incoming `CommandName` value to determine which button was clicked.</span></span> <span data-ttu-id="95eee-200">Vous pouvez éventuellement fournir des informations supplémentaires à l’aide de la propriété Button s `CommandArgument`.</span><span class="sxs-lookup"><span data-stu-id="95eee-200">Additional information can optionally be supplied through the button s `CommandArgument` property.</span></span>

<span data-ttu-id="95eee-201">Bonne programmation !</span><span class="sxs-lookup"><span data-stu-id="95eee-201">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="95eee-202">À propos de l’auteur</span><span class="sxs-lookup"><span data-stu-id="95eee-202">About the Author</span></span>

<span data-ttu-id="95eee-203">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), auteur de sept livres ASP/ASP. net et fondateur de [4GuysFromRolla.com](http://www.4guysfromrolla.com), travaille avec des technologies Web Microsoft depuis 1998.</span><span class="sxs-lookup"><span data-stu-id="95eee-203">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="95eee-204">Scott travaille en tant que consultant, formateur et auteur indépendant.</span><span class="sxs-lookup"><span data-stu-id="95eee-204">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="95eee-205">Son dernier livre est [*Sams vous apprend vous-même ASP.NET 2,0 en 24 heures*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="95eee-205">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="95eee-206">Il peut être contacté à [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="95eee-206">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="95eee-207">ou via son blog, qui se trouve sur [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="95eee-207">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="95eee-208">Remerciements à</span><span class="sxs-lookup"><span data-stu-id="95eee-208">Special Thanks To</span></span>

<span data-ttu-id="95eee-209">Cette série de didacticiels a été examinée par de nombreux réviseurs utiles.</span><span class="sxs-lookup"><span data-stu-id="95eee-209">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="95eee-210">Le réviseur de leads pour ce didacticiel était de Denis Patterson.</span><span class="sxs-lookup"><span data-stu-id="95eee-210">Lead reviewer for this tutorial was Dennis Patterson.</span></span> <span data-ttu-id="95eee-211">Vous souhaitez revoir mes prochains articles MSDN ?</span><span class="sxs-lookup"><span data-stu-id="95eee-211">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="95eee-212">Si c’est le cas, insérez une ligne sur [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="95eee-212">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="95eee-213">Suivant</span><span class="sxs-lookup"><span data-stu-id="95eee-213">Next</span></span>](custom-buttons-in-the-datalist-and-repeater-vb.md)

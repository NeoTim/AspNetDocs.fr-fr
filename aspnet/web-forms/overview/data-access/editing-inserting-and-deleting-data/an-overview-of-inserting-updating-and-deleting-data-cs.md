---
uid: web-forms/overview/data-access/editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs
title: Une vue d’ensemble de l’insertion, la mise à jour et suppression de données (c#) | Microsoft Docs
author: rick-anderson
description: Dans ce didacticiel, nous allons voir comment mapper un ObjectDataSource Insert(), Update(), et des classes de méthodes Delete() aux méthodes de la couche BLL, ainsi que la configuration...
ms.author: riande
ms.date: 07/17/2006
ms.assetid: b651dc58-93c7-4f83-a74e-3b99f6d60848
msc.legacyurl: /web-forms/overview/data-access/editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs
msc.type: authoredcontent
ms.openlocfilehash: 61b3d54b73e33040baf93a8b7705dfb231835b40
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/17/2019
ms.locfileid: "59410446"
---
# <a name="an-overview-of-inserting-updating-and-deleting-data-c"></a><span data-ttu-id="24b63-103">Une vue d’ensemble de l’insertion, la mise à jour et suppression de données (c#)</span><span class="sxs-lookup"><span data-stu-id="24b63-103">An Overview of Inserting, Updating, and Deleting Data (C#)</span></span>

<span data-ttu-id="24b63-104">par [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="24b63-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="24b63-105">[Télécharger l’exemple d’application](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_16_CS.exe) ou [télécharger le PDF](an-overview-of-inserting-updating-and-deleting-data-cs/_static/datatutorial16cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="24b63-105">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_16_CS.exe) or [Download PDF](an-overview-of-inserting-updating-and-deleting-data-cs/_static/datatutorial16cs1.pdf)</span></span>

> <span data-ttu-id="24b63-106">Dans ce didacticiel, nous verrons comment mapper un ObjectDataSource Insert(), Update(), et des classes de méthodes Delete() aux méthodes de la couche BLL, ainsi que la façon de configurer les contrôles GridView, DetailsView et FormView afin de fournir des fonctionnalités de modification de données.</span><span class="sxs-lookup"><span data-stu-id="24b63-106">In this tutorial we'll see how to map an ObjectDataSource's Insert(), Update(), and Delete() methods to the methods of BLL classes, as well as how to configure the GridView, DetailsView, and FormView controls to provide data modification capabilities.</span></span>


## <a name="introduction"></a><span data-ttu-id="24b63-107">Introduction</span><span class="sxs-lookup"><span data-stu-id="24b63-107">Introduction</span></span>

<span data-ttu-id="24b63-108">Sur les dernières plusieurs didacticiels, nous avons examiné comment afficher des données dans une page ASP.NET avec les contrôles GridView, DetailsView et FormView.</span><span class="sxs-lookup"><span data-stu-id="24b63-108">Over the past several tutorials we've examined how to display data in an ASP.NET page using the GridView, DetailsView, and FormView controls.</span></span> <span data-ttu-id="24b63-109">Ces contrôles fonctionnent avec les données fournies pour les.</span><span class="sxs-lookup"><span data-stu-id="24b63-109">These controls simply work with data supplied to them.</span></span> <span data-ttu-id="24b63-110">En général, ces contrôles accéder aux données via l’utilisation d’un contrôle de source de données, tels que ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="24b63-110">Commonly, these controls access data through the use of a data source control, such as the ObjectDataSource.</span></span> <span data-ttu-id="24b63-111">Nous avons vu comment ObjectDataSource agit comme un proxy entre la page ASP.NET et les données sous-jacentes.</span><span class="sxs-lookup"><span data-stu-id="24b63-111">We've seen how the ObjectDataSource acts as a proxy between the ASP.NET page and the underlying data.</span></span> <span data-ttu-id="24b63-112">Quand un GridView doit afficher des données, il appelle son ObjectDataSource `Select()` (méthode), qui à son tour appelle une méthode à partir de notre couche BLL (Business Logic), qui appelle une méthode dans appropriée l’accès de la couche données (DAL) TableAdapter, qui à son tour envoie un `SELECT` requête à la base de données Northwind.</span><span class="sxs-lookup"><span data-stu-id="24b63-112">When a GridView needs to display data, it invokes its ObjectDataSource's `Select()` method, which in turn invokes a method from our Business Logic Layer (BLL), which calls a method in the appropriate Data Access Layer's (DAL) TableAdapter, which in turn sends a `SELECT` query to the Northwind database.</span></span>

<span data-ttu-id="24b63-113">N’oubliez pas que, lorsque nous avons créé les TableAdapters dans la couche DAL dans [notre premier didacticiel](../introduction/creating-a-data-access-layer-cs.md), Visual Studio ajouté automatiquement les méthodes d’insertion, la mise à jour, et suppression de données sous-jacent de base de données de la table.</span><span class="sxs-lookup"><span data-stu-id="24b63-113">Recall that when we created the TableAdapters in the DAL in [our first tutorial](../introduction/creating-a-data-access-layer-cs.md), Visual Studio automatically added methods for inserting, updating, and deleting data from the underlying database table.</span></span> <span data-ttu-id="24b63-114">En outre, dans [création d’une couche de logique métier](../introduction/creating-a-business-logic-layer-cs.md) nous avons conçu des méthodes dans la couche BLL ayant appelé dans ces méthodes de modification de la couche DAL de données.</span><span class="sxs-lookup"><span data-stu-id="24b63-114">Moreover, in [Creating a Business Logic Layer](../introduction/creating-a-business-logic-layer-cs.md) we designed methods in the BLL that called down into these data modification DAL methods.</span></span>

<span data-ttu-id="24b63-115">Outre ses `Select()` méthode, ObjectDataSource a `Insert()`, `Update()`, et `Delete()` méthodes.</span><span class="sxs-lookup"><span data-stu-id="24b63-115">In addition to its `Select()` method, the ObjectDataSource also has `Insert()`, `Update()`, and `Delete()` methods.</span></span> <span data-ttu-id="24b63-116">Comme le `Select()` (méthode), ces trois méthodes peuvent être mappées aux méthodes dans un objet sous-jacent.</span><span class="sxs-lookup"><span data-stu-id="24b63-116">Like the `Select()` method, these three methods can be mapped to methods in an underlying object.</span></span> <span data-ttu-id="24b63-117">Quand est configuré pour insérer, mettre à jour ou supprimer des données, les contrôles GridView, DetailsView et FormView fournissent une interface utilisateur de modification des données sous-jacentes.</span><span class="sxs-lookup"><span data-stu-id="24b63-117">When configured to insert, update, or delete data, the GridView, DetailsView, and FormView controls provide a user interface for modifying the underlying data.</span></span> <span data-ttu-id="24b63-118">Cette interface utilisateur appelle le `Insert()`, `Update()`, et `Delete()` méthodes de l’ObjectDataSource, puis appellent l’objet sous-jacent associé à des méthodes (voir Figure 1).</span><span class="sxs-lookup"><span data-stu-id="24b63-118">This user interface calls the `Insert()`, `Update()`, and `Delete()` methods of the ObjectDataSource, which then invoke the underlying object's associated methods (see Figure 1).</span></span>


<span data-ttu-id="24b63-119">[![L’ObjectDataSource Insert(), Update() et les méthodes Delete() servent d’un Proxy dans la couche BLL](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image2.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="24b63-119">[![The ObjectDataSource's Insert(), Update(), and Delete() Methods Serve as a Proxy into the BLL](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image2.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image1.png)</span></span>

<span data-ttu-id="24b63-120">**Figure 1**: L’ObjectDataSource `Insert()`, `Update()`, et `Delete()` méthodes servir en tant que Proxy dans la couche BLL ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="24b63-120">**Figure 1**: The ObjectDataSource's `Insert()`, `Update()`, and `Delete()` Methods Serve as a Proxy into the BLL ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image3.png))</span></span>


<span data-ttu-id="24b63-121">Dans ce didacticiel, nous allons voir comment mapper l’ObjectDataSource `Insert()`, `Update()`, et `Delete()` méthodes aux méthodes des classes dans la couche BLL, ainsi que comment configurer les contrôles GridView, DetailsView et FormView afin de fournir la modification des données fonctionnalités.</span><span class="sxs-lookup"><span data-stu-id="24b63-121">In this tutorial we'll see how to map the ObjectDataSource's `Insert()`, `Update()`, and `Delete()` methods to methods of classes in the BLL, as well as how to configure the GridView, DetailsView, and FormView controls to provide data modification capabilities.</span></span>

## <a name="step-1-creating-the-insert-update-and-delete-tutorials-web-pages"></a><span data-ttu-id="24b63-122">Étape 1 : Création de l’insertion, mise à jour et supprimer des Pages Web didacticiels</span><span class="sxs-lookup"><span data-stu-id="24b63-122">Step 1: Creating the Insert, Update, and Delete Tutorials Web Pages</span></span>

<span data-ttu-id="24b63-123">Avant de commencer expliquant comment insérer, mettre à jour et supprimer des données, prenons tout d’abord un moment pour créer les pages ASP.NET dans notre projet de site Web que nous avons besoin pour ce didacticiel et celles plusieurs suivants.</span><span class="sxs-lookup"><span data-stu-id="24b63-123">Before we start exploring how to insert, update, and delete data, let's first take a moment to create the ASP.NET pages in our website project that we'll need for this tutorial and the next several ones.</span></span> <span data-ttu-id="24b63-124">Commencez par ajouter un nouveau dossier nommé `EditInsertDelete`.</span><span class="sxs-lookup"><span data-stu-id="24b63-124">Start by adding a new folder named `EditInsertDelete`.</span></span> <span data-ttu-id="24b63-125">Ensuite, ajoutez les pages ASP.NET suivantes à ce dossier, en veillant à associer chaque page avec le `Site.master` page maître :</span><span class="sxs-lookup"><span data-stu-id="24b63-125">Next, add the following ASP.NET pages to that folder, making sure to associate each page with the `Site.master` master page:</span></span>

- `Default.aspx`
- `Basics.aspx`
- `DataModificationEvents.aspx`
- `ErrorHandling.aspx`
- `UIValidation.aspx`
- `CustomizedUI.aspx`
- `OptimisticConcurrency.aspx`
- `ConfirmationOnDelete.aspx`
- `UserLevelAccess.aspx`


![Ajouter les Pages ASP.NET pour les didacticiels liés à la Modification de données](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image4.png)

<span data-ttu-id="24b63-127">**Figure 2**: Ajouter les Pages ASP.NET pour les didacticiels liés à la Modification de données</span><span class="sxs-lookup"><span data-stu-id="24b63-127">**Figure 2**: Add the ASP.NET Pages for the Data Modification-Related Tutorials</span></span>


<span data-ttu-id="24b63-128">Comme dans les autres dossiers, `Default.aspx` dans le `EditInsertDelete` dossier répertorie les didacticiels dans sa section.</span><span class="sxs-lookup"><span data-stu-id="24b63-128">Like in the other folders, `Default.aspx` in the `EditInsertDelete` folder will list the tutorials in its section.</span></span> <span data-ttu-id="24b63-129">N’oubliez pas que le `SectionLevelTutorialListing.ascx` contrôle utilisateur fournit cette fonctionnalité.</span><span class="sxs-lookup"><span data-stu-id="24b63-129">Recall that the `SectionLevelTutorialListing.ascx` User Control provides this functionality.</span></span> <span data-ttu-id="24b63-130">Par conséquent, ajoutez ce contrôle utilisateur à `Default.aspx` en le faisant glisser à partir de l’Explorateur de solutions sur le mode de création de la page.</span><span class="sxs-lookup"><span data-stu-id="24b63-130">Therefore, add this User Control to `Default.aspx` by dragging it from the Solution Explorer onto the page's Design view.</span></span>


<span data-ttu-id="24b63-131">[![Ajouter le contrôle utilisateur de SectionLevelTutorialListing.ascx à Default.aspx](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image6.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="24b63-131">[![Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image6.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image5.png)</span></span>

<span data-ttu-id="24b63-132">**Figure 3**: Ajouter le `SectionLevelTutorialListing.ascx` contrôle utilisateur à `Default.aspx` ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="24b63-132">**Figure 3**: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image7.png))</span></span>


<span data-ttu-id="24b63-133">Enfin, ajoutez les pages en tant qu’entrées pour le `Web.sitemap` fichier.</span><span class="sxs-lookup"><span data-stu-id="24b63-133">Lastly, add the pages as entries to the `Web.sitemap` file.</span></span> <span data-ttu-id="24b63-134">Plus précisément, ajoutez le balisage suivant après la mise en forme personnalisée `<siteMapNode>`:</span><span class="sxs-lookup"><span data-stu-id="24b63-134">Specifically, add the following markup after the Customized Formatting `<siteMapNode>`:</span></span>


[!code-xml[Main](an-overview-of-inserting-updating-and-deleting-data-cs/samples/sample1.xml)]

<span data-ttu-id="24b63-135">Après la mise à jour `Web.sitemap`, prenez un moment pour afficher le site Web de didacticiels via un navigateur.</span><span class="sxs-lookup"><span data-stu-id="24b63-135">After updating `Web.sitemap`, take a moment to view the tutorials website through a browser.</span></span> <span data-ttu-id="24b63-136">Le menu de gauche inclut désormais les éléments de la modification, insertion et suppression des didacticiels.</span><span class="sxs-lookup"><span data-stu-id="24b63-136">The menu on the left now includes items for the editing, inserting, and deleting tutorials.</span></span>


![Le plan de Site inclut maintenant des entrées pour la modification, insertion et suppression des didacticiels](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image8.png)

<span data-ttu-id="24b63-138">**Figure 4**: Le plan de Site inclut maintenant des entrées pour la modification, insertion et suppression des didacticiels</span><span class="sxs-lookup"><span data-stu-id="24b63-138">**Figure 4**: The Site Map Now Includes Entries for the Editing, Inserting, and Deleting Tutorials</span></span>


## <a name="step-2-adding-and-configuring-the-objectdatasource-control"></a><span data-ttu-id="24b63-139">Étape 2 : Ajout et configuration du contrôle ObjectDataSource</span><span class="sxs-lookup"><span data-stu-id="24b63-139">Step 2: Adding and Configuring the ObjectDataSource Control</span></span>

<span data-ttu-id="24b63-140">Depuis le GridView, DetailsView et FormView chacun diffèrent par leurs fonctionnalités de modification de données et la disposition, nous allons examiner chacun d’eux individuellement.</span><span class="sxs-lookup"><span data-stu-id="24b63-140">Since the GridView, DetailsView, and FormView each differ in their data modification capabilities and layout, let's examine each one individually.</span></span> <span data-ttu-id="24b63-141">Au lieu que chaque contrôle à l’aide de son propre ObjectDataSource, toutefois, nous allons simplement créer une ObjectDataSource unique tous les exemples de contrôle trois peuvent partager.</span><span class="sxs-lookup"><span data-stu-id="24b63-141">Rather than have each control using its own ObjectDataSource, however, let's just create a single ObjectDataSource that all three control examples can share.</span></span>

<span data-ttu-id="24b63-142">Ouvrez le `Basics.aspx` page, faites glisser un ObjectDataSource à partir de la boîte à outils vers le concepteur et cliquez sur le lien configurer la Source de données à partir de sa balise active.</span><span class="sxs-lookup"><span data-stu-id="24b63-142">Open the `Basics.aspx` page, drag an ObjectDataSource from the Toolbox onto the Designer, and click the Configure Data Source link from its smart tag.</span></span> <span data-ttu-id="24b63-143">Dans la mesure où le `ProductsBLL` est la seule classe de couche de logique métier qui fournit la modification, d’insertion et de suppression des méthodes, configurent ObjectDataSource pour utiliser cette classe.</span><span class="sxs-lookup"><span data-stu-id="24b63-143">Since the `ProductsBLL` is the only BLL class that provides editing, inserting, and deleting methods, configure the ObjectDataSource to use this class.</span></span>


<span data-ttu-id="24b63-144">[![Configurer pour utiliser la classe ProductsBLL ObjectDataSource](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image10.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="24b63-144">[![Configure the ObjectDataSource to Use the ProductsBLL Class](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image10.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image9.png)</span></span>

<span data-ttu-id="24b63-145">**Figure 5**: Configurer l’ObjectDataSource à utiliser le `ProductsBLL` classe ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="24b63-145">**Figure 5**: Configure the ObjectDataSource to Use the `ProductsBLL` Class ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image11.png))</span></span>


<span data-ttu-id="24b63-146">Dans l’écran suivant, nous pouvons spécifier quelles méthodes de la `ProductsBLL` classe sont mappés à l’ObjectDataSource `Select()`, `Insert()`, `Update()`, et `Delete()` en sélectionnant l’onglet approprié, la méthode dans la liste déroulante.</span><span class="sxs-lookup"><span data-stu-id="24b63-146">In the next screen we can specify what methods of the `ProductsBLL` class are mapped to the ObjectDataSource's `Select()`, `Insert()`, `Update()`, and `Delete()` by selecting the appropriate tab and choosing the method from the drop-down list.</span></span> <span data-ttu-id="24b63-147">Figure 6, qui doit paraître familière à ce stade, mappe l’ObjectDataSource `Select()` méthode à la `ProductsBLL` la classe `GetProducts()` (méthode).</span><span class="sxs-lookup"><span data-stu-id="24b63-147">Figure 6, which should look familiar by now, maps the ObjectDataSource's `Select()` method to the `ProductsBLL` class's `GetProducts()` method.</span></span> <span data-ttu-id="24b63-148">Le `Insert()`, `Update()`, et `Delete()` méthodes peuvent être configurées en sélectionnant l’onglet approprié dans la liste située dans la partie supérieure.</span><span class="sxs-lookup"><span data-stu-id="24b63-148">The `Insert()`, `Update()`, and `Delete()` methods can be configured by selecting the appropriate tab from the list along the top.</span></span>


<span data-ttu-id="24b63-149">[![Avez ObjectDataSource retourner tous les produits](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image13.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="24b63-149">[![Have the ObjectDataSource Return All of the Products](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image13.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image12.png)</span></span>

<span data-ttu-id="24b63-150">**Figure 6**: Ont l’ObjectDataSource retourner tous les produits ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="24b63-150">**Figure 6**: Have the ObjectDataSource Return All of the Products ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image14.png))</span></span>


<span data-ttu-id="24b63-151">Onglets de figures 7, 8 et 9 montrent l’ObjectDataSource UPDATE, INSERT et DELETE.</span><span class="sxs-lookup"><span data-stu-id="24b63-151">Figures 7, 8, and 9 show the ObjectDataSource's UPDATE, INSERT, and DELETE tabs.</span></span> <span data-ttu-id="24b63-152">Configurer ces onglets afin que le `Insert()`, `Update()`, et `Delete()` méthodes appellent le `ProductsBLL` la classe `UpdateProduct`, `AddProduct`, et `DeleteProduct` méthodes, respectivement.</span><span class="sxs-lookup"><span data-stu-id="24b63-152">Configure these tabs so that the `Insert()`, `Update()`, and `Delete()` methods invoke the `ProductsBLL` class's `UpdateProduct`, `AddProduct`, and `DeleteProduct` methods, respectively.</span></span>


<span data-ttu-id="24b63-153">[![Mapper Update() méthode l’ObjectDataSource à méthode UpdateProduct de la classe ProductBLL](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image16.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="24b63-153">[![Map the ObjectDataSource's Update() Method to the ProductBLL Class's UpdateProduct Method](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image16.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image15.png)</span></span>

<span data-ttu-id="24b63-154">**Figure 7**: Mapper l’ObjectDataSource `Update()` méthode à la `ProductBLL` la classe `UpdateProduct` (méthode) ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="24b63-154">**Figure 7**: Map the ObjectDataSource's `Update()` Method to the `ProductBLL` Class's `UpdateProduct` Method ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image17.png))</span></span>


<span data-ttu-id="24b63-155">[![Mapper Insert() méthode l’ObjectDataSource à méthode de AddProduct de la classe ProductBLL](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image19.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="24b63-155">[![Map the ObjectDataSource's Insert() Method to the ProductBLL Class's AddProduct Method](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image19.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image18.png)</span></span>

<span data-ttu-id="24b63-156">**Figure 8**: Mapper l’ObjectDataSource `Insert()` méthode à la `ProductBLL` ajouter de la classe `Product` (méthode) ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="24b63-156">**Figure 8**: Map the ObjectDataSource's `Insert()` Method to the `ProductBLL` Class's Add `Product` Method ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image20.png))</span></span>


<span data-ttu-id="24b63-157">[![Mapper Delete() méthode l’ObjectDataSource à DeleteProduct (méthode de la classe ProductBLL)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image22.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="24b63-157">[![Map the ObjectDataSource's Delete() Method to the ProductBLL Class's DeleteProduct Method](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image22.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image21.png)</span></span>

<span data-ttu-id="24b63-158">**Figure 9**: Mapper l’ObjectDataSource `Delete()` méthode à la `ProductBLL` la classe `DeleteProduct` (méthode) ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image23.png))</span><span class="sxs-lookup"><span data-stu-id="24b63-158">**Figure 9**: Map the ObjectDataSource's `Delete()` Method to the `ProductBLL` Class's `DeleteProduct` Method ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image23.png))</span></span>


<span data-ttu-id="24b63-159">Vous avez peut-être remarqué que les listes déroulantes dans les onglets UPDATE, INSERT et DELETE avaient déjà ces méthodes sélectionnées.</span><span class="sxs-lookup"><span data-stu-id="24b63-159">You may have noticed that the drop-down lists in the UPDATE, INSERT, and DELETE tabs already had these methods selected.</span></span> <span data-ttu-id="24b63-160">C’est grâce à notre utilisation de la `DataObjectMethodAttribute` qui décore les méthodes de `ProductsBLL`.</span><span class="sxs-lookup"><span data-stu-id="24b63-160">This is thanks to our use of the `DataObjectMethodAttribute` that decorates the methods of `ProductsBLL`.</span></span> <span data-ttu-id="24b63-161">Par exemple, la méthode DeleteProduct a la signature suivante :</span><span class="sxs-lookup"><span data-stu-id="24b63-161">For example, the DeleteProduct method has the following signature:</span></span>


[!code-csharp[Main](an-overview-of-inserting-updating-and-deleting-data-cs/samples/sample2.cs)]

<span data-ttu-id="24b63-162">Le `DataObjectMethodAttribute` attribut indique l’objectif de chaque méthode qu’il s’agisse de sélection, insertion, mise à jour, ou la suppression et si elle est la valeur par défaut.</span><span class="sxs-lookup"><span data-stu-id="24b63-162">The `DataObjectMethodAttribute` attribute indicates the purpose of each method whether it is for selecting, inserting, updating, or deleting and whether or not it's the default value.</span></span> <span data-ttu-id="24b63-163">Si vous omettez ces attributs lors de la création de vos classes de la couche BLL, vous aurez besoin afin de sélectionner manuellement les méthodes à partir de la mise à jour, insérer et supprimer des onglets.</span><span class="sxs-lookup"><span data-stu-id="24b63-163">If you omitted these attributes when creating your BLL classes, you'll need to manually select the methods from the UPDATE, INSERT, and DELETE tabs.</span></span>

<span data-ttu-id="24b63-164">Après avoir vérifié que le texte approprié `ProductsBLL` méthodes sont mappés à l’ObjectDataSource `Insert()`, `Update()`, et `Delete()` méthodes, cliquez sur Terminer pour terminer l’Assistant.</span><span class="sxs-lookup"><span data-stu-id="24b63-164">After ensuring that the appropriate `ProductsBLL` methods are mapped to the ObjectDataSource's `Insert()`, `Update()`, and `Delete()` methods, click Finish to complete the wizard.</span></span>

## <a name="examining-the-objectdatasources-markup"></a><span data-ttu-id="24b63-165">Examiner le balisage de l’ObjectDataSource</span><span class="sxs-lookup"><span data-stu-id="24b63-165">Examining the ObjectDataSource's Markup</span></span>

<span data-ttu-id="24b63-166">Après avoir configuré l’ObjectDataSource via son Assistant, passez à la vue de Source à examiner le balisage déclaratif généré.</span><span class="sxs-lookup"><span data-stu-id="24b63-166">After configuring the ObjectDataSource through its wizard, go to the Source view to examine the generated declarative markup.</span></span> <span data-ttu-id="24b63-167">Le `<asp:ObjectDataSource>` balise spécifie l’objet sous-jacent et les méthodes à appeler.</span><span class="sxs-lookup"><span data-stu-id="24b63-167">The `<asp:ObjectDataSource>` tag specifies the underlying object and the methods to invoke.</span></span> <span data-ttu-id="24b63-168">En outre, il existe `DeleteParameters`, `UpdateParameters`, et `InsertParameters` qui correspondent aux paramètres d’entrée pour le `ProductsBLL` la classe `AddProduct`, `UpdateProduct`, et `DeleteProduct` méthodes :</span><span class="sxs-lookup"><span data-stu-id="24b63-168">Additionally, there are `DeleteParameters`, `UpdateParameters`, and `InsertParameters` that map to the input parameters for the `ProductsBLL` class's `AddProduct`, `UpdateProduct`, and `DeleteProduct` methods:</span></span>


[!code-aspx[Main](an-overview-of-inserting-updating-and-deleting-data-cs/samples/sample3.aspx)]

<span data-ttu-id="24b63-169">ObjectDataSource inclut un paramètre pour chacun des paramètres d’entrée pour ses méthodes associées, comme une liste de `SelectParameter` s est présent quand ObjectDataSource est configuré pour appeler une méthode de sélection qui attend un paramètre d’entrée (par exemple `GetProductsByCategoryID(categoryID)`).</span><span class="sxs-lookup"><span data-stu-id="24b63-169">The ObjectDataSource includes a parameter for each of the input parameters for its associated methods, just like a list of `SelectParameter` s is present when the ObjectDataSource is configured to call a select method that expects an input parameter (such as `GetProductsByCategoryID(categoryID)`).</span></span> <span data-ttu-id="24b63-170">Nous verrons bientôt, les valeurs pour ces `DeleteParameters`, `UpdateParameters`, et `InsertParameters` sont définies automatiquement par le GridView, DetailsView et FormView avant d’appeler l’ObjectDataSource `Insert()`, `Update()`, ou `Delete()` méthode.</span><span class="sxs-lookup"><span data-stu-id="24b63-170">As we'll see shortly, values for these `DeleteParameters`, `UpdateParameters`, and `InsertParameters` are set automatically by the GridView, DetailsView, and FormView prior to invoking the ObjectDataSource's `Insert()`, `Update()`, or `Delete()` method.</span></span> <span data-ttu-id="24b63-171">Ces valeurs peuvent également être définies par programme en fonction des besoins, comme nous le verrons dans un futur didacticiel.</span><span class="sxs-lookup"><span data-stu-id="24b63-171">These values can also be set programmatically as needed, as we'll discuss in a future tutorial.</span></span>

<span data-ttu-id="24b63-172">Un effet secondaire de l’utilisation de l’Assistant pour configurer à ObjectDataSource est que Visual Studio définit le [propriété OldValuesParameterFormatString](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.oldvaluesparameterformatstring(VS.80).aspx) à `original_{0}`.</span><span class="sxs-lookup"><span data-stu-id="24b63-172">One side effect of using the wizard to configure to ObjectDataSource is that Visual Studio sets the [OldValuesParameterFormatString property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.oldvaluesparameterformatstring(VS.80).aspx) to `original_{0}`.</span></span> <span data-ttu-id="24b63-173">Cette valeur de propriété est utilisée pour inclure les valeurs d’origine des données en cours de modification et est utile dans deux scénarios :</span><span class="sxs-lookup"><span data-stu-id="24b63-173">This property value is used to include the original values of the data being edited and is useful in two scenarios:</span></span>

- <span data-ttu-id="24b63-174">Si, lorsque vous modifiez un enregistrement, les utilisateurs sont en mesure de modifier la valeur de clé primaire.</span><span class="sxs-lookup"><span data-stu-id="24b63-174">If, when editing a record, users are able to change the primary key value.</span></span> <span data-ttu-id="24b63-175">Dans ce cas, la nouvelle valeur de clé primaire et la valeur de clé primaire d’origine doivent être fournis afin que l’enregistrement avec la valeur de clé primaire d’origine puisse être trouvée et dispose de sa valeur mis à jour en conséquence.</span><span class="sxs-lookup"><span data-stu-id="24b63-175">In this case, both the new primary key value and the original primary key value must be provided so that the record with the original primary key value can be found and have its value updated accordingly.</span></span>
- <span data-ttu-id="24b63-176">Lorsque vous utilisez l’accès concurrentiel optimiste.</span><span class="sxs-lookup"><span data-stu-id="24b63-176">When using optimistic concurrency.</span></span> <span data-ttu-id="24b63-177">Optimiste d’accès concurrentiel est une technique pour vous assurer que deux utilisateurs simultanés ne pas écraser les modifications par un autre et la rubrique pour un futur didacticiel.</span><span class="sxs-lookup"><span data-stu-id="24b63-177">Optimistic concurrency is a technique to ensure that two simultaneous users don't overwrite one another's changes, and is the topic for a future tutorial.</span></span>

<span data-ttu-id="24b63-178">Le `OldValuesParameterFormatString` propriété indique le nom des paramètres d’entrée dans la mise à jour de l’objet sous-jacent et les méthodes de suppression pour les valeurs d’origine.</span><span class="sxs-lookup"><span data-stu-id="24b63-178">The `OldValuesParameterFormatString` property indicates the name of the input parameters in the underlying object's update and delete methods for the original values.</span></span> <span data-ttu-id="24b63-179">Nous allons aborder cette propriété et son usage en détail lorsque nous explorons l’accès concurrentiel optimiste.</span><span class="sxs-lookup"><span data-stu-id="24b63-179">We'll discuss this property and its purpose in greater detail when we explore optimistic concurrency.</span></span> <span data-ttu-id="24b63-180">J’ai copiez-la à présent, toutefois, étant donné que les méthodes de notre BLL n’attendent pas les valeurs d’origine et par conséquent, il est important que nous supprimons cette propriété.</span><span class="sxs-lookup"><span data-stu-id="24b63-180">I bring it up now, however, because our BLL's methods do not expect the original values and therefore it's important that we remove this property.</span></span> <span data-ttu-id="24b63-181">En laissant le `OldValuesParameterFormatString` propriété une valeur autre que la valeur par défaut (`{0}`) provoque une erreur lorsqu’un contrôle Web de données tente d’appeler l’ObjectDataSource `Update()` ou `Delete()` méthodes car ObjectDataSource Essayez de passer à la fois dans le `UpdateParameters` ou `DeleteParameters` spécifié, ainsi que les paramètres de valeur d’origine.</span><span class="sxs-lookup"><span data-stu-id="24b63-181">Leaving the `OldValuesParameterFormatString` property set to anything other than the default (`{0}`) will cause an error when a data Web control attempts to invoke the ObjectDataSource's `Update()` or `Delete()` methods because the ObjectDataSource will attempt to pass in both the `UpdateParameters` or `DeleteParameters` specified as well as original value parameters.</span></span>

<span data-ttu-id="24b63-182">Si ce n’est pas très clair à partir de là, ne vous inquiétez pas, nous allons examiner cette propriété et son utilité dans un futur didacticiel.</span><span class="sxs-lookup"><span data-stu-id="24b63-182">If this isn't terribly clear at this juncture, don't worry, we'll examine this property and its utility in a future tutorial.</span></span> <span data-ttu-id="24b63-183">Pour l’instant, soyez certain supprimez cette déclaration de propriété entièrement à partir de la syntaxe déclarative ou définissez la valeur sur la valeur par défaut ({0}).</span><span class="sxs-lookup"><span data-stu-id="24b63-183">For now, just be certain to either remove this property declaration entirely from the declarative syntax or set the value to the default value ({0}).</span></span>

> [!NOTE]
> <span data-ttu-id="24b63-184">Si vous désactivez simplement le `OldValuesParameterFormatString` valeur de propriété à partir de la fenêtre Propriétés en mode Design, la propriété existe toujours dans la syntaxe déclarative, mais être définie sur une chaîne vide.</span><span class="sxs-lookup"><span data-stu-id="24b63-184">If you simply clear out the `OldValuesParameterFormatString` property value from the Properties window in the Design view, the property will still exist in the declarative syntax, but be set to an empty string.</span></span> <span data-ttu-id="24b63-185">Ceci, malheureusement, toujours entraîne le problème évoqué ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="24b63-185">This, unfortunately, will still result in the same problem discussed above.</span></span> <span data-ttu-id="24b63-186">Par conséquent, supprimez la propriété complètement à partir de la syntaxe déclarative ou, à partir de la fenêtre Propriétés, définissez la valeur sur la valeur par défaut, `{0}`.</span><span class="sxs-lookup"><span data-stu-id="24b63-186">Therefore, either remove the property altogether from the declarative syntax or, from the Properties window, set the value to the default, `{0}`.</span></span>


## <a name="step-3-adding-a-data-web-control-and-configuring-it-for-data-modification"></a><span data-ttu-id="24b63-187">Étape 3 : Ajout d’un contrôle Web de données et sa configuration pour la Modification de données</span><span class="sxs-lookup"><span data-stu-id="24b63-187">Step 3: Adding a Data Web Control and Configuring It for Data Modification</span></span>

<span data-ttu-id="24b63-188">Une fois que ObjectDataSource a été ajouté à la page et configuré, nous sommes prêts à ajouter des données des contrôles Web à la page pour afficher les données et de fournir un moyen pour l’utilisateur final pour le modifier.</span><span class="sxs-lookup"><span data-stu-id="24b63-188">Once the ObjectDataSource has been added to the page and configured, we're ready to add data Web controls to the page to both display the data and provide a means for the end user to modify it.</span></span> <span data-ttu-id="24b63-189">Nous allons examiner le GridView, DetailsView et FormView séparément, comme ces contrôles Web de données diffèrent par leurs fonctionnalités de modification de données et la configuration.</span><span class="sxs-lookup"><span data-stu-id="24b63-189">We'll look at the GridView, DetailsView, and FormView separately, as these data Web controls differ in their data modification capabilities and configuration.</span></span>

<span data-ttu-id="24b63-190">Comme nous allons voir dans le reste de cet article, ajout d’une modification très basique, insertion et suppression de prise en charge via le contrôle GridView, DetailsView, et le contrôle FormView est vraiment aussi simple que de vérifier quelques cases à cocher.</span><span class="sxs-lookup"><span data-stu-id="24b63-190">As we'll see in the remainder of this article, adding very basic editing, inserting, and deleting support through the GridView, DetailsView, and FormView controls is really as simple as checking a couple of checkboxes.</span></span> <span data-ttu-id="24b63-191">Il existe de nombreuses subtilités et des cases de bord dans le monde réel qui rendent fournissant ces fonctionnalités plus complexe que simplement pointez et cliquez sur.</span><span class="sxs-lookup"><span data-stu-id="24b63-191">There are many subtleties and edge cases in the real-world that make providing such functionality more involved than just point and click.</span></span> <span data-ttu-id="24b63-192">Ce didacticiel, toutefois, est consacré exclusivement prouvant les fonctionnalités de modification de données simple.</span><span class="sxs-lookup"><span data-stu-id="24b63-192">This tutorial, however, focuses solely on proving simplistic data modification capabilities.</span></span> <span data-ttu-id="24b63-193">Didacticiels futures examine les problèmes qui seront manifesteront dans un paramètre du monde réel.</span><span class="sxs-lookup"><span data-stu-id="24b63-193">Future tutorials will examine concerns that will undoubtedly arise in a real-world setting.</span></span>

## <a name="deleting-data-from-the-gridview"></a><span data-ttu-id="24b63-194">Suppression de données dans le contrôle GridView</span><span class="sxs-lookup"><span data-stu-id="24b63-194">Deleting Data from the GridView</span></span>

<span data-ttu-id="24b63-195">Nous allons faire glisser un GridView à partir de la boîte à outils vers le concepteur.</span><span class="sxs-lookup"><span data-stu-id="24b63-195">Start by dragging a GridView from the Toolbox onto the Designer.</span></span> <span data-ttu-id="24b63-196">Ensuite, liez ObjectDataSource au GridView en le sélectionnant dans la liste déroulante dans la balise active le contrôle GridView.</span><span class="sxs-lookup"><span data-stu-id="24b63-196">Next, bind the ObjectDataSource to the GridView by selecting it from the drop-down list in the GridView's smart tag.</span></span> <span data-ttu-id="24b63-197">À ce stade balisage déclaratif de GridView sera :</span><span class="sxs-lookup"><span data-stu-id="24b63-197">At this point the GridView's declarative markup will be:</span></span>


[!code-aspx[Main](an-overview-of-inserting-updating-and-deleting-data-cs/samples/sample4.aspx)]

<span data-ttu-id="24b63-198">Lier le contrôle GridView à ObjectDataSource via sa balise active présente deux avantages :</span><span class="sxs-lookup"><span data-stu-id="24b63-198">Binding the GridView to the ObjectDataSource through its smart tag has two benefits:</span></span>

- <span data-ttu-id="24b63-199">BoundFields et CheckBoxFields sont automatiquement créés pour chacun des champs retournés par l’ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="24b63-199">BoundFields and CheckBoxFields are automatically created for each of the fields returned by the ObjectDataSource.</span></span> <span data-ttu-id="24b63-200">En outre, les propriétés de la BoundField et du CheckBoxField sont définies en fonction sur les métadonnées du champ sous-jacent.</span><span class="sxs-lookup"><span data-stu-id="24b63-200">Moreover, the BoundField and CheckBoxField's properties are set based on the underlying field's metadata.</span></span> <span data-ttu-id="24b63-201">Par exemple, le `ProductID`, `CategoryName`, et `SupplierName` champs sont marqués comme étant en lecture seule dans le `ProductsDataTable` et par conséquent ne doit pas être mis à jour lors de la modification.</span><span class="sxs-lookup"><span data-stu-id="24b63-201">For example, the `ProductID`, `CategoryName`, and `SupplierName` fields are marked as read-only in the `ProductsDataTable` and therefore shouldn't be updatable when editing.</span></span> <span data-ttu-id="24b63-202">Pour prendre en compte cette, ces BoundFields [propriétés en lecture seule](https://msdn.microsoft.com/library/system.web.ui.webcontrols.boundfield.readonly(VS.80).aspx) sont définies sur `true`.</span><span class="sxs-lookup"><span data-stu-id="24b63-202">To accommodate this, these BoundFields' [ReadOnly properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.boundfield.readonly(VS.80).aspx) are set to `true`.</span></span>
- <span data-ttu-id="24b63-203">Le [propriété DataKeyNames](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.datakeynames(VS.80).aspx) est affectée aux ou les champs clés primaires de l’objet sous-jacent.</span><span class="sxs-lookup"><span data-stu-id="24b63-203">The [DataKeyNames property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.datakeynames(VS.80).aspx) is assigned to the primary key field(s) of the underlying object.</span></span> <span data-ttu-id="24b63-204">Ceci est essentiel quand à l’aide de la GridView pour modifier ou supprimer des données, comme cette propriété indique le champ (ou un ensemble de champs) unique qui identifie chaque enregistrement.</span><span class="sxs-lookup"><span data-stu-id="24b63-204">This is essential when using the GridView for editing or deleting data, as this property indicates the field (or set of fields) that unique identifies each record.</span></span> <span data-ttu-id="24b63-205">Pour plus d’informations sur la `DataKeyNames` propriété, vous référer à la [maître/détail utilisant un GridView maître avec un DetailView détail](../masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs.md) didacticiel.</span><span class="sxs-lookup"><span data-stu-id="24b63-205">For more information on the `DataKeyNames` property, refer back to the [Master/Detail Using a Selectable Master GridView with a Details DetailView](../masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs.md) tutorial.</span></span>

<span data-ttu-id="24b63-206">Tandis que le contrôle GridView peut être lié à ObjectDataSource via la fenêtre Propriétés ou de la syntaxe déclarative, cela vous oblige à ajouter manuellement le BoundField approprié et `DataKeyNames` balisage.</span><span class="sxs-lookup"><span data-stu-id="24b63-206">While the GridView can be bound to the ObjectDataSource through the Properties window or declarative syntax, doing so requires you to manually add the appropriate BoundField and `DataKeyNames` markup.</span></span>

<span data-ttu-id="24b63-207">Le contrôle GridView fournit la prise en charge intégrée pour la modification au niveau des lignes et la suppression.</span><span class="sxs-lookup"><span data-stu-id="24b63-207">The GridView control provides built-in support for row-level editing and deleting.</span></span> <span data-ttu-id="24b63-208">Configuration d’un GridView pour prendre en charge la suppression ajoute une colonne de boutons de suppression.</span><span class="sxs-lookup"><span data-stu-id="24b63-208">Configuring a GridView to support deleting adds a column of Delete buttons.</span></span> <span data-ttu-id="24b63-209">Lorsque l’utilisateur final clique sur le bouton Supprimer pour une ligne particulière, s’ensuit une publication (postback) et le contrôle GridView effectue les étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="24b63-209">When the end user clicks the Delete button for a particular row, a postback ensues and the GridView performs the following steps:</span></span>

1. <span data-ttu-id="24b63-210">L’ObjectDataSource `DeleteParameters` ou les valeurs sont affectées.</span><span class="sxs-lookup"><span data-stu-id="24b63-210">The ObjectDataSource's `DeleteParameters` value(s) are assigned</span></span>
2. <span data-ttu-id="24b63-211">L’ObjectDataSource `Delete()` méthode est appelée, la suppression de l’enregistrement spécifié</span><span class="sxs-lookup"><span data-stu-id="24b63-211">The ObjectDataSource's `Delete()` method is invoked, deleting the specified record</span></span>
3. <span data-ttu-id="24b63-212">Le contrôle GridView se lie au ObjectDataSource en appelant son `Select()` (méthode)</span><span class="sxs-lookup"><span data-stu-id="24b63-212">The GridView rebinds itself to the ObjectDataSource by invoking its `Select()` method</span></span>

<span data-ttu-id="24b63-213">Les valeurs affectées à la `DeleteParameters` sont les valeurs de la `DataKeyNames` ou les champs de la ligne dont bouton Supprimer l’utilisateur a cliqué.</span><span class="sxs-lookup"><span data-stu-id="24b63-213">The values assigned to the `DeleteParameters` are the values of the `DataKeyNames` field(s) for the row whose Delete button was clicked.</span></span> <span data-ttu-id="24b63-214">Par conséquent, il est essentiel que d’un GridView `DataKeyNames` propriété être définie correctement.</span><span class="sxs-lookup"><span data-stu-id="24b63-214">Therefore it's vital that a GridView's `DataKeyNames` property be correctly set.</span></span> <span data-ttu-id="24b63-215">S’il est manquant, le `DeleteParameters` recevront un `null` valeur à l’étape 1, ce qui à son tour pas entraînera un supprimé des enregistrements à l’étape 2.</span><span class="sxs-lookup"><span data-stu-id="24b63-215">If it's missing, the `DeleteParameters` will be assigned a `null` value in Step 1, which in turn will not result in any deleted records in Step 2.</span></span>

> [!NOTE]
> <span data-ttu-id="24b63-216">Le `DataKeys` collection est stockée dans l’état du contrôle GridView s, ce qui signifie que le `DataKeys` valeurs seront mémorisés sur la publication (postback), même si l’état d’affichage GridView s a été désactivé.</span><span class="sxs-lookup"><span data-stu-id="24b63-216">The `DataKeys` collection is stored in the GridView s control state, meaning that the `DataKeys` values will be remembered across postback even if the GridView s view state has been disabled.</span></span> <span data-ttu-id="24b63-217">Toutefois, il est très important que l’état d’affichage reste activée pour les contrôles GridView qui prennent en charge la modification ou la suppression (le comportement par défaut).</span><span class="sxs-lookup"><span data-stu-id="24b63-217">However, it is very important that view state remains enabled for GridViews that support editing or deleting (the default behavior).</span></span> <span data-ttu-id="24b63-218">Si vous définissez le s GridView `EnableViewState` propriété `false`, la modification et suppression de comportement fonctionnent pour un seul utilisateur, mais s’il existe des utilisateurs simultanés, la suppression des données, il est possible que ces utilisateurs simultanés peuvent accidentellement supprimer ou modifier des enregistrements qu’ils ne le vouliez pas.</span><span class="sxs-lookup"><span data-stu-id="24b63-218">If you set the GridView s `EnableViewState` property to `false`, the editing and deleting behavior will work fine for a single user, but if there are concurrent users deleting data, there exists the possibility that these concurrent users may accidentally delete or edit records that they didn't intend.</span></span> <span data-ttu-id="24b63-219">Consultez mon billet de blog, [Avertissement : Accès concurrentiel émettre avec ASP.NET 2.0 GridViews/DetailsView/FormViews que prise en charge la modification et/ou de suppression et dont l’état d’affichage est désactivé](http://scottonwriting.net/sowblog/archive/2006/10/03/163215.aspx), pour plus d’informations.</span><span class="sxs-lookup"><span data-stu-id="24b63-219">See my blog entry, [WARNING: Concurrency Issue with ASP.NET 2.0 GridViews/DetailsView/FormViews that Support Editing and/or Deleting and Whose View State is Disabled](http://scottonwriting.net/sowblog/archive/2006/10/03/163215.aspx), for more information.</span></span>


<span data-ttu-id="24b63-220">Cet avertissement même s’applique également aux DetailsViews et FormViews.</span><span class="sxs-lookup"><span data-stu-id="24b63-220">This same warning also applies to DetailsViews and FormViews.</span></span>

<span data-ttu-id="24b63-221">Pour ajouter des fonctionnalités de suppression sur un GridView, simplement accéder à sa balise active et activez la case à cocher Activer la suppression.</span><span class="sxs-lookup"><span data-stu-id="24b63-221">To add deleting capabilities to a GridView, simply go to its smart tag and check the Enable Deleting checkbox.</span></span>


![Vérifiez l’activer la suppression de case à cocher](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image24.png)

<span data-ttu-id="24b63-223">**Figure 10**: Vérifiez l’activer la suppression de case à cocher</span><span class="sxs-lookup"><span data-stu-id="24b63-223">**Figure 10**: Check the Enable Deleting Checkbox</span></span>


<span data-ttu-id="24b63-224">La vérification de la case à cocher Activer la suppression de la balise active ajoute un CommandField au GridView.</span><span class="sxs-lookup"><span data-stu-id="24b63-224">Checking the Enable Deleting checkbox from the smart tag adds a CommandField to the GridView.</span></span> <span data-ttu-id="24b63-225">Le CommandField restitue une colonne dans le contrôle GridView avec des boutons permettant d’effectuer une ou plusieurs des tâches suivantes : sélectionner un enregistrement, la modification d’un enregistrement et la suppression d’un enregistrement.</span><span class="sxs-lookup"><span data-stu-id="24b63-225">The CommandField renders a column in the GridView with buttons for performing one or more of the following tasks: selecting a record, editing a record, and deleting a record.</span></span> <span data-ttu-id="24b63-226">Nous avons précédemment vu la CommandField en action sans crainte des enregistrements dans la [maître/détail utilisant un GridView maître avec un DetailView détail](../masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs.md) didacticiel.</span><span class="sxs-lookup"><span data-stu-id="24b63-226">We previously saw the CommandField in action with selecting records in the [Master/Detail Using a Selectable Master GridView with a Details DetailView](../masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs.md) tutorial.</span></span>

<span data-ttu-id="24b63-227">Le CommandField contient un nombre de `ShowXButton` propriétés qui indiquent quelle série de boutons est affichés dans le CommandField.</span><span class="sxs-lookup"><span data-stu-id="24b63-227">The CommandField contains a number of `ShowXButton` properties that indicate what series of buttons are displayed in the CommandField.</span></span> <span data-ttu-id="24b63-228">En cochant la case Activer la suppression un CommandField dont `ShowDeleteButton` est propriété `true` a été ajouté à la collection de colonnes du contrôle GridView.</span><span class="sxs-lookup"><span data-stu-id="24b63-228">By checking the Enable Deleting checkbox a CommandField whose `ShowDeleteButton` property is `true` has been added to the GridView's Columns collection.</span></span>


[!code-aspx[Main](an-overview-of-inserting-updating-and-deleting-data-cs/samples/sample5.aspx)]

<span data-ttu-id="24b63-229">À ce stade, croyez-le ou non, nous avons terminé avec l’ajout d’une prise en charge la suppression au GridView !</span><span class="sxs-lookup"><span data-stu-id="24b63-229">At this point, believe it or not, we're done with adding deleting support to the GridView!</span></span> <span data-ttu-id="24b63-230">Comme le montre la Figure 11, lorsque cette page via un navigateur, une colonne de boutons de suppression se trouve.</span><span class="sxs-lookup"><span data-stu-id="24b63-230">As Figure 11 shows, when visiting this page through a browser a column of Delete buttons is present.</span></span>


<span data-ttu-id="24b63-231">[![Le CommandField ajoute une colonne de boutons de suppression](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image26.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="24b63-231">[![The CommandField Adds a Column of Delete Buttons](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image26.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image25.png)</span></span>

<span data-ttu-id="24b63-232">**Figure 11**: Le CommandField ajoute une colonne de boutons Supprimer ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="24b63-232">**Figure 11**: The CommandField Adds a Column of Delete Buttons ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image27.png))</span></span>


<span data-ttu-id="24b63-233">Si vous aviez créé ce didacticiel à partir de zéro sur votre propre, lorsque vous testez cette page en cliquant sur le bouton Supprimer lève une exception.</span><span class="sxs-lookup"><span data-stu-id="24b63-233">If you've been building this tutorial from the ground up on your own, when testing this page clicking the Delete button will raise an exception.</span></span> <span data-ttu-id="24b63-234">Poursuivez votre lecture pour en savoir plus sur pourquoi ces exceptions ont été générées et comment les résoudre.</span><span class="sxs-lookup"><span data-stu-id="24b63-234">Continue reading to learn as to why these exceptions were raised and how to fix them.</span></span>

> [!NOTE]
> <span data-ttu-id="24b63-235">Si vous programmez à l’aide du téléchargement qui accompagne ce didacticiel, ces problèmes ont déjà été pris en compte.</span><span class="sxs-lookup"><span data-stu-id="24b63-235">If you're following along using the download accompanying this tutorial, these problems have already been accounted for.</span></span> <span data-ttu-id="24b63-236">Toutefois, je vous encourage à lire les détails ci-dessous pour vous aider à identifier les problèmes qui peuvent survenir et les solutions de contournement appropriées.</span><span class="sxs-lookup"><span data-stu-id="24b63-236">However, I encourage you to read through the details listed below to help identify problems that may arise and suitable workarounds.</span></span>


<span data-ttu-id="24b63-237">Si, lorsque vous tentez de supprimer un produit, vous obtenez une exception dont le message est similaire à «*ObjectDataSource 'ObjectDataSource1' n’a pas trouvé une méthode non générique 'DeleteProduct' qui possède des paramètres : productID, d’origine\_ ProductID*, « vous probablement oublié de supprimer le `OldValuesParameterFormatString` propriété à partir de l’ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="24b63-237">If, when attempting to delete a product, you get an exception whose message is similar to "*ObjectDataSource 'ObjectDataSource1' could not find a non-generic method 'DeleteProduct' that has parameters: productID, original\_ProductID*," you likely forgot to remove the `OldValuesParameterFormatString` property from the ObjectDataSource.</span></span> <span data-ttu-id="24b63-238">Avec le `OldValuesParameterFormatString` propriété spécifiée, ObjectDataSource tente de passer à la fois dans `productID` et `original_ProductID` paramètres d’entrée de la `DeleteProduct` (méthode).</span><span class="sxs-lookup"><span data-stu-id="24b63-238">With the `OldValuesParameterFormatString` property specified, the ObjectDataSource attempts to pass in both `productID` and `original_ProductID` input parameters to the `DeleteProduct` method.</span></span> <span data-ttu-id="24b63-239">`DeleteProduct`, toutefois, il accepte uniquement un paramètre d’entrée unique, par conséquent, l’exception.</span><span class="sxs-lookup"><span data-stu-id="24b63-239">`DeleteProduct`, however, only accepts a single input parameter, hence the exception.</span></span> <span data-ttu-id="24b63-240">Suppression de la `OldValuesParameterFormatString` propriété (ou la valeur `{0}`) indique à ObjectDataSource au lieu d’essayer de transmettre le paramètre d’entrée d’origine.</span><span class="sxs-lookup"><span data-stu-id="24b63-240">Removing the `OldValuesParameterFormatString` property (or setting it to `{0}`) instructs the ObjectDataSource to not attempt to pass in the original input parameter.</span></span>


<span data-ttu-id="24b63-241">[![Assurez-vous que la propriété OldValuesParameterFormatString a été effacée](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image29.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="24b63-241">[![Ensure That the OldValuesParameterFormatString Property Has Been Cleared Out](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image29.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image28.png)</span></span>

<span data-ttu-id="24b63-242">**Figure 12**: Vérifiez que le `OldValuesParameterFormatString` propriété a été effacé Out ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="24b63-242">**Figure 12**: Ensure That the `OldValuesParameterFormatString` Property Has Been Cleared Out ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image30.png))</span></span>


<span data-ttu-id="24b63-243">Même si vous aviez supprimé le `OldValuesParameterFormatString` propriété, vous en obtiendrez une exception lorsque vous tentez de supprimer un produit avec le message : «*Instruction DELETE the est en conflit avec la contrainte de référence ' FK\_ordre\_détails\_produits*. » La base de données Northwind contient une contrainte de clé étrangère entre la `Order Details` et `Products` table, ce qui signifie qu’un produit ne peut pas être supprimé du système s’il existe un ou plusieurs enregistrements pour lui dans le `Order Details` table.</span><span class="sxs-lookup"><span data-stu-id="24b63-243">Even if you had removed the `OldValuesParameterFormatString` property, you still will get an exception when trying to delete a product with the message: "*The DELETE statement conflicted with the REFERENCE constraint 'FK\_Order\_Details\_Products'*." The Northwind database contains a foreign key constraint between the `Order Details` and `Products` table, meaning that a product cannot be deleted from the system if there are one or more records for it in the `Order Details` table.</span></span> <span data-ttu-id="24b63-244">Dans la mesure où chaque produit dans la base de données Northwind est associé au moins un enregistrement `Order Details`, nous ne pouvons pas supprimer tous les produits jusqu'à ce que nous supprimons tout d’abord les enregistrements de détails de commande associée du produit.</span><span class="sxs-lookup"><span data-stu-id="24b63-244">Since every product in the Northwind database has at least one record in `Order Details`, we cannot delete any products until we first delete the product's associated order details records.</span></span>


<span data-ttu-id="24b63-245">[![Une contrainte de clé étrangère interdit la suppression de produits](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image32.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="24b63-245">[![A Foreign Key Constraint Prohibits the Deletion of Products](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image32.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image31.png)</span></span>

<span data-ttu-id="24b63-246">**Figure 13**: Une contrainte de clé étrangère interdit la suppression de produits ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="24b63-246">**Figure 13**: A Foreign Key Constraint Prohibits the Deletion of Products ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image33.png))</span></span>


<span data-ttu-id="24b63-247">Dans notre didacticiel, nous allons simplement supprimer tous les enregistrements à partir de la `Order Details` table.</span><span class="sxs-lookup"><span data-stu-id="24b63-247">For our tutorial, let's just delete all of the records from the `Order Details` table.</span></span> <span data-ttu-id="24b63-248">Dans une application réelle, nous devons soit :</span><span class="sxs-lookup"><span data-stu-id="24b63-248">In a real-world application we'd need to either:</span></span>

- <span data-ttu-id="24b63-249">Écran d’un autre pour gérer les informations de détails de commande</span><span class="sxs-lookup"><span data-stu-id="24b63-249">Have another screen to manage order details information</span></span>
- <span data-ttu-id="24b63-250">Augmenter la `DeleteProduct` d’inclure la logique pour supprimer les détails de la commande du produit spécifié (méthode)</span><span class="sxs-lookup"><span data-stu-id="24b63-250">Augment the `DeleteProduct` method to include logic to delete the specified product's order details</span></span>
- <span data-ttu-id="24b63-251">Modifier la requête SQL utilisée par le TableAdapter à inclure la suppression des détails de commande du produit spécifié</span><span class="sxs-lookup"><span data-stu-id="24b63-251">Modify the SQL query used by the TableAdapter to include deletion of the specified product's order details</span></span>

<span data-ttu-id="24b63-252">Nous allons simplement supprimer tous les enregistrements à partir de la `Order Details` table contourner les mesures de la contrainte de clé étrangère.</span><span class="sxs-lookup"><span data-stu-id="24b63-252">Let's just delete all of the records from the `Order Details` table to circumvent the foreign key constraint.</span></span> <span data-ttu-id="24b63-253">Accédez à l’Explorateur de serveurs dans Visual Studio, avec le bouton droit sur le `NORTHWND.MDF` nœud, puis choisissez la nouvelle requête.</span><span class="sxs-lookup"><span data-stu-id="24b63-253">Go to the Server Explorer in Visual Studio, right-click on the `NORTHWND.MDF` node, and choose New Query.</span></span> <span data-ttu-id="24b63-254">Puis, dans la fenêtre de requête, exécutez l’instruction SQL suivante : `DELETE FROM [Order Details]`</span><span class="sxs-lookup"><span data-stu-id="24b63-254">Then, in the query window, run the following SQL statement: `DELETE FROM [Order Details]`</span></span>


<span data-ttu-id="24b63-255">[![Supprimez tous les enregistrements à partir de la Table Order Details](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image35.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="24b63-255">[![Delete All Records from the Order Details Table](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image35.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image34.png)</span></span>

<span data-ttu-id="24b63-256">**Figure 14**: Supprimez tous les enregistrements à partir de la `Order Details` Table ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="24b63-256">**Figure 14**: Delete All Records from the `Order Details` Table ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image36.png))</span></span>


<span data-ttu-id="24b63-257">Après éliminant le `Order Details` table en cliquant sur le bouton Supprimer supprimera le produit sans erreur.</span><span class="sxs-lookup"><span data-stu-id="24b63-257">After clearing out the `Order Details` table clicking on the Delete button will delete the product without error.</span></span> <span data-ttu-id="24b63-258">Si vous cliquez sur le bouton de suppression ne supprime pas le produit, vérifiez que le contrôle GridView `DataKeyNames` propriété est définie sur le champ de clé primaire (`ProductID`).</span><span class="sxs-lookup"><span data-stu-id="24b63-258">If clicking on the Delete button does not delete the product, check to ensure that the GridView's `DataKeyNames` property is set to the primary key field (`ProductID`).</span></span>

> [!NOTE]
> <span data-ttu-id="24b63-259">Lorsque vous cliquez sur le bouton Supprimer s’ensuit une publication (postback) et l’enregistrement est supprimé.</span><span class="sxs-lookup"><span data-stu-id="24b63-259">When clicking on the Delete button a postback ensues and the record is deleted.</span></span> <span data-ttu-id="24b63-260">Cela peut être dangereux, car il est facile d’accidentellement cliquez sur le bouton de suppression de la ligne incorrecte.</span><span class="sxs-lookup"><span data-stu-id="24b63-260">This can be dangerous since it is easy to accidentally click on the wrong row's Delete button.</span></span> <span data-ttu-id="24b63-261">Dans un futur didacticiel, nous allons voir comment ajouter une confirmation côté client lors de la suppression d’un enregistrement.</span><span class="sxs-lookup"><span data-stu-id="24b63-261">In a future tutorial we'll see how to add a client-side confirmation when deleting a record.</span></span>


## <a name="editing-data-with-the-gridview"></a><span data-ttu-id="24b63-262">Modification des données avec le contrôle GridView</span><span class="sxs-lookup"><span data-stu-id="24b63-262">Editing Data with the GridView</span></span>

<span data-ttu-id="24b63-263">En même temps que la suppression, le contrôle GridView fournit également une prise en charge intégrée de modification au niveau des lignes.</span><span class="sxs-lookup"><span data-stu-id="24b63-263">Along with deleting, the GridView control also provides built-in row-level editing support.</span></span> <span data-ttu-id="24b63-264">Configuration d’un GridView pour prendre en charge la modification ajoute une colonne de boutons d’édition.</span><span class="sxs-lookup"><span data-stu-id="24b63-264">Configuring a GridView to support editing adds a column of Edit buttons.</span></span> <span data-ttu-id="24b63-265">Du point de vue de l’utilisateur final, en cliquant sur les causes de bouton de modification d’une ligne ligne devienne modifiable, transformer les cellules en zones de texte contenant les valeurs existantes et en remplaçant le bouton Modifier avec mise à jour et les boutons d’annulation.</span><span class="sxs-lookup"><span data-stu-id="24b63-265">From the end user's perspective, clicking a row's Edit button causes that row to become editable, turning the cells into textboxes containing the existing values and replacing the Edit button with Update and Cancel buttons.</span></span> <span data-ttu-id="24b63-266">Après avoir apporté les modifications souhaitées, l’utilisateur final pouvez cliquer sur le bouton de mise à jour pour valider les modifications ou le bouton Annuler pour les ignorer.</span><span class="sxs-lookup"><span data-stu-id="24b63-266">After making their desired changes, the end user can click the Update button to commit the changes or the Cancel button to discard them.</span></span> <span data-ttu-id="24b63-267">Dans les deux cas, après avoir cliqué sur mise à jour ou annuler le GridView retourne à son état avant modification.</span><span class="sxs-lookup"><span data-stu-id="24b63-267">In either case, after clicking Update or Cancel the GridView returns to its pre-editing state.</span></span>

<span data-ttu-id="24b63-268">À partir de notre point de vue en tant que le développeur de pages, lorsque l’utilisateur final clique sur le bouton Modifier pour une ligne particulière, s’ensuit une publication (postback) et le contrôle GridView effectue les étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="24b63-268">From our perspective as the page developer, when the end user clicks the Edit button for a particular row, a postback ensues and the GridView performs the following steps:</span></span>

1. <span data-ttu-id="24b63-269">Le contrôle GridView `EditItemIndex` propriété est affectée à l’index de la ligne dont bouton Modifier</span><span class="sxs-lookup"><span data-stu-id="24b63-269">The GridView's `EditItemIndex` property is assigned to the index of the row whose Edit button was clicked</span></span>
2. <span data-ttu-id="24b63-270">Le contrôle GridView se lie au ObjectDataSource en appelant son `Select()` (méthode)</span><span class="sxs-lookup"><span data-stu-id="24b63-270">The GridView rebinds itself to the ObjectDataSource by invoking its `Select()` method</span></span>
3. <span data-ttu-id="24b63-271">L’index de ligne qui correspond à la `EditItemIndex` est restitué en « mode de modification ».</span><span class="sxs-lookup"><span data-stu-id="24b63-271">The row index that matches the `EditItemIndex` is rendered in "edit mode."</span></span> <span data-ttu-id="24b63-272">Dans ce mode, le bouton Modifier est remplacé par les boutons Annuler et de mise à jour et BoundFields dont `ReadOnly` propriétés ont la valeur False (valeur par défaut) sont rendus en tant que contrôles de zone de texte Web dont la propriété `Text` propriétés sont attribuées aux valeurs de champs de données.</span><span class="sxs-lookup"><span data-stu-id="24b63-272">In this mode, the Edit button is replaced by Update and Cancel buttons and BoundFields whose `ReadOnly` properties are False (the default) are rendered as TextBox Web controls whose `Text` properties are assigned to the data fields' values.</span></span>

<span data-ttu-id="24b63-273">À ce stade, le balisage est retourné au navigateur, ce qui permet de l’utilisateur final d’apporter des modifications pour les données de la ligne.</span><span class="sxs-lookup"><span data-stu-id="24b63-273">At this point the markup is returned to the browser, allowing the end user to make any changes to the row's data.</span></span> <span data-ttu-id="24b63-274">Lorsque l’utilisateur clique sur le bouton de mise à jour, une publication (postback) se produit et le contrôle GridView effectue les étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="24b63-274">When the user clicks the Update button, a postback occurs and the GridView performs the following steps:</span></span>

1. <span data-ttu-id="24b63-275">L’ObjectDataSource `UpdateParameters` ou les valeurs sont affectées les valeurs entrées par l’utilisateur final dans l’interface de modification du contrôle GridView</span><span class="sxs-lookup"><span data-stu-id="24b63-275">The ObjectDataSource's `UpdateParameters` value(s) are assigned the values entered by the end user into the GridView's editing interface</span></span>
2. <span data-ttu-id="24b63-276">L’ObjectDataSource `Update()` méthode est appelée, la mise à jour de l’enregistrement spécifié</span><span class="sxs-lookup"><span data-stu-id="24b63-276">The ObjectDataSource's `Update()` method is invoked, updating the specified record</span></span>
3. <span data-ttu-id="24b63-277">Le contrôle GridView se lie au ObjectDataSource en appelant son `Select()` (méthode)</span><span class="sxs-lookup"><span data-stu-id="24b63-277">The GridView rebinds itself to the ObjectDataSource by invoking its `Select()` method</span></span>

<span data-ttu-id="24b63-278">Les valeurs de clé primaires affectées à la `UpdateParameters` à l’étape 1 proviennent les valeurs spécifiées dans le `DataKeyNames` propriété, tandis que les valeurs de clé non primaire sont fournis à partir du texte dans les contrôles Web de la zone de texte pour la ligne modifiée.</span><span class="sxs-lookup"><span data-stu-id="24b63-278">The primary key values assigned to the `UpdateParameters` in Step 1 come from the values specified in the `DataKeyNames` property, whereas the non-primary key values come from the text in the TextBox Web controls for the edited row.</span></span> <span data-ttu-id="24b63-279">Comme avec la suppression, il est essentiel que d’un GridView `DataKeyNames` propriété être définie correctement.</span><span class="sxs-lookup"><span data-stu-id="24b63-279">As with deleting, it is vital that a GridView's `DataKeyNames` property be correctly set.</span></span> <span data-ttu-id="24b63-280">S’il est manquant, le `UpdateParameters` ont une valeur de clé primaire une `null` valeur à l’étape 1, ce qui à son tour pas entraîne une mise à jour des enregistrements à l’étape 2.</span><span class="sxs-lookup"><span data-stu-id="24b63-280">If it's missing, the `UpdateParameters` primary key value will be assigned a `null` value in Step 1, which in turn will not result in any updated records in Step 2.</span></span>

<span data-ttu-id="24b63-281">Fonctionnalités d’édition peuvent être activée en vérifiant simplement la case à cocher Activer la modification dans la balise active le contrôle GridView.</span><span class="sxs-lookup"><span data-stu-id="24b63-281">Editing functionality can be activated by simply checking the Enable Editing checkbox in the GridView's smart tag.</span></span>


![Vérifiez l’activer la case à cocher de modification](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image37.png)

<span data-ttu-id="24b63-283">**Figure 15**: Vérifiez l’activer la case à cocher de modification</span><span class="sxs-lookup"><span data-stu-id="24b63-283">**Figure 15**: Check the Enable Editing Checkbox</span></span>


<span data-ttu-id="24b63-284">Vérification de la case à cocher Activer la modification ajoutera un CommandField (si nécessaire) et définissez son `ShowEditButton` propriété `true`.</span><span class="sxs-lookup"><span data-stu-id="24b63-284">Checking the Enable Editing checkbox will add a CommandField (if needed) and set its `ShowEditButton` property to `true`.</span></span> <span data-ttu-id="24b63-285">Comme nous l’avons vu précédemment, le CommandField contient un nombre de `ShowXButton` propriétés qui indiquent quelle série de boutons est affichés dans le CommandField.</span><span class="sxs-lookup"><span data-stu-id="24b63-285">As we saw earlier, the CommandField contains a number of `ShowXButton` properties that indicate what series of buttons are displayed in the CommandField.</span></span> <span data-ttu-id="24b63-286">La vérification de la case à cocher Activer la modification ajoute le `ShowEditButton` propriété le CommandField existant :</span><span class="sxs-lookup"><span data-stu-id="24b63-286">Checking the Enable Editing checkbox adds the `ShowEditButton` property to the existing CommandField:</span></span>


[!code-aspx[Main](an-overview-of-inserting-updating-and-deleting-data-cs/samples/sample6.aspx)]

<span data-ttu-id="24b63-287">C’est tout concerne l’ajout de la prise en charge rudimentaire de modification.</span><span class="sxs-lookup"><span data-stu-id="24b63-287">That's all there is to adding rudimentary editing support.</span></span> <span data-ttu-id="24b63-288">Comme Figure16 montre, l’interface de modification est plutôt brute chaque BoundField dont `ReadOnly` propriété est définie sur `false` (la valeur par défaut) est restitué sous la forme d’une zone de texte.</span><span class="sxs-lookup"><span data-stu-id="24b63-288">As Figure16 shows, the editing interface is rather crude each BoundField whose `ReadOnly` property is set to `false` (the default) is rendered as a TextBox.</span></span> <span data-ttu-id="24b63-289">Cela inclut les champs comme `CategoryID` et `SupplierID`, qui sont des clés à d’autres tables.</span><span class="sxs-lookup"><span data-stu-id="24b63-289">This includes fields like `CategoryID` and `SupplierID`, which are keys to other tables.</span></span>


<span data-ttu-id="24b63-290">[![Bouton de modification en cliquant sur Chai s affiche la ligne en Mode Édition](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image39.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="24b63-290">[![Clicking Chai s Edit Button Displays the Row in Edit Mode](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image39.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image38.png)</span></span>

<span data-ttu-id="24b63-291">**Figure 16**: Cliquez sur s Chai bouton Modifier pour afficher la ligne dans le Mode d’édition ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image40.png))</span><span class="sxs-lookup"><span data-stu-id="24b63-291">**Figure 16**: Clicking Chai s Edit Button Displays the Row in Edit Mode ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image40.png))</span></span>


<span data-ttu-id="24b63-292">En plus de demander aux utilisateurs de modifier directement les valeurs de clé étrangère, interface de l’interface modification ne dispose pas de plusieurs manières :</span><span class="sxs-lookup"><span data-stu-id="24b63-292">In addition to asking users to edit foreign key values directly, the editing interface's interface is lacking in the following ways:</span></span>

- <span data-ttu-id="24b63-293">Si l’utilisateur entre un `CategoryID` ou `SupplierID` qui n’existe pas dans la base de données, le `UPDATE` violeront la contrainte de clé étrangère, à l’origine d’une exception à lever.</span><span class="sxs-lookup"><span data-stu-id="24b63-293">If the user enters a `CategoryID` or `SupplierID` that does not exist in the database, the `UPDATE` will violate a foreign key constraint, causing an exception to be raised.</span></span>
- <span data-ttu-id="24b63-294">Aucune validation n’inclut pas l’interface de modification.</span><span class="sxs-lookup"><span data-stu-id="24b63-294">The editing interface doesn't include any validation.</span></span> <span data-ttu-id="24b63-295">Si vous ne fournissez pas une valeur requise (tel que `ProductName`), ou entrez une valeur de chaîne dans laquelle une valeur numérique est attendue (par exemple, entrez « Trop ! »</span><span class="sxs-lookup"><span data-stu-id="24b63-295">If you don't provide a required value (such as `ProductName`), or enter a string value where a numeric value is expected (such as entering "Too much!"</span></span> <span data-ttu-id="24b63-296">dans la `UnitPrice` zone de texte), une exception sera levée.</span><span class="sxs-lookup"><span data-stu-id="24b63-296">into the `UnitPrice` textbox), an exception will be thrown.</span></span> <span data-ttu-id="24b63-297">Un futur didacticiel examine comment ajouter des contrôles de validation à l’interface utilisateur de modification.</span><span class="sxs-lookup"><span data-stu-id="24b63-297">A future tutorial will examine how to add validation controls to the editing user interface.</span></span>
- <span data-ttu-id="24b63-298">Actuellement, *tous les* des champs de produits qui ne sont pas en lecture seule doivent être inclus dans le contrôle GridView.</span><span class="sxs-lookup"><span data-stu-id="24b63-298">Currently, *all* product fields that are not read-only must be included in the GridView.</span></span> <span data-ttu-id="24b63-299">Si vous deviez supprimer un champ de GridView, par exemple `UnitPrice`, lors de la mise à jour les données, le contrôle GridView ne définirait pas le `UnitPrice` `UpdateParameters` valeur, ce qui pourrait être modifié l’enregistrement de base de données `UnitPrice` à un `NULL` valeur.</span><span class="sxs-lookup"><span data-stu-id="24b63-299">If we were to remove a field from the GridView, say `UnitPrice`, when updating the data the GridView would not set the `UnitPrice` `UpdateParameters` value, which would change the database record's `UnitPrice` to a `NULL` value.</span></span> <span data-ttu-id="24b63-300">De même, si un champ obligatoire, tel que `ProductName`, est supprimé à partir de la GridView, la mise à jour échoue avec le même «*colonne « ProductName » n’autorise pas les valeurs null*« exception mentionné ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="24b63-300">Similarly, if a required field, such as `ProductName`, is removed from the GridView, the update will fail with the same "*Column 'ProductName' does not allow nulls*" exception mentioned above.</span></span>
- <span data-ttu-id="24b63-301">La mise en forme interface édition laisse beaucoup à désirer.</span><span class="sxs-lookup"><span data-stu-id="24b63-301">The editing interface formatting leaves a lot to be desired.</span></span> <span data-ttu-id="24b63-302">Le `UnitPrice` s’affiche avec quatre décimales.</span><span class="sxs-lookup"><span data-stu-id="24b63-302">The `UnitPrice` is shown with four decimal points.</span></span> <span data-ttu-id="24b63-303">Dans l’idéal, le `CategoryID` et `SupplierID` valeurs contiendrait DropDownList qui répertorient les catégories et les fournisseurs dans le système.</span><span class="sxs-lookup"><span data-stu-id="24b63-303">Ideally the `CategoryID` and `SupplierID` values would contain DropDownLists that list the categories and suppliers in the system.</span></span>

<span data-ttu-id="24b63-304">Il s’agit de tous les défauts que nous aurons au quotidien pour l’instant, mais n’y être traités dans les didacticiels futures.</span><span class="sxs-lookup"><span data-stu-id="24b63-304">These are all shortcomings that we'll have to live with for now, but will be addressed in future tutorials.</span></span>

## <a name="inserting-editing-and-deleting-data-with-the-detailsview"></a><span data-ttu-id="24b63-305">Insertion, la modification et suppression de données avec le contrôle DetailsView</span><span class="sxs-lookup"><span data-stu-id="24b63-305">Inserting, Editing, and Deleting Data with the DetailsView</span></span>

<span data-ttu-id="24b63-306">Comme nous l’avons vu dans les didacticiels précédents, le contrôle DetailsView affiche un enregistrement à la fois et, comme le contrôle GridView, permettant à la modification et suppression de l’enregistrement actuellement affiché.</span><span class="sxs-lookup"><span data-stu-id="24b63-306">As we've seen in earlier tutorials, the DetailsView control displays one record at a time and, like the GridView, allows for editing and deleting of the currently displayed record.</span></span> <span data-ttu-id="24b63-307">Expérience à la fois l’utilisateur final avec la modification et suppression des éléments à partir d’un contrôle DetailsView et le flux de travail à partir du côté ASP.NET est identique à celle du contrôle GridView.</span><span class="sxs-lookup"><span data-stu-id="24b63-307">Both the end user's experience with editing and deleting items from a DetailsView and the workflow from the ASP.NET side is identical to that of the GridView.</span></span> <span data-ttu-id="24b63-308">Où le contrôle DetailsView diffère de la GridView est qu’il fournit également une prise en charge l’insertion intégrée.</span><span class="sxs-lookup"><span data-stu-id="24b63-308">Where the DetailsView differs from the GridView is that it also provides built-in inserting support.</span></span>

<span data-ttu-id="24b63-309">Pour illustrer les fonctionnalités de modification de données du contrôle GridView, commencez par ajouter un contrôle DetailsView pour le `Basics.aspx` page au-dessus de la GridView existant et liez-le au ObjectDataSource existant via la balise active de DetailsView.</span><span class="sxs-lookup"><span data-stu-id="24b63-309">To demonstrate the data modification capabilities of the GridView, start by adding a DetailsView to the `Basics.aspx` page above the existing GridView and bind it to the existing ObjectDataSource through the DetailsView's smart tag.</span></span> <span data-ttu-id="24b63-310">Ensuite, désactivez out de DetailsView `Height` et `Width` propriétés et l’option Activer la pagination de la balise active.</span><span class="sxs-lookup"><span data-stu-id="24b63-310">Next, clear out the DetailsView's `Height` and `Width` properties, and check the Enable Paging option from the smart tag.</span></span> <span data-ttu-id="24b63-311">Pour activer la modification, insertion et suppression de la prise en charge, simplement cocher les cases à cocher Activer la modification, activer l’insertion et activer la suppression de la balise active.</span><span class="sxs-lookup"><span data-stu-id="24b63-311">To enable editing, inserting, and deleting support, simply check the Enable Editing, Enable Inserting, and Enable Deleting checkboxes in the smart tag.</span></span>


![Configurer le contrôle DetailsView au support technique de modification, d’insertion et de suppression](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image41.png)

<span data-ttu-id="24b63-313">**Figure 17**: Configurer le contrôle DetailsView au support technique de modification, d’insertion et de suppression</span><span class="sxs-lookup"><span data-stu-id="24b63-313">**Figure 17**: Configure the DetailsView to Support Editing, Inserting, and Deleting</span></span>


<span data-ttu-id="24b63-314">Comme avec le contrôle GridView, ajout de modification, insertion ou la suppression de prise en charge ajoute un CommandField au contrôle DetailsView, comme le montre la syntaxe déclarative suivant :</span><span class="sxs-lookup"><span data-stu-id="24b63-314">As with the GridView, adding editing, inserting, or deleting support adds a CommandField to the DetailsView, as the following declarative syntax shows:</span></span>


[!code-aspx[Main](an-overview-of-inserting-updating-and-deleting-data-cs/samples/sample7.aspx)]

<span data-ttu-id="24b63-315">Notez que pour le contrôle DetailsView le CommandField apparaît à la fin de la collection de colonnes par défaut.</span><span class="sxs-lookup"><span data-stu-id="24b63-315">Note that for the DetailsView the CommandField appears at the end of the Columns collection by default.</span></span> <span data-ttu-id="24b63-316">Dans la mesure où les champs de DetailsView sont rendus sous forme de lignes, le CommandField apparaît sous la forme d’une ligne avec l’instruction Insert, modifier et supprimer des boutons au bas de DetailsView.</span><span class="sxs-lookup"><span data-stu-id="24b63-316">Since the DetailsView's fields are rendered as rows, the CommandField appears as a row with Insert, Edit, and Delete buttons at the bottom of the DetailsView.</span></span>


<span data-ttu-id="24b63-317">[![Configurer le contrôle DetailsView au support technique de modification, d’insertion et de suppression](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image43.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image42.png)</span><span class="sxs-lookup"><span data-stu-id="24b63-317">[![Configure the DetailsView to Support Editing, Inserting, and Deleting](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image43.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image42.png)</span></span>

<span data-ttu-id="24b63-318">**Figure 18**: Configurer le contrôle DetailsView à la prise en charge de modification, insertion et suppression ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image44.png))</span><span class="sxs-lookup"><span data-stu-id="24b63-318">**Figure 18**: Configure the DetailsView to Support Editing, Inserting, and Deleting ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image44.png))</span></span>


<span data-ttu-id="24b63-319">En cliquant sur le bouton Supprimer démarre la même séquence d’événements comme avec le contrôle GridView : une publication (postback) ; suivi par le contrôle DetailsView remplissant son ObjectDataSource `DeleteParameters` selon le `DataKeyNames` valeurs ; et terminé par un appel son ObjectDataSource `Delete()` (méthode), ce qui supprime réellement le produit à partir de la base de données.</span><span class="sxs-lookup"><span data-stu-id="24b63-319">Clicking on the Delete button starts the same sequence of events as with the GridView: a postback; followed by the DetailsView populating its ObjectDataSource's `DeleteParameters` based on the `DataKeyNames` values; and completed with a call its ObjectDataSource's `Delete()` method, which actually removes the product from the database.</span></span> <span data-ttu-id="24b63-320">Modification dans le contrôle DetailsView fonctionne également de manière identique à celle du contrôle GridView.</span><span class="sxs-lookup"><span data-stu-id="24b63-320">Editing in the DetailsView also works in a fashion identical to that of the GridView.</span></span>

<span data-ttu-id="24b63-321">Pour l’insertion, l’utilisateur final est présenté avec un nouveau bouton qui, lorsque vous cliquez dessus, restitue le contrôle DetailsView en « mode d’insertion ».</span><span class="sxs-lookup"><span data-stu-id="24b63-321">For inserting, the end user is presented with a New button that, when clicked, renders the DetailsView in "insert mode."</span></span> <span data-ttu-id="24b63-322">Avec le « mode insertion » le nouveau bouton est remplacé par les boutons Insérer et annuler et uniquement ces BoundFields dont `InsertVisible` propriété est définie sur `true` (la valeur par défaut) sont affichés.</span><span class="sxs-lookup"><span data-stu-id="24b63-322">With "insert mode" the New button is replaced by Insert and Cancel buttons and only those BoundFields whose `InsertVisible` property is set to `true` (the default) are displayed.</span></span> <span data-ttu-id="24b63-323">Ces champs de données identifiés en tant que champs de l’incrémentation automatique, tel que `ProductID`, ont leurs [InsertVisible propriété](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datacontrolfield.insertvisible(VS.80).aspx) défini sur `false` lorsque vous liez le contrôle DetailsView à la source de données via la balise active.</span><span class="sxs-lookup"><span data-stu-id="24b63-323">Those data fields identified as auto-increment fields, such as `ProductID`, have their [InsertVisible property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datacontrolfield.insertvisible(VS.80).aspx) set to `false` when binding the DetailsView to the data source through the smart tag.</span></span>

<span data-ttu-id="24b63-324">Lors de la liaison d’une source de données à un contrôle DetailsView via la balise active, Visual Studio définit le `InsertVisible` propriété `false` uniquement pour les champs de l’incrémentation automatique.</span><span class="sxs-lookup"><span data-stu-id="24b63-324">When binding a data source to a DetailsView through the smart tag, Visual Studio sets the `InsertVisible` property to `false` only for auto-increment fields.</span></span> <span data-ttu-id="24b63-325">Les champs en lecture seule, tels que `CategoryName` et `SupplierName`, apparaît dans l’interface utilisateur de « mode insertion », sauf si leur `InsertVisible` propriété est définie explicitement sur `false`.</span><span class="sxs-lookup"><span data-stu-id="24b63-325">Read-only fields, like `CategoryName` and `SupplierName`, will be displayed in the "insert mode" user interface unless their `InsertVisible` property is explicitly set to `false`.</span></span> <span data-ttu-id="24b63-326">Prenez un moment pour définir ces deux champs `InsertVisible` propriétés à `false`, soit via la syntaxe déclarative de DetailsView ou modifier les champs lien dans la balise active.</span><span class="sxs-lookup"><span data-stu-id="24b63-326">Take a moment to set these two fields' `InsertVisible` properties to `false`, either through the DetailsView's declarative syntax or through the Edit Fields link in the smart tag.</span></span> <span data-ttu-id="24b63-327">Figure 19 montre l’attribution du `InsertVisible` propriétés à `false` en cliquant sur Modifier les champs lien.</span><span class="sxs-lookup"><span data-stu-id="24b63-327">Figure 19 shows setting the `InsertVisible` properties to `false` by clicking on the Edit Fields link.</span></span>


<span data-ttu-id="24b63-328">[![Northwind Traders propose désormais Acme thé](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image46.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image45.png)</span><span class="sxs-lookup"><span data-stu-id="24b63-328">[![Northwind Traders Now Offers Acme Tea](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image46.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image45.png)</span></span>

<span data-ttu-id="24b63-329">**Figure 19**: Northwind Traders maintenant offre Acme thé ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image47.png))</span><span class="sxs-lookup"><span data-stu-id="24b63-329">**Figure 19**: Northwind Traders Now Offers Acme Tea ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image47.png))</span></span>


<span data-ttu-id="24b63-330">Après avoir défini le `InsertVisible` propriétés, affichez le `Basics.aspx` page dans un navigateur et cliquez sur le bouton Nouveau.</span><span class="sxs-lookup"><span data-stu-id="24b63-330">After setting the `InsertVisible` properties, view the `Basics.aspx` page in a browser and click the New button.</span></span> <span data-ttu-id="24b63-331">La figure 20 montre le contrôle DetailsView lors de l’ajout d’une nouvelle boisson, thé Acme, à notre gamme de produits.</span><span class="sxs-lookup"><span data-stu-id="24b63-331">Figure 20 shows the DetailsView when adding a new beverage, Acme Tea, to our product line.</span></span>


<span data-ttu-id="24b63-332">[![Northwind Traders propose désormais Acme thé](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image49.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image48.png)</span><span class="sxs-lookup"><span data-stu-id="24b63-332">[![Northwind Traders Now Offers Acme Tea](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image49.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image48.png)</span></span>

<span data-ttu-id="24b63-333">**Figure 20**: Northwind Traders maintenant offre Acme thé ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image50.png))</span><span class="sxs-lookup"><span data-stu-id="24b63-333">**Figure 20**: Northwind Traders Now Offers Acme Tea ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image50.png))</span></span>


<span data-ttu-id="24b63-334">Après avoir saisi les détails pour Acme thé et en cliquant sur le bouton Insérer, s’ensuit une publication (postback) et le nouvel enregistrement est ajouté à la `Products` table de base de données.</span><span class="sxs-lookup"><span data-stu-id="24b63-334">After entering the details for Acme Tea and clicking the Insert button, a postback ensues and the new record is added to the `Products` database table.</span></span> <span data-ttu-id="24b63-335">Dans la mesure où cette DetailsView répertorie les produits dans l’ordre d’apparition dans la table de base de données, nous devons de page au dernier produit afin de voir le nouveau produit.</span><span class="sxs-lookup"><span data-stu-id="24b63-335">Since this DetailsView lists the products in order with which they exist in the database table, we must page to the last product in order to see the new product.</span></span>


<span data-ttu-id="24b63-336">[![Détails pour Acme thé](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image52.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image51.png)</span><span class="sxs-lookup"><span data-stu-id="24b63-336">[![Details for Acme Tea](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image52.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image51.png)</span></span>

<span data-ttu-id="24b63-337">**Figure 21**: Détails pour Acme thé ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image53.png))</span><span class="sxs-lookup"><span data-stu-id="24b63-337">**Figure 21**: Details for Acme Tea ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image53.png))</span></span>


> [!NOTE]
> <span data-ttu-id="24b63-338">Le DetailsView [CurrentMode propriété](https://msdn.microsoft.com/library/system.web.ui.webcontrols.detailsview.currentmode(VS.80).aspx) indique l’interface qui est affichée et peut prendre l’une des valeurs suivantes : `Edit`, `Insert`, ou `ReadOnly`.</span><span class="sxs-lookup"><span data-stu-id="24b63-338">The DetailsView's [CurrentMode property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.detailsview.currentmode(VS.80).aspx) indicates the interface being displayed and can be one of the following values: `Edit`, `Insert`, or `ReadOnly`.</span></span> <span data-ttu-id="24b63-339">Le [DefaultMode propriété](https://msdn.microsoft.com/library/system.web.ui.webcontrols.detailsview.defaultmode(VS.80).aspx) indique le mode de DetailsView reprend après une modification ou insérer est terminé et qu’il est utile pour afficher un contrôle DetailsView qui est définitivement en mode édition ou le mode d’insertion.</span><span class="sxs-lookup"><span data-stu-id="24b63-339">The [DefaultMode property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.detailsview.defaultmode(VS.80).aspx) indicates the mode the DetailsView returns to after an edit or insert has been completed and is useful for displaying a DetailsView that is permanently in edit or insert mode.</span></span>


<span data-ttu-id="24b63-340">Le point et cliquez sur Insertion et la modification des fonctionnalités de DetailsView d’être affectées par les mêmes limitations que le contrôle GridView : l’utilisateur doit entrer existant `CategoryID` et `SupplierID` valeurs dans une zone de texte ; les ne dispose pas de l’interface de logique de validation ; tous les champs de produit qui n’autorisent pas `NULL` valeurs ou vous n’avez pas une valeur par défaut valeur spécifiée au niveau de la base de données doit être inclus dans l’interface de l’insertion et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="24b63-340">The point and click inserting and editing capabilities of the DetailsView suffer from the same limitations as the GridView: the user must enter existing `CategoryID` and `SupplierID` values through a textbox; the interface lacks any validation logic; all product fields that do not allow `NULL` values or don't have a default value specified at the database level must be included in the inserting interface, and so on.</span></span>

<span data-ttu-id="24b63-341">Les techniques que nous allons examiner d’étendre et améliorer le contrôle GridView interface de modification dans les futures articles peuvent être appliquées pour le contrôle DetailsView modification des interfaces et d’insertion également.</span><span class="sxs-lookup"><span data-stu-id="24b63-341">The techniques we will examine for extending and enhancing the GridView's editing interface in future articles can be applied to the DetailsView control's editing and inserting interfaces as well.</span></span>

## <a name="using-the-formview-for-a-more-flexible-data-modification-user-interface"></a><span data-ttu-id="24b63-342">À l’aide de FormView pour une Interface utilisateur de Modification des données plus Flexible</span><span class="sxs-lookup"><span data-stu-id="24b63-342">Using the FormView for a More Flexible Data Modification User Interface</span></span>

<span data-ttu-id="24b63-343">Le contrôle FormView offre une prise en charge intégrée pour l’insertion, la modification et suppression de données, mais, car elle utilise des modèles au lieu de champs il n’existe aucun emplacement où ajouter le BoundFields ou le CommandField utilisés par les contrôles GridView et DetailsView pour fournir les données interface de modification.</span><span class="sxs-lookup"><span data-stu-id="24b63-343">The FormView offers built-in support for inserting, editing, and deleting data, but because it uses templates instead of fields there's no place to add the BoundFields or the CommandField used by the GridView and DetailsView controls to provide the data modification interface.</span></span> <span data-ttu-id="24b63-344">Au lieu de cela, cette interface, les contrôles Web pour la collecte utilisateur d’entrée lors de l’ajout d’un nouvel élément ou modifier un existant, ainsi que le nouveau, modifier, supprimer, insérer, mettre à jour et les boutons d’annulation doit être ajoutée manuellement aux modèles appropriés.</span><span class="sxs-lookup"><span data-stu-id="24b63-344">Instead, this interface the Web controls for collecting user input when adding a new item or editing an existing one along with the New, Edit, Delete, Insert, Update, and Cancel buttons must be added manually to the appropriate templates.</span></span> <span data-ttu-id="24b63-345">Heureusement, Visual Studio crée automatiquement l’interface nécessaire lors de la liaison FormView à une source de données via la liste déroulante dans sa balise active.</span><span class="sxs-lookup"><span data-stu-id="24b63-345">Fortunately, Visual Studio will automatically create the needed interface when binding the FormView to a data source through the drop-down list in its smart tag.</span></span>

<span data-ttu-id="24b63-346">Pour illustrer ces techniques, commencez par ajouter un FormView à la `Basics.aspx` page et, à partir de la balise active du FormView, liez-le à ObjectDataSource déjà créé.</span><span class="sxs-lookup"><span data-stu-id="24b63-346">To illustrate these techniques, start by adding a FormView to the `Basics.aspx` page and, from the FormView's smart tag, bind it to the ObjectDataSource already created.</span></span> <span data-ttu-id="24b63-347">Cela générera un `EditItemTemplate`, `InsertItemTemplate`, et `ItemTemplate` pour le contrôle FormView avec les contrôles Web de la zone de texte pour la collecte d’entrée et les contrôles Web de bouton de l’utilisateur pour la nouveau, modifier, supprimer, insérer, mettre à jour et les boutons d’annulation.</span><span class="sxs-lookup"><span data-stu-id="24b63-347">This will generate an `EditItemTemplate`, `InsertItemTemplate`, and `ItemTemplate` for the FormView with TextBox Web controls for collecting the user's input and Button Web controls for the New, Edit, Delete, Insert, Update, and Cancel buttons.</span></span> <span data-ttu-id="24b63-348">En outre, FormView `DataKeyNames` propriété est définie sur le champ de clé primaire (`ProductID`) de l’objet retourné par l’ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="24b63-348">Additionally, the FormView's `DataKeyNames` property is set to the primary key field (`ProductID`) of the object returned by the ObjectDataSource.</span></span> <span data-ttu-id="24b63-349">Enfin, vérifiez l’option Activer la pagination dans la balise active du FormView.</span><span class="sxs-lookup"><span data-stu-id="24b63-349">Lastly, check the Enable Paging option in the FormView's smart tag.</span></span>

<span data-ttu-id="24b63-350">L’exemple suivant montre le balisage déclaratif pour FormView `ItemTemplate` une fois que le contrôle FormView a été lié à ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="24b63-350">The following shows the declarative markup for the FormView's `ItemTemplate` after the FormView has been bound to the ObjectDataSource.</span></span> <span data-ttu-id="24b63-351">Par défaut, chaque champ de produit de valeur non booléenne est lié à la `Text` propriété d’un contrôle Web Label lors de chaque champ de valeur booléenne (`Discontinued`) est lié à la `Checked` propriété d’un contrôle de case à cocher Web désactivé.</span><span class="sxs-lookup"><span data-stu-id="24b63-351">By default, each non-Boolean value product field is bound to the `Text` property of a Label Web control while each Boolean value field (`Discontinued`) is bound to the `Checked` property of a disabled CheckBox Web control.</span></span> <span data-ttu-id="24b63-352">Dans l’ordre pour les boutons Nouveau, Edit et Delete déclencher certains comportements du FormView d’un clic, il est impératif que leurs `CommandName` valeurs `New`, `Edit`, et `Delete`, respectivement.</span><span class="sxs-lookup"><span data-stu-id="24b63-352">In order for the New, Edit, and Delete buttons to trigger certain FormView behavior when clicked, it is imperative that their `CommandName` values be set to `New`, `Edit`, and `Delete`, respectively.</span></span>


[!code-aspx[Main](an-overview-of-inserting-updating-and-deleting-data-cs/samples/sample8.aspx)]

<span data-ttu-id="24b63-353">La figure 22 montre le FormView `ItemTemplate` lorsqu’ils sont affichés via un navigateur.</span><span class="sxs-lookup"><span data-stu-id="24b63-353">Figure 22 shows the FormView's `ItemTemplate` when viewed through a browser.</span></span> <span data-ttu-id="24b63-354">Chaque champ de produit est répertorié avec les boutons Nouveau, Edit et Delete en bas.</span><span class="sxs-lookup"><span data-stu-id="24b63-354">Each product field is listed with the New, Edit, and Delete buttons at the bottom.</span></span>


<span data-ttu-id="24b63-355">[![L’ItemTemplate de FormView de défaut répertorie chaque champ de produit, ainsi que de nouveau, modifier et supprimer des boutons](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image55.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image54.png)</span><span class="sxs-lookup"><span data-stu-id="24b63-355">[![The Defaut FormView ItemTemplate Lists Each Product Field Along with New, Edit, and Delete Buttons](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image55.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image54.png)</span></span>

<span data-ttu-id="24b63-356">**Figure 22**: défaut FormView `ItemTemplate` répertorie chaque produit champ sur un nouveau, modifier et supprimer des boutons ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image56.png))</span><span class="sxs-lookup"><span data-stu-id="24b63-356">**Figure 22**: The Defaut FormView `ItemTemplate` Lists Each Product Field Along with New, Edit, and Delete Buttons ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image56.png))</span></span>


<span data-ttu-id="24b63-357">Comme avec les contrôles GridView et DetailsView, en cliquant sur le bouton Supprimer ou n’importe quel bouton, LinkButton ou ImageButton dont `CommandName` propriété est définie sur les causes de supprimer une publication (postback), remplit l’ObjectDataSource `DeleteParameters` selon le FormView `DataKeyNames`valeur et appelle l’ObjectDataSource `Delete()` (méthode).</span><span class="sxs-lookup"><span data-stu-id="24b63-357">Like with the GridView and DetailsView, clicking the Delete button or any Button, LinkButton, or ImageButton whose `CommandName` property is set to Delete causes a postback, populates the ObjectDataSource's `DeleteParameters` based on the FormView's `DataKeyNames` value, and invokes the ObjectDataSource's `Delete()` method.</span></span>

<span data-ttu-id="24b63-358">Lorsque l’utilisateur clique sur le bouton Modifier s’ensuit une publication (postback) et les données sont de nouveau liées à la `EditItemTemplate`, qui est responsable du rendu de l’interface de modification.</span><span class="sxs-lookup"><span data-stu-id="24b63-358">When the Edit button is clicked a postback ensues and the data is rebound to the `EditItemTemplate`, which is responsible for rendering the editing interface.</span></span> <span data-ttu-id="24b63-359">Cette interface inclut les contrôles Web pour la modification des données, ainsi que les boutons de la mise à jour et Annuler.</span><span class="sxs-lookup"><span data-stu-id="24b63-359">This interface includes the Web controls for editing data along with the Update and Cancel buttons.</span></span> <span data-ttu-id="24b63-360">La valeur par défaut `EditItemTemplate` généré par Visual Studio contient une étiquette pour tous les champs incrémentation automatique (`ProductID`), une zone de texte pour chaque champ de valeur non booléenne et une case à cocher pour chaque champ de valeur booléenne.</span><span class="sxs-lookup"><span data-stu-id="24b63-360">The default `EditItemTemplate` generated by Visual Studio contains a Label for any auto-increment fields (`ProductID`), a TextBox for each non-Boolean value field, and a CheckBox for each Boolean value field.</span></span> <span data-ttu-id="24b63-361">Ce comportement est très similaire à la BoundFields généré automatiquement dans les contrôles GridView et DetailsView.</span><span class="sxs-lookup"><span data-stu-id="24b63-361">This behavior is very similar to the auto-generated BoundFields in the GridView and DetailsView controls.</span></span>

> [!NOTE]
> <span data-ttu-id="24b63-362">Un petit problème de la génération FormView automatique de la `EditItemTemplate` est qu’elle s’affiche à Web de la zone de texte pour les champs qui sont en lecture seule, telles que les contrôles `CategoryName` et `SupplierName`.</span><span class="sxs-lookup"><span data-stu-id="24b63-362">One small issue with the FormView's auto-generation of the `EditItemTemplate` is that it renders TextBox Web controls for those fields that are read-only, such as `CategoryName` and `SupplierName`.</span></span> <span data-ttu-id="24b63-363">Nous verrons comment tenir compte de ce peu de temps.</span><span class="sxs-lookup"><span data-stu-id="24b63-363">We'll see how to account for this shortly.</span></span>


<span data-ttu-id="24b63-364">Contrôle de la zone de texte dans le `EditItemTemplate` ont leur `Text` propriété liée à la valeur de leur champ de données correspondant à l’aide *liaison de données bidirectionnelle*.</span><span class="sxs-lookup"><span data-stu-id="24b63-364">The TextBox controls in the `EditItemTemplate` have their `Text` property bound to the value of their corresponding data field using *two-way databinding*.</span></span> <span data-ttu-id="24b63-365">Liaison de données bidirectionnelle, dénoté par `<%# Bind("dataField") %>`, effectue la liaison de données à la fois lors de la liaison de données au modèle et lors du remplissage des paramètres de l’ObjectDataSource d’insertion ou modification d’enregistrements.</span><span class="sxs-lookup"><span data-stu-id="24b63-365">Two-way databinding, denoted by `<%# Bind("dataField") %>`, performs databinding both when binding data to the template and when populating the ObjectDataSource's parameters for inserting or editing records.</span></span> <span data-ttu-id="24b63-366">Autrement dit, lorsque l’utilisateur clique sur le bouton Modifier à partir de la `ItemTemplate`, le `Bind()` méthode retourne la valeur de champ de données spécifié.</span><span class="sxs-lookup"><span data-stu-id="24b63-366">That is, when the user clicks the Edit button from the `ItemTemplate`, the `Bind()` method returns the specified data field value.</span></span> <span data-ttu-id="24b63-367">Une fois que l’utilisateur modifie leur et clique sur mise à jour, les valeurs publiée qui correspondent aux champs de données spécifiés à l’aide `Bind()` sont appliquées à l’ObjectDataSource `UpdateParameters`.</span><span class="sxs-lookup"><span data-stu-id="24b63-367">After the user makes their changes and clicks Update, the values posted back that correspond to the data fields specified using `Bind()` are applied to the ObjectDataSource's `UpdateParameters`.</span></span> <span data-ttu-id="24b63-368">Ou bien, liaison de données unidirectionnelle, dénoté par `<%# Eval("dataField") %>`, uniquement récupère les valeurs de champ de données lors de la liaison de données au modèle l’et *pas* retourner les valeurs entrées par l’utilisateur aux paramètres de la source de données de publication (postback).</span><span class="sxs-lookup"><span data-stu-id="24b63-368">Alternatively, one-way databinding, denoted by `<%# Eval("dataField") %>`, only retrieves the data field values when binding data to the template and does *not* return the user-entered values to the data source's parameters on postback.</span></span>

<span data-ttu-id="24b63-369">Le balisage déclaratif suivant montre le FormView `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="24b63-369">The following declarative markup shows the FormView's `EditItemTemplate`.</span></span> <span data-ttu-id="24b63-370">Notez que le `Bind()` méthode est utilisée dans la syntaxe de liaison de données ici et qui ont les contrôles de mise à jour et Web de bouton Annuler leur `CommandName` propriétés définies en conséquence.</span><span class="sxs-lookup"><span data-stu-id="24b63-370">Note that the `Bind()` method is used in the databinding syntax here and that the Update and Cancel Button Web controls have their `CommandName` properties set accordingly.</span></span>

[!code-aspx[Main](an-overview-of-inserting-updating-and-deleting-data-cs/samples/sample9.aspx)]

<span data-ttu-id="24b63-371">Notre `EditItemTemplate`, à ce point, provoquera une exception levée si nous tentons de l’utiliser.</span><span class="sxs-lookup"><span data-stu-id="24b63-371">Our `EditItemTemplate`, at this point, will cause an exception to be thrown if we attempt to use it.</span></span> <span data-ttu-id="24b63-372">Le problème est que le `CategoryName` et `SupplierName` les champs sont rendus en tant que contrôles de zone de texte Web dans le `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="24b63-372">The problem is that the `CategoryName` and `SupplierName` fields are rendered as TextBox Web controls in the `EditItemTemplate`.</span></span> <span data-ttu-id="24b63-373">Nous devons soit modifier ces zones de texte en étiquettes ou les supprimer complètement.</span><span class="sxs-lookup"><span data-stu-id="24b63-373">We either need to change these TextBoxes to Labels or remove them altogether.</span></span> <span data-ttu-id="24b63-374">Nous allons simplement les supprimer entièrement à partir de la `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="24b63-374">Let's simply delete them entirely from the `EditItemTemplate`.</span></span>

<span data-ttu-id="24b63-375">Figure 23 montre le FormView dans un navigateur une fois que le bouton Modifier a été cliqué pour Tran.</span><span class="sxs-lookup"><span data-stu-id="24b63-375">Figure 23 shows the FormView in a browser after the Edit button has been clicked for Chai.</span></span> <span data-ttu-id="24b63-376">Notez que le `SupplierName` et `CategoryName` champs affichés dans le `ItemTemplate` ne sont plus présents, comme nous vient d’être supprimée à partir du `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="24b63-376">Note that the `SupplierName` and `CategoryName` fields shown in the `ItemTemplate` are no longer present, as we just removed them from the `EditItemTemplate`.</span></span> <span data-ttu-id="24b63-377">Lorsque l’utilisateur clique sur le bouton de mise à jour le contrôle FormView se poursuit dans la même séquence d’étapes que les contrôles GridView et DetailsView.</span><span class="sxs-lookup"><span data-stu-id="24b63-377">When the Update button is clicked the FormView proceeds through the same sequence of steps as the GridView and DetailsView controls.</span></span>


<span data-ttu-id="24b63-378">[![Par défaut EditItemTemplate affiche chaque champ modifiable produit comme une zone de texte ou une case à cocher](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image58.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image57.png)</span><span class="sxs-lookup"><span data-stu-id="24b63-378">[![By Default the EditItemTemplate Shows Each Editable Product Field as a TextBox or CheckBox](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image58.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image57.png)</span></span>

<span data-ttu-id="24b63-379">**Figure 23**: Par défaut le `EditItemTemplate` montre chaque produit champ modifiable en tant que zone de texte ou case à cocher ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image59.png))</span><span class="sxs-lookup"><span data-stu-id="24b63-379">**Figure 23**: By Default the `EditItemTemplate` Shows Each Editable Product Field as a TextBox or CheckBox ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image59.png))</span></span>


<span data-ttu-id="24b63-380">Lorsque le bouton Insérer un clic sur le FormView `ItemTemplate` s’ensuit une publication (postback).</span><span class="sxs-lookup"><span data-stu-id="24b63-380">When the Insert button is clicked the FormView's `ItemTemplate` a postback ensues.</span></span> <span data-ttu-id="24b63-381">Toutefois, aucune donnée n’est liée à FormView, car un nouvel enregistrement est ajouté.</span><span class="sxs-lookup"><span data-stu-id="24b63-381">However, no data is bound to the FormView because a new record is being added.</span></span> <span data-ttu-id="24b63-382">Le `InsertItemTemplate` interface inclut les contrôles Web pour ajouter un nouvel enregistrement, ainsi que les boutons Insérer et Annuler.</span><span class="sxs-lookup"><span data-stu-id="24b63-382">The `InsertItemTemplate` interface includes the Web controls for adding a new record along with the Insert and Cancel buttons.</span></span> <span data-ttu-id="24b63-383">La valeur par défaut `InsertItemTemplate` généré par Visual Studio contient une zone de texte pour chaque champ de valeur non booléenne et une case à cocher pour chaque champ de valeur booléenne, semblable à générées automatiquement `EditItemTemplate`de l’interface.</span><span class="sxs-lookup"><span data-stu-id="24b63-383">The default `InsertItemTemplate` generated by Visual Studio contains a TextBox for each non-Boolean value field and a CheckBox for each Boolean value field, similar to the auto-generated `EditItemTemplate`'s interface.</span></span> <span data-ttu-id="24b63-384">Les contrôles de zone de texte ont leur `Text` propriété liée à la valeur de leur champ de données correspondant à l’aide de la liaison de données bidirectionnelle.</span><span class="sxs-lookup"><span data-stu-id="24b63-384">The TextBox controls have their `Text` property bound to the value of their corresponding data field using two-way databinding.</span></span>

<span data-ttu-id="24b63-385">Le balisage déclaratif suivant montre le FormView `InsertItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="24b63-385">The following declarative markup shows the FormView's `InsertItemTemplate`.</span></span> <span data-ttu-id="24b63-386">Notez que le `Bind()` méthode est utilisée dans la syntaxe de liaison de données ici et qui ont les contrôles d’insertion et Web de bouton Annuler leur `CommandName` propriétés définies en conséquence.</span><span class="sxs-lookup"><span data-stu-id="24b63-386">Note that the `Bind()` method is used in the databinding syntax here and that the Insert and Cancel Button Web controls have their `CommandName` properties set accordingly.</span></span>


[!code-aspx[Main](an-overview-of-inserting-updating-and-deleting-data-cs/samples/sample10.aspx)]

<span data-ttu-id="24b63-387">Il existe une subtilité avec la génération FormView automatique de la `InsertItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="24b63-387">There's a subtlety with the FormView's auto-generation of the `InsertItemTemplate`.</span></span> <span data-ttu-id="24b63-388">Plus précisément, les contrôles Web de la zone de texte sont créés même pour les champs qui sont en lecture seule, telles que `CategoryName` et `SupplierName`.</span><span class="sxs-lookup"><span data-stu-id="24b63-388">Specifically, the TextBox Web controls are created even for those fields that are read-only, such as `CategoryName` and `SupplierName`.</span></span> <span data-ttu-id="24b63-389">Comme avec la `EditItemTemplate`, nous devons supprimer ces zones de texte à partir de la `InsertItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="24b63-389">Like with the `EditItemTemplate`, we need to remove these TextBoxes from the `InsertItemTemplate`.</span></span>

<span data-ttu-id="24b63-390">Figure 24 montre le contrôle FormView dans un navigateur lorsque vous ajoutez un nouveau produit, Acme café.</span><span class="sxs-lookup"><span data-stu-id="24b63-390">Figure 24 shows the FormView in a browser when adding a new product, Acme Coffee.</span></span> <span data-ttu-id="24b63-391">Notez que le `SupplierName` et `CategoryName` champs affichés dans le `ItemTemplate` ne sont plus présents, comme nous vient d’être supprimée.</span><span class="sxs-lookup"><span data-stu-id="24b63-391">Note that the `SupplierName` and `CategoryName` fields shown in the `ItemTemplate` are no longer present, as we just removed them.</span></span> <span data-ttu-id="24b63-392">Clic sur le bouton Insérer le continue FormView via la même séquence d’étapes que le contrôle DetailsView, ajouter un nouvel enregistrement à la `Products` table.</span><span class="sxs-lookup"><span data-stu-id="24b63-392">When the Insert button is clicked the FormView proceeds through the same sequence of steps as the DetailsView control, adding a new record to the `Products` table.</span></span> <span data-ttu-id="24b63-393">La figure 25 illustre les détails du produit Acme Coffee dans le contrôle FormView après que qu’il a été inséré.</span><span class="sxs-lookup"><span data-stu-id="24b63-393">Figure 25 shows Acme Coffee product's details in the FormView after it has been inserted.</span></span>


<span data-ttu-id="24b63-394">[![L’élément InsertItemTemplate dicte FormView insertion d’Interface](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image61.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image60.png)</span><span class="sxs-lookup"><span data-stu-id="24b63-394">[![The InsertItemTemplate Dictates the FormView's Inserting Interface](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image61.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image60.png)</span></span>

<span data-ttu-id="24b63-395">**Figure 24**: Le `InsertItemTemplate` détermine l’Interface d’insertion de FormView ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image62.png))</span><span class="sxs-lookup"><span data-stu-id="24b63-395">**Figure 24**: The `InsertItemTemplate` Dictates the FormView's Inserting Interface ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image62.png))</span></span>


<span data-ttu-id="24b63-396">[![Les détails pour le nouveau produit, café Acme, sont affichés dans le contrôle FormView](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image64.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image63.png)</span><span class="sxs-lookup"><span data-stu-id="24b63-396">[![The Details for New Product, Acme Coffee, are Displayed in the FormView](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image64.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image63.png)</span></span>

<span data-ttu-id="24b63-397">**Figure 25**: Les détails pour le nouveau produit, café Acme, sont affichés dans le contrôle FormView ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image65.png))</span><span class="sxs-lookup"><span data-stu-id="24b63-397">**Figure 25**: The Details for New Product, Acme Coffee, are Displayed in the FormView ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image65.png))</span></span>


<span data-ttu-id="24b63-398">En les répartissant en lecture seule, par édition et insertion des interfaces dans les trois modèles distincts, le contrôle FormView permet un meilleur niveau de contrôle sur ces interfaces que le contrôle DetailsView et GridView.</span><span class="sxs-lookup"><span data-stu-id="24b63-398">By separating out the read-only, editing, and inserting interfaces into three separate templates, the FormView allows for a finer degree of control over these interfaces than the DetailsView and GridView.</span></span>

> [!NOTE]
> <span data-ttu-id="24b63-399">Comme le contrôle DetailsView, FormView `CurrentMode` propriété indique l’interface qui est affichée et son `DefaultMode` propriété indique le mode le retourne FormView à après une modification ou d’insertion a été effectuée.</span><span class="sxs-lookup"><span data-stu-id="24b63-399">Like the DetailsView, the FormView's `CurrentMode` property indicates the interface being displayed and its `DefaultMode` property indicates the mode the FormView returns to after an edit or insert has been completed.</span></span>


## <a name="summary"></a><span data-ttu-id="24b63-400">Récapitulatif</span><span class="sxs-lookup"><span data-stu-id="24b63-400">Summary</span></span>

<span data-ttu-id="24b63-401">Dans ce didacticiel, nous avons examiné les principes fondamentaux de l’insertion, la modification et la suppression des données à l’aide de la GridView, DetailsView et FormView.</span><span class="sxs-lookup"><span data-stu-id="24b63-401">In this tutorial we examined the basics of inserting, editing, and deleting data using the GridView, DetailsView, and FormView.</span></span> <span data-ttu-id="24b63-402">Trois de ces contrôles fournissent un certain niveau de fonctionnalités de modification de données intégré qui peut être utilisée sans écrire une seule ligne de code dans la page ASP.NET grâce aux contrôles data Web et de l’ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="24b63-402">All three of these controls provide some level of built-in data modification capabilities that can be utilized without writing a single line of code in the ASP.NET page thanks to the data Web controls and the ObjectDataSource.</span></span> <span data-ttu-id="24b63-403">Toutefois, le simple pointez et cliquez sur les techniques rendu assez fragiles et interface utilisateur de modification des données naïve.</span><span class="sxs-lookup"><span data-stu-id="24b63-403">However, the simple point and click techniques render a fairly frail and naïve data modification user interface.</span></span> <span data-ttu-id="24b63-404">Pour fournir la validation, injecter des valeurs par programmation, gérer correctement les exceptions, personnaliser l’interface utilisateur, et ainsi de suite, nous allons devoir s’appuient sur une multitude de techniques qui nous reviendrons sur les didacticiels plusieurs suivants.</span><span class="sxs-lookup"><span data-stu-id="24b63-404">To provide validation, inject programmatic values, gracefully handle exceptions, customize the user interface, and so on, we'll need to rely on a bevy of techniques that will be discussed over the next several tutorials.</span></span>

<span data-ttu-id="24b63-405">Bonne programmation !</span><span class="sxs-lookup"><span data-stu-id="24b63-405">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="24b63-406">À propos de l’auteur</span><span class="sxs-lookup"><span data-stu-id="24b63-406">About the Author</span></span>

<span data-ttu-id="24b63-407">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), auteur de sept les livres sur ASP/ASP.NET et fondateur de [4GuysFromRolla.com](http://www.4guysfromrolla.com), travaille avec les technologies Web Microsoft depuis 1998.</span><span class="sxs-lookup"><span data-stu-id="24b63-407">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="24b63-408">Scott fonctionne comme un consultant indépendant, formateur et writer.</span><span class="sxs-lookup"><span data-stu-id="24b63-408">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="24b63-409">Son dernier ouvrage est [*SAM animer vous-même ASP.NET 2.0 des dernières 24 heures*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="24b63-409">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="24b63-410">Il peut être contacté à [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="24b63-410">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="24b63-411">ou via son blog, qui se trouve à [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="24b63-411">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="24b63-412">Next</span><span class="sxs-lookup"><span data-stu-id="24b63-412">Next</span></span>](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md)

---
uid: web-forms/overview/data-access/editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs
title: Vue d’ensemble de l’insertion, de la mise à jourC#et de la suppression de données () | Microsoft Docs
author: rick-anderson
description: Dans ce didacticiel, nous allons voir comment mapper les méthodes Insert (), Update () et Delete () d’ObjectDataSource aux méthodes des classes BLL, ainsi qu’à la configuration...
ms.author: riande
ms.date: 07/17/2006
ms.assetid: b651dc58-93c7-4f83-a74e-3b99f6d60848
msc.legacyurl: /web-forms/overview/data-access/editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs
msc.type: authoredcontent
ms.openlocfilehash: e26b8e841f86272a158b0c09b62ab2790d01d191
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/28/2019
ms.locfileid: "74571477"
---
# <a name="an-overview-of-inserting-updating-and-deleting-data-c"></a><span data-ttu-id="a9fde-103">Vue d’ensemble de l’insertion, de la mise à jourC#et de la suppression de données ()</span><span class="sxs-lookup"><span data-stu-id="a9fde-103">An Overview of Inserting, Updating, and Deleting Data (C#)</span></span>

<span data-ttu-id="a9fde-104">par [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="a9fde-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="a9fde-105">[Télécharger l’exemple d’application](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_16_CS.exe) ou [Télécharger le PDF](an-overview-of-inserting-updating-and-deleting-data-cs/_static/datatutorial16cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="a9fde-105">[Download Sample App](https://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_16_CS.exe) or [Download PDF](an-overview-of-inserting-updating-and-deleting-data-cs/_static/datatutorial16cs1.pdf)</span></span>

> <span data-ttu-id="a9fde-106">Dans ce didacticiel, nous allons apprendre à mapper les méthodes Insert (), Update () et Delete () d’ObjectDataSource aux méthodes des classes BLL, ainsi qu’à configurer les contrôles GridView, DetailsView et FormView pour fournir des fonctionnalités de modification de données.</span><span class="sxs-lookup"><span data-stu-id="a9fde-106">In this tutorial we'll see how to map an ObjectDataSource's Insert(), Update(), and Delete() methods to the methods of BLL classes, as well as how to configure the GridView, DetailsView, and FormView controls to provide data modification capabilities.</span></span>

## <a name="introduction"></a><span data-ttu-id="a9fde-107">Introduction</span><span class="sxs-lookup"><span data-stu-id="a9fde-107">Introduction</span></span>

<span data-ttu-id="a9fde-108">Au cours des quelques didacticiels précédents, nous avons examiné comment afficher des données dans une page ASP.NET à l’aide des contrôles GridView, DetailsView et FormView.</span><span class="sxs-lookup"><span data-stu-id="a9fde-108">Over the past several tutorials we've examined how to display data in an ASP.NET page using the GridView, DetailsView, and FormView controls.</span></span> <span data-ttu-id="a9fde-109">Ces contrôles fonctionnent simplement avec les données qui leur sont fournies.</span><span class="sxs-lookup"><span data-stu-id="a9fde-109">These controls simply work with data supplied to them.</span></span> <span data-ttu-id="a9fde-110">En règle générale, ces contrôles accèdent aux données via l’utilisation d’un contrôle de source de données, tel que ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="a9fde-110">Commonly, these controls access data through the use of a data source control, such as the ObjectDataSource.</span></span> <span data-ttu-id="a9fde-111">Nous avons vu comment l’ObjectDataSource agit comme un proxy entre la page ASP.NET et les données sous-jacentes.</span><span class="sxs-lookup"><span data-stu-id="a9fde-111">We've seen how the ObjectDataSource acts as a proxy between the ASP.NET page and the underlying data.</span></span> <span data-ttu-id="a9fde-112">Quand un GridView doit afficher des données, il appelle la méthode de `Select()` ObjectDataSource, qui à son tour appelle une méthode à partir de notre couche BLL (Business Logic Layer), qui appelle une méthode dans le TableAdapter de la couche d’accès aux données (DAL) approprié, qui à son tour envoie une requête `SELECT` à la base de données Northwind.</span><span class="sxs-lookup"><span data-stu-id="a9fde-112">When a GridView needs to display data, it invokes its ObjectDataSource's `Select()` method, which in turn invokes a method from our Business Logic Layer (BLL), which calls a method in the appropriate Data Access Layer's (DAL) TableAdapter, which in turn sends a `SELECT` query to the Northwind database.</span></span>

<span data-ttu-id="a9fde-113">Rappelez-vous que lorsque nous avons créé les TableAdapters dans la couche DAL de [notre premier didacticiel](../introduction/creating-a-data-access-layer-cs.md), Visual Studio ajoutait automatiquement des méthodes pour insérer, mettre à jour et supprimer des données de la table de base de données sous-jacente.</span><span class="sxs-lookup"><span data-stu-id="a9fde-113">Recall that when we created the TableAdapters in the DAL in [our first tutorial](../introduction/creating-a-data-access-layer-cs.md), Visual Studio automatically added methods for inserting, updating, and deleting data from the underlying database table.</span></span> <span data-ttu-id="a9fde-114">En outre, lors de la [création d’une couche de logique métier](../introduction/creating-a-business-logic-layer-cs.md) , nous avons conçu des méthodes dans la couche BLL qui étaient appelées dans ces méthodes de modification de données.</span><span class="sxs-lookup"><span data-stu-id="a9fde-114">Moreover, in [Creating a Business Logic Layer](../introduction/creating-a-business-logic-layer-cs.md) we designed methods in the BLL that called down into these data modification DAL methods.</span></span>

<span data-ttu-id="a9fde-115">En plus de sa méthode `Select()`, ObjectDataSource possède également des méthodes `Insert()`, `Update()`et `Delete()`.</span><span class="sxs-lookup"><span data-stu-id="a9fde-115">In addition to its `Select()` method, the ObjectDataSource also has `Insert()`, `Update()`, and `Delete()` methods.</span></span> <span data-ttu-id="a9fde-116">À l’instar de la méthode `Select()`, ces trois méthodes peuvent être mappées à des méthodes dans un objet sous-jacent.</span><span class="sxs-lookup"><span data-stu-id="a9fde-116">Like the `Select()` method, these three methods can be mapped to methods in an underlying object.</span></span> <span data-ttu-id="a9fde-117">Lorsqu’ils sont configurés pour insérer, mettre à jour ou supprimer des données, les contrôles GridView, DetailsView et FormView fournissent une interface utilisateur pour modifier les données sous-jacentes.</span><span class="sxs-lookup"><span data-stu-id="a9fde-117">When configured to insert, update, or delete data, the GridView, DetailsView, and FormView controls provide a user interface for modifying the underlying data.</span></span> <span data-ttu-id="a9fde-118">Cette interface utilisateur appelle les méthodes `Insert()`, `Update()`et `Delete()` de l’ObjectDataSource, qui appelle ensuite les méthodes associées à l’objet sous-jacent (voir la figure 1).</span><span class="sxs-lookup"><span data-stu-id="a9fde-118">This user interface calls the `Insert()`, `Update()`, and `Delete()` methods of the ObjectDataSource, which then invoke the underlying object's associated methods (see Figure 1).</span></span>

<span data-ttu-id="a9fde-119">[![les méthodes Insert (), Update () et Delete () de ObjectDataSource servent de proxy dans la couche BLL](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image2.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="a9fde-119">[![The ObjectDataSource's Insert(), Update(), and Delete() Methods Serve as a Proxy into the BLL](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image2.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image1.png)</span></span>

<span data-ttu-id="a9fde-120">**Figure 1**: les méthodes `Insert()`, `Update()`et `Delete()` de l’ObjectDataSource servent de proxy dans la couche BLL ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="a9fde-120">**Figure 1**: The ObjectDataSource's `Insert()`, `Update()`, and `Delete()` Methods Serve as a Proxy into the BLL ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image3.png))</span></span>

<span data-ttu-id="a9fde-121">Dans ce didacticiel, nous allons apprendre à mapper les méthodes `Insert()`, `Update()`et `Delete()` de l’ObjectDataSource aux méthodes des classes de la couche BLL, ainsi qu’à configurer les contrôles GridView, DetailsView et FormView pour fournir des fonctionnalités de modification de données.</span><span class="sxs-lookup"><span data-stu-id="a9fde-121">In this tutorial we'll see how to map the ObjectDataSource's `Insert()`, `Update()`, and `Delete()` methods to methods of classes in the BLL, as well as how to configure the GridView, DetailsView, and FormView controls to provide data modification capabilities.</span></span>

## <a name="step-1-creating-the-insert-update-and-delete-tutorials-web-pages"></a><span data-ttu-id="a9fde-122">Étape 1 : création des pages Web des didacticiels d’insertion, de mise à jour et de suppression</span><span class="sxs-lookup"><span data-stu-id="a9fde-122">Step 1: Creating the Insert, Update, and Delete Tutorials Web Pages</span></span>

<span data-ttu-id="a9fde-123">Avant de commencer à explorer l’insertion, la mise à jour et la suppression des données, commençons par prendre un moment pour créer les pages ASP.NET dans notre projet de site Web dont nous aurons besoin pour ce didacticiel et les autres.</span><span class="sxs-lookup"><span data-stu-id="a9fde-123">Before we start exploring how to insert, update, and delete data, let's first take a moment to create the ASP.NET pages in our website project that we'll need for this tutorial and the next several ones.</span></span> <span data-ttu-id="a9fde-124">Commencez par ajouter un nouveau dossier nommé `EditInsertDelete`.</span><span class="sxs-lookup"><span data-stu-id="a9fde-124">Start by adding a new folder named `EditInsertDelete`.</span></span> <span data-ttu-id="a9fde-125">Ajoutez ensuite les pages ASP.NET suivantes à ce dossier, en veillant à associer chaque page à la page maître `Site.master` :</span><span class="sxs-lookup"><span data-stu-id="a9fde-125">Next, add the following ASP.NET pages to that folder, making sure to associate each page with the `Site.master` master page:</span></span>

- `Default.aspx`
- `Basics.aspx`
- `DataModificationEvents.aspx`
- `ErrorHandling.aspx`
- `UIValidation.aspx`
- `CustomizedUI.aspx`
- `OptimisticConcurrency.aspx`
- `ConfirmationOnDelete.aspx`
- `UserLevelAccess.aspx`

![Ajouter les pages ASP.NET pour les didacticiels relatifs à la modification des données](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image4.png)

<span data-ttu-id="a9fde-127">**Figure 2**: ajouter les pages ASP.net pour les didacticiels relatifs à la modification des données</span><span class="sxs-lookup"><span data-stu-id="a9fde-127">**Figure 2**: Add the ASP.NET Pages for the Data Modification-Related Tutorials</span></span>

<span data-ttu-id="a9fde-128">Comme dans les autres dossiers, `Default.aspx` dans le dossier `EditInsertDelete` répertorie les didacticiels de la section.</span><span class="sxs-lookup"><span data-stu-id="a9fde-128">Like in the other folders, `Default.aspx` in the `EditInsertDelete` folder will list the tutorials in its section.</span></span> <span data-ttu-id="a9fde-129">N’oubliez pas que le contrôle utilisateur `SectionLevelTutorialListing.ascx` fournit cette fonctionnalité.</span><span class="sxs-lookup"><span data-stu-id="a9fde-129">Recall that the `SectionLevelTutorialListing.ascx` User Control provides this functionality.</span></span> <span data-ttu-id="a9fde-130">Par conséquent, ajoutez ce contrôle utilisateur à `Default.aspx` en le faisant glisser de l’Explorateur de solutions sur le Mode Création de la page.</span><span class="sxs-lookup"><span data-stu-id="a9fde-130">Therefore, add this User Control to `Default.aspx` by dragging it from the Solution Explorer onto the page's Design view.</span></span>

<span data-ttu-id="a9fde-131">[![ajouter le contrôle utilisateur SectionLevelTutorialListing. ascx à default. aspx](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image6.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="a9fde-131">[![Add the SectionLevelTutorialListing.ascx User Control to Default.aspx](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image6.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image5.png)</span></span>

<span data-ttu-id="a9fde-132">**Figure 3**: ajouter le contrôle utilisateur `SectionLevelTutorialListing.ascx` à `Default.aspx` ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image7.png))</span><span class="sxs-lookup"><span data-stu-id="a9fde-132">**Figure 3**: Add the `SectionLevelTutorialListing.ascx` User Control to `Default.aspx` ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image7.png))</span></span>

<span data-ttu-id="a9fde-133">Enfin, ajoutez les pages en tant qu’entrées au fichier `Web.sitemap`.</span><span class="sxs-lookup"><span data-stu-id="a9fde-133">Lastly, add the pages as entries to the `Web.sitemap` file.</span></span> <span data-ttu-id="a9fde-134">Plus précisément, ajoutez le balisage suivant après la `<siteMapNode>`de mise en forme personnalisée :</span><span class="sxs-lookup"><span data-stu-id="a9fde-134">Specifically, add the following markup after the Customized Formatting `<siteMapNode>`:</span></span>

[!code-xml[Main](an-overview-of-inserting-updating-and-deleting-data-cs/samples/sample1.xml)]

<span data-ttu-id="a9fde-135">Après avoir mis à jour `Web.sitemap`, prenez un moment pour afficher le site Web des didacticiels via un navigateur.</span><span class="sxs-lookup"><span data-stu-id="a9fde-135">After updating `Web.sitemap`, take a moment to view the tutorials website through a browser.</span></span> <span data-ttu-id="a9fde-136">Le menu à gauche contient maintenant des éléments pour les didacticiels de modification, d’insertion et de suppression.</span><span class="sxs-lookup"><span data-stu-id="a9fde-136">The menu on the left now includes items for the editing, inserting, and deleting tutorials.</span></span>

![Le plan de site comprend désormais des entrées pour les didacticiels de modification, d’insertion et de suppression](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image8.png)

<span data-ttu-id="a9fde-138">**Figure 4**: le plan de site contient maintenant des entrées pour les didacticiels de modification, d’insertion et de suppression</span><span class="sxs-lookup"><span data-stu-id="a9fde-138">**Figure 4**: The Site Map Now Includes Entries for the Editing, Inserting, and Deleting Tutorials</span></span>

## <a name="step-2-adding-and-configuring-the-objectdatasource-control"></a><span data-ttu-id="a9fde-139">Étape 2 : ajout et configuration du contrôle ObjectDataSource</span><span class="sxs-lookup"><span data-stu-id="a9fde-139">Step 2: Adding and Configuring the ObjectDataSource Control</span></span>

<span data-ttu-id="a9fde-140">Étant donné que GridView, DetailsView et FormView diffèrent chacun dans leurs fonctionnalités de modification de données et leur disposition, examinons chacune d’elles individuellement.</span><span class="sxs-lookup"><span data-stu-id="a9fde-140">Since the GridView, DetailsView, and FormView each differ in their data modification capabilities and layout, let's examine each one individually.</span></span> <span data-ttu-id="a9fde-141">Plutôt que de faire en sorte que chaque contrôle utilise son propre ObjectDataSource, nous allons simplement créer un ObjectDataSource unique que les trois exemples de contrôle peuvent partager.</span><span class="sxs-lookup"><span data-stu-id="a9fde-141">Rather than have each control using its own ObjectDataSource, however, let's just create a single ObjectDataSource that all three control examples can share.</span></span>

<span data-ttu-id="a9fde-142">Ouvrez la page `Basics.aspx`, faites glisser un ObjectDataSource de la boîte à outils vers le concepteur, puis cliquez sur le lien configurer la source de données à partir de sa balise active.</span><span class="sxs-lookup"><span data-stu-id="a9fde-142">Open the `Basics.aspx` page, drag an ObjectDataSource from the Toolbox onto the Designer, and click the Configure Data Source link from its smart tag.</span></span> <span data-ttu-id="a9fde-143">Étant donné que le `ProductsBLL` est la seule classe BLL qui fournit des méthodes d’édition, d’insertion et de suppression, configurez le ObjectDataSource pour utiliser cette classe.</span><span class="sxs-lookup"><span data-stu-id="a9fde-143">Since the `ProductsBLL` is the only BLL class that provides editing, inserting, and deleting methods, configure the ObjectDataSource to use this class.</span></span>

<span data-ttu-id="a9fde-144">[![configurer ObjectDataSource pour utiliser la classe ProductsBLL](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image10.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="a9fde-144">[![Configure the ObjectDataSource to Use the ProductsBLL Class](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image10.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image9.png)</span></span>

<span data-ttu-id="a9fde-145">**Figure 5**: configurer ObjectDataSource pour utiliser la classe `ProductsBLL` ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="a9fde-145">**Figure 5**: Configure the ObjectDataSource to Use the `ProductsBLL` Class ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image11.png))</span></span>

<span data-ttu-id="a9fde-146">Dans l’écran suivant, nous pouvons spécifier les méthodes de la classe `ProductsBLL` qui sont mappées à l' `Select()`, `Insert()`, `Update()`et `Delete()` de l’ObjectDataSource en sélectionnant l’onglet approprié et en choisissant la méthode dans la liste déroulante.</span><span class="sxs-lookup"><span data-stu-id="a9fde-146">In the next screen we can specify what methods of the `ProductsBLL` class are mapped to the ObjectDataSource's `Select()`, `Insert()`, `Update()`, and `Delete()` by selecting the appropriate tab and choosing the method from the drop-down list.</span></span> <span data-ttu-id="a9fde-147">Figure 6, qui devrait vous paraître familier à présent, mappe la méthode de `Select()` ObjectDataSource à la méthode `GetProducts()` de la classe `ProductsBLL`.</span><span class="sxs-lookup"><span data-stu-id="a9fde-147">Figure 6, which should look familiar by now, maps the ObjectDataSource's `Select()` method to the `ProductsBLL` class's `GetProducts()` method.</span></span> <span data-ttu-id="a9fde-148">Les méthodes `Insert()`, `Update()`et `Delete()` peuvent être configurées en sélectionnant l’onglet approprié dans la liste située en haut.</span><span class="sxs-lookup"><span data-stu-id="a9fde-148">The `Insert()`, `Update()`, and `Delete()` methods can be configured by selecting the appropriate tab from the list along the top.</span></span>

<span data-ttu-id="a9fde-149">[![que ObjectDataSource retournent tous les produits](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image13.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image12.png)</span><span class="sxs-lookup"><span data-stu-id="a9fde-149">[![Have the ObjectDataSource Return All of the Products](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image13.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image12.png)</span></span>

<span data-ttu-id="a9fde-150">**Figure 6**: faire en sorte que ObjectDataSource retourne tous les produits ([cliquez pour afficher l’image en plein écran](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="a9fde-150">**Figure 6**: Have the ObjectDataSource Return All of the Products ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image14.png))</span></span>

<span data-ttu-id="a9fde-151">Les figures 7, 8 et 9 affichent les onglets mise à jour, insertion et suppression de l’ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="a9fde-151">Figures 7, 8, and 9 show the ObjectDataSource's UPDATE, INSERT, and DELETE tabs.</span></span> <span data-ttu-id="a9fde-152">Configurez ces onglets afin que les méthodes `Insert()`, `Update()`et `Delete()` appellent respectivement les méthodes `UpdateProduct`, `AddProduct`et `DeleteProduct` de la classe `ProductsBLL`.</span><span class="sxs-lookup"><span data-stu-id="a9fde-152">Configure these tabs so that the `Insert()`, `Update()`, and `Delete()` methods invoke the `ProductsBLL` class's `UpdateProduct`, `AddProduct`, and `DeleteProduct` methods, respectively.</span></span>

<span data-ttu-id="a9fde-153">[![mapper la méthode Update () de l’ObjectDataSource à la méthode UpdateProduct de la classe ProductBLL](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image16.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="a9fde-153">[![Map the ObjectDataSource's Update() Method to the ProductBLL Class's UpdateProduct Method](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image16.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image15.png)</span></span>

<span data-ttu-id="a9fde-154">**Figure 7**: mapper la méthode de `Update()` ObjectDataSource à la méthode `UpdateProduct` de la classe `ProductBLL` ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="a9fde-154">**Figure 7**: Map the ObjectDataSource's `Update()` Method to the `ProductBLL` Class's `UpdateProduct` Method ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image17.png))</span></span>

<span data-ttu-id="a9fde-155">[![mapper la méthode Insert () de ObjectDataSource à la méthode AddProduct de la classe ProductBLL](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image19.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image18.png)</span><span class="sxs-lookup"><span data-stu-id="a9fde-155">[![Map the ObjectDataSource's Insert() Method to the ProductBLL Class's AddProduct Method](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image19.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image18.png)</span></span>

<span data-ttu-id="a9fde-156">**Figure 8**: mapper la méthode de `Insert()` ObjectDataSource à la méthode Add `Product` de la classe `ProductBLL` ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="a9fde-156">**Figure 8**: Map the ObjectDataSource's `Insert()` Method to the `ProductBLL` Class's Add `Product` Method ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image20.png))</span></span>

<span data-ttu-id="a9fde-157">[![mapper la méthode Delete () de ObjectDataSource à la méthode DeleteProduct de la classe ProductBLL](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image22.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="a9fde-157">[![Map the ObjectDataSource's Delete() Method to the ProductBLL Class's DeleteProduct Method](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image22.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image21.png)</span></span>

<span data-ttu-id="a9fde-158">**Figure 9**: mapper la méthode de `Delete()` ObjectDataSource à la méthode `DeleteProduct` de la classe `ProductBLL` ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image23.png))</span><span class="sxs-lookup"><span data-stu-id="a9fde-158">**Figure 9**: Map the ObjectDataSource's `Delete()` Method to the `ProductBLL` Class's `DeleteProduct` Method ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image23.png))</span></span>

<span data-ttu-id="a9fde-159">Vous avez peut-être remarqué que ces méthodes ont déjà été sélectionnées dans les listes déroulantes des onglets mettre à jour, insérer et supprimer.</span><span class="sxs-lookup"><span data-stu-id="a9fde-159">You may have noticed that the drop-down lists in the UPDATE, INSERT, and DELETE tabs already had these methods selected.</span></span> <span data-ttu-id="a9fde-160">C’est grâce à notre utilisation du `DataObjectMethodAttribute` qui décore les méthodes de `ProductsBLL`.</span><span class="sxs-lookup"><span data-stu-id="a9fde-160">This is thanks to our use of the `DataObjectMethodAttribute` that decorates the methods of `ProductsBLL`.</span></span> <span data-ttu-id="a9fde-161">Par exemple, la méthode DeleteProduct a la signature suivante :</span><span class="sxs-lookup"><span data-stu-id="a9fde-161">For example, the DeleteProduct method has the following signature:</span></span>

[!code-csharp[Main](an-overview-of-inserting-updating-and-deleting-data-cs/samples/sample2.cs)]

<span data-ttu-id="a9fde-162">L’attribut `DataObjectMethodAttribute` indique l’objectif de chaque méthode, qu’il s’agisse de la sélection, de l’insertion, de la mise à jour ou de la suppression, et du fait qu’il s’agisse ou non de la valeur par défaut.</span><span class="sxs-lookup"><span data-stu-id="a9fde-162">The `DataObjectMethodAttribute` attribute indicates the purpose of each method whether it is for selecting, inserting, updating, or deleting and whether or not it's the default value.</span></span> <span data-ttu-id="a9fde-163">Si vous avez omis ces attributs lors de la création de vos classes BLL, vous devez sélectionner manuellement les méthodes dans les onglets mettre à jour, insérer et supprimer.</span><span class="sxs-lookup"><span data-stu-id="a9fde-163">If you omitted these attributes when creating your BLL classes, you'll need to manually select the methods from the UPDATE, INSERT, and DELETE tabs.</span></span>

<span data-ttu-id="a9fde-164">Après vous être assuré que les méthodes de `ProductsBLL` appropriées sont mappées aux méthodes de `Insert()`, `Update()`et `Delete()` de l’ObjectDataSource, cliquez sur Terminer pour terminer l’Assistant.</span><span class="sxs-lookup"><span data-stu-id="a9fde-164">After ensuring that the appropriate `ProductsBLL` methods are mapped to the ObjectDataSource's `Insert()`, `Update()`, and `Delete()` methods, click Finish to complete the wizard.</span></span>

## <a name="examining-the-objectdatasources-markup"></a><span data-ttu-id="a9fde-165">Examen de la balise ObjectDataSource</span><span class="sxs-lookup"><span data-stu-id="a9fde-165">Examining the ObjectDataSource's Markup</span></span>

<span data-ttu-id="a9fde-166">Après avoir configuré l’ObjectDataSource via son assistant, accédez à la vue source pour examiner le balisage déclaratif généré.</span><span class="sxs-lookup"><span data-stu-id="a9fde-166">After configuring the ObjectDataSource through its wizard, go to the Source view to examine the generated declarative markup.</span></span> <span data-ttu-id="a9fde-167">La balise `<asp:ObjectDataSource>` spécifie l’objet sous-jacent et les méthodes à appeler.</span><span class="sxs-lookup"><span data-stu-id="a9fde-167">The `<asp:ObjectDataSource>` tag specifies the underlying object and the methods to invoke.</span></span> <span data-ttu-id="a9fde-168">En outre, il existe `DeleteParameters`, `UpdateParameters`et `InsertParameters` qui mappent aux paramètres d’entrée pour les méthodes `AddProduct`, `UpdateProduct`et `DeleteProduct` de la classe `ProductsBLL` :</span><span class="sxs-lookup"><span data-stu-id="a9fde-168">Additionally, there are `DeleteParameters`, `UpdateParameters`, and `InsertParameters` that map to the input parameters for the `ProductsBLL` class's `AddProduct`, `UpdateProduct`, and `DeleteProduct` methods:</span></span>

[!code-aspx[Main](an-overview-of-inserting-updating-and-deleting-data-cs/samples/sample3.aspx)]

<span data-ttu-id="a9fde-169">ObjectDataSource comprend un paramètre pour chacun des paramètres d’entrée de ses méthodes associées, tout comme une liste de `SelectParameter` s est présente lorsque ObjectDataSource est configuré pour appeler une méthode Select qui attend un paramètre d’entrée (comme `GetProductsByCategoryID(categoryID)`).</span><span class="sxs-lookup"><span data-stu-id="a9fde-169">The ObjectDataSource includes a parameter for each of the input parameters for its associated methods, just like a list of `SelectParameter` s is present when the ObjectDataSource is configured to call a select method that expects an input parameter (such as `GetProductsByCategoryID(categoryID)`).</span></span> <span data-ttu-id="a9fde-170">Comme nous le verrons bientôt, les valeurs de ces `DeleteParameters`, `UpdateParameters`et `InsertParameters` sont définies automatiquement par GridView, DetailsView et FormView avant d’appeler la méthode `Insert()`, `Update()`ou `Delete()` de l’ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="a9fde-170">As we'll see shortly, values for these `DeleteParameters`, `UpdateParameters`, and `InsertParameters` are set automatically by the GridView, DetailsView, and FormView prior to invoking the ObjectDataSource's `Insert()`, `Update()`, or `Delete()` method.</span></span> <span data-ttu-id="a9fde-171">Ces valeurs peuvent également être définies par programmation en fonction des besoins, comme nous le verrons dans un prochain didacticiel.</span><span class="sxs-lookup"><span data-stu-id="a9fde-171">These values can also be set programmatically as needed, as we'll discuss in a future tutorial.</span></span>

<span data-ttu-id="a9fde-172">L’un des effets secondaires de l’utilisation de l’Assistant pour configurer sur ObjectDataSource est que Visual Studio définit la [propriété OldValuesParameterFormatString](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.oldvaluesparameterformatstring(VS.80).aspx) sur `original_{0}`.</span><span class="sxs-lookup"><span data-stu-id="a9fde-172">One side effect of using the wizard to configure to ObjectDataSource is that Visual Studio sets the [OldValuesParameterFormatString property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.objectdatasource.oldvaluesparameterformatstring(VS.80).aspx) to `original_{0}`.</span></span> <span data-ttu-id="a9fde-173">Cette valeur de propriété est utilisée pour inclure les valeurs d’origine des données en cours de modification et est utile dans deux scénarios :</span><span class="sxs-lookup"><span data-stu-id="a9fde-173">This property value is used to include the original values of the data being edited and is useful in two scenarios:</span></span>

- <span data-ttu-id="a9fde-174">Si, lors de la modification d’un enregistrement, les utilisateurs sont en mesure de modifier la valeur de la clé primaire.</span><span class="sxs-lookup"><span data-stu-id="a9fde-174">If, when editing a record, users are able to change the primary key value.</span></span> <span data-ttu-id="a9fde-175">Dans ce cas, la nouvelle valeur de clé primaire et la valeur de clé primaire d’origine doivent être fournies afin que l’enregistrement avec la valeur de clé primaire d’origine puisse être trouvé et que sa valeur soit mise à jour en conséquence.</span><span class="sxs-lookup"><span data-stu-id="a9fde-175">In this case, both the new primary key value and the original primary key value must be provided so that the record with the original primary key value can be found and have its value updated accordingly.</span></span>
- <span data-ttu-id="a9fde-176">Lors de l’utilisation de l’accès concurrentiel optimiste.</span><span class="sxs-lookup"><span data-stu-id="a9fde-176">When using optimistic concurrency.</span></span> <span data-ttu-id="a9fde-177">L’accès concurrentiel optimiste est une technique qui permet de s’assurer que deux utilisateurs simultanés ne remplacent pas les modifications d’une autre, et est la rubrique pour un futur didacticiel.</span><span class="sxs-lookup"><span data-stu-id="a9fde-177">Optimistic concurrency is a technique to ensure that two simultaneous users don't overwrite one another's changes, and is the topic for a future tutorial.</span></span>

<span data-ttu-id="a9fde-178">La propriété `OldValuesParameterFormatString` indique le nom des paramètres d’entrée dans les méthodes Update et Delete de l’objet sous-jacent pour les valeurs d’origine.</span><span class="sxs-lookup"><span data-stu-id="a9fde-178">The `OldValuesParameterFormatString` property indicates the name of the input parameters in the underlying object's update and delete methods for the original values.</span></span> <span data-ttu-id="a9fde-179">Nous aborderons cette propriété et son objectif plus en détail lorsque nous explorons l’accès concurrentiel optimiste.</span><span class="sxs-lookup"><span data-stu-id="a9fde-179">We'll discuss this property and its purpose in greater detail when we explore optimistic concurrency.</span></span> <span data-ttu-id="a9fde-180">Je l’affiche maintenant, car les méthodes de la couche BLL n’attendent pas les valeurs d’origine et, par conséquent, il est important de supprimer cette propriété.</span><span class="sxs-lookup"><span data-stu-id="a9fde-180">I bring it up now, however, because our BLL's methods do not expect the original values and therefore it's important that we remove this property.</span></span> <span data-ttu-id="a9fde-181">Le fait de laisser la propriété `OldValuesParameterFormatString` définie sur une valeur autre que la valeur par défaut (`{0}`) génère une erreur lorsqu’un contrôle Web de données tente d’appeler les méthodes `Update()` ou `Delete()` de l’ObjectDataSource, car ObjectDataSource tente de transmettre à la fois le `UpdateParameters` ou le `DeleteParameters` spécifié, ainsi que les paramètres de valeur d’origine.</span><span class="sxs-lookup"><span data-stu-id="a9fde-181">Leaving the `OldValuesParameterFormatString` property set to anything other than the default (`{0}`) will cause an error when a data Web control attempts to invoke the ObjectDataSource's `Update()` or `Delete()` methods because the ObjectDataSource will attempt to pass in both the `UpdateParameters` or `DeleteParameters` specified as well as original value parameters.</span></span>

<span data-ttu-id="a9fde-182">Si ce n’est pas très clair, ne vous inquiétez pas, nous examinerons cette propriété et son utilitaire dans un prochain didacticiel.</span><span class="sxs-lookup"><span data-stu-id="a9fde-182">If this isn't terribly clear at this juncture, don't worry, we'll examine this property and its utility in a future tutorial.</span></span> <span data-ttu-id="a9fde-183">Pour le moment, il vous suffit de supprimer cette déclaration de propriété de la syntaxe déclarative ou de définir la valeur par défaut ({0}).</span><span class="sxs-lookup"><span data-stu-id="a9fde-183">For now, just be certain to either remove this property declaration entirely from the declarative syntax or set the value to the default value ({0}).</span></span>

> [!NOTE]
> <span data-ttu-id="a9fde-184">Si vous supprimez simplement la valeur de la propriété `OldValuesParameterFormatString` de la Fenêtre Propriétés dans le Mode Création, la propriété existera toujours dans la syntaxe déclarative, mais elle sera définie sur une chaîne vide.</span><span class="sxs-lookup"><span data-stu-id="a9fde-184">If you simply clear out the `OldValuesParameterFormatString` property value from the Properties window in the Design view, the property will still exist in the declarative syntax, but be set to an empty string.</span></span> <span data-ttu-id="a9fde-185">Malheureusement, il en résultera toujours le même problème que celui décrit ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="a9fde-185">This, unfortunately, will still result in the same problem discussed above.</span></span> <span data-ttu-id="a9fde-186">Par conséquent, supprimez la propriété de la syntaxe déclarative ou, à partir de la Fenêtre Propriétés, affectez la valeur par défaut, `{0}`.</span><span class="sxs-lookup"><span data-stu-id="a9fde-186">Therefore, either remove the property altogether from the declarative syntax or, from the Properties window, set the value to the default, `{0}`.</span></span>

## <a name="step-3-adding-a-data-web-control-and-configuring-it-for-data-modification"></a><span data-ttu-id="a9fde-187">Étape 3 : ajout d’un contrôle Web de données et configuration de celui-ci pour la modification des données</span><span class="sxs-lookup"><span data-stu-id="a9fde-187">Step 3: Adding a Data Web Control and Configuring It for Data Modification</span></span>

<span data-ttu-id="a9fde-188">Une fois que ObjectDataSource a été ajouté à la page et configuré, nous sommes prêts à ajouter des contrôles Web de données à la page pour afficher les données et fournir à l’utilisateur final la possibilité de le modifier.</span><span class="sxs-lookup"><span data-stu-id="a9fde-188">Once the ObjectDataSource has been added to the page and configured, we're ready to add data Web controls to the page to both display the data and provide a means for the end user to modify it.</span></span> <span data-ttu-id="a9fde-189">Nous examinerons séparément GridView, DetailsView et FormView, car ces contrôles Web de données diffèrent dans leurs fonctionnalités de modification de données et leur configuration.</span><span class="sxs-lookup"><span data-stu-id="a9fde-189">We'll look at the GridView, DetailsView, and FormView separately, as these data Web controls differ in their data modification capabilities and configuration.</span></span>

<span data-ttu-id="a9fde-190">Comme nous le verrons dans le reste de cet article, l’ajout de la prise en charge de l’édition, de l’insertion et de la suppression de base via les contrôles GridView, DetailsView et FormView est aussi simple que la vérification de deux cases à cocher.</span><span class="sxs-lookup"><span data-stu-id="a9fde-190">As we'll see in the remainder of this article, adding very basic editing, inserting, and deleting support through the GridView, DetailsView, and FormView controls is really as simple as checking a couple of checkboxes.</span></span> <span data-ttu-id="a9fde-191">Dans le monde réel, il y a de nombreuses subtilités et cas de périphérie qui rendent les fonctionnalités de ce type plus impliquées qu’un simple pointage et un clic.</span><span class="sxs-lookup"><span data-stu-id="a9fde-191">There are many subtleties and edge cases in the real-world that make providing such functionality more involved than just point and click.</span></span> <span data-ttu-id="a9fde-192">Toutefois, ce didacticiel se concentre uniquement sur la démonstration des fonctionnalités de modification de données simplistes.</span><span class="sxs-lookup"><span data-stu-id="a9fde-192">This tutorial, however, focuses solely on proving simplistic data modification capabilities.</span></span> <span data-ttu-id="a9fde-193">Les prochains didacticiels examinent les problèmes qui se produiront sans aucun doute dans un environnement réel.</span><span class="sxs-lookup"><span data-stu-id="a9fde-193">Future tutorials will examine concerns that will undoubtedly arise in a real-world setting.</span></span>

## <a name="deleting-data-from-the-gridview"></a><span data-ttu-id="a9fde-194">Suppression de données du contrôle GridView</span><span class="sxs-lookup"><span data-stu-id="a9fde-194">Deleting Data from the GridView</span></span>

<span data-ttu-id="a9fde-195">Commencez par faire glisser un contrôle GridView de la boîte à outils vers le concepteur.</span><span class="sxs-lookup"><span data-stu-id="a9fde-195">Start by dragging a GridView from the Toolbox onto the Designer.</span></span> <span data-ttu-id="a9fde-196">Ensuite, liez l’ObjectDataSource au GridView en le sélectionnant dans la liste déroulante de la balise active de GridView.</span><span class="sxs-lookup"><span data-stu-id="a9fde-196">Next, bind the ObjectDataSource to the GridView by selecting it from the drop-down list in the GridView's smart tag.</span></span> <span data-ttu-id="a9fde-197">À ce stade, le balisage déclaratif de GridView sera :</span><span class="sxs-lookup"><span data-stu-id="a9fde-197">At this point the GridView's declarative markup will be:</span></span>

[!code-aspx[Main](an-overview-of-inserting-updating-and-deleting-data-cs/samples/sample4.aspx)]

<span data-ttu-id="a9fde-198">La liaison du contrôle GridView au ObjectDataSource par le biais de sa balise active présente deux avantages :</span><span class="sxs-lookup"><span data-stu-id="a9fde-198">Binding the GridView to the ObjectDataSource through its smart tag has two benefits:</span></span>

- <span data-ttu-id="a9fde-199">BoundFields et CheckBoxFields sont créés automatiquement pour chacun des champs retournés par l’ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="a9fde-199">BoundFields and CheckBoxFields are automatically created for each of the fields returned by the ObjectDataSource.</span></span> <span data-ttu-id="a9fde-200">En outre, les propriétés BoundField et CheckBoxField sont définies en fonction des métadonnées du champ sous-jacent.</span><span class="sxs-lookup"><span data-stu-id="a9fde-200">Moreover, the BoundField and CheckBoxField's properties are set based on the underlying field's metadata.</span></span> <span data-ttu-id="a9fde-201">Par exemple, les champs `ProductID`, `CategoryName`et `SupplierName` sont marqués en lecture seule dans le `ProductsDataTable` et ne peuvent donc pas être mis à jour lors de la modification.</span><span class="sxs-lookup"><span data-stu-id="a9fde-201">For example, the `ProductID`, `CategoryName`, and `SupplierName` fields are marked as read-only in the `ProductsDataTable` and therefore shouldn't be updatable when editing.</span></span> <span data-ttu-id="a9fde-202">Pour ce faire, ces [propriétés ReadOnly](https://msdn.microsoft.com/library/system.web.ui.webcontrols.boundfield.readonly(VS.80).aspx) BoundFields sont définies sur `true`.</span><span class="sxs-lookup"><span data-stu-id="a9fde-202">To accommodate this, these BoundFields' [ReadOnly properties](https://msdn.microsoft.com/library/system.web.ui.webcontrols.boundfield.readonly(VS.80).aspx) are set to `true`.</span></span>
- <span data-ttu-id="a9fde-203">La [propriété DataKeyNames](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.datakeynames(VS.80).aspx) est assignée au (x) champ (s) de clé primaire de l’objet sous-jacent.</span><span class="sxs-lookup"><span data-stu-id="a9fde-203">The [DataKeyNames property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.gridview.datakeynames(VS.80).aspx) is assigned to the primary key field(s) of the underlying object.</span></span> <span data-ttu-id="a9fde-204">Cela est essentiel lors de l’utilisation de GridView pour la modification ou la suppression de données, car cette propriété indique le champ (ou l’ensemble de champs) qui identifie chaque enregistrement de manière unique.</span><span class="sxs-lookup"><span data-stu-id="a9fde-204">This is essential when using the GridView for editing or deleting data, as this property indicates the field (or set of fields) that unique identifies each record.</span></span> <span data-ttu-id="a9fde-205">Pour plus d’informations sur la propriété `DataKeyNames`, reportez-vous à la rubrique [maître/détail à l’aide d’un GridView maître sélectionnable avec un didacticiel détails DetailView](../masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs.md) .</span><span class="sxs-lookup"><span data-stu-id="a9fde-205">For more information on the `DataKeyNames` property, refer back to the [Master/Detail Using a Selectable Master GridView with a Details DetailView](../masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs.md) tutorial.</span></span>

<span data-ttu-id="a9fde-206">Alors que le GridView peut être lié à l’ObjectDataSource par le biais de l’Fenêtre Propriétés ou de la syntaxe déclarative, vous devez ajouter manuellement le balisage BoundField et `DataKeyNames` approprié.</span><span class="sxs-lookup"><span data-stu-id="a9fde-206">While the GridView can be bound to the ObjectDataSource through the Properties window or declarative syntax, doing so requires you to manually add the appropriate BoundField and `DataKeyNames` markup.</span></span>

<span data-ttu-id="a9fde-207">Le contrôle GridView offre une prise en charge intégrée de la modification et de la suppression au niveau des lignes.</span><span class="sxs-lookup"><span data-stu-id="a9fde-207">The GridView control provides built-in support for row-level editing and deleting.</span></span> <span data-ttu-id="a9fde-208">La configuration d’un contrôle GridView pour prendre en charge la suppression ajoute une colonne de boutons supprimer.</span><span class="sxs-lookup"><span data-stu-id="a9fde-208">Configuring a GridView to support deleting adds a column of Delete buttons.</span></span> <span data-ttu-id="a9fde-209">Lorsque l’utilisateur final clique sur le bouton Supprimer pour une ligne particulière, une publication est effectuée et le GridView effectue les étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="a9fde-209">When the end user clicks the Delete button for a particular row, a postback ensues and the GridView performs the following steps:</span></span>

1. <span data-ttu-id="a9fde-210">La ou les valeurs de `DeleteParameters` de l’ObjectDataSource sont affectées</span><span class="sxs-lookup"><span data-stu-id="a9fde-210">The ObjectDataSource's `DeleteParameters` value(s) are assigned</span></span>
2. <span data-ttu-id="a9fde-211">La méthode de `Delete()` de l’ObjectDataSource est appelée, supprimant l’enregistrement spécifié</span><span class="sxs-lookup"><span data-stu-id="a9fde-211">The ObjectDataSource's `Delete()` method is invoked, deleting the specified record</span></span>
3. <span data-ttu-id="a9fde-212">Le GridView se lie de nouveau à ObjectDataSource en appelant sa méthode `Select()`</span><span class="sxs-lookup"><span data-stu-id="a9fde-212">The GridView rebinds itself to the ObjectDataSource by invoking its `Select()` method</span></span>

<span data-ttu-id="a9fde-213">Les valeurs assignées à la `DeleteParameters` sont les valeurs des champs `DataKeyNames` pour la ligne dont l’utilisateur a cliqué sur le bouton supprimer.</span><span class="sxs-lookup"><span data-stu-id="a9fde-213">The values assigned to the `DeleteParameters` are the values of the `DataKeyNames` field(s) for the row whose Delete button was clicked.</span></span> <span data-ttu-id="a9fde-214">Par conséquent, il est vital que la propriété `DataKeyNames` d’un GridView soit correctement définie.</span><span class="sxs-lookup"><span data-stu-id="a9fde-214">Therefore it's vital that a GridView's `DataKeyNames` property be correctly set.</span></span> <span data-ttu-id="a9fde-215">Si elle est manquante, la `DeleteParameters` reçoit une valeur `null` à l’étape 1, qui, à son tour, n’entraîne pas de suppression des enregistrements à l’étape 2.</span><span class="sxs-lookup"><span data-stu-id="a9fde-215">If it's missing, the `DeleteParameters` will be assigned a `null` value in Step 1, which in turn will not result in any deleted records in Step 2.</span></span>

> [!NOTE]
> <span data-ttu-id="a9fde-216">La collection `DataKeys` est stockée dans l’état du contrôle GridView s, ce qui signifie que les valeurs `DataKeys` seront mémorisées sur la publication même si l’état d’affichage de GridView s a été désactivé.</span><span class="sxs-lookup"><span data-stu-id="a9fde-216">The `DataKeys` collection is stored in the GridView s control state, meaning that the `DataKeys` values will be remembered across postback even if the GridView s view state has been disabled.</span></span> <span data-ttu-id="a9fde-217">Toutefois, il est très important que l’état d’affichage reste activé pour les GridViews qui prennent en charge la modification ou la suppression (comportement par défaut).</span><span class="sxs-lookup"><span data-stu-id="a9fde-217">However, it is very important that view state remains enabled for GridViews that support editing or deleting (the default behavior).</span></span> <span data-ttu-id="a9fde-218">Si vous affectez à la propriété GridView s `EnableViewState` la valeur `false`, le comportement de modification et de suppression fonctionnera correctement pour un seul utilisateur, mais s’il existe des utilisateurs simultanés qui suppriment des données, il est possible que ces utilisateurs simultanés suppriment ou modifient accidentellement des enregistrements qu’ils n’avaient pas prévus.</span><span class="sxs-lookup"><span data-stu-id="a9fde-218">If you set the GridView s `EnableViewState` property to `false`, the editing and deleting behavior will work fine for a single user, but if there are concurrent users deleting data, there exists the possibility that these concurrent users may accidentally delete or edit records that they didn't intend.</span></span> <span data-ttu-id="a9fde-219">Pour plus d’informations, consultez mon blog, [Avertissement : problème d’accès concurrentiel avec ASP.NET 2,0 GridViews/DetailsView/FormViews qui prennent en charge l’édition et/ou la suppression et dont l’état d’affichage est désactivé](http://scottonwriting.net/sowblog/archive/2006/10/03/163215.aspx).</span><span class="sxs-lookup"><span data-stu-id="a9fde-219">See my blog entry, [WARNING: Concurrency Issue with ASP.NET 2.0 GridViews/DetailsView/FormViews that Support Editing and/or Deleting and Whose View State is Disabled](http://scottonwriting.net/sowblog/archive/2006/10/03/163215.aspx), for more information.</span></span>

<span data-ttu-id="a9fde-220">Ce même avertissement s’applique également à DetailsViews et FormViews.</span><span class="sxs-lookup"><span data-stu-id="a9fde-220">This same warning also applies to DetailsViews and FormViews.</span></span>

<span data-ttu-id="a9fde-221">Pour ajouter des fonctionnalités de suppression à un GridView, il vous suffit d’accéder à sa balise active et de cocher la case Activer la suppression.</span><span class="sxs-lookup"><span data-stu-id="a9fde-221">To add deleting capabilities to a GridView, simply go to its smart tag and check the Enable Deleting checkbox.</span></span>

![Cochez la case Activer la suppression](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image24.png)

<span data-ttu-id="a9fde-223">**Figure 10**: activer la case à cocher Activer la suppression</span><span class="sxs-lookup"><span data-stu-id="a9fde-223">**Figure 10**: Check the Enable Deleting Checkbox</span></span>

<span data-ttu-id="a9fde-224">L’activation de la case à cocher Activer la suppression de la balise active ajoute un CommandField au GridView.</span><span class="sxs-lookup"><span data-stu-id="a9fde-224">Checking the Enable Deleting checkbox from the smart tag adds a CommandField to the GridView.</span></span> <span data-ttu-id="a9fde-225">CommandField restitue une colonne dans le GridView avec des boutons permettant d’effectuer une ou plusieurs des tâches suivantes : sélection d’un enregistrement, modification d’un enregistrement et suppression d’un enregistrement.</span><span class="sxs-lookup"><span data-stu-id="a9fde-225">The CommandField renders a column in the GridView with buttons for performing one or more of the following tasks: selecting a record, editing a record, and deleting a record.</span></span> <span data-ttu-id="a9fde-226">Nous avons précédemment vu l’CommandField en action avec la sélection des enregistrements dans le [maître/détail à l’aide d’un GridView maître sélectionnable avec un didacticiel détails DetailView](../masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs.md) .</span><span class="sxs-lookup"><span data-stu-id="a9fde-226">We previously saw the CommandField in action with selecting records in the [Master/Detail Using a Selectable Master GridView with a Details DetailView](../masterdetail/master-detail-using-a-selectable-master-gridview-with-a-details-detailview-cs.md) tutorial.</span></span>

<span data-ttu-id="a9fde-227">CommandField contient un certain nombre de propriétés de `ShowXButton` qui indiquent la série de boutons affichée dans CommandField.</span><span class="sxs-lookup"><span data-stu-id="a9fde-227">The CommandField contains a number of `ShowXButton` properties that indicate what series of buttons are displayed in the CommandField.</span></span> <span data-ttu-id="a9fde-228">En activant la case à cocher Activer la suppression, un CommandField dont la propriété `ShowDeleteButton` est `true` a été ajouté à la collection Columns du contrôle GridView.</span><span class="sxs-lookup"><span data-stu-id="a9fde-228">By checking the Enable Deleting checkbox a CommandField whose `ShowDeleteButton` property is `true` has been added to the GridView's Columns collection.</span></span>

[!code-aspx[Main](an-overview-of-inserting-updating-and-deleting-data-cs/samples/sample5.aspx)]

<span data-ttu-id="a9fde-229">À ce stade, croyez-le ou non, nous avons terminé l’ajout de la prise en charge de la suppression au contrôle GridView !</span><span class="sxs-lookup"><span data-stu-id="a9fde-229">At this point, believe it or not, we're done with adding deleting support to the GridView!</span></span> <span data-ttu-id="a9fde-230">Comme le montre la figure 11, lorsque vous visitez cette page via un navigateur, une colonne de boutons supprimer est présente.</span><span class="sxs-lookup"><span data-stu-id="a9fde-230">As Figure 11 shows, when visiting this page through a browser a column of Delete buttons is present.</span></span>

<span data-ttu-id="a9fde-231">[![la méthode CommandField ajoute une colonne de boutons supprimer](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image26.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="a9fde-231">[![The CommandField Adds a Column of Delete Buttons](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image26.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image25.png)</span></span>

<span data-ttu-id="a9fde-232">**Figure 11**: CommandField ajoute une colonne de boutons supprimer ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="a9fde-232">**Figure 11**: The CommandField Adds a Column of Delete Buttons ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image27.png))</span></span>

<span data-ttu-id="a9fde-233">Si vous avez créé ce didacticiel dès le départ, lorsque vous testez cette page, le fait de cliquer sur le bouton supprimer lève une exception.</span><span class="sxs-lookup"><span data-stu-id="a9fde-233">If you've been building this tutorial from the ground up on your own, when testing this page clicking the Delete button will raise an exception.</span></span> <span data-ttu-id="a9fde-234">Poursuivez la lecture pour savoir pourquoi ces exceptions ont été générées et comment les corriger.</span><span class="sxs-lookup"><span data-stu-id="a9fde-234">Continue reading to learn as to why these exceptions were raised and how to fix them.</span></span>

> [!NOTE]
> <span data-ttu-id="a9fde-235">Si vous suivez le téléchargement accompagnant ce didacticiel, ces problèmes ont déjà été associés à.</span><span class="sxs-lookup"><span data-stu-id="a9fde-235">If you're following along using the download accompanying this tutorial, these problems have already been accounted for.</span></span> <span data-ttu-id="a9fde-236">Toutefois, je vous encourage à lire les détails ci-dessous pour vous aider à identifier les problèmes qui peuvent survenir et les solutions de contournement appropriées.</span><span class="sxs-lookup"><span data-stu-id="a9fde-236">However, I encourage you to read through the details listed below to help identify problems that may arise and suitable workarounds.</span></span>

<span data-ttu-id="a9fde-237">Si, lors de la tentative de suppression d’un produit, vous obtenez une exception dont le message est similaire à «*ObjectDataSource’ObjectDataSource1 'n’a pas pu trouver une méthode’DeleteProduct’non générique qui a des paramètres : ProductID, original\_ProductID*», vous avez probablement oublié de supprimer la propriété `OldValuesParameterFormatString` de ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="a9fde-237">If, when attempting to delete a product, you get an exception whose message is similar to "*ObjectDataSource 'ObjectDataSource1' could not find a non-generic method 'DeleteProduct' that has parameters: productID, original\_ProductID*," you likely forgot to remove the `OldValuesParameterFormatString` property from the ObjectDataSource.</span></span> <span data-ttu-id="a9fde-238">Avec la propriété `OldValuesParameterFormatString` spécifiée, ObjectDataSource tente de transmettre les paramètres d’entrée `productID` et `original_ProductID` à la méthode `DeleteProduct`.</span><span class="sxs-lookup"><span data-stu-id="a9fde-238">With the `OldValuesParameterFormatString` property specified, the ObjectDataSource attempts to pass in both `productID` and `original_ProductID` input parameters to the `DeleteProduct` method.</span></span> <span data-ttu-id="a9fde-239">Toutefois, `DeleteProduct`n’accepte qu’un seul paramètre d’entrée, par conséquent l’exception.</span><span class="sxs-lookup"><span data-stu-id="a9fde-239">`DeleteProduct`, however, only accepts a single input parameter, hence the exception.</span></span> <span data-ttu-id="a9fde-240">La suppression de la propriété `OldValuesParameterFormatString` (ou sa définition sur `{0}`) fait en sorte que ObjectDataSource ne tente pas de passer le paramètre d’entrée d’origine.</span><span class="sxs-lookup"><span data-stu-id="a9fde-240">Removing the `OldValuesParameterFormatString` property (or setting it to `{0}`) instructs the ObjectDataSource to not attempt to pass in the original input parameter.</span></span>

<span data-ttu-id="a9fde-241">[![vérifier que la propriété OldValuesParameterFormatString a été supprimée](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image29.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="a9fde-241">[![Ensure That the OldValuesParameterFormatString Property Has Been Cleared Out](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image29.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image28.png)</span></span>

<span data-ttu-id="a9fde-242">**Figure 12**: vérifier que la propriété `OldValuesParameterFormatString` a été effacée ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="a9fde-242">**Figure 12**: Ensure That the `OldValuesParameterFormatString` Property Has Been Cleared Out ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image30.png))</span></span>

<span data-ttu-id="a9fde-243">Même si vous avez supprimé la propriété `OldValuesParameterFormatString`, vous obtiendrez toujours une exception lors de la tentative de suppression d’un produit avec le message : «*l’instruction DELETE est en conflit avec la contrainte de référence «FK\_Order\_details\_Products »* . La base de données Northwind contient une contrainte de clé étrangère entre la `Order Details` et la table de `Products`, ce qui signifie qu’un produit ne peut pas être supprimé du système s’il y a un ou plusieurs enregistrements dans la table `Order Details`.</span><span class="sxs-lookup"><span data-stu-id="a9fde-243">Even if you had removed the `OldValuesParameterFormatString` property, you still will get an exception when trying to delete a product with the message: "*The DELETE statement conflicted with the REFERENCE constraint 'FK\_Order\_Details\_Products'*." The Northwind database contains a foreign key constraint between the `Order Details` and `Products` table, meaning that a product cannot be deleted from the system if there are one or more records for it in the `Order Details` table.</span></span> <span data-ttu-id="a9fde-244">Étant donné que chaque produit de la base de données Northwind a au moins un enregistrement dans `Order Details`, nous ne pouvons pas supprimer les produits tant que nous n’avons pas supprimé au préalable les enregistrements de détails de commande associés au produit.</span><span class="sxs-lookup"><span data-stu-id="a9fde-244">Since every product in the Northwind database has at least one record in `Order Details`, we cannot delete any products until we first delete the product's associated order details records.</span></span>

<span data-ttu-id="a9fde-245">[![une contrainte de clé étrangère interdit la suppression des produits](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image32.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="a9fde-245">[![A Foreign Key Constraint Prohibits the Deletion of Products](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image32.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image31.png)</span></span>

<span data-ttu-id="a9fde-246">**Figure 13**: une contrainte de clé étrangère interdit la suppression de produits ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="a9fde-246">**Figure 13**: A Foreign Key Constraint Prohibits the Deletion of Products ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image33.png))</span></span>

<span data-ttu-id="a9fde-247">Pour notre didacticiel, nous allons simplement supprimer tous les enregistrements de la table `Order Details`.</span><span class="sxs-lookup"><span data-stu-id="a9fde-247">For our tutorial, let's just delete all of the records from the `Order Details` table.</span></span> <span data-ttu-id="a9fde-248">Dans une application réelle, nous aurions besoin des éléments suivants :</span><span class="sxs-lookup"><span data-stu-id="a9fde-248">In a real-world application we'd need to either:</span></span>

- <span data-ttu-id="a9fde-249">Avoir un autre écran pour gérer les informations sur les détails des commandes</span><span class="sxs-lookup"><span data-stu-id="a9fde-249">Have another screen to manage order details information</span></span>
- <span data-ttu-id="a9fde-250">Augmentez la méthode `DeleteProduct` pour inclure la logique permettant de supprimer les détails de la commande du produit spécifié.</span><span class="sxs-lookup"><span data-stu-id="a9fde-250">Augment the `DeleteProduct` method to include logic to delete the specified product's order details</span></span>
- <span data-ttu-id="a9fde-251">Modifier la requête SQL utilisée par le TableAdapter pour inclure la suppression des détails de commande du produit spécifié</span><span class="sxs-lookup"><span data-stu-id="a9fde-251">Modify the SQL query used by the TableAdapter to include deletion of the specified product's order details</span></span>

<span data-ttu-id="a9fde-252">Nous allons simplement supprimer tous les enregistrements de la table `Order Details` pour contourner la contrainte de clé étrangère.</span><span class="sxs-lookup"><span data-stu-id="a9fde-252">Let's just delete all of the records from the `Order Details` table to circumvent the foreign key constraint.</span></span> <span data-ttu-id="a9fde-253">Accédez à la Explorateur de serveurs dans Visual Studio, cliquez avec le bouton droit sur le nœud `NORTHWND.MDF`, puis choisissez nouvelle requête.</span><span class="sxs-lookup"><span data-stu-id="a9fde-253">Go to the Server Explorer in Visual Studio, right-click on the `NORTHWND.MDF` node, and choose New Query.</span></span> <span data-ttu-id="a9fde-254">Ensuite, dans la fenêtre de requête, exécutez l’instruction SQL suivante : `DELETE FROM [Order Details]`</span><span class="sxs-lookup"><span data-stu-id="a9fde-254">Then, in the query window, run the following SQL statement: `DELETE FROM [Order Details]`</span></span>

<span data-ttu-id="a9fde-255">[![supprimer tous les enregistrements de la table Order Details](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image35.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="a9fde-255">[![Delete All Records from the Order Details Table](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image35.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image34.png)</span></span>

<span data-ttu-id="a9fde-256">**Figure 14**: supprimer tous les enregistrements de la table `Order Details` ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="a9fde-256">**Figure 14**: Delete All Records from the `Order Details` Table ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image36.png))</span></span>

<span data-ttu-id="a9fde-257">Une fois le tableau de `Order Details` effacé, si vous cliquez sur le bouton supprimer, le produit est supprimé sans erreur.</span><span class="sxs-lookup"><span data-stu-id="a9fde-257">After clearing out the `Order Details` table clicking on the Delete button will delete the product without error.</span></span> <span data-ttu-id="a9fde-258">Si le fait de cliquer sur le bouton supprimer ne supprime pas le produit, assurez-vous que la propriété `DataKeyNames` du contrôle GridView est définie sur le champ de clé primaire (`ProductID`).</span><span class="sxs-lookup"><span data-stu-id="a9fde-258">If clicking on the Delete button does not delete the product, check to ensure that the GridView's `DataKeyNames` property is set to the primary key field (`ProductID`).</span></span>

> [!NOTE]
> <span data-ttu-id="a9fde-259">Lorsque vous cliquez sur le bouton supprimer, une publication est effectuée et l’enregistrement est supprimé.</span><span class="sxs-lookup"><span data-stu-id="a9fde-259">When clicking on the Delete button a postback ensues and the record is deleted.</span></span> <span data-ttu-id="a9fde-260">Cela peut être dangereux, car il est facile de cliquer accidentellement sur le bouton supprimer de la ligne incorrecte.</span><span class="sxs-lookup"><span data-stu-id="a9fde-260">This can be dangerous since it is easy to accidentally click on the wrong row's Delete button.</span></span> <span data-ttu-id="a9fde-261">Dans un prochain didacticiel, nous verrons comment ajouter une confirmation côté client lors de la suppression d’un enregistrement.</span><span class="sxs-lookup"><span data-stu-id="a9fde-261">In a future tutorial we'll see how to add a client-side confirmation when deleting a record.</span></span>

## <a name="editing-data-with-the-gridview"></a><span data-ttu-id="a9fde-262">Modification de données avec le contrôle GridView</span><span class="sxs-lookup"><span data-stu-id="a9fde-262">Editing Data with the GridView</span></span>

<span data-ttu-id="a9fde-263">En plus de la suppression, le contrôle GridView fournit également une prise en charge intégrée de la modification au niveau des lignes.</span><span class="sxs-lookup"><span data-stu-id="a9fde-263">Along with deleting, the GridView control also provides built-in row-level editing support.</span></span> <span data-ttu-id="a9fde-264">La configuration d’un contrôle GridView pour prendre en charge la modification ajoute une colonne de boutons de modification.</span><span class="sxs-lookup"><span data-stu-id="a9fde-264">Configuring a GridView to support editing adds a column of Edit buttons.</span></span> <span data-ttu-id="a9fde-265">Du point de vue de l’utilisateur final, le fait de cliquer sur le bouton modifier d’une ligne permet de rendre cette ligne modifiable, en transformant les cellules en zones de texte contenant les valeurs existantes et en remplaçant le bouton modifier par les boutons mettre à jour et annuler.</span><span class="sxs-lookup"><span data-stu-id="a9fde-265">From the end user's perspective, clicking a row's Edit button causes that row to become editable, turning the cells into textboxes containing the existing values and replacing the Edit button with Update and Cancel buttons.</span></span> <span data-ttu-id="a9fde-266">Après avoir apporté les modifications souhaitées, l’utilisateur final peut cliquer sur le bouton mettre à jour pour valider les modifications ou sur le bouton Annuler pour les ignorer.</span><span class="sxs-lookup"><span data-stu-id="a9fde-266">After making their desired changes, the end user can click the Update button to commit the changes or the Cancel button to discard them.</span></span> <span data-ttu-id="a9fde-267">Dans les deux cas, après avoir cliqué sur mettre à jour ou annuler, le GridView revient à son état antérieur à la modification.</span><span class="sxs-lookup"><span data-stu-id="a9fde-267">In either case, after clicking Update or Cancel the GridView returns to its pre-editing state.</span></span>

<span data-ttu-id="a9fde-268">Du point de vue du développeur de pages, lorsque l’utilisateur final clique sur le bouton modifier pour une ligne particulière, une publication est effectuée et le GridView effectue les étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="a9fde-268">From our perspective as the page developer, when the end user clicks the Edit button for a particular row, a postback ensues and the GridView performs the following steps:</span></span>

1. <span data-ttu-id="a9fde-269">La propriété `EditItemIndex` du GridView est assignée à l’index de la ligne dont le bouton modifier a été cliqué</span><span class="sxs-lookup"><span data-stu-id="a9fde-269">The GridView's `EditItemIndex` property is assigned to the index of the row whose Edit button was clicked</span></span>
2. <span data-ttu-id="a9fde-270">Le GridView se lie de nouveau à ObjectDataSource en appelant sa méthode `Select()`</span><span class="sxs-lookup"><span data-stu-id="a9fde-270">The GridView rebinds itself to the ObjectDataSource by invoking its `Select()` method</span></span>
3. <span data-ttu-id="a9fde-271">L’index de ligne qui correspond au `EditItemIndex` est restitué en « mode édition ».</span><span class="sxs-lookup"><span data-stu-id="a9fde-271">The row index that matches the `EditItemIndex` is rendered in "edit mode."</span></span> <span data-ttu-id="a9fde-272">Dans ce mode, le bouton modifier est remplacé par les boutons mettre à jour et annuler et BoundFields dont les propriétés `ReadOnly` sont false (valeur par défaut) sont rendues sous la forme de contrôles Web TextBox dont les propriétés de `Text` sont affectées aux valeurs des champs de données.</span><span class="sxs-lookup"><span data-stu-id="a9fde-272">In this mode, the Edit button is replaced by Update and Cancel buttons and BoundFields whose `ReadOnly` properties are False (the default) are rendered as TextBox Web controls whose `Text` properties are assigned to the data fields' values.</span></span>

<span data-ttu-id="a9fde-273">À ce stade, le balisage est retourné au navigateur, ce qui permet à l’utilisateur final d’apporter des modifications aux données de la ligne.</span><span class="sxs-lookup"><span data-stu-id="a9fde-273">At this point the markup is returned to the browser, allowing the end user to make any changes to the row's data.</span></span> <span data-ttu-id="a9fde-274">Quand l’utilisateur clique sur le bouton mettre à jour, une publication (postback) se produit et le GridView effectue les étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="a9fde-274">When the user clicks the Update button, a postback occurs and the GridView performs the following steps:</span></span>

1. <span data-ttu-id="a9fde-275">Les valeurs entrées par l’utilisateur final dans l’interface de modification du contrôle GridView sont affectées à la ou aux valeurs de l' `UpdateParameters` ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="a9fde-275">The ObjectDataSource's `UpdateParameters` value(s) are assigned the values entered by the end user into the GridView's editing interface</span></span>
2. <span data-ttu-id="a9fde-276">La méthode de `Update()` ObjectDataSource est appelée, mettant à jour l’enregistrement spécifié</span><span class="sxs-lookup"><span data-stu-id="a9fde-276">The ObjectDataSource's `Update()` method is invoked, updating the specified record</span></span>
3. <span data-ttu-id="a9fde-277">Le GridView se lie de nouveau à ObjectDataSource en appelant sa méthode `Select()`</span><span class="sxs-lookup"><span data-stu-id="a9fde-277">The GridView rebinds itself to the ObjectDataSource by invoking its `Select()` method</span></span>

<span data-ttu-id="a9fde-278">Les valeurs de clé primaire assignées à la `UpdateParameters` à l’étape 1 proviennent des valeurs spécifiées dans la propriété `DataKeyNames`, alors que les valeurs de clé non primaire proviennent du texte des contrôles Web TextBox pour la ligne modifiée.</span><span class="sxs-lookup"><span data-stu-id="a9fde-278">The primary key values assigned to the `UpdateParameters` in Step 1 come from the values specified in the `DataKeyNames` property, whereas the non-primary key values come from the text in the TextBox Web controls for the edited row.</span></span> <span data-ttu-id="a9fde-279">Comme pour la suppression, il est vital que la propriété `DataKeyNames` d’un GridView soit correctement définie.</span><span class="sxs-lookup"><span data-stu-id="a9fde-279">As with deleting, it is vital that a GridView's `DataKeyNames` property be correctly set.</span></span> <span data-ttu-id="a9fde-280">S’il est manquant, la valeur de la clé primaire `UpdateParameters` sera affectée à une valeur de `null` à l’étape 1, qui à son tour n’entraînera pas d’enregistrements mis à jour à l’étape 2.</span><span class="sxs-lookup"><span data-stu-id="a9fde-280">If it's missing, the `UpdateParameters` primary key value will be assigned a `null` value in Step 1, which in turn will not result in any updated records in Step 2.</span></span>

<span data-ttu-id="a9fde-281">La fonctionnalité d’édition peut être activée simplement en activant la case à cocher Activer la modification dans la balise active de GridView.</span><span class="sxs-lookup"><span data-stu-id="a9fde-281">Editing functionality can be activated by simply checking the Enable Editing checkbox in the GridView's smart tag.</span></span>

![Cochez la case Activer la modification](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image37.png)

<span data-ttu-id="a9fde-283">**Figure 15**: activer la case à cocher Activer la modification</span><span class="sxs-lookup"><span data-stu-id="a9fde-283">**Figure 15**: Check the Enable Editing Checkbox</span></span>

<span data-ttu-id="a9fde-284">Si vous cochez la case Activer la modification, vous ajoutez un CommandField (si nécessaire) et définissez sa propriété `ShowEditButton` sur `true`.</span><span class="sxs-lookup"><span data-stu-id="a9fde-284">Checking the Enable Editing checkbox will add a CommandField (if needed) and set its `ShowEditButton` property to `true`.</span></span> <span data-ttu-id="a9fde-285">Comme nous l’avons vu précédemment, le CommandField contient un certain nombre de propriétés de `ShowXButton` qui indiquent la série de boutons affichée dans CommandField.</span><span class="sxs-lookup"><span data-stu-id="a9fde-285">As we saw earlier, the CommandField contains a number of `ShowXButton` properties that indicate what series of buttons are displayed in the CommandField.</span></span> <span data-ttu-id="a9fde-286">Cochez la case Activer la modification pour ajouter la propriété `ShowEditButton` à la propriété CommandField existante :</span><span class="sxs-lookup"><span data-stu-id="a9fde-286">Checking the Enable Editing checkbox adds the `ShowEditButton` property to the existing CommandField:</span></span>

[!code-aspx[Main](an-overview-of-inserting-updating-and-deleting-data-cs/samples/sample6.aspx)]

<span data-ttu-id="a9fde-287">C’est tout ce qu’il faut pour ajouter une prise en charge de la modification rudimentaire.</span><span class="sxs-lookup"><span data-stu-id="a9fde-287">That's all there is to adding rudimentary editing support.</span></span> <span data-ttu-id="a9fde-288">Comme le montre Figure16, l’interface de modification est plutôt grossière pour chaque BoundField dont la propriété `ReadOnly` est définie sur `false` (la valeur par défaut) est rendue sous la forme d’une zone de texte.</span><span class="sxs-lookup"><span data-stu-id="a9fde-288">As Figure16 shows, the editing interface is rather crude each BoundField whose `ReadOnly` property is set to `false` (the default) is rendered as a TextBox.</span></span> <span data-ttu-id="a9fde-289">Cela comprend des champs comme `CategoryID` et `SupplierID`, qui sont des clés pour d’autres tables.</span><span class="sxs-lookup"><span data-stu-id="a9fde-289">This includes fields like `CategoryID` and `SupplierID`, which are keys to other tables.</span></span>

<span data-ttu-id="a9fde-290">[![cliquant sur le bouton de modification Chai s affiche la ligne en mode édition](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image39.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="a9fde-290">[![Clicking Chai s Edit Button Displays the Row in Edit Mode](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image39.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image38.png)</span></span>

<span data-ttu-id="a9fde-291">**Figure 16**: cliquer sur le bouton de modification de l’option Chai s affiche la ligne en mode édition ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image40.png))</span><span class="sxs-lookup"><span data-stu-id="a9fde-291">**Figure 16**: Clicking Chai s Edit Button Displays the Row in Edit Mode ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image40.png))</span></span>

<span data-ttu-id="a9fde-292">En plus de demander aux utilisateurs de modifier directement les valeurs de clé étrangère, l’interface de l’interface de modification est absente des façons suivantes :</span><span class="sxs-lookup"><span data-stu-id="a9fde-292">In addition to asking users to edit foreign key values directly, the editing interface's interface is lacking in the following ways:</span></span>

- <span data-ttu-id="a9fde-293">Si l’utilisateur entre une `CategoryID` ou `SupplierID` qui n’existe pas dans la base de données, le `UPDATE` viole une contrainte de clé étrangère, provoquant la levée d’une exception.</span><span class="sxs-lookup"><span data-stu-id="a9fde-293">If the user enters a `CategoryID` or `SupplierID` that does not exist in the database, the `UPDATE` will violate a foreign key constraint, causing an exception to be raised.</span></span>
- <span data-ttu-id="a9fde-294">L’interface de modification n’inclut aucune validation.</span><span class="sxs-lookup"><span data-stu-id="a9fde-294">The editing interface doesn't include any validation.</span></span> <span data-ttu-id="a9fde-295">Si vous ne fournissez pas de valeur requise (par exemple `ProductName`), ou si vous entrez une valeur de chaîne dans laquelle une valeur numérique est attendue (par exemple, en entrant « trop ! »</span><span class="sxs-lookup"><span data-stu-id="a9fde-295">If you don't provide a required value (such as `ProductName`), or enter a string value where a numeric value is expected (such as entering "Too much!"</span></span> <span data-ttu-id="a9fde-296">dans la zone de texte `UnitPrice`), une exception est levée.</span><span class="sxs-lookup"><span data-stu-id="a9fde-296">into the `UnitPrice` textbox), an exception will be thrown.</span></span> <span data-ttu-id="a9fde-297">Un futur didacticiel examinera comment ajouter des contrôles de validation à l’interface utilisateur de modification.</span><span class="sxs-lookup"><span data-stu-id="a9fde-297">A future tutorial will examine how to add validation controls to the editing user interface.</span></span>
- <span data-ttu-id="a9fde-298">Actuellement, *tous les* champs de produit qui ne sont pas en lecture seule doivent être inclus dans le GridView.</span><span class="sxs-lookup"><span data-stu-id="a9fde-298">Currently, *all* product fields that are not read-only must be included in the GridView.</span></span> <span data-ttu-id="a9fde-299">Si nous devions supprimer un champ du GridView, par exemple `UnitPrice`, lors de la mise à jour des données, le contrôle GridView ne définit pas la valeur de la `UnitPrice` `UpdateParameters`, ce qui modifie le `UnitPrice` de l’enregistrement de base de données en `NULL` valeur.</span><span class="sxs-lookup"><span data-stu-id="a9fde-299">If we were to remove a field from the GridView, say `UnitPrice`, when updating the data the GridView would not set the `UnitPrice` `UpdateParameters` value, which would change the database record's `UnitPrice` to a `NULL` value.</span></span> <span data-ttu-id="a9fde-300">De même, si un champ obligatoire, tel que `ProductName`, est supprimé du GridView, la mise à jour échouera avec la même « la*colonne «ProductName » n’autorise pas les valeurs NULL*».</span><span class="sxs-lookup"><span data-stu-id="a9fde-300">Similarly, if a required field, such as `ProductName`, is removed from the GridView, the update will fail with the same "*Column 'ProductName' does not allow nulls*" exception mentioned above.</span></span>
- <span data-ttu-id="a9fde-301">La mise en forme de l’interface de modification laisse beaucoup à désirer.</span><span class="sxs-lookup"><span data-stu-id="a9fde-301">The editing interface formatting leaves a lot to be desired.</span></span> <span data-ttu-id="a9fde-302">La `UnitPrice` est affichée avec quatre points décimaux.</span><span class="sxs-lookup"><span data-stu-id="a9fde-302">The `UnitPrice` is shown with four decimal points.</span></span> <span data-ttu-id="a9fde-303">Dans l’idéal, les valeurs `CategoryID` et `SupplierID` contiennent des DropDownList qui répertorient les catégories et les fournisseurs dans le système.</span><span class="sxs-lookup"><span data-stu-id="a9fde-303">Ideally the `CategoryID` and `SupplierID` values would contain DropDownLists that list the categories and suppliers in the system.</span></span>

<span data-ttu-id="a9fde-304">Il s’agit de toutes les lacunes que nous devrons utiliser pour l’instant, mais elles seront abordées dans les prochains didacticiels.</span><span class="sxs-lookup"><span data-stu-id="a9fde-304">These are all shortcomings that we'll have to live with for now, but will be addressed in future tutorials.</span></span>

## <a name="inserting-editing-and-deleting-data-with-the-detailsview"></a><span data-ttu-id="a9fde-305">Insertion, modification et suppression de données à l’aide du contrôle DetailsView</span><span class="sxs-lookup"><span data-stu-id="a9fde-305">Inserting, Editing, and Deleting Data with the DetailsView</span></span>

<span data-ttu-id="a9fde-306">Comme nous l’avons vu dans les didacticiels précédents, le contrôle DetailsView affiche un enregistrement à la fois et, comme le GridView, permet la modification et la suppression de l’enregistrement actuellement affiché.</span><span class="sxs-lookup"><span data-stu-id="a9fde-306">As we've seen in earlier tutorials, the DetailsView control displays one record at a time and, like the GridView, allows for editing and deleting of the currently displayed record.</span></span> <span data-ttu-id="a9fde-307">L’expérience de l’utilisateur final avec la modification et la suppression d’éléments d’un DetailsView et du flux de travail du côté ASP.NET est identique à celle du contrôle GridView.</span><span class="sxs-lookup"><span data-stu-id="a9fde-307">Both the end user's experience with editing and deleting items from a DetailsView and the workflow from the ASP.NET side is identical to that of the GridView.</span></span> <span data-ttu-id="a9fde-308">Dans le cas où le DetailsView diffère de GridView, il fournit également une prise en charge de l’insertion intégrée.</span><span class="sxs-lookup"><span data-stu-id="a9fde-308">Where the DetailsView differs from the GridView is that it also provides built-in inserting support.</span></span>

<span data-ttu-id="a9fde-309">Pour illustrer les fonctionnalités de modification de données du contrôle GridView, commencez par ajouter un DetailsView à la `Basics.aspx` page au-dessus du GridView existant et liez-le à l’ObjectDataSource existant via la balise active du contrôle DetailsView.</span><span class="sxs-lookup"><span data-stu-id="a9fde-309">To demonstrate the data modification capabilities of the GridView, start by adding a DetailsView to the `Basics.aspx` page above the existing GridView and bind it to the existing ObjectDataSource through the DetailsView's smart tag.</span></span> <span data-ttu-id="a9fde-310">Ensuite, effacez les propriétés `Height` et `Width` du contrôle DetailsView, puis activez l’option Activer la pagination dans la balise active.</span><span class="sxs-lookup"><span data-stu-id="a9fde-310">Next, clear out the DetailsView's `Height` and `Width` properties, and check the Enable Paging option from the smart tag.</span></span> <span data-ttu-id="a9fde-311">Pour activer la prise en charge de la modification, de l’insertion et de la suppression, cochez simplement les cases activer la modification, activer l’insertion et activer la suppression dans la balise active.</span><span class="sxs-lookup"><span data-stu-id="a9fde-311">To enable editing, inserting, and deleting support, simply check the Enable Editing, Enable Inserting, and Enable Deleting checkboxes in the smart tag.</span></span>

![Configurer le contrôle DetailsView pour prendre en charge la modification, l’insertion et la suppression](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image41.png)

<span data-ttu-id="a9fde-313">**Figure 17**: configurer le contrôle DetailsView pour prendre en charge la modification, l’insertion et la suppression</span><span class="sxs-lookup"><span data-stu-id="a9fde-313">**Figure 17**: Configure the DetailsView to Support Editing, Inserting, and Deleting</span></span>

<span data-ttu-id="a9fde-314">Comme avec le contrôle GridView, l’ajout de la prise en charge de la modification, de l’insertion ou de la suppression ajoute une CommandField au DetailsView, comme le montre la syntaxe déclarative suivante :</span><span class="sxs-lookup"><span data-stu-id="a9fde-314">As with the GridView, adding editing, inserting, or deleting support adds a CommandField to the DetailsView, as the following declarative syntax shows:</span></span>

[!code-aspx[Main](an-overview-of-inserting-updating-and-deleting-data-cs/samples/sample7.aspx)]

<span data-ttu-id="a9fde-315">Notez que pour le DetailsView, le CommandField apparaît à la fin de la collection Columns par défaut.</span><span class="sxs-lookup"><span data-stu-id="a9fde-315">Note that for the DetailsView the CommandField appears at the end of the Columns collection by default.</span></span> <span data-ttu-id="a9fde-316">Étant donné que les champs du contrôle DetailsView sont rendus sous forme de lignes, le CommandField apparaît sous la forme d’une ligne avec les boutons Insérer, modifier et supprimer en bas du contrôle DetailsView.</span><span class="sxs-lookup"><span data-stu-id="a9fde-316">Since the DetailsView's fields are rendered as rows, the CommandField appears as a row with Insert, Edit, and Delete buttons at the bottom of the DetailsView.</span></span>

<span data-ttu-id="a9fde-317">[![configurer le contrôle DetailsView pour prendre en charge la modification, l’insertion et la suppression](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image43.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image42.png)</span><span class="sxs-lookup"><span data-stu-id="a9fde-317">[![Configure the DetailsView to Support Editing, Inserting, and Deleting](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image43.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image42.png)</span></span>

<span data-ttu-id="a9fde-318">**Figure 18**: configurer le contrôle DetailsView pour prendre en charge la modification, l’insertion et la suppression ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image44.png))</span><span class="sxs-lookup"><span data-stu-id="a9fde-318">**Figure 18**: Configure the DetailsView to Support Editing, Inserting, and Deleting ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image44.png))</span></span>

<span data-ttu-id="a9fde-319">Le fait de cliquer sur le bouton supprimer démarre la même séquence d’événements qu’avec le GridView : une publication (postback); suivi du DetailsView qui remplit le `DeleteParameters` de son ObjectDataSource en fonction des valeurs de `DataKeyNames` ; et s’achèvent par un appel de la méthode de `Delete()` de ObjectDataSource, qui supprime le produit de la base de données.</span><span class="sxs-lookup"><span data-stu-id="a9fde-319">Clicking on the Delete button starts the same sequence of events as with the GridView: a postback; followed by the DetailsView populating its ObjectDataSource's `DeleteParameters` based on the `DataKeyNames` values; and completed with a call its ObjectDataSource's `Delete()` method, which actually removes the product from the database.</span></span> <span data-ttu-id="a9fde-320">La modification dans le contrôle DetailsView fonctionne également de manière identique à celle du contrôle GridView.</span><span class="sxs-lookup"><span data-stu-id="a9fde-320">Editing in the DetailsView also works in a fashion identical to that of the GridView.</span></span>

<span data-ttu-id="a9fde-321">Pour l’insertion, l’utilisateur final reçoit un nouveau bouton qui, lorsque vous cliquez dessus, restitue le DetailsView en « mode insertion ».</span><span class="sxs-lookup"><span data-stu-id="a9fde-321">For inserting, the end user is presented with a New button that, when clicked, renders the DetailsView in "insert mode."</span></span> <span data-ttu-id="a9fde-322">Avec « mode insertion », le nouveau bouton est remplacé par les boutons Insérer et annuler et uniquement les BoundFields dont la propriété `InsertVisible` est définie sur `true` (valeur par défaut).</span><span class="sxs-lookup"><span data-stu-id="a9fde-322">With "insert mode" the New button is replaced by Insert and Cancel buttons and only those BoundFields whose `InsertVisible` property is set to `true` (the default) are displayed.</span></span> <span data-ttu-id="a9fde-323">Les champs de données identifiés comme des champs d’incrémentation automatique, tels que `ProductID`, ont leur [propriété InsertVisible](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datacontrolfield.insertvisible(VS.80).aspx) définie sur `false` lors de la liaison du contrôle DetailsView à la source de données via la balise active.</span><span class="sxs-lookup"><span data-stu-id="a9fde-323">Those data fields identified as auto-increment fields, such as `ProductID`, have their [InsertVisible property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.datacontrolfield.insertvisible(VS.80).aspx) set to `false` when binding the DetailsView to the data source through the smart tag.</span></span>

<span data-ttu-id="a9fde-324">Lors de la liaison d’une source de données à un contrôle DetailsView via la balise active, Visual Studio affecte à la propriété `InsertVisible` la valeur `false` uniquement pour les champs à incrémentation automatique.</span><span class="sxs-lookup"><span data-stu-id="a9fde-324">When binding a data source to a DetailsView through the smart tag, Visual Studio sets the `InsertVisible` property to `false` only for auto-increment fields.</span></span> <span data-ttu-id="a9fde-325">Les champs en lecture seule, comme `CategoryName` et `SupplierName`, s’affichent dans l’interface utilisateur « mode insertion », sauf si leur propriété `InsertVisible` est explicitement définie sur `false`.</span><span class="sxs-lookup"><span data-stu-id="a9fde-325">Read-only fields, like `CategoryName` and `SupplierName`, will be displayed in the "insert mode" user interface unless their `InsertVisible` property is explicitly set to `false`.</span></span> <span data-ttu-id="a9fde-326">Prenez un moment pour définir ces deux propriétés de `InsertVisible` de champs sur `false`, soit via la syntaxe déclarative du contrôle DetailsView, soit via le lien modifier les champs de la balise active.</span><span class="sxs-lookup"><span data-stu-id="a9fde-326">Take a moment to set these two fields' `InsertVisible` properties to `false`, either through the DetailsView's declarative syntax or through the Edit Fields link in the smart tag.</span></span> <span data-ttu-id="a9fde-327">La figure 19 montre comment définir les propriétés de `InsertVisible` à `false` en cliquant sur le lien modifier les champs.</span><span class="sxs-lookup"><span data-stu-id="a9fde-327">Figure 19 shows setting the `InsertVisible` properties to `false` by clicking on the Edit Fields link.</span></span>

<span data-ttu-id="a9fde-328">[![Northwind Traders propose désormais Acme Tea](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image46.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image45.png)</span><span class="sxs-lookup"><span data-stu-id="a9fde-328">[![Northwind Traders Now Offers Acme Tea](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image46.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image45.png)</span></span>

<span data-ttu-id="a9fde-329">**Figure 19**: Northwind Traders propose désormais Acme Tea ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image47.png))</span><span class="sxs-lookup"><span data-stu-id="a9fde-329">**Figure 19**: Northwind Traders Now Offers Acme Tea ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image47.png))</span></span>

<span data-ttu-id="a9fde-330">Après avoir défini les propriétés de `InsertVisible`, affichez la page `Basics.aspx` dans un navigateur, puis cliquez sur le bouton nouveau.</span><span class="sxs-lookup"><span data-stu-id="a9fde-330">After setting the `InsertVisible` properties, view the `Basics.aspx` page in a browser and click the New button.</span></span> <span data-ttu-id="a9fde-331">La figure 20 illustre le DetailsView lors de l’ajout d’une nouvelle boisson, le thé Acme, à notre gamme de produits.</span><span class="sxs-lookup"><span data-stu-id="a9fde-331">Figure 20 shows the DetailsView when adding a new beverage, Acme Tea, to our product line.</span></span>

<span data-ttu-id="a9fde-332">[![Northwind Traders propose désormais Acme Tea](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image49.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image48.png)</span><span class="sxs-lookup"><span data-stu-id="a9fde-332">[![Northwind Traders Now Offers Acme Tea](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image49.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image48.png)</span></span>

<span data-ttu-id="a9fde-333">**Figure 20**: Northwind Traders propose désormais Acme Tea ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image50.png))</span><span class="sxs-lookup"><span data-stu-id="a9fde-333">**Figure 20**: Northwind Traders Now Offers Acme Tea ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image50.png))</span></span>

<span data-ttu-id="a9fde-334">Après avoir entré les détails pour Acme Tea et cliqué sur le bouton Insérer, une publication est effectuée et le nouvel enregistrement est ajouté à la table de base de données `Products`.</span><span class="sxs-lookup"><span data-stu-id="a9fde-334">After entering the details for Acme Tea and clicking the Insert button, a postback ensues and the new record is added to the `Products` database table.</span></span> <span data-ttu-id="a9fde-335">Étant donné que ce contrôle DetailsView répertorie les produits dans l’ordre dans lequel ils se trouvent dans la table de base de données, nous devons effectuer une pagination vers le dernier produit afin de voir le nouveau produit.</span><span class="sxs-lookup"><span data-stu-id="a9fde-335">Since this DetailsView lists the products in order with which they exist in the database table, we must page to the last product in order to see the new product.</span></span>

<span data-ttu-id="a9fde-336">[Détails ![pour Acme thé](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image52.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image51.png)</span><span class="sxs-lookup"><span data-stu-id="a9fde-336">[![Details for Acme Tea](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image52.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image51.png)</span></span>

<span data-ttu-id="a9fde-337">**Figure 21**: détails pour Acme Tea ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image53.png))</span><span class="sxs-lookup"><span data-stu-id="a9fde-337">**Figure 21**: Details for Acme Tea ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image53.png))</span></span>

> [!NOTE]
> <span data-ttu-id="a9fde-338">La [propriété CurrentMode](https://msdn.microsoft.com/library/system.web.ui.webcontrols.detailsview.currentmode(VS.80).aspx) du contrôle DetailsView indique l’interface affichée et peut prendre l’une des valeurs suivantes : `Edit`, `Insert`ou `ReadOnly`.</span><span class="sxs-lookup"><span data-stu-id="a9fde-338">The DetailsView's [CurrentMode property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.detailsview.currentmode(VS.80).aspx) indicates the interface being displayed and can be one of the following values: `Edit`, `Insert`, or `ReadOnly`.</span></span> <span data-ttu-id="a9fde-339">La [propriété DefaultMode](https://msdn.microsoft.com/library/system.web.ui.webcontrols.detailsview.defaultmode(VS.80).aspx) indique le mode vers lequel le DetailsView retourne une fois qu’une opération de modification ou d’insertion est terminée et est utile pour afficher un DetailsView qui est définitivement en mode édition ou insertion.</span><span class="sxs-lookup"><span data-stu-id="a9fde-339">The [DefaultMode property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.detailsview.defaultmode(VS.80).aspx) indicates the mode the DetailsView returns to after an edit or insert has been completed and is useful for displaying a DetailsView that is permanently in edit or insert mode.</span></span>

<span data-ttu-id="a9fde-340">Le point et le clic sur les fonctionnalités d’insertion et de modification du contrôle DetailsView sont soumis aux mêmes limitations que le GridView : l’utilisateur doit entrer les valeurs `CategoryID` et `SupplierID` existantes dans une zone de texte. l’interface n’a pas de logique de validation ; tous les champs de produit qui n’autorisent pas les valeurs `NULL` ou qui n’ont pas de valeur par défaut spécifiée au niveau de la base de données doivent être inclus dans l’interface d’insertion, et ainsi de suite.</span><span class="sxs-lookup"><span data-stu-id="a9fde-340">The point and click inserting and editing capabilities of the DetailsView suffer from the same limitations as the GridView: the user must enter existing `CategoryID` and `SupplierID` values through a textbox; the interface lacks any validation logic; all product fields that do not allow `NULL` values or don't have a default value specified at the database level must be included in the inserting interface, and so on.</span></span>

<span data-ttu-id="a9fde-341">Les techniques que nous examinerons pour l’extension et l’amélioration de l’interface de modification de GridView dans les prochains articles peuvent également être appliquées aux interfaces de modification et d’insertion du contrôle DetailsView.</span><span class="sxs-lookup"><span data-stu-id="a9fde-341">The techniques we will examine for extending and enhancing the GridView's editing interface in future articles can be applied to the DetailsView control's editing and inserting interfaces as well.</span></span>

## <a name="using-the-formview-for-a-more-flexible-data-modification-user-interface"></a><span data-ttu-id="a9fde-342">Utilisation du FormView pour une interface utilisateur de modification de données plus flexible</span><span class="sxs-lookup"><span data-stu-id="a9fde-342">Using the FormView for a More Flexible Data Modification User Interface</span></span>

<span data-ttu-id="a9fde-343">Le contrôle FormView offre une prise en charge intégrée de l’insertion, de la modification et de la suppression des données, mais parce qu’il utilise des modèles au lieu de champs, il n’y a pas d’emplacement pour ajouter le BoundFields ou le CommandField utilisé par les contrôles GridView et DetailsView pour fournir les données. interface de modification.</span><span class="sxs-lookup"><span data-stu-id="a9fde-343">The FormView offers built-in support for inserting, editing, and deleting data, but because it uses templates instead of fields there's no place to add the BoundFields or the CommandField used by the GridView and DetailsView controls to provide the data modification interface.</span></span> <span data-ttu-id="a9fde-344">Au lieu de cela, cette interface permet d’ajouter manuellement les contrôles Web pour la collecte de l’entrée d’utilisateur lors de l’ajout d’un nouvel élément ou de la modification d’un élément existant, ainsi que des boutons nouveau, modifier, supprimer, insérer, mettre à jour et annuler.</span><span class="sxs-lookup"><span data-stu-id="a9fde-344">Instead, this interface the Web controls for collecting user input when adding a new item or editing an existing one along with the New, Edit, Delete, Insert, Update, and Cancel buttons must be added manually to the appropriate templates.</span></span> <span data-ttu-id="a9fde-345">Heureusement, Visual Studio crée automatiquement l’interface nécessaire lors de la liaison du FormView à une source de données via la liste déroulante de sa balise active.</span><span class="sxs-lookup"><span data-stu-id="a9fde-345">Fortunately, Visual Studio will automatically create the needed interface when binding the FormView to a data source through the drop-down list in its smart tag.</span></span>

<span data-ttu-id="a9fde-346">Pour illustrer ces techniques, commencez par ajouter un contrôle FormView à la page de `Basics.aspx` et, à partir de la balise active FormView, liez-le à l’ObjectDataSource déjà créé.</span><span class="sxs-lookup"><span data-stu-id="a9fde-346">To illustrate these techniques, start by adding a FormView to the `Basics.aspx` page and, from the FormView's smart tag, bind it to the ObjectDataSource already created.</span></span> <span data-ttu-id="a9fde-347">Cela génère un `EditItemTemplate`, `InsertItemTemplate`et `ItemTemplate` pour le FormView avec les contrôles Web TextBox pour la collecte des contrôles Web d’entrée et de bouton de l’utilisateur pour les boutons nouveau, modifier, supprimer, insérer, mettre à jour et annuler.</span><span class="sxs-lookup"><span data-stu-id="a9fde-347">This will generate an `EditItemTemplate`, `InsertItemTemplate`, and `ItemTemplate` for the FormView with TextBox Web controls for collecting the user's input and Button Web controls for the New, Edit, Delete, Insert, Update, and Cancel buttons.</span></span> <span data-ttu-id="a9fde-348">En outre, la propriété `DataKeyNames` du FormView est définie sur le champ de clé primaire (`ProductID`) de l’objet retourné par ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="a9fde-348">Additionally, the FormView's `DataKeyNames` property is set to the primary key field (`ProductID`) of the object returned by the ObjectDataSource.</span></span> <span data-ttu-id="a9fde-349">Enfin, activez l’option Activer la pagination dans la balise active du FormView.</span><span class="sxs-lookup"><span data-stu-id="a9fde-349">Lastly, check the Enable Paging option in the FormView's smart tag.</span></span>

<span data-ttu-id="a9fde-350">L’exemple suivant montre le balisage déclaratif pour le `ItemTemplate` du FormView une fois que le FormView a été lié à ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="a9fde-350">The following shows the declarative markup for the FormView's `ItemTemplate` after the FormView has been bound to the ObjectDataSource.</span></span> <span data-ttu-id="a9fde-351">Par défaut, chaque champ de valeur non Boolean est lié à la propriété `Text` d’un contrôle Web label lorsque chaque champ de valeur booléenne (`Discontinued`) est lié à la propriété `Checked` d’un contrôle Web CheckBox désactivé.</span><span class="sxs-lookup"><span data-stu-id="a9fde-351">By default, each non-Boolean value product field is bound to the `Text` property of a Label Web control while each Boolean value field (`Discontinued`) is bound to the `Checked` property of a disabled CheckBox Web control.</span></span> <span data-ttu-id="a9fde-352">Pour que les boutons nouveau, modifier et supprimer déclenchent certains comportements FormView lorsque vous cliquez dessus, il est impératif que leurs valeurs `CommandName` soient définies respectivement sur `New`, `Edit`et `Delete`.</span><span class="sxs-lookup"><span data-stu-id="a9fde-352">In order for the New, Edit, and Delete buttons to trigger certain FormView behavior when clicked, it is imperative that their `CommandName` values be set to `New`, `Edit`, and `Delete`, respectively.</span></span>

[!code-aspx[Main](an-overview-of-inserting-updating-and-deleting-data-cs/samples/sample8.aspx)]

<span data-ttu-id="a9fde-353">La figure 22 illustre le `ItemTemplate` du FormView lorsqu’il est affiché dans un navigateur.</span><span class="sxs-lookup"><span data-stu-id="a9fde-353">Figure 22 shows the FormView's `ItemTemplate` when viewed through a browser.</span></span> <span data-ttu-id="a9fde-354">Chaque champ de produit est listé avec les boutons nouveau, modifier et supprimer en bas.</span><span class="sxs-lookup"><span data-stu-id="a9fde-354">Each product field is listed with the New, Edit, and Delete buttons at the bottom.</span></span>

<span data-ttu-id="a9fde-355">[![le ItemTemplate défaut FormView répertorie chaque champ produit ainsi que les boutons nouveau, modifier et supprimer](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image55.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image54.png)</span><span class="sxs-lookup"><span data-stu-id="a9fde-355">[![The Defaut FormView ItemTemplate Lists Each Product Field Along with New, Edit, and Delete Buttons](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image55.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image54.png)</span></span>

<span data-ttu-id="a9fde-356">**Figure 22**: le `ItemTemplate` FormView défaut répertorie chaque champ produit ainsi que les boutons nouveau, modifier et supprimer ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image56.png))</span><span class="sxs-lookup"><span data-stu-id="a9fde-356">**Figure 22**: The Defaut FormView `ItemTemplate` Lists Each Product Field Along with New, Edit, and Delete Buttons ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image56.png))</span></span>

<span data-ttu-id="a9fde-357">Comme avec les contrôles GridView et DetailsView, le fait de cliquer sur le bouton supprimer ou sur un bouton, LinkButton ou ImageButton dont la propriété `CommandName` est définie sur Delete provoque une publication (postback), remplit le `DeleteParameters` de l’ObjectDataSource en fonction de la valeur de `DataKeyNames` du FormView, puis appelle la méthode de `Delete()` de l’ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="a9fde-357">Like with the GridView and DetailsView, clicking the Delete button or any Button, LinkButton, or ImageButton whose `CommandName` property is set to Delete causes a postback, populates the ObjectDataSource's `DeleteParameters` based on the FormView's `DataKeyNames` value, and invokes the ObjectDataSource's `Delete()` method.</span></span>

<span data-ttu-id="a9fde-358">Quand l’utilisateur clique sur le bouton modifier, une publication est effectuée et les données sont reliées à la `EditItemTemplate`, qui est chargée du rendu de l’interface de modification.</span><span class="sxs-lookup"><span data-stu-id="a9fde-358">When the Edit button is clicked a postback ensues and the data is rebound to the `EditItemTemplate`, which is responsible for rendering the editing interface.</span></span> <span data-ttu-id="a9fde-359">Cette interface comprend les contrôles Web pour la modification des données, ainsi que les boutons de mise à jour et d’annulation.</span><span class="sxs-lookup"><span data-stu-id="a9fde-359">This interface includes the Web controls for editing data along with the Update and Cancel buttons.</span></span> <span data-ttu-id="a9fde-360">Le `EditItemTemplate` par défaut généré par Visual Studio contient une étiquette pour tous les champs d’incrémentation automatique (`ProductID`), une zone de texte pour chaque champ de valeur non booléen et une case à cocher pour chaque champ de valeur booléenne.</span><span class="sxs-lookup"><span data-stu-id="a9fde-360">The default `EditItemTemplate` generated by Visual Studio contains a Label for any auto-increment fields (`ProductID`), a TextBox for each non-Boolean value field, and a CheckBox for each Boolean value field.</span></span> <span data-ttu-id="a9fde-361">Ce comportement est très similaire au BoundFields généré automatiquement dans les contrôles GridView et DetailsView.</span><span class="sxs-lookup"><span data-stu-id="a9fde-361">This behavior is very similar to the auto-generated BoundFields in the GridView and DetailsView controls.</span></span>

> [!NOTE]
> <span data-ttu-id="a9fde-362">L’un des petits problèmes avec la génération automatique du FormView du `EditItemTemplate` est qu’il affiche les contrôles Web TextBox pour les champs qui sont en lecture seule, tels que `CategoryName` et `SupplierName`.</span><span class="sxs-lookup"><span data-stu-id="a9fde-362">One small issue with the FormView's auto-generation of the `EditItemTemplate` is that it renders TextBox Web controls for those fields that are read-only, such as `CategoryName` and `SupplierName`.</span></span> <span data-ttu-id="a9fde-363">Nous verrons comment nous en tenir compte.</span><span class="sxs-lookup"><span data-stu-id="a9fde-363">We'll see how to account for this shortly.</span></span>

<span data-ttu-id="a9fde-364">Les contrôles TextBox dans le `EditItemTemplate` ont leur propriété `Text` liée à la valeur de leur champ de données correspondant à l’aide de la liaison de données *bidirectionnelle*.</span><span class="sxs-lookup"><span data-stu-id="a9fde-364">The TextBox controls in the `EditItemTemplate` have their `Text` property bound to the value of their corresponding data field using *two-way databinding*.</span></span> <span data-ttu-id="a9fde-365">La liaison de données bidirectionnelle, dénotée par `<%# Bind("dataField") %>`, effectue une liaison de données à la fois lors de la liaison de données au modèle et lors du remplissage des paramètres d’ObjectDataSource pour l’insertion ou la modification d’enregistrements.</span><span class="sxs-lookup"><span data-stu-id="a9fde-365">Two-way databinding, denoted by `<%# Bind("dataField") %>`, performs databinding both when binding data to the template and when populating the ObjectDataSource's parameters for inserting or editing records.</span></span> <span data-ttu-id="a9fde-366">Autrement dit, lorsque l’utilisateur clique sur le bouton modifier dans le `ItemTemplate`, la méthode `Bind()` retourne la valeur de champ de données spécifiée.</span><span class="sxs-lookup"><span data-stu-id="a9fde-366">That is, when the user clicks the Edit button from the `ItemTemplate`, the `Bind()` method returns the specified data field value.</span></span> <span data-ttu-id="a9fde-367">Une fois que l’utilisateur a effectué ses modifications et cliqué sur mettre à jour, les valeurs publiées qui correspondent aux champs de données spécifiés à l’aide de `Bind()` sont appliquées au `UpdateParameters`de l’ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="a9fde-367">After the user makes their changes and clicks Update, the values posted back that correspond to the data fields specified using `Bind()` are applied to the ObjectDataSource's `UpdateParameters`.</span></span> <span data-ttu-id="a9fde-368">Sinon, la liaison de données unidirectionnelle, dénotée par `<%# Eval("dataField") %>`, récupère uniquement les valeurs de champ de données lors de la liaison de données au modèle et ne retourne *pas* les valeurs entrées par l’utilisateur aux paramètres de la source de données lors de la publication (postback).</span><span class="sxs-lookup"><span data-stu-id="a9fde-368">Alternatively, one-way databinding, denoted by `<%# Eval("dataField") %>`, only retrieves the data field values when binding data to the template and does *not* return the user-entered values to the data source's parameters on postback.</span></span>

<span data-ttu-id="a9fde-369">Le balisage déclaratif suivant montre le `EditItemTemplate`du FormView.</span><span class="sxs-lookup"><span data-stu-id="a9fde-369">The following declarative markup shows the FormView's `EditItemTemplate`.</span></span> <span data-ttu-id="a9fde-370">Notez que la méthode `Bind()` est utilisée dans la syntaxe DataBinding ici et que les propriétés `CommandName` des contrôles Web des boutons Update et Cancel sont définies en conséquence.</span><span class="sxs-lookup"><span data-stu-id="a9fde-370">Note that the `Bind()` method is used in the databinding syntax here and that the Update and Cancel Button Web controls have their `CommandName` properties set accordingly.</span></span>

[!code-aspx[Main](an-overview-of-inserting-updating-and-deleting-data-cs/samples/sample9.aspx)]

<span data-ttu-id="a9fde-371">À ce stade, notre `EditItemTemplate`entraîne la levée d’une exception si nous tentons de l’utiliser.</span><span class="sxs-lookup"><span data-stu-id="a9fde-371">Our `EditItemTemplate`, at this point, will cause an exception to be thrown if we attempt to use it.</span></span> <span data-ttu-id="a9fde-372">Le problème est que les champs `CategoryName` et `SupplierName` sont rendus sous forme de contrôles Web TextBox dans le `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="a9fde-372">The problem is that the `CategoryName` and `SupplierName` fields are rendered as TextBox Web controls in the `EditItemTemplate`.</span></span> <span data-ttu-id="a9fde-373">Nous devons soit modifier ces zones de texte en étiquettes, soit les supprimer entièrement.</span><span class="sxs-lookup"><span data-stu-id="a9fde-373">We either need to change these TextBoxes to Labels or remove them altogether.</span></span> <span data-ttu-id="a9fde-374">Nous allons simplement les supprimer de la `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="a9fde-374">Let's simply delete them entirely from the `EditItemTemplate`.</span></span>

<span data-ttu-id="a9fde-375">La figure 23 montre le FormView dans un navigateur après que l’utilisateur a cliqué sur le bouton modifier pour Chai.</span><span class="sxs-lookup"><span data-stu-id="a9fde-375">Figure 23 shows the FormView in a browser after the Edit button has been clicked for Chai.</span></span> <span data-ttu-id="a9fde-376">Notez que les champs `SupplierName` et `CategoryName` affichés dans le `ItemTemplate` ne sont plus présents, car nous les avons simplement supprimés de la `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="a9fde-376">Note that the `SupplierName` and `CategoryName` fields shown in the `ItemTemplate` are no longer present, as we just removed them from the `EditItemTemplate`.</span></span> <span data-ttu-id="a9fde-377">Quand l’utilisateur clique sur le bouton mettre à jour, le FormView passe par la même séquence d’étapes que les contrôles GridView et DetailsView.</span><span class="sxs-lookup"><span data-stu-id="a9fde-377">When the Update button is clicked the FormView proceeds through the same sequence of steps as the GridView and DetailsView controls.</span></span>

<span data-ttu-id="a9fde-378">[![par défaut, EditItemTemplate affiche chaque champ produit modifiable sous la forme d’une zone de texte ou d’une case à cocher](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image58.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image57.png)</span><span class="sxs-lookup"><span data-stu-id="a9fde-378">[![By Default the EditItemTemplate Shows Each Editable Product Field as a TextBox or CheckBox](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image58.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image57.png)</span></span>

<span data-ttu-id="a9fde-379">**Figure 23**: par défaut, le `EditItemTemplate` affiche chaque champ de produit modifiable sous la forme d’une zone de texte ou d’une case à cocher ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image59.png))</span><span class="sxs-lookup"><span data-stu-id="a9fde-379">**Figure 23**: By Default the `EditItemTemplate` Shows Each Editable Product Field as a TextBox or CheckBox ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image59.png))</span></span>

<span data-ttu-id="a9fde-380">Quand le bouton Insérer est cliqué sur le `ItemTemplate` du FormView, une publication est effectuée.</span><span class="sxs-lookup"><span data-stu-id="a9fde-380">When the Insert button is clicked the FormView's `ItemTemplate` a postback ensues.</span></span> <span data-ttu-id="a9fde-381">Toutefois, aucune donnée n’est liée au FormView car un nouvel enregistrement est ajouté.</span><span class="sxs-lookup"><span data-stu-id="a9fde-381">However, no data is bound to the FormView because a new record is being added.</span></span> <span data-ttu-id="a9fde-382">L’interface `InsertItemTemplate` comprend les contrôles Web permettant d’ajouter un nouvel enregistrement avec les boutons d’insertion et d’annulation.</span><span class="sxs-lookup"><span data-stu-id="a9fde-382">The `InsertItemTemplate` interface includes the Web controls for adding a new record along with the Insert and Cancel buttons.</span></span> <span data-ttu-id="a9fde-383">Le `InsertItemTemplate` par défaut généré par Visual Studio contient une zone de texte pour chaque champ de valeur non booléen et une case à cocher pour chaque champ de valeur booléenne, similaire à l’interface de `EditItemTemplate`générée automatiquement.</span><span class="sxs-lookup"><span data-stu-id="a9fde-383">The default `InsertItemTemplate` generated by Visual Studio contains a TextBox for each non-Boolean value field and a CheckBox for each Boolean value field, similar to the auto-generated `EditItemTemplate`'s interface.</span></span> <span data-ttu-id="a9fde-384">La propriété `Text` des contrôles TextBox est liée à la valeur de leur champ de données correspondant à l’aide de la liaison de données bidirectionnelle.</span><span class="sxs-lookup"><span data-stu-id="a9fde-384">The TextBox controls have their `Text` property bound to the value of their corresponding data field using two-way databinding.</span></span>

<span data-ttu-id="a9fde-385">Le balisage déclaratif suivant montre le `InsertItemTemplate`du FormView.</span><span class="sxs-lookup"><span data-stu-id="a9fde-385">The following declarative markup shows the FormView's `InsertItemTemplate`.</span></span> <span data-ttu-id="a9fde-386">Notez que la méthode `Bind()` est utilisée dans la syntaxe DataBinding ici et que les propriétés `CommandName` des contrôles Web Insert et Cancel sont définies en conséquence.</span><span class="sxs-lookup"><span data-stu-id="a9fde-386">Note that the `Bind()` method is used in the databinding syntax here and that the Insert and Cancel Button Web controls have their `CommandName` properties set accordingly.</span></span>

[!code-aspx[Main](an-overview-of-inserting-updating-and-deleting-data-cs/samples/sample10.aspx)]

<span data-ttu-id="a9fde-387">Il y a une subtilité avec la génération automatique du FormView du `InsertItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="a9fde-387">There's a subtlety with the FormView's auto-generation of the `InsertItemTemplate`.</span></span> <span data-ttu-id="a9fde-388">Plus précisément, les contrôles Web TextBox sont créés même pour les champs qui sont en lecture seule, par exemple `CategoryName` et `SupplierName`.</span><span class="sxs-lookup"><span data-stu-id="a9fde-388">Specifically, the TextBox Web controls are created even for those fields that are read-only, such as `CategoryName` and `SupplierName`.</span></span> <span data-ttu-id="a9fde-389">Comme avec le `EditItemTemplate`, nous devons supprimer ces zones de texte du `InsertItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="a9fde-389">Like with the `EditItemTemplate`, we need to remove these TextBoxes from the `InsertItemTemplate`.</span></span>

<span data-ttu-id="a9fde-390">La figure 24 montre le FormView dans un navigateur lors de l’ajout d’un nouveau produit, Acme Coffee.</span><span class="sxs-lookup"><span data-stu-id="a9fde-390">Figure 24 shows the FormView in a browser when adding a new product, Acme Coffee.</span></span> <span data-ttu-id="a9fde-391">Notez que les champs `SupplierName` et `CategoryName` affichés dans le `ItemTemplate` ne sont plus présents, car nous venons de les supprimer.</span><span class="sxs-lookup"><span data-stu-id="a9fde-391">Note that the `SupplierName` and `CategoryName` fields shown in the `ItemTemplate` are no longer present, as we just removed them.</span></span> <span data-ttu-id="a9fde-392">Quand l’utilisateur clique sur le bouton Insérer, le FormView passe par la même séquence d’étapes que le contrôle DetailsView, en ajoutant un nouvel enregistrement à la table `Products`.</span><span class="sxs-lookup"><span data-stu-id="a9fde-392">When the Insert button is clicked the FormView proceeds through the same sequence of steps as the DetailsView control, adding a new record to the `Products` table.</span></span> <span data-ttu-id="a9fde-393">La figure 25 montre les détails du produit de café Acme dans le FormView après son insertion.</span><span class="sxs-lookup"><span data-stu-id="a9fde-393">Figure 25 shows Acme Coffee product's details in the FormView after it has been inserted.</span></span>

<span data-ttu-id="a9fde-394">[![InsertItemTemplate dicte l’interface d’insertion du FormView](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image61.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image60.png)</span><span class="sxs-lookup"><span data-stu-id="a9fde-394">[![The InsertItemTemplate Dictates the FormView's Inserting Interface](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image61.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image60.png)</span></span>

<span data-ttu-id="a9fde-395">**Figure 24**: le `InsertItemTemplate` dicte l’interface d’insertion du FormView ([cliquez pour afficher l’image en taille réelle](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image62.png))</span><span class="sxs-lookup"><span data-stu-id="a9fde-395">**Figure 24**: The `InsertItemTemplate` Dictates the FormView's Inserting Interface ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image62.png))</span></span>

<span data-ttu-id="a9fde-396">[![les détails pour le nouveau produit, Acme Coffee, s’affichent dans le FormView](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image64.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image63.png)</span><span class="sxs-lookup"><span data-stu-id="a9fde-396">[![The Details for New Product, Acme Coffee, are Displayed in the FormView](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image64.png)](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image63.png)</span></span>

<span data-ttu-id="a9fde-397">**Figure 25**: les détails pour le nouveau produit, Acme Coffee, s’affichent dans le FormView ([cliquez pour afficher l’image en plein écran](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image65.png))</span><span class="sxs-lookup"><span data-stu-id="a9fde-397">**Figure 25**: The Details for New Product, Acme Coffee, are Displayed in the FormView ([Click to view full-size image](an-overview-of-inserting-updating-and-deleting-data-cs/_static/image65.png))</span></span>

<span data-ttu-id="a9fde-398">En séparant les interfaces en lecture seule, en modifiant et en insérant dans trois modèles distincts, le FormView offre un degré de contrôle plus fin sur ces interfaces que sur DetailsView et GridView.</span><span class="sxs-lookup"><span data-stu-id="a9fde-398">By separating out the read-only, editing, and inserting interfaces into three separate templates, the FormView allows for a finer degree of control over these interfaces than the DetailsView and GridView.</span></span>

> [!NOTE]
> <span data-ttu-id="a9fde-399">À l’instar de DetailsView, la propriété `CurrentMode` du FormView indique l’interface affichée et sa propriété `DefaultMode` indique le mode vers lequel le FormView retourne une valeur après la fin d’une opération de modification ou d’insertion.</span><span class="sxs-lookup"><span data-stu-id="a9fde-399">Like the DetailsView, the FormView's `CurrentMode` property indicates the interface being displayed and its `DefaultMode` property indicates the mode the FormView returns to after an edit or insert has been completed.</span></span>

## <a name="summary"></a><span data-ttu-id="a9fde-400">Récapitulatif</span><span class="sxs-lookup"><span data-stu-id="a9fde-400">Summary</span></span>

<span data-ttu-id="a9fde-401">Dans ce didacticiel, nous avons examiné les principes fondamentaux de l’insertion, de la modification et de la suppression de données à l’aide de GridView, DetailsView et FormView.</span><span class="sxs-lookup"><span data-stu-id="a9fde-401">In this tutorial we examined the basics of inserting, editing, and deleting data using the GridView, DetailsView, and FormView.</span></span> <span data-ttu-id="a9fde-402">Ces trois contrôles fournissent un certain niveau de fonctionnalités de modification de données intégrées qui peuvent être utilisées sans écrire une seule ligne de code dans la page ASP.NET grâce aux contrôles Web de données et à ObjectDataSource.</span><span class="sxs-lookup"><span data-stu-id="a9fde-402">All three of these controls provide some level of built-in data modification capabilities that can be utilized without writing a single line of code in the ASP.NET page thanks to the data Web controls and the ObjectDataSource.</span></span> <span data-ttu-id="a9fde-403">Toutefois, les techniques simples et simples permettent d’afficher une interface utilisateur de modification de données Frail et naïve.</span><span class="sxs-lookup"><span data-stu-id="a9fde-403">However, the simple point and click techniques render a fairly frail and naïve data modification user interface.</span></span> <span data-ttu-id="a9fde-404">Pour fournir la validation, injecter des valeurs de programmation, gérer correctement les exceptions, personnaliser l’interface utilisateur, et ainsi de suite, nous devons nous appuyer sur un multitude de techniques qui seront abordées dans les prochains didacticiels.</span><span class="sxs-lookup"><span data-stu-id="a9fde-404">To provide validation, inject programmatic values, gracefully handle exceptions, customize the user interface, and so on, we'll need to rely on a bevy of techniques that will be discussed over the next several tutorials.</span></span>

<span data-ttu-id="a9fde-405">Bonne programmation !</span><span class="sxs-lookup"><span data-stu-id="a9fde-405">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="a9fde-406">À propos de l’auteur</span><span class="sxs-lookup"><span data-stu-id="a9fde-406">About the Author</span></span>

<span data-ttu-id="a9fde-407">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), auteur de sept livres ASP/ASP. net et fondateur de [4GuysFromRolla.com](http://www.4guysfromrolla.com), travaille avec des technologies Web Microsoft depuis 1998.</span><span class="sxs-lookup"><span data-stu-id="a9fde-407">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="a9fde-408">Scott travaille en tant que consultant, formateur et auteur indépendant.</span><span class="sxs-lookup"><span data-stu-id="a9fde-408">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="a9fde-409">Son dernier livre est [*Sams vous apprend vous-même ASP.NET 2,0 en 24 heures*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="a9fde-409">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="a9fde-410">Il peut être contacté à [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="a9fde-410">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="a9fde-411">ou via son blog, qui se trouve sur [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="a9fde-411">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="a9fde-412">Suivant</span><span class="sxs-lookup"><span data-stu-id="a9fde-412">Next</span></span>](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md)

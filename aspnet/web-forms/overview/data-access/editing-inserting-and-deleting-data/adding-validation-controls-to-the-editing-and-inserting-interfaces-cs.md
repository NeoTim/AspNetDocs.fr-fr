---
uid: web-forms/overview/data-access/editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs
title: Ajout de contrôles de Validation à la modification des Interfaces et d’insertion (C#) | Microsoft Docs
author: rick-anderson
description: Dans ce didacticiel, nous allons voir combien il est facile pour ajouter des contrôles de validation aux EditItemTemplate et InsertItemTemplate d’un contrôle Web, des données pour fournir une plus...
ms.author: riande
ms.date: 07/17/2006
ms.assetid: 2086cb1a-ab78-49ae-9c0b-03891c69776a
msc.legacyurl: /web-forms/overview/data-access/editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs
msc.type: authoredcontent
ms.openlocfilehash: 4990ce2c15465873ef08aeb697780d98a186b3c6
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/01/2019
ms.locfileid: "57026536"
---
<a name="adding-validation-controls-to-the-editing-and-inserting-interfaces-c"></a><span data-ttu-id="38f0c-103">Ajout de contrôles Validation aux interfaces de modification et d’insertion (C#)</span><span class="sxs-lookup"><span data-stu-id="38f0c-103">Adding Validation Controls to the Editing and Inserting Interfaces (C#)</span></span>
====================
<span data-ttu-id="38f0c-104">par [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="38f0c-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="38f0c-105">[Télécharger l’exemple d’application](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_19_CS.exe) ou [télécharger le PDF](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/datatutorial19cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="38f0c-105">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_19_CS.exe) or [Download PDF](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/datatutorial19cs1.pdf)</span></span>

> <span data-ttu-id="38f0c-106">Dans ce didacticiel, nous allons voir combien il est facile pour ajouter des contrôles de validation au EditItemTemplate et InsertItemTemplate d’un contrôle Web, des données pour fournir une interface utilisateur plus infaillible.</span><span class="sxs-lookup"><span data-stu-id="38f0c-106">In this tutorial we'll see how easy it is to add validation controls to the EditItemTemplate and InsertItemTemplate of a data Web control, to provide a more foolproof user interface.</span></span>


## <a name="introduction"></a><span data-ttu-id="38f0c-107">Introduction</span><span class="sxs-lookup"><span data-stu-id="38f0c-107">Introduction</span></span>

<span data-ttu-id="38f0c-108">Les contrôles GridView et DetailsView dans les exemples que nous avons exploré au cours des trois didacticiels ont tous été composés de BoundFields et CheckBoxFields (les types de champs ajoutés automatiquement par Visual Studio lors de la liaison d’un GridView ou un contrôle DetailsView à une source de données contrôler via la balise active).</span><span class="sxs-lookup"><span data-stu-id="38f0c-108">The GridView and DetailsView controls in the examples we've explored over the past three tutorials have all been composed of BoundFields and CheckBoxFields (the field types automatically added by Visual Studio when binding a GridView or DetailsView to a data source control through the smart tag).</span></span> <span data-ttu-id="38f0c-109">Lorsque vous modifiez une ligne dans un GridView ou d’un contrôle DetailsView, ces BoundFields qui ne sont pas en lecture seule sont convertis en zones de texte, à partir de laquelle l’utilisateur final peut modifier les données existantes.</span><span class="sxs-lookup"><span data-stu-id="38f0c-109">When editing a row in a GridView or DetailsView, those BoundFields that are not read-only are converted into textboxes, from which the end user can modify the existing data.</span></span> <span data-ttu-id="38f0c-110">De même, lorsque insérer un nouveau enregistrer dans un contrôle DetailsView, ces BoundFields dont `InsertVisible` propriété est définie sur `true` (la valeur par défaut) sont rendus sous forme de zones de texte vide, dans laquelle l’utilisateur peut fournir des valeurs de champ du nouvel enregistrement.</span><span class="sxs-lookup"><span data-stu-id="38f0c-110">Similarly, when inserting a new record into a DetailsView control, those BoundFields whose `InsertVisible` property is set to `true` (the default) are rendered as empty textboxes, into which the user can provide the new record's field values.</span></span> <span data-ttu-id="38f0c-111">De même, CheckBoxFields, qui sont désactivées dans l’interface standard, en lecture seule, sont convertis en cases à cocher est activée dans la modification des interfaces et d’insertion.</span><span class="sxs-lookup"><span data-stu-id="38f0c-111">Likewise, CheckBoxFields, which are disabled in the standard, read-only interface, are converted into enabled checkboxes in the editing and inserting interfaces.</span></span>

<span data-ttu-id="38f0c-112">Si la valeur par défaut, modification et l’insertion des interfaces pour la BoundField et CheckBoxField peut être utile, l’interface n’a pas une forme quelconque de validation.</span><span class="sxs-lookup"><span data-stu-id="38f0c-112">While the default editing and inserting interfaces for the BoundField and CheckBoxField can be helpful, the interface lacks any sort of validation.</span></span> <span data-ttu-id="38f0c-113">Si un utilisateur commet une erreur données entrée - par exemple en omettant le `ProductName` champ ou en entrant une valeur non valide pour `UnitsInStock` (par exemple, -50) est une exception sera levée depuis dans les profondeurs de l’architecture d’application.</span><span class="sxs-lookup"><span data-stu-id="38f0c-113">If a user makes a data entry mistake - such as omitting the `ProductName` field or entering an invalid value for `UnitsInStock` (such as -50) an exception will be raised from within the depths of the application architecture.</span></span> <span data-ttu-id="38f0c-114">Bien que cette exception peut être gérée normalement comme illustré dans le [didacticiel précédent](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-cs.md), dans l’idéal, la modification ou l’insertion de l’interface utilisateur inclut des contrôles de validation pour empêcher un utilisateur d’entrer ces données non valides dans le tout d’abord placer.</span><span class="sxs-lookup"><span data-stu-id="38f0c-114">While this exception can be gracefully handled as demonstrated in the [previous tutorial](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-cs.md), ideally the editing or inserting user interface would include validation controls to prevent a user from entering such invalid data in the first place.</span></span>

<span data-ttu-id="38f0c-115">Afin de fournir une édition personnalisée ou une interface d’insertion, nous devons remplacer le BoundField ou CheckBoxField avec TemplateField.</span><span class="sxs-lookup"><span data-stu-id="38f0c-115">In order to provide a customized editing or inserting interface, we need to replace the BoundField or CheckBoxField with a TemplateField.</span></span> <span data-ttu-id="38f0c-116">TemplateField, qui ont été le sujet de discussion dans le [à l’aide de TemplateFields dans le contrôle GridView](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) et [à l’aide de TemplateFields dans le contrôle DetailsView](../custom-formatting/using-templatefields-in-the-detailsview-control-cs.md) didacticiels, peut se composer de plusieurs modèles de définition de séparent les interfaces pour les États des lignes différentes.</span><span class="sxs-lookup"><span data-stu-id="38f0c-116">TemplateFields, which were the topic of discussion in the [Using TemplateFields in the GridView Control](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) and [Using TemplateFields in the DetailsView Control](../custom-formatting/using-templatefields-in-the-detailsview-control-cs.md) tutorials, can consist of multiple templates defining separate interfaces for different row states.</span></span> <span data-ttu-id="38f0c-117">Le TemplateField `ItemTemplate` est utilisé pour lors du rendu des champs en lecture seule ou des lignes dans les contrôles DetailsView ou GridView, tandis que le `EditItemTemplate` et `InsertItemTemplate` indiquent les interfaces à utiliser pour la modification et l’insertion des modes, respectivement.</span><span class="sxs-lookup"><span data-stu-id="38f0c-117">The TemplateField's `ItemTemplate` is used to when rendering read-only fields or rows in the DetailsView or GridView controls, whereas the `EditItemTemplate` and `InsertItemTemplate` indicate the interfaces to use for the editing and inserting modes, respectively.</span></span>

<span data-ttu-id="38f0c-118">Dans ce didacticiel, nous allons voir combien il est facile d’ajouter des contrôles de validation pour le TemplateField `EditItemTemplate` et `InsertItemTemplate` pour fournir une interface utilisateur plus infaillible.</span><span class="sxs-lookup"><span data-stu-id="38f0c-118">In this tutorial we'll see how easy it is to add validation controls to the TemplateField's `EditItemTemplate` and `InsertItemTemplate` to provide a more foolproof user interface.</span></span> <span data-ttu-id="38f0c-119">Plus précisément, ce didacticiel prend l’exemple créé dans le [examinant les événements associés insertion, mise à jour et suppression](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) didacticiel et renforce la modification et l’insertion d’interfaces pour inclure la validation appropriée.</span><span class="sxs-lookup"><span data-stu-id="38f0c-119">Specifically, this tutorial takes the example created in the [Examining the Events Associated with Inserting, Updating, and Deleting](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) tutorial and augments the editing and inserting interfaces to include appropriate validation.</span></span>

## <a name="step-1-replicating-the-example-fromexamining-the-events-associated-with-inserting-updating-and-deletingexamining-the-events-associated-with-inserting-updating-and-deleting-csmd"></a><span data-ttu-id="38f0c-120">Étape 1 : Réplication de l’exemple à partir de[examen des événements associés de l’insertion, de la mise à jour et de suppression](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md)</span><span class="sxs-lookup"><span data-stu-id="38f0c-120">Step 1: Replicating the Example from[Examining the Events Associated with Inserting, Updating, and Deleting](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md)</span></span>

<span data-ttu-id="38f0c-121">Dans le [examinant les événements associés insertion, mise à jour et suppression](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) didacticiel, nous avons créé une page qui liste les noms et les prix des produits dans un GridView modifiable.</span><span class="sxs-lookup"><span data-stu-id="38f0c-121">In the [Examining the Events Associated with Inserting, Updating, and Deleting](examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) tutorial we created a page that listed the names and prices of the products in an editable GridView.</span></span> <span data-ttu-id="38f0c-122">En outre, la page inclus un contrôle DetailsView dont `DefaultMode` propriété a été définie sur `Insert`, il est donc toujours rendu en mode insertion.</span><span class="sxs-lookup"><span data-stu-id="38f0c-122">Additionally, the page included a DetailsView whose `DefaultMode` property was set to `Insert`, thereby always rendering in insert mode.</span></span> <span data-ttu-id="38f0c-123">À partir de ce contrôle DetailsView, l’utilisateur peut entrer le nom et le prix d’un nouveau produit et cliquez sur Insertion, l’avez ajouté au système (voir Figure 1).</span><span class="sxs-lookup"><span data-stu-id="38f0c-123">From this DetailsView, the user could enter the name and price for a new product, click Insert, and have it added to the system (see Figure 1).</span></span>


<span data-ttu-id="38f0c-124">[![L’exemple précédent permet aux utilisateurs d’ajouter de nouveaux produits et de modifier des relations existantes](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image2.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="38f0c-124">[![The Previous Example Allows Users to Add New Products and Edit Existing Ones](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image2.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image1.png)</span></span>

<span data-ttu-id="38f0c-125">**Figure 1**: Le précédent exemple permet aux utilisateurs à ajouter de nouveaux produits et de modifier certains d'entre eux ([cliquez pour afficher l’image en taille réelle](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="38f0c-125">**Figure 1**: The Previous Example Allows Users to Add New Products and Edit Existing Ones ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image3.png))</span></span>


<span data-ttu-id="38f0c-126">Notre objectif pour ce didacticiel consiste à augmenter le DetailsView et un GridView pour fournir des contrôles de validation.</span><span class="sxs-lookup"><span data-stu-id="38f0c-126">Our goal for this tutorial is to augment the DetailsView and GridView to provide validation controls.</span></span> <span data-ttu-id="38f0c-127">En particulier, notre logique de validation sera :</span><span class="sxs-lookup"><span data-stu-id="38f0c-127">In particular, our validation logic will:</span></span>

- <span data-ttu-id="38f0c-128">Exiger que le nom lors de l’insertion ou modification d’un produit</span><span class="sxs-lookup"><span data-stu-id="38f0c-128">Require that the name be provided when inserting or editing a product</span></span>
- <span data-ttu-id="38f0c-129">Exiger que le prix être fournie lors de l’insertion d’un enregistrement. Lorsque vous modifiez un enregistrement, nous nécessitera toujours un prix, mais utilise la logique de programmation dans le GridView `RowUpdating` Gestionnaire d’événements déjà présent dans le tutoriel précédent</span><span class="sxs-lookup"><span data-stu-id="38f0c-129">Require that the price be provided when inserting a record; when editing a record, we will still require a price, but will use the programmatic logic in the GridView's `RowUpdating` event handler already present from the earlier tutorial</span></span>
- <span data-ttu-id="38f0c-130">Vérifiez que la valeur entrée pour le prix est un format monétaire valide</span><span class="sxs-lookup"><span data-stu-id="38f0c-130">Ensure that the value entered for the price is a valid currency format</span></span>

<span data-ttu-id="38f0c-131">Avant que nous pouvons examiner l’exemple précédent pour inclure la validation en décuplant le volume, nous devons tout d’abord répliquer l’exemple à partir de la `DataModificationEvents.aspx` page à la page pour ce didacticiel, `UIValidation.aspx`.</span><span class="sxs-lookup"><span data-stu-id="38f0c-131">Before we can look at augmenting the previous example to include validation, we first need to replicate the example from the `DataModificationEvents.aspx` page to the page for this tutorial, `UIValidation.aspx`.</span></span> <span data-ttu-id="38f0c-132">Pour cela nous devons recopiez les deux le `DataModificationEvents.aspx` balisage déclaratif de la page et son code source.</span><span class="sxs-lookup"><span data-stu-id="38f0c-132">To accomplish this we need to copy over both the `DataModificationEvents.aspx` page's declarative markup and its source code.</span></span> <span data-ttu-id="38f0c-133">Un premier temps copier le balisage déclaratif en effectuant les étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="38f0c-133">First copy over the declarative markup by performing the following steps:</span></span>

1. <span data-ttu-id="38f0c-134">Ouvrez le `DataModificationEvents.aspx` page dans Visual Studio</span><span class="sxs-lookup"><span data-stu-id="38f0c-134">Open the `DataModificationEvents.aspx` page in Visual Studio</span></span>
2. <span data-ttu-id="38f0c-135">Accédez à balisage déclaratif de la page (cliquez sur le bouton de la Source en bas de la page)</span><span class="sxs-lookup"><span data-stu-id="38f0c-135">Go to the page's declarative markup (click on the Source button at the bottom of the page)</span></span>
3. <span data-ttu-id="38f0c-136">Copiez le texte dans le `<asp:Content>` et `</asp:Content>` les balises (lignes 3 à 44), comme illustré dans la Figure 2.</span><span class="sxs-lookup"><span data-stu-id="38f0c-136">Copy the text within the `<asp:Content>` and `</asp:Content>` tags (lines 3 through 44), as shown in Figure 2.</span></span>


<span data-ttu-id="38f0c-137">[![Copiez le texte au sein de la &lt;asp : Content&gt; contrôle](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image5.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="38f0c-137">[![Copy the Text Within the &lt;asp:Content&gt; Control](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image5.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image4.png)</span></span>

<span data-ttu-id="38f0c-138">**Figure 2**: Copiez le texte au sein de la `<asp:Content>` contrôle ([cliquez pour afficher l’image en taille réelle](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="38f0c-138">**Figure 2**: Copy the Text Within the `<asp:Content>` Control ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image6.png))</span></span>


1. <span data-ttu-id="38f0c-139">Ouvrez le `UIValidation.aspx` page</span><span class="sxs-lookup"><span data-stu-id="38f0c-139">Open the `UIValidation.aspx` page</span></span>
2. <span data-ttu-id="38f0c-140">Accédez à balisage déclaratif de la page</span><span class="sxs-lookup"><span data-stu-id="38f0c-140">Go to the page's declarative markup</span></span>
3. <span data-ttu-id="38f0c-141">Collez le texte dans le `<asp:Content>` contrôle.</span><span class="sxs-lookup"><span data-stu-id="38f0c-141">Paste the text within the `<asp:Content>` control.</span></span>

<span data-ttu-id="38f0c-142">Pour copier le code source, ouvrez le `DataModificationEvents.aspx.cs` page puis copiez simplement le texte *dans* la `EditInsertDelete_DataModificationEvents` classe.</span><span class="sxs-lookup"><span data-stu-id="38f0c-142">To copy over the source code, open the `DataModificationEvents.aspx.cs` page and copy just the text *within* the `EditInsertDelete_DataModificationEvents` class.</span></span> <span data-ttu-id="38f0c-143">Copiez les trois gestionnaires d’événements (`Page_Load`, `GridView1_RowUpdating`, et `ObjectDataSource1_Inserting`), contrairement à **pas** copier la déclaration de classe ou `using` instructions.</span><span class="sxs-lookup"><span data-stu-id="38f0c-143">Copy the three event handlers (`Page_Load`, `GridView1_RowUpdating`, and `ObjectDataSource1_Inserting`), but do **not** copy the class declaration or `using` statements.</span></span> <span data-ttu-id="38f0c-144">Coller le texte copié *dans* le `EditInsertDelete_UIValidation` classe dans `UIValidation.aspx.cs`.</span><span class="sxs-lookup"><span data-stu-id="38f0c-144">Paste the copied text *within* the `EditInsertDelete_UIValidation` class in `UIValidation.aspx.cs`.</span></span>

<span data-ttu-id="38f0c-145">Après avoir déplacé le contenu et le code à partir de `DataModificationEvents.aspx` à `UIValidation.aspx`, prenez un moment pour tester votre progression dans un navigateur.</span><span class="sxs-lookup"><span data-stu-id="38f0c-145">After moving over the content and code from `DataModificationEvents.aspx` to `UIValidation.aspx`, take a moment to test out your progress in a browser.</span></span> <span data-ttu-id="38f0c-146">Vous devriez voir la même sortie et rencontrez les mêmes fonctionnalités dans chacune de ces deux pages (vous référer à la Figure 1 pour la capture d’écran `DataModificationEvents.aspx` en action).</span><span class="sxs-lookup"><span data-stu-id="38f0c-146">You should see the same output and experience the same functionality in each of these two pages (refer back to Figure 1 for a screen shot of `DataModificationEvents.aspx` in action).</span></span>

## <a name="step-2-converting-the-boundfields-into-templatefields"></a><span data-ttu-id="38f0c-147">Étape 2 : Conversion de la BoundFields en TemplateField</span><span class="sxs-lookup"><span data-stu-id="38f0c-147">Step 2: Converting the BoundFields Into TemplateFields</span></span>

<span data-ttu-id="38f0c-148">Pour ajouter des contrôles de validation aux interfaces d’éditions et insertion, les BoundFields utilisés par les contrôles DetailsView et GridView doivent être converties en TemplateField.</span><span class="sxs-lookup"><span data-stu-id="38f0c-148">To add validation controls to the editing and inserting interfaces, the BoundFields used by the DetailsView and GridView controls need to be converted into TemplateFields.</span></span> <span data-ttu-id="38f0c-149">Pour ce faire, cliquez sur les liens de modifier les colonnes et modifier les champs dans les contrôles GridView et de DetailsView balises actives, respectivement.</span><span class="sxs-lookup"><span data-stu-id="38f0c-149">To achieve this, click on the Edit Columns and Edit Fields links in the GridView and DetailsView's smart tags, respectively.</span></span> <span data-ttu-id="38f0c-150">Là, sélectionnez chacune du BoundFields et cliquez sur le lien « Convertir ce champ en TemplateField ».</span><span class="sxs-lookup"><span data-stu-id="38f0c-150">There, select each of the BoundFields and click the "Convert this field into a TemplateField" link.</span></span>


<span data-ttu-id="38f0c-151">[![Chacun des BoundFields le de DetailsView et de GridView convertir en TemplateField](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image8.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="38f0c-151">[![Convert Each of the DetailsView's and GridView's BoundFields Into TemplateFields](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image8.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image7.png)</span></span>

<span data-ttu-id="38f0c-152">**Figure 3**: Convertir chacun du de DetailsView et de GridView BoundFields dans TemplateFields ([cliquez pour afficher l’image en taille réelle](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="38f0c-152">**Figure 3**: Convert Each of the DetailsView's and GridView's BoundFields Into TemplateFields ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image9.png))</span></span>


<span data-ttu-id="38f0c-153">Conversion d’un BoundField en TemplateField via la boîte de dialogue champs génère TemplateField présentant les mêmes interfaces en lecture seule, éditions et insertion comme le BoundField lui-même.</span><span class="sxs-lookup"><span data-stu-id="38f0c-153">Converting a BoundField into a TemplateField through the Fields dialog box generates a TemplateField that exhibits the same read-only, editing, and inserting interfaces as the BoundField itself.</span></span> <span data-ttu-id="38f0c-154">Le balisage suivant montre la syntaxe déclarative pour le `ProductName` champ dans le contrôle DetailsView après qu’il a été converti en TemplateField :</span><span class="sxs-lookup"><span data-stu-id="38f0c-154">The following markup shows the declarative syntax for the `ProductName` field in the DetailsView after it has been converted into a TemplateField:</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample1.aspx)]

<span data-ttu-id="38f0c-155">Notez que cette TemplateField avait trois modèles automatiquement créés `ItemTemplate`, `EditItemTemplate`, et `InsertItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="38f0c-155">Note that this TemplateField had three templates automatically created `ItemTemplate`, `EditItemTemplate`, and `InsertItemTemplate`.</span></span> <span data-ttu-id="38f0c-156">Le `ItemTemplate` affiche une valeur de champ de données unique (`ProductName`) à l’aide d’un contrôle Web Label, tandis que le `EditItemTemplate` et `InsertItemTemplate` présenter la valeur de champ de données dans un contrôle TextBox Web qui associe le champ de données à la zone de texte `Text` propriété à l’aide de la liaison de données bidirectionnelle.</span><span class="sxs-lookup"><span data-stu-id="38f0c-156">The `ItemTemplate` displays a single data field value (`ProductName`) using a Label Web control, while the `EditItemTemplate` and `InsertItemTemplate` present the data field value in a TextBox Web control that associates the data field with the TextBox's `Text` property using two-way databinding.</span></span> <span data-ttu-id="38f0c-157">Étant donné que nous utilisons uniquement le contrôle DetailsView dans cette page pour l’insertion, vous pouvez supprimer le `ItemTemplate` et `EditItemTemplate` à partir de la deux TemplateField, bien qu’il n’existe aucun risque à les laisser.</span><span class="sxs-lookup"><span data-stu-id="38f0c-157">Since we are only using the DetailsView in this page for inserting, you may remove the `ItemTemplate` and `EditItemTemplate` from the two TemplateFields, although there's no harm in leaving them.</span></span>

<span data-ttu-id="38f0c-158">Dans la mesure où le contrôle GridView ne prend pas en charge intégrés insertion des fonctionnalités de DetailsView, de convertir le GridView `ProductName` champ en TemplateField génère uniquement un `ItemTemplate` et `EditItemTemplate`:</span><span class="sxs-lookup"><span data-stu-id="38f0c-158">Since the GridView does not support the built-in inserting features of the DetailsView, converting the GridView's `ProductName` field into a TemplateField results in only an `ItemTemplate` and `EditItemTemplate`:</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample2.aspx)]

<span data-ttu-id="38f0c-159">En cliquant sur la « convertir ce champ en TemplateField », Visual Studio a créé un TemplateField dont modèles imitent l’interface utilisateur de la BoundField converti.</span><span class="sxs-lookup"><span data-stu-id="38f0c-159">By clicking the "Convert this field into a TemplateField," Visual Studio has created a TemplateField whose templates mimic the user interface of the converted BoundField.</span></span> <span data-ttu-id="38f0c-160">Vous pouvez le vérifier en consultant cette page via un navigateur.</span><span class="sxs-lookup"><span data-stu-id="38f0c-160">You can verify this by visiting this page through a browser.</span></span> <span data-ttu-id="38f0c-161">Vous trouverez que l’apparence et le comportement de la TemplateField est identique à l’expérience lorsque BoundFields étaient utilisées à la place.</span><span class="sxs-lookup"><span data-stu-id="38f0c-161">You'll find that the appearance and behavior of the TemplateFields is identical to the experience when BoundFields were used instead.</span></span>

> [!NOTE]
> <span data-ttu-id="38f0c-162">N’hésitez pas à personnaliser les interfaces de modifications dans les modèles en fonction des besoins.</span><span class="sxs-lookup"><span data-stu-id="38f0c-162">Feel free to customize the editing interfaces in the templates as needed.</span></span> <span data-ttu-id="38f0c-163">Par exemple, nous souhaiterons peut-être avoir la zone de texte dans le `UnitPrice` TemplateField restitué sous la forme d’une zone de texte plus petits que la `ProductName` zone de texte.</span><span class="sxs-lookup"><span data-stu-id="38f0c-163">For example, we may want to have the TextBox in the `UnitPrice` TemplateFields rendered as a smaller textbox than the `ProductName` textbox.</span></span> <span data-ttu-id="38f0c-164">Pour ce faire, vous pouvez définir la zone de texte `Columns` propriété une valeur appropriée ou fournir une largeur absolue via le `Width` propriété.</span><span class="sxs-lookup"><span data-stu-id="38f0c-164">To accomplish this you can set the TextBox's `Columns` property to an appropriate value or provide an absolute width via the `Width` property.</span></span> <span data-ttu-id="38f0c-165">Dans le didacticiel suivant, nous allons voir comment personnaliser entièrement l’interface de modification en remplaçant la zone de texte avec une entrée de données alternatif contrôle Web.</span><span class="sxs-lookup"><span data-stu-id="38f0c-165">In the next tutorial we'll see how to completely customize the editing interface by replacing the TextBox with an alternate data entry Web control.</span></span>


## <a name="step-3-adding-the-validation-controls-to-the-gridviewsedititemtemplate-s"></a><span data-ttu-id="38f0c-166">Étape 3 : Ajout des contrôles de Validation pour le contrôle GridView`EditItemTemplate` s</span><span class="sxs-lookup"><span data-stu-id="38f0c-166">Step 3: Adding the Validation Controls to the GridView's`EditItemTemplate` s</span></span>

<span data-ttu-id="38f0c-167">Lors de la construction des formulaires de saisie de données, il est important que les utilisateurs entrent tous les champs obligatoires et que toutes les entrées fournies ne sont autorisées, correctement mise en forme des valeurs.</span><span class="sxs-lookup"><span data-stu-id="38f0c-167">When constructing data entry forms, it is important that users enter any required fields and that all provided inputs are legal, properly-formatted values.</span></span> <span data-ttu-id="38f0c-168">Pour garantir que les entrées d’un utilisateur sont valides, ASP.NET fournit cinq contrôles de validation intégrées qui sont conçus pour être utilisés pour valider la valeur d’un contrôle d’entrée unique :</span><span class="sxs-lookup"><span data-stu-id="38f0c-168">To help ensure that a user's inputs are valid, ASP.NET provides five built-in validation controls that are designed to be used to validate the value of a single input control:</span></span>

- <span data-ttu-id="38f0c-169">[RequiredFieldValidator](https://msdn.microsoft.com/library/5hbw267h(VS.80).aspx) garantit qu’une valeur a été fournie.</span><span class="sxs-lookup"><span data-stu-id="38f0c-169">[RequiredFieldValidator](https://msdn.microsoft.com/library/5hbw267h(VS.80).aspx) ensures that a value has been provided</span></span>
- <span data-ttu-id="38f0c-170">[CompareValidator](https://msdn.microsoft.com/library/db330ayw(VS.80).aspx) valide une valeur par rapport à une autre valeur de contrôle Web ou une valeur constante ou garantit que le format de la valeur est légal pour un type de données spécifié</span><span class="sxs-lookup"><span data-stu-id="38f0c-170">[CompareValidator](https://msdn.microsoft.com/library/db330ayw(VS.80).aspx) validates a value against another Web control value or a constant value, or ensures that the value's format is legal for a specified data type</span></span>
- <span data-ttu-id="38f0c-171">[RangeValidator](https://msdn.microsoft.com/library/f70d09xt.aspx) garantit qu’une valeur est dans une plage de valeurs</span><span class="sxs-lookup"><span data-stu-id="38f0c-171">[RangeValidator](https://msdn.microsoft.com/library/f70d09xt.aspx) ensures that a value is within a range of values</span></span>
- <span data-ttu-id="38f0c-172">[RegularExpressionValidator](https://msdn.microsoft.com/library/eahwtc9e.aspx) valide une valeur par rapport à un [expression régulière](http://en.wikipedia.org/wiki/Regular_expression)</span><span class="sxs-lookup"><span data-stu-id="38f0c-172">[RegularExpressionValidator](https://msdn.microsoft.com/library/eahwtc9e.aspx) validates a value against a [regular expression](http://en.wikipedia.org/wiki/Regular_expression)</span></span>
- <span data-ttu-id="38f0c-173">[CustomValidator](https://msdn.microsoft.com/library/9eee01cx(VS.80).aspx) valide une valeur par rapport à une méthode personnalisée, définie par l’utilisateur</span><span class="sxs-lookup"><span data-stu-id="38f0c-173">[CustomValidator](https://msdn.microsoft.com/library/9eee01cx(VS.80).aspx) validates a value against a custom, user-defined method</span></span>

<span data-ttu-id="38f0c-174">Pour plus d’informations sur ces cinq contrôles, consultez le [section contrôles de Validation](https://quickstarts.asp.net/quickstartv20/aspnet/doc/ctrlref/validation/default.aspx) de la [didacticiels de démarrage rapide ASP.NET](https://asp.net/QuickStart/aspnet/).</span><span class="sxs-lookup"><span data-stu-id="38f0c-174">For more information on these five controls, check out the [Validation Controls section](https://quickstarts.asp.net/quickstartv20/aspnet/doc/ctrlref/validation/default.aspx) of the [ASP.NET Quickstart Tutorials](https://asp.net/QuickStart/aspnet/).</span></span>

<span data-ttu-id="38f0c-175">Dans notre didacticiel, nous devons utiliser un contrôle RequiredFieldValidator dans les contrôle GridView et DetailsView `ProductName` TemplateField et un contrôle RequiredFieldValidator dans le DetailsView `UnitPrice` TemplateField.</span><span class="sxs-lookup"><span data-stu-id="38f0c-175">For our tutorial we'll need to use a RequiredFieldValidator in both the DetailsView and GridView's `ProductName` TemplateFields and a RequiredFieldValidator in the DetailsView's `UnitPrice` TemplateField.</span></span> <span data-ttu-id="38f0c-176">En outre, nous devons ajouter un CompareValidator pour les deux contrôles `UnitPrice` TemplateField qui garantit que le prix entré a une valeur supérieure ou égale à 0 et qu’il est présenté dans un format monétaire valide.</span><span class="sxs-lookup"><span data-stu-id="38f0c-176">Furthermore, we'll need to add a CompareValidator to both controls' `UnitPrice` TemplateFields that ensures that the entered price has a value greater than or equal to 0 and is presented in a valid currency format.</span></span>

> [!NOTE]
> <span data-ttu-id="38f0c-177">Alors que ASP.NET 1.x avait ces mêmes contrôles de validation de cinq, ASP.NET 2.0 a ajouté un certain nombre d’améliorations, la principale deux en cours d’un script côté client prend en charge les navigateurs autres qu’Internet Explorer et la possibilité de contrôles de validation de partition sur une page dans groupes de validation.</span><span class="sxs-lookup"><span data-stu-id="38f0c-177">While ASP.NET 1.x had these same five validation controls, ASP.NET 2.0 has added a number of improvements, the main two being client-side script support for browsers other than Internet Explorer and the ability to partition validation controls on a page into validation groups.</span></span> <span data-ttu-id="38f0c-178">Pour plus d’informations sur les nouvelles fonctionnalités de contrôle de validation de 2.0, reportez-vous à [dissection les contrôles de Validation dans ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="38f0c-178">For more information on the new validation control features in 2.0, refer to [Dissecting the Validation Controls in ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx).</span></span>


<span data-ttu-id="38f0c-179">Commençons par ajouter les contrôles de validation nécessaire à la `EditItemTemplate` s dans TemplateField le contrôle GridView.</span><span class="sxs-lookup"><span data-stu-id="38f0c-179">Let's start by adding the necessary validation controls to the `EditItemTemplate` s in the GridView's TemplateFields.</span></span> <span data-ttu-id="38f0c-180">Pour ce faire, cliquez sur le lien Modifier les modèles à partir de la balise active du contrôle GridView pour afficher l’interface de modification de modèle.</span><span class="sxs-lookup"><span data-stu-id="38f0c-180">To accomplish this, click on the Edit Templates link from the GridView's smart tag to bring up the template editing interface.</span></span> <span data-ttu-id="38f0c-181">À ce stade, vous pouvez sélectionner le modèle à modifier dans la liste déroulante.</span><span class="sxs-lookup"><span data-stu-id="38f0c-181">From here, you can select which template to edit from the drop-down list.</span></span> <span data-ttu-id="38f0c-182">Dans la mesure où nous voulons augmenter l’interface de modification, nous devons ajouter des contrôles de validation à la `ProductName` et `UnitPrice`de `EditItemTemplate` s.</span><span class="sxs-lookup"><span data-stu-id="38f0c-182">Since we want to augment the editing interface, we need to add validation controls to the `ProductName` and `UnitPrice`'s `EditItemTemplate` s.</span></span>


<span data-ttu-id="38f0c-183">[![Nous avons besoin étendre le ProductName et EditItemTemplates de UnitPrice](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image11.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="38f0c-183">[![We Need to Extend the ProductName and UnitPrice's EditItemTemplates](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image11.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image10.png)</span></span>

<span data-ttu-id="38f0c-184">**Figure 4**: Nous devons étendre la `ProductName` et `UnitPrice`de `EditItemTemplate` s ([cliquez pour afficher l’image en taille réelle](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="38f0c-184">**Figure 4**: We Need to Extend the `ProductName` and `UnitPrice`'s `EditItemTemplate` s ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image12.png))</span></span>


<span data-ttu-id="38f0c-185">Dans le `ProductName` `EditItemTemplate`, ajoutez un contrôle RequiredFieldValidator en le faisant glisser à partir de la boîte à outils dans l’interface de modification de modèle, plaçant après la zone de texte.</span><span class="sxs-lookup"><span data-stu-id="38f0c-185">In the `ProductName` `EditItemTemplate`, add a RequiredFieldValidator by dragging it from the Toolbox into the template editing interface, placing after the TextBox.</span></span>


<span data-ttu-id="38f0c-186">[![Ajouter un contrôle RequiredFieldValidator à ProductName EditItemTemplate](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image14.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="38f0c-186">[![Add a RequiredFieldValidator to the ProductName EditItemTemplate](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image14.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image13.png)</span></span>

<span data-ttu-id="38f0c-187">**Figure 5**: Ajoutez un contrôle RequiredFieldValidator à la `ProductName` `EditItemTemplate` ([cliquez pour afficher l’image en taille réelle](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="38f0c-187">**Figure 5**: Add a RequiredFieldValidator to the `ProductName` `EditItemTemplate` ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image15.png))</span></span>


<span data-ttu-id="38f0c-188">Tous les contrôles de validation fonctionnent en validant l’entrée d’un contrôle Web ASP.NET unique.</span><span class="sxs-lookup"><span data-stu-id="38f0c-188">All validation controls work by validating the input of a single ASP.NET Web control.</span></span> <span data-ttu-id="38f0c-189">Par conséquent, nous devons indiquer que le contrôle RequiredFieldValidator que nous venons d’ajouter doit valider par rapport à la zone de texte dans le `EditItemTemplate`; cela s’effectue en définissant le contrôle de validation [propriété ControlToValidate](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.controltovalidate(VS.80).aspx) à la `ID` du contrôle Web approprié.</span><span class="sxs-lookup"><span data-stu-id="38f0c-189">Therefore, we need to indicate that the RequiredFieldValidator we just added should validate against the TextBox in the `EditItemTemplate`; this is accomplished by setting the validation control's [ControlToValidate property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.controltovalidate(VS.80).aspx) to the `ID` of the appropriate Web control.</span></span> <span data-ttu-id="38f0c-190">La zone de texte a actuellement plutôt apercevoir `ID` de `TextBox1`, mais nous allons lui donner un nom plus approprié.</span><span class="sxs-lookup"><span data-stu-id="38f0c-190">The TextBox currently has the rather nondescript `ID` of `TextBox1`, but let's change it to something more appropriate.</span></span> <span data-ttu-id="38f0c-191">Cliquez sur la zone de texte dans le modèle et ensuite, à partir de la fenêtre Propriétés, changez le `ID` de `TextBox1` à `EditProductName`.</span><span class="sxs-lookup"><span data-stu-id="38f0c-191">Click on the TextBox in the template and then, from the Properties window, change the `ID` from `TextBox1` to `EditProductName`.</span></span>


<span data-ttu-id="38f0c-192">[![Modifier les ID de la zone de texte à EditProductName](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image17.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="38f0c-192">[![Change the TextBox's ID to EditProductName](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image17.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image16.png)</span></span>

<span data-ttu-id="38f0c-193">**Figure 6**: Modifier la zone de texte `ID` à `EditProductName` ([cliquez pour afficher l’image en taille réelle](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="38f0c-193">**Figure 6**: Change the TextBox's `ID` to `EditProductName` ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image18.png))</span></span>


<span data-ttu-id="38f0c-194">Ensuite, définissez le RequiredFieldValidator `ControlToValidate` propriété `EditProductName`.</span><span class="sxs-lookup"><span data-stu-id="38f0c-194">Next, set the RequiredFieldValidator's `ControlToValidate` property to `EditProductName`.</span></span> <span data-ttu-id="38f0c-195">Enfin, définissez la [propriété ErrorMessage](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.errormessage(VS.80).aspx) à « Vous devez fournir le nom du produit » et le [propriété Text](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.text(VS.80).aspx) à «\*».</span><span class="sxs-lookup"><span data-stu-id="38f0c-195">Finally, set the [ErrorMessage property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.errormessage(VS.80).aspx) to "You must provide the product's name" and the [Text property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.text(VS.80).aspx) to "\*".</span></span> <span data-ttu-id="38f0c-196">Le `Text` valeur de propriété, s’il est fourni, est le texte affiché par le contrôle de validation si la validation échoue.</span><span class="sxs-lookup"><span data-stu-id="38f0c-196">The `Text` property value, if provided, is the text that is displayed by the validation control if the validation fails.</span></span> <span data-ttu-id="38f0c-197">Le `ErrorMessage` valeur de propriété, qui est requis, est utilisé par le contrôle ValidationSummary ; si le `Text` valeur de propriété est omise, la `ErrorMessage` valeur de propriété est également le texte affiché par le contrôle de validation d’entrée non valide.</span><span class="sxs-lookup"><span data-stu-id="38f0c-197">The `ErrorMessage` property value, which is required, is used by the ValidationSummary control; if the `Text` property value is omitted, the `ErrorMessage` property value is also the text displayed by the validation control on invalid input.</span></span>

<span data-ttu-id="38f0c-198">Après avoir défini ces trois propriétés de RequiredFieldValidator, votre écran doit ressembler à la Figure 7.</span><span class="sxs-lookup"><span data-stu-id="38f0c-198">After setting these three properties of the RequiredFieldValidator, your screen should look similar to Figure 7.</span></span>


<span data-ttu-id="38f0c-199">[![Définir le RequiredFieldValidator ControlToValidate, ErrorMessage et les propriétés de texte](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image20.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="38f0c-199">[![Set the RequiredFieldValidator's ControlToValidate, ErrorMessage, and Text Properties](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image20.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image19.png)</span></span>

<span data-ttu-id="38f0c-200">**Figure 7**: Définir le RequiredFieldValidator `ControlToValidate`, `ErrorMessage`, et `Text` propriétés ([cliquez pour afficher l’image en taille réelle](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="38f0c-200">**Figure 7**: Set the RequiredFieldValidator's `ControlToValidate`, `ErrorMessage`, and `Text` Properties ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image21.png))</span></span>


<span data-ttu-id="38f0c-201">Avec le contrôle RequiredFieldValidator ajouté à la `ProductName` `EditItemTemplate`, que ne reste à ajouter la validation nécessaire à la `UnitPrice` `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="38f0c-201">With the RequiredFieldValidator added to the `ProductName` `EditItemTemplate`, all that remains is to add the necessary validation to the `UnitPrice` `EditItemTemplate`.</span></span> <span data-ttu-id="38f0c-202">Étant donné que nous avons décidé que, pour cette page, le `UnitPrice` est facultatif quand modifier un enregistrement, nous n’avez pas besoin ajouter un contrôle RequiredFieldValidator.</span><span class="sxs-lookup"><span data-stu-id="38f0c-202">Since we've decided that, for this page, the `UnitPrice` is optional when editing a record, we don't need to add a RequiredFieldValidator.</span></span> <span data-ttu-id="38f0c-203">Nous avons, toutefois, doivent-ils ajouter un CompareValidator pour vous assurer que le `UnitPrice`, s’il est fourni, est correctement mis en forme comme une devise et est supérieur ou égal à 0.</span><span class="sxs-lookup"><span data-stu-id="38f0c-203">We do, however, need to add a CompareValidator to ensure that the `UnitPrice`, if supplied, is properly formatted as a currency and is greater than or equal to 0.</span></span>

<span data-ttu-id="38f0c-204">Avant d’ajouter le contrôle CompareValidator pour les `UnitPrice` `EditItemTemplate`, nous allons tout d’abord modifier les ID du contrôle Web de la zone de texte à partir de `TextBox2` à `EditUnitPrice`.</span><span class="sxs-lookup"><span data-stu-id="38f0c-204">Before we add the CompareValidator to the `UnitPrice` `EditItemTemplate`, let's first change the TextBox Web control's ID from `TextBox2` to `EditUnitPrice`.</span></span> <span data-ttu-id="38f0c-205">Après avoir apporté cette modification, ajoutez le contrôle CompareValidator, définissant son `ControlToValidate` propriété `EditUnitPrice`, ses `ErrorMessage` propriété à « le prix doit être supérieur ou égal à zéro et ne peut pas inclure le symbole monétaire » et son `Text` propriété "\*".</span><span class="sxs-lookup"><span data-stu-id="38f0c-205">After making this change, add the CompareValidator, setting its `ControlToValidate` property to `EditUnitPrice`, its `ErrorMessage` property to "The price must be greater than or equal to zero and cannot include the currency symbol", and its `Text` property to "\*".</span></span>

<span data-ttu-id="38f0c-206">Pour indiquer que le `UnitPrice` valeur doit être supérieure ou égale à 0, définissez la CompareValidator [propriété Operator](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.operator(VS.80).aspx) à `GreaterThanEqual`, ses [propriété ValueToCompare](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.valuetocompare(VS.80).aspx) à « 0 » et ses [ Propriété de type](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx) à `Currency`.</span><span class="sxs-lookup"><span data-stu-id="38f0c-206">To indicate that the `UnitPrice` value must be greater than or equal to 0, set the CompareValidator's [Operator property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.operator(VS.80).aspx) to `GreaterThanEqual`, its [ValueToCompare property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.valuetocompare(VS.80).aspx) to "0", and its [Type property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx) to `Currency`.</span></span> <span data-ttu-id="38f0c-207">La syntaxe déclarative suivante indique le `UnitPrice` de TemplateField `EditItemTemplate` après ces modifications ont été apportées :</span><span class="sxs-lookup"><span data-stu-id="38f0c-207">The following declarative syntax shows the `UnitPrice` TemplateField's `EditItemTemplate` after these changes have been made:</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample3.aspx)]

<span data-ttu-id="38f0c-208">Après avoir apporté ces modifications, ouvrez la page dans un navigateur.</span><span class="sxs-lookup"><span data-stu-id="38f0c-208">After making these changes, open the page in a browser.</span></span> <span data-ttu-id="38f0c-209">Si vous tentez d’omettre le nom ou entrez une valeur de prix non valide lors de la modification d’un produit, un astérisque apparaît en regard de la zone de texte.</span><span class="sxs-lookup"><span data-stu-id="38f0c-209">If you attempt to omit the name or enter an invalid price value when editing a product, an asterisk appears next to the textbox.</span></span> <span data-ttu-id="38f0c-210">Comme le montre la Figure 8, une valeur de prix qui inclut le symbole monétaire tels que 19,95 $ est considéré comme non valide.</span><span class="sxs-lookup"><span data-stu-id="38f0c-210">As Figure 8 shows, a price value that includes the currency symbol such as $19.95 is considered invalid.</span></span> <span data-ttu-id="38f0c-211">Le CompareValidator `Currency` `Type` permettant de séparateurs de chiffres (par exemple, des virgules ou des points, selon les paramètres de culture) et un signe de début plus ou moins, contrairement à *pas* autoriser un symbole monétaire.</span><span class="sxs-lookup"><span data-stu-id="38f0c-211">The CompareValidator's `Currency` `Type` allows for digit separators (such as commas or periods, depending on the culture settings) and a leading plus or minus sign, but does *not* permit a currency symbol.</span></span> <span data-ttu-id="38f0c-212">Ce comportement peut perplex utilisateurs comme l’interface de modification affiche actuellement le `UnitPrice` en utilisant le format de devise.</span><span class="sxs-lookup"><span data-stu-id="38f0c-212">This behavior may perplex users as the editing interface currently renders the `UnitPrice` using the currency format.</span></span>

> [!NOTE]
> <span data-ttu-id="38f0c-213">N’oubliez pas que dans le *événements associés à l’insertion, mise à jour et suppression* didacticiel, nous définissons le BoundField `DataFormatString` propriété `{0:c}` pour mettre en forme comme une devise.</span><span class="sxs-lookup"><span data-stu-id="38f0c-213">Recall that in the *Events Associated with Inserting, Updating, and Deleting* tutorial we set the BoundField's `DataFormatString` property to `{0:c}` in order to format it as a currency.</span></span> <span data-ttu-id="38f0c-214">En outre, nous définissons le `ApplyFormatInEditMode` true à la propriété, à l’origine de la GridView d’édition interface à mettre en forme le `UnitPrice` sous forme de devise.</span><span class="sxs-lookup"><span data-stu-id="38f0c-214">Furthermore, we set the `ApplyFormatInEditMode` property to true, causing the GridView's editing interface to format the `UnitPrice` as a currency.</span></span> <span data-ttu-id="38f0c-215">Lors de la conversion du BoundField en TemplateField, Visual Studio noter ces paramètres et mise en forme de la zone de texte `Text` propriété sous forme de devise à l’aide de la syntaxe de liaison de données `<%# Bind("UnitPrice", "{0:c}") %>`.</span><span class="sxs-lookup"><span data-stu-id="38f0c-215">When converting the BoundField into a TemplateField, Visual Studio noted these settings and formatted the TextBox's `Text` property as a currency using the databinding syntax `<%# Bind("UnitPrice", "{0:c}") %>`.</span></span>


<span data-ttu-id="38f0c-216">[![Un astérisque apparaît en regard des zones de texte avec une entrée non valide](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image23.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="38f0c-216">[![An Asterisk Appears Next to the Textboxes with Invalid Input](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image23.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image22.png)</span></span>

<span data-ttu-id="38f0c-217">**Figure 8**: Un astérisque apparaît à côté de zones de texte avec une entrée non valide ([cliquez pour afficher l’image en taille réelle](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="38f0c-217">**Figure 8**: An Asterisk Appears Next to the Textboxes with Invalid Input ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image24.png))</span></span>


<span data-ttu-id="38f0c-218">Tandis que le fonctionnement de la validation en tant que-est, l’utilisateur doit supprimer manuellement le symbole monétaire lorsque vous modifiez un enregistrement qui n’est pas acceptable.</span><span class="sxs-lookup"><span data-stu-id="38f0c-218">While the validation works as-is, the user has to manually remove the currency symbol when editing a record, which is not acceptable.</span></span> <span data-ttu-id="38f0c-219">Pour résoudre ce problème, nous avons trois options :</span><span class="sxs-lookup"><span data-stu-id="38f0c-219">To remedy this, we have three options:</span></span>

1. <span data-ttu-id="38f0c-220">Configurer le `EditItemTemplate` afin que le `UnitPrice` valeur n’est pas mise en forme comme une devise.</span><span class="sxs-lookup"><span data-stu-id="38f0c-220">Configure the `EditItemTemplate` so that the `UnitPrice` value is not formatted as a currency.</span></span>
2. <span data-ttu-id="38f0c-221">Autoriser l’utilisateur à entrer un symbole monétaire en supprimant les CompareValidator et en la remplaçant par une RegularExpressionValidator vérifie correctement pour une valeur monétaire mise en forme correctement.</span><span class="sxs-lookup"><span data-stu-id="38f0c-221">Allow the user to enter a currency symbol by removing the CompareValidator and replacing it with a RegularExpressionValidator that properly checks for a properly formatted currency value.</span></span> <span data-ttu-id="38f0c-222">Le problème ici est que l’expression régulière pour valider une valeur de devise n’est pas jolie et nécessiterait une écriture de code si nous souhaitons intégrer des paramètres de culture.</span><span class="sxs-lookup"><span data-stu-id="38f0c-222">The problem here is that the regular expression to validate a currency value is not pretty and would require writing code if we wanted to incorporate culture settings.</span></span>
3. <span data-ttu-id="38f0c-223">Supprimer le contrôle de validation complètement et s’appuient sur la logique de validation côté serveur dans le GridView `RowUpdating` Gestionnaire d’événements.</span><span class="sxs-lookup"><span data-stu-id="38f0c-223">Remove the validation control altogether and rely on server-side validation logic in the GridView's `RowUpdating` event handler.</span></span>

<span data-ttu-id="38f0c-224">Revenons avec option #1 pour cet exercice.</span><span class="sxs-lookup"><span data-stu-id="38f0c-224">Let's go with option #1 for this exercise.</span></span> <span data-ttu-id="38f0c-225">Actuellement le `UnitPrice` est mis en forme comme une devise en raison de l’expression de liaison de données pour la zone de texte dans le `EditItemTemplate`: `<%# Bind("UnitPrice", "{0:c}") %>`.</span><span class="sxs-lookup"><span data-stu-id="38f0c-225">Currently the `UnitPrice` is formatted as a currency due to the databinding expression for the TextBox in the `EditItemTemplate`: `<%# Bind("UnitPrice", "{0:c}") %>`.</span></span> <span data-ttu-id="38f0c-226">Remplacez l’instruction de liaison par `Bind("UnitPrice", "{0:n2}")`, qui met en forme le résultat sous la forme un nombre avec deux chiffres de précision.</span><span class="sxs-lookup"><span data-stu-id="38f0c-226">Change the Bind statement to `Bind("UnitPrice", "{0:n2}")`, which formats the result as a number with two digits of precision.</span></span> <span data-ttu-id="38f0c-227">Cela est possible directement par le biais de la syntaxe déclarative ou en cliquant sur le lien Modifier les DataBindings à partir de la `EditUnitPrice` zone de texte dans le `UnitPrice` de TemplateField `EditItemTemplate` (voir les Figures 9 et 10).</span><span class="sxs-lookup"><span data-stu-id="38f0c-227">This can be done directly through the declarative syntax or by clicking on the Edit DataBindings link from the `EditUnitPrice` TextBox in the `UnitPrice` TemplateField's `EditItemTemplate` (see Figures 9 and 10).</span></span>


<span data-ttu-id="38f0c-228">[![Cliquez sur le lien de modifier les DataBindings de la zone de texte](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image26.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="38f0c-228">[![Click on the TextBox's Edit DataBindings link](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image26.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image25.png)</span></span>

<span data-ttu-id="38f0c-229">**Figure 9**: Cliquez sur le lien de modifier les DataBindings de la zone de texte ([cliquez pour afficher l’image en taille réelle](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="38f0c-229">**Figure 9**: Click on the TextBox's Edit DataBindings link ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image27.png))</span></span>


<span data-ttu-id="38f0c-230">[![Spécifiez le spécificateur de Format dans l’instruction de liaison](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image29.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="38f0c-230">[![Specify the Format Specifier in the Bind Statement](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image29.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image28.png)</span></span>

<span data-ttu-id="38f0c-231">**Figure 10**: Spécifiez le spécificateur de Format dans le `Bind` instruction ([cliquez pour afficher l’image en taille réelle](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="38f0c-231">**Figure 10**: Specify the Format Specifier in the `Bind` Statement ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image30.png))</span></span>


<span data-ttu-id="38f0c-232">Avec cette modification, le prix de mise en forme dans l’interface de modification inclut des virgules comme séparateur de groupe et un point comme séparateur décimal, mais laisse de côté le symbole monétaire.</span><span class="sxs-lookup"><span data-stu-id="38f0c-232">With this change, the formatted price in the editing interface includes commas as the group separator and a period as the decimal separator, but leaves off the currency symbol.</span></span>

> [!NOTE]
> <span data-ttu-id="38f0c-233">Le `UnitPrice` `EditItemTemplate` n’inclut pas un contrôle RequiredFieldValidator, ce qui permet la publication (postback) à surgir et la logique de mise à jour de commencer.</span><span class="sxs-lookup"><span data-stu-id="38f0c-233">The `UnitPrice` `EditItemTemplate` doesn't include a RequiredFieldValidator, allowing the postback to ensue and the updating logic to commence.</span></span> <span data-ttu-id="38f0c-234">Toutefois, le `RowUpdating` Gestionnaire d’événements copiée à partir de la *examinant les événements associés insertion, mise à jour et suppression* didacticiel inclut une vérification de programmation qui garantit que le `UnitPrice` est fourni.</span><span class="sxs-lookup"><span data-stu-id="38f0c-234">However, the `RowUpdating` event handler copied over from the *Examining the Events Associated with Inserting, Updating, and Deleting* tutorial includes a programmatic check that ensures that the `UnitPrice` is provided.</span></span> <span data-ttu-id="38f0c-235">N’hésitez pas à supprimer cette logique, laissez ce champ dans-est, ou ajoutez un contrôle RequiredFieldValidator à la `UnitPrice` `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="38f0c-235">Feel free to remove this logic, leave it in as-is, or add a RequiredFieldValidator to the `UnitPrice` `EditItemTemplate`.</span></span>


## <a name="step-4-summarizing-data-entry-problems"></a><span data-ttu-id="38f0c-236">Étape 4 : Synthèse des problèmes de saisie de données</span><span class="sxs-lookup"><span data-stu-id="38f0c-236">Step 4: Summarizing Data Entry Problems</span></span>

<span data-ttu-id="38f0c-237">Outre les contrôles de validation de cinq, ASP.NET propose le [contrôle ValidationSummary](https://msdn.microsoft.com/library/f9h59855(VS.80).aspx), qui affiche le `ErrorMessage` s de ces contrôles de validation qui a détecté des données non valides.</span><span class="sxs-lookup"><span data-stu-id="38f0c-237">In addition to the five validation controls, ASP.NET includes the [ValidationSummary control](https://msdn.microsoft.com/library/f9h59855(VS.80).aspx), which displays the `ErrorMessage` s of those validation controls that detected invalid data.</span></span> <span data-ttu-id="38f0c-238">Ces données peuvent figurer sous forme de texte sur la page web ou via un messagebox modale, côté client.</span><span class="sxs-lookup"><span data-stu-id="38f0c-238">This summary data can be displayed as text on the web page or through a modal, client-side messagebox.</span></span> <span data-ttu-id="38f0c-239">Nous allons améliorer ce didacticiel pour inclure un messagebox côté client résumant les problèmes de validation.</span><span class="sxs-lookup"><span data-stu-id="38f0c-239">Let's enhance this tutorial to include a client-side messagebox summarizing any validation problems.</span></span>

<span data-ttu-id="38f0c-240">Pour ce faire, faites glisser un contrôle ValidationSummary à partir de la boîte à outils vers le concepteur.</span><span class="sxs-lookup"><span data-stu-id="38f0c-240">To accomplish this, drag a ValidationSummary control from the Toolbox onto the Designer.</span></span> <span data-ttu-id="38f0c-241">L’emplacement du contrôle de Validation n’a pas grande importance étant donné que nous allons configurer pour afficher uniquement le résumé en tant qu’un élément messagebox.</span><span class="sxs-lookup"><span data-stu-id="38f0c-241">The location of the Validation control doesn't really matter, since we're going to configure it to only display the summary as a messagebox.</span></span> <span data-ttu-id="38f0c-242">Après avoir ajouté le contrôle, définissez son [ShowSummary, propriété](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showsummary(VS.80).aspx) à `false` et son [à la propriété ShowMessageBox](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showmessagebox(VS.80).aspx) à `true`.</span><span class="sxs-lookup"><span data-stu-id="38f0c-242">After adding the control, set its [ShowSummary property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showsummary(VS.80).aspx) to `false` and its [ShowMessageBox property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showmessagebox(VS.80).aspx) to `true`.</span></span> <span data-ttu-id="38f0c-243">Ainsi, les erreurs de validation sont résumées dans un messagebox côté client.</span><span class="sxs-lookup"><span data-stu-id="38f0c-243">With this addition, any validation errors are summarized in a client-side messagebox.</span></span>


<span data-ttu-id="38f0c-244">[![Les erreurs de Validation sont résumés dans Messagebox côté Client](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image32.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="38f0c-244">[![The Validation Errors are Summarized in a Client-Side Messagebox](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image32.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image31.png)</span></span>

<span data-ttu-id="38f0c-245">**Figure 11**: Les erreurs de Validation sont résumés dans Messagebox côté Client ([cliquez pour afficher l’image en taille réelle](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="38f0c-245">**Figure 11**: The Validation Errors are Summarized in a Client-Side Messagebox ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image33.png))</span></span>


## <a name="step-5-adding-the-validation-controls-to-the-detailsviewsinsertitemtemplate"></a><span data-ttu-id="38f0c-246">Étape 5 : Ajout des contrôles de Validation à la DetailsView`InsertItemTemplate`</span><span class="sxs-lookup"><span data-stu-id="38f0c-246">Step 5: Adding the Validation Controls to the DetailsView's`InsertItemTemplate`</span></span>

<span data-ttu-id="38f0c-247">Il reste pour ce didacticiel qu’à ajouter les contrôles de validation à l’interface de l’insertion de DetailsView.</span><span class="sxs-lookup"><span data-stu-id="38f0c-247">All that remains for this tutorial is to add the validation controls to the DetailsView's inserting interface.</span></span> <span data-ttu-id="38f0c-248">Le processus d’ajout de contrôles de validation pour les modèles de DetailsView est identique à celui examiné à l’étape 3 ; Par conséquent, nous allons breeze via la tâche dans cette étape.</span><span class="sxs-lookup"><span data-stu-id="38f0c-248">The process of adding validation controls to the DetailsView's templates is identical to that examined in Step 3; therefore, we'll breeze through the task in this step.</span></span> <span data-ttu-id="38f0c-249">Comme nous l’avons fait avec le GridView `EditItemTemplate` s, je vous encourage à renommer le `ID` s des zones de texte à partir de l’apercevoir `TextBox1` et `TextBox2` à `InsertProductName` et `InsertUnitPrice`.</span><span class="sxs-lookup"><span data-stu-id="38f0c-249">As we did with the GridView's `EditItemTemplate` s, I encourage you to rename the `ID` s of the TextBoxes from the nondescript `TextBox1` and `TextBox2` to `InsertProductName` and `InsertUnitPrice`.</span></span>

<span data-ttu-id="38f0c-250">Ajoutez un contrôle RequiredFieldValidator à la `ProductName` `InsertItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="38f0c-250">Add a RequiredFieldValidator to the `ProductName` `InsertItemTemplate`.</span></span> <span data-ttu-id="38f0c-251">Définir le `ControlToValidate` à la `ID` de la zone de texte dans le modèle, son `Text` propriété »\*» et ses `ErrorMessage` propriété à « Vous devez fournir le nom du produit ».</span><span class="sxs-lookup"><span data-stu-id="38f0c-251">Set the `ControlToValidate` to the `ID` of the TextBox in the template, its `Text` property to "\*" and its `ErrorMessage` property to "You must provide the product's name".</span></span>

<span data-ttu-id="38f0c-252">Dans la mesure où le `UnitPrice` est requis pour cette page lors de l’ajout d’un nouvel enregistrement, ajoutez un contrôle RequiredFieldValidator à la `UnitPrice` `InsertItemTemplate`, ce qui affecte ses `ControlToValidate`, `Text`, et `ErrorMessage` propriétés en conséquence.</span><span class="sxs-lookup"><span data-stu-id="38f0c-252">Since the `UnitPrice` is required for this page when adding a new record, add a RequiredFieldValidator to the `UnitPrice` `InsertItemTemplate`, setting its `ControlToValidate`, `Text`, and `ErrorMessage` properties appropriately.</span></span> <span data-ttu-id="38f0c-253">Enfin, ajoutez un CompareValidator pour le `UnitPrice` `InsertItemTemplate` configuration, son `ControlToValidate`, `Text`, `ErrorMessage`, `Type`, `Operator`, et `ValueToCompare` propriétés comme nous l’avons fait avec le `UnitPrice`de CompareValidator dans le GridView `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="38f0c-253">Finally, add a CompareValidator to the `UnitPrice` `InsertItemTemplate` as well, configuring its `ControlToValidate`, `Text`, `ErrorMessage`, `Type`, `Operator`, and `ValueToCompare` properties just like we did with the `UnitPrice`'s CompareValidator in the GridView's `EditItemTemplate`.</span></span>

<span data-ttu-id="38f0c-254">Après avoir ajouté ces contrôles de validation, un nouveau produit Impossible d’ajouter au système si son nom n’est pas fourni ou si son prix est un nombre négatif ou illégalement mis en forme.</span><span class="sxs-lookup"><span data-stu-id="38f0c-254">After adding these validation controls, a new product cannot be added to the system if its name is not supplied or if its price is a negative number or illegally formatted.</span></span>


<span data-ttu-id="38f0c-255">[![La logique de validation a été ajoutée à l’Interface d’insertion de DetailsView](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image35.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="38f0c-255">[![Validation Logic has been Added to the DetailsView's Inserting Interface](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image35.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image34.png)</span></span>

<span data-ttu-id="38f0c-256">**Figure 12**: La logique de validation a été ajoutée à l’Interface d’insertion de DetailsView ([cliquez pour afficher l’image en taille réelle](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="38f0c-256">**Figure 12**: Validation Logic has been Added to the DetailsView's Inserting Interface ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image36.png))</span></span>


## <a name="step-6-partitioning-the-validation-controls-into-validation-groups"></a><span data-ttu-id="38f0c-257">Étape 6 : Les contrôles de Validation de partitionnement des groupes de Validation</span><span class="sxs-lookup"><span data-stu-id="38f0c-257">Step 6: Partitioning the Validation Controls Into Validation Groups</span></span>

<span data-ttu-id="38f0c-258">Notre page se compose de deux jeux logiquement disparates de contrôles de validation : ceux qui correspondent au GridView d’édition interface et celles qui correspondent au contrôle DetailsView de l’insertion d’interface.</span><span class="sxs-lookup"><span data-stu-id="38f0c-258">Our page consists of two logically disparate sets of validation controls: those that correspond to the GridView's editing interface and those that correspond to the DetailsView's inserting interface.</span></span> <span data-ttu-id="38f0c-259">Par défaut, lors d’une publication *tous les* des contrôles de validation sur la page sont vérifiées.</span><span class="sxs-lookup"><span data-stu-id="38f0c-259">By default, when a postback occurs *all* validation controls on the page are checked.</span></span> <span data-ttu-id="38f0c-260">Toutefois, lorsque vous modifiez un enregistrement nous ne voulons pas les contrôles de validation de l’interface de DetailsView insertion à valider.</span><span class="sxs-lookup"><span data-stu-id="38f0c-260">However, when editing a record we don't want the DetailsView's inserting interface's validation controls to validate.</span></span> <span data-ttu-id="38f0c-261">Figure 13 illustre notre dilemme actuel quand un utilisateur modifie un produit avec des valeurs parfaitement légales, mise à jour en cliquant sur entraîne une erreur de validation, car les valeurs de nom et le prix de l’interface d’insertion sont vides.</span><span class="sxs-lookup"><span data-stu-id="38f0c-261">Figure 13 illustrates our current dilemma when a user is editing a product with perfectly legal values, clicking Update causes a validation error because the name and price values in the inserting interface are blank.</span></span>


<span data-ttu-id="38f0c-262">[![La mise à jour d’un produit entraîne des contrôles de Validation d’insertion de l’Interface à incendie](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image38.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="38f0c-262">[![Updating a Product Causes the Inserting Interface's Validation Controls to Fire](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image38.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image37.png)</span></span>

<span data-ttu-id="38f0c-263">**Figure 13**: La mise à jour d’un produit entraîne des contrôles de Validation de l’Interface insertion à déclencher ([cliquez pour afficher l’image en taille réelle](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image39.png))</span><span class="sxs-lookup"><span data-stu-id="38f0c-263">**Figure 13**: Updating a Product Causes the Inserting Interface's Validation Controls to Fire ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image39.png))</span></span>


<span data-ttu-id="38f0c-264">Les contrôles de validation dans ASP.NET 2.0 peuvent être partitionnés en groupes de contrôle via leur `ValidationGroup` propriété.</span><span class="sxs-lookup"><span data-stu-id="38f0c-264">The validation controls in ASP.NET 2.0 can be partitioned into validation groups through their `ValidationGroup` property.</span></span> <span data-ttu-id="38f0c-265">Pour associer un ensemble de contrôles de validation dans un groupe, il suffit de définir leurs `ValidationGroup` à la même valeur de propriété.</span><span class="sxs-lookup"><span data-stu-id="38f0c-265">To associate a set of validation controls in a group, simply set their `ValidationGroup` property to the same value.</span></span> <span data-ttu-id="38f0c-266">Pour notre didacticiel, définissez la `ValidationGroup` propriétés des contrôles de validation dans TemplateField le contrôle GridView à `EditValidationControls` et `ValidationGroup` propriétés de TemplateField de DetailsView à `InsertValidationControls`.</span><span class="sxs-lookup"><span data-stu-id="38f0c-266">For our tutorial, set the `ValidationGroup` properties of the validation controls in the GridView's TemplateFields to `EditValidationControls` and the `ValidationGroup` properties of the DetailsView's TemplateFields to `InsertValidationControls`.</span></span> <span data-ttu-id="38f0c-267">Ces modifications peuvent être effectuées directement dans le balisage déclaratif ou via la fenêtre Propriétés lors de l’utilisation du concepteur modifier l’interface de modèle.</span><span class="sxs-lookup"><span data-stu-id="38f0c-267">These changes can be done directly in the declarative markup or through the Properties window when using the Designer's edit template interface.</span></span>

<span data-ttu-id="38f0c-268">En plus de la validation des contrôles, le bouton et liés à un bouton dans ASP.NET 2.0 incluent également un `ValidationGroup` propriété.</span><span class="sxs-lookup"><span data-stu-id="38f0c-268">In addition to the validation controls, the Button and Button-related controls in ASP.NET 2.0 also include a `ValidationGroup` property.</span></span> <span data-ttu-id="38f0c-269">Les validateurs d’un groupe de validation sont vérifiés pour validité uniquement lorsqu’une publication (postback) est induit par un bouton qui a le même `ValidationGroup` paramètre de propriété.</span><span class="sxs-lookup"><span data-stu-id="38f0c-269">A validation group's validators are checked for validity only when a postback is induced by a Button that has the same `ValidationGroup` property setting.</span></span> <span data-ttu-id="38f0c-270">Par exemple, dans l’ordre pour un bouton Insérer de DetailsView déclencher le `InsertValidationControls` groupe de validation que nous devons définir la CommandField `ValidationGroup` propriété `InsertValidationControls` (voir Figure 14).</span><span class="sxs-lookup"><span data-stu-id="38f0c-270">For example, in order for the DetailsView's Insert button to trigger the `InsertValidationControls` validation group we need to set the CommandField's `ValidationGroup` property to `InsertValidationControls` (see Figure 14).</span></span> <span data-ttu-id="38f0c-271">En outre, définissez le GridView de CommandField `ValidationGroup` propriété `EditValidationControls`.</span><span class="sxs-lookup"><span data-stu-id="38f0c-271">Additionally, set the GridView's CommandField's `ValidationGroup` property to `EditValidationControls`.</span></span>


<span data-ttu-id="38f0c-272">[![Propriété de ValidationGroup de CommandField à InsertValidationControls de l’ensemble le contrôle DetailsView](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image41.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image40.png)</span><span class="sxs-lookup"><span data-stu-id="38f0c-272">[![Set the DetailsView's CommandField's ValidationGroup property to InsertValidationControls](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image41.png)](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image40.png)</span></span>

<span data-ttu-id="38f0c-273">**Figure 14**: Définir le DetailsView de CommandField `ValidationGroup` propriété `InsertValidationControls` ([cliquez pour afficher l’image en taille réelle](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image42.png))</span><span class="sxs-lookup"><span data-stu-id="38f0c-273">**Figure 14**: Set the DetailsView's CommandField's `ValidationGroup` property to `InsertValidationControls` ([Click to view full-size image](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/_static/image42.png))</span></span>


<span data-ttu-id="38f0c-274">Après ces modifications, le contrôle DetailsView de GridView TemplateField et CommandFields doit ressembler à ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="38f0c-274">After these changes, the DetailsView and GridView's TemplateFields and CommandFields should look similar to the following:</span></span>

<span data-ttu-id="38f0c-275">Le DetailsView TemplateField et CommandField</span><span class="sxs-lookup"><span data-stu-id="38f0c-275">The DetailsView's TemplateFields and CommandField</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample4.aspx)]

<span data-ttu-id="38f0c-276">Le contrôle GridView CommandField et TemplateField</span><span class="sxs-lookup"><span data-stu-id="38f0c-276">The GridView's CommandField and TemplateFields</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample5.aspx)]

<span data-ttu-id="38f0c-277">À ce stade les contrôles de validation de modification spécifiques déclenchent uniquement lorsque le contrôle GridView mise à jour bouton et l’incendie de contrôles de validation d’insertion spécifiques uniquement lors de DetailsView insertion du bouton, résolution du problème mises en évidence par la Figure 13.</span><span class="sxs-lookup"><span data-stu-id="38f0c-277">At this point the edit-specific validation controls fire only when the GridView's Update button is clicked and the insert-specific validation controls fire only when the DetailsView's Insert button is clicked, resolving the problem highlighted by Figure 13.</span></span> <span data-ttu-id="38f0c-278">Toutefois, avec cette modification notre contrôle ValidationSummary n’affiche plus lors de la saisie des données non valides.</span><span class="sxs-lookup"><span data-stu-id="38f0c-278">However, with this change our ValidationSummary control no longer displays when entering invalid data.</span></span> <span data-ttu-id="38f0c-279">Le contrôle ValidationSummary contient également un `ValidationGroup` propriété et affiche uniquement les informations résumées pour les contrôles de validation dans son groupe de validation.</span><span class="sxs-lookup"><span data-stu-id="38f0c-279">The ValidationSummary control also contains a `ValidationGroup` property and only shows summary information for those validation controls in its validation group.</span></span> <span data-ttu-id="38f0c-280">Par conséquent, nous devons disposer de deux contrôles de validation dans cette page, un pour le `InsertValidationControls` groupe de validation et l’autre pour `EditValidationControls`.</span><span class="sxs-lookup"><span data-stu-id="38f0c-280">Therefore, we need to have two validation controls in this page, one for the `InsertValidationControls` validation group and one for `EditValidationControls`.</span></span>

[!code-aspx[Main](adding-validation-controls-to-the-editing-and-inserting-interfaces-cs/samples/sample6.aspx)]

<span data-ttu-id="38f0c-281">Avec cet ajout notre didacticiel est terminé !</span><span class="sxs-lookup"><span data-stu-id="38f0c-281">With this addition our tutorial is complete!</span></span>

## <a name="summary"></a><span data-ttu-id="38f0c-282">Récapitulatif</span><span class="sxs-lookup"><span data-stu-id="38f0c-282">Summary</span></span>

<span data-ttu-id="38f0c-283">BoundFields peuvent contribuer à la fois une interface d’insertion et d’édition, l’interface n’est pas personnalisable.</span><span class="sxs-lookup"><span data-stu-id="38f0c-283">While BoundFields can provide both an inserting and editing interface, the interface is not customizable.</span></span> <span data-ttu-id="38f0c-284">En général, nous souhaitons ajouter des contrôles de validation à la modification et l’insertion d’interface pour vous assurer que l’utilisateur entre les entrées requises dans un format juridique.</span><span class="sxs-lookup"><span data-stu-id="38f0c-284">Commonly, we want to add validation controls to the editing and inserting interface to ensure that the user enters required inputs in a legal format.</span></span> <span data-ttu-id="38f0c-285">Pour ce faire, nous devons convertir les BoundFields en TemplateField et ajouter les contrôles de validation pour les modèles appropriés.</span><span class="sxs-lookup"><span data-stu-id="38f0c-285">To accomplish this we must convert the BoundFields into TemplateFields and add the validation controls to the appropriate template(s).</span></span> <span data-ttu-id="38f0c-286">Dans ce didacticiel, nous avons étendu l’exemple à partir de la *examinant les événements associés insertion, mise à jour et suppression* didacticiel en ajoutant des contrôles de validation pour les deux le contrôle DetailsView de l’insertion d’interface et le contrôle GridView interface de modification.</span><span class="sxs-lookup"><span data-stu-id="38f0c-286">In this tutorial we extended the example from the *Examining the Events Associated with Inserting, Updating, and Deleting* tutorial, adding validation controls to both the DetailsView's inserting interface and the GridView's editing interface.</span></span> <span data-ttu-id="38f0c-287">En outre, nous avons vu comment afficher les informations de résumé de validation à l’aide du contrôle ValidationSummary et comment partitionner les contrôles de validation sur la page groupes de contrôle distinctes.</span><span class="sxs-lookup"><span data-stu-id="38f0c-287">Moreover, we saw how to display summary validation information using the ValidationSummary control and how to partition the validation controls on the page into distinct validation groups.</span></span>

<span data-ttu-id="38f0c-288">Comme nous l’avons vu dans ce didacticiel, TemplateField autorise les interfaces d’éditions et insertion être augmentés pour inclure les contrôles de validation.</span><span class="sxs-lookup"><span data-stu-id="38f0c-288">As we saw in this tutorial, TemplateFields allow the editing and inserting interfaces to be augmented to include validation controls.</span></span> <span data-ttu-id="38f0c-289">TemplateField peut également être étendu pour inclure les contrôles Web d’entrée supplémentaires, l’activation de la zone de texte à remplacer par un contrôle Web plus adapté.</span><span class="sxs-lookup"><span data-stu-id="38f0c-289">TemplateFields can also be extended to include additional input Web controls, enabling the TextBox to be replaced by a more suitable Web control.</span></span> <span data-ttu-id="38f0c-290">Dans notre didacticiel suivant, nous allons voir comment remplacer le contrôle TextBox avec un contrôle DropDownList lié aux données, ce qui est idéal lors de la modification d’une clé étrangère (comme `CategoryID` ou `SupplierID` dans le `Products` table).</span><span class="sxs-lookup"><span data-stu-id="38f0c-290">In our next tutorial we'll see how to replace the TextBox control with a data-bound DropDownList control, which is ideal when editing a foreign key (such as `CategoryID` or `SupplierID` in the `Products` table).</span></span>

<span data-ttu-id="38f0c-291">Bonne programmation !</span><span class="sxs-lookup"><span data-stu-id="38f0c-291">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="38f0c-292">À propos de l’auteur</span><span class="sxs-lookup"><span data-stu-id="38f0c-292">About the Author</span></span>

<span data-ttu-id="38f0c-293">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), auteur de sept les livres sur ASP/ASP.NET et fondateur de [4GuysFromRolla.com](http://www.4guysfromrolla.com), travaille avec les technologies Web Microsoft depuis 1998.</span><span class="sxs-lookup"><span data-stu-id="38f0c-293">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="38f0c-294">Scott fonctionne comme un consultant indépendant, formateur et writer.</span><span class="sxs-lookup"><span data-stu-id="38f0c-294">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="38f0c-295">Son dernier ouvrage est [*SAM animer vous-même ASP.NET 2.0 des dernières 24 heures*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="38f0c-295">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="38f0c-296">Il peut être contacté à [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="38f0c-296">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="38f0c-297">ou via son blog, qui se trouve à [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="38f0c-297">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="38f0c-298">Remerciements</span><span class="sxs-lookup"><span data-stu-id="38f0c-298">Special Thanks To</span></span>

<span data-ttu-id="38f0c-299">Cette série de didacticiels a été révisée par plusieurs réviseurs utiles.</span><span class="sxs-lookup"><span data-stu-id="38f0c-299">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="38f0c-300">Les réviseurs tête pour ce didacticiel ont été Liz Shulok et Zack Jones.</span><span class="sxs-lookup"><span data-stu-id="38f0c-300">Lead reviewers for this tutorial were Liz Shulok and Zack Jones.</span></span> <span data-ttu-id="38f0c-301">Qui souhaitent consulter mes prochains articles MSDN ?</span><span class="sxs-lookup"><span data-stu-id="38f0c-301">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="38f0c-302">Dans ce cas, envoyez-moi une ligne à [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="38f0c-302">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="38f0c-303">[Précédent](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-cs.md)
> [Suivant](customizing-the-data-modification-interface-cs.md)</span><span class="sxs-lookup"><span data-stu-id="38f0c-303">[Previous](handling-bll-and-dal-level-exceptions-in-an-asp-net-page-cs.md)
[Next](customizing-the-data-modification-interface-cs.md)</span></span>

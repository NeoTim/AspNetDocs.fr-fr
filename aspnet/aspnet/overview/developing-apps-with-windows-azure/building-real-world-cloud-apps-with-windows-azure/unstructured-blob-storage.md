---
uid: aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/unstructured-blob-storage
title: Stockage d’objets Blob non structurées (génération d’applications Cloud réalistes avec Azure) | Microsoft Docs
author: MikeWasson
description: Building Real World Cloud Apps with Azure e-book est basé sur une présentation développée par Scott Guthrie. Il explique 13 modèles et pratiques qui peuvent il...
ms.author: riande
ms.date: 03/30/2015
ms.assetid: 9f05ccb1-2004-4661-ad8b-c370e6c09c8e
msc.legacyurl: /aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/unstructured-blob-storage
msc.type: authoredcontent
ms.openlocfilehash: 8148891f68ac8417400859540516e44be007dab7
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 05/06/2019
ms.locfileid: "65118308"
---
# <a name="unstructured-blob-storage-building-real-world-cloud-apps-with-azure"></a><span data-ttu-id="94c39-104">Stockage d’objets Blob non structurées (génération d’applications Cloud réalistes avec Azure)</span><span class="sxs-lookup"><span data-stu-id="94c39-104">Unstructured Blob Storage (Building Real-World Cloud Apps with Azure)</span></span>

<span data-ttu-id="94c39-105">par [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson]((https://twitter.com/RickAndMSFT)), [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="94c39-105">by [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson]((https://twitter.com/RickAndMSFT)), [Tom Dykstra](https://github.com/tdykstra)</span></span>

<span data-ttu-id="94c39-106">[Téléchargement Fix It projet](http://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) ou [télécharger l’E-book](http://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span><span class="sxs-lookup"><span data-stu-id="94c39-106">[Download Fix It Project](http://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) or [Download E-book](http://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span></span>

> <span data-ttu-id="94c39-107">Le **Building Real World Cloud Apps with Azure** e-book est basé sur une présentation développée par Scott Guthrie.</span><span class="sxs-lookup"><span data-stu-id="94c39-107">The **Building Real World Cloud Apps with Azure** e-book is based on a presentation developed by Scott Guthrie.</span></span> <span data-ttu-id="94c39-108">Il explique 13 modèles et pratiques qui peuvent vous aider à réussir le développement d’applications web pour le cloud.</span><span class="sxs-lookup"><span data-stu-id="94c39-108">It explains 13 patterns and practices that can help you be successful developing web apps for the cloud.</span></span> <span data-ttu-id="94c39-109">Pour plus d’informations sur l’e-book, consultez [le premier chapitre](introduction.md).</span><span class="sxs-lookup"><span data-stu-id="94c39-109">For information about the e-book, see [the first chapter](introduction.md).</span></span>

<span data-ttu-id="94c39-110">Dans le chapitre précédent nous avons étudié les schémas de partitionnement et expliqué comment l’application Fix It stocke les images dans le service de stockage Blob Azure et d’autres données de tâche dans la base de données SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="94c39-110">In the previous chapter we looked at partitioning schemes and explained how the Fix It app stores images in the Azure Storage Blob service, and other task data in Azure SQL Database.</span></span> <span data-ttu-id="94c39-111">Dans ce chapitre, nous aller plus loin dans le service Blob et montrer comment il est implémenté dans le code de projet Fix It.</span><span class="sxs-lookup"><span data-stu-id="94c39-111">In this chapter we go deeper into the Blob service and show how it's implemented in Fix It project code.</span></span>

## <a name="what-is-blob-storage"></a><span data-ttu-id="94c39-112">Quel est le stockage d’objets Blob ?</span><span class="sxs-lookup"><span data-stu-id="94c39-112">What is Blob storage?</span></span>

<span data-ttu-id="94c39-113">Le service de stockage Blob Azure fournit un moyen de stocker des fichiers dans le cloud.</span><span class="sxs-lookup"><span data-stu-id="94c39-113">The Azure Storage Blob service provides a way to store files in the cloud.</span></span> <span data-ttu-id="94c39-114">Le service Blob a un certain nombre d’avantages sur le stockage des fichiers dans un système de fichiers réseau local :</span><span class="sxs-lookup"><span data-stu-id="94c39-114">The Blob service has a number of advantages over storing files in a local network file system:</span></span>

- <span data-ttu-id="94c39-115">Il est hautement évolutive.</span><span class="sxs-lookup"><span data-stu-id="94c39-115">It's highly scalable.</span></span> <span data-ttu-id="94c39-116">Un compte de stockage unique peut stocker [des centaines de téraoctets](https://msdn.microsoft.com/library/windowsazure/dn249410.aspx), et vous pouvez avoir plusieurs comptes de stockage.</span><span class="sxs-lookup"><span data-stu-id="94c39-116">A single Storage account can store [hundreds of terabytes](https://msdn.microsoft.com/library/windowsazure/dn249410.aspx), and you can have multiple Storage accounts.</span></span> <span data-ttu-id="94c39-117">Certains des plus gros clients Azure stockent des centaines de plusieurs pétaoctets.</span><span class="sxs-lookup"><span data-stu-id="94c39-117">Some of the biggest Azure customers store hundreds of petabytes.</span></span> <span data-ttu-id="94c39-118">Microsoft SkyDrive utilise le stockage blob.</span><span class="sxs-lookup"><span data-stu-id="94c39-118">Microsoft SkyDrive uses blob storage.</span></span>
- <span data-ttu-id="94c39-119">Il est durable.</span><span class="sxs-lookup"><span data-stu-id="94c39-119">It's durable.</span></span> <span data-ttu-id="94c39-120">Chaque fichier que vous stockez dans le service Blob est automatiquement sauvegardé.</span><span class="sxs-lookup"><span data-stu-id="94c39-120">Every file you store in the Blob service is automatically backed up.</span></span>
- <span data-ttu-id="94c39-121">Il offre une haute disponibilité.</span><span class="sxs-lookup"><span data-stu-id="94c39-121">It provides high availability.</span></span> <span data-ttu-id="94c39-122">Le [SLA pour Storage](https://go.microsoft.com/fwlink/p/?linkid=159705&amp;clcid=0x409) promesses 99,9 % ou 99,99 % temps d’activité, selon l’option géo-redondance que vous choisissez.</span><span class="sxs-lookup"><span data-stu-id="94c39-122">The [SLA for Storage](https://go.microsoft.com/fwlink/p/?linkid=159705&amp;clcid=0x409) promises 99.9% or 99.99% uptime, depending on which geo-redundancy option you choose.</span></span>
- <span data-ttu-id="94c39-123">Cette fonctionnalité est très platform-as-a-service (PaaS) d’Azure, ce qui signifie que vous venez de stockez et récupérer des fichiers, en payant uniquement la quantité réelle de stockage que vous utilisez, et Azure se charge automatiquement de la configuration et la gestion de toutes les machines virtuelles et les disques requis pour le service.</span><span class="sxs-lookup"><span data-stu-id="94c39-123">It's a platform-as-a-service (PaaS) feature of Azure, which means you just store and retrieve files, paying only for the actual amount of storage you use, and Azure automatically takes care of setting up and managing all of the VMs and disk drives required for the service.</span></span>
- <span data-ttu-id="94c39-124">Vous pouvez accéder au service Blob à l’aide d’une API REST ou à l’aide d’un langage de programmation API.</span><span class="sxs-lookup"><span data-stu-id="94c39-124">You can access the Blob service by using a REST API or by using a programming language API.</span></span> <span data-ttu-id="94c39-125">Kits de développement logiciel sont disponibles pour .NET, Java, Ruby et d’autres.</span><span class="sxs-lookup"><span data-stu-id="94c39-125">SDKs are available for .NET, Java, Ruby, and others.</span></span>
- <span data-ttu-id="94c39-126">Lorsque vous stockez un fichier dans le service Blob, vous pouvez facilement rendre disponible publiquement via Internet.</span><span class="sxs-lookup"><span data-stu-id="94c39-126">When you store a file in the Blob service, you can easily make it publicly available over the Internet.</span></span>
- <span data-ttu-id="94c39-127">Vous pouvez sécuriser les fichiers dans l’objet Blob d’accéder au service afin qu’ils peuvent uniquement par les utilisateurs autorisés, ou vous pouvez fournir des jetons d’accès temporaire qui les rend disponibles pour un utilisateur uniquement pour une période limitée.</span><span class="sxs-lookup"><span data-stu-id="94c39-127">You can secure files in the Blob service so they can accessed only by authorized users, or you can provide temporary access tokens that makes them available to someone only for a limited period of time.</span></span>

<span data-ttu-id="94c39-128">Chaque fois que vous créez une application pour Azure et que vous souhaitez stocker une grande quantité de données dans un environnement sur site seraient trouve dans les fichiers, tels que des images, vidéos, fichiers PDF, des feuilles de calcul, etc.--prendre en compte le service Blob.</span><span class="sxs-lookup"><span data-stu-id="94c39-128">Anytime you're building an app for Azure and you want to store a lot of data that in an on-premises environment would go in files -- such as images, videos, PDFs, spreadsheets, etc. -- consider the Blob service.</span></span>

## <a name="creating-a-storage-account"></a><span data-ttu-id="94c39-129">Création d’un compte de stockage</span><span class="sxs-lookup"><span data-stu-id="94c39-129">Creating a Storage account</span></span>

<span data-ttu-id="94c39-130">Pour vous familiariser avec le service Blob, vous créez un compte de stockage dans Azure.</span><span class="sxs-lookup"><span data-stu-id="94c39-130">To get started with the Blob service you create a Storage account in Azure.</span></span> <span data-ttu-id="94c39-131">Dans le portail, cliquez sur **New** -- **Data Services** -- **stockage** -- **création rapide**, puis entrez une URL et un emplacement de centre de données.</span><span class="sxs-lookup"><span data-stu-id="94c39-131">In the portal, click **New** -- **Data Services** -- **Storage** -- **Quick Create**, and then enter a URL and a data center location.</span></span> <span data-ttu-id="94c39-132">L’emplacement de centre de données doit être identique à votre application web.</span><span class="sxs-lookup"><span data-stu-id="94c39-132">The data center location should be the same as your web app.</span></span>

![Créer un compte de stockage](unstructured-blob-storage/_static/image1.png)

<span data-ttu-id="94c39-134">Vous pouvez choisir la région principale où vous souhaitez stocker le contenu, et si vous choisissez la [géo-réplication](https://blogs.msdn.com/b/windowsazurestorage/archive/2013/12/11/introducing-read-access-geo-replicated-storage-ra-grs-for-windows-azure-storage.aspx#_Geo_Redundant_Storage) option, Azure crée des réplicas de toutes vos données dans un autre centre de données dans une autre région du pays.</span><span class="sxs-lookup"><span data-stu-id="94c39-134">You pick the primary region where you want to store the content, and if you choose the [geo-replication](https://blogs.msdn.com/b/windowsazurestorage/archive/2013/12/11/introducing-read-access-geo-replicated-storage-ra-grs-for-windows-azure-storage.aspx#_Geo_Redundant_Storage) option, Azure creates replicas of all your data in a different data center in another region of the country.</span></span> <span data-ttu-id="94c39-135">Par exemple, si vous choisissez le centre de données ouest des États-Unis, lorsque vous stockez un fichier qu'il va également au centre de données ouest des États-Unis, mais en arrière-plan Azure le copie à un des autres centres de données des États-Unis.</span><span class="sxs-lookup"><span data-stu-id="94c39-135">For example, if you choose the Western US data center, when you store a file it goes to the Western US data center, but in the background Azure also copies it to one of the other US data centers.</span></span> <span data-ttu-id="94c39-136">Si un incident se produit dans une région du pays, vos données sont toujours sûres.</span><span class="sxs-lookup"><span data-stu-id="94c39-136">If a disaster happens in one region of the country, your data is still safe.</span></span>

<span data-ttu-id="94c39-137">Azure ne sera pas répliquée des données au-delà des limites géopolitique : Si votre emplacement principal est situé aux États-Unis, vos fichiers sont uniquement répliquées vers une autre région aux États-Unis ; Si votre emplacement principal est de l’Australie, vos fichiers sont uniquement répliquées vers un autre centre de données en Australie.</span><span class="sxs-lookup"><span data-stu-id="94c39-137">Azure won't replicate data across geo-political boundaries: if your primary location is in the U.S., your files are only replicated to another region within the U.S.; if your primary location is Australia, your files are only replicated to another data center in Australia.</span></span>

<span data-ttu-id="94c39-138">Bien sûr, vous pouvez également créer un compte de stockage en exécutant des commandes à partir d’un script, comme nous l’avons vu précédemment.</span><span class="sxs-lookup"><span data-stu-id="94c39-138">Of course, you can also create a Storage account by executing commands from a script, as we saw earlier.</span></span> <span data-ttu-id="94c39-139">Voici une commande Windows PowerShell pour créer un compte de stockage :</span><span class="sxs-lookup"><span data-stu-id="94c39-139">Here's a Windows PowerShell command to create a Storage account:</span></span>

[!code-powershell[Main](unstructured-blob-storage/samples/sample1.ps1)]

<span data-ttu-id="94c39-140">Une fois que vous avez un compte de stockage, vous pouvez immédiatement commencer le stockage de fichiers dans le service Blob.</span><span class="sxs-lookup"><span data-stu-id="94c39-140">Once you have a Storage account, you can immediately start storing files in the Blob service.</span></span>

## <a name="using-blob-storage-in-the-fix-it-app"></a><span data-ttu-id="94c39-141">À l’aide du stockage d’objets Blob dans l’application Fix It</span><span class="sxs-lookup"><span data-stu-id="94c39-141">Using Blob storage in the Fix It app</span></span>

<span data-ttu-id="94c39-142">L’application Fix It permet de charger des photos.</span><span class="sxs-lookup"><span data-stu-id="94c39-142">The Fix It app enables you to upload photos.</span></span>

![Créer une tâche Fix It](unstructured-blob-storage/_static/image2.png)

<span data-ttu-id="94c39-144">Lorsque vous cliquez sur **créer le correctif**, l’application télécharge le fichier image spécifié et la stocke dans le service Blob.</span><span class="sxs-lookup"><span data-stu-id="94c39-144">When you click **Create the FixIt**, the application uploads the specified image file and stores it in the Blob service.</span></span>

### <a name="set-up-the-blob-container"></a><span data-ttu-id="94c39-145">Configurer le conteneur d’objets Blob</span><span class="sxs-lookup"><span data-stu-id="94c39-145">Set up the Blob container</span></span>

<span data-ttu-id="94c39-146">Afin de stocker un fichier dans le service Blob que vous avez besoin une *conteneur* à stocker dans.</span><span class="sxs-lookup"><span data-stu-id="94c39-146">In order to store a file in the Blob service you need a *container* to store it in.</span></span> <span data-ttu-id="94c39-147">Un conteneur de service Blob correspond à un dossier de système de fichiers.</span><span class="sxs-lookup"><span data-stu-id="94c39-147">A Blob service container corresponds to a file system folder.</span></span> <span data-ttu-id="94c39-148">Les scripts de création d’environnement que nous avons examiné dans le [automatiser tout chapitre](automate-everything.md) créer le compte de stockage, mais ils ne créent pas un conteneur.</span><span class="sxs-lookup"><span data-stu-id="94c39-148">The environment creation scripts that we reviewed in the [Automate Everything chapter](automate-everything.md) create the Storage account, but they don't create a container.</span></span> <span data-ttu-id="94c39-149">Par conséquent, l’objectif de la `CreateAndConfigure` méthode de la `PhotoService` classe consiste à créer un conteneur s’il n’existe pas déjà.</span><span class="sxs-lookup"><span data-stu-id="94c39-149">So the purpose of the `CreateAndConfigure` method of the `PhotoService` class is to create a container if it doesn't already exist.</span></span> <span data-ttu-id="94c39-150">Cette méthode est appelée à partir de la `Application_Start` méthode dans *Global.asax*.</span><span class="sxs-lookup"><span data-stu-id="94c39-150">This method is called from the `Application_Start` method in *Global.asax*.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample2.cs)]

<span data-ttu-id="94c39-151">La clé d’accès et le nom du compte stockage sont stockées dans le `appSettings` collection de la *Web.config* de fichiers et de code dans le `StorageUtils.StorageAccount` méthode utilise ces valeurs pour créer une chaîne de connexion et établir une connexion :</span><span class="sxs-lookup"><span data-stu-id="94c39-151">The storage account name and access key are stored in the `appSettings` collection of the *Web.config* file, and code in the `StorageUtils.StorageAccount` method uses those values to build a connection string and establish a connection:</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample3.cs)]

<span data-ttu-id="94c39-152">Le `CreateAndConfigureAsync` méthode crée ensuite un objet qui représente le service Blob, et un objet qui représente un conteneur (dossier) nommé « images » dans le service Blob :</span><span class="sxs-lookup"><span data-stu-id="94c39-152">The `CreateAndConfigureAsync` method then creates an object that represents the Blob service, and an object that represents a container (folder) named "images" in the Blob service:</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample4.cs)]

<span data-ttu-id="94c39-153">Si un conteneur nommé « images » n’existe pas encore--qui aura la valeur true, la première fois que vous exécutez l’application sur un nouveau compte de stockage, le code crée le conteneur et définit des autorisations pour la rendre publique.</span><span class="sxs-lookup"><span data-stu-id="94c39-153">If a container named "images" doesn't exist yet -- which will be true the first time you run the app against a new storage account -- the code creates the container and sets permissions to make it public.</span></span> <span data-ttu-id="94c39-154">(Par défaut, des conteneurs d’objets blob sont privées et sont uniquement accessibles aux utilisateurs qui sont autorisés à accéder à votre compte de stockage.)</span><span class="sxs-lookup"><span data-stu-id="94c39-154">(By default, new blob containers are private and are accessible only to users who have permission to access your storage account.)</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample5.cs)]

### <a name="store-the-uploaded-photo-in-blob-storage"></a><span data-ttu-id="94c39-155">Store la photo téléchargée dans le stockage Blob</span><span class="sxs-lookup"><span data-stu-id="94c39-155">Store the uploaded photo in Blob storage</span></span>

<span data-ttu-id="94c39-156">Pour charger et enregistrer le fichier image, l’application utilise un `IPhotoService` interface et l’implémentation de l’interface dans le `PhotoService` classe.</span><span class="sxs-lookup"><span data-stu-id="94c39-156">To upload and save the image file, the app uses an `IPhotoService` interface and an implementation of the interface in the `PhotoService` class.</span></span> <span data-ttu-id="94c39-157">Le *PhotoService.cs* fichier contient tout le code dans l’application Fix It qui communique avec le service Blob.</span><span class="sxs-lookup"><span data-stu-id="94c39-157">The *PhotoService.cs* file contains all of the code in the Fix It app that communicates with the Blob service.</span></span>

<span data-ttu-id="94c39-158">La méthode de contrôleur MVC suivante est appelée lorsque l’utilisateur clique sur **créer le correctif**.</span><span class="sxs-lookup"><span data-stu-id="94c39-158">The following MVC controller method is called when the user clicks **Create the FixIt**.</span></span> <span data-ttu-id="94c39-159">Dans ce code, `photoService` fait référence à une instance de la `PhotoService` (classe), et `fixittask` fait référence à une instance de la `FixItTask` classe d’entité qui stocke les données d’une nouvelle tâche.</span><span class="sxs-lookup"><span data-stu-id="94c39-159">In this code, `photoService` refers to an instance of the `PhotoService` class, and `fixittask` refers to an instance of the `FixItTask` entity class that stores data for a new task.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample6.cs?highlight=8)]

<span data-ttu-id="94c39-160">Le `UploadPhotoAsync` méthode dans la `PhotoService` classe stocke le fichier chargé dans le service Blob et renvoie une URL qui pointe vers le nouvel objet blob.</span><span class="sxs-lookup"><span data-stu-id="94c39-160">The `UploadPhotoAsync` method in the `PhotoService` class stores the uploaded file in the Blob service and returns a URL that points to the new blob.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample7.cs)]

<span data-ttu-id="94c39-161">Comme dans le `CreateAndConfigure` (méthode), le code se connecte au compte de stockage et crée un objet qui représente le conteneur d’objets blob « images », mais ici il part du principe que le conteneur existe déjà.</span><span class="sxs-lookup"><span data-stu-id="94c39-161">As in the `CreateAndConfigure` method, the code connects to the storage account and creates an object that represents the "images" blob container, except here it assumes the container already exists.</span></span>

<span data-ttu-id="94c39-162">Il crée ensuite un identificateur unique pour l’image sur le point d’être chargé, en concaténant une nouvelle valeur GUID avec l’extension de fichier :</span><span class="sxs-lookup"><span data-stu-id="94c39-162">Then it creates a unique identifier for the image about to be uploaded, by concatenating a new GUID value with the file extension:</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample8.cs)]

<span data-ttu-id="94c39-163">Le code puis utilise l’objet de conteneur d’objets blob et le nouvel identificateur unique pour créer un objet blob, définit un attribut sur cet objet indiquant quel type de fichier est, elle utilise ensuite l’objet blob pour stocker le fichier dans le stockage blob.</span><span class="sxs-lookup"><span data-stu-id="94c39-163">The code then uses the blob container object and the new unique identifier to create a blob object, sets an attribute on that object indicating what kind of file it is, and then uses the blob object to store the file in blob storage.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample9.cs)]

<span data-ttu-id="94c39-164">Enfin, il obtient une URL qui fait référence à l’objet blob.</span><span class="sxs-lookup"><span data-stu-id="94c39-164">Finally, it gets a URL that references the blob.</span></span> <span data-ttu-id="94c39-165">Cette URL sera stockée dans la base de données et peut être utilisée dans les pages web Fix It pour afficher l’image chargée.</span><span class="sxs-lookup"><span data-stu-id="94c39-165">This URL will be stored in the database and can be used in Fix It web pages to display the uploaded image.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample10.cs)]

<span data-ttu-id="94c39-166">Cette URL est stockée dans la base de données en tant qu’une des colonnes de la table FixItTask.</span><span class="sxs-lookup"><span data-stu-id="94c39-166">This URL is stored in the database as one of the columns of the FixItTask table.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample11.cs?highlight=10)]

<span data-ttu-id="94c39-167">Avec uniquement l’URL dans la base de données et des images dans le stockage Blob, l’application Fix It conserve la base de données petit, évolutive et économique, tandis que les images sont stockées dans lequel le stockage est bon marché et capable de gérer plusieurs téraoctets ou pétaoctets.</span><span class="sxs-lookup"><span data-stu-id="94c39-167">With only the URL in the database, and images in Blob storage, the Fix It app keeps the database small, scalable, and inexpensive, while the images are stored where storage is cheap and capable of handling terabytes or petabytes.</span></span> <span data-ttu-id="94c39-168">Un compte de stockage peut stocker des centaines de téraoctets de photos Fix It, et vous payez uniquement ce que vous utilisez.</span><span class="sxs-lookup"><span data-stu-id="94c39-168">One storage account can store hundreds of terabytes of Fix It photos, and you only pay for what you use.</span></span> <span data-ttu-id="94c39-169">Par conséquent, vous pouvez commencer petits cents 9 payeurs pour le premier gigaoctet et ajouter des images pour centimes par gigaoctet supplémentaire.</span><span class="sxs-lookup"><span data-stu-id="94c39-169">So you can start off small paying 9 cents for the first gigabyte, and add more images for pennies per additional gigabyte.</span></span>

### <a name="display-the-uploaded-file"></a><span data-ttu-id="94c39-170">Afficher le fichier chargé</span><span class="sxs-lookup"><span data-stu-id="94c39-170">Display the uploaded file</span></span>

<span data-ttu-id="94c39-171">L’application Fix It affiche le fichier image chargée lors de l’affichage des détails d’une tâche.</span><span class="sxs-lookup"><span data-stu-id="94c39-171">The Fix It application displays the uploaded image file when it displays details for a task.</span></span>

![Détails de la tâche de corriger avec photo](unstructured-blob-storage/_static/image3.png)

<span data-ttu-id="94c39-173">Pour afficher l’image, la vue MVC effectuer suffit incluent la `PhotoUrl` valeur dans le code HTML envoyé au navigateur.</span><span class="sxs-lookup"><span data-stu-id="94c39-173">To display the image, all the MVC view has to do is include the `PhotoUrl` value in the HTML sent to the browser.</span></span> <span data-ttu-id="94c39-174">Le serveur web et la base de données n’utilisent pas de cycles pour afficher l’image, ils servent uniquement de quelques octets à l’URL d’image.</span><span class="sxs-lookup"><span data-stu-id="94c39-174">The web server and the database are not using cycles to display the image, they are only serving up a few bytes to the image URL.</span></span> <span data-ttu-id="94c39-175">Dans le code Razor suivant, `Model` fait référence à une instance de la `FixItTask` classe d’entité.</span><span class="sxs-lookup"><span data-stu-id="94c39-175">In the following Razor code, `Model` refers to an instance of the `FixItTask` entity class.</span></span>

[!code-cshtml[Main](unstructured-blob-storage/samples/sample12.cshtml?highlight=11)]

<span data-ttu-id="94c39-176">Si vous examinez le code HTML de la page qui affiche, vous consultez l’URL qui pointe directement vers l’image dans le stockage blob, comme celui-ci :</span><span class="sxs-lookup"><span data-stu-id="94c39-176">If you look at the HTML of the page that displays, you see the URL pointing directly to the image in blob storage, something like this:</span></span>

[!code-cshtml[Main](unstructured-blob-storage/samples/sample13.cshtml?highlight=11)]

## <a name="summary"></a><span data-ttu-id="94c39-177">Récapitulatif</span><span class="sxs-lookup"><span data-stu-id="94c39-177">Summary</span></span>

<span data-ttu-id="94c39-178">Vous avez vu comment l’application Fix It stocke les images dans le service Blob et les URL des images uniquement dans la base de données SQL.</span><span class="sxs-lookup"><span data-stu-id="94c39-178">You've seen how the Fix It app stores images in the Blob service and only image URLs in the SQL database.</span></span> <span data-ttu-id="94c39-179">À l’aide du service Blob conserve la base de données SQL est beaucoup plus petite que sinon serait, rend possible à l’échelle jusqu'à un nombre presque illimité de tâches et peut être effectuée sans avoir à écrire beaucoup de code.</span><span class="sxs-lookup"><span data-stu-id="94c39-179">Using the Blob service keeps the SQL database much smaller than it otherwise would be, makes it possible to scale up to an almost unlimited number of tasks, and can be done without writing a lot of code.</span></span>

<span data-ttu-id="94c39-180">Vous pouvez avoir des centaines de téraoctets dans un compte de stockage, et le coût de stockage est beaucoup moins coûteux que le stockage de base de données SQL, en commençant à environ 3 cents par gigaoctet par mois, plus une charge de petites transactions.</span><span class="sxs-lookup"><span data-stu-id="94c39-180">You can have hundreds of terabytes in a storage account, and the storage cost is much less expensive than SQL Database storage, starting at about 3 cents per gigabyte per month plus a small transaction charge.</span></span> <span data-ttu-id="94c39-181">Et n’oubliez pas que vous ne payez pas pour la capacité maximale, mais uniquement pour la quantité que vous stockez, par conséquent, votre application est prête à l’échelle, mais vous ne payez pas supplémentaire pour toute cette capacité.</span><span class="sxs-lookup"><span data-stu-id="94c39-181">And keep in mind that you're not paying for the maximum capacity but only for the amount you actually store, so your app is ready to scale but you're not paying for all that extra capacity.</span></span>

<span data-ttu-id="94c39-182">Dans le [chapitre suivant](design-to-survive-failures.md) nous allons parler de l’importance de rendre une application cloud capable de gérer correctement les échecs.</span><span class="sxs-lookup"><span data-stu-id="94c39-182">In the [next chapter](design-to-survive-failures.md) we'll talk about the importance of making a cloud app capable of gracefully handling failures.</span></span>

## <a name="resources"></a><span data-ttu-id="94c39-183">Ressources</span><span class="sxs-lookup"><span data-stu-id="94c39-183">Resources</span></span>

<span data-ttu-id="94c39-184">Pour plus d’informations, consultez les ressources suivantes :</span><span class="sxs-lookup"><span data-stu-id="94c39-184">For more information see the following resources:</span></span>

- <span data-ttu-id="94c39-185">[Introduction à stockage BLOB Azure](https://www.simple-talk.com/cloud/cloud-data/an-introduction-to-windows-azure-blob-storage-/).</span><span class="sxs-lookup"><span data-stu-id="94c39-185">[An Introduction to Azure BLOB Storage](https://www.simple-talk.com/cloud/cloud-data/an-introduction-to-windows-azure-blob-storage-/).</span></span> <span data-ttu-id="94c39-186">Blog rédigé par Mike bois.</span><span class="sxs-lookup"><span data-stu-id="94c39-186">Blog by Mike Wood.</span></span>
- <span data-ttu-id="94c39-187">[Comment utiliser le Service de stockage d’objets Blob Azure dans .NET](https://docs.microsoft.com/azure/storage/blobs/storage-dotnet-how-to-use-blobs).</span><span class="sxs-lookup"><span data-stu-id="94c39-187">[How to use the Azure Blob Storage Service in .NET](https://docs.microsoft.com/azure/storage/blobs/storage-dotnet-how-to-use-blobs).</span></span> <span data-ttu-id="94c39-188">Documentation officielle sur le site MicrosoftAzure.com.</span><span class="sxs-lookup"><span data-stu-id="94c39-188">Official documentation on the MicrosoftAzure.com site.</span></span> <span data-ttu-id="94c39-189">Une brève introduction aux suivis d’exemples de code montrant comment se connecter au stockage d’objets blob, de stockage d’objets blob de créer des conteneurs, charger et télécharger des objets BLOB, etc.</span><span class="sxs-lookup"><span data-stu-id="94c39-189">A brief introduction to blob storage followed by code examples showing how to connect to blob storage, create containers, upload and download blobs, etc.</span></span>
- <span data-ttu-id="94c39-190">[Prévention de défaillance : Création de Services de Cloud évolutives, durables](https://channel9.msdn.com/Series/FailSafe).</span><span class="sxs-lookup"><span data-stu-id="94c39-190">[FailSafe: Building Scalable, Resilient Cloud Services](https://channel9.msdn.com/Series/FailSafe).</span></span> <span data-ttu-id="94c39-191">Série de vidéos de neuf parties par Ulrich Homann, Marc Mercuri et Mark Simms.</span><span class="sxs-lookup"><span data-stu-id="94c39-191">Nine-part video series by Ulrich Homann, Marc Mercuri, and Mark Simms.</span></span> <span data-ttu-id="94c39-192">Présente les principaux concepts et principes d’architecture de manière très accessible et intéressante, avec récits dessinés à partir de l’expérience de Microsoft Customer Advisory Team (CAT) de clients réels.</span><span class="sxs-lookup"><span data-stu-id="94c39-192">Presents high-level concepts and architectural principles in a very accessible and interesting way, with stories drawn from Microsoft Customer Advisory Team (CAT) experience with actual customers.</span></span> <span data-ttu-id="94c39-193">Pour une description de service de stockage Azure et les objets BLOB, consultez l’épisode 5 en commençant à 35:13.</span><span class="sxs-lookup"><span data-stu-id="94c39-193">For a discussion of Azure Storage service and blobs, see episode 5 starting at 35:13.</span></span>
- <span data-ttu-id="94c39-194">[Microsoft Patterns and Practices - conseils Azure](https://msdn.microsoft.com/library/dn568099.aspx).</span><span class="sxs-lookup"><span data-stu-id="94c39-194">[Microsoft Patterns and Practices - Azure Guidance](https://msdn.microsoft.com/library/dn568099.aspx).</span></span> <span data-ttu-id="94c39-195">Modèle de clé de Valet voir.</span><span class="sxs-lookup"><span data-stu-id="94c39-195">See Valet Key pattern.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="94c39-196">[Précédent](data-partitioning-strategies.md)
> [Suivant](design-to-survive-failures.md)</span><span class="sxs-lookup"><span data-stu-id="94c39-196">[Previous](data-partitioning-strategies.md)
[Next](design-to-survive-failures.md)</span></span>

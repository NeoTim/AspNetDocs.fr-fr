---
uid: mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-vb
title: '#6 d’itération : utiliser le développement piloté par les tests (VB) | Microsoft Docs'
author: microsoft
description: Dans cette sixième itération, nous ajoutons de nouvelles fonctionnalités à notre application en écrivant d’abord des tests unitaires et en écrivant du code sur les tests unitaires. Dans cette itération,...
ms.author: riande
ms.date: 02/20/2009
ms.assetid: e1fd226f-3f8e-4575-a179-5c75b240333d
msc.legacyurl: /mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-vb
msc.type: authoredcontent
ms.openlocfilehash: b166a1c6af29206d43558fa7de447c3f4da2ddfe
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78608303"
---
# <a name="iteration-6--use-test-driven-development-vb"></a><span data-ttu-id="09a0c-104">#6 d’itération – utiliser le développement piloté par les tests (VB)</span><span class="sxs-lookup"><span data-stu-id="09a0c-104">Iteration #6 – Use test-driven development (VB)</span></span>

<span data-ttu-id="09a0c-105">par [Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="09a0c-105">by [Microsoft](https://github.com/microsoft)</span></span>

[<span data-ttu-id="09a0c-106">Télécharger le code</span><span class="sxs-lookup"><span data-stu-id="09a0c-106">Download Code</span></span>](iteration-6-use-test-driven-development-vb/_static/contactmanager_6_vb1.zip)

> <span data-ttu-id="09a0c-107">Dans cette sixième itération, nous ajoutons de nouvelles fonctionnalités à notre application en écrivant d’abord des tests unitaires et en écrivant du code sur les tests unitaires.</span><span class="sxs-lookup"><span data-stu-id="09a0c-107">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="09a0c-108">Dans cette itération, nous ajoutons des groupes de contacts.</span><span class="sxs-lookup"><span data-stu-id="09a0c-108">In this iteration, we add contact groups.</span></span>

## <a name="building-a-contact-management-aspnet-mvc-application-vb"></a><span data-ttu-id="09a0c-109">Création d’une application MVC ASP.NET de gestion des contacts (VB)</span><span class="sxs-lookup"><span data-stu-id="09a0c-109">Building a Contact Management ASP.NET MVC Application (VB)</span></span>

<span data-ttu-id="09a0c-110">Dans cette série de didacticiels, nous créons une application de gestion de contacts entière du début à la fin.</span><span class="sxs-lookup"><span data-stu-id="09a0c-110">In this series of tutorials, we build an entire Contact Management application from start to finish.</span></span> <span data-ttu-id="09a0c-111">L’application Gestionnaire de contacts vous permet de stocker les informations de contact, les noms de téléphone et les adresses de messagerie, pour obtenir la liste des personnes.</span><span class="sxs-lookup"><span data-stu-id="09a0c-111">The Contact Manager application enables you to store contact information - names, phone numbers and email addresses - for a list of people.</span></span>

<span data-ttu-id="09a0c-112">Nous générons l’application sur plusieurs itérations.</span><span class="sxs-lookup"><span data-stu-id="09a0c-112">We build the application over multiple iterations.</span></span> <span data-ttu-id="09a0c-113">À chaque itération, nous améliorons progressivement l’application.</span><span class="sxs-lookup"><span data-stu-id="09a0c-113">With each iteration, we gradually improve the application.</span></span> <span data-ttu-id="09a0c-114">L’objectif de cette approche à plusieurs itérations est de vous permettre de comprendre la raison de chaque modification.</span><span class="sxs-lookup"><span data-stu-id="09a0c-114">The goal of this multiple iteration approach is to enable you to understand the reason for each change.</span></span>

- <span data-ttu-id="09a0c-115">#1 d’itération : créez l’application.</span><span class="sxs-lookup"><span data-stu-id="09a0c-115">Iteration #1 - Create the application.</span></span> <span data-ttu-id="09a0c-116">Dans la première itération, nous créons le gestionnaire de contacts de la manière la plus simple possible.</span><span class="sxs-lookup"><span data-stu-id="09a0c-116">In the first iteration, we create the Contact Manager in the simplest way possible.</span></span> <span data-ttu-id="09a0c-117">Nous ajoutons la prise en charge des opérations de base de données de base : créer, lire, mettre à jour et supprimer (CRUD).</span><span class="sxs-lookup"><span data-stu-id="09a0c-117">We add support for basic database operations: Create, Read, Update, and Delete (CRUD).</span></span>

- <span data-ttu-id="09a0c-118">Itération #2 : rendez l’application agréable.</span><span class="sxs-lookup"><span data-stu-id="09a0c-118">Iteration #2 - Make the application look nice.</span></span> <span data-ttu-id="09a0c-119">Dans cette itération, nous améliorons l’apparence de l’application en modifiant la page maître par défaut de la vue MVC ASP.NET et la feuille de style en cascade.</span><span class="sxs-lookup"><span data-stu-id="09a0c-119">In this iteration, we improve the appearance of the application by modifying the default ASP.NET MVC view master page and cascading style sheet.</span></span>

- <span data-ttu-id="09a0c-120">Itération #3 : ajouter une validation de formulaire.</span><span class="sxs-lookup"><span data-stu-id="09a0c-120">Iteration #3 - Add form validation.</span></span> <span data-ttu-id="09a0c-121">Dans la troisième itération, nous ajoutons la validation de base du formulaire.</span><span class="sxs-lookup"><span data-stu-id="09a0c-121">In the third iteration, we add basic form validation.</span></span> <span data-ttu-id="09a0c-122">Nous empêchons les utilisateurs de soumettre un formulaire sans remplir les champs de formulaire requis.</span><span class="sxs-lookup"><span data-stu-id="09a0c-122">We prevent people from submitting a form without completing required form fields.</span></span> <span data-ttu-id="09a0c-123">Nous validons également les adresses de messagerie et les numéros de téléphone.</span><span class="sxs-lookup"><span data-stu-id="09a0c-123">We also validate email addresses and phone numbers.</span></span>

- <span data-ttu-id="09a0c-124">Itération #4 : rendez l’application faiblement couplée.</span><span class="sxs-lookup"><span data-stu-id="09a0c-124">Iteration #4 - Make the application loosely coupled.</span></span> <span data-ttu-id="09a0c-125">Dans cette quatrième itération, nous tirant parti de plusieurs modèles de conception de logiciels pour faciliter la gestion et la modification de l’application de gestionnaire de contacts.</span><span class="sxs-lookup"><span data-stu-id="09a0c-125">In this fourth iteration, we take advantage of several software design patterns to make it easier to maintain and modify the Contact Manager application.</span></span> <span data-ttu-id="09a0c-126">Par exemple, nous refactorisons notre application pour utiliser le modèle de référentiel et le modèle d’injection de dépendances.</span><span class="sxs-lookup"><span data-stu-id="09a0c-126">For example, we refactor our application to use the Repository pattern and the Dependency Injection pattern.</span></span>

- <span data-ttu-id="09a0c-127">#5 d’itération-créer des tests unitaires.</span><span class="sxs-lookup"><span data-stu-id="09a0c-127">Iteration #5 - Create unit tests.</span></span> <span data-ttu-id="09a0c-128">Dans la cinquième itération, nous rendons notre application plus facile à gérer et à modifier en ajoutant des tests unitaires.</span><span class="sxs-lookup"><span data-stu-id="09a0c-128">In the fifth iteration, we make our application easier to maintain and modify by adding unit tests.</span></span> <span data-ttu-id="09a0c-129">Nous imitons nos classes de modèle de données et créons des tests unitaires pour nos contrôleurs et la logique de validation.</span><span class="sxs-lookup"><span data-stu-id="09a0c-129">We mock our data model classes and build unit tests for our controllers and validation logic.</span></span>

- <span data-ttu-id="09a0c-130">Itération #6-Utilisez le développement piloté par les tests.</span><span class="sxs-lookup"><span data-stu-id="09a0c-130">Iteration #6 - Use test-driven development.</span></span> <span data-ttu-id="09a0c-131">Dans cette sixième itération, nous ajoutons de nouvelles fonctionnalités à notre application en écrivant d’abord des tests unitaires et en écrivant du code sur les tests unitaires.</span><span class="sxs-lookup"><span data-stu-id="09a0c-131">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="09a0c-132">Dans cette itération, nous ajoutons des groupes de contacts.</span><span class="sxs-lookup"><span data-stu-id="09a0c-132">In this iteration, we add contact groups.</span></span>

- <span data-ttu-id="09a0c-133">#7 d’itération-ajoutez des fonctionnalités AJAX.</span><span class="sxs-lookup"><span data-stu-id="09a0c-133">Iteration #7 - Add Ajax functionality.</span></span> <span data-ttu-id="09a0c-134">Dans la septième itération, nous améliorons la réactivité et les performances de notre application en ajoutant la prise en charge d’Ajax.</span><span class="sxs-lookup"><span data-stu-id="09a0c-134">In the seventh iteration, we improve the responsiveness and performance of our application by adding support for Ajax.</span></span>

## <a name="this-iteration"></a><span data-ttu-id="09a0c-135">Cette itération</span><span class="sxs-lookup"><span data-stu-id="09a0c-135">This Iteration</span></span>

<span data-ttu-id="09a0c-136">Dans l’itération précédente de l’application du gestionnaire de contacts, nous avons créé des tests unitaires pour fournir un filet de sécurité pour notre code.</span><span class="sxs-lookup"><span data-stu-id="09a0c-136">In the previous iteration of the Contact Manager application, we created unit tests to provide a safety net for our code.</span></span> <span data-ttu-id="09a0c-137">La motivation de la création des tests unitaires consistait à rendre notre code plus résilient pour la modification.</span><span class="sxs-lookup"><span data-stu-id="09a0c-137">The motivation for creating the unit tests was to make our code more resilient to change.</span></span> <span data-ttu-id="09a0c-138">Avec les tests unitaires en place, nous pouvons apporter toute modification à notre code et savoir immédiatement si nous avons cassé les fonctionnalités existantes.</span><span class="sxs-lookup"><span data-stu-id="09a0c-138">With unit tests in place, we can happily make any change to our code and immediately know whether we have broken existing functionality.</span></span>

<span data-ttu-id="09a0c-139">Dans cette itération, nous utilisons des tests unitaires dans un but totalement différent.</span><span class="sxs-lookup"><span data-stu-id="09a0c-139">In this iteration, we use unit tests for an entirely different purpose.</span></span> <span data-ttu-id="09a0c-140">Dans cette itération, nous utilisons des tests unitaires dans le cadre de la philosophie de conception d’une application appelée *développement piloté par les tests*.</span><span class="sxs-lookup"><span data-stu-id="09a0c-140">In this iteration, we use unit tests as part of an application design philosophy called *test-driven development*.</span></span> <span data-ttu-id="09a0c-141">Quand vous surveillez le développement piloté par les tests, vous écrivez d’abord des tests, puis vous écrivez du code sur les tests.</span><span class="sxs-lookup"><span data-stu-id="09a0c-141">When you practice test-driven development, you write tests first and then write code against the tests.</span></span>

<span data-ttu-id="09a0c-142">Plus précisément, lors de la pratique du développement piloté par les tests, trois étapes sont nécessaires lors de la création du code (rouge/vert/refactorer) :</span><span class="sxs-lookup"><span data-stu-id="09a0c-142">More precisely, when practicing test-driven development, there are three steps that you complete when creating code (Red/ Green/Refactor):</span></span>

1. <span data-ttu-id="09a0c-143">Écrire un test unitaire qui échoue (rouge)</span><span class="sxs-lookup"><span data-stu-id="09a0c-143">Write a unit test that fails (Red)</span></span>
2. <span data-ttu-id="09a0c-144">Écrire du code qui réussit le test unitaire (vert)</span><span class="sxs-lookup"><span data-stu-id="09a0c-144">Write code that passes the unit test (Green)</span></span>
3. <span data-ttu-id="09a0c-145">Refactoriser votre code (refactorisation)</span><span class="sxs-lookup"><span data-stu-id="09a0c-145">Refactor your code (Refactor)</span></span>

<span data-ttu-id="09a0c-146">Tout d’abord, vous écrivez le test unitaire.</span><span class="sxs-lookup"><span data-stu-id="09a0c-146">First, you write the unit test.</span></span> <span data-ttu-id="09a0c-147">Le test unitaire doit exprimer votre intention sur la façon dont vous vous attendez à ce que votre code se comporte.</span><span class="sxs-lookup"><span data-stu-id="09a0c-147">The unit test should express your intention for how you expect your code to behave.</span></span> <span data-ttu-id="09a0c-148">Lorsque vous créez pour la première fois le test unitaire, le test unitaire doit échouer.</span><span class="sxs-lookup"><span data-stu-id="09a0c-148">When you first create the unit test, the unit test should fail.</span></span> <span data-ttu-id="09a0c-149">Le test doit échouer, car vous n’avez pas encore écrit de code d’application conforme au test.</span><span class="sxs-lookup"><span data-stu-id="09a0c-149">The test should fail because you have not yet written any application code that satisfies the test.</span></span>

<span data-ttu-id="09a0c-150">Ensuite, vous écrivez juste suffisamment de code pour que le test unitaire réussisse.</span><span class="sxs-lookup"><span data-stu-id="09a0c-150">Next, you write just enough code in order for the unit test to pass.</span></span> <span data-ttu-id="09a0c-151">L’objectif est d’écrire le code dans le laziest, sloppiest et le plus rapide possible.</span><span class="sxs-lookup"><span data-stu-id="09a0c-151">The goal is to write the code in the laziest, sloppiest and fastest possible way.</span></span> <span data-ttu-id="09a0c-152">Vous ne devez pas perdre du temps à réfléchir à l’architecture de votre application.</span><span class="sxs-lookup"><span data-stu-id="09a0c-152">You should not waste time thinking about the architecture of your application.</span></span> <span data-ttu-id="09a0c-153">Au lieu de cela, vous devez vous concentrer sur l’écriture de la quantité minimale de code nécessaire pour satisfaire l’intention exprimée par le test unitaire.</span><span class="sxs-lookup"><span data-stu-id="09a0c-153">Instead, you should focus on writing the minimal amount of code necessary to satisfy the intention expressed by the unit test.</span></span>

<span data-ttu-id="09a0c-154">Enfin, une fois que vous avez écrit suffisamment de code, vous pouvez revenir en arrière et prendre en compte l’architecture globale de votre application.</span><span class="sxs-lookup"><span data-stu-id="09a0c-154">Finally, after you have written enough code, you can step back and consider the overall architecture of your application.</span></span> <span data-ttu-id="09a0c-155">Dans cette étape, vous réécrivez (refactorisez) votre code en tirant parti des modèles de conception de logiciels, tels que le modèle de référentiel, afin que votre code soit plus gérable.</span><span class="sxs-lookup"><span data-stu-id="09a0c-155">In this step, you rewrite (refactor) your code by taking advantage of software design patterns -- such as the repository pattern -- so that your code is more maintainable.</span></span> <span data-ttu-id="09a0c-156">Vous pouvez intrépidité réécrire votre code dans cette étape, car votre code est couvert par les tests unitaires.</span><span class="sxs-lookup"><span data-stu-id="09a0c-156">You can fearlessly rewrite your code in this step because your code is covered by unit tests.</span></span>

<span data-ttu-id="09a0c-157">Il y a de nombreux avantages qui résultent de la pratique du développement piloté par les tests.</span><span class="sxs-lookup"><span data-stu-id="09a0c-157">There are many benefits that result from practicing test-driven development.</span></span> <span data-ttu-id="09a0c-158">Tout d’abord, le développement piloté par les tests vous oblige à vous concentrer sur le code qui doit réellement être écrit.</span><span class="sxs-lookup"><span data-stu-id="09a0c-158">First, test-driven development forces you to focus on code that actually needs to be written.</span></span> <span data-ttu-id="09a0c-159">Étant donné que vous êtes constamment concentré sur l’écriture de suffisamment de code pour passer un test particulier, vous n’êtes pas en mesure de vous concentrer sur les mauvaises herbes et d’écrire des quantités importantes de code que vous n’utiliserez jamais.</span><span class="sxs-lookup"><span data-stu-id="09a0c-159">Because you are constantly focused on just writing enough code to pass a particular test, you are prevented from wandering into the weeds and writing massive amounts of code that you will never use.</span></span>

<span data-ttu-id="09a0c-160">Deuxièmement, une méthodologie de conception « test First » vous oblige à écrire du code du point de vue de l’utilisation de votre code.</span><span class="sxs-lookup"><span data-stu-id="09a0c-160">Second, a "test first" design methodology forces you to write code from the perspective of how your code will be used.</span></span> <span data-ttu-id="09a0c-161">En d’autres termes, lors de la pratique du développement piloté par les tests, vous écrivez constamment vos tests du point de vue de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="09a0c-161">In other words, when practicing test-driven development, you are constantly writing your tests from a user perspective.</span></span> <span data-ttu-id="09a0c-162">Par conséquent, le développement piloté par les tests peut entraîner des API plus claires et plus compréhensibles.</span><span class="sxs-lookup"><span data-stu-id="09a0c-162">Therefore, test-driven development can result in cleaner and more understandable APIs.</span></span>

<span data-ttu-id="09a0c-163">Enfin, le développement piloté par les tests vous oblige à écrire des tests unitaires dans le cadre du processus normal d’écriture d’une application.</span><span class="sxs-lookup"><span data-stu-id="09a0c-163">Finally, test-driven development forces you to write unit tests as part of the normal process of writing an application.</span></span> <span data-ttu-id="09a0c-164">En tant qu’approche de l’échéance du projet, le test est généralement la première chose qui sort de la fenêtre.</span><span class="sxs-lookup"><span data-stu-id="09a0c-164">As a project deadline approaches, testing is typically the first thing that goes out the window.</span></span> <span data-ttu-id="09a0c-165">En revanche, lors de la pratique du développement piloté par les tests, il est plus probable que vous soyez vertueux sur l’écriture de tests unitaires, car le développement piloté par les tests permet aux tests unitaires de centraliser le processus de création d’une application.</span><span class="sxs-lookup"><span data-stu-id="09a0c-165">When practicing test-driven development, on the other hand, you are more likely to be virtuous about writing unit tests because test-driven development makes unit tests central to the process of building an application.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="09a0c-166">Pour en savoir plus sur le développement piloté par les tests, je vous recommande de lire le livre plumes Michael qui **fonctionne efficacement avec du code hérité**.</span><span class="sxs-lookup"><span data-stu-id="09a0c-166">To learn more about test-driven development, I recommend that you read Michael Feathers book **Working Effectively with Legacy Code**.</span></span>

<span data-ttu-id="09a0c-167">Dans cette itération, nous ajoutons une nouvelle fonctionnalité à notre application de gestion des contacts.</span><span class="sxs-lookup"><span data-stu-id="09a0c-167">In this iteration, we add a new feature to our Contact Manager application.</span></span> <span data-ttu-id="09a0c-168">Nous ajoutons la prise en charge des groupes de contacts.</span><span class="sxs-lookup"><span data-stu-id="09a0c-168">We add support for Contact Groups.</span></span> <span data-ttu-id="09a0c-169">Vous pouvez utiliser des groupes de contacts pour organiser vos contacts en catégories telles que les groupes professionnels et amis.</span><span class="sxs-lookup"><span data-stu-id="09a0c-169">You can use Contact Groups to organize your contacts into categories such as Business and Friend groups.</span></span>

<span data-ttu-id="09a0c-170">Nous allons ajouter cette nouvelle fonctionnalité à notre application en suivant un processus de développement piloté par les tests.</span><span class="sxs-lookup"><span data-stu-id="09a0c-170">We'll add this new functionality to our application by following a process of test-driven development.</span></span> <span data-ttu-id="09a0c-171">Nous allons d’abord écrire nos tests unitaires et nous allons écrire tout notre code dans le cadre de ces tests.</span><span class="sxs-lookup"><span data-stu-id="09a0c-171">We'll write our unit tests first and we'll write all of our code against these tests.</span></span>

## <a name="what-gets-tested"></a><span data-ttu-id="09a0c-172">Ce qui est testé</span><span class="sxs-lookup"><span data-stu-id="09a0c-172">What Gets Tested</span></span>

<span data-ttu-id="09a0c-173">Comme nous l’avons vu dans l’itération précédente, vous n’écrivez généralement pas de tests unitaires pour la logique d’accès aux données ou la logique de la vue.</span><span class="sxs-lookup"><span data-stu-id="09a0c-173">As we discussed in the previous iteration, you typically do not write unit tests for data access logic or view logic.</span></span> <span data-ttu-id="09a0c-174">Vous ne pouvez pas écrire de tests unitaires pour la logique d’accès aux données, car l’accès à une base de données est une opération relativement lente.</span><span class="sxs-lookup"><span data-stu-id="09a0c-174">You don t write unit tests for data access logic because accessing a database is a relatively slow operation.</span></span> <span data-ttu-id="09a0c-175">Vous ne pouvez pas écrire de tests unitaires pour la logique d’affichage, car l’accès à une vue nécessite la mise en place d’un serveur Web qui est une opération relativement lente.</span><span class="sxs-lookup"><span data-stu-id="09a0c-175">You don t write unit tests for view logic because accessing a view requires spinning up a web server which is a relatively slow operation.</span></span> <span data-ttu-id="09a0c-176">Vous ne devez pas écrire de test unitaire, sauf si le test peut être exécuté à nouveau très rapidement.</span><span class="sxs-lookup"><span data-stu-id="09a0c-176">You shouldn't write a unit test unless the test can be executed over and over again very fast</span></span>

<span data-ttu-id="09a0c-177">Étant donné que le développement piloté par les tests est piloté par des tests unitaires, nous nous concentrons initialement sur l’écriture du contrôleur et de la logique métier.</span><span class="sxs-lookup"><span data-stu-id="09a0c-177">Because test-driven development is driven by unit tests, we focus initially on writing controller and business logic.</span></span> <span data-ttu-id="09a0c-178">Nous Évitez de toucher la base de données ou les vues.</span><span class="sxs-lookup"><span data-stu-id="09a0c-178">We avoid touching the database or views.</span></span> <span data-ttu-id="09a0c-179">Nous n’allons pas modifier la base de données ou créer nos vues jusqu’à la fin de ce didacticiel.</span><span class="sxs-lookup"><span data-stu-id="09a0c-179">We won't modify the database or create our views until the very end of this tutorial.</span></span> <span data-ttu-id="09a0c-180">Nous commençons par ce qui peut être testé.</span><span class="sxs-lookup"><span data-stu-id="09a0c-180">We start with what can be tested.</span></span>

## <a name="creating-user-stories"></a><span data-ttu-id="09a0c-181">Créer des récits utilisateur</span><span class="sxs-lookup"><span data-stu-id="09a0c-181">Creating User Stories</span></span>

<span data-ttu-id="09a0c-182">Lors du développement piloté par les tests, vous commencez toujours par écrire un test.</span><span class="sxs-lookup"><span data-stu-id="09a0c-182">When practicing test-driven development, you always start by writing a test.</span></span> <span data-ttu-id="09a0c-183">Cela soulève immédiatement la question : Comment décider du test à écrire en premier ?</span><span class="sxs-lookup"><span data-stu-id="09a0c-183">This immediately raises the question: How do you decide what test to write first?</span></span> <span data-ttu-id="09a0c-184">Pour répondre à cette question, vous devez écrire un ensemble de [*récits utilisateur*](http://en.wikipedia.org/wiki/User_stories).</span><span class="sxs-lookup"><span data-stu-id="09a0c-184">To answer this question, you should write a set of [*user stories*](http://en.wikipedia.org/wiki/User_stories).</span></span>

<span data-ttu-id="09a0c-185">Un récit utilisateur est une description très brève (généralement une phrase) d’une spécification logicielle.</span><span class="sxs-lookup"><span data-stu-id="09a0c-185">A user story is a very brief (usually one sentence) description of a software requirement.</span></span> <span data-ttu-id="09a0c-186">Il doit s’agir d’une description non technique d’une exigence écrite du point de vue de l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="09a0c-186">It should be a non-technical description of a requirement written from a user perspective.</span></span>

<span data-ttu-id="09a0c-187">Ici, l’ensemble des récits utilisateur qui décrivent les fonctionnalités requises par la nouvelle fonctionnalité de groupe de contacts :</span><span class="sxs-lookup"><span data-stu-id="09a0c-187">Here s the set of user stories that describe the features required by the new Contact Group functionality:</span></span>

1. <span data-ttu-id="09a0c-188">L’utilisateur peut afficher la liste des groupes de contacts.</span><span class="sxs-lookup"><span data-stu-id="09a0c-188">User can view a list of contact groups.</span></span>
2. <span data-ttu-id="09a0c-189">L’utilisateur peut créer un groupe de contacts.</span><span class="sxs-lookup"><span data-stu-id="09a0c-189">User can create a new contact group.</span></span>
3. <span data-ttu-id="09a0c-190">L’utilisateur peut supprimer un groupe de contacts existant.</span><span class="sxs-lookup"><span data-stu-id="09a0c-190">User can delete an existing contact group.</span></span>
4. <span data-ttu-id="09a0c-191">L’utilisateur peut sélectionner un groupe de contacts lors de la création d’un contact.</span><span class="sxs-lookup"><span data-stu-id="09a0c-191">User can select a contact group when creating a new contact.</span></span>
5. <span data-ttu-id="09a0c-192">L’utilisateur peut sélectionner un groupe de contacts lors de la modification d’un contact existant.</span><span class="sxs-lookup"><span data-stu-id="09a0c-192">User can select a contact group when editing an existing contact.</span></span>
6. <span data-ttu-id="09a0c-193">Une liste de groupes de contacts s’affiche dans la vue index.</span><span class="sxs-lookup"><span data-stu-id="09a0c-193">A list of contact groups is displayed in the Index view.</span></span>
7. <span data-ttu-id="09a0c-194">Lorsqu’un utilisateur clique sur un groupe de contacts, une liste de contacts correspondants s’affiche.</span><span class="sxs-lookup"><span data-stu-id="09a0c-194">When a user clicks a contact group, a list of matching contacts is displayed.</span></span>

<span data-ttu-id="09a0c-195">Notez que cette liste de récits utilisateur est entièrement compréhensible par un client.</span><span class="sxs-lookup"><span data-stu-id="09a0c-195">Notice that this list of user stories is completely understandable by a customer.</span></span> <span data-ttu-id="09a0c-196">Il n’y a aucune mention des détails de l’implémentation technique.</span><span class="sxs-lookup"><span data-stu-id="09a0c-196">There is no mention of technical implementation details.</span></span>

<span data-ttu-id="09a0c-197">Pendant le processus de création de votre application, l’ensemble des récits utilisateur peut devenir plus affiné.</span><span class="sxs-lookup"><span data-stu-id="09a0c-197">While in the process of building your application, the set of user stories can become more refined.</span></span> <span data-ttu-id="09a0c-198">Vous pouvez décomposer un récit utilisateur en plusieurs récits (exigences).</span><span class="sxs-lookup"><span data-stu-id="09a0c-198">You might break a user story into multiple stories (requirements).</span></span> <span data-ttu-id="09a0c-199">Par exemple, vous pouvez décider que la création d’un nouveau groupe de contacts doit impliquer la validation.</span><span class="sxs-lookup"><span data-stu-id="09a0c-199">For example, you might decide that creating a new contact group should involve validation.</span></span> <span data-ttu-id="09a0c-200">L’envoi d’un groupe de contacts sans nom doit retourner une erreur de validation.</span><span class="sxs-lookup"><span data-stu-id="09a0c-200">Submitting a contact group without a name should return a validation error.</span></span>

<span data-ttu-id="09a0c-201">Une fois que vous avez créé une liste de récits utilisateur, vous êtes prêt à écrire votre premier test unitaire.</span><span class="sxs-lookup"><span data-stu-id="09a0c-201">After you create a list of user stories, you are ready to write your first unit test.</span></span> <span data-ttu-id="09a0c-202">Nous allons commencer par créer un test unitaire pour afficher la liste des groupes de contacts.</span><span class="sxs-lookup"><span data-stu-id="09a0c-202">We'll start by creating a unit test for viewing the list of contact groups.</span></span>

## <a name="listing-contact-groups"></a><span data-ttu-id="09a0c-203">Liste des groupes de contacts</span><span class="sxs-lookup"><span data-stu-id="09a0c-203">Listing Contact Groups</span></span>

<span data-ttu-id="09a0c-204">Notre premier récit utilisateur est qu’un utilisateur doit être en mesure d’afficher la liste des groupes de contacts.</span><span class="sxs-lookup"><span data-stu-id="09a0c-204">Our first user story is that a user should be able to view a list of contact groups.</span></span> <span data-ttu-id="09a0c-205">Nous devons exprimer cet article avec un test.</span><span class="sxs-lookup"><span data-stu-id="09a0c-205">We need to express this story with a test.</span></span>

<span data-ttu-id="09a0c-206">Créez un nouveau test unitaire en cliquant avec le bouton droit sur le dossier Controllers dans le projet ContactManager. tests, en sélectionnant **Ajouter, nouveau test**et en sélectionnant le modèle de **test unitaire** (voir la figure 1).</span><span class="sxs-lookup"><span data-stu-id="09a0c-206">Create a new unit test by right-clicking the Controllers folder in the ContactManager.Tests project, selecting **Add, New Test**, and selecting the **Unit Test** template (see Figure 1).</span></span> <span data-ttu-id="09a0c-207">Nommez le nouveau test unitaire GroupControllerTest. vb, puis cliquez sur le bouton **OK** .</span><span class="sxs-lookup"><span data-stu-id="09a0c-207">Name the new unit test GroupControllerTest.vb and click the **OK** button.</span></span>

<span data-ttu-id="09a0c-208">[![de l’ajout du test unitaire GroupControllerTest](iteration-6-use-test-driven-development-vb/_static/image1.jpg)](iteration-6-use-test-driven-development-vb/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="09a0c-208">[![Adding the GroupControllerTest unit test](iteration-6-use-test-driven-development-vb/_static/image1.jpg)](iteration-6-use-test-driven-development-vb/_static/image1.png)</span></span>

<span data-ttu-id="09a0c-209">**Figure 01**: ajout du test unitaire GroupControllerTest ([cliquez pour afficher l’image en taille réelle](iteration-6-use-test-driven-development-vb/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="09a0c-209">**Figure 01**: Adding the GroupControllerTest unit test([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image2.png))</span></span>

<span data-ttu-id="09a0c-210">Notre premier test unitaire est contenu dans la liste 1.</span><span class="sxs-lookup"><span data-stu-id="09a0c-210">Our first unit test is contained in Listing 1.</span></span> <span data-ttu-id="09a0c-211">Ce test vérifie que la méthode index () du contrôleur de groupe retourne un ensemble de groupes.</span><span class="sxs-lookup"><span data-stu-id="09a0c-211">This test verifies that the Index() method of the Group controller returns a set of Groups.</span></span> <span data-ttu-id="09a0c-212">Le test vérifie qu’une collection de groupes est retournée dans les données d’affichage.</span><span class="sxs-lookup"><span data-stu-id="09a0c-212">The test verifies that a collection of Groups is returned in view data.</span></span>

<span data-ttu-id="09a0c-213">**Liste 1-Controllers\GroupControllerTest.vb**</span><span class="sxs-lookup"><span data-stu-id="09a0c-213">**Listing 1 - Controllers\GroupControllerTest.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample1.vb)]

<span data-ttu-id="09a0c-214">Quand vous tapez le code dans la liste 1 dans Visual Studio pour la première fois, vous obtenez un grand nombre de lignes ondulées rouges.</span><span class="sxs-lookup"><span data-stu-id="09a0c-214">When you first type the code in Listing 1 in Visual Studio, you'll get a lot of red squiggly lines.</span></span> <span data-ttu-id="09a0c-215">Nous n’avons pas créé les classes GroupController ou Group.</span><span class="sxs-lookup"><span data-stu-id="09a0c-215">We have not created the GroupController or Group classes.</span></span>

<span data-ttu-id="09a0c-216">À ce stade, nous pouvons même créer notre application afin de pouvoir exécuter notre premier test unitaire.</span><span class="sxs-lookup"><span data-stu-id="09a0c-216">At this point, we can t even build our application so we can t execute our first unit test.</span></span> <span data-ttu-id="09a0c-217">C’est bon.</span><span class="sxs-lookup"><span data-stu-id="09a0c-217">That s good.</span></span> <span data-ttu-id="09a0c-218">Cela compte comme un test ayant échoué.</span><span class="sxs-lookup"><span data-stu-id="09a0c-218">That counts as a failing test.</span></span> <span data-ttu-id="09a0c-219">Par conséquent, nous avons maintenant l’autorisation de commencer l’écriture du code de l’application.</span><span class="sxs-lookup"><span data-stu-id="09a0c-219">Therefore, we now have permission to start writing application code.</span></span> <span data-ttu-id="09a0c-220">Nous devons écrire suffisamment de code pour exécuter notre test.</span><span class="sxs-lookup"><span data-stu-id="09a0c-220">We need to write enough code to execute our test.</span></span>

<span data-ttu-id="09a0c-221">La classe de contrôleur de groupe dans Listing 2 contient le minimum de code requis pour passer le test unitaire.</span><span class="sxs-lookup"><span data-stu-id="09a0c-221">The Group controller class in Listing 2 contains the bare minimum of code required to pass the unit test.</span></span> <span data-ttu-id="09a0c-222">L’action index () renvoie une liste de groupes codée statiquement (la classe de groupe est définie dans la liste 3).</span><span class="sxs-lookup"><span data-stu-id="09a0c-222">The Index() action returns a statically coded list of Groups (the Group class is defined in Listing 3).</span></span>

<span data-ttu-id="09a0c-223">**Liste 2-Controllers\GroupController.vb**</span><span class="sxs-lookup"><span data-stu-id="09a0c-223">**Listing 2 - Controllers\GroupController.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample2.vb)]

<span data-ttu-id="09a0c-224">**Liste 3-Models\Group.vb**</span><span class="sxs-lookup"><span data-stu-id="09a0c-224">**Listing 3 - Models\Group.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample3.vb)]

<span data-ttu-id="09a0c-225">Après avoir ajouté les classes GroupController et Group à notre projet, notre premier test unitaire se termine correctement (voir la figure 2).</span><span class="sxs-lookup"><span data-stu-id="09a0c-225">After we add the GroupController and Group classes to our project, our first unit test completes successfully (see Figure 2).</span></span> <span data-ttu-id="09a0c-226">Nous avons effectué le travail minimal requis pour réussir le test.</span><span class="sxs-lookup"><span data-stu-id="09a0c-226">We have done the minimum work required to pass the test.</span></span> <span data-ttu-id="09a0c-227">Il est temps de célébrer.</span><span class="sxs-lookup"><span data-stu-id="09a0c-227">It is time to celebrate.</span></span>

<span data-ttu-id="09a0c-228">[![réussie !](iteration-6-use-test-driven-development-vb/_static/image2.jpg)](iteration-6-use-test-driven-development-vb/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="09a0c-228">[![Success!](iteration-6-use-test-driven-development-vb/_static/image2.jpg)](iteration-6-use-test-driven-development-vb/_static/image3.png)</span></span>

<span data-ttu-id="09a0c-229">**Figure 02**: réussite ! ([Cliquez pour afficher l’image en taille réelle](iteration-6-use-test-driven-development-vb/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="09a0c-229">**Figure 02**: Success!([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image4.png))</span></span>

## <a name="creating-contact-groups"></a><span data-ttu-id="09a0c-230">Création de groupes de contacts</span><span class="sxs-lookup"><span data-stu-id="09a0c-230">Creating Contact Groups</span></span>

<span data-ttu-id="09a0c-231">Nous pouvons maintenant passer au deuxième récit utilisateur.</span><span class="sxs-lookup"><span data-stu-id="09a0c-231">Now we can move on to the second user story.</span></span> <span data-ttu-id="09a0c-232">Nous devons être en mesure de créer des groupes de contacts.</span><span class="sxs-lookup"><span data-stu-id="09a0c-232">We need to be able to create new contact groups.</span></span> <span data-ttu-id="09a0c-233">Nous devons exprimer cet objectif à l’aide d’un test.</span><span class="sxs-lookup"><span data-stu-id="09a0c-233">We need to express this intention with a test.</span></span>

<span data-ttu-id="09a0c-234">Le test de la liste 4 vérifie que l’appel de la méthode Create () avec un nouveau groupe ajoute le groupe à la liste des groupes retournés par la méthode index ().</span><span class="sxs-lookup"><span data-stu-id="09a0c-234">The test in Listing 4 verifies that calling the Create() method with a new Group adds the Group to the list of Groups returned by the Index() method.</span></span> <span data-ttu-id="09a0c-235">En d’autres termes, si je crée un nouveau groupe, je dois pouvoir récupérer le nouveau groupe à partir de la liste des groupes renvoyés par la méthode index ().</span><span class="sxs-lookup"><span data-stu-id="09a0c-235">In other words, if I create a new group then I should be able to get the new Group back from the list of Groups returned by the Index() method.</span></span>

<span data-ttu-id="09a0c-236">**Liste 4-Controllers\GroupControllerTest.vb**</span><span class="sxs-lookup"><span data-stu-id="09a0c-236">**Listing 4 - Controllers\GroupControllerTest.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample4.vb)]

<span data-ttu-id="09a0c-237">Le test de la liste 4 appelle la méthode Group Controller Create () avec un nouveau groupe de contacts.</span><span class="sxs-lookup"><span data-stu-id="09a0c-237">The test in Listing 4 calls the Group controller Create() method with a new contact Group.</span></span> <span data-ttu-id="09a0c-238">Ensuite, le test vérifie que l’appel de la méthode index du contrôleur de groupe () renvoie le nouveau groupe dans afficher les données.</span><span class="sxs-lookup"><span data-stu-id="09a0c-238">Next, the test verifies that calling the Group controller Index() method returns the new Group in view data.</span></span>

<span data-ttu-id="09a0c-239">Le contrôleur de groupe modifié dans la liste 5 contient le minimum de modifications nécessaires pour réussir le nouveau test.</span><span class="sxs-lookup"><span data-stu-id="09a0c-239">The modified Group controller in Listing 5 contains the bare minimum of changes required to pass the new test.</span></span>

<span data-ttu-id="09a0c-240">**Liste 5-Controllers\GroupController.vb**</span><span class="sxs-lookup"><span data-stu-id="09a0c-240">**Listing 5 - Controllers\GroupController.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample5.vb)]

## <a name="the-group-controller-in-listing-5-has-a-new-create-action-this-action-adds-a-group-to-a-collection-of-groups-notice-that-the-index-action-has-been-modified-to-return-the-contents-of-the-collection-of-groups"></a><span data-ttu-id="09a0c-241">Le contrôleur de groupe dans la liste 5 contient une nouvelle action créer ().</span><span class="sxs-lookup"><span data-stu-id="09a0c-241">The Group controller in Listing 5 has a new Create() action.</span></span> <span data-ttu-id="09a0c-242">Cette action ajoute un groupe à une collection de groupes.</span><span class="sxs-lookup"><span data-stu-id="09a0c-242">This action adds a Group to a collection of Groups.</span></span> <span data-ttu-id="09a0c-243">Notez que l’action index () a été modifiée pour retourner le contenu de la collection de groupes.</span><span class="sxs-lookup"><span data-stu-id="09a0c-243">Notice that the Index() action has been modified to return the contents of the collection of Groups.</span></span>

<span data-ttu-id="09a0c-244">Une fois encore, nous avons effectué la quantité minimale de travail nécessaire pour réussir le test unitaire.</span><span class="sxs-lookup"><span data-stu-id="09a0c-244">Once again, we have performed the bare minimum amount of work required to pass the unit test.</span></span> <span data-ttu-id="09a0c-245">Après avoir apporté ces modifications au contrôleur de groupe, tous nos tests unitaires réussissent.</span><span class="sxs-lookup"><span data-stu-id="09a0c-245">After we make these changes to the Group controller, all of our unit tests pass.</span></span>

## <a name="adding-validation"></a><span data-ttu-id="09a0c-246">Ajout de la validation</span><span class="sxs-lookup"><span data-stu-id="09a0c-246">Adding Validation</span></span>

<span data-ttu-id="09a0c-247">Cette exigence n’a pas été indiquée explicitement dans le récit utilisateur.</span><span class="sxs-lookup"><span data-stu-id="09a0c-247">This requirement was not stated explicitly in the user story.</span></span> <span data-ttu-id="09a0c-248">Toutefois, il est raisonnable d’exiger qu’un groupe ait un nom.</span><span class="sxs-lookup"><span data-stu-id="09a0c-248">However, it is reasonable to require that a Group have a name.</span></span> <span data-ttu-id="09a0c-249">Dans le cas contraire, l’Organisation des contacts en groupes n’est pas très utile.</span><span class="sxs-lookup"><span data-stu-id="09a0c-249">Otherwise, organizing contacts into Groups would not be very useful.</span></span>

<span data-ttu-id="09a0c-250">La liste 6 contient un nouveau test qui exprime cet objectif.</span><span class="sxs-lookup"><span data-stu-id="09a0c-250">Listing 6 contains a new test that expresses this intention.</span></span> <span data-ttu-id="09a0c-251">Ce test vérifie que la tentative de création d’un groupe sans fournir de nom génère un message d’erreur de validation dans l’état du modèle.</span><span class="sxs-lookup"><span data-stu-id="09a0c-251">This test verifies that attempting to create a Group without supplying a name results in a validation error message in model state.</span></span>

<span data-ttu-id="09a0c-252">**Liste 6-Controllers\GroupControllerTest.vb**</span><span class="sxs-lookup"><span data-stu-id="09a0c-252">**Listing 6 - Controllers\GroupControllerTest.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample6.vb)]

<span data-ttu-id="09a0c-253">Pour satisfaire ce test, nous devons ajouter une propriété Name à notre classe Group (voir la liste 7).</span><span class="sxs-lookup"><span data-stu-id="09a0c-253">In order to satisfy this test, we need to add a Name property to our Group class (see Listing 7).</span></span> <span data-ttu-id="09a0c-254">En outre, nous devons ajouter un peu de logique de validation à notre action de création () du contrôleur de groupe (voir le Listing 8).</span><span class="sxs-lookup"><span data-stu-id="09a0c-254">Furthermore, we need to add a tiny bit of validation logic to our Group controller s Create() action (see Listing 8).</span></span>

<span data-ttu-id="09a0c-255">**Liste 7-Models\Group.vb**</span><span class="sxs-lookup"><span data-stu-id="09a0c-255">**Listing 7 - Models\Group.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample7.vb)]

<span data-ttu-id="09a0c-256">**Liste 8-Controllers\GroupController.vb**</span><span class="sxs-lookup"><span data-stu-id="09a0c-256">**Listing 8 - Controllers\GroupController.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample8.vb)]

<span data-ttu-id="09a0c-257">Notez que l’action de création de contrôleur de groupe () contient maintenant la logique de validation et la logique de base de données.</span><span class="sxs-lookup"><span data-stu-id="09a0c-257">Notice that the Group controller Create() action now contains both validation and database logic.</span></span> <span data-ttu-id="09a0c-258">Actuellement, la base de données utilisée par le contrôleur de groupe ne se compose que d’une collection en mémoire.</span><span class="sxs-lookup"><span data-stu-id="09a0c-258">Currently, the database used by the Group controller consists of nothing more than an in-memory collection.</span></span>

## <a name="time-to-refactor"></a><span data-ttu-id="09a0c-259">Durée de refactorisation</span><span class="sxs-lookup"><span data-stu-id="09a0c-259">Time to Refactor</span></span>

<span data-ttu-id="09a0c-260">La troisième étape de la couleur rouge/vert/refactorisation est la partie refactorisation.</span><span class="sxs-lookup"><span data-stu-id="09a0c-260">The third step in Red/Green/Refactor is the Refactor part.</span></span> <span data-ttu-id="09a0c-261">À ce stade, nous devons revenir à notre code et réfléchir à la façon dont nous pouvons Refactoriser notre application pour améliorer sa conception.</span><span class="sxs-lookup"><span data-stu-id="09a0c-261">At this point, we need to step back from our code and consider how we can refactor our application to improve its design.</span></span> <span data-ttu-id="09a0c-262">L’étape de refactorisation est l’étape à laquelle nous réfléchissons à la meilleure façon d’implémenter les principes et les modèles de conception de logiciels.</span><span class="sxs-lookup"><span data-stu-id="09a0c-262">The Refactor stage is the stage at which we think hard about the best way of implementing software design principles and patterns.</span></span>

<span data-ttu-id="09a0c-263">Nous sommes libres de modifier notre code de quelque façon que ce soit pour améliorer la conception du code.</span><span class="sxs-lookup"><span data-stu-id="09a0c-263">We are free to modify our code in any way that we choose to improve the design of the code.</span></span> <span data-ttu-id="09a0c-264">Nous disposons d’un filet de sécurité pour les tests unitaires qui nous empêchent de rompre les fonctionnalités existantes.</span><span class="sxs-lookup"><span data-stu-id="09a0c-264">We have a safety net of unit tests that prevent us from breaking existing functionality.</span></span>

<span data-ttu-id="09a0c-265">Pour le moment, notre contrôleur de groupe est un bon du point de vue de la bonne conception de logiciels.</span><span class="sxs-lookup"><span data-stu-id="09a0c-265">Right now, our Group controller is a mess from the perspective of good software design.</span></span> <span data-ttu-id="09a0c-266">Le contrôleur de groupe contient un code de validation et d’accès aux données toile.</span><span class="sxs-lookup"><span data-stu-id="09a0c-266">The Group controller contains a tangled mess of validation and data access code.</span></span> <span data-ttu-id="09a0c-267">Pour éviter de violer le principe de responsabilité unique, nous devons séparer ces préoccupations en différentes classes.</span><span class="sxs-lookup"><span data-stu-id="09a0c-267">To avoid violating the Single Responsibility Principle, we need to separate these concerns into different classes.</span></span>

<span data-ttu-id="09a0c-268">Notre classe de contrôleur de groupe refactorisé est contenue dans la liste 9.</span><span class="sxs-lookup"><span data-stu-id="09a0c-268">Our refactored Group controller class is contained in Listing 9.</span></span> <span data-ttu-id="09a0c-269">Le contrôleur a été modifié pour utiliser la couche de service ContactManager.</span><span class="sxs-lookup"><span data-stu-id="09a0c-269">The controller has been modified to use the ContactManager service layer.</span></span> <span data-ttu-id="09a0c-270">Il s’agit de la même couche de service que celle utilisée avec le contrôleur de contact.</span><span class="sxs-lookup"><span data-stu-id="09a0c-270">This is the same service layer that we use with the Contact controller.</span></span>

<span data-ttu-id="09a0c-271">La liste 10 contient les nouvelles méthodes ajoutées à la couche de service ContactManager pour prendre en charge la validation, la liste et la création de groupes.</span><span class="sxs-lookup"><span data-stu-id="09a0c-271">Listing 10 contains the new methods added to the ContactManager service layer to support validating, listing, and creating groups.</span></span> <span data-ttu-id="09a0c-272">L’interface IContactManagerService a été mise à jour pour inclure les nouvelles méthodes.</span><span class="sxs-lookup"><span data-stu-id="09a0c-272">The IContactManagerService interface was updated to include the new methods.</span></span>

<span data-ttu-id="09a0c-273">La liste 11 contient une nouvelle classe FakeContactManagerRepository qui implémente l’interface IContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="09a0c-273">Listing 11 contains a new FakeContactManagerRepository class that implements the IContactManagerRepository interface.</span></span> <span data-ttu-id="09a0c-274">Contrairement à la classe EntityContactManagerRepository qui implémente également l’interface IContactManagerRepository, notre nouvelle classe FakeContactManagerRepository ne communique pas avec la base de données.</span><span class="sxs-lookup"><span data-stu-id="09a0c-274">Unlike the EntityContactManagerRepository class that also implements the IContactManagerRepository interface, our new FakeContactManagerRepository class does not communicate with the database.</span></span> <span data-ttu-id="09a0c-275">La classe FakeContactManagerRepository utilise une collection en mémoire comme un proxy pour la base de données.</span><span class="sxs-lookup"><span data-stu-id="09a0c-275">The FakeContactManagerRepository class uses an in-memory collection as a proxy for the database.</span></span> <span data-ttu-id="09a0c-276">Nous allons utiliser cette classe dans nos tests unitaires en tant que couche de référentiel factice.</span><span class="sxs-lookup"><span data-stu-id="09a0c-276">We'll use this class in our unit tests as a fake repository layer.</span></span>

<span data-ttu-id="09a0c-277">**Liste 9-Controllers\GroupController.vb**</span><span class="sxs-lookup"><span data-stu-id="09a0c-277">**Listing 9 - Controllers\GroupController.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample9.vb)]

<span data-ttu-id="09a0c-278">**Liste 10-Controllers\ContactManagerService.vb**</span><span class="sxs-lookup"><span data-stu-id="09a0c-278">**Listing 10 - Controllers\ContactManagerService.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample10.vb)]

<span data-ttu-id="09a0c-279">**Liste 11-Controllers\FakeContactManagerRepository.vb**</span><span class="sxs-lookup"><span data-stu-id="09a0c-279">**Listing 11 - Controllers\FakeContactManagerRepository.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample11.vb)]

<span data-ttu-id="09a0c-280">La modification de l’interface IContactManagerRepository nécessite l’utilisation de pour implémenter les méthodes CreateGroup () et ListGroups () dans la classe EntityContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="09a0c-280">Modifying the IContactManagerRepository interface requires use to implement the CreateGroup() and ListGroups() methods in the EntityContactManagerRepository class.</span></span> <span data-ttu-id="09a0c-281">Le laziest et le moyen le plus rapide d’y parvenir consiste à ajouter des méthodes stub qui ressemblent à ceci :</span><span class="sxs-lookup"><span data-stu-id="09a0c-281">The laziest and fastest way to do this is to add stub methods that look like this:</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample12.vb)]

<span data-ttu-id="09a0c-282">Enfin, ces modifications apportées à la conception de notre application nous obligent à apporter des modifications à nos tests unitaires.</span><span class="sxs-lookup"><span data-stu-id="09a0c-282">Finally, these changes to the design of our application require us to make some modifications to our unit tests.</span></span> <span data-ttu-id="09a0c-283">Nous devons maintenant utiliser le FakeContactManagerRepository lors de l’exécution des tests unitaires.</span><span class="sxs-lookup"><span data-stu-id="09a0c-283">We now need to use the FakeContactManagerRepository when performing the unit tests.</span></span> <span data-ttu-id="09a0c-284">La classe GroupControllerTest mise à jour est contenue dans la liste 12.</span><span class="sxs-lookup"><span data-stu-id="09a0c-284">The updated GroupControllerTest class is contained in Listing 12.</span></span>

<span data-ttu-id="09a0c-285">**Liste 12-Controllers\GroupControllerTest.vb**</span><span class="sxs-lookup"><span data-stu-id="09a0c-285">**Listing 12 - Controllers\GroupControllerTest.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample13.vb)]

<span data-ttu-id="09a0c-286">Une fois toutes ces modifications apportées, une fois encore, tous nos tests unitaires réussissent.</span><span class="sxs-lookup"><span data-stu-id="09a0c-286">After we make all of these changes, once again, all of our unit tests pass.</span></span> <span data-ttu-id="09a0c-287">Nous avons terminé la totalité du cycle du rouge/vert/refactor.</span><span class="sxs-lookup"><span data-stu-id="09a0c-287">We have completed the entire cycle of Red/Green/Refactor.</span></span> <span data-ttu-id="09a0c-288">Nous avons implémenté les deux premiers récits utilisateur.</span><span class="sxs-lookup"><span data-stu-id="09a0c-288">We have implemented the first two user stories.</span></span> <span data-ttu-id="09a0c-289">Nous avons maintenant pris en charge des tests unitaires pour les spécifications exprimées dans les récits utilisateur.</span><span class="sxs-lookup"><span data-stu-id="09a0c-289">We now have supporting unit tests for the requirements expressed in the user stories.</span></span> <span data-ttu-id="09a0c-290">L’implémentation du reste des récits utilisateur implique la répétition du même cycle de rouge/vert/refactor.</span><span class="sxs-lookup"><span data-stu-id="09a0c-290">Implementing the remainder of the user stories involves repeating the same cycle of Red/Green/Refactor.</span></span>

## <a name="modifying-our-database"></a><span data-ttu-id="09a0c-291">Modification de notre base de données</span><span class="sxs-lookup"><span data-stu-id="09a0c-291">Modifying our Database</span></span>

<span data-ttu-id="09a0c-292">Malheureusement, bien que nous ayons satisfait à toutes les exigences exprimées par nos tests unitaires, notre travail n’est pas effectué.</span><span class="sxs-lookup"><span data-stu-id="09a0c-292">Unfortunately, even though we have satisfied all of the requirements expressed by our unit tests, our work is not done.</span></span> <span data-ttu-id="09a0c-293">Nous devons toujours modifier notre base de données.</span><span class="sxs-lookup"><span data-stu-id="09a0c-293">We still need to modify our database.</span></span>

<span data-ttu-id="09a0c-294">Nous devons créer une nouvelle table de base de données de groupe.</span><span class="sxs-lookup"><span data-stu-id="09a0c-294">We need to create a new Group database table.</span></span> <span data-ttu-id="09a0c-295">Procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="09a0c-295">Follow these steps:</span></span>

1. <span data-ttu-id="09a0c-296">Dans la fenêtre Explorateur de serveurs, cliquez avec le bouton droit sur le dossier tables et sélectionnez l’option de menu **Ajouter une nouvelle table**.</span><span class="sxs-lookup"><span data-stu-id="09a0c-296">In the Server Explorer window, right-click the Tables folder and select the menu option **Add New Table**.</span></span>
2. <span data-ttu-id="09a0c-297">Entrez les deux colonnes décrites ci-dessous dans la Concepteur de tables.</span><span class="sxs-lookup"><span data-stu-id="09a0c-297">Enter the two columns described below in the Table Designer.</span></span>
3. <span data-ttu-id="09a0c-298">Marquez la colonne ID comme une clé primaire et une colonne d’identité.</span><span class="sxs-lookup"><span data-stu-id="09a0c-298">Mark the Id column as a primary key and Identity column.</span></span>
4. <span data-ttu-id="09a0c-299">Enregistrez la nouvelle table avec les groupes de noms en cliquant sur l’icône de la disquette.</span><span class="sxs-lookup"><span data-stu-id="09a0c-299">Save the new table with the name Groups by clicking the icon of the floppy.</span></span>

<a id="0.12_table01"></a>

| <span data-ttu-id="09a0c-300">**Nom de la colonne**</span><span class="sxs-lookup"><span data-stu-id="09a0c-300">**Column Name**</span></span> | <span data-ttu-id="09a0c-301">**Type de données**</span><span class="sxs-lookup"><span data-stu-id="09a0c-301">**Data Type**</span></span> | <span data-ttu-id="09a0c-302">**Null autorisé**</span><span class="sxs-lookup"><span data-stu-id="09a0c-302">**Allow Nulls**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="09a0c-303">Id</span><span class="sxs-lookup"><span data-stu-id="09a0c-303">Id</span></span> | <span data-ttu-id="09a0c-304">int</span><span class="sxs-lookup"><span data-stu-id="09a0c-304">int</span></span> | <span data-ttu-id="09a0c-305">False</span><span class="sxs-lookup"><span data-stu-id="09a0c-305">False</span></span> |
| <span data-ttu-id="09a0c-306">Nom</span><span class="sxs-lookup"><span data-stu-id="09a0c-306">Name</span></span> | <span data-ttu-id="09a0c-307">nvarchar(50)</span><span class="sxs-lookup"><span data-stu-id="09a0c-307">nvarchar(50)</span></span> | <span data-ttu-id="09a0c-308">False</span><span class="sxs-lookup"><span data-stu-id="09a0c-308">False</span></span> |

<span data-ttu-id="09a0c-309">Ensuite, nous devons supprimer toutes les données de la table contacts (dans le cas contraire, nous ne pourrons pas créer une relation entre les tables contacts et groupes).</span><span class="sxs-lookup"><span data-stu-id="09a0c-309">Next, we need to delete all of the data from the Contacts table (otherwise, we won't be able to create a relationship between the Contacts and Groups tables).</span></span> <span data-ttu-id="09a0c-310">Procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="09a0c-310">Follow these steps:</span></span>

1. <span data-ttu-id="09a0c-311">Cliquez avec le bouton droit sur la table contacts et sélectionnez l’option de menu **afficher les données**de la table.</span><span class="sxs-lookup"><span data-stu-id="09a0c-311">Right-click the Contacts table and select the menu option **Show Table Data**.</span></span>
2. <span data-ttu-id="09a0c-312">Supprimez toutes les lignes.</span><span class="sxs-lookup"><span data-stu-id="09a0c-312">Delete all of the rows.</span></span>

<span data-ttu-id="09a0c-313">Ensuite, nous devons définir une relation entre la table de base de données de groupes et la table de base de données de contacts existante.</span><span class="sxs-lookup"><span data-stu-id="09a0c-313">Next, we need to define a relationship between the Groups database table and the existing Contacts database table.</span></span> <span data-ttu-id="09a0c-314">Procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="09a0c-314">Follow these steps:</span></span>

1. <span data-ttu-id="09a0c-315">Double-cliquez sur la table contacts dans la fenêtre Explorateur de serveurs pour ouvrir le Concepteur de tables.</span><span class="sxs-lookup"><span data-stu-id="09a0c-315">Double-click the Contacts table in the Server Explorer window to open the Table Designer.</span></span>
2. <span data-ttu-id="09a0c-316">Ajoutez une nouvelle colonne d’entiers à la table contacts nommée GroupId.</span><span class="sxs-lookup"><span data-stu-id="09a0c-316">Add a new integer column to the Contacts table named GroupId.</span></span>
3. <span data-ttu-id="09a0c-317">Cliquez sur le bouton relation pour ouvrir la boîte de dialogue relations de clé étrangère (voir figure 3).</span><span class="sxs-lookup"><span data-stu-id="09a0c-317">Click the Relationship button to open the Foreign Key Relationships dialog (see Figure 3).</span></span>
4. <span data-ttu-id="09a0c-318">Cliquez sur le bouton Ajouter.</span><span class="sxs-lookup"><span data-stu-id="09a0c-318">Click the Add button.</span></span>
5. <span data-ttu-id="09a0c-319">Cliquez sur le bouton de sélection qui s’affiche en regard du bouton spécification de la table et des colonnes.</span><span class="sxs-lookup"><span data-stu-id="09a0c-319">Click the ellipsis button that appears next to the Table and Columns Specification button.</span></span>
6. <span data-ttu-id="09a0c-320">Dans la boîte de dialogue tables et colonnes, sélectionnez groupes comme table de clé primaire et ID comme colonne de clé primaire.</span><span class="sxs-lookup"><span data-stu-id="09a0c-320">In the Tables and Columns dialog, select Groups as the primary key table and Id as the primary key column.</span></span> <span data-ttu-id="09a0c-321">Sélectionnez contacts comme table de clé étrangère et GroupId comme colonne de clé étrangère (voir figure 4).</span><span class="sxs-lookup"><span data-stu-id="09a0c-321">Select Contacts as the foreign key table and GroupId as the foreign key column (see Figure 4).</span></span> <span data-ttu-id="09a0c-322">Cliquez sur le bouton OK.</span><span class="sxs-lookup"><span data-stu-id="09a0c-322">Click the OK button.</span></span>
7. <span data-ttu-id="09a0c-323">Sous **spécification d’insertion et de mise à jour**, sélectionnez la règle de valeur **cascade** pour **suppression**.</span><span class="sxs-lookup"><span data-stu-id="09a0c-323">Under **INSERT and UPDATE Specification**, select the value **Cascade** for **Delete Rule**.</span></span>
8. <span data-ttu-id="09a0c-324">Cliquez sur le bouton Fermer pour fermer la boîte de dialogue relations de clé étrangère.</span><span class="sxs-lookup"><span data-stu-id="09a0c-324">Click the Close button to close the Foreign Key Relationships dialog.</span></span>
9. <span data-ttu-id="09a0c-325">Cliquez sur le bouton enregistrer pour enregistrer les modifications apportées à la table contacts.</span><span class="sxs-lookup"><span data-stu-id="09a0c-325">Click the Save button to save the changes to the Contacts table.</span></span>

<span data-ttu-id="09a0c-326">[![de la création d’une relation de table de base de données](iteration-6-use-test-driven-development-vb/_static/image3.jpg)](iteration-6-use-test-driven-development-vb/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="09a0c-326">[![Creating a database table relationship](iteration-6-use-test-driven-development-vb/_static/image3.jpg)](iteration-6-use-test-driven-development-vb/_static/image5.png)</span></span>

<span data-ttu-id="09a0c-327">**Figure 03**: création d’une relation de table de base de données ([cliquez pour afficher l’image en taille réelle](iteration-6-use-test-driven-development-vb/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="09a0c-327">**Figure 03**: Creating a database table relationship ([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image6.png))</span></span>

<span data-ttu-id="09a0c-328">[![spécification des relations entre les tables](iteration-6-use-test-driven-development-vb/_static/image4.jpg)](iteration-6-use-test-driven-development-vb/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="09a0c-328">[![Specifying table relationships](iteration-6-use-test-driven-development-vb/_static/image4.jpg)](iteration-6-use-test-driven-development-vb/_static/image7.png)</span></span>

<span data-ttu-id="09a0c-329">**Figure 04**: spécification des relations entre[les tables (cliquez pour afficher l’image en taille réelle](iteration-6-use-test-driven-development-vb/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="09a0c-329">**Figure 04**: Specifying table relationships([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image8.png))</span></span>

### <a name="updating-our-data-model"></a><span data-ttu-id="09a0c-330">Mise à jour de notre modèle de données</span><span class="sxs-lookup"><span data-stu-id="09a0c-330">Updating our Data Model</span></span>

<span data-ttu-id="09a0c-331">Ensuite, nous devons mettre à jour notre modèle de données pour représenter la nouvelle table de base de données.</span><span class="sxs-lookup"><span data-stu-id="09a0c-331">Next, we need to update our data model to represent the new database table.</span></span> <span data-ttu-id="09a0c-332">Procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="09a0c-332">Follow these steps:</span></span>

1. <span data-ttu-id="09a0c-333">Double-cliquez sur le fichier ContactManagerModel. edmx dans le dossier Models pour ouvrir le Entity Designer.</span><span class="sxs-lookup"><span data-stu-id="09a0c-333">Double-click the ContactManagerModel.edmx file in the Models folder to open the Entity Designer.</span></span>
2. <span data-ttu-id="09a0c-334">Cliquez avec le bouton droit sur l’aire du concepteur et sélectionnez l’option de menu **mettre à jour le modèle à partir de la base de données**.</span><span class="sxs-lookup"><span data-stu-id="09a0c-334">Right-click the Designer surface and select the menu option **Update Model from Database**.</span></span>
3. <span data-ttu-id="09a0c-335">Dans l’Assistant Mise à jour, sélectionnez le tableau groupes, puis cliquez sur le bouton Terminer (voir figure 5).</span><span class="sxs-lookup"><span data-stu-id="09a0c-335">In the Update Wizard, select the Groups table and click the Finish button (see Figure 5).</span></span>
4. <span data-ttu-id="09a0c-336">Cliquez avec le bouton droit sur l’entité groupes, puis sélectionnez l’option de menu **Renommer**.</span><span class="sxs-lookup"><span data-stu-id="09a0c-336">Right-click the Groups entity and select the menu option **Rename**.</span></span> <span data-ttu-id="09a0c-337">Modifiez le nom de l’entité *groupes* en *groupe* (singulier).</span><span class="sxs-lookup"><span data-stu-id="09a0c-337">Change the name of the *Groups* entity to *Group* (singular).</span></span>
5. <span data-ttu-id="09a0c-338">Cliquez avec le bouton droit sur la propriété de navigation groupes qui apparaît en bas de l’entité contact.</span><span class="sxs-lookup"><span data-stu-id="09a0c-338">Right-click the Groups navigation property that appears at the bottom of the Contact entity.</span></span> <span data-ttu-id="09a0c-339">Remplacez le nom de la propriété *de navigation* Groups par *Group* (singulier).</span><span class="sxs-lookup"><span data-stu-id="09a0c-339">Change the name of the *Groups* navigation property to *Group* (singular).</span></span>

<span data-ttu-id="09a0c-340">[![de la mise à jour d’un modèle de Entity Framework à partir de la base de données](iteration-6-use-test-driven-development-vb/_static/image5.jpg)](iteration-6-use-test-driven-development-vb/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="09a0c-340">[![Updating an Entity Framework model from the database](iteration-6-use-test-driven-development-vb/_static/image5.jpg)](iteration-6-use-test-driven-development-vb/_static/image9.png)</span></span>

<span data-ttu-id="09a0c-341">**Figure 05**: mise à jour d’un modèle de Entity Framework à partir de la base de données ([cliquez pour afficher l’image en taille réelle](iteration-6-use-test-driven-development-vb/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="09a0c-341">**Figure 05**: Updating an Entity Framework model from the database([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image10.png))</span></span>

<span data-ttu-id="09a0c-342">Une fois ces étapes effectuées, votre modèle de données représente à la fois les tables contacts et groupes.</span><span class="sxs-lookup"><span data-stu-id="09a0c-342">After you complete these steps, your data model will represent both the Contacts and Groups tables.</span></span> <span data-ttu-id="09a0c-343">Le Entity Designer doit afficher les deux entités (voir figure 6).</span><span class="sxs-lookup"><span data-stu-id="09a0c-343">The Entity Designer should show both entities (see Figure 6).</span></span>

<span data-ttu-id="09a0c-344">[![Entity Designer affichage du groupe et du contact](iteration-6-use-test-driven-development-vb/_static/image6.jpg)](iteration-6-use-test-driven-development-vb/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="09a0c-344">[![Entity Designer displaying Group and Contact](iteration-6-use-test-driven-development-vb/_static/image6.jpg)](iteration-6-use-test-driven-development-vb/_static/image11.png)</span></span>

<span data-ttu-id="09a0c-345">**Figure 06**: Entity designer affichage du groupe et du contact ([cliquez pour afficher l’image en taille réelle](iteration-6-use-test-driven-development-vb/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="09a0c-345">**Figure 06**: Entity Designer displaying Group and Contact([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image12.png))</span></span>

### <a name="creating-our-repository-classes"></a><span data-ttu-id="09a0c-346">Création de nos classes de référentiel</span><span class="sxs-lookup"><span data-stu-id="09a0c-346">Creating our Repository Classes</span></span>

<span data-ttu-id="09a0c-347">Nous devons ensuite implémenter notre classe de référentiel.</span><span class="sxs-lookup"><span data-stu-id="09a0c-347">Next, we need to implement our repository class.</span></span> <span data-ttu-id="09a0c-348">Au cours de cette itération, nous avons ajouté plusieurs nouvelles méthodes à l’interface IContactManagerRepository tout en écrivant du code pour satisfaire nos tests unitaires.</span><span class="sxs-lookup"><span data-stu-id="09a0c-348">Over the course of this iteration, we added several new methods to the IContactManagerRepository interface while writing code to satisfy our unit tests.</span></span> <span data-ttu-id="09a0c-349">La version finale de l’interface IContactManagerRepository est contenue dans la liste 14.</span><span class="sxs-lookup"><span data-stu-id="09a0c-349">The final version of the IContactManagerRepository interface is contained in Listing 14.</span></span>

<span data-ttu-id="09a0c-350">**Liste 14-Models\IContactManagerRepository.vb**</span><span class="sxs-lookup"><span data-stu-id="09a0c-350">**Listing 14 - Models\IContactManagerRepository.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample14.vb)]

<span data-ttu-id="09a0c-351">Nous n’avons pas implémenté les méthodes associées à l’utilisation des groupes de contacts dans notre véritable classe EntityContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="09a0c-351">We haven't actually implemented any of the methods related to working with contact groups in our real EntityContactManagerRepository class.</span></span> <span data-ttu-id="09a0c-352">Actuellement, la classe EntityContactManagerRepository a des méthodes stub pour chacune des méthodes de groupe de contacts listées dans l’interface IContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="09a0c-352">Currently, the EntityContactManagerRepository class has stub methods for each of the contact group methods listed in the IContactManagerRepository interface.</span></span> <span data-ttu-id="09a0c-353">Par exemple, la méthode ListGroups () se présente comme suit :</span><span class="sxs-lookup"><span data-stu-id="09a0c-353">For example, the ListGroups() method currently looks like this:</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample15.vb)]

<span data-ttu-id="09a0c-354">Les méthodes stub nous permettaient de compiler notre application et de passer les tests unitaires.</span><span class="sxs-lookup"><span data-stu-id="09a0c-354">The stub methods enabled us to compile our application and pass the unit tests.</span></span> <span data-ttu-id="09a0c-355">Toutefois, il est maintenant temps d’implémenter ces méthodes.</span><span class="sxs-lookup"><span data-stu-id="09a0c-355">However, now it is time to actually implement these methods.</span></span> <span data-ttu-id="09a0c-356">La version finale de la classe EntityContactManagerRepository est contenue dans la liste 13.</span><span class="sxs-lookup"><span data-stu-id="09a0c-356">The final version of the EntityContactManagerRepository class is contained in Listing 13.</span></span>

<span data-ttu-id="09a0c-357">**Liste 13-Models\EntityContactManagerRepository.vb**</span><span class="sxs-lookup"><span data-stu-id="09a0c-357">**Listing 13 - Models\EntityContactManagerRepository.vb**</span></span>

[!code-vb[Main](iteration-6-use-test-driven-development-vb/samples/sample16.vb)]

### <a name="creating-the-views"></a><span data-ttu-id="09a0c-358">Création des vues</span><span class="sxs-lookup"><span data-stu-id="09a0c-358">Creating the Views</span></span>

<span data-ttu-id="09a0c-359">Application ASP.NET MVC lorsque vous utilisez le moteur d’affichage ASP.NET par défaut.</span><span class="sxs-lookup"><span data-stu-id="09a0c-359">ASP.NET MVC application when you use the default ASP.NET view engine.</span></span> <span data-ttu-id="09a0c-360">Par conséquent, vous ne créez pas d’affichages en réponse à un test unitaire particulier.</span><span class="sxs-lookup"><span data-stu-id="09a0c-360">So, you don t create views in response to a particular unit test.</span></span> <span data-ttu-id="09a0c-361">Toutefois, étant donné qu’une application serait inutile sans affichages, nous pouvons effectuer cette itération sans créer ni modifier les vues contenues dans l’application du gestionnaire de contacts.</span><span class="sxs-lookup"><span data-stu-id="09a0c-361">However, because an application would be useless without views, we can t complete this iteration without creating and modifying the views contained in the Contact Manager application.</span></span>

<span data-ttu-id="09a0c-362">Nous devons créer les nouvelles vues suivantes pour la gestion des groupes de contacts (voir la figure 7) :</span><span class="sxs-lookup"><span data-stu-id="09a0c-362">We need to create the following new views for managing contact groups (see Figure 7):</span></span>

- <span data-ttu-id="09a0c-363">Views\Group\Index.aspx-affiche la liste des groupes de contacts</span><span class="sxs-lookup"><span data-stu-id="09a0c-363">Views\Group\Index.aspx - Displays list of contact groups</span></span>
- <span data-ttu-id="09a0c-364">Views\Group\Delete.aspx : affiche le formulaire de confirmation pour la suppression d’un groupe de contacts</span><span class="sxs-lookup"><span data-stu-id="09a0c-364">Views\Group\Delete.aspx - Displays confirmation form for deleting a contact group</span></span>

<span data-ttu-id="09a0c-365">[![la vue index du groupe](iteration-6-use-test-driven-development-vb/_static/image7.jpg)](iteration-6-use-test-driven-development-vb/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="09a0c-365">[![The Group Index view](iteration-6-use-test-driven-development-vb/_static/image7.jpg)](iteration-6-use-test-driven-development-vb/_static/image13.png)</span></span>

<span data-ttu-id="09a0c-366">**Figure 07**: vue d’index de groupe ([cliquez pour afficher l’image en taille réelle](iteration-6-use-test-driven-development-vb/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="09a0c-366">**Figure 07**: The Group Index view([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image14.png))</span></span>

<span data-ttu-id="09a0c-367">Nous devons modifier les vues existantes suivantes pour qu’elles incluent les groupes de contacts :</span><span class="sxs-lookup"><span data-stu-id="09a0c-367">We need to modify the following existing views so that they include contact groups:</span></span>

- <span data-ttu-id="09a0c-368">Views\Home\Create.aspx</span><span class="sxs-lookup"><span data-stu-id="09a0c-368">Views\Home\Create.aspx</span></span>
- <span data-ttu-id="09a0c-369">Views\Home\Edit.aspx</span><span class="sxs-lookup"><span data-stu-id="09a0c-369">Views\Home\Edit.aspx</span></span>
- <span data-ttu-id="09a0c-370">Views\Home\Index.aspx</span><span class="sxs-lookup"><span data-stu-id="09a0c-370">Views\Home\Index.aspx</span></span>

<span data-ttu-id="09a0c-371">Vous pouvez voir les affichages modifiés en examinant l’application Visual Studio qui accompagne ce didacticiel.</span><span class="sxs-lookup"><span data-stu-id="09a0c-371">You can see the modified views by looking at the Visual Studio application that accompanies this tutorial.</span></span> <span data-ttu-id="09a0c-372">Par exemple, la figure 8 illustre la vue d’index de contact.</span><span class="sxs-lookup"><span data-stu-id="09a0c-372">For example, Figure 8 illustrates the Contact Index view.</span></span>

<span data-ttu-id="09a0c-373">[![la vue de l’index des contacts](iteration-6-use-test-driven-development-vb/_static/image8.jpg)](iteration-6-use-test-driven-development-vb/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="09a0c-373">[![The Contact Index view](iteration-6-use-test-driven-development-vb/_static/image8.jpg)](iteration-6-use-test-driven-development-vb/_static/image15.png)</span></span>

<span data-ttu-id="09a0c-374">**Figure 08**: vue de l’index des contacts ([cliquez pour afficher l’image en taille réelle](iteration-6-use-test-driven-development-vb/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="09a0c-374">**Figure 08**: The Contact Index view([Click to view full-size image](iteration-6-use-test-driven-development-vb/_static/image16.png))</span></span>

## <a name="summary"></a><span data-ttu-id="09a0c-375">Récapitulatif</span><span class="sxs-lookup"><span data-stu-id="09a0c-375">Summary</span></span>

<span data-ttu-id="09a0c-376">Dans cette itération, nous avons ajouté de nouvelles fonctionnalités à notre application de gestion des contacts en suivant une méthodologie de conception d’application de développement piloté par des tests.</span><span class="sxs-lookup"><span data-stu-id="09a0c-376">In this iteration, we added new functionality to our Contact Manager application by following a test-driven development application design methodology.</span></span> <span data-ttu-id="09a0c-377">Nous avons commencé par créer un ensemble de récits utilisateur.</span><span class="sxs-lookup"><span data-stu-id="09a0c-377">We started by creating a set of user stories.</span></span> <span data-ttu-id="09a0c-378">Nous avons créé un ensemble de tests unitaires qui correspond aux spécifications exprimées par les récits utilisateur.</span><span class="sxs-lookup"><span data-stu-id="09a0c-378">We created a set of unit tests that corresponds to the requirements expressed by the user stories.</span></span> <span data-ttu-id="09a0c-379">Enfin, nous avons écrit juste suffisamment de code pour répondre aux exigences exprimées par les tests unitaires.</span><span class="sxs-lookup"><span data-stu-id="09a0c-379">Finally, we wrote just enough code to satisfy the requirements expressed by the unit tests.</span></span>

<span data-ttu-id="09a0c-380">Après avoir écrit suffisamment de code pour répondre aux exigences exprimées par les tests unitaires, nous avons mis à jour notre base de données et les vues.</span><span class="sxs-lookup"><span data-stu-id="09a0c-380">After we finished writing enough code to satisfy the requirements expressed by the unit tests, we updated our database and views.</span></span> <span data-ttu-id="09a0c-381">Nous avons ajouté une nouvelle table Groups à notre base de données et mis à jour notre modèle de données Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="09a0c-381">We added a new Groups table to our database and updated our Entity Framework Data Model.</span></span> <span data-ttu-id="09a0c-382">Nous avons également créé et modifié un ensemble de vues.</span><span class="sxs-lookup"><span data-stu-id="09a0c-382">We also created and modified a set of views.</span></span>

<span data-ttu-id="09a0c-383">Dans l’itération suivante (dernière itération), nous réécrivons notre application pour tirer parti d’Ajax.</span><span class="sxs-lookup"><span data-stu-id="09a0c-383">In the next iteration -- the final iteration -- we rewrite our application to take advantage of Ajax.</span></span> <span data-ttu-id="09a0c-384">En tirant parti d’Ajax, nous allons améliorer la réactivité et les performances de l’application du gestionnaire de contacts.</span><span class="sxs-lookup"><span data-stu-id="09a0c-384">By taking advantage of Ajax, we'll improve the responsiveness and performance of the Contact Manager application.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="09a0c-385">[Précédent](iteration-5-create-unit-tests-vb.md)
> [Suivant](iteration-7-add-ajax-functionality-vb.md)</span><span class="sxs-lookup"><span data-stu-id="09a0c-385">[Previous](iteration-5-create-unit-tests-vb.md)
[Next](iteration-7-add-ajax-functionality-vb.md)</span></span>

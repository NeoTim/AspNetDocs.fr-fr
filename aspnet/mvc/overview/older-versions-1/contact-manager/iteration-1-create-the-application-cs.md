---
uid: mvc/overview/older-versions-1/contact-manager/iteration-1-create-the-application-cs
title: '#1 d’itération : créer l’applicationC#() | Microsoft Docs'
author: microsoft
description: 'Dans la première itération, nous créons le gestionnaire de contacts de la manière la plus simple possible. Nous ajoutons la prise en charge des opérations de base de données de base : créer, lire, mettre à jour et D...'
ms.author: riande
ms.date: 02/20/2009
ms.assetid: db0f160b-901c-46d3-865e-7ab6cd4ed68d
msc.legacyurl: /mvc/overview/older-versions-1/contact-manager/iteration-1-create-the-application-cs
msc.type: authoredcontent
ms.openlocfilehash: d3a940308f21a4f87bf80249bd465e8812794f68
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78582130"
---
# <a name="iteration-1--create-the-application-c"></a><span data-ttu-id="86b7e-104">#1 d’itération : créer l’applicationC#()</span><span class="sxs-lookup"><span data-stu-id="86b7e-104">Iteration #1 – Create the Application (C#)</span></span>

<span data-ttu-id="86b7e-105">par [Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="86b7e-105">by [Microsoft](https://github.com/microsoft)</span></span>

[<span data-ttu-id="86b7e-106">Télécharger le code</span><span class="sxs-lookup"><span data-stu-id="86b7e-106">Download Code</span></span>](iteration-1-create-the-application-cs/_static/contactmanager_1_cs1.zip)

> <span data-ttu-id="86b7e-107">Dans la première itération, nous créons le gestionnaire de contacts de la manière la plus simple possible.</span><span class="sxs-lookup"><span data-stu-id="86b7e-107">In the first iteration, we create the Contact Manager in the simplest way possible.</span></span> <span data-ttu-id="86b7e-108">Nous ajoutons la prise en charge des opérations de base de données de base : créer, lire, mettre à jour et supprimer (CRUD).</span><span class="sxs-lookup"><span data-stu-id="86b7e-108">We add support for basic database operations: Create, Read, Update, and Delete (CRUD).</span></span>

## <a name="building-a-contact-management-aspnet-mvc-application-vb"></a><span data-ttu-id="86b7e-109">Création d’une application MVC ASP.NET de gestion des contacts (VB)</span><span class="sxs-lookup"><span data-stu-id="86b7e-109">Building a Contact Management ASP.NET MVC Application (VB)</span></span>

<span data-ttu-id="86b7e-110">Dans cette série de didacticiels, nous créons une application de gestion de contacts entière du début à la fin.</span><span class="sxs-lookup"><span data-stu-id="86b7e-110">In this series of tutorials, we build an entire Contact Management application from start to finish.</span></span> <span data-ttu-id="86b7e-111">L’application Gestionnaire de contacts vous permet de stocker les informations de contact, les noms de téléphone et les adresses de messagerie, pour obtenir la liste des personnes.</span><span class="sxs-lookup"><span data-stu-id="86b7e-111">The Contact Manager application enables you to store contact information - names, phone numbers and email addresses - for a list of people.</span></span>

<span data-ttu-id="86b7e-112">Nous générons l’application sur plusieurs itérations.</span><span class="sxs-lookup"><span data-stu-id="86b7e-112">We build the application over multiple iterations.</span></span> <span data-ttu-id="86b7e-113">À chaque itération, nous améliorons progressivement l’application.</span><span class="sxs-lookup"><span data-stu-id="86b7e-113">With each iteration, we gradually improve the application.</span></span> <span data-ttu-id="86b7e-114">L’objectif de cette approche à plusieurs itérations est de vous permettre de comprendre la raison de chaque modification.</span><span class="sxs-lookup"><span data-stu-id="86b7e-114">The goal of this multiple iteration approach is to enable you to understand the reason for each change.</span></span>

- <span data-ttu-id="86b7e-115">#1 d’itération : créez l’application.</span><span class="sxs-lookup"><span data-stu-id="86b7e-115">Iteration #1 - Create the application.</span></span> <span data-ttu-id="86b7e-116">Dans la première itération, nous créons le gestionnaire de contacts de la manière la plus simple possible.</span><span class="sxs-lookup"><span data-stu-id="86b7e-116">In the first iteration, we create the Contact Manager in the simplest way possible.</span></span> <span data-ttu-id="86b7e-117">Nous ajoutons la prise en charge des opérations de base de données de base : créer, lire, mettre à jour et supprimer (CRUD).</span><span class="sxs-lookup"><span data-stu-id="86b7e-117">We add support for basic database operations: Create, Read, Update, and Delete (CRUD).</span></span>

- <span data-ttu-id="86b7e-118">Itération #2 : rendez l’application agréable.</span><span class="sxs-lookup"><span data-stu-id="86b7e-118">Iteration #2 - Make the application look nice.</span></span> <span data-ttu-id="86b7e-119">Dans cette itération, nous améliorons l’apparence de l’application en modifiant la page maître par défaut de la vue MVC ASP.NET et la feuille de style en cascade.</span><span class="sxs-lookup"><span data-stu-id="86b7e-119">In this iteration, we improve the appearance of the application by modifying the default ASP.NET MVC view master page and cascading style sheet.</span></span>

- <span data-ttu-id="86b7e-120">Itération #3 : ajouter une validation de formulaire.</span><span class="sxs-lookup"><span data-stu-id="86b7e-120">Iteration #3 - Add form validation.</span></span> <span data-ttu-id="86b7e-121">Dans la troisième itération, nous ajoutons la validation de base du formulaire.</span><span class="sxs-lookup"><span data-stu-id="86b7e-121">In the third iteration, we add basic form validation.</span></span> <span data-ttu-id="86b7e-122">Nous empêchons les utilisateurs de soumettre un formulaire sans remplir les champs de formulaire requis.</span><span class="sxs-lookup"><span data-stu-id="86b7e-122">We prevent people from submitting a form without completing required form fields.</span></span> <span data-ttu-id="86b7e-123">Nous validons également les adresses de messagerie et les numéros de téléphone.</span><span class="sxs-lookup"><span data-stu-id="86b7e-123">We also validate email addresses and phone numbers.</span></span>

- <span data-ttu-id="86b7e-124">Itération #4 : rendez l’application faiblement couplée.</span><span class="sxs-lookup"><span data-stu-id="86b7e-124">Iteration #4 - Make the application loosely coupled.</span></span> <span data-ttu-id="86b7e-125">Dans cette quatrième itération, nous tirant parti de plusieurs modèles de conception de logiciels pour faciliter la gestion et la modification de l’application de gestionnaire de contacts.</span><span class="sxs-lookup"><span data-stu-id="86b7e-125">In this fourth iteration, we take advantage of several software design patterns to make it easier to maintain and modify the Contact Manager application.</span></span> <span data-ttu-id="86b7e-126">Par exemple, nous refactorisons notre application pour utiliser le modèle de référentiel et le modèle d’injection de dépendances.</span><span class="sxs-lookup"><span data-stu-id="86b7e-126">For example, we refactor our application to use the Repository pattern and the Dependency Injection pattern.</span></span>

- <span data-ttu-id="86b7e-127">#5 d’itération-créer des tests unitaires.</span><span class="sxs-lookup"><span data-stu-id="86b7e-127">Iteration #5 - Create unit tests.</span></span> <span data-ttu-id="86b7e-128">Dans la cinquième itération, nous rendons notre application plus facile à gérer et à modifier en ajoutant des tests unitaires.</span><span class="sxs-lookup"><span data-stu-id="86b7e-128">In the fifth iteration, we make our application easier to maintain and modify by adding unit tests.</span></span> <span data-ttu-id="86b7e-129">Nous imitons nos classes de modèle de données et créons des tests unitaires pour nos contrôleurs et la logique de validation.</span><span class="sxs-lookup"><span data-stu-id="86b7e-129">We mock our data model classes and build unit tests for our controllers and validation logic.</span></span>

- <span data-ttu-id="86b7e-130">Itération #6-Utilisez le développement piloté par les tests.</span><span class="sxs-lookup"><span data-stu-id="86b7e-130">Iteration #6 - Use test-driven development.</span></span> <span data-ttu-id="86b7e-131">Dans cette sixième itération, nous ajoutons de nouvelles fonctionnalités à notre application en écrivant d’abord des tests unitaires et en écrivant du code sur les tests unitaires.</span><span class="sxs-lookup"><span data-stu-id="86b7e-131">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="86b7e-132">Dans cette itération, nous ajoutons des groupes de contacts.</span><span class="sxs-lookup"><span data-stu-id="86b7e-132">In this iteration, we add contact groups.</span></span>

- <span data-ttu-id="86b7e-133">#7 d’itération-ajoutez des fonctionnalités AJAX.</span><span class="sxs-lookup"><span data-stu-id="86b7e-133">Iteration #7 - Add Ajax functionality.</span></span> <span data-ttu-id="86b7e-134">Dans la septième itération, nous améliorons la réactivité et les performances de notre application en ajoutant la prise en charge d’Ajax.</span><span class="sxs-lookup"><span data-stu-id="86b7e-134">In the seventh iteration, we improve the responsiveness and performance of our application by adding support for Ajax.</span></span>

## <a name="this-iteration"></a><span data-ttu-id="86b7e-135">Cette itération</span><span class="sxs-lookup"><span data-stu-id="86b7e-135">This Iteration</span></span>

<span data-ttu-id="86b7e-136">Dans cette première itération, nous générons l’application de base.</span><span class="sxs-lookup"><span data-stu-id="86b7e-136">In this first iteration, we build the basic application.</span></span> <span data-ttu-id="86b7e-137">L’objectif est de créer le gestionnaire de contacts de la manière la plus rapide et la plus simple possible.</span><span class="sxs-lookup"><span data-stu-id="86b7e-137">The goal is to build the Contact Manager in the fastest and simplest way possible.</span></span> <span data-ttu-id="86b7e-138">Dans les itérations ultérieures, nous améliorons la conception de l’application.</span><span class="sxs-lookup"><span data-stu-id="86b7e-138">In later iterations, we improve the design of the application.</span></span>

<span data-ttu-id="86b7e-139">L’application du gestionnaire de contacts est une application de base basée sur des bases de données.</span><span class="sxs-lookup"><span data-stu-id="86b7e-139">The Contact Manager application is a basic database-driven application.</span></span> <span data-ttu-id="86b7e-140">Vous pouvez utiliser l’application pour créer des contacts, modifier des contacts existants et supprimer des contacts.</span><span class="sxs-lookup"><span data-stu-id="86b7e-140">You can use the application to create new contacts, edit existing contacts, and delete contacts.</span></span>

<span data-ttu-id="86b7e-141">Dans cette itération, nous allons effectuer les étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="86b7e-141">In this iteration, we complete the following steps:</span></span>

1. <span data-ttu-id="86b7e-142">Application ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="86b7e-142">ASP.NET MVC application</span></span>
2. <span data-ttu-id="86b7e-143">Créer une base de données pour stocker nos contacts</span><span class="sxs-lookup"><span data-stu-id="86b7e-143">Create a database to store our contacts</span></span>
3. <span data-ttu-id="86b7e-144">Générer une classe de modèle pour notre base de données avec le Entity Framework Microsoft</span><span class="sxs-lookup"><span data-stu-id="86b7e-144">Generate a model class for our database with the Microsoft Entity Framework</span></span>
4. <span data-ttu-id="86b7e-145">Créer une action de contrôleur et une vue qui nous permet de répertorier tous les contacts de la base de données</span><span class="sxs-lookup"><span data-stu-id="86b7e-145">Create a controller action and view that enables us to list all of the contacts in the database</span></span>
5. <span data-ttu-id="86b7e-146">Créer des actions de contrôleur et une vue qui nous permet de créer un contact dans la base de données</span><span class="sxs-lookup"><span data-stu-id="86b7e-146">Create controller actions and a view that enables us to create a new contact in the database</span></span>
6. <span data-ttu-id="86b7e-147">Créer des actions de contrôleur et une vue qui nous permet de modifier un contact existant dans la base de données</span><span class="sxs-lookup"><span data-stu-id="86b7e-147">Create controller actions and a view that enables us to edit an existing contact in the database</span></span>
7. <span data-ttu-id="86b7e-148">Créer des actions de contrôleur et une vue qui nous permet de supprimer un contact existant dans la base de données</span><span class="sxs-lookup"><span data-stu-id="86b7e-148">Create controller actions and a view that enables us to delete an existing contact in the database</span></span>

## <a name="software-prerequisites"></a><span data-ttu-id="86b7e-149">Composants logiciels requis</span><span class="sxs-lookup"><span data-stu-id="86b7e-149">Software Prerequisites</span></span>

<span data-ttu-id="86b7e-150">Dans les applications ASP.NET MVC, Visual Studio 2008 ou Visual Web Developer 2008 doit être installé sur votre ordinateur (Visual Web Developer est une version gratuite de Visual Studio qui n’inclut pas toutes les fonctionnalités avancées de Visual Studio).</span><span class="sxs-lookup"><span data-stu-id="86b7e-150">In ASP.NET MVC applications, you must have either Visual Studio 2008 or Visual Web Developer 2008 installed on your computer (Visual Web Developer is a free version of Visual Studio that does not include all of the advanced features of Visual Studio).</span></span> <span data-ttu-id="86b7e-151">Vous pouvez télécharger la version d’évaluation de Visual Studio 2008 ou Visual Web Developer à partir de l’adresse suivante :</span><span class="sxs-lookup"><span data-stu-id="86b7e-151">You can download either the trial version of Visual Studio 2008 or Visual Web Developer from the following address:</span></span>

[https://www.asp.net/downloads/essential/](https://www.asp.net/downloads/essential)

> [!NOTE] 
> 
> <span data-ttu-id="86b7e-152">Pour les applications ASP.NET MVC avec Visual Web Developer, vous devez avoir installé Visual Web Developer Service Pack 1.</span><span class="sxs-lookup"><span data-stu-id="86b7e-152">For ASP.NET MVC applications with Visual Web Developer, you must have Visual Web Developer Service Pack 1 installed.</span></span> <span data-ttu-id="86b7e-153">Sans Service Pack 1, vous ne pouvez pas créer de projets d’application Web.</span><span class="sxs-lookup"><span data-stu-id="86b7e-153">Without Service Pack 1, you cannot create Web Application Projects.</span></span>

<span data-ttu-id="86b7e-154">Framework MVC ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="86b7e-154">ASP.NET MVC framework.</span></span> <span data-ttu-id="86b7e-155">Vous pouvez télécharger l’infrastructure MVC ASP.NET à partir de l’adresse suivante :</span><span class="sxs-lookup"><span data-stu-id="86b7e-155">You can download the ASP.NET MVC framework from the following address:</span></span>

[https://www.asp.net/mvc](../../../index.md)

<span data-ttu-id="86b7e-156">Dans ce didacticiel, nous utilisons le Entity Framework Microsoft pour accéder à une base de données.</span><span class="sxs-lookup"><span data-stu-id="86b7e-156">In this tutorial, we use the Microsoft Entity Framework to access a database.</span></span> <span data-ttu-id="86b7e-157">Le Entity Framework est inclus avec .NET Framework 3,5 Service Pack 1.</span><span class="sxs-lookup"><span data-stu-id="86b7e-157">The Entity Framework is included with .NET Framework 3.5 Service Pack 1.</span></span> <span data-ttu-id="86b7e-158">Vous pouvez télécharger cette Service Pack à partir de l’emplacement suivant :</span><span class="sxs-lookup"><span data-stu-id="86b7e-158">You can download this service pack from the following location:</span></span>

[<span data-ttu-id="86b7e-159">https://www.microsoft.com/downloads/details.aspx?familyid=ab99342f-5d1a-413d-8319-81da479ab0d7&amp;d isplaylang = en</span><span class="sxs-lookup"><span data-stu-id="86b7e-159">https://www.microsoft.com/downloads/details.aspx?familyid=ab99342f-5d1a-413d-8319-81da479ab0d7&amp;displaylang=en</span></span>](https://www.microsoft.com/downloads/details.aspx?familyid=ab99342f-5d1a-413d-8319-81da479ab0d7&amp;displaylang=en)

<span data-ttu-id="86b7e-160">En guise d’alternative à l’exécution de chacun de ces téléchargements, vous pouvez tirer parti du Web Platform Installer (Web PI).</span><span class="sxs-lookup"><span data-stu-id="86b7e-160">As an alternative to performing each of these downloads one by one, you can take advantage of the Web Platform Installer (Web PI).</span></span> <span data-ttu-id="86b7e-161">Vous pouvez télécharger le Web PI à partir de l’adresse suivante :</span><span class="sxs-lookup"><span data-stu-id="86b7e-161">You can download the Web PI from the following address:</span></span>

[https://www.asp.net/downloads/essential/](https://www.asp.net/downloads/essential)

## <a name="aspnet-mvc-project"></a><span data-ttu-id="86b7e-162">Projet MVC ASP.NET</span><span class="sxs-lookup"><span data-stu-id="86b7e-162">ASP.NET MVC Project</span></span>

<span data-ttu-id="86b7e-163">Projet d’application Web MVC ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="86b7e-163">ASP.NET MVC Web Application Project.</span></span> <span data-ttu-id="86b7e-164">Lancez Visual Studio et sélectionnez l’option de menu **fichier, nouveau projet**.</span><span class="sxs-lookup"><span data-stu-id="86b7e-164">Launch Visual Studio and select the menu option **File, New Project**.</span></span> <span data-ttu-id="86b7e-165">La boîte de dialogue **nouveau projet** s’affiche (voir figure 1).</span><span class="sxs-lookup"><span data-stu-id="86b7e-165">The **New Project** dialog appears (see Figure 1).</span></span> <span data-ttu-id="86b7e-166">Sélectionnez le type de projet **Web** et le modèle d' **Application Web MVC ASP.net** .</span><span class="sxs-lookup"><span data-stu-id="86b7e-166">Select the **Web** project type and the **ASP.NET MVC Web Application** template.</span></span> <span data-ttu-id="86b7e-167">Nommez votre nouveau projet *ContactManager* et cliquez sur le bouton OK.</span><span class="sxs-lookup"><span data-stu-id="86b7e-167">Name your new project *ContactManager* and click the OK button.</span></span>

<span data-ttu-id="86b7e-168">Assurez-vous que .NET Framework 3,5 est sélectionné dans la liste déroulante en haut à droite de la boîte de dialogue **nouveau projet** .</span><span class="sxs-lookup"><span data-stu-id="86b7e-168">Make sure that you have .NET Framework 3.5 selected from the dropdown list at the top right of the **New Project** dialog.</span></span> <span data-ttu-id="86b7e-169">Dans le cas contraire, le modèle d’application Web MVC ASP.NET ne s’affiche pas.</span><span class="sxs-lookup"><span data-stu-id="86b7e-169">Otherwise, the ASP.NET MVC Web Application template won't appear.</span></span>

<span data-ttu-id="86b7e-170">[![la boîte de dialogue Nouveau projet](iteration-1-create-the-application-cs/_static/image1.jpg)](iteration-1-create-the-application-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="86b7e-170">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image1.jpg)](iteration-1-create-the-application-cs/_static/image1.png)</span></span>

<span data-ttu-id="86b7e-171">**Figure 01**: boîte de dialogue Nouveau projet ([cliquez pour afficher l’image en taille réelle](iteration-1-create-the-application-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="86b7e-171">**Figure 01**: The New Project dialog([Click to view full-size image](iteration-1-create-the-application-cs/_static/image2.png))</span></span>

<span data-ttu-id="86b7e-172">Application ASP.NET MVC, la boîte de dialogue **créer un projet de test unitaire** s’affiche.</span><span class="sxs-lookup"><span data-stu-id="86b7e-172">ASP.NET MVC application, the **Create Unit Test Project** dialog appears.</span></span> <span data-ttu-id="86b7e-173">Vous pouvez utiliser cette boîte de dialogue pour indiquer que vous souhaitez créer et ajouter un projet de test unitaire à votre solution lorsque vous créez votre application ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="86b7e-173">You can use this dialog to indicate that you want to create and add a unit test project to your solution when you create your ASP.NET MVC application.</span></span> <span data-ttu-id="86b7e-174">Bien que nous ne générions pas de tests unitaires dans cette itération, vous devez sélectionner l’option **Oui, créer un projet de test unitaire** , car nous prévoyons d’ajouter des tests unitaires dans une itération ultérieure.</span><span class="sxs-lookup"><span data-stu-id="86b7e-174">Although we won't be building unit tests in this iteration, you should select the option **Yes, create a unit test project** because we plan to add unit tests in a later iteration.</span></span> <span data-ttu-id="86b7e-175">L’ajout d’un projet de test lorsque vous créez pour la première fois un projet MVC ASP.NET est beaucoup plus facile que l’ajout d’un projet de test après la création du projet MVC ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="86b7e-175">Adding a Test project when you first create a new ASP.NET MVC project is much easier than adding a Test project after the ASP.NET MVC project has been created.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="86b7e-176">Étant donné que Visual Web Developer ne prend pas en charge les projets de test, vous ne recevez pas la boîte de dialogue créer un projet de test unitaire lors de l’utilisation de Visual Web Developer.</span><span class="sxs-lookup"><span data-stu-id="86b7e-176">Because Visual Web Developer does not support Test projects, you do not get the Create Unit Test Project dialog when using Visual Web Developer.</span></span>

<span data-ttu-id="86b7e-177">[![la boîte de dialogue Nouveau projet](iteration-1-create-the-application-cs/_static/image2.jpg)](iteration-1-create-the-application-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="86b7e-177">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image2.jpg)](iteration-1-create-the-application-cs/_static/image3.png)</span></span>

<span data-ttu-id="86b7e-178">**Figure 02**: boîte de dialogue créer un projet de test unitaire ([cliquez pour afficher l’image en taille réelle](iteration-1-create-the-application-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="86b7e-178">**Figure 02**: The Create Unit Test Project dialog ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image4.png))</span></span>

<span data-ttu-id="86b7e-179">L’application ASP.NET MVC s’affiche dans la fenêtre de Explorateur de solutions Visual Studio (voir figure 3).</span><span class="sxs-lookup"><span data-stu-id="86b7e-179">ASP.NET MVC application appears in the Visual Studio Solution Explorer window (see Figure 3).</span></span> <span data-ttu-id="86b7e-180">Si vous ne voyez pas la fenêtre de Explorateur de solutions, vous pouvez ouvrir cette fenêtre en sélectionnant la **vue de menu, Explorateur de solutions**.</span><span class="sxs-lookup"><span data-stu-id="86b7e-180">If you don t see the Solution Explorer window then you can open this window by selecting the menu option **View, Solution Explorer**.</span></span> <span data-ttu-id="86b7e-181">Notez que la solution contient deux projets : le projet MVC ASP.NET et le projet de test.</span><span class="sxs-lookup"><span data-stu-id="86b7e-181">Notice that the solution contains two projects: the ASP.NET MVC project and the Test project.</span></span> <span data-ttu-id="86b7e-182">Le projet MVC ASP.NET est nommé ContactManager et le projet de test est nommé ContactManager. tests.</span><span class="sxs-lookup"><span data-stu-id="86b7e-182">The ASP.NET MVC project is named ContactManager and the Test project is named ContactManager.Tests.</span></span>

<span data-ttu-id="86b7e-183">[![la boîte de dialogue Nouveau projet](iteration-1-create-the-application-cs/_static/image3.jpg)](iteration-1-create-the-application-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="86b7e-183">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image3.jpg)](iteration-1-create-the-application-cs/_static/image5.png)</span></span>

<span data-ttu-id="86b7e-184">**Figure 03**: fenêtre Explorateur de solutions ([cliquez pour afficher l’image en taille réelle](iteration-1-create-the-application-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="86b7e-184">**Figure 03**: The Solution Explorer window ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image6.png))</span></span>

## <a name="deleting-the-project-sample-files"></a><span data-ttu-id="86b7e-185">Suppression des fichiers d’exemple de projet</span><span class="sxs-lookup"><span data-stu-id="86b7e-185">Deleting the Project Sample Files</span></span>

<span data-ttu-id="86b7e-186">Le modèle de projet MVC ASP.NET comprend des exemples de fichiers pour les contrôleurs et les vues.</span><span class="sxs-lookup"><span data-stu-id="86b7e-186">The ASP.NET MVC project template includes sample files for controllers and views.</span></span> <span data-ttu-id="86b7e-187">Avant de créer une nouvelle application ASP.NET MVC, vous devez supprimer ces fichiers.</span><span class="sxs-lookup"><span data-stu-id="86b7e-187">Before creating a new ASP.NET MVC application, you should delete these files.</span></span> <span data-ttu-id="86b7e-188">Vous pouvez supprimer des fichiers et des dossiers dans la fenêtre Explorateur de solutions en cliquant avec le bouton droit sur un fichier ou un dossier et en sélectionnant l’option de menu **supprimer**.</span><span class="sxs-lookup"><span data-stu-id="86b7e-188">You can delete files and folders in the Solution Explorer window by right-clicking a file or folder and selecting the menu option **Delete**.</span></span>

<span data-ttu-id="86b7e-189">Vous devez supprimer les fichiers suivants du projet MVC ASP.NET :</span><span class="sxs-lookup"><span data-stu-id="86b7e-189">You need to delete the following files from the ASP.NET MVC project:</span></span>

- <span data-ttu-id="86b7e-190">\Controllers\HomeController.cs</span><span class="sxs-lookup"><span data-stu-id="86b7e-190">\Controllers\HomeController.cs</span></span>

- <span data-ttu-id="86b7e-191">\Views\Home\About.aspx</span><span class="sxs-lookup"><span data-stu-id="86b7e-191">\Views\Home\About.aspx</span></span>

- <span data-ttu-id="86b7e-192">\Views\Home\Index.aspx</span><span class="sxs-lookup"><span data-stu-id="86b7e-192">\Views\Home\Index.aspx</span></span>

<span data-ttu-id="86b7e-193">Et, vous devez supprimer le fichier suivant du projet de test :</span><span class="sxs-lookup"><span data-stu-id="86b7e-193">And, you need to delete the following file from the Test project:</span></span>

<span data-ttu-id="86b7e-194">\Controllers\HomeControllerTest.cs</span><span class="sxs-lookup"><span data-stu-id="86b7e-194">\Controllers\HomeControllerTest.cs</span></span>

## <a name="creating-the-database"></a><span data-ttu-id="86b7e-195">Création de la base de données</span><span class="sxs-lookup"><span data-stu-id="86b7e-195">Creating the Database</span></span>

<span data-ttu-id="86b7e-196">L’application du gestionnaire de contacts est une application Web basée sur la base de données.</span><span class="sxs-lookup"><span data-stu-id="86b7e-196">The Contact Manager application is a database-driven web application.</span></span> <span data-ttu-id="86b7e-197">Nous utilisons une base de données pour stocker les informations de contact.</span><span class="sxs-lookup"><span data-stu-id="86b7e-197">We use a database to store the contact information.</span></span>

<span data-ttu-id="86b7e-198">L’infrastructure MVC ASP.NET avec toute base de données moderne, y compris Microsoft SQL Server, Oracle, MySQL et les bases de données IBM DB2.</span><span class="sxs-lookup"><span data-stu-id="86b7e-198">The ASP.NET MVC framework with any modern database including Microsoft SQL Server, Oracle, MySQL, and IBM DB2 databases.</span></span> <span data-ttu-id="86b7e-199">Dans ce didacticiel, nous utilisons une base de données Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="86b7e-199">In this tutorial, we use a Microsoft SQL Server database.</span></span> <span data-ttu-id="86b7e-200">Lorsque vous installez Visual Studio, vous avez la possibilité d’installer Microsoft SQL Server Express qui est une version gratuite de la base de données Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="86b7e-200">When you install Visual Studio, you are provided with the option of installing Microsoft SQL Server Express which is a free version of the Microsoft SQL Server database.</span></span>

<span data-ttu-id="86b7e-201">Pour créer une base de données, cliquez avec le bouton droit sur le dossier de données de l’application\_dans la fenêtre Explorateur de solutions et sélectionnez l’option de menu **Ajouter, nouvel élément**.</span><span class="sxs-lookup"><span data-stu-id="86b7e-201">Create a new database by right-clicking the App\_Data folder in the Solution Explorer window and selecting the menu option **Add, New Item**.</span></span> <span data-ttu-id="86b7e-202">Dans la boîte de dialogue **Ajouter un nouvel élément** , sélectionnez la catégorie de **données** et le modèle **de base de données SQL Server** (voir figure 4).</span><span class="sxs-lookup"><span data-stu-id="86b7e-202">In the **Add New Item** dialog, select the **Data** category and the **SQL Server Database** template (see Figure 4).</span></span> <span data-ttu-id="86b7e-203">Nommez la nouvelle base de données ContactManagerDB. mdf, puis cliquez sur le bouton OK.</span><span class="sxs-lookup"><span data-stu-id="86b7e-203">Name the new database ContactManagerDB.mdf and click the OK button.</span></span>

<span data-ttu-id="86b7e-204">[![la boîte de dialogue Nouveau projet](iteration-1-create-the-application-cs/_static/image4.jpg)](iteration-1-create-the-application-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="86b7e-204">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image4.jpg)](iteration-1-create-the-application-cs/_static/image7.png)</span></span>

<span data-ttu-id="86b7e-205">**Figure 04**: création d’une nouvelle base de données Microsoft SQL Server Express ([cliquez pour afficher l’image en taille réelle](iteration-1-create-the-application-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="86b7e-205">**Figure 04**: Creating a new Microsoft SQL Server Express database ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image8.png))</span></span>

<span data-ttu-id="86b7e-206">Une fois la base de données créée, la base de données s’affiche dans le dossier application\_données de la fenêtre Explorateur de solutions.</span><span class="sxs-lookup"><span data-stu-id="86b7e-206">After you create the new database, the database appears in the App\_Data folder in the Solution Explorer window.</span></span> <span data-ttu-id="86b7e-207">Double-cliquez sur le fichier ContactManager. mdf pour ouvrir la fenêtre de Explorateur de serveurs et connectez-vous à la base de données.</span><span class="sxs-lookup"><span data-stu-id="86b7e-207">Double-click the ContactManager.mdf file to open the Server Explorer window and connect to the database.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="86b7e-208">La fenêtre Explorateur de serveurs est appelée fenêtre explorateur de base de données dans le cas de Microsoft Visual Web Developer.</span><span class="sxs-lookup"><span data-stu-id="86b7e-208">The Server Explorer window is called the Database Explorer window in the case of Microsoft Visual Web Developer.</span></span>

<span data-ttu-id="86b7e-209">Vous pouvez utiliser la fenêtre Explorateur de serveurs pour créer des objets de base de données tels que des tables de base de données, des vues, des déclencheurs et des procédures stockées.</span><span class="sxs-lookup"><span data-stu-id="86b7e-209">You can use the Server Explorer window to create new database objects such as database tables, views, triggers, and stored procedures.</span></span> <span data-ttu-id="86b7e-210">Cliquez avec le bouton droit sur le dossier tables et sélectionnez l’option de menu **Ajouter une nouvelle table**.</span><span class="sxs-lookup"><span data-stu-id="86b7e-210">Right-click the Tables folder and select the menu option **Add New Table**.</span></span> <span data-ttu-id="86b7e-211">La Concepteur de tables de base de données s’affiche (voir figure 5).</span><span class="sxs-lookup"><span data-stu-id="86b7e-211">The Database Table Designer appears (see Figure 5).</span></span>

<span data-ttu-id="86b7e-212">[![la boîte de dialogue Nouveau projet](iteration-1-create-the-application-cs/_static/image5.jpg)](iteration-1-create-the-application-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="86b7e-212">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image5.jpg)](iteration-1-create-the-application-cs/_static/image9.png)</span></span>

<span data-ttu-id="86b7e-213">**Figure 05**: concepteur de tables de la base de données ([cliquez pour afficher l’image en taille réelle](iteration-1-create-the-application-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="86b7e-213">**Figure 05**: The Database Table Designer ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image10.png))</span></span>

<span data-ttu-id="86b7e-214">Nous devons créer une table qui contient les colonnes suivantes :</span><span class="sxs-lookup"><span data-stu-id="86b7e-214">We need to create a table that contains the following columns:</span></span>

<a id="0.1_table01"></a>

| <span data-ttu-id="86b7e-215">**Nom de la colonne**</span><span class="sxs-lookup"><span data-stu-id="86b7e-215">**Column Name**</span></span> | <span data-ttu-id="86b7e-216">**Type de données**</span><span class="sxs-lookup"><span data-stu-id="86b7e-216">**Data Type**</span></span> | <span data-ttu-id="86b7e-217">**Null autorisé**</span><span class="sxs-lookup"><span data-stu-id="86b7e-217">**Allow Nulls**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="86b7e-218">Id</span><span class="sxs-lookup"><span data-stu-id="86b7e-218">Id</span></span> | <span data-ttu-id="86b7e-219">int</span><span class="sxs-lookup"><span data-stu-id="86b7e-219">int</span></span> | <span data-ttu-id="86b7e-220">false</span><span class="sxs-lookup"><span data-stu-id="86b7e-220">false</span></span> |
| <span data-ttu-id="86b7e-221">FirstName</span><span class="sxs-lookup"><span data-stu-id="86b7e-221">FirstName</span></span> | <span data-ttu-id="86b7e-222">nvarchar(50)</span><span class="sxs-lookup"><span data-stu-id="86b7e-222">nvarchar(50)</span></span> | <span data-ttu-id="86b7e-223">false</span><span class="sxs-lookup"><span data-stu-id="86b7e-223">false</span></span> |
| <span data-ttu-id="86b7e-224">LastName</span><span class="sxs-lookup"><span data-stu-id="86b7e-224">LastName</span></span> | <span data-ttu-id="86b7e-225">nvarchar(50)</span><span class="sxs-lookup"><span data-stu-id="86b7e-225">nvarchar(50)</span></span> | <span data-ttu-id="86b7e-226">false</span><span class="sxs-lookup"><span data-stu-id="86b7e-226">false</span></span> |
| <span data-ttu-id="86b7e-227">Phone</span><span class="sxs-lookup"><span data-stu-id="86b7e-227">Phone</span></span> | <span data-ttu-id="86b7e-228">nvarchar(50)</span><span class="sxs-lookup"><span data-stu-id="86b7e-228">nvarchar(50)</span></span> | <span data-ttu-id="86b7e-229">false</span><span class="sxs-lookup"><span data-stu-id="86b7e-229">false</span></span> |
| <span data-ttu-id="86b7e-230">Messagerie</span><span class="sxs-lookup"><span data-stu-id="86b7e-230">Email</span></span> | <span data-ttu-id="86b7e-231">nvarchar(255)</span><span class="sxs-lookup"><span data-stu-id="86b7e-231">nvarchar(255)</span></span> | <span data-ttu-id="86b7e-232">false</span><span class="sxs-lookup"><span data-stu-id="86b7e-232">false</span></span> |

<span data-ttu-id="86b7e-233">La première colonne, la colonne ID, est spéciale.</span><span class="sxs-lookup"><span data-stu-id="86b7e-233">The first column, the Id column, is special.</span></span> <span data-ttu-id="86b7e-234">Vous devez marquer la colonne ID comme une colonne d’identité et une colonne de clé primaire.</span><span class="sxs-lookup"><span data-stu-id="86b7e-234">You need to mark the Id column as an Identity column and a Primary Key column.</span></span> <span data-ttu-id="86b7e-235">Vous indiquez qu’une colonne est une colonne d’identité en développant les propriétés des colonnes (regardez au bas de la figure 6) et en faisant défiler jusqu’à la propriété spécification de l’identité.</span><span class="sxs-lookup"><span data-stu-id="86b7e-235">You indicate that a column is an Identity column by expanding Column Properties (look at the bottom of Figure 6) and scrolling down to the Identity Specification property.</span></span> <span data-ttu-id="86b7e-236">Affectez à la propriété **(is Identity)** la valeur **Yes**.</span><span class="sxs-lookup"><span data-stu-id="86b7e-236">Set the **(Is Identity)** property to the value **Yes**.</span></span>

<span data-ttu-id="86b7e-237">Vous marquez une colonne en tant que colonne de clé primaire en sélectionnant la colonne et en cliquant sur le bouton avec l’icône d’une clé.</span><span class="sxs-lookup"><span data-stu-id="86b7e-237">You mark a column as a Primary Key column by selecting the column and clicking the button with the icon of a key.</span></span> <span data-ttu-id="86b7e-238">Une fois qu’une colonne est marquée comme colonne de clé primaire, une icône de clé apparaît en regard de la colonne (voir figure 6).</span><span class="sxs-lookup"><span data-stu-id="86b7e-238">After a column is marked as a Primary Key column, an icon of a key appears next to the column (see Figure 6).</span></span>

<span data-ttu-id="86b7e-239">Une fois que vous avez terminé la création de la table, cliquez sur le bouton Enregistrer (le bouton avec une icône de disquette) pour enregistrer la nouvelle table.</span><span class="sxs-lookup"><span data-stu-id="86b7e-239">After you finish creating the table, click the Save button (the button with an icon of a floppy) to save the new table.</span></span> <span data-ttu-id="86b7e-240">Donnez à votre nouvelle table le nom *contacts*.</span><span class="sxs-lookup"><span data-stu-id="86b7e-240">Give your new table the name *Contacts*.</span></span>

<span data-ttu-id="86b7e-241">À la fin de la création de la table de base de données contacts, vous devez ajouter des enregistrements à la table.</span><span class="sxs-lookup"><span data-stu-id="86b7e-241">After finish creating the Contacts database table, you should add some records to the table.</span></span> <span data-ttu-id="86b7e-242">Cliquez avec le bouton droit sur la table contacts dans la fenêtre Explorateur de serveurs et sélectionnez l’option de menu **afficher les données**de la table.</span><span class="sxs-lookup"><span data-stu-id="86b7e-242">Right-click the Contacts table in the Server Explorer window and select the menu option **Show Table Data**.</span></span> <span data-ttu-id="86b7e-243">Entrez un ou plusieurs contacts dans la grille qui s’affiche.</span><span class="sxs-lookup"><span data-stu-id="86b7e-243">Enter one or more contacts in the grid that appears.</span></span>

## <a name="creating-the-data-model"></a><span data-ttu-id="86b7e-244">Création du modèle de données</span><span class="sxs-lookup"><span data-stu-id="86b7e-244">Creating the Data Model</span></span>

<span data-ttu-id="86b7e-245">L’application ASP.NET MVC se compose de modèles, de vues et de contrôleurs.</span><span class="sxs-lookup"><span data-stu-id="86b7e-245">The ASP.NET MVC application consists of Models, Views, and Controllers.</span></span> <span data-ttu-id="86b7e-246">Nous commençons par créer une classe de modèle qui représente la table contacts que nous avons créée dans la section précédente.</span><span class="sxs-lookup"><span data-stu-id="86b7e-246">We start by creating a Model class that represents the Contacts table that we created in the previous section.</span></span>

<span data-ttu-id="86b7e-247">Dans ce didacticiel, nous utilisons le Entity Framework Microsoft pour générer automatiquement une classe de modèle à partir de la base de données.</span><span class="sxs-lookup"><span data-stu-id="86b7e-247">In this tutorial, we use the Microsoft Entity Framework to generate a model class from the database automatically.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="86b7e-248">L’infrastructure MVC ASP.NET n’est pas liée à la Entity Framework Microsoft de quelque manière que ce soit.</span><span class="sxs-lookup"><span data-stu-id="86b7e-248">The ASP.NET MVC framework is not tied to the Microsoft Entity Framework in any way.</span></span> <span data-ttu-id="86b7e-249">Vous pouvez utiliser ASP.NET MVC avec d’autres technologies d’accès aux bases de données, notamment NHibernate, LINQ to SQL ou ADO.NET.</span><span class="sxs-lookup"><span data-stu-id="86b7e-249">You can use ASP.NET MVC with alternative database access technologies including NHibernate, LINQ to SQL, or ADO.NET.</span></span>

<span data-ttu-id="86b7e-250">Pour créer les classes de modèle de données, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="86b7e-250">Follow these steps to create the data model classes:</span></span>

1. <span data-ttu-id="86b7e-251">Cliquez avec le bouton droit sur le dossier modèles dans la fenêtre Explorateur de solutions, puis sélectionnez **Ajouter, nouvel élément**.</span><span class="sxs-lookup"><span data-stu-id="86b7e-251">Right-click the Models folder in the Solution Explorer window and select **Add, New Item**.</span></span> <span data-ttu-id="86b7e-252">La boîte de dialogue **Ajouter un nouvel élément** s’affiche (voir figure 6).</span><span class="sxs-lookup"><span data-stu-id="86b7e-252">The **Add New Item** dialog appears (see Figure 6).</span></span>
2. <span data-ttu-id="86b7e-253">Sélectionnez la catégorie de **données** et le modèle de **Entity Data Model ADO.net** .</span><span class="sxs-lookup"><span data-stu-id="86b7e-253">Select the **Data** category and the **ADO.NET Entity Data Model** template.</span></span> <span data-ttu-id="86b7e-254">Nommez votre modèle de données *ContactManagerModel. edmx* , puis cliquez sur le bouton **Ajouter** .</span><span class="sxs-lookup"><span data-stu-id="86b7e-254">Name your data model *ContactManagerModel.edmx* and click the **Add** button.</span></span> <span data-ttu-id="86b7e-255">L’Assistant Entity Data Model s’affiche (voir la figure 7).</span><span class="sxs-lookup"><span data-stu-id="86b7e-255">The Entity Data Model wizard appears (see Figure 7).</span></span>
3. <span data-ttu-id="86b7e-256">Dans l’étape **choisir le contenu du modèle** , sélectionnez **générer à partir de la base de données** (voir la figure 7).</span><span class="sxs-lookup"><span data-stu-id="86b7e-256">In the **Choose Model Contents** step, select **Generate from database** (see Figure 7).</span></span>
4. <span data-ttu-id="86b7e-257">Dans l’étape **choisir votre connexion de données** , sélectionnez la base de données ContactManagerDB. mdf, puis entrez le nom *ContactManagerDBEntities* pour les paramètres de connexion de l’entité (voir figure 8).</span><span class="sxs-lookup"><span data-stu-id="86b7e-257">In the **Choose Your Data Connection** step, select the ContactManagerDB.mdf database and enter the name *ContactManagerDBEntities* for the Entity Connection Settings (see Figure 8).</span></span>
5. <span data-ttu-id="86b7e-258">Dans l’étape **choisir vos objets de base de données** , activez la case à cocher tables (voir figure 9).</span><span class="sxs-lookup"><span data-stu-id="86b7e-258">In the **Choose Your Database Objects** step, select the checkbox labeled Tables (see Figure 9).</span></span> <span data-ttu-id="86b7e-259">Le modèle de données inclut toutes les tables contenues dans votre base de données (il n’y en a qu’une, la table contacts).</span><span class="sxs-lookup"><span data-stu-id="86b7e-259">The data model will include all tables contained in your database (there is just one, the Contacts table).</span></span> <span data-ttu-id="86b7e-260">Entrez les *modèles*d’espace de noms.</span><span class="sxs-lookup"><span data-stu-id="86b7e-260">Enter the namespace *Models*.</span></span> <span data-ttu-id="86b7e-261">Cliquez sur le bouton Terminer pour terminer l’Assistant.</span><span class="sxs-lookup"><span data-stu-id="86b7e-261">Click the Finish button to complete the wizard.</span></span>

<span data-ttu-id="86b7e-262">[![la boîte de dialogue Nouveau projet](iteration-1-create-the-application-cs/_static/image6.jpg)](iteration-1-create-the-application-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="86b7e-262">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image6.jpg)](iteration-1-create-the-application-cs/_static/image11.png)</span></span>

<span data-ttu-id="86b7e-263">**Figure 06**: boîte de dialogue Ajouter un nouvel élément ([cliquez pour afficher l’image en taille réelle](iteration-1-create-the-application-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="86b7e-263">**Figure 06**: The Add New Item dialog ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image12.png))</span></span>

<span data-ttu-id="86b7e-264">[![la boîte de dialogue Nouveau projet](iteration-1-create-the-application-cs/_static/image7.jpg)](iteration-1-create-the-application-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="86b7e-264">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image7.jpg)](iteration-1-create-the-application-cs/_static/image13.png)</span></span>

<span data-ttu-id="86b7e-265">**Figure 07**: choisir le contenu du modèle ([cliquez pour afficher l’image en taille réelle](iteration-1-create-the-application-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="86b7e-265">**Figure 07**: Choose Model Contents ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image14.png))</span></span>

<span data-ttu-id="86b7e-266">[![la boîte de dialogue Nouveau projet](iteration-1-create-the-application-cs/_static/image8.jpg)](iteration-1-create-the-application-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="86b7e-266">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image8.jpg)](iteration-1-create-the-application-cs/_static/image15.png)</span></span>

<span data-ttu-id="86b7e-267">**Figure 08**: choisir votre connexion de données ([cliquez pour afficher l’image en taille réelle](iteration-1-create-the-application-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="86b7e-267">**Figure 08**: Choose Your Data Connection ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image16.png))</span></span>

<span data-ttu-id="86b7e-268">[![la boîte de dialogue Nouveau projet](iteration-1-create-the-application-cs/_static/image9.jpg)](iteration-1-create-the-application-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="86b7e-268">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image9.jpg)](iteration-1-create-the-application-cs/_static/image17.png)</span></span>

<span data-ttu-id="86b7e-269">**Figure 09**: choisir vos objets de base de données ([cliquez pour afficher l’image en taille réelle](iteration-1-create-the-application-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="86b7e-269">**Figure 09**: Choose Your Database Objects ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image18.png))</span></span>

<span data-ttu-id="86b7e-270">Une fois que vous avez terminé l’Assistant Entity Data Model, le concepteur de Entity Data Model s’affiche.</span><span class="sxs-lookup"><span data-stu-id="86b7e-270">After you complete the Entity Data Model Wizard, the Entity Data Model Designer appears.</span></span> <span data-ttu-id="86b7e-271">Le concepteur affiche une classe qui correspond à chaque table en cours de modélisation.</span><span class="sxs-lookup"><span data-stu-id="86b7e-271">The designer displays a class that corresponds to each table being modeled.</span></span> <span data-ttu-id="86b7e-272">Vous devez voir une classe nommée contacts.</span><span class="sxs-lookup"><span data-stu-id="86b7e-272">You should see one class named Contacts.</span></span>

<span data-ttu-id="86b7e-273">L’Assistant Entity Data Model génère des noms de classes basés sur des noms de tables de base de données.</span><span class="sxs-lookup"><span data-stu-id="86b7e-273">The Entity Data Model wizard generates class names based on database table names.</span></span> <span data-ttu-id="86b7e-274">Vous devez presque toujours modifier le nom de la classe générée par l’Assistant.</span><span class="sxs-lookup"><span data-stu-id="86b7e-274">You almost always need to change the name of the class generated by the wizard.</span></span> <span data-ttu-id="86b7e-275">Cliquez avec le bouton droit sur la classe contacts dans le concepteur, puis sélectionnez l’option de menu **Renommer**.</span><span class="sxs-lookup"><span data-stu-id="86b7e-275">Right-click the Contacts class in the designer and select the menu option **Rename**.</span></span> <span data-ttu-id="86b7e-276">Remplacez le nom de la classe contacts (pluriel) par contact (singulier).</span><span class="sxs-lookup"><span data-stu-id="86b7e-276">Change the name of the class from Contacts (plural) to Contact (singular).</span></span> <span data-ttu-id="86b7e-277">Une fois que vous avez modifié le nom de la classe, la classe doit apparaître comme figure 10.</span><span class="sxs-lookup"><span data-stu-id="86b7e-277">After you change the class name, the class should appear like Figure 10.</span></span>

<span data-ttu-id="86b7e-278">[![la boîte de dialogue Nouveau projet](iteration-1-create-the-application-cs/_static/image10.jpg)](iteration-1-create-the-application-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="86b7e-278">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image10.jpg)](iteration-1-create-the-application-cs/_static/image19.png)</span></span>

<span data-ttu-id="86b7e-279">**Figure 10**: classe contact ([cliquez pour afficher l’image en taille réelle](iteration-1-create-the-application-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="86b7e-279">**Figure 10**: The Contact class ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image20.png))</span></span>

<span data-ttu-id="86b7e-280">À ce stade, nous avons créé notre modèle de base de données.</span><span class="sxs-lookup"><span data-stu-id="86b7e-280">At this point, we have created our database model.</span></span> <span data-ttu-id="86b7e-281">Nous pouvons utiliser la classe contact pour représenter un enregistrement de contact particulier dans notre base de données.</span><span class="sxs-lookup"><span data-stu-id="86b7e-281">We can use the Contact class to represent a particular contact record in our database.</span></span>

## <a name="creating-the-home-controller"></a><span data-ttu-id="86b7e-282">Création du contrôleur d’hébergement</span><span class="sxs-lookup"><span data-stu-id="86b7e-282">Creating the Home Controller</span></span>

<span data-ttu-id="86b7e-283">L’étape suivante consiste à créer notre contrôleur d’hébergement.</span><span class="sxs-lookup"><span data-stu-id="86b7e-283">The next step is to create our Home controller.</span></span> <span data-ttu-id="86b7e-284">Le contrôleur d’hébergement est le contrôleur par défaut appelé dans une application ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="86b7e-284">The Home controller is the default controller invoked in an ASP.NET MVC application.</span></span>

<span data-ttu-id="86b7e-285">Créez la classe de contrôleur d’hébergement en cliquant avec le bouton droit sur le dossier Controllers dans la fenêtre Explorateur de solutions et en sélectionnant l’option de menu **Ajouter, contrôleur** (voir figure 11).</span><span class="sxs-lookup"><span data-stu-id="86b7e-285">Create the Home controller class by right-clicking the Controllers folder in the Solution Explorer window and selecting the menu option **Add, Controller** (see Figure 11).</span></span> <span data-ttu-id="86b7e-286">Remarquez la case à cocher **Ajouter des méthodes d’action pour les scénarios de création, de mise à jour et de détails**.</span><span class="sxs-lookup"><span data-stu-id="86b7e-286">Notice the checkbox labeled **Add action methods for Create, Update, and Details scenarios**.</span></span> <span data-ttu-id="86b7e-287">Assurez-vous que cette case à cocher est activée avant de cliquer sur le bouton **Ajouter** .</span><span class="sxs-lookup"><span data-stu-id="86b7e-287">Make sure that this checkbox is checked before clicking the **Add** button.</span></span>

<span data-ttu-id="86b7e-288">[![la boîte de dialogue Nouveau projet](iteration-1-create-the-application-cs/_static/image11.jpg)](iteration-1-create-the-application-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="86b7e-288">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image11.jpg)](iteration-1-create-the-application-cs/_static/image21.png)</span></span>

<span data-ttu-id="86b7e-289">**Figure 11**: ajout du contrôleur de démarrage ([cliquez pour afficher l’image en taille réelle](iteration-1-create-the-application-cs/_static/image22.png))</span><span class="sxs-lookup"><span data-stu-id="86b7e-289">**Figure 11**: Adding the Home controller ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image22.png))</span></span>

<span data-ttu-id="86b7e-290">Lorsque vous créez le contrôleur d’hébergement, vous recevez la classe dans la liste 1.</span><span class="sxs-lookup"><span data-stu-id="86b7e-290">When you create the Home controller, you get the class in Listing 1.</span></span>

<span data-ttu-id="86b7e-291">**Liste 1-Controllers\HomeController.cs**</span><span class="sxs-lookup"><span data-stu-id="86b7e-291">**Listing 1 - Controllers\HomeController.cs**</span></span>

[!code-csharp[Main](iteration-1-create-the-application-cs/samples/sample1.cs)]

## <a name="listing-the-contacts"></a><span data-ttu-id="86b7e-292">Liste des contacts</span><span class="sxs-lookup"><span data-stu-id="86b7e-292">Listing the Contacts</span></span>

<span data-ttu-id="86b7e-293">Pour afficher les enregistrements dans la table de base de données de contacts, nous devons créer une action d’index () et une vue d’index.</span><span class="sxs-lookup"><span data-stu-id="86b7e-293">In order to display the records in the Contacts database table, we need to create an Index() action and an Index view.</span></span>

<span data-ttu-id="86b7e-294">Le contrôleur d’hébergement contient déjà une action d’index ().</span><span class="sxs-lookup"><span data-stu-id="86b7e-294">The Home controller already contains an Index() action.</span></span> <span data-ttu-id="86b7e-295">Nous devons modifier cette méthode pour qu’elle ressemble à la liste 2.</span><span class="sxs-lookup"><span data-stu-id="86b7e-295">We need to modify this method so that it looks like Listing 2.</span></span>

<span data-ttu-id="86b7e-296">**Liste 2-Controllers\HomeController.cs**</span><span class="sxs-lookup"><span data-stu-id="86b7e-296">**Listing 2 - Controllers\HomeController.cs**</span></span>

[!code-csharp[Main](iteration-1-create-the-application-cs/samples/sample2.cs)]

<span data-ttu-id="86b7e-297">Notez que la classe de contrôleur d’hébergement de la liste 2 contient un champ privé nommé \_entités.</span><span class="sxs-lookup"><span data-stu-id="86b7e-297">Notice that the Home controller class in Listing 2 contains a private field named \_entities.</span></span> <span data-ttu-id="86b7e-298">Le champ entités \_représente les entités du modèle de données.</span><span class="sxs-lookup"><span data-stu-id="86b7e-298">The \_entities field represents the entities from the data model.</span></span> <span data-ttu-id="86b7e-299">Nous utilisons le champ entités \_pour communiquer avec la base de données.</span><span class="sxs-lookup"><span data-stu-id="86b7e-299">We use the \_entities field to communicate with the database.</span></span>

<span data-ttu-id="86b7e-300">La méthode index () renvoie une vue qui représente tous les contacts de la table de base de données contacts.</span><span class="sxs-lookup"><span data-stu-id="86b7e-300">The Index() method returns a view that represents all of the contacts from the Contacts database table.</span></span> <span data-ttu-id="86b7e-301">Expression \_entités. ContactSet. ToList () renvoie la liste des contacts sous la forme d’une liste générique.</span><span class="sxs-lookup"><span data-stu-id="86b7e-301">The expression \_entities.ContactSet.ToList() returns the list of contacts as a generic list.</span></span>

<span data-ttu-id="86b7e-302">Maintenant que nous avons créé le contrôleur d’index, nous devons ensuite créer la vue d’index.</span><span class="sxs-lookup"><span data-stu-id="86b7e-302">Now that we ve created the Index controller, we next need to create the Index view.</span></span> <span data-ttu-id="86b7e-303">Avant de créer la vue d’index, compilez votre application en sélectionnant l’option de menu **Générer, générer la solution**.</span><span class="sxs-lookup"><span data-stu-id="86b7e-303">Before creating the Index view, compile your application by selecting the menu option **Build, Build Solution**.</span></span> <span data-ttu-id="86b7e-304">Vous devez toujours compiler votre projet avant d’ajouter une vue pour que la liste des classes de modèle s’affiche dans la boîte de dialogue **Ajouter une vue** .</span><span class="sxs-lookup"><span data-stu-id="86b7e-304">You should always compile your project before adding a view in order for the list of model classes to be displayed in the **Add View** dialog.</span></span>

<span data-ttu-id="86b7e-305">Pour créer la vue index, cliquez avec le bouton droit sur la méthode index () et sélectionnez l’option de menu **Ajouter une vue** (voir figure 12).</span><span class="sxs-lookup"><span data-stu-id="86b7e-305">You create the Index view by right-clicking the Index() method and selecting the menu option **Add View** (see Figure 12).</span></span> <span data-ttu-id="86b7e-306">La sélection de cette option de menu ouvre la boîte de dialogue **Ajouter une vue** (voir figure 13).</span><span class="sxs-lookup"><span data-stu-id="86b7e-306">Selecting this menu option opens the **Add View** dialog (see Figure 13).</span></span>

<span data-ttu-id="86b7e-307">[![la boîte de dialogue Nouveau projet](iteration-1-create-the-application-cs/_static/image12.jpg)](iteration-1-create-the-application-cs/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="86b7e-307">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image12.jpg)](iteration-1-create-the-application-cs/_static/image23.png)</span></span>

<span data-ttu-id="86b7e-308">**Figure 12**: ajout de la vue d’index ([cliquez pour afficher l’image en taille réelle](iteration-1-create-the-application-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="86b7e-308">**Figure 12**: Adding the Index view ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image24.png))</span></span>

<span data-ttu-id="86b7e-309">Dans la boîte de dialogue **Ajouter une vue** , activez la case à cocher **créer une vue fortement typée**.</span><span class="sxs-lookup"><span data-stu-id="86b7e-309">In the **Add View** dialog, check the checkbox labeled **Create a strongly-typed view**.</span></span> <span data-ttu-id="86b7e-310">Sélectionnez la classe de données d’affichage ContactManager. Models. contact et la liste afficher le contenu.</span><span class="sxs-lookup"><span data-stu-id="86b7e-310">Select the View data class ContactManager.Models.Contact and the View content List.</span></span> <span data-ttu-id="86b7e-311">La sélection de ces options génère une vue qui affiche une liste d’enregistrements de contact.</span><span class="sxs-lookup"><span data-stu-id="86b7e-311">Selecting these options generates a view that displays a list of Contact records.</span></span>

<span data-ttu-id="86b7e-312">[![la boîte de dialogue Nouveau projet](iteration-1-create-the-application-cs/_static/image13.jpg)](iteration-1-create-the-application-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="86b7e-312">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image13.jpg)](iteration-1-create-the-application-cs/_static/image25.png)</span></span>

<span data-ttu-id="86b7e-313">**Figure 13**: boîte de dialogue Ajouter une vue ([cliquez pour afficher l’image en taille réelle](iteration-1-create-the-application-cs/_static/image26.png))</span><span class="sxs-lookup"><span data-stu-id="86b7e-313">**Figure 13**: The Add View dialog ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image26.png))</span></span>

<span data-ttu-id="86b7e-314">Lorsque vous cliquez sur le bouton **Ajouter** , la vue index de la liste 3 est générée.</span><span class="sxs-lookup"><span data-stu-id="86b7e-314">When you click the **Add** button, the Index view in Listing 3 is generated.</span></span> <span data-ttu-id="86b7e-315">Remarquez la directive &lt;% @ page%&gt; qui apparaît en haut du fichier.</span><span class="sxs-lookup"><span data-stu-id="86b7e-315">Notice the &lt;%@ Page %&gt; directive that appears at the top of the file.</span></span> <span data-ttu-id="86b7e-316">La vue d’index hérite de la classe de &gt; ViewPage&lt;IEnumerable&lt;ContactManager. Models. contact&gt;.</span><span class="sxs-lookup"><span data-stu-id="86b7e-316">The Index view inherits from the ViewPage&lt;IEnumerable&lt;ContactManager.Models.Contact&gt;&gt; class.</span></span> <span data-ttu-id="86b7e-317">En d’autres termes, la classe Model de la vue représente une liste d’entités contact.</span><span class="sxs-lookup"><span data-stu-id="86b7e-317">In other words, the Model class in the view represents a list of Contact entities.</span></span>

<span data-ttu-id="86b7e-318">Le corps de la vue index contient une boucle foreach qui itère au sein de chacun des contacts représentés par la classe Model.</span><span class="sxs-lookup"><span data-stu-id="86b7e-318">The body of the Index view contains a foreach loop that iterates through each of the contacts represented by the Model class.</span></span> <span data-ttu-id="86b7e-319">La valeur de chaque propriété de la classe contact s’affiche dans un tableau HTML.</span><span class="sxs-lookup"><span data-stu-id="86b7e-319">The value of each property of the Contact class is displayed within an HTML table.</span></span>

<span data-ttu-id="86b7e-320">**Liste 3-Views\Home\Index.aspx (non modifié)**</span><span class="sxs-lookup"><span data-stu-id="86b7e-320">**Listing 3 - Views\Home\Index.aspx (unmodified)**</span></span>

[!code-aspx[Main](iteration-1-create-the-application-cs/samples/sample3.aspx)]

<span data-ttu-id="86b7e-321">Nous devons apporter une modification à la vue index.</span><span class="sxs-lookup"><span data-stu-id="86b7e-321">We need to make one modification to the Index view.</span></span> <span data-ttu-id="86b7e-322">Étant donné que nous n’avons pas créé un affichage des détails, nous pouvons supprimer le lien Détails.</span><span class="sxs-lookup"><span data-stu-id="86b7e-322">Because we are not creating a Details view, we can remove the Details link.</span></span> <span data-ttu-id="86b7e-323">Recherchez et supprimez le code suivant dans la vue index :</span><span class="sxs-lookup"><span data-stu-id="86b7e-323">Find and remove the following code from the Index view:</span></span>

<span data-ttu-id="86b7e-324">{ID = élément. ID})%&gt;</span><span class="sxs-lookup"><span data-stu-id="86b7e-324">{ id=item.Id })%&gt;</span></span>

<span data-ttu-id="86b7e-325">Après avoir modifié la vue d’index, vous pouvez exécuter l’application du gestionnaire de contacts.</span><span class="sxs-lookup"><span data-stu-id="86b7e-325">After you modify the Index view, you can run the Contact Manager application.</span></span> <span data-ttu-id="86b7e-326">Sélectionnez l’option de menu Déboguer, démarrer le débogage ou appuyez simplement sur F5.</span><span class="sxs-lookup"><span data-stu-id="86b7e-326">Select the menu option Debug, Start Debugging or simply press F5.</span></span> <span data-ttu-id="86b7e-327">La première fois que vous exécutez l’application, vous recevez la boîte de dialogue dans la figure 14.</span><span class="sxs-lookup"><span data-stu-id="86b7e-327">The first time you run the application, you get the dialog in Figure 14.</span></span> <span data-ttu-id="86b7e-328">Sélectionnez l’option **modifier le fichier Web. config pour activer le débogage** , puis cliquez sur le bouton OK.</span><span class="sxs-lookup"><span data-stu-id="86b7e-328">Select the option **Modify the Web.config file to enable debugging** and click the OK button.</span></span>

<span data-ttu-id="86b7e-329">[![la boîte de dialogue Nouveau projet](iteration-1-create-the-application-cs/_static/image14.jpg)](iteration-1-create-the-application-cs/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="86b7e-329">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image14.jpg)](iteration-1-create-the-application-cs/_static/image27.png)</span></span>

<span data-ttu-id="86b7e-330">**Figure 14**: activation du débogage ([cliquez pour afficher l’image en taille réelle](iteration-1-create-the-application-cs/_static/image28.png))</span><span class="sxs-lookup"><span data-stu-id="86b7e-330">**Figure 14**: Enabling debugging ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image28.png))</span></span>

<span data-ttu-id="86b7e-331">La vue index est retournée par défaut.</span><span class="sxs-lookup"><span data-stu-id="86b7e-331">The Index view is returned by default.</span></span> <span data-ttu-id="86b7e-332">Cette vue répertorie toutes les données de la table de base de données de contacts (voir figure 15).</span><span class="sxs-lookup"><span data-stu-id="86b7e-332">This view lists all of the data from the Contacts database table (see Figure 15).</span></span>

<span data-ttu-id="86b7e-333">[![la boîte de dialogue Nouveau projet](iteration-1-create-the-application-cs/_static/image15.jpg)](iteration-1-create-the-application-cs/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="86b7e-333">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image15.jpg)](iteration-1-create-the-application-cs/_static/image29.png)</span></span>

<span data-ttu-id="86b7e-334">**Figure 15**: vue d’index ([cliquez pour afficher l’image en taille réelle](iteration-1-create-the-application-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="86b7e-334">**Figure 15**: The Index view ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image30.png))</span></span>

<span data-ttu-id="86b7e-335">Notez que la vue index comprend un lien intitulé créer nouveau en bas de la vue.</span><span class="sxs-lookup"><span data-stu-id="86b7e-335">Notice that the Index view includes a link labeled Create New at the bottom of the view.</span></span> <span data-ttu-id="86b7e-336">Dans la section suivante, vous allez apprendre à créer des contacts.</span><span class="sxs-lookup"><span data-stu-id="86b7e-336">In the next section, you learn how to create new contacts.</span></span>

## <a name="creating-new-contacts"></a><span data-ttu-id="86b7e-337">Création de nouveaux contacts</span><span class="sxs-lookup"><span data-stu-id="86b7e-337">Creating New Contacts</span></span>

<span data-ttu-id="86b7e-338">Pour permettre aux utilisateurs de créer des contacts, nous devons ajouter deux actions de création () au contrôleur d’hébergement.</span><span class="sxs-lookup"><span data-stu-id="86b7e-338">To enable users to create new contacts, we need to add two Create() actions to the Home controller.</span></span> <span data-ttu-id="86b7e-339">Nous devons créer une action Create () qui retourne un formulaire HTML pour la création d’un nouveau contact.</span><span class="sxs-lookup"><span data-stu-id="86b7e-339">We need to create one Create() action that returns an HTML form for creating a new contact.</span></span> <span data-ttu-id="86b7e-340">Nous devons créer une deuxième action de création () qui effectue l’insertion de base de données réelle du nouveau contact.</span><span class="sxs-lookup"><span data-stu-id="86b7e-340">We need to create a second Create() action that performs the actual database insert of the new contact.</span></span>

<span data-ttu-id="86b7e-341">Les nouvelles méthodes Create () que nous devons ajouter au contrôleur de démarrage sont contenues dans la liste 4.</span><span class="sxs-lookup"><span data-stu-id="86b7e-341">The new Create() methods that we need to add to the Home controller are contained in Listing 4.</span></span>

<span data-ttu-id="86b7e-342">**Liste 4-Controllers\HomeController.cs (avec les méthodes Create)**</span><span class="sxs-lookup"><span data-stu-id="86b7e-342">**Listing 4 - Controllers\HomeController.cs (with Create methods)**</span></span>

[!code-csharp[Main](iteration-1-create-the-application-cs/samples/sample4.cs)]

<span data-ttu-id="86b7e-343">La première méthode Create () peut être appelée à l’aide d’une requête HTTP d’extraction tandis que la deuxième méthode Create () peut être appelée uniquement par une requête HTTP.</span><span class="sxs-lookup"><span data-stu-id="86b7e-343">The first Create() method can be invoked with an HTTP GET while the second Create() method can be invoked only by an HTTP POST.</span></span> <span data-ttu-id="86b7e-344">En d’autres termes, la deuxième méthode Create () peut être appelée uniquement lors de la publication d’un formulaire HTML.</span><span class="sxs-lookup"><span data-stu-id="86b7e-344">In other words, the second Create() method can be invoked only when posting an HTML form.</span></span> <span data-ttu-id="86b7e-345">La première méthode Create () retourne simplement une vue qui contient le formulaire HTML pour la création d’un nouveau contact.</span><span class="sxs-lookup"><span data-stu-id="86b7e-345">The first Create() method simply returns a view that contains the HTML form for creating a new contact.</span></span> <span data-ttu-id="86b7e-346">La deuxième méthode Create () est bien plus intéressante : elle ajoute le nouveau contact à la base de données.</span><span class="sxs-lookup"><span data-stu-id="86b7e-346">The second Create() method is much more interesting: it adds the new contact to the database.</span></span>

<span data-ttu-id="86b7e-347">Notez que la deuxième méthode Create () a été modifiée pour accepter une instance de la classe contact.</span><span class="sxs-lookup"><span data-stu-id="86b7e-347">Notice that the second Create() method has been modified to accept an instance of the Contact class.</span></span> <span data-ttu-id="86b7e-348">Les valeurs de formulaire publiées à partir du formulaire HTML sont liées automatiquement à cette classe de contact par l’infrastructure MVC ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="86b7e-348">The form values posted from the HTML form are bound to this Contact class by the ASP.NET MVC framework automatically.</span></span> <span data-ttu-id="86b7e-349">Chaque champ de formulaire du formulaire HTML créer est affecté à une propriété du paramètre contact.</span><span class="sxs-lookup"><span data-stu-id="86b7e-349">Each form field from the HTML Create form is assigned to a property of the Contact parameter.</span></span>

<span data-ttu-id="86b7e-350">Notez que le paramètre contact est décoré avec un attribut [Bind].</span><span class="sxs-lookup"><span data-stu-id="86b7e-350">Notice that the Contact parameter is decorated with a [Bind] attribute.</span></span> <span data-ttu-id="86b7e-351">L’attribut [Bind] est utilisé pour exclure la propriété d’ID de contact de la liaison.</span><span class="sxs-lookup"><span data-stu-id="86b7e-351">The [Bind] attribute is used to exclude the Contact Id property from binding.</span></span> <span data-ttu-id="86b7e-352">Étant donné que la propriété ID représente une propriété Identity, nous ne voulons pas définir la propriété ID.</span><span class="sxs-lookup"><span data-stu-id="86b7e-352">Because the Id property represents an Identity property, we don t want to set the Id property.</span></span>

<span data-ttu-id="86b7e-353">Dans le corps de la méthode Create (), le Entity Framework est utilisé pour insérer le nouveau contact dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="86b7e-353">In the body of the Create() method, the Entity Framework is used to insert the new Contact into the database.</span></span> <span data-ttu-id="86b7e-354">Le nouveau contact est ajouté à l’ensemble de contacts existant et la méthode SaveChanges () est appelée pour envoyer ces modifications à la base de données sous-jacente.</span><span class="sxs-lookup"><span data-stu-id="86b7e-354">The new Contact is added to the existing set of Contacts and the SaveChanges() method is called to push these changes back to the underlying database.</span></span>

<span data-ttu-id="86b7e-355">Vous pouvez générer un formulaire HTML pour créer des contacts en cliquant avec le bouton droit sur l’une des deux méthodes Create () et en sélectionnant l’option de menu **Ajouter une vue** (voir figure 16).</span><span class="sxs-lookup"><span data-stu-id="86b7e-355">You can generate an HTML form for creating new Contacts by right-clicking either of the two Create() methods and selecting the menu option **Add View** (see Figure 16).</span></span>

<span data-ttu-id="86b7e-356">[![la boîte de dialogue Nouveau projet](iteration-1-create-the-application-cs/_static/image16.jpg)](iteration-1-create-the-application-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="86b7e-356">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image16.jpg)](iteration-1-create-the-application-cs/_static/image31.png)</span></span>

<span data-ttu-id="86b7e-357">**Figure 16**: ajout de la vue Create ([Cliquer pour afficher l’image en taille réelle](iteration-1-create-the-application-cs/_static/image32.png))</span><span class="sxs-lookup"><span data-stu-id="86b7e-357">**Figure 16**: Adding the Create view ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image32.png))</span></span>

<span data-ttu-id="86b7e-358">Dans la boîte de dialogue **Ajouter une vue** , sélectionnez la classe **ContactManager. Models. contact** et l’option **créer** pour afficher le contenu (voir figure 17).</span><span class="sxs-lookup"><span data-stu-id="86b7e-358">In the **Add View** dialog, select the **ContactManager.Models.Contact** class and the **Create** option for view content (see Figure 17).</span></span> <span data-ttu-id="86b7e-359">Lorsque vous cliquez sur le bouton **Ajouter** , une vue créer est générée automatiquement.</span><span class="sxs-lookup"><span data-stu-id="86b7e-359">When you click the **Add** button, a Create view is generated automatically.</span></span>

<span data-ttu-id="86b7e-360">[![la boîte de dialogue Nouveau projet](iteration-1-create-the-application-cs/_static/image17.jpg)](iteration-1-create-the-application-cs/_static/image33.png)</span><span class="sxs-lookup"><span data-stu-id="86b7e-360">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image17.jpg)](iteration-1-create-the-application-cs/_static/image33.png)</span></span>

<span data-ttu-id="86b7e-361">**Figure 17**: affichage d’une explosion de page ([cliquez pour afficher l’image en taille réelle](iteration-1-create-the-application-cs/_static/image34.png))</span><span class="sxs-lookup"><span data-stu-id="86b7e-361">**Figure 17**: Seeing a page explode ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image34.png))</span></span>

<span data-ttu-id="86b7e-362">L’affichage créer contient des champs de formulaire pour chacune des propriétés de la classe contact.</span><span class="sxs-lookup"><span data-stu-id="86b7e-362">The Create view contains form fields for each of the properties of the Contact class.</span></span> <span data-ttu-id="86b7e-363">Le code de la vue Create est inclus dans la liste 5.</span><span class="sxs-lookup"><span data-stu-id="86b7e-363">The code for the Create view is included in Listing 5.</span></span>

<span data-ttu-id="86b7e-364">**Liste 5-Views\Home\Create.aspx**</span><span class="sxs-lookup"><span data-stu-id="86b7e-364">**Listing 5 - Views\Home\Create.aspx**</span></span>

[!code-aspx[Main](iteration-1-create-the-application-cs/samples/sample5.aspx)]

<span data-ttu-id="86b7e-365">Après avoir modifié les méthodes Create () et ajouté la vue Create, vous pouvez exécuter l’application du gestionnaire de contacts et créer des contacts.</span><span class="sxs-lookup"><span data-stu-id="86b7e-365">After you modify the Create() methods and add the Create view, you can run the Contact Manger application and create new contacts.</span></span> <span data-ttu-id="86b7e-366">Cliquez sur le lien **créer** qui apparaît dans la vue index pour accéder à la vue Create.</span><span class="sxs-lookup"><span data-stu-id="86b7e-366">Click the **Create New** link that appears in the Index view to navigate to the Create view.</span></span> <span data-ttu-id="86b7e-367">Vous devez voir la vue dans la figure 18.</span><span class="sxs-lookup"><span data-stu-id="86b7e-367">You should see the view in Figure 18.</span></span>

<span data-ttu-id="86b7e-368">[![la boîte de dialogue Nouveau projet](iteration-1-create-the-application-cs/_static/image18.jpg)](iteration-1-create-the-application-cs/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="86b7e-368">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image18.jpg)](iteration-1-create-the-application-cs/_static/image35.png)</span></span>

<span data-ttu-id="86b7e-369">**Figure 18**: vue Create ([Cliquer pour afficher l’image en taille réelle](iteration-1-create-the-application-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="86b7e-369">**Figure 18**: The Create View ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image36.png))</span></span>

## <a name="editing-contacts"></a><span data-ttu-id="86b7e-370">Modification des contacts</span><span class="sxs-lookup"><span data-stu-id="86b7e-370">Editing Contacts</span></span>

<span data-ttu-id="86b7e-371">L’ajout de la fonctionnalité de modification d’un enregistrement de contact est très similaire à l’ajout de la fonctionnalité de création d’enregistrements de contact.</span><span class="sxs-lookup"><span data-stu-id="86b7e-371">Adding the functionality for editing a contact record is very similar to adding the functionality for creating new contact records.</span></span> <span data-ttu-id="86b7e-372">Tout d’abord, nous devons ajouter deux nouvelles méthodes de modification à la classe de contrôleur d’hébergement.</span><span class="sxs-lookup"><span data-stu-id="86b7e-372">First, we need to add two new Edit methods to the Home controller class.</span></span> <span data-ttu-id="86b7e-373">Ces nouvelles méthodes Edit () sont contenues dans la liste 6.</span><span class="sxs-lookup"><span data-stu-id="86b7e-373">These new Edit() methods are contained in Listing 6.</span></span>

<span data-ttu-id="86b7e-374">**Liste 6-Controllers\HomeController.cs (avec les méthodes d’édition)**</span><span class="sxs-lookup"><span data-stu-id="86b7e-374">**Listing 6 - Controllers\HomeController.cs (with Edit methods)**</span></span>

[!code-csharp[Main](iteration-1-create-the-application-cs/samples/sample6.cs)]

<span data-ttu-id="86b7e-375">La première méthode Edit () est appelée par une opération HTTP.</span><span class="sxs-lookup"><span data-stu-id="86b7e-375">The first Edit() method is invoked by an HTTP GET operation.</span></span> <span data-ttu-id="86b7e-376">Un paramètre ID est passé à cette méthode, qui représente l’ID de l’enregistrement de contact en cours de modification.</span><span class="sxs-lookup"><span data-stu-id="86b7e-376">An Id parameter is passed to this method which represents the Id of the contact record being edited.</span></span> <span data-ttu-id="86b7e-377">Le Entity Framework est utilisé pour récupérer un contact qui correspond à l’ID. Une vue qui contient un formulaire HTML pour la modification d’un enregistrement est retournée.</span><span class="sxs-lookup"><span data-stu-id="86b7e-377">The Entity Framework is used to retrieve a contact that matches the Id. A view that contains an HTML form for editing a record is returned.</span></span>

<span data-ttu-id="86b7e-378">La deuxième méthode Edit () effectue la mise à jour réelle de la base de données.</span><span class="sxs-lookup"><span data-stu-id="86b7e-378">The second Edit() method performs the actual update to the database.</span></span> <span data-ttu-id="86b7e-379">Cette méthode accepte une instance de la classe contact comme paramètre.</span><span class="sxs-lookup"><span data-stu-id="86b7e-379">This method accepts an instance of the Contact class as a parameter.</span></span> <span data-ttu-id="86b7e-380">L’infrastructure MVC ASP.NET lie automatiquement les champs de formulaire du formulaire de modification à cette classe.</span><span class="sxs-lookup"><span data-stu-id="86b7e-380">The ASP.NET MVC framework binds the form fields from the Edit form to this class automatically.</span></span> <span data-ttu-id="86b7e-381">Notez que vous ne pouvez pas inclure l’attribut [Bind] lors de la modification d’un contact (nous avons besoin de la valeur de la propriété ID).</span><span class="sxs-lookup"><span data-stu-id="86b7e-381">Notice that you don t include the[Bind] attribute when editing a Contact (we need the value of the Id property).</span></span>

<span data-ttu-id="86b7e-382">Le Entity Framework est utilisé pour enregistrer le contact modifié dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="86b7e-382">The Entity Framework is used to save the modified Contact to the database.</span></span> <span data-ttu-id="86b7e-383">Le contact d’origine doit d’abord être récupéré de la base de données.</span><span class="sxs-lookup"><span data-stu-id="86b7e-383">The original Contact must be retrieved from the database first.</span></span> <span data-ttu-id="86b7e-384">Ensuite, la méthode Entity Framework ApplyPropertyChanges () est appelée pour enregistrer les modifications apportées au contact.</span><span class="sxs-lookup"><span data-stu-id="86b7e-384">Next, the Entity Framework ApplyPropertyChanges() method is called to record the changes to the Contact.</span></span> <span data-ttu-id="86b7e-385">Enfin, la méthode Entity Framework SaveChanges () est appelée pour rendre persistantes les modifications apportées à la base de données sous-jacente.</span><span class="sxs-lookup"><span data-stu-id="86b7e-385">Finally, the Entity Framework SaveChanges() method is called to persist the changes to the underlying database.</span></span>

<span data-ttu-id="86b7e-386">Vous pouvez générer la vue qui contient le formulaire de modification en cliquant avec le bouton droit sur la méthode Edit () et en sélectionnant l’option de menu Ajouter une vue.</span><span class="sxs-lookup"><span data-stu-id="86b7e-386">You can generate the view that contains the Edit form by right-clicking the Edit() method and selecting the menu option Add View.</span></span> <span data-ttu-id="86b7e-387">Dans la boîte de dialogue Ajouter une vue, sélectionnez la classe **ContactManager. Models. contact** et le contenu de la vue **Edit** (voir figure 19).</span><span class="sxs-lookup"><span data-stu-id="86b7e-387">In the Add View dialog, select the **ContactManager.Models.Contact** class and the **Edit** view content (see Figure 19).</span></span>

<span data-ttu-id="86b7e-388">[![la boîte de dialogue Nouveau projet](iteration-1-create-the-application-cs/_static/image19.jpg)](iteration-1-create-the-application-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="86b7e-388">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image19.jpg)](iteration-1-create-the-application-cs/_static/image37.png)</span></span>

<span data-ttu-id="86b7e-389">**Figure 19**: ajout d’une vue de modification ([cliquez pour afficher l’image en taille réelle](iteration-1-create-the-application-cs/_static/image38.png))</span><span class="sxs-lookup"><span data-stu-id="86b7e-389">**Figure 19**: Adding an Edit View ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image38.png))</span></span>

<span data-ttu-id="86b7e-390">Lorsque vous cliquez sur le bouton Ajouter, une nouvelle vue Edition est générée automatiquement.</span><span class="sxs-lookup"><span data-stu-id="86b7e-390">When you click the Add button, a new Edit view is generated automatically.</span></span> <span data-ttu-id="86b7e-391">Le formulaire HTML généré contient des champs qui correspondent à chacune des propriétés de la classe contact (voir la liste 7).</span><span class="sxs-lookup"><span data-stu-id="86b7e-391">The HTML form that is generated contains fields that correspond to each of the properties of the Contact class (see Listing 7).</span></span>

<span data-ttu-id="86b7e-392">**Liste 7-Views\Home\Edit.aspx**</span><span class="sxs-lookup"><span data-stu-id="86b7e-392">**Listing 7 - Views\Home\Edit.aspx**</span></span>

[!code-aspx[Main](iteration-1-create-the-application-cs/samples/sample7.aspx)]

## <a name="deleting-contacts"></a><span data-ttu-id="86b7e-393">Suppression de contacts</span><span class="sxs-lookup"><span data-stu-id="86b7e-393">Deleting Contacts</span></span>

<span data-ttu-id="86b7e-394">Si vous souhaitez supprimer des contacts, vous devez ajouter deux actions de suppression () à la classe de contrôleur d’hébergement.</span><span class="sxs-lookup"><span data-stu-id="86b7e-394">If you want to delete contacts then you need to add two Delete() actions to the Home controller class.</span></span> <span data-ttu-id="86b7e-395">La première action de suppression () affiche un formulaire de confirmation de suppression.</span><span class="sxs-lookup"><span data-stu-id="86b7e-395">The first Delete() action displays a delete confirmation form.</span></span> <span data-ttu-id="86b7e-396">La deuxième action DELETE () effectue la suppression réelle.</span><span class="sxs-lookup"><span data-stu-id="86b7e-396">The second Delete() action performs the actual delete.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="86b7e-397">Plus tard, dans #7 d’itération, nous modifions le gestionnaire de contacts afin qu’il prenne en charge une seule étape de la suppression Ajax.</span><span class="sxs-lookup"><span data-stu-id="86b7e-397">Later, in Iteration #7, we modify the Contact Manager so that it supports a one step Ajax delete.</span></span>

<span data-ttu-id="86b7e-398">Les deux nouvelles méthodes Delete () sont contenues dans la liste 8.</span><span class="sxs-lookup"><span data-stu-id="86b7e-398">The two new Delete() methods are contained in Listing 8.</span></span>

<span data-ttu-id="86b7e-399">**Liste 8-Controllers\HomeController.cs (méthodes Delete)**</span><span class="sxs-lookup"><span data-stu-id="86b7e-399">**Listing 8 - Controllers\HomeController.cs (Delete methods)**</span></span>

[!code-csharp[Main](iteration-1-create-the-application-cs/samples/sample8.cs)]

<span data-ttu-id="86b7e-400">La première méthode Delete () renvoie un formulaire de confirmation pour la suppression d’un enregistrement de contact de la base de données (voir Figure20).</span><span class="sxs-lookup"><span data-stu-id="86b7e-400">The first Delete() method returns a confirmation form for deleting a contact record from the database (see Figure20).</span></span> <span data-ttu-id="86b7e-401">La deuxième méthode Delete () effectue l’opération de suppression proprement dite sur la base de données.</span><span class="sxs-lookup"><span data-stu-id="86b7e-401">The second Delete() method performs the actual delete operation against the database.</span></span> <span data-ttu-id="86b7e-402">Une fois le contact d’origine récupéré de la base de données, les méthodes Entity Framework SupprimerObjet () et SaveChanges () sont appelées pour effectuer la suppression de la base de données.</span><span class="sxs-lookup"><span data-stu-id="86b7e-402">After the original contact has been retrieved from the database, the Entity Framework DeleteObject() and SaveChanges() methods are called to perform the database delete.</span></span>

<span data-ttu-id="86b7e-403">[![la boîte de dialogue Nouveau projet](iteration-1-create-the-application-cs/_static/image20.jpg)](iteration-1-create-the-application-cs/_static/image39.png)</span><span class="sxs-lookup"><span data-stu-id="86b7e-403">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image20.jpg)](iteration-1-create-the-application-cs/_static/image39.png)</span></span>

<span data-ttu-id="86b7e-404">**Figure 20**: vue de confirmation de la suppression ([cliquez pour afficher l’image en plein écran](iteration-1-create-the-application-cs/_static/image40.png))</span><span class="sxs-lookup"><span data-stu-id="86b7e-404">**Figure 20**: The delete confirmation view ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image40.png))</span></span>

<span data-ttu-id="86b7e-405">Nous devons modifier la vue index afin qu’elle contienne un lien permettant de supprimer les enregistrements de contact (voir figure 21).</span><span class="sxs-lookup"><span data-stu-id="86b7e-405">We need to modify the Index view so that it contains a link for deleting contact records (see Figure 21).</span></span> <span data-ttu-id="86b7e-406">Vous devez ajouter le code suivant à la même cellule de table qui contient le lien modifier :</span><span class="sxs-lookup"><span data-stu-id="86b7e-406">You need to add the following code to the same table cell that contains the Edit link:</span></span>

<span data-ttu-id="86b7e-407">Html. ActionLink ({ID = élément. ID})%&gt;</span><span class="sxs-lookup"><span data-stu-id="86b7e-407">Html.ActionLink( { id=item.Id }) %&gt;</span></span>

<span data-ttu-id="86b7e-408">[![la boîte de dialogue Nouveau projet](iteration-1-create-the-application-cs/_static/image21.jpg)](iteration-1-create-the-application-cs/_static/image41.png)</span><span class="sxs-lookup"><span data-stu-id="86b7e-408">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image21.jpg)](iteration-1-create-the-application-cs/_static/image41.png)</span></span>

<span data-ttu-id="86b7e-409">**Figure 21**: vue d’index avec modification du lien ([cliquez pour afficher l’image en taille réelle](iteration-1-create-the-application-cs/_static/image42.png))</span><span class="sxs-lookup"><span data-stu-id="86b7e-409">**Figure 21**: Index view with Edit link ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image42.png))</span></span>

<span data-ttu-id="86b7e-410">Ensuite, nous devons créer la vue de confirmation de suppression.</span><span class="sxs-lookup"><span data-stu-id="86b7e-410">Next, we need to create the delete confirmation view.</span></span> <span data-ttu-id="86b7e-411">Cliquez avec le bouton droit sur la méthode Delete () dans la classe du contrôleur d’hébergement et sélectionnez l’option de menu Ajouter une vue.</span><span class="sxs-lookup"><span data-stu-id="86b7e-411">Right-click the Delete() method in the Home controller class and select the menu option Add View.</span></span> <span data-ttu-id="86b7e-412">La boîte de dialogue Ajouter une vue s’affiche (voir figure 22).</span><span class="sxs-lookup"><span data-stu-id="86b7e-412">The Add View dialog appears (see Figure 22).</span></span>

<span data-ttu-id="86b7e-413">Contrairement à ce qui se passe dans le cas des vues List, Create et Edit, la boîte de dialogue Ajouter une vue ne contient pas d’option permettant de créer une vue Delete.</span><span class="sxs-lookup"><span data-stu-id="86b7e-413">Unlike in the case of the List, Create, and Edit views, the Add View dialog does not contain an option to create a Delete view.</span></span> <span data-ttu-id="86b7e-414">Au lieu de cela, sélectionnez la classe de données **ContactManager. Models. contact** et le contenu de la vue **vide** .</span><span class="sxs-lookup"><span data-stu-id="86b7e-414">Instead, select the **ContactManager.Models.Contact** data class and the **Empty** view content.</span></span> <span data-ttu-id="86b7e-415">Si vous sélectionnez l’option Afficher le contenu vide, nous vous demanderons de créer la vue nous-même.</span><span class="sxs-lookup"><span data-stu-id="86b7e-415">Selecting the Empty view content option will require us to create the view ourselves.</span></span>

<span data-ttu-id="86b7e-416">[![la boîte de dialogue Nouveau projet](iteration-1-create-the-application-cs/_static/image22.jpg)](iteration-1-create-the-application-cs/_static/image43.png)</span><span class="sxs-lookup"><span data-stu-id="86b7e-416">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image22.jpg)](iteration-1-create-the-application-cs/_static/image43.png)</span></span>

<span data-ttu-id="86b7e-417">**Figure 22**: ajout de la vue de confirmation de la suppression ([cliquez pour afficher l’image en taille réelle](iteration-1-create-the-application-cs/_static/image44.png))</span><span class="sxs-lookup"><span data-stu-id="86b7e-417">**Figure 22**: Adding the delete confirmation view ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image44.png))</span></span>

<span data-ttu-id="86b7e-418">Le contenu de la vue Delete est contenu dans la liste 9.</span><span class="sxs-lookup"><span data-stu-id="86b7e-418">The content of the Delete view is contained in Listing 9.</span></span> <span data-ttu-id="86b7e-419">Cette vue contient un formulaire qui confirme si un contact particulier doit être supprimé (voir figure 21).</span><span class="sxs-lookup"><span data-stu-id="86b7e-419">This view contains a form that confirms whether or not a particular contact should be deleted (see Figure 21).</span></span>

<span data-ttu-id="86b7e-420">**Liste 9-Views\Home\Delete.aspx**</span><span class="sxs-lookup"><span data-stu-id="86b7e-420">**Listing 9 - Views\Home\Delete.aspx**</span></span>

[!code-aspx[Main](iteration-1-create-the-application-cs/samples/sample9.aspx)]

## <a name="changing-the-name-of-the-default-controller"></a><span data-ttu-id="86b7e-421">Modification du nom du contrôleur par défaut</span><span class="sxs-lookup"><span data-stu-id="86b7e-421">Changing the Name of the Default Controller</span></span>

<span data-ttu-id="86b7e-422">Il se peut que le nom de notre classe de contrôleur pour l’utilisation des contacts soit nommé la classe HomeController.</span><span class="sxs-lookup"><span data-stu-id="86b7e-422">It might bother you that the name of our controller class for working with contacts is named the HomeController class.</span></span> <span data-ttu-id="86b7e-423">Le contrôleur ne doit-il pas être nommé ContactController ?</span><span class="sxs-lookup"><span data-stu-id="86b7e-423">Shouldn't the controller be named ContactController?</span></span>

<span data-ttu-id="86b7e-424">Ce problème est assez facile à corriger.</span><span class="sxs-lookup"><span data-stu-id="86b7e-424">This issue is easy enough to fix.</span></span> <span data-ttu-id="86b7e-425">Tout d’abord, nous devons Refactoriser le nom du contrôleur d’hébergement.</span><span class="sxs-lookup"><span data-stu-id="86b7e-425">First, we need to refactor the name of the Home controller.</span></span> <span data-ttu-id="86b7e-426">Ouvrez la classe HomeController dans l’éditeur de Visual Studio Code, cliquez avec le bouton droit sur le nom de la classe et sélectionnez l’option de menu **Refactoriser, renommer**.</span><span class="sxs-lookup"><span data-stu-id="86b7e-426">Open the HomeController class in the Visual Studio Code Editor, right click the name of the class and select the menu option **Refactor, Rename**.</span></span> <span data-ttu-id="86b7e-427">La sélection de cette option de menu ouvre la boîte de dialogue Renommer.</span><span class="sxs-lookup"><span data-stu-id="86b7e-427">Selecting this menu option opens the Rename dialog.</span></span>

<span data-ttu-id="86b7e-428">[![la boîte de dialogue Nouveau projet](iteration-1-create-the-application-cs/_static/image23.jpg)](iteration-1-create-the-application-cs/_static/image45.png)</span><span class="sxs-lookup"><span data-stu-id="86b7e-428">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image23.jpg)](iteration-1-create-the-application-cs/_static/image45.png)</span></span>

<span data-ttu-id="86b7e-429">**Figure 23**: refactorisation d’un nom de contrôleur ([cliquez pour afficher l’image en taille réelle](iteration-1-create-the-application-cs/_static/image46.png))</span><span class="sxs-lookup"><span data-stu-id="86b7e-429">**Figure 23**: Refactoring a controller name ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image46.png))</span></span>

<span data-ttu-id="86b7e-430">[![la boîte de dialogue Nouveau projet](iteration-1-create-the-application-cs/_static/image24.jpg)](iteration-1-create-the-application-cs/_static/image47.png)</span><span class="sxs-lookup"><span data-stu-id="86b7e-430">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image24.jpg)](iteration-1-create-the-application-cs/_static/image47.png)</span></span>

<span data-ttu-id="86b7e-431">**Figure 24**: utilisation de la boîte de dialogue Renommer ([cliquez pour afficher l’image en taille réelle](iteration-1-create-the-application-cs/_static/image48.png))</span><span class="sxs-lookup"><span data-stu-id="86b7e-431">**Figure 24**: Using the Rename dialog ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image48.png))</span></span>

<span data-ttu-id="86b7e-432">Si vous renommez votre classe de contrôleur, Visual Studio met également à jour le nom du dossier dans le dossier views.</span><span class="sxs-lookup"><span data-stu-id="86b7e-432">If you rename your controller class, Visual Studio will update the name of the folder in the Views folder as well.</span></span> <span data-ttu-id="86b7e-433">Visual Studio renomme le dossier \Views\Home dans le dossier \Views\Contact</span><span class="sxs-lookup"><span data-stu-id="86b7e-433">Visual Studio will rename the \Views\Home folder to the \Views\Contact folder.</span></span>

<span data-ttu-id="86b7e-434">Une fois cette modification apportée, votre application n’a plus de contrôleur d’hébergement.</span><span class="sxs-lookup"><span data-stu-id="86b7e-434">After you make this change, your application will no longer have a Home controller.</span></span> <span data-ttu-id="86b7e-435">Lorsque vous exécutez votre application, vous obtenez la page d’erreur dans la figure 25.</span><span class="sxs-lookup"><span data-stu-id="86b7e-435">When you run your application, you'll get the error page in Figure 25.</span></span>

<span data-ttu-id="86b7e-436">[![la boîte de dialogue Nouveau projet](iteration-1-create-the-application-cs/_static/image25.jpg)](iteration-1-create-the-application-cs/_static/image49.png)</span><span class="sxs-lookup"><span data-stu-id="86b7e-436">[![The New Project dialog box](iteration-1-create-the-application-cs/_static/image25.jpg)](iteration-1-create-the-application-cs/_static/image49.png)</span></span>

<span data-ttu-id="86b7e-437">**Figure 25**: aucun contrôleur par défaut ([cliquez pour afficher l’image en taille réelle](iteration-1-create-the-application-cs/_static/image50.png))</span><span class="sxs-lookup"><span data-stu-id="86b7e-437">**Figure 25**: No default controller ([Click to view full-size image](iteration-1-create-the-application-cs/_static/image50.png))</span></span>

<span data-ttu-id="86b7e-438">Nous devons mettre à jour l’itinéraire par défaut dans le fichier global. asax pour utiliser le contrôleur de contact au lieu du contrôleur d’hébergement.</span><span class="sxs-lookup"><span data-stu-id="86b7e-438">We need to update the default route in the Global.asax file to use the Contact controller instead of the Home controller.</span></span> <span data-ttu-id="86b7e-439">Ouvrez le fichier global. asax et modifiez le contrôleur par défaut utilisé par l’itinéraire par défaut (voir le Listing 10).</span><span class="sxs-lookup"><span data-stu-id="86b7e-439">Open the Global.asax file and modify the default controller used by the default route (see Listing 10).</span></span>

<span data-ttu-id="86b7e-440">**Liste 10-Global.asax.cs**</span><span class="sxs-lookup"><span data-stu-id="86b7e-440">**Listing 10 - Global.asax.cs**</span></span>

[!code-csharp[Main](iteration-1-create-the-application-cs/samples/sample10.cs)]

<span data-ttu-id="86b7e-441">Une fois ces modifications effectuées, le gestionnaire de contacts s’exécutera correctement.</span><span class="sxs-lookup"><span data-stu-id="86b7e-441">After you make these changes, the Contact Manager will run correctly.</span></span> <span data-ttu-id="86b7e-442">À présent, il utilise la classe de contrôleur de contact comme contrôleur par défaut.</span><span class="sxs-lookup"><span data-stu-id="86b7e-442">Now, it will use the Contact controller class as the default controller.</span></span>

## <a name="summary"></a><span data-ttu-id="86b7e-443">Récapitulatif</span><span class="sxs-lookup"><span data-stu-id="86b7e-443">Summary</span></span>

<span data-ttu-id="86b7e-444">Dans cette première itération, nous avons créé une application de gestionnaire de contacts de base de la manière la plus rapide possible.</span><span class="sxs-lookup"><span data-stu-id="86b7e-444">In this first iteration, we created a basic Contact Manager application in the fastest way possible.</span></span> <span data-ttu-id="86b7e-445">Nous avons tiré parti de Visual Studio pour générer automatiquement le code initial de nos contrôleurs et vues.</span><span class="sxs-lookup"><span data-stu-id="86b7e-445">We took advantage of Visual Studio to generate the initial code for our controllers and views automatically.</span></span> <span data-ttu-id="86b7e-446">Nous avons également tiré parti de la Entity Framework pour générer automatiquement nos classes de modèle de base de données.</span><span class="sxs-lookup"><span data-stu-id="86b7e-446">We also took advantage of the Entity Framework to generate our database model classes automatically.</span></span>

<span data-ttu-id="86b7e-447">Actuellement, nous pouvons répertorier, créer, modifier et supprimer des enregistrements de contact à l’aide de l’application de gestionnaire de contacts.</span><span class="sxs-lookup"><span data-stu-id="86b7e-447">Currently, we can list, create, edit, and delete contact records with the Contact Manager application.</span></span> <span data-ttu-id="86b7e-448">En d’autres termes, nous pouvons effectuer toutes les opérations de base de données requises par une application Web basée sur la base de données.</span><span class="sxs-lookup"><span data-stu-id="86b7e-448">In other words, we can perform all of the basic database operations required by a database-driven web application.</span></span>

<span data-ttu-id="86b7e-449">Malheureusement, notre application rencontre des problèmes.</span><span class="sxs-lookup"><span data-stu-id="86b7e-449">Unfortunately, our application has some problems.</span></span> <span data-ttu-id="86b7e-450">Tout d’abord, j’hésite à admettre cela, l’application du gestionnaire de contacts n’est pas l’application la plus intéressante.</span><span class="sxs-lookup"><span data-stu-id="86b7e-450">First and I hesitate to admit this, the Contact Manager application is not the most attractive application.</span></span> <span data-ttu-id="86b7e-451">Un travail de conception est nécessaire.</span><span class="sxs-lookup"><span data-stu-id="86b7e-451">It needs some design work.</span></span> <span data-ttu-id="86b7e-452">Dans l’itération suivante, nous allons voir comment vous pouvez modifier la page maître et la feuille de style en cascade par défaut pour améliorer l’apparence de l’application.</span><span class="sxs-lookup"><span data-stu-id="86b7e-452">In the next iteration, we'll look at how we can change the default view master page and cascading style sheet to improve the appearance of the application.</span></span>

<span data-ttu-id="86b7e-453">Deuxièmement, nous n’avons implémenté aucune validation de formulaire.</span><span class="sxs-lookup"><span data-stu-id="86b7e-453">Second, we have not implemented any form validation.</span></span> <span data-ttu-id="86b7e-454">Par exemple, rien ne vous empêche de soumettre le formulaire créer un contact sans entrer de valeurs pour les champs de formulaire.</span><span class="sxs-lookup"><span data-stu-id="86b7e-454">For example, there is nothing to prevent you from submitting the Create contact form without entering values for any of the form fields.</span></span> <span data-ttu-id="86b7e-455">En outre, vous pouvez entrer des numéros de téléphone et des adresses de messagerie non valides.</span><span class="sxs-lookup"><span data-stu-id="86b7e-455">Furthermore, you can enter invalid phone numbers and email addresses.</span></span> <span data-ttu-id="86b7e-456">Nous commençons à aborder le problème de la validation de formulaire dans l' #3 des itérations.</span><span class="sxs-lookup"><span data-stu-id="86b7e-456">We start to tackle the problem of form validation in iteration #3.</span></span>

<span data-ttu-id="86b7e-457">Enfin, et plus important encore, l’itération actuelle de l’application du gestionnaire de contacts ne peut pas être facilement modifiée ou gérée.</span><span class="sxs-lookup"><span data-stu-id="86b7e-457">Finally, and most importantly, the current iteration of the Contact Manager application cannot be easily modified or maintained.</span></span> <span data-ttu-id="86b7e-458">Par exemple, la logique d’accès à la base de données est intégrée aux actions du contrôleur.</span><span class="sxs-lookup"><span data-stu-id="86b7e-458">For example, the database access logic is baked right into the controller actions.</span></span> <span data-ttu-id="86b7e-459">Cela signifie que nous ne pouvons pas modifier notre code d’accès aux données sans modifier nos contrôleurs.</span><span class="sxs-lookup"><span data-stu-id="86b7e-459">This means that we cannot modify our data access code without modifying our controllers.</span></span> <span data-ttu-id="86b7e-460">Dans les itérations ultérieures, nous explorons les modèles de conception de logiciels que nous pouvons implémenter pour améliorer la résistance du gestionnaire de contacts à la modification.</span><span class="sxs-lookup"><span data-stu-id="86b7e-460">In later iterations, we explore software design patterns that we can implement to make the Contact Manager more resilient to change.</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="86b7e-461">Next</span><span class="sxs-lookup"><span data-stu-id="86b7e-461">Next</span></span>](iteration-2-make-the-application-look-nice-cs.md)

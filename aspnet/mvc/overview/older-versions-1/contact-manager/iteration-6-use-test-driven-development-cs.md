---
uid: mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-cs
title: 'Itération #6 : utiliser le développement piloté par test (c#) | Microsoft Docs'
author: microsoft
description: Dans cette itération sixième, nous ajoutons les nouvelles fonctionnalités à notre application en écrivant des tests unitaires tout d’abord et écrire du code pour les tests unitaires. Dans cette itération,...
ms.author: riande
ms.date: 02/20/2009
ms.assetid: 013c3c26-7dc3-41d1-8064-f233c86008b5
msc.legacyurl: /mvc/overview/older-versions-1/contact-manager/iteration-6-use-test-driven-development-cs
msc.type: authoredcontent
ms.openlocfilehash: 94885984ebad90523369dcf5771d0f77a753008f
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 04/17/2019
ms.locfileid: "59405662"
---
# <a name="iteration-6--use-test-driven-development-c"></a><span data-ttu-id="68f4d-104">Itération #6 : utiliser le développement piloté par test (c#)</span><span class="sxs-lookup"><span data-stu-id="68f4d-104">Iteration #6 – Use test-driven development (C#)</span></span>

<span data-ttu-id="68f4d-105">by [Microsoft](https://github.com/microsoft)</span><span class="sxs-lookup"><span data-stu-id="68f4d-105">by [Microsoft](https://github.com/microsoft)</span></span>

[<span data-ttu-id="68f4d-106">Télécharger le Code</span><span class="sxs-lookup"><span data-stu-id="68f4d-106">Download Code</span></span>](iteration-6-use-test-driven-development-cs/_static/contactmanager_6_cs1.zip)

> <span data-ttu-id="68f4d-107">Dans cette itération sixième, nous ajoutons les nouvelles fonctionnalités à notre application en écrivant des tests unitaires tout d’abord et écrire du code pour les tests unitaires.</span><span class="sxs-lookup"><span data-stu-id="68f4d-107">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="68f4d-108">Dans cette itération, nous ajouter des groupes de contacts.</span><span class="sxs-lookup"><span data-stu-id="68f4d-108">In this iteration, we add contact groups.</span></span>


## <a name="building-a-contact-management-aspnet-mvc-application-c"></a><span data-ttu-id="68f4d-109">Création d’une Application ASP.NET MVC de gestion des contacts (c#)</span><span class="sxs-lookup"><span data-stu-id="68f4d-109">Building a Contact Management ASP.NET MVC Application (C#)</span></span>
  

<span data-ttu-id="68f4d-110">Dans cette série de didacticiels, nous créer une application de gestion des contacts entière à partir du début à la fin.</span><span class="sxs-lookup"><span data-stu-id="68f4d-110">In this series of tutorials, we build an entire Contact Management application from start to finish.</span></span> <span data-ttu-id="68f4d-111">L’application Gestionnaire de Contact permet vous permettent de stocker les informations de contact (noms, numéros de téléphone et adresses de messagerie) pour obtenir la liste de personnes.</span><span class="sxs-lookup"><span data-stu-id="68f4d-111">The Contact Manager application enables you to store contact information - names, phone numbers and email addresses - for a list of people.</span></span>

<span data-ttu-id="68f4d-112">Nous générer l’application sur de multiples itérations.</span><span class="sxs-lookup"><span data-stu-id="68f4d-112">We build the application over multiple iterations.</span></span> <span data-ttu-id="68f4d-113">Avec chaque itération, nous améliorer progressivement l’application.</span><span class="sxs-lookup"><span data-stu-id="68f4d-113">With each iteration, we gradually improve the application.</span></span> <span data-ttu-id="68f4d-114">L’objectif de cette approche à plusieurs itération consiste à vous permettre de comprendre la raison de chaque modification.</span><span class="sxs-lookup"><span data-stu-id="68f4d-114">The goal of this multiple iteration approach is to enable you to understand the reason for each change.</span></span>

- <span data-ttu-id="68f4d-115">Itération #1 : créer l’application.</span><span class="sxs-lookup"><span data-stu-id="68f4d-115">Iteration #1 - Create the application.</span></span> <span data-ttu-id="68f4d-116">Dans la première itération, nous créons le Gestionnaire de Contact de la façon la plus simple possible.</span><span class="sxs-lookup"><span data-stu-id="68f4d-116">In the first iteration, we create the Contact Manager in the simplest way possible.</span></span> <span data-ttu-id="68f4d-117">Nous ajoutons la prise en charge pour les opérations de base de données : Créer, lire, mettre à jour et supprimer (CRUD).</span><span class="sxs-lookup"><span data-stu-id="68f4d-117">We add support for basic database operations: Create, Read, Update, and Delete (CRUD).</span></span>

- <span data-ttu-id="68f4d-118">Itération #2 : donner l’application une apparence intéressante.</span><span class="sxs-lookup"><span data-stu-id="68f4d-118">Iteration #2 - Make the application look nice.</span></span> <span data-ttu-id="68f4d-119">Dans cette itération, nous améliorer l’apparence de l’application en modifiant la valeur par défaut de page maître de vue ASP.NET MVC et en cascade de feuille de style.</span><span class="sxs-lookup"><span data-stu-id="68f4d-119">In this iteration, we improve the appearance of the application by modifying the default ASP.NET MVC view master page and cascading style sheet.</span></span>

- <span data-ttu-id="68f4d-120">Itération #3 - Ajouter une validation de formulaire.</span><span class="sxs-lookup"><span data-stu-id="68f4d-120">Iteration #3 - Add form validation.</span></span> <span data-ttu-id="68f4d-121">Dans la troisième itération, nous ajouter la validation de formulaire de base.</span><span class="sxs-lookup"><span data-stu-id="68f4d-121">In the third iteration, we add basic form validation.</span></span> <span data-ttu-id="68f4d-122">Nous empêcher des personnes à partir de l’envoi d’un formulaire sans compléter les champs obligatoires.</span><span class="sxs-lookup"><span data-stu-id="68f4d-122">We prevent people from submitting a form without completing required form fields.</span></span> <span data-ttu-id="68f4d-123">Nous avons également valider que les adresses de messagerie et les numéros de téléphone.</span><span class="sxs-lookup"><span data-stu-id="68f4d-123">We also validate email addresses and phone numbers.</span></span>

- <span data-ttu-id="68f4d-124">Itération #4 : rendre l’application faiblement couplée.</span><span class="sxs-lookup"><span data-stu-id="68f4d-124">Iteration #4 - Make the application loosely coupled.</span></span> <span data-ttu-id="68f4d-125">Dans ce quatrième itération, nous profitons de plusieurs modèles de conception de logiciels pour le rendre plus facile à gérer et modifier l’application Gestionnaire de contacts.</span><span class="sxs-lookup"><span data-stu-id="68f4d-125">In this fourth iteration, we take advantage of several software design patterns to make it easier to maintain and modify the Contact Manager application.</span></span> <span data-ttu-id="68f4d-126">Par exemple, nous refactoriser notre application pour utiliser le modèle dépôt et le modèle d’Injection de dépendance.</span><span class="sxs-lookup"><span data-stu-id="68f4d-126">For example, we refactor our application to use the Repository pattern and the Dependency Injection pattern.</span></span>

- <span data-ttu-id="68f4d-127">Itération #5 - créer des tests unitaires.</span><span class="sxs-lookup"><span data-stu-id="68f4d-127">Iteration #5 - Create unit tests.</span></span> <span data-ttu-id="68f4d-128">Dans la cinquième itération, nous faciliter notre application mettre à jour et modifier en ajoutant des tests unitaires.</span><span class="sxs-lookup"><span data-stu-id="68f4d-128">In the fifth iteration, we make our application easier to maintain and modify by adding unit tests.</span></span> <span data-ttu-id="68f4d-129">Nous simuler nos classes de modèle de données et générer des tests unitaires pour nos contrôleurs et la logique de validation.</span><span class="sxs-lookup"><span data-stu-id="68f4d-129">We mock our data model classes and build unit tests for our controllers and validation logic.</span></span>

- <span data-ttu-id="68f4d-130">Itération #6 - utiliser le développement piloté par test.</span><span class="sxs-lookup"><span data-stu-id="68f4d-130">Iteration #6 - Use test-driven development.</span></span> <span data-ttu-id="68f4d-131">Dans cette itération sixième, nous ajoutons les nouvelles fonctionnalités à notre application en écrivant des tests unitaires tout d’abord et écrire du code pour les tests unitaires.</span><span class="sxs-lookup"><span data-stu-id="68f4d-131">In this sixth iteration, we add new functionality to our application by writing unit tests first and writing code against the unit tests.</span></span> <span data-ttu-id="68f4d-132">Dans cette itération, nous ajouter des groupes de contacts.</span><span class="sxs-lookup"><span data-stu-id="68f4d-132">In this iteration, we add contact groups.</span></span>

- <span data-ttu-id="68f4d-133">Itération #7 - ajouter des fonctionnalités Ajax.</span><span class="sxs-lookup"><span data-stu-id="68f4d-133">Iteration #7 - Add Ajax functionality.</span></span> <span data-ttu-id="68f4d-134">Dans l’itération septième, nous améliorer la réactivité et les performances de notre application en ajoutant la prise en charge d’Ajax.</span><span class="sxs-lookup"><span data-stu-id="68f4d-134">In the seventh iteration, we improve the responsiveness and performance of our application by adding support for Ajax.</span></span>

## <a name="this-iteration"></a><span data-ttu-id="68f4d-135">Cette itération</span><span class="sxs-lookup"><span data-stu-id="68f4d-135">This Iteration</span></span>

<span data-ttu-id="68f4d-136">Dans l’itération précédente de l’application Gestionnaire de contacts, nous avons créé des tests unitaires afin de fournir un filet de sécurité pour notre code.</span><span class="sxs-lookup"><span data-stu-id="68f4d-136">In the previous iteration of the Contact Manager application, we created unit tests to provide a safety net for our code.</span></span> <span data-ttu-id="68f4d-137">La motivation pour créer les tests unitaires consistait à améliorer la résilience pour changer de notre code.</span><span class="sxs-lookup"><span data-stu-id="68f4d-137">The motivation for creating the unit tests was to make our code more resilient to change.</span></span> <span data-ttu-id="68f4d-138">Avec des tests unitaires en place, nous pouvons heureusement apporte aucune modification à notre code et savez immédiatement si nous avons altéré les fonctionnalités existantes.</span><span class="sxs-lookup"><span data-stu-id="68f4d-138">With unit tests in place, we can happily make any change to our code and immediately know whether we have broken existing functionality.</span></span>

<span data-ttu-id="68f4d-139">Dans cette itération, nous utilisons des tests unitaires pour un objectif entièrement différent.</span><span class="sxs-lookup"><span data-stu-id="68f4d-139">In this iteration, we use unit tests for an entirely different purpose.</span></span> <span data-ttu-id="68f4d-140">Dans cette itération, nous utilisons des tests unitaires dans le cadre d’une philosophie de conception d’application appelé *développement piloté par test*.</span><span class="sxs-lookup"><span data-stu-id="68f4d-140">In this iteration, we use unit tests as part of an application design philosophy called *test-driven development*.</span></span> <span data-ttu-id="68f4d-141">Lorsque vous entraîner le développement piloté par test, vous écrivez tout d’abord des tests et ensuite écrivez du code pour les tests.</span><span class="sxs-lookup"><span data-stu-id="68f4d-141">When you practice test-driven development, you write tests first and then write code against the tests.</span></span>

<span data-ttu-id="68f4d-142">Plus précisément, voie à double développement piloté par test, il existe trois étapes que vous effectuez lors de la création de code (rouge / vert/refactoriser) :</span><span class="sxs-lookup"><span data-stu-id="68f4d-142">More precisely, when practicing test-driven development, there are three steps that you complete when creating code (Red/ Green/Refactor):</span></span>

1. <span data-ttu-id="68f4d-143">Écrire un test unitaire qui tombe en panne (rouge)</span><span class="sxs-lookup"><span data-stu-id="68f4d-143">Write a unit test that fails (Red)</span></span>
2. <span data-ttu-id="68f4d-144">Écrire du code qui réussit le test unitaire (vert)</span><span class="sxs-lookup"><span data-stu-id="68f4d-144">Write code that passes the unit test (Green)</span></span>
3. <span data-ttu-id="68f4d-145">Refactorisez votre code (refactorisation)</span><span class="sxs-lookup"><span data-stu-id="68f4d-145">Refactor your code (Refactor)</span></span>

<span data-ttu-id="68f4d-146">Vous écrivez d’abord, le test unitaire.</span><span class="sxs-lookup"><span data-stu-id="68f4d-146">First, you write the unit test.</span></span> <span data-ttu-id="68f4d-147">Le test unitaire doive exprimer votre intention pour que votre code se comporte.</span><span class="sxs-lookup"><span data-stu-id="68f4d-147">The unit test should express your intention for how you expect your code to behave.</span></span> <span data-ttu-id="68f4d-148">Lorsque vous créez tout d’abord le test unitaire, le test unitaire doit échouer.</span><span class="sxs-lookup"><span data-stu-id="68f4d-148">When you first create the unit test, the unit test should fail.</span></span> <span data-ttu-id="68f4d-149">Le test échoue parce que vous n’avez pas encore écrit n’importe quel code d’application qui satisfait au test.</span><span class="sxs-lookup"><span data-stu-id="68f4d-149">The test should fail because you have not yet written any application code that satisfies the test.</span></span>

<span data-ttu-id="68f4d-150">Ensuite, vous écrivez juste assez de code dans l’ordre pour le test unitaire à passer.</span><span class="sxs-lookup"><span data-stu-id="68f4d-150">Next, you write just enough code in order for the unit test to pass.</span></span> <span data-ttu-id="68f4d-151">L’objectif est d’écrire le code de la manière laziest, sloppiest et plus rapide possible.</span><span class="sxs-lookup"><span data-stu-id="68f4d-151">The goal is to write the code in the laziest, sloppiest and fastest possible way.</span></span> <span data-ttu-id="68f4d-152">Vous devez perdez pas de temps à réfléchir sur l’architecture de votre application.</span><span class="sxs-lookup"><span data-stu-id="68f4d-152">You should not waste time thinking about the architecture of your application.</span></span> <span data-ttu-id="68f4d-153">Au lieu de cela, vous devez vous concentrer sur l’écriture de la quantité minimale de code nécessaire pour répondre à l’intention exprimée par le test unitaire.</span><span class="sxs-lookup"><span data-stu-id="68f4d-153">Instead, you should focus on writing the minimal amount of code necessary to satisfy the intention expressed by the unit test.</span></span>

<span data-ttu-id="68f4d-154">Enfin, une fois que vous avez écrit suffisamment de code, vous pouvez prendre du recul et prendre en compte l’architecture globale de votre application.</span><span class="sxs-lookup"><span data-stu-id="68f4d-154">Finally, after you have written enough code, you can step back and consider the overall architecture of your application.</span></span> <span data-ttu-id="68f4d-155">Dans cette étape, vous (refactorisation) le réécrire votre code en tirant parti de la conception logicielle modèles--tels que le modèle de référentiel--afin que votre code est plus facile à gérer.</span><span class="sxs-lookup"><span data-stu-id="68f4d-155">In this step, you rewrite (refactor) your code by taking advantage of software design patterns -- such as the repository pattern -- so that your code is more maintainable.</span></span> <span data-ttu-id="68f4d-156">Vous pouvez crainte réécrire votre code dans cette étape, car votre code est couverte par les tests unitaires.</span><span class="sxs-lookup"><span data-stu-id="68f4d-156">You can fearlessly rewrite your code in this step because your code is covered by unit tests.</span></span>

<span data-ttu-id="68f4d-157">Il existe de nombreux avantages qui résultent de pratiquer le développement piloté par test.</span><span class="sxs-lookup"><span data-stu-id="68f4d-157">There are many benefits that result from practicing test-driven development.</span></span> <span data-ttu-id="68f4d-158">Tout d’abord, piloté par test développement vous oblige à vous concentrer sur le code qui doit réellement être écrit.</span><span class="sxs-lookup"><span data-stu-id="68f4d-158">First, test-driven development forces you to focus on code that actually needs to be written.</span></span> <span data-ttu-id="68f4d-159">Étant donné que vous avez le focus en permanence sur l’écriture juste assez de code pour passer un test particulier, vous ne pourrez pas dont y dans les plantes et l’écriture de grandes quantités de code que vous n’utiliserez jamais.</span><span class="sxs-lookup"><span data-stu-id="68f4d-159">Because you are constantly focused on just writing enough code to pass a particular test, you are prevented from wandering into the weeds and writing massive amounts of code that you will never use.</span></span>

<span data-ttu-id="68f4d-160">En second lieu, une méthodologie de conception « test en premier » vous oblige à écrire du code du point de vue de l’utilisation de votre code.</span><span class="sxs-lookup"><span data-stu-id="68f4d-160">Second, a "test first" design methodology forces you to write code from the perspective of how your code will be used.</span></span> <span data-ttu-id="68f4d-161">En d’autres termes, lorsque pratiquant développement piloté par test, vous en permanence écrivez vos tests à partir d’un point de vue utilisateur.</span><span class="sxs-lookup"><span data-stu-id="68f4d-161">In other words, when practicing test-driven development, you are constantly writing your tests from a user perspective.</span></span> <span data-ttu-id="68f4d-162">Par conséquent, développement piloté par test peut entraîner des API plus propres et plus compréhensibles.</span><span class="sxs-lookup"><span data-stu-id="68f4d-162">Therefore, test-driven development can result in cleaner and more understandable APIs.</span></span>

<span data-ttu-id="68f4d-163">Enfin, développement piloté par test vous oblige à écrire des tests unitaires dans le cadre du processus normal de l’écriture d’une application.</span><span class="sxs-lookup"><span data-stu-id="68f4d-163">Finally, test-driven development forces you to write unit tests as part of the normal process of writing an application.</span></span> <span data-ttu-id="68f4d-164">Lorsqu’une date d’échéance approche, test est généralement la première chose qui sort de la fenêtre.</span><span class="sxs-lookup"><span data-stu-id="68f4d-164">As a project deadline approaches, testing is typically the first thing that goes out the window.</span></span> <span data-ttu-id="68f4d-165">Lorsque votre partenaire de développement piloté par test, quant à eux, vous êtes plus susceptible d’être vertueux sur l’écriture de tests unitaires, car le développement piloté par test effectue des tests unitaires centrale pour le processus de création d’une application.</span><span class="sxs-lookup"><span data-stu-id="68f4d-165">When practicing test-driven development, on the other hand, you are more likely to be virtuous about writing unit tests because test-driven development makes unit tests central to the process of building an application.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="68f4d-166">Pour en savoir plus sur le développement piloté par test, je vous recommande de lire le livre de Michael Feathers **Working Effectively with Legacy Code**.</span><span class="sxs-lookup"><span data-stu-id="68f4d-166">To learn more about test-driven development, I recommend that you read Michael Feathers book **Working Effectively with Legacy Code**.</span></span>


<span data-ttu-id="68f4d-167">Dans cette itération, nous ajoutons une nouvelle fonctionnalité à notre application de gestionnaire de contacts.</span><span class="sxs-lookup"><span data-stu-id="68f4d-167">In this iteration, we add a new feature to our Contact Manager application.</span></span> <span data-ttu-id="68f4d-168">Nous ajoutons la prise en charge pour les groupes de Contact.</span><span class="sxs-lookup"><span data-stu-id="68f4d-168">We add support for Contact Groups.</span></span> <span data-ttu-id="68f4d-169">Vous pouvez utiliser des groupes de Contact pour organiser vos contacts en catégories telles que les entreprises et les groupes de Friend.</span><span class="sxs-lookup"><span data-stu-id="68f4d-169">You can use Contact Groups to organize your contacts into categories such as Business and Friend groups.</span></span>

<span data-ttu-id="68f4d-170">Nous allons ajouter cette nouvelle fonctionnalité à notre application en suivant un processus de développement piloté par test.</span><span class="sxs-lookup"><span data-stu-id="68f4d-170">We'll add this new functionality to our application by following a process of test-driven development.</span></span> <span data-ttu-id="68f4d-171">Nous allons écrire nos tests unitaires tout d’abord, et nous allons écrire tout notre code par rapport à ces tests.</span><span class="sxs-lookup"><span data-stu-id="68f4d-171">We'll write our unit tests first and we'll write all of our code against these tests.</span></span>

## <a name="what-gets-tested"></a><span data-ttu-id="68f4d-172">Ce qui est testé</span><span class="sxs-lookup"><span data-stu-id="68f4d-172">What Gets Tested</span></span>

<span data-ttu-id="68f4d-173">Comme expliqué dans l’itération précédente, en général, ne pas écrire des tests unitaires pour la logique d’accès aux données ou afficher logique.</span><span class="sxs-lookup"><span data-stu-id="68f4d-173">As we discussed in the previous iteration, you typically do not write unit tests for data access logic or view logic.</span></span> <span data-ttu-id="68f4d-174">Vous n t écrire des tests unitaires pour la logique d’accès aux données, car l’accès à une base de données est une opération relativement lente.</span><span class="sxs-lookup"><span data-stu-id="68f4d-174">You don t write unit tests for data access logic because accessing a database is a relatively slow operation.</span></span> <span data-ttu-id="68f4d-175">Vous n t écrire des tests unitaires pour la logique d’affichage, car l’accès à une vue nécessite mise en place d’un serveur web qui est une opération relativement lente.</span><span class="sxs-lookup"><span data-stu-id="68f4d-175">You don t write unit tests for view logic because accessing a view requires spinning up a web server which is a relatively slow operation.</span></span> <span data-ttu-id="68f4d-176">Vous ne devez pas écrire un test unitaire, sauf si le test peut être exécuté indéfiniment très rapide</span><span class="sxs-lookup"><span data-stu-id="68f4d-176">You shouldn't write a unit test unless the test can be executed over and over again very fast</span></span>

<span data-ttu-id="68f4d-177">Étant donné que le développement piloté par test est piloté par les tests unitaires, nous nous concentrons initialement sur l’écriture de contrôleur et la logique métier.</span><span class="sxs-lookup"><span data-stu-id="68f4d-177">Because test-driven development is driven by unit tests, we focus initially on writing controller and business logic.</span></span> <span data-ttu-id="68f4d-178">Nous Évitez de toucher la base de données ou des vues.</span><span class="sxs-lookup"><span data-stu-id="68f4d-178">We avoid touching the database or views.</span></span> <span data-ttu-id="68f4d-179">Nous ne modifier la base de données ou créer nos vues jusqu'à la fin de ce didacticiel.</span><span class="sxs-lookup"><span data-stu-id="68f4d-179">We won't modify the database or create our views until the very end of this tutorial.</span></span> <span data-ttu-id="68f4d-180">Nous commençons par ce qui peut être testé.</span><span class="sxs-lookup"><span data-stu-id="68f4d-180">We start with what can be tested.</span></span>

## <a name="creating-user-stories"></a><span data-ttu-id="68f4d-181">Création de récits utilisateur</span><span class="sxs-lookup"><span data-stu-id="68f4d-181">Creating User Stories</span></span>

<span data-ttu-id="68f4d-182">Voie à double développement piloté par test, toujours commencer par écrire un test.</span><span class="sxs-lookup"><span data-stu-id="68f4d-182">When practicing test-driven development, you always start by writing a test.</span></span> <span data-ttu-id="68f4d-183">Cela déclenche immédiatement la question : Comment savoir quel test d’écrire tout d’abord ?</span><span class="sxs-lookup"><span data-stu-id="68f4d-183">This immediately raises the question: How do you decide what test to write first?</span></span> <span data-ttu-id="68f4d-184">Pour répondre à cette question, vous devez écrire un ensemble de [ **récits utilisateur**](http://en.wikipedia.org/wiki/User_stories).</span><span class="sxs-lookup"><span data-stu-id="68f4d-184">To answer this question, you should write a set of [**user stories**](http://en.wikipedia.org/wiki/User_stories).</span></span>

<span data-ttu-id="68f4d-185">Un récit utilisateur est une très brève description de (généralement une phrase) d’une configuration logicielle requise.</span><span class="sxs-lookup"><span data-stu-id="68f4d-185">A user story is a very brief (usually one sentence) description of a software requirement.</span></span> <span data-ttu-id="68f4d-186">Il doit être une description non technique d’une spécification écrite à partir d’un point de vue utilisateur.</span><span class="sxs-lookup"><span data-stu-id="68f4d-186">It should be a non-technical description of a requirement written from a user perspective.</span></span>

<span data-ttu-id="68f4d-187">Voici l’ensemble des récits utilisateur qui décrivent les fonctionnalités requises par la nouvelle fonctionnalité de groupe de Contact de s :</span><span class="sxs-lookup"><span data-stu-id="68f4d-187">Here s the set of user stories that describe the features required by the new Contact Group functionality:</span></span>

1. <span data-ttu-id="68f4d-188">Utilisateur peut afficher une liste de groupes de contacts.</span><span class="sxs-lookup"><span data-stu-id="68f4d-188">User can view a list of contact groups.</span></span>
2. <span data-ttu-id="68f4d-189">Utilisateur peut créer un nouveau groupe de contact.</span><span class="sxs-lookup"><span data-stu-id="68f4d-189">User can create a new contact group.</span></span>
3. <span data-ttu-id="68f4d-190">Utilisateur peut supprimer un groupe de contact existant.</span><span class="sxs-lookup"><span data-stu-id="68f4d-190">User can delete an existing contact group.</span></span>
4. <span data-ttu-id="68f4d-191">Utilisateur peut sélectionner un groupe de contacts lors de la création d’un nouveau contact.</span><span class="sxs-lookup"><span data-stu-id="68f4d-191">User can select a contact group when creating a new contact.</span></span>
5. <span data-ttu-id="68f4d-192">Utilisateur peut sélectionner un groupe de contacts lors de la modification d’un contact existant.</span><span class="sxs-lookup"><span data-stu-id="68f4d-192">User can select a contact group when editing an existing contact.</span></span>
6. <span data-ttu-id="68f4d-193">Une liste de groupes de contact s’affiche dans la vue Index.</span><span class="sxs-lookup"><span data-stu-id="68f4d-193">A list of contact groups is displayed in the Index view.</span></span>
7. <span data-ttu-id="68f4d-194">Lorsqu’un utilisateur clique sur un groupe de contacts, une liste de contacts correspondants s’affiche.</span><span class="sxs-lookup"><span data-stu-id="68f4d-194">When a user clicks a contact group, a list of matching contacts is displayed.</span></span>

<span data-ttu-id="68f4d-195">Notez que cette liste de récits utilisateur est parfaitement compréhensible par le client.</span><span class="sxs-lookup"><span data-stu-id="68f4d-195">Notice that this list of user stories is completely understandable by a customer.</span></span> <span data-ttu-id="68f4d-196">Il n’existe aucune mention de détails d’implémentation technique.</span><span class="sxs-lookup"><span data-stu-id="68f4d-196">There is no mention of technical implementation details.</span></span>

<span data-ttu-id="68f4d-197">Lors du processus de génération de votre application, l’ensemble des récits utilisateur peut devenir plus affinée.</span><span class="sxs-lookup"><span data-stu-id="68f4d-197">While in the process of building your application, the set of user stories can become more refined.</span></span> <span data-ttu-id="68f4d-198">Vous risquez d’altérer un récit utilisateur en plusieurs récits (configuration requise).</span><span class="sxs-lookup"><span data-stu-id="68f4d-198">You might break a user story into multiple stories (requirements).</span></span> <span data-ttu-id="68f4d-199">Par exemple, vous pouvez décider que la création d’un nouveau groupe de contact doit impliquer validation.</span><span class="sxs-lookup"><span data-stu-id="68f4d-199">For example, you might decide that creating a new contact group should involve validation.</span></span> <span data-ttu-id="68f4d-200">Envoi d’un groupe sans nom de contact doit retourner une erreur de validation.</span><span class="sxs-lookup"><span data-stu-id="68f4d-200">Submitting a contact group without a name should return a validation error.</span></span>

<span data-ttu-id="68f4d-201">Après avoir créé une liste de récits utilisateur, vous êtes prêt à écrire votre premier test unitaire.</span><span class="sxs-lookup"><span data-stu-id="68f4d-201">After you create a list of user stories, you are ready to write your first unit test.</span></span> <span data-ttu-id="68f4d-202">Nous allons commencer en créant un test unitaire pour afficher la liste des groupes de contacts.</span><span class="sxs-lookup"><span data-stu-id="68f4d-202">We'll start by creating a unit test for viewing the list of contact groups.</span></span>

## <a name="listing-contact-groups"></a><span data-ttu-id="68f4d-203">Liste des groupes de contacts</span><span class="sxs-lookup"><span data-stu-id="68f4d-203">Listing Contact Groups</span></span>

<span data-ttu-id="68f4d-204">Notre première récit utilisateur est qu’un utilisateur doit être en mesure d’afficher une liste de groupes de contacts.</span><span class="sxs-lookup"><span data-stu-id="68f4d-204">Our first user story is that a user should be able to view a list of contact groups.</span></span> <span data-ttu-id="68f4d-205">Nous avons besoin exprimer ce scénario avec un test.</span><span class="sxs-lookup"><span data-stu-id="68f4d-205">We need to express this story with a test.</span></span>

<span data-ttu-id="68f4d-206">Créer un nouveau test unitaire en double-cliquant sur le dossier contrôleurs dans le projet ContactManager.Tests, en sélectionnant **ajouter, nouveau Test**et en sélectionnant le **de Test unitaire** modèle (voir Figure 1).</span><span class="sxs-lookup"><span data-stu-id="68f4d-206">Create a new unit test by right-clicking the Controllers folder in the ContactManager.Tests project, selecting **Add, New Test**, and selecting the **Unit Test** template (see Figure 1).</span></span> <span data-ttu-id="68f4d-207">Nom de la nouvelle unité GroupControllerTest.cs de test et cliquez sur le **OK** bouton.</span><span class="sxs-lookup"><span data-stu-id="68f4d-207">Name the new unit test GroupControllerTest.cs and click the **OK** button.</span></span>


<span data-ttu-id="68f4d-208">[![Ajout du test unitaire GroupControllerTest](iteration-6-use-test-driven-development-cs/_static/image1.jpg)](iteration-6-use-test-driven-development-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="68f4d-208">[![Adding the GroupControllerTest unit test](iteration-6-use-test-driven-development-cs/_static/image1.jpg)](iteration-6-use-test-driven-development-cs/_static/image1.png)</span></span>

<span data-ttu-id="68f4d-209">**Figure 01**: Ajout du test unitaire GroupControllerTest ([cliquez pour afficher l’image en taille réelle](iteration-6-use-test-driven-development-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="68f4d-209">**Figure 01**: Adding the GroupControllerTest unit test([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image2.png))</span></span>


<span data-ttu-id="68f4d-210">Notre premier test unitaire est contenue dans le Listing 1.</span><span class="sxs-lookup"><span data-stu-id="68f4d-210">Our first unit test is contained in Listing 1.</span></span> <span data-ttu-id="68f4d-211">Ce test vérifie que la méthode Index() du contrôleur de groupe renvoie un ensemble de groupes.</span><span class="sxs-lookup"><span data-stu-id="68f4d-211">This test verifies that the Index() method of the Group controller returns a set of Groups.</span></span> <span data-ttu-id="68f4d-212">Le test vérifie qu’une collection de groupes est retournée dans la vue données.</span><span class="sxs-lookup"><span data-stu-id="68f4d-212">The test verifies that a collection of Groups is returned in view data.</span></span>

<span data-ttu-id="68f4d-213">**Liste 1 - Controllers\GroupControllerTest.cs**</span><span class="sxs-lookup"><span data-stu-id="68f4d-213">**Listing 1 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample1.cs)]

<span data-ttu-id="68f4d-214">Lorsque vous tapez tout d’abord le code dans la liste de 1 dans Visual Studio, vous obtenez un grand nombre de lignes ondulées rouges.</span><span class="sxs-lookup"><span data-stu-id="68f4d-214">When you first type the code in Listing 1 in Visual Studio, you'll get a lot of red squiggly lines.</span></span> <span data-ttu-id="68f4d-215">Nous n’avons pas créé les classes GroupController ou un groupe.</span><span class="sxs-lookup"><span data-stu-id="68f4d-215">We have not created the GroupController or Group classes.</span></span>

<span data-ttu-id="68f4d-216">À ce stade, nous pouvons build même t notre application afin que nous t exécuter notre premier test unitaire.</span><span class="sxs-lookup"><span data-stu-id="68f4d-216">At this point, we can t even build our application so we can t execute our first unit test.</span></span> <span data-ttu-id="68f4d-217">S bon.</span><span class="sxs-lookup"><span data-stu-id="68f4d-217">That s good.</span></span> <span data-ttu-id="68f4d-218">Qui est comptabilisé comme un test ayant échoué.</span><span class="sxs-lookup"><span data-stu-id="68f4d-218">That counts as a failing test.</span></span> <span data-ttu-id="68f4d-219">Par conséquent, nous disposons désormais d’autorisation pour commencer à écrire le code d’application.</span><span class="sxs-lookup"><span data-stu-id="68f4d-219">Therefore, we now have permission to start writing application code.</span></span> <span data-ttu-id="68f4d-220">Nous devons écrire suffisamment de code pour exécuter notre test.</span><span class="sxs-lookup"><span data-stu-id="68f4d-220">We need to write enough code to execute our test.</span></span>

<span data-ttu-id="68f4d-221">La classe de contrôleur de groupe dans la liste 2 contient le strict minimum de code requis pour réussir le test unitaire.</span><span class="sxs-lookup"><span data-stu-id="68f4d-221">The Group controller class in Listing 2 contains the bare minimum of code required to pass the unit test.</span></span> <span data-ttu-id="68f4d-222">L’action Index() retourne une liste codée de manière statique de groupes (la classe du groupe est définie dans le Listing 3).</span><span class="sxs-lookup"><span data-stu-id="68f4d-222">The Index() action returns a statically coded list of Groups (the Group class is defined in Listing 3).</span></span>

<span data-ttu-id="68f4d-223">**Listing 2 - Controllers\GroupController.cs**</span><span class="sxs-lookup"><span data-stu-id="68f4d-223">**Listing 2 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample2.cs)]

<span data-ttu-id="68f4d-224">**Liste 3 - Models\Group.cs**</span><span class="sxs-lookup"><span data-stu-id="68f4d-224">**Listing 3 - Models\Group.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample3.cs)]

<span data-ttu-id="68f4d-225">Une fois que nous ajoutons les classes GroupController et groupe à notre projet, notre premier test unitaire se termine correctement (voir Figure 2).</span><span class="sxs-lookup"><span data-stu-id="68f4d-225">After we add the GroupController and Group classes to our project, our first unit test completes successfully (see Figure 2).</span></span> <span data-ttu-id="68f4d-226">Nous avons effectué le travail minimal requis pour réussir le test.</span><span class="sxs-lookup"><span data-stu-id="68f4d-226">We have done the minimum work required to pass the test.</span></span> <span data-ttu-id="68f4d-227">Il est temps de faire la fête.</span><span class="sxs-lookup"><span data-stu-id="68f4d-227">It is time to celebrate.</span></span>


<span data-ttu-id="68f4d-228">[![Succès !](iteration-6-use-test-driven-development-cs/_static/image2.jpg)](iteration-6-use-test-driven-development-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="68f4d-228">[![Success!](iteration-6-use-test-driven-development-cs/_static/image2.jpg)](iteration-6-use-test-driven-development-cs/_static/image3.png)</span></span>

<span data-ttu-id="68f4d-229">**Figure 02**: Succès ! ([Cliquez pour afficher l’image en taille réelle](iteration-6-use-test-driven-development-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="68f4d-229">**Figure 02**: Success!([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image4.png))</span></span>


## <a name="creating-contact-groups"></a><span data-ttu-id="68f4d-230">Création de groupes de Contact</span><span class="sxs-lookup"><span data-stu-id="68f4d-230">Creating Contact Groups</span></span>

<span data-ttu-id="68f4d-231">Nous pouvons maintenant passer à la deuxième récit utilisateur.</span><span class="sxs-lookup"><span data-stu-id="68f4d-231">Now we can move on to the second user story.</span></span> <span data-ttu-id="68f4d-232">Nous devons être en mesure de créer des groupes de contact.</span><span class="sxs-lookup"><span data-stu-id="68f4d-232">We need to be able to create new contact groups.</span></span> <span data-ttu-id="68f4d-233">Nous avons besoin exprimer cette intention avec un test.</span><span class="sxs-lookup"><span data-stu-id="68f4d-233">We need to express this intention with a test.</span></span>

<span data-ttu-id="68f4d-234">Le test sur la liste 4 vérifie que l’appel de la méthode avec un nouveau groupe ajoute le groupe à la liste des groupes retournés par la méthode Index() de Create().</span><span class="sxs-lookup"><span data-stu-id="68f4d-234">The test in Listing 4 verifies that calling the Create() method with a new Group adds the Group to the list of Groups returned by the Index() method.</span></span> <span data-ttu-id="68f4d-235">En d’autres termes, si je crée un nouveau groupe puis j’ai dois-je être en mesure de revenir au nouveau groupe dans la liste des groupes retournés par la méthode Index().</span><span class="sxs-lookup"><span data-stu-id="68f4d-235">In other words, if I create a new group then I should be able to get the new Group back from the list of Groups returned by the Index() method.</span></span>

<span data-ttu-id="68f4d-236">**Liste 4 - Controllers\GroupControllerTest.cs**</span><span class="sxs-lookup"><span data-stu-id="68f4d-236">**Listing 4 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample4.cs)]

<span data-ttu-id="68f4d-237">Le test sur la liste 4 appelle la méthode Create() avec un nouveau contact, groupe du contrôleur de groupe.</span><span class="sxs-lookup"><span data-stu-id="68f4d-237">The test in Listing 4 calls the Group controller Create() method with a new contact Group.</span></span> <span data-ttu-id="68f4d-238">Ensuite, le test vérifie qu’appelant le contrôleur de groupe Index() méthode retourne le nouveau groupe dans les données d’affichage.</span><span class="sxs-lookup"><span data-stu-id="68f4d-238">Next, the test verifies that calling the Group controller Index() method returns the new Group in view data.</span></span>

<span data-ttu-id="68f4d-239">Le contrôleur de groupe modifié sur la liste 5 contient le strict minimum de modifications requises pour transmettre le nouveau test.</span><span class="sxs-lookup"><span data-stu-id="68f4d-239">The modified Group controller in Listing 5 contains the bare minimum of changes required to pass the new test.</span></span>

<span data-ttu-id="68f4d-240">**Liste 5 - Controllers\GroupController.cs**</span><span class="sxs-lookup"><span data-stu-id="68f4d-240">**Listing 5 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample5.cs)]

## <a name="the-group-controller-in-listing-5-has-a-new-create-action-this-action-adds-a-group-to-a-collection-of-groups-notice-that-the-index-action-has-been-modified-to-return-the-contents-of-the-collection-of-groups"></a><span data-ttu-id="68f4d-241">Le contrôleur de groupe dans la liste 5 a une nouvelle action Create().</span><span class="sxs-lookup"><span data-stu-id="68f4d-241">The Group controller in Listing 5 has a new Create() action.</span></span> <span data-ttu-id="68f4d-242">Cette action ajoute un groupe à une collection de groupes.</span><span class="sxs-lookup"><span data-stu-id="68f4d-242">This action adds a Group to a collection of Groups.</span></span> <span data-ttu-id="68f4d-243">Notez que l’action Index() a été modifiée pour retourner le contenu de la collection de groupes.</span><span class="sxs-lookup"><span data-stu-id="68f4d-243">Notice that the Index() action has been modified to return the contents of the collection of Groups.</span></span>

<span data-ttu-id="68f4d-244">Une fois encore, nous avons effectué le minimum de travail requise pour réussir le test unitaire.</span><span class="sxs-lookup"><span data-stu-id="68f4d-244">Once again, we have performed the bare minimum amount of work required to pass the unit test.</span></span> <span data-ttu-id="68f4d-245">Une fois que nous apporter ces modifications vers le contrôleur de groupe, tous les de notre unité tests réussissent.</span><span class="sxs-lookup"><span data-stu-id="68f4d-245">After we make these changes to the Group controller, all of our unit tests pass.</span></span>

## <a name="adding-validation"></a><span data-ttu-id="68f4d-246">Ajout de la validation</span><span class="sxs-lookup"><span data-stu-id="68f4d-246">Adding Validation</span></span>

<span data-ttu-id="68f4d-247">Cette exigence n’a pas été explicitement précisée dans le récit utilisateur.</span><span class="sxs-lookup"><span data-stu-id="68f4d-247">This requirement was not stated explicitly in the user story.</span></span> <span data-ttu-id="68f4d-248">Toutefois, il est raisonnable de nécessitent qu’un nom à un groupe.</span><span class="sxs-lookup"><span data-stu-id="68f4d-248">However, it is reasonable to require that a Group have a name.</span></span> <span data-ttu-id="68f4d-249">Sinon, organisation des contacts en groupes serait pas très utile.</span><span class="sxs-lookup"><span data-stu-id="68f4d-249">Otherwise, organizing contacts into Groups would not be very useful.</span></span>

<span data-ttu-id="68f4d-250">Liste 6 contient un nouveau test qui exprime l’objectif.</span><span class="sxs-lookup"><span data-stu-id="68f4d-250">Listing 6 contains a new test that expresses this intention.</span></span> <span data-ttu-id="68f4d-251">Ce test vérifie que la tentative de création d’un groupe sans fournir un nom aboutit à un message d’erreur de validation dans l’état du modèle.</span><span class="sxs-lookup"><span data-stu-id="68f4d-251">This test verifies that attempting to create a Group without supplying a name results in a validation error message in model state.</span></span>

<span data-ttu-id="68f4d-252">**Liste 6 - Controllers\GroupControllerTest.cs**</span><span class="sxs-lookup"><span data-stu-id="68f4d-252">**Listing 6 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample6.cs)]

<span data-ttu-id="68f4d-253">Afin de répondre à ce test, que nous devons ajouter une propriété de nom à notre classe de groupe (voir la liste 7).</span><span class="sxs-lookup"><span data-stu-id="68f4d-253">In order to satisfy this test, we need to add a Name property to our Group class (see Listing 7).</span></span> <span data-ttu-id="68f4d-254">En outre, nous devons ajouter une petite quantité de logique de validation à notre contrôleur groupe s Create() action (voir liste 8).</span><span class="sxs-lookup"><span data-stu-id="68f4d-254">Furthermore, we need to add a tiny bit of validation logic to our Group controller s Create() action (see Listing 8).</span></span>

<span data-ttu-id="68f4d-255">**Liste 7 - Models\Group.cs**</span><span class="sxs-lookup"><span data-stu-id="68f4d-255">**Listing 7 - Models\Group.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample7.cs)]

<span data-ttu-id="68f4d-256">**Liste 8 - Controllers\GroupController.cs**</span><span class="sxs-lookup"><span data-stu-id="68f4d-256">**Listing 8 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample8.cs)]

<span data-ttu-id="68f4d-257">Notez que le contrôleur de groupe action Create() maintenant contient la logique de validation et de base de données.</span><span class="sxs-lookup"><span data-stu-id="68f4d-257">Notice that the Group controller Create() action now contains both validation and database logic.</span></span> <span data-ttu-id="68f4d-258">Actuellement, la base de données utilisé par le contrôleur de groupe se compose de rien de plus qu’une collection en mémoire.</span><span class="sxs-lookup"><span data-stu-id="68f4d-258">Currently, the database used by the Group controller consists of nothing more than an in-memory collection.</span></span>

## <a name="time-to-refactor"></a><span data-ttu-id="68f4d-259">Temps de refactoriser</span><span class="sxs-lookup"><span data-stu-id="68f4d-259">Time to Refactor</span></span>

<span data-ttu-id="68f4d-260">La troisième étape de rouge/vert/refactoriser est la partie de la refactorisation.</span><span class="sxs-lookup"><span data-stu-id="68f4d-260">The third step in Red/Green/Refactor is the Refactor part.</span></span> <span data-ttu-id="68f4d-261">À ce stade, nous devons étape à partir de notre code et de prendre en compte la façon dont nous pouvons refactoriser notre application afin d’améliorer sa conception.</span><span class="sxs-lookup"><span data-stu-id="68f4d-261">At this point, we need to step back from our code and consider how we can refactor our application to improve its design.</span></span> <span data-ttu-id="68f4d-262">L’étape de refactorisation est l’étape à laquelle nous tâchez vraiment le meilleur moyen de l’implémentation de modèles et principes de conception de logiciels.</span><span class="sxs-lookup"><span data-stu-id="68f4d-262">The Refactor stage is the stage at which we think hard about the best way of implementing software design principles and patterns.</span></span>

<span data-ttu-id="68f4d-263">Nous sommes libres de modifier notre code de quelque façon que nous choisissons d’améliorer la conception du code.</span><span class="sxs-lookup"><span data-stu-id="68f4d-263">We are free to modify our code in any way that we choose to improve the design of the code.</span></span> <span data-ttu-id="68f4d-264">Nous avons un filet de tests unitaires qui nous empêchent de compromettre les fonctionnalités existantes.</span><span class="sxs-lookup"><span data-stu-id="68f4d-264">We have a safety net of unit tests that prevent us from breaking existing functionality.</span></span>

<span data-ttu-id="68f4d-265">Pour l’instant, notre contrôleur de groupe est n’importe quoi à partir de la perspective d’une bonne conception logicielle.</span><span class="sxs-lookup"><span data-stu-id="68f4d-265">Right now, our Group controller is a mess from the perspective of good software design.</span></span> <span data-ttu-id="68f4d-266">Le contrôleur de groupe contient n’importe quoi toile de validation et le code d’accès aux données.</span><span class="sxs-lookup"><span data-stu-id="68f4d-266">The Group controller contains a tangled mess of validation and data access code.</span></span> <span data-ttu-id="68f4d-267">Pour ne pas violer le principe de responsabilité unique, nous devons séparer ces problèmes en différentes classes.</span><span class="sxs-lookup"><span data-stu-id="68f4d-267">To avoid violating the Single Responsibility Principle, we need to separate these concerns into different classes.</span></span>

<span data-ttu-id="68f4d-268">Notre classe de contrôleur groupe refactorisée est contenue dans la liste 9.</span><span class="sxs-lookup"><span data-stu-id="68f4d-268">Our refactored Group controller class is contained in Listing 9.</span></span> <span data-ttu-id="68f4d-269">Le contrôleur a été modifié pour utiliser la couche de service ContactManager.</span><span class="sxs-lookup"><span data-stu-id="68f4d-269">The controller has been modified to use the ContactManager service layer.</span></span> <span data-ttu-id="68f4d-270">Il s’agit de la même couche de service que nous utilisons avec le contrôleur de Contact.</span><span class="sxs-lookup"><span data-stu-id="68f4d-270">This is the same service layer that we use with the Contact controller.</span></span>

<span data-ttu-id="68f4d-271">Liste 10 contient les nouvelles méthodes ajoutés à la couche de service ContactManager pour prendre en charge la validation, de répertorier et de création de groupes.</span><span class="sxs-lookup"><span data-stu-id="68f4d-271">Listing 10 contains the new methods added to the ContactManager service layer to support validating, listing, and creating groups.</span></span> <span data-ttu-id="68f4d-272">L’interface IContactManagerService a été mis à jour pour inclure les nouvelles méthodes.</span><span class="sxs-lookup"><span data-stu-id="68f4d-272">The IContactManagerService interface was updated to include the new methods.</span></span>

<span data-ttu-id="68f4d-273">Liste 11 contient une nouvelle classe FakeContactManagerRepository qui implémente l’interface IContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="68f4d-273">Listing 11 contains a new FakeContactManagerRepository class that implements the IContactManagerRepository interface.</span></span> <span data-ttu-id="68f4d-274">Contrairement à la classe EntityContactManagerRepository qui implémente également l’interface IContactManagerRepository, notre nouvelle classe FakeContactManagerRepository ne communique pas avec la base de données.</span><span class="sxs-lookup"><span data-stu-id="68f4d-274">Unlike the EntityContactManagerRepository class that also implements the IContactManagerRepository interface, our new FakeContactManagerRepository class does not communicate with the database.</span></span> <span data-ttu-id="68f4d-275">La classe FakeContactManagerRepository utilise une collection en mémoire en tant que proxy pour la base de données.</span><span class="sxs-lookup"><span data-stu-id="68f4d-275">The FakeContactManagerRepository class uses an in-memory collection as a proxy for the database.</span></span> <span data-ttu-id="68f4d-276">Nous allons utiliser cette classe dans nos tests unitaires comme une couche de référentiels faux.</span><span class="sxs-lookup"><span data-stu-id="68f4d-276">We'll use this class in our unit tests as a fake repository layer.</span></span>

<span data-ttu-id="68f4d-277">**Liste 9 - Controllers\GroupController.cs**</span><span class="sxs-lookup"><span data-stu-id="68f4d-277">**Listing 9 - Controllers\GroupController.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample9.cs)]

<span data-ttu-id="68f4d-278">**Liste 10 - Controllers\ContactManagerService.cs**</span><span class="sxs-lookup"><span data-stu-id="68f4d-278">**Listing 10 - Controllers\ContactManagerService.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample10.cs)]

<span data-ttu-id="68f4d-279">**Liste 11 - Controllers\FakeContactManagerRepository.cs**</span><span class="sxs-lookup"><span data-stu-id="68f4d-279">**Listing 11 - Controllers\FakeContactManagerRepository.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample11.cs)]

<span data-ttu-id="68f4d-280">Modifier le IContactManagerRepository interface requiert utiliser pour implémenter les méthodes CreateGroup() et ListGroups() dans la classe EntityContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="68f4d-280">Modifying the IContactManagerRepository interface requires use to implement the CreateGroup() and ListGroups() methods in the EntityContactManagerRepository class.</span></span> <span data-ttu-id="68f4d-281">Le laziest et le plus rapide pour ce faire consiste à ajouter des méthodes stub ressemblent à ceci :</span><span class="sxs-lookup"><span data-stu-id="68f4d-281">The laziest and fastest way to do this is to add stub methods that look like this:</span></span>   

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample12.cs)]


<span data-ttu-id="68f4d-282">Enfin, ces modifications à la conception de notre application nous amener à apporter des modifications à nos tests unitaires.</span><span class="sxs-lookup"><span data-stu-id="68f4d-282">Finally, these changes to the design of our application require us to make some modifications to our unit tests.</span></span> <span data-ttu-id="68f4d-283">Nous devons maintenant utiliser le FakeContactManagerRepository lorsque vous effectuez les tests unitaires.</span><span class="sxs-lookup"><span data-stu-id="68f4d-283">We now need to use the FakeContactManagerRepository when performing the unit tests.</span></span> <span data-ttu-id="68f4d-284">La classe GroupControllerTest mis à jour est contenue dans la liste 12.</span><span class="sxs-lookup"><span data-stu-id="68f4d-284">The updated GroupControllerTest class is contained in Listing 12.</span></span>

<span data-ttu-id="68f4d-285">**Liste 12 - Controllers\GroupControllerTest.cs**</span><span class="sxs-lookup"><span data-stu-id="68f4d-285">**Listing 12 - Controllers\GroupControllerTest.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample13.cs)]

<span data-ttu-id="68f4d-286">Une fois que nous avons apporté tous ces, là aussi, toutes les modifications de nos passe des tests unitaires.</span><span class="sxs-lookup"><span data-stu-id="68f4d-286">After we make all of these changes, once again, all of our unit tests pass.</span></span> <span data-ttu-id="68f4d-287">Nous avons terminé le cycle complet de rouge/vert/Refactor.</span><span class="sxs-lookup"><span data-stu-id="68f4d-287">We have completed the entire cycle of Red/Green/Refactor.</span></span> <span data-ttu-id="68f4d-288">Nous avons implémenté les récits deux utilisateur première.</span><span class="sxs-lookup"><span data-stu-id="68f4d-288">We have implemented the first two user stories.</span></span> <span data-ttu-id="68f4d-289">Nous disposons désormais la prise en charge des tests unitaires pour les besoins exprimés dans les récits utilisateur.</span><span class="sxs-lookup"><span data-stu-id="68f4d-289">We now have supporting unit tests for the requirements expressed in the user stories.</span></span> <span data-ttu-id="68f4d-290">L’implémentation du reste des récits utilisateur implique la répéter le même cycle de rouge/vert/Refactor.</span><span class="sxs-lookup"><span data-stu-id="68f4d-290">Implementing the remainder of the user stories involves repeating the same cycle of Red/Green/Refactor.</span></span>

## <a name="modifying-our-database"></a><span data-ttu-id="68f4d-291">Modification de notre base de données</span><span class="sxs-lookup"><span data-stu-id="68f4d-291">Modifying our Database</span></span>

<span data-ttu-id="68f4d-292">Malheureusement, bien que nous avons satisfait toutes les exigences exprimés par nos tests unitaires, notre travail n’est pas terminé.</span><span class="sxs-lookup"><span data-stu-id="68f4d-292">Unfortunately, even though we have satisfied all of the requirements expressed by our unit tests, our work is not done.</span></span> <span data-ttu-id="68f4d-293">Nous devons encore modifier notre base de données.</span><span class="sxs-lookup"><span data-stu-id="68f4d-293">We still need to modify our database.</span></span>

<span data-ttu-id="68f4d-294">Nous devons créer une table de base de données de groupe.</span><span class="sxs-lookup"><span data-stu-id="68f4d-294">We need to create a new Group database table.</span></span> <span data-ttu-id="68f4d-295">Procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="68f4d-295">Follow these steps:</span></span>

1. <span data-ttu-id="68f4d-296">Dans la fenêtre Explorateur de serveurs, cliquez sur le dossier Tables et sélectionnez l’option de menu **ajouter une nouvelle Table**.</span><span class="sxs-lookup"><span data-stu-id="68f4d-296">In the Server Explorer window, right-click the Tables folder and select the menu option **Add New Table**.</span></span>
2. <span data-ttu-id="68f4d-297">Entrez les deux colonnes décrites ci-dessous dans le Concepteur de tables.</span><span class="sxs-lookup"><span data-stu-id="68f4d-297">Enter the two columns described below in the Table Designer.</span></span>
3. <span data-ttu-id="68f4d-298">Marquer la colonne Id comme une clé primaire et une colonne d’identité.</span><span class="sxs-lookup"><span data-stu-id="68f4d-298">Mark the Id column as a primary key and Identity column.</span></span>
4. <span data-ttu-id="68f4d-299">Enregistrer la nouvelle table avec les groupes de nom en cliquant sur l’icône de disquette.</span><span class="sxs-lookup"><span data-stu-id="68f4d-299">Save the new table with the name Groups by clicking the icon of the floppy.</span></span>

<a id="0.11_table01"></a>


| <span data-ttu-id="68f4d-300">**Nom de la colonne**</span><span class="sxs-lookup"><span data-stu-id="68f4d-300">**Column Name**</span></span> | <span data-ttu-id="68f4d-301">**Type de données**</span><span class="sxs-lookup"><span data-stu-id="68f4d-301">**Data Type**</span></span> | <span data-ttu-id="68f4d-302">**Null autorisé**</span><span class="sxs-lookup"><span data-stu-id="68f4d-302">**Allow Nulls**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="68f4d-303">Id</span><span class="sxs-lookup"><span data-stu-id="68f4d-303">Id</span></span> | <span data-ttu-id="68f4d-304">int</span><span class="sxs-lookup"><span data-stu-id="68f4d-304">int</span></span> | <span data-ttu-id="68f4d-305">False</span><span class="sxs-lookup"><span data-stu-id="68f4d-305">False</span></span> |
| <span data-ttu-id="68f4d-306">Nom</span><span class="sxs-lookup"><span data-stu-id="68f4d-306">Name</span></span> | <span data-ttu-id="68f4d-307">nvarchar(50)</span><span class="sxs-lookup"><span data-stu-id="68f4d-307">nvarchar(50)</span></span> | <span data-ttu-id="68f4d-308">False</span><span class="sxs-lookup"><span data-stu-id="68f4d-308">False</span></span> |


<span data-ttu-id="68f4d-309">Ensuite, nous devons supprimer toutes les données de la table de Contacts (dans le cas contraire, nous ne pourrons créer une relation entre les tables de Contacts et groupes).</span><span class="sxs-lookup"><span data-stu-id="68f4d-309">Next, we need to delete all of the data from the Contacts table (otherwise, we won't be able to create a relationship between the Contacts and Groups tables).</span></span> <span data-ttu-id="68f4d-310">Procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="68f4d-310">Follow these steps:</span></span>

1. <span data-ttu-id="68f4d-311">Avec le bouton droit de la table Contacts, puis sélectionnez l’option de menu **afficher les données de Table**.</span><span class="sxs-lookup"><span data-stu-id="68f4d-311">Right-click the Contacts table and select the menu option **Show Table Data**.</span></span>
2. <span data-ttu-id="68f4d-312">Supprimer toutes les lignes.</span><span class="sxs-lookup"><span data-stu-id="68f4d-312">Delete all of the rows.</span></span>

<span data-ttu-id="68f4d-313">Ensuite, nous devons définir une relation entre la table de base de données de groupes et de la table de base de données de Contacts existante.</span><span class="sxs-lookup"><span data-stu-id="68f4d-313">Next, we need to define a relationship between the Groups database table and the existing Contacts database table.</span></span> <span data-ttu-id="68f4d-314">Procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="68f4d-314">Follow these steps:</span></span>

1. <span data-ttu-id="68f4d-315">Double-cliquez sur la table de Contacts dans la fenêtre Explorateur de serveurs pour ouvrir le Concepteur de tables.</span><span class="sxs-lookup"><span data-stu-id="68f4d-315">Double-click the Contacts table in the Server Explorer window to open the Table Designer.</span></span>
2. <span data-ttu-id="68f4d-316">Ajouter une nouvelle colonne d’entiers à la table Contacts nommée GroupId.</span><span class="sxs-lookup"><span data-stu-id="68f4d-316">Add a new integer column to the Contacts table named GroupId.</span></span>
3. <span data-ttu-id="68f4d-317">Cliquez sur le bouton de relation pour ouvrir la boîte de dialogue relations de clé étrangère (voir Figure 3).</span><span class="sxs-lookup"><span data-stu-id="68f4d-317">Click the Relationship button to open the Foreign Key Relationships dialog (see Figure 3).</span></span>
4. <span data-ttu-id="68f4d-318">Cliquez sur le bouton Ajouter.</span><span class="sxs-lookup"><span data-stu-id="68f4d-318">Click the Add button.</span></span>
5. <span data-ttu-id="68f4d-319">Cliquez sur le bouton de sélection apparaît en regard du bouton de la Table et une spécification de colonnes.</span><span class="sxs-lookup"><span data-stu-id="68f4d-319">Click the ellipsis button that appears next to the Table and Columns Specification button.</span></span>
6. <span data-ttu-id="68f4d-320">Dans la boîte de dialogue Tables et colonnes, sélectionnez les groupes en tant que la table de clé primaire et l’Id en tant que colonne de clé primaire.</span><span class="sxs-lookup"><span data-stu-id="68f4d-320">In the Tables and Columns dialog, select Groups as the primary key table and Id as the primary key column.</span></span> <span data-ttu-id="68f4d-321">Sélectionnez des Contacts en tant que la table de clé étrangère et GroupId comme colonne de clé étrangère (voir Figure 4).</span><span class="sxs-lookup"><span data-stu-id="68f4d-321">Select Contacts as the foreign key table and GroupId as the foreign key column (see Figure 4).</span></span> <span data-ttu-id="68f4d-322">Cliquez sur le bouton OK.</span><span class="sxs-lookup"><span data-stu-id="68f4d-322">Click the OK button.</span></span>
7. <span data-ttu-id="68f4d-323">Sous **Spécification INSERT et UPDATE**, sélectionnez la valeur **Cascade** pour **supprimer la règle**.</span><span class="sxs-lookup"><span data-stu-id="68f4d-323">Under **INSERT and UPDATE Specification**, select the value **Cascade** for **Delete Rule**.</span></span>
8. <span data-ttu-id="68f4d-324">Cliquez sur le bouton Fermer pour fermer la boîte de dialogue relations de clé étrangère.</span><span class="sxs-lookup"><span data-stu-id="68f4d-324">Click the Close button to close the Foreign Key Relationships dialog.</span></span>
9. <span data-ttu-id="68f4d-325">Cliquez sur le bouton Enregistrer pour enregistrer les modifications apportées à la table Contacts.</span><span class="sxs-lookup"><span data-stu-id="68f4d-325">Click the Save button to save the changes to the Contacts table.</span></span>


<span data-ttu-id="68f4d-326">[![Création d’une relation de table de base de données](iteration-6-use-test-driven-development-cs/_static/image3.jpg)](iteration-6-use-test-driven-development-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="68f4d-326">[![Creating a database table relationship](iteration-6-use-test-driven-development-cs/_static/image3.jpg)](iteration-6-use-test-driven-development-cs/_static/image5.png)</span></span>

<span data-ttu-id="68f4d-327">**Figure 03**: Création d’une relation de table de base de données ([cliquez pour afficher l’image en taille réelle](iteration-6-use-test-driven-development-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="68f4d-327">**Figure 03**: Creating a database table relationship ([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image6.png))</span></span>


<span data-ttu-id="68f4d-328">[![Spécification des relations de table](iteration-6-use-test-driven-development-cs/_static/image4.jpg)](iteration-6-use-test-driven-development-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="68f4d-328">[![Specifying table relationships](iteration-6-use-test-driven-development-cs/_static/image4.jpg)](iteration-6-use-test-driven-development-cs/_static/image7.png)</span></span>

<span data-ttu-id="68f4d-329">**Figure 04**: Spécification des relations de table ([cliquez pour afficher l’image en taille réelle](iteration-6-use-test-driven-development-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="68f4d-329">**Figure 04**: Specifying table relationships([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image8.png))</span></span>


### <a name="updating-our-data-model"></a><span data-ttu-id="68f4d-330">La mise à jour de notre modèle de données</span><span class="sxs-lookup"><span data-stu-id="68f4d-330">Updating our Data Model</span></span>

<span data-ttu-id="68f4d-331">Ensuite, nous devons mettre à jour de notre modèle de données pour représenter la nouvelle table de base de données.</span><span class="sxs-lookup"><span data-stu-id="68f4d-331">Next, we need to update our data model to represent the new database table.</span></span> <span data-ttu-id="68f4d-332">Procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="68f4d-332">Follow these steps:</span></span>

1. <span data-ttu-id="68f4d-333">Double-cliquez sur le fichier ContactManagerModel.edmx dans le dossier de modèles pour ouvrir le Concepteur d’entités.</span><span class="sxs-lookup"><span data-stu-id="68f4d-333">Double-click the ContactManagerModel.edmx file in the Models folder to open the Entity Designer.</span></span>
2. <span data-ttu-id="68f4d-334">Cliquez sur l’aire du concepteur et sélectionnez l’option de menu **modèle de mise à jour à partir de la base de données**.</span><span class="sxs-lookup"><span data-stu-id="68f4d-334">Right-click the Designer surface and select the menu option **Update Model from Database**.</span></span>
3. <span data-ttu-id="68f4d-335">Dans l’Assistant Mise à jour, sélectionnez les groupes de table et cliquez sur Terminer bouton (voir Figure 5).</span><span class="sxs-lookup"><span data-stu-id="68f4d-335">In the Update Wizard, select the Groups table and click the Finish button (see Figure 5).</span></span>
4. <span data-ttu-id="68f4d-336">Avec le bouton droit de l’entité de groupes et sélectionnez l’option de menu **renommer**.</span><span class="sxs-lookup"><span data-stu-id="68f4d-336">Right-click the Groups entity and select the menu option **Rename**.</span></span> <span data-ttu-id="68f4d-337">Modifier le nom de la *groupes* entité à *groupe* (singulier).</span><span class="sxs-lookup"><span data-stu-id="68f4d-337">Change the name of the *Groups* entity to *Group* (singular).</span></span>
5. <span data-ttu-id="68f4d-338">Avec le bouton droit de la propriété de navigation de groupes qui s’affiche en bas de l’entité Contact.</span><span class="sxs-lookup"><span data-stu-id="68f4d-338">Right-click the Groups navigation property that appears at the bottom of the Contact entity.</span></span> <span data-ttu-id="68f4d-339">Modifier le nom de la *groupes* propriété de navigation *groupe* (singulier).</span><span class="sxs-lookup"><span data-stu-id="68f4d-339">Change the name of the *Groups* navigation property to *Group* (singular).</span></span>


<span data-ttu-id="68f4d-340">[![La mise à jour un modèle Entity Framework à partir de la base de données](iteration-6-use-test-driven-development-cs/_static/image5.jpg)](iteration-6-use-test-driven-development-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="68f4d-340">[![Updating an Entity Framework model from the database](iteration-6-use-test-driven-development-cs/_static/image5.jpg)](iteration-6-use-test-driven-development-cs/_static/image9.png)</span></span>

<span data-ttu-id="68f4d-341">**Figure 05**: La mise à jour un modèle Entity Framework à partir de la base de données ([cliquez pour afficher l’image en taille réelle](iteration-6-use-test-driven-development-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="68f4d-341">**Figure 05**: Updating an Entity Framework model from the database([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image10.png))</span></span>


<span data-ttu-id="68f4d-342">Après avoir effectué ces étapes, votre modèle de données représente les Contacts et les groupes de tables.</span><span class="sxs-lookup"><span data-stu-id="68f4d-342">After you complete these steps, your data model will represent both the Contacts and Groups tables.</span></span> <span data-ttu-id="68f4d-343">Le Concepteur d’entités doit afficher les deux entités (voir Figure 6).</span><span class="sxs-lookup"><span data-stu-id="68f4d-343">The Entity Designer should show both entities (see Figure 6).</span></span>


<span data-ttu-id="68f4d-344">[![Concepteur d’entités affichant le groupe et Contact](iteration-6-use-test-driven-development-cs/_static/image6.jpg)](iteration-6-use-test-driven-development-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="68f4d-344">[![Entity Designer displaying Group and Contact](iteration-6-use-test-driven-development-cs/_static/image6.jpg)](iteration-6-use-test-driven-development-cs/_static/image11.png)</span></span>

<span data-ttu-id="68f4d-345">**Figure 06**: Concepteur d’entités affichant le groupe et Contact ([cliquez pour afficher l’image en taille réelle](iteration-6-use-test-driven-development-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="68f4d-345">**Figure 06**: Entity Designer displaying Group and Contact([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image12.png))</span></span>


### <a name="creating-our-repository-classes"></a><span data-ttu-id="68f4d-346">Création de Classes de notre référentiel</span><span class="sxs-lookup"><span data-stu-id="68f4d-346">Creating our Repository Classes</span></span>

<span data-ttu-id="68f4d-347">Ensuite, nous devons implémenter notre classe de dépôt.</span><span class="sxs-lookup"><span data-stu-id="68f4d-347">Next, we need to implement our repository class.</span></span> <span data-ttu-id="68f4d-348">Au cours de cette itération, nous avons ajouté plusieurs nouvelles méthodes à l’interface IContactManagerRepository lors de l’écriture de code pour satisfaire nos tests unitaires.</span><span class="sxs-lookup"><span data-stu-id="68f4d-348">Over the course of this iteration, we added several new methods to the IContactManagerRepository interface while writing code to satisfy our unit tests.</span></span> <span data-ttu-id="68f4d-349">La version finale de l’interface IContactManagerRepository est contenue dans la liste de 14.</span><span class="sxs-lookup"><span data-stu-id="68f4d-349">The final version of the IContactManagerRepository interface is contained in Listing 14.</span></span>

<span data-ttu-id="68f4d-350">**Liste 14 - Models\IContactManagerRepository.cs**</span><span class="sxs-lookup"><span data-stu-id="68f4d-350">**Listing 14 - Models\IContactManagerRepository.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample14.cs)]

<span data-ttu-id="68f4d-351">Nous n’avons pas réellement implémentées une des méthodes liées à l’utilisation des groupes de contacts.</span><span class="sxs-lookup"><span data-stu-id="68f4d-351">We haven't actually implemented any of the methods related to working with contact groups.</span></span> <span data-ttu-id="68f4d-352">Actuellement, la classe EntityContactManagerRepository a des méthodes stub pour chacune des méthodes de contact de groupe répertoriés dans l’interface IContactManagerRepository.</span><span class="sxs-lookup"><span data-stu-id="68f4d-352">Currently, the EntityContactManagerRepository class has stub methods for each of the contact group methods listed in the IContactManagerRepository interface.</span></span> <span data-ttu-id="68f4d-353">Par exemple, la méthode ListGroups() actuellement ressemble à ceci :</span><span class="sxs-lookup"><span data-stu-id="68f4d-353">For example, the ListGroups() method currently looks like this:</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample15.cs)]

<span data-ttu-id="68f4d-354">Les méthodes stub permis de compiler notre application et passer les tests unitaires.</span><span class="sxs-lookup"><span data-stu-id="68f4d-354">The stub methods enabled us to compile our application and pass the unit tests.</span></span> <span data-ttu-id="68f4d-355">Toutefois, il est maintenant temps de réellement implémenter ces méthodes.</span><span class="sxs-lookup"><span data-stu-id="68f4d-355">However, now it is time to actually implement these methods.</span></span> <span data-ttu-id="68f4d-356">La version finale de la classe EntityContactManagerRepository est contenue dans la liste 13.</span><span class="sxs-lookup"><span data-stu-id="68f4d-356">The final version of the EntityContactManagerRepository class is contained in Listing 13.</span></span>

<span data-ttu-id="68f4d-357">**Liste 13 - Models\EntityContactManagerRepository.cs**</span><span class="sxs-lookup"><span data-stu-id="68f4d-357">**Listing 13 - Models\EntityContactManagerRepository.cs**</span></span>

[!code-csharp[Main](iteration-6-use-test-driven-development-cs/samples/sample16.cs)]

### <a name="creating-the-views"></a><span data-ttu-id="68f4d-358">Création de vues</span><span class="sxs-lookup"><span data-stu-id="68f4d-358">Creating the Views</span></span>

<span data-ttu-id="68f4d-359">Application d’ASP.NET MVC lorsque vous utilisez le moteur d’affichage ASP.NET par défaut.</span><span class="sxs-lookup"><span data-stu-id="68f4d-359">ASP.NET MVC application when you use the default ASP.NET view engine.</span></span> <span data-ttu-id="68f4d-360">Par conséquent, ne pas créer des vues en réponse à un test unitaire particulier.</span><span class="sxs-lookup"><span data-stu-id="68f4d-360">So, you don t create views in response to a particular unit test.</span></span> <span data-ttu-id="68f4d-361">Toutefois, car une application serait inutile en l’absence de vues, nous pouvons t terminer cette itération sans créer et modifier les vues contenues dans l’application Gestionnaire de contacts.</span><span class="sxs-lookup"><span data-stu-id="68f4d-361">However, because an application would be useless without views, we can t complete this iteration without creating and modifying the views contained in the Contact Manager application.</span></span>

<span data-ttu-id="68f4d-362">Nous devons créer les suivants nouvelles vues de gestion des groupes de contact (voir la Figure 7) :</span><span class="sxs-lookup"><span data-stu-id="68f4d-362">We need to create the following new views for managing contact groups (see Figure 7):</span></span>

- <span data-ttu-id="68f4d-363">Views\Group\Index.aspx - affiche la liste des groupes de contacts</span><span class="sxs-lookup"><span data-stu-id="68f4d-363">Views\Group\Index.aspx - Displays list of contact groups</span></span>
- <span data-ttu-id="68f4d-364">Views\Group\Delete.aspx - écran de confirmation affiche pour la suppression d’un groupe de contact</span><span class="sxs-lookup"><span data-stu-id="68f4d-364">Views\Group\Delete.aspx - Displays confirmation form for deleting a contact group</span></span>


<span data-ttu-id="68f4d-365">[![La vue Index de groupe](iteration-6-use-test-driven-development-cs/_static/image7.jpg)](iteration-6-use-test-driven-development-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="68f4d-365">[![The Group Index view](iteration-6-use-test-driven-development-cs/_static/image7.jpg)](iteration-6-use-test-driven-development-cs/_static/image13.png)</span></span>

<span data-ttu-id="68f4d-366">**Figure 07**: La vue Index de groupe ([cliquez pour afficher l’image en taille réelle](iteration-6-use-test-driven-development-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="68f4d-366">**Figure 07**: The Group Index view([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image14.png))</span></span>


<span data-ttu-id="68f4d-367">Nous avons besoin de modifier les vues suivantes existants afin qu’ils contiennent des groupes de contacts :</span><span class="sxs-lookup"><span data-stu-id="68f4d-367">We need to modify the following existing views so that they include contact groups:</span></span>

- <span data-ttu-id="68f4d-368">Views\Home\Create.aspx</span><span class="sxs-lookup"><span data-stu-id="68f4d-368">Views\Home\Create.aspx</span></span>
- <span data-ttu-id="68f4d-369">Views\Home\Edit.aspx</span><span class="sxs-lookup"><span data-stu-id="68f4d-369">Views\Home\Edit.aspx</span></span>
- <span data-ttu-id="68f4d-370">Views\Home\Index.aspx</span><span class="sxs-lookup"><span data-stu-id="68f4d-370">Views\Home\Index.aspx</span></span>

<span data-ttu-id="68f4d-371">Vous pouvez voir les vues modifiés en examinant l’application de Visual Studio qui accompagne ce didacticiel.</span><span class="sxs-lookup"><span data-stu-id="68f4d-371">You can see the modified views by looking at the Visual Studio application that accompanies this tutorial.</span></span> <span data-ttu-id="68f4d-372">Par exemple, la Figure 8 illustre la vue Index de Contact.</span><span class="sxs-lookup"><span data-stu-id="68f4d-372">For example, Figure 8 illustrates the Contact Index view.</span></span>


<span data-ttu-id="68f4d-373">[![La vue Index des contacts](iteration-6-use-test-driven-development-cs/_static/image8.jpg)](iteration-6-use-test-driven-development-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="68f4d-373">[![The Contact Index view](iteration-6-use-test-driven-development-cs/_static/image8.jpg)](iteration-6-use-test-driven-development-cs/_static/image15.png)</span></span>

<span data-ttu-id="68f4d-374">**Figure 08**: La vue Index de Contact ([cliquez pour afficher l’image en taille réelle](iteration-6-use-test-driven-development-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="68f4d-374">**Figure 08**: The Contact Index view([Click to view full-size image](iteration-6-use-test-driven-development-cs/_static/image16.png))</span></span>


## <a name="summary"></a><span data-ttu-id="68f4d-375">Récapitulatif</span><span class="sxs-lookup"><span data-stu-id="68f4d-375">Summary</span></span>

<span data-ttu-id="68f4d-376">Dans cette itération, nous avons ajouté de nouvelles fonctionnalités à notre application de gestionnaire de contacts en suivant une méthodologie de conception d’application développement piloté par test.</span><span class="sxs-lookup"><span data-stu-id="68f4d-376">In this iteration, we added new functionality to our Contact Manager application by following a test-driven development application design methodology.</span></span> <span data-ttu-id="68f4d-377">Nous avons commencé par créer un ensemble de récits utilisateur.</span><span class="sxs-lookup"><span data-stu-id="68f4d-377">We started by creating a set of user stories.</span></span> <span data-ttu-id="68f4d-378">Nous avons créé un ensemble de tests unitaires qui correspond aux besoins exprimés par les récits utilisateur.</span><span class="sxs-lookup"><span data-stu-id="68f4d-378">We created a set of unit tests that corresponds to the requirements expressed by the user stories.</span></span> <span data-ttu-id="68f4d-379">Enfin, nous avons écrit juste assez de code pour satisfaire les besoins exprimés par les tests unitaires.</span><span class="sxs-lookup"><span data-stu-id="68f4d-379">Finally, we wrote just enough code to satisfy the requirements expressed by the unit tests.</span></span>

<span data-ttu-id="68f4d-380">Une fois que nous avons rédigé suffisamment de code pour satisfaire les besoins exprimés par les tests unitaires, nous avons mis à jour notre base de données et les vues.</span><span class="sxs-lookup"><span data-stu-id="68f4d-380">After we finished writing enough code to satisfy the requirements expressed by the unit tests, we updated our database and views.</span></span> <span data-ttu-id="68f4d-381">Nous avons ajouté une nouvelle table de groupes à notre base de données et mise à jour de notre modèle de données Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="68f4d-381">We added a new Groups table to our database and updated our Entity Framework Data Model.</span></span> <span data-ttu-id="68f4d-382">Nous avons également créé et modifié un ensemble de vues.</span><span class="sxs-lookup"><span data-stu-id="68f4d-382">We also created and modified a set of views.</span></span>

<span data-ttu-id="68f4d-383">Dans la prochaine itération--la dernière itération--nous Réécrivons notre application pour tirer parti d’Ajax.</span><span class="sxs-lookup"><span data-stu-id="68f4d-383">In the next iteration -- the final iteration -- we rewrite our application to take advantage of Ajax.</span></span> <span data-ttu-id="68f4d-384">En tirant parti d’Ajax, nous allons améliorer la réactivité et les performances de l’application Gestionnaire de contacts.</span><span class="sxs-lookup"><span data-stu-id="68f4d-384">By taking advantage of Ajax, we'll improve the responsiveness and performance of the Contact Manager application.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="68f4d-385">[Précédent](iteration-5-create-unit-tests-cs.md)
> [Suivant](iteration-7-add-ajax-functionality-cs.md)</span><span class="sxs-lookup"><span data-stu-id="68f4d-385">[Previous](iteration-5-create-unit-tests-cs.md)
[Next](iteration-7-add-ajax-functionality-cs.md)</span></span>

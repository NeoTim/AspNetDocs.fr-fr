---
uid: mvc/overview/older-versions-1/movie-database/create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs
title: Créer une Application de base de données de films en 15 Minutes avec ASP.NET MVC (C#) | Microsoft Docs
author: StephenWalther
description: Stephen Walther génère une piloté par base de données ASP.NET MVC application entière à partir du début à la fin. Ce didacticiel constitue une excellente introduction aux personnes qui sont de nouveau t...
ms.author: riande
ms.date: 01/27/2009
ms.assetid: dd1be137-91c5-47a8-8137-fecf0789c7f5
msc.legacyurl: /mvc/overview/older-versions-1/movie-database/create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs
msc.type: authoredcontent
ms.openlocfilehash: 16d62102713b0b86aa93284e39c82d3ae492f892
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/01/2019
ms.locfileid: "57051876"
---
<a name="create-a-movie-database-application-in-15-minutes-with-aspnet-mvc-c"></a><span data-ttu-id="f2c3b-104">Créer une application de base de données de films en 15 minutes avec ASP.NET MVC (C#)</span><span class="sxs-lookup"><span data-stu-id="f2c3b-104">Create a Movie Database Application in 15 Minutes with ASP.NET MVC (C#)</span></span>
====================
<span data-ttu-id="f2c3b-105">par [Stephen Walther](https://github.com/StephenWalther)</span><span class="sxs-lookup"><span data-stu-id="f2c3b-105">by [Stephen Walther](https://github.com/StephenWalther)</span></span>

[<span data-ttu-id="f2c3b-106">Télécharger le Code</span><span class="sxs-lookup"><span data-stu-id="f2c3b-106">Download Code</span></span>](http://download.microsoft.com/download/7/2/8/728F8794-E59A-4D18-9A56-7AD2DB05BD9D/MovieApp_CS.zip)

> <span data-ttu-id="f2c3b-107">Stephen Walther génère une piloté par base de données ASP.NET MVC application entière à partir du début à la fin.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-107">Stephen Walther builds an entire database-driven ASP.NET MVC application from start to finish.</span></span> <span data-ttu-id="f2c3b-108">Ce didacticiel constitue une excellente introduction aux personnes qui découvrent l’infrastructure ASP.NET MVC et qui souhaitent avoir une idée du processus de génération d’une application ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-108">This tutorial is a great introduction for people who are new to the ASP.NET MVC Framework and who want to get a sense of the process of building an ASP.NET MVC application.</span></span>


<span data-ttu-id="f2c3b-109">L’objectif de ce didacticiel est de vous donner une idée de « qu’il est comme » pour générer une application ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-109">The purpose of this tutorial is to give you a sense of "what it is like" to build an ASP.NET MVC application.</span></span> <span data-ttu-id="f2c3b-110">Dans ce didacticiel, j’ai anéantir de création d’une application ASP.NET MVC entière à partir du début à la fin.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-110">In this tutorial, I blast through building an entire ASP.NET MVC application from start to finish.</span></span> <span data-ttu-id="f2c3b-111">Je vous montrer comment créer une application pilotée par base de données simple qui illustre comment vous pouvez répertorier, créer et modifier des enregistrements de base de données.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-111">I show you how to build a simple database-driven application that illustrates how you can list, create, and edit database records.</span></span>

<span data-ttu-id="f2c3b-112">Pour simplifier le processus de création de notre application, nous allons tirer parti des fonctionnalités de génération de modèles automatique de Visual Studio 2008.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-112">To simplify the process of building our application, we'll take advantage of the scaffolding features of Visual Studio 2008.</span></span> <span data-ttu-id="f2c3b-113">Nous allons laisser Visual Studio générer le code initial et le contenu pour nos contrôleurs, les modèles et les vues.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-113">We'll let Visual Studio generate the initial code and content for our controllers, models, and views.</span></span>

<span data-ttu-id="f2c3b-114">Si vous avez travaillé avec des Pages ASP ou ASP.NET, puis vous devez trouver ASP.NET MVC très familier.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-114">If you have worked with Active Server Pages or ASP.NET, then you should find ASP.NET MVC very familiar.</span></span> <span data-ttu-id="f2c3b-115">Vues ASP.NET MVC sont très semblables aux pages dans une application Active Server Pages.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-115">ASP.NET MVC views are very much like the pages in an Active Server Pages application.</span></span> <span data-ttu-id="f2c3b-116">Et, tout comme une application ASP.NET Web Forms traditionnelle, ASP.NET MVC offre un accès complet à l’ensemble des langages et des classes fournies par le .NET framework.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-116">And, just like a traditional ASP.NET Web Forms application, ASP.NET MVC provides you with full access to the rich set of languages and classes provided by the .NET framework.</span></span>

<span data-ttu-id="f2c3b-117">J’espère est que ce didacticiel vous donne une idée de la façon dont l’expérience de création d’une application ASP.NET MVC est différente de celle de l’expérience de création d’une application Active Server Pages ou des Web Forms ASP.NET et similaires.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-117">My hope is that this tutorial will give you a sense of how the experience of building an ASP.NET MVC application is both similar and different than the experience of building an Active Server Pages or ASP.NET Web Forms application.</span></span>

## <a name="overview-of-the-movie-database-application"></a><span data-ttu-id="f2c3b-118">Vue d’ensemble de l’Application de base de données de film</span><span class="sxs-lookup"><span data-stu-id="f2c3b-118">Overview of the Movie Database Application</span></span>

<span data-ttu-id="f2c3b-119">Étant donné que notre objectif est de simplifier les choses, nous allons créer une application très simple de la base de données de film.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-119">Because our goal is to keep things simple, we'll build a very simple Movie Database application.</span></span> <span data-ttu-id="f2c3b-120">Notre application de base de données de film simple nous permettra de faire trois choses :</span><span class="sxs-lookup"><span data-stu-id="f2c3b-120">Our simple Movie Database application will allow us to do three things:</span></span>

1. <span data-ttu-id="f2c3b-121">Une liste des enregistrements de base de données de film</span><span class="sxs-lookup"><span data-stu-id="f2c3b-121">List a set of movie database records</span></span>
2. <span data-ttu-id="f2c3b-122">Créer un nouvel enregistrement de base de données de film</span><span class="sxs-lookup"><span data-stu-id="f2c3b-122">Create a new movie database record</span></span>
3. <span data-ttu-id="f2c3b-123">Modifier un enregistrement de base de données de film existant</span><span class="sxs-lookup"><span data-stu-id="f2c3b-123">Edit an existing movie database record</span></span>

<span data-ttu-id="f2c3b-124">Là encore, étant donné que nous voulons simplifier les choses, nous allons tirer parti du nombre minimal de fonctionnalités de l’infrastructure ASP.NET MVC nécessaires pour créer notre application.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-124">Again, because we want to keep things simple, we'll take advantage of the minimum number of features of the ASP.NET MVC framework needed to build our application.</span></span> <span data-ttu-id="f2c3b-125">Par exemple, nous ne profiter du développement piloté par tests.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-125">For example, we won't be taking advantage of Test-Driven Development.</span></span>

<span data-ttu-id="f2c3b-126">Pour créer notre application, nous devons effectuer chacune des étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="f2c3b-126">In order to create our application, we need to complete each of the following steps:</span></span>

1. <span data-ttu-id="f2c3b-127">Créer le projet d’Application Web ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="f2c3b-127">Create the ASP.NET MVC Web Application Project</span></span>
2. <span data-ttu-id="f2c3b-128">Créer la base de données</span><span class="sxs-lookup"><span data-stu-id="f2c3b-128">Create the database</span></span>
3. <span data-ttu-id="f2c3b-129">Créer le modèle de base de données</span><span class="sxs-lookup"><span data-stu-id="f2c3b-129">Create the database model</span></span>
4. <span data-ttu-id="f2c3b-130">Création du contrôleur ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="f2c3b-130">Create the ASP.NET MVC controller</span></span>
5. <span data-ttu-id="f2c3b-131">Créer des vues ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="f2c3b-131">Create the ASP.NET MVC views</span></span>

## <a name="preliminaries"></a><span data-ttu-id="f2c3b-132">Préliminaires</span><span class="sxs-lookup"><span data-stu-id="f2c3b-132">Preliminaries</span></span>

<span data-ttu-id="f2c3b-133">Vous aurez besoin de Visual Studio 2008 ou Visual Web Developer 2008 Express pour générer une application ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-133">You'll need either Visual Studio 2008 or Visual Web Developer 2008 Express to build an ASP.NET MVC application.</span></span> <span data-ttu-id="f2c3b-134">Vous devez également télécharger l’infrastructure ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-134">You also need to download the ASP.NET MVC framework.</span></span>

<span data-ttu-id="f2c3b-135">Si vous ne possédez pas Visual Studio 2008, vous pouvez télécharger une version d’évaluation de 90 jours de Visual Studio 2008 à partir de ce site Web :</span><span class="sxs-lookup"><span data-stu-id="f2c3b-135">If you don't own Visual Studio 2008, then you can download a 90 day trial version of Visual Studio 2008 from this website:</span></span>

[https://msdn.microsoft.com/vs2008/products/cc268305.aspx](https://msdn.microsoft.com/vs2008/products/cc268305.aspx)

<span data-ttu-id="f2c3b-136">Vous pouvez également créer ASP.NET MVC applications avec Visual Web Developer Express 2008.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-136">Alternatively, you can create ASP.NET MVC applications with Visual Web Developer Express 2008.</span></span> <span data-ttu-id="f2c3b-137">Si vous décidez d’utiliser Visual Web Developer Express vous devez Service Pack 1 installé.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-137">If you decide to use Visual Web Developer Express then you must have Service Pack 1 installed.</span></span> <span data-ttu-id="f2c3b-138">Vous pouvez télécharger Visual Web Developer 2008 Express avec Service Pack 1 à partir de ce site Web :</span><span class="sxs-lookup"><span data-stu-id="f2c3b-138">You can download Visual Web Developer 2008 Express with Service Pack 1 from this website:</span></span>

[<span data-ttu-id="f2c3b-139">https://www.microsoft.com/downloads/details.aspx?FamilyId=BDB6391C-05CA-4036-9154-6DF4F6DEBD14&amp;displaylang=en</span><span class="sxs-lookup"><span data-stu-id="f2c3b-139">https://www.microsoft.com/downloads/details.aspx?FamilyId=BDB6391C-05CA-4036-9154-6DF4F6DEBD14&amp;displaylang=en</span></span>](https://www.microsoft.com/downloads/details.aspx?FamilyId=BDB6391C-05CA-4036-9154-6DF4F6DEBD14&amp;displaylang=en)

<span data-ttu-id="f2c3b-140">Après avoir installé Visual Studio 2008 ou Visual Web Developer 2008, vous devez installer l’infrastructure ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-140">After you install either Visual Studio 2008 or Visual Web Developer 2008, you need to install the ASP.NET MVC framework.</span></span> <span data-ttu-id="f2c3b-141">Vous pouvez télécharger l’infrastructure ASP.NET MVC à partir du site Web suivant :</span><span class="sxs-lookup"><span data-stu-id="f2c3b-141">You can download the ASP.NET MVC framework from the following website:</span></span>

[https://www.asp.net/mvc/](../../../index.md)

> [!NOTE] 
> 
> <span data-ttu-id="f2c3b-142">Au lieu de télécharger l’infrastructure ASP.NET et l’infrastructure ASP.NET MVC individuellement, vous pouvez tirer parti de Web Platform Installer.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-142">Instead of downloading the ASP.NET framework and the ASP.NET MVC framework individually, you can take advantage of the Web Platform Installer.</span></span> <span data-ttu-id="f2c3b-143">Le programme d’installation de la plateforme Web est une application qui vous permet de gérer facilement les applications installées sont installés sur votre ordinateur :</span><span class="sxs-lookup"><span data-stu-id="f2c3b-143">The Web Platform Installer is an application that enables you to easily manage the installed applications are your computer:</span></span>
> 
> [https://www.microsoft.com/web/gallery/Install.aspx](https://www.microsoft.com/web/gallery/Install.aspx)


## <a name="creating-an-aspnet-mvc-web-application-project"></a><span data-ttu-id="f2c3b-144">Création d’un projet d’Application Web ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="f2c3b-144">Creating an ASP.NET MVC Web Application Project</span></span>

<span data-ttu-id="f2c3b-145">Nous allons commencer en créant un nouveau projet d’Application Web ASP.NET MVC dans Visual Studio 2008.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-145">Let's start by creating a new ASP.NET MVC Web Application project in Visual Studio 2008.</span></span> <span data-ttu-id="f2c3b-146">Sélectionnez l’option de menu **fichier, nouveau projet** et vous verrez la boîte de dialogue Nouveau projet dans la Figure 1.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-146">Select the menu option **File, New Project** and you will see the New Project dialog box in Figure 1.</span></span> <span data-ttu-id="f2c3b-147">Sélectionnez C# comme langage de programmation et le modèle de projet d’Application Web ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-147">Select C# as the programming language and select the ASP.NET MVC Web Application project template.</span></span> <span data-ttu-id="f2c3b-148">Nommez votre projet MovieApp et cliquez sur le bouton OK.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-148">Give your project the name MovieApp and click the OK button.</span></span>


<span data-ttu-id="f2c3b-149">[![La boîte de dialogue Nouveau projet](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image1.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="f2c3b-149">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image1.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image1.png)</span></span>

<span data-ttu-id="f2c3b-150">**Figure 01**: La boîte de dialogue Nouveau projet ([cliquez pour afficher l’image en taille réelle](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="f2c3b-150">**Figure 01**: The New Project dialog box ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image2.png))</span></span>


<span data-ttu-id="f2c3b-151">Assurez-vous que vous sélectionnez .NET Framework 3.5 dans la liste déroulante en haut de la boîte de dialogue Nouveau projet ou le modèle de projet d’Application Web ASP.NET MVC ne s’affiche.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-151">Make sure that you select .NET Framework 3.5 from the dropdown list at the top of the New Project dialog or the ASP.NET MVC Web Application project template won't appear.</span></span>


<span data-ttu-id="f2c3b-152">Chaque fois que vous créez un nouveau projet d’Application Web MVC, Visual Studio vous invite à créer un projet de test d’unité distincte.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-152">Whenever you create a new MVC Web Application project, Visual Studio prompts you to create a separate unit test project.</span></span> <span data-ttu-id="f2c3b-153">La boîte de dialogue dans la Figure 2 s’affiche.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-153">The dialog in Figure 2 appears.</span></span> <span data-ttu-id="f2c3b-154">Étant donné que nous ne sont pas créer de tests dans ce didacticiel en raison de contraintes de temps (et Oui, nous devons sentir coupables d’un peu à ce sujet) sélectionnez le **non** , cliquez sur le **OK** bouton.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-154">Because we won't be creating tests in this tutorial because of time constraints (and, yes, we should feel a little guilty about this) select the **No** option and click the **OK** button.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="f2c3b-155">Visual Web Developer ne prend pas en charge les projets de test.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-155">Visual Web Developer does not support test projects.</span></span>


<span data-ttu-id="f2c3b-156">[![La boîte de dialogue Nouveau projet](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image2.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="f2c3b-156">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image2.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image3.png)</span></span>

<span data-ttu-id="f2c3b-157">**Figure 02**: La boîte de dialogue Créer un projet de Test unitaire ([cliquez pour afficher l’image en taille réelle](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="f2c3b-157">**Figure 02**: The Create Unit Test Project dialog ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image4.png))</span></span>


<span data-ttu-id="f2c3b-158">Une application ASP.NET MVC a un ensemble standard de dossiers : un dossier de modèles, vues et contrôleurs.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-158">An ASP.NET MVC application has a standard set of folders: a Models, Views, and Controllers folder.</span></span> <span data-ttu-id="f2c3b-159">Vous pouvez voir cet ensemble standard de dossiers dans la fenêtre Explorateur de solutions.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-159">You can see this standard set of folders in the Solution Explorer window.</span></span> <span data-ttu-id="f2c3b-160">Nous allons devoir ajouter des fichiers à chacun des dossiers de modèles, vues et contrôleurs afin de créer notre application de base de données de film.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-160">We'll need to add files to each of the Models, Views, and Controllers folders in order to build our Movie Database application.</span></span>

<span data-ttu-id="f2c3b-161">Lorsque vous créez une application MVC avec Visual Studio, vous obtenez un exemple d’application.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-161">When you create a new MVC application with Visual Studio, you get a sample application.</span></span> <span data-ttu-id="f2c3b-162">Étant donné que nous voulons démarrer à partir de zéro, nous devons supprimer le contenu de cet exemple d’application.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-162">Because we want to start from scratch, we need to delete the content for this sample application.</span></span> <span data-ttu-id="f2c3b-163">Vous devez supprimer le fichier suivant et le dossier suivant :</span><span class="sxs-lookup"><span data-stu-id="f2c3b-163">You need to delete the following file and the following folder:</span></span>

- <span data-ttu-id="f2c3b-164">Controllers\HomeController.cs</span><span class="sxs-lookup"><span data-stu-id="f2c3b-164">Controllers\HomeController.cs</span></span>
- <span data-ttu-id="f2c3b-165">Views\Home</span><span class="sxs-lookup"><span data-stu-id="f2c3b-165">Views\Home</span></span>

## <a name="creating-the-database"></a><span data-ttu-id="f2c3b-166">Création de la base de données</span><span class="sxs-lookup"><span data-stu-id="f2c3b-166">Creating the Database</span></span>

<span data-ttu-id="f2c3b-167">Nous devons créer une base de données pour stocker nos enregistrements de base de données de film.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-167">We need to create a database to hold our movie database records.</span></span> <span data-ttu-id="f2c3b-168">Heureusement, Visual Studio inclut une base de données gratuit nommé SQL Server Express.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-168">Luckily, Visual Studio includes a free database named SQL Server Express.</span></span> <span data-ttu-id="f2c3b-169">Suivez ces étapes pour créer la base de données :</span><span class="sxs-lookup"><span data-stu-id="f2c3b-169">Follow these steps to create the database:</span></span>

1. <span data-ttu-id="f2c3b-170">Avec le bouton droit de l’application\_dossier de données dans la fenêtre Explorateur de solutions, puis sélectionnez l’option de menu **ajouter, nouvel élément**.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-170">Right-click the App\_Data folder in the Solution Explorer window and select the menu option **Add, New Item**.</span></span>
2. <span data-ttu-id="f2c3b-171">Sélectionnez le **données** catégorie, puis sélectionnez le **base de données SQL Server** modèle (voir Figure 3).</span><span class="sxs-lookup"><span data-stu-id="f2c3b-171">Select the **Data** category and select the **SQL Server Database** template (see Figure 3).</span></span>
3. <span data-ttu-id="f2c3b-172">Nommez votre nouvelle base de données *MoviesDB.mdf* et cliquez sur le **ajouter** bouton.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-172">Name your new database *MoviesDB.mdf* and click the **Add** button.</span></span>

<span data-ttu-id="f2c3b-173">Après avoir créé votre base de données, vous pouvez vous connecter à la base de données en double-cliquant sur le fichier MoviesDB.mdf situé dans l’application\_dossier de données.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-173">After you create your database, you can connect to the database by double-clicking the MoviesDB.mdf file located in the App\_Data folder.</span></span> <span data-ttu-id="f2c3b-174">Double-cliquez sur le fichier MoviesDB.mdf la fenêtre Explorateur de serveurs.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-174">Double-clicking the MoviesDB.mdf file opens the Server Explorer window.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="f2c3b-175">La fenêtre Explorateur de serveurs est nommée de la fenêtre Explorateur de base de données dans le cas de Visual Web Developer.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-175">The Server Explorer window is named the Database Explorer window in the case of Visual Web Developer.</span></span>


<span data-ttu-id="f2c3b-176">[![La boîte de dialogue Nouveau projet](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image3.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="f2c3b-176">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image3.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image5.png)</span></span>

<span data-ttu-id="f2c3b-177">**Figure 03**: Création d’une base de données Microsoft SQL Server ([cliquez pour afficher l’image en taille réelle](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="f2c3b-177">**Figure 03**: Creating a Microsoft SQL Server Database ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image6.png))</span></span>


<span data-ttu-id="f2c3b-178">Ensuite, nous devons créer une nouvelle table de base de données.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-178">Next, we need to create a new database table.</span></span> <span data-ttu-id="f2c3b-179">Dans la fenêtre Explorateur de serveurs, cliquez sur le dossier Tables et sélectionnez l’option de menu **ajouter une nouvelle Table**.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-179">From within the Sever Explorer window, right-click the Tables folder and select the menu option **Add New Table**.</span></span> <span data-ttu-id="f2c3b-180">Cette option de menu ouvre le Concepteur de tables de base de données.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-180">Selecting this menu option opens the database table designer.</span></span> <span data-ttu-id="f2c3b-181">Créez les colonnes de base de données suivantes :</span><span class="sxs-lookup"><span data-stu-id="f2c3b-181">Create the following database columns:</span></span>

<a id="0.1_table01"></a>


| <span data-ttu-id="f2c3b-182">**Nom de la colonne**</span><span class="sxs-lookup"><span data-stu-id="f2c3b-182">**Column Name**</span></span> | <span data-ttu-id="f2c3b-183">**Type de données**</span><span class="sxs-lookup"><span data-stu-id="f2c3b-183">**Data Type**</span></span> | <span data-ttu-id="f2c3b-184">**Null autorisé**</span><span class="sxs-lookup"><span data-stu-id="f2c3b-184">**Allow Nulls**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="f2c3b-185">Id</span><span class="sxs-lookup"><span data-stu-id="f2c3b-185">Id</span></span> | <span data-ttu-id="f2c3b-186">Int</span><span class="sxs-lookup"><span data-stu-id="f2c3b-186">Int</span></span> | <span data-ttu-id="f2c3b-187">False</span><span class="sxs-lookup"><span data-stu-id="f2c3b-187">False</span></span> |
| <span data-ttu-id="f2c3b-188">Titre</span><span class="sxs-lookup"><span data-stu-id="f2c3b-188">Title</span></span> | <span data-ttu-id="f2c3b-189">Nvarchar(100)</span><span class="sxs-lookup"><span data-stu-id="f2c3b-189">Nvarchar(100)</span></span> | <span data-ttu-id="f2c3b-190">False</span><span class="sxs-lookup"><span data-stu-id="f2c3b-190">False</span></span> |
| <span data-ttu-id="f2c3b-191">Directeur</span><span class="sxs-lookup"><span data-stu-id="f2c3b-191">Director</span></span> | <span data-ttu-id="f2c3b-192">Nvarchar(100)</span><span class="sxs-lookup"><span data-stu-id="f2c3b-192">Nvarchar(100)</span></span> | <span data-ttu-id="f2c3b-193">False</span><span class="sxs-lookup"><span data-stu-id="f2c3b-193">False</span></span> |
| <span data-ttu-id="f2c3b-194">DateReleased</span><span class="sxs-lookup"><span data-stu-id="f2c3b-194">DateReleased</span></span> | <span data-ttu-id="f2c3b-195">DateTime</span><span class="sxs-lookup"><span data-stu-id="f2c3b-195">DateTime</span></span> | <span data-ttu-id="f2c3b-196">False</span><span class="sxs-lookup"><span data-stu-id="f2c3b-196">False</span></span> |


<span data-ttu-id="f2c3b-197">La première colonne, la colonne Id, a deux propriétés spéciales.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-197">The first column, the Id column, has two special properties.</span></span> <span data-ttu-id="f2c3b-198">Tout d’abord, vous devez marquer la colonne Id en tant que colonne de clé primaire.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-198">First, you need to mark the Id column as the primary key column.</span></span> <span data-ttu-id="f2c3b-199">Après avoir sélectionné la colonne Id, cliquez sur le **définir la clé primaire** bouton (il s’agit de l’icône qui ressemble à une clé).</span><span class="sxs-lookup"><span data-stu-id="f2c3b-199">After selecting the Id column, click the **Set Primary Key** button (it is the icon that looks like a key).</span></span> <span data-ttu-id="f2c3b-200">Deuxièmement, vous devez marquer la colonne d’Id comme une colonne d’identité.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-200">Second, you need to mark the Id column as an Identity column.</span></span> <span data-ttu-id="f2c3b-201">Dans la fenêtre Propriétés de la colonne, faites défiler jusqu'à la section de la spécification d’identité et développez-le.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-201">In the Column Properties window, scroll down to the Identity Specification section and expand it.</span></span> <span data-ttu-id="f2c3b-202">Modifier le **est d’identité** valeur à la propriété **Oui**.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-202">Change the **Is Identity** property to the value **Yes**.</span></span> <span data-ttu-id="f2c3b-203">Lorsque vous avez terminé, la table doit ressembler à la Figure 4.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-203">When you are finished, the table should look like Figure 4.</span></span>


<span data-ttu-id="f2c3b-204">[![La boîte de dialogue Nouveau projet](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image4.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="f2c3b-204">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image4.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image7.png)</span></span>

<span data-ttu-id="f2c3b-205">**Figure 04**: La table de base de données de films ([cliquez pour afficher l’image en taille réelle](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="f2c3b-205">**Figure 04**: The Movies database table ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image8.png))</span></span>


<span data-ttu-id="f2c3b-206">L’étape finale consiste à enregistrer la nouvelle table.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-206">The final step is to save the new table.</span></span> <span data-ttu-id="f2c3b-207">Cliquez sur le bouton Enregistrer (l’icône de disquette) et donnez à la nouvelle table les films de nom.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-207">Click the Save button (the icon of the floppy) and give the new table the name Movies.</span></span>

<span data-ttu-id="f2c3b-208">Une fois que vous avez terminé la création de la table, ajouter des enregistrements de film à la table.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-208">After you finish creating the table, add some movie records to the table.</span></span> <span data-ttu-id="f2c3b-209">Avec le bouton droit de la table de films dans la fenêtre Explorateur de serveurs, puis sélectionnez l’option de menu **afficher les données de Table**.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-209">Right-click the Movies table in the Server Explorer window and select the menu option **Show Table Data**.</span></span> <span data-ttu-id="f2c3b-210">Entrez une liste de vos films préférés (voir Figure 5).</span><span class="sxs-lookup"><span data-stu-id="f2c3b-210">Enter a list of your favorite movies (see Figure 5).</span></span>


<span data-ttu-id="f2c3b-211">[![La boîte de dialogue Nouveau projet](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image5.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="f2c3b-211">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image5.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image9.png)</span></span>

<span data-ttu-id="f2c3b-212">**Figure 05**: Saisie des enregistrements de film ([cliquez pour afficher l’image en taille réelle](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="f2c3b-212">**Figure 05**: Entering movie records ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image10.png))</span></span>


## <a name="creating-the-model"></a><span data-ttu-id="f2c3b-213">Création du modèle</span><span class="sxs-lookup"><span data-stu-id="f2c3b-213">Creating the Model</span></span>

<span data-ttu-id="f2c3b-214">Nous devons ensuite créer un ensemble de classes pour représenter de notre base de données.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-214">We next need to create a set of classes to represent our database.</span></span> <span data-ttu-id="f2c3b-215">Nous devons créer un modèle de base de données.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-215">We need to create a database model.</span></span> <span data-ttu-id="f2c3b-216">Nous allons tirer parti de Microsoft Entity Framework pour générer les classes pour notre modèle de base de données automatiquement.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-216">We'll take advantage of the Microsoft Entity Framework to generate the classes for our database model automatically.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="f2c3b-217">L’infrastructure ASP.NET MVC n’est pas lié à Microsoft Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-217">The ASP.NET MVC framework is not tied to the Microsoft Entity Framework.</span></span> <span data-ttu-id="f2c3b-218">Vous pouvez créer des classes de modèle de votre base de données en tirant parti d’une variété de mappage relationnel objet (ou / M) des outils y compris LINQ to SQL, Subsonic et NHibernate.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-218">You can create your database model classes by taking advantage of a variety of Object Relational Mapping (OR/M) tools including LINQ to SQL, Subsonic, and NHibernate.</span></span>


<span data-ttu-id="f2c3b-219">Suivez ces étapes pour lancer l’Assistant Entity Data Model :</span><span class="sxs-lookup"><span data-stu-id="f2c3b-219">Follow these steps to launch the Entity Data Model Wizard:</span></span>

1. <span data-ttu-id="f2c3b-220">Cliquez sur le dossier de modèles dans la fenêtre Explorateur de solutions puis sélectionnez l’option de menu **ajouter, nouvel élément**.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-220">Right-click the Models folder in the Solution Explorer window and the select the menu option **Add, New Item**.</span></span>
2. <span data-ttu-id="f2c3b-221">Sélectionnez le **données** catégorie, puis sélectionnez le **ADO.NET Entity Data Model** modèle.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-221">Select the **Data** category and select the **ADO.NET Entity Data Model** template.</span></span>
3. <span data-ttu-id="f2c3b-222">Nommez votre modèle de données *MoviesDBModel.edmx* et cliquez sur le **ajouter** bouton.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-222">Give your data model the name *MoviesDBModel.edmx* and click the **Add** button.</span></span>

<span data-ttu-id="f2c3b-223">Après avoir cliqué sur le bouton Ajouter, l’Assistant Entity Data Model s’affiche (voir Figure 6).</span><span class="sxs-lookup"><span data-stu-id="f2c3b-223">After you click the Add button, the Entity Data Model Wizard appears (see Figure 6).</span></span> <span data-ttu-id="f2c3b-224">Suivez ces étapes pour terminer l’Assistant :</span><span class="sxs-lookup"><span data-stu-id="f2c3b-224">Follow these steps to complete the wizard:</span></span>

1. <span data-ttu-id="f2c3b-225">Dans le **choisir le contenu du modèle** étape, sélectionnez le **générer à partir de la base de données** option.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-225">In the **Choose Model Contents** step, select the **Generate from database** option.</span></span>
2. <span data-ttu-id="f2c3b-226">Dans le **choisir votre connexion de données** étape, utilisez le *MoviesDB.mdf* connexion de données et le nom *MoviesDBEntities* des paramètres de connexion.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-226">In the **Choose Your Data Connection** step, use the *MoviesDB.mdf* data connection and the name *MoviesDBEntities* for the connection settings.</span></span> <span data-ttu-id="f2c3b-227">Cliquez sur le **suivant** bouton.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-227">Click the **Next** button.</span></span>
3. <span data-ttu-id="f2c3b-228">Dans le **choisir vos objets de base de données** étape, développez le nœud Tables, sélectionnez la table de films.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-228">In the **Choose Your Database Objects** step, expand the Tables node, select the Movies table.</span></span> <span data-ttu-id="f2c3b-229">Entrez l’espace de noms *MovieApp.Models* et cliquez sur le **Terminer** bouton.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-229">Enter the namespace *MovieApp.Models* and click the **Finish** button.</span></span>


<span data-ttu-id="f2c3b-230">[![La boîte de dialogue Nouveau projet](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image6.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="f2c3b-230">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image6.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image11.png)</span></span>

<span data-ttu-id="f2c3b-231">**Figure 06**: Génération d’un modèle de base de données avec l’Assistant Entity Data Model ([cliquez pour afficher l’image en taille réelle](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="f2c3b-231">**Figure 06**: Generating a database model with the Entity Data Model Wizard ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image12.png))</span></span>


<span data-ttu-id="f2c3b-232">Après avoir terminé l’Assistant Entity Data Model, Entity Data Model Designer s’ouvre.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-232">After you complete the Entity Data Model Wizard, the Entity Data Model Designer opens.</span></span> <span data-ttu-id="f2c3b-233">Le concepteur doit afficher la table de base de données de films (voir la Figure 7).</span><span class="sxs-lookup"><span data-stu-id="f2c3b-233">The Designer should display the Movies database table (see Figure 7).</span></span>


<span data-ttu-id="f2c3b-234">[![La boîte de dialogue Nouveau projet](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image7.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="f2c3b-234">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image7.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image13.png)</span></span>

<span data-ttu-id="f2c3b-235">**Figure 07**: L’Entity Data Model Designer ([cliquez pour afficher l’image en taille réelle](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="f2c3b-235">**Figure 07**: The Entity Data Model Designer ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image14.png))</span></span>


<span data-ttu-id="f2c3b-236">Nous devons apporter une modification avant de continuer.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-236">We need to make one change before we continue.</span></span> <span data-ttu-id="f2c3b-237">L’Assistant génère une classe de modèle nommée *films* qui représente la table de base de données de films.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-237">The Entity Data Wizard generates a model class named *Movies* that represents the Movies database table.</span></span> <span data-ttu-id="f2c3b-238">Étant donné que nous allons utiliser la classe de films pour représenter un film, nous devons modifier le nom de la classe à être *film* au lieu de *films* (singulier plutôt qu’au pluriel).</span><span class="sxs-lookup"><span data-stu-id="f2c3b-238">Because we'll use the Movies class to represent a particular movie, we need to modify the name of the class to be *Movie* instead of *Movies* (singular rather than plural).</span></span>

<span data-ttu-id="f2c3b-239">Double-cliquez sur le nom de la classe sur l’aire du concepteur et modifiez le nom de la classe films par film.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-239">Double-click the name of the class on the designer surface and change the name of the class from Movies to Movie.</span></span> <span data-ttu-id="f2c3b-240">Après avoir apporté cette modification, cliquez sur le **enregistrer** bouton (l’icône de la disquette) pour générer la classe Movie.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-240">After making this change, click the **Save** button (the icon of the floppy disk) to generate the Movie class.</span></span>

## <a name="creating-the-aspnet-mvc-controller"></a><span data-ttu-id="f2c3b-241">Création du contrôleur ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="f2c3b-241">Creating the ASP.NET MVC Controller</span></span>

<span data-ttu-id="f2c3b-242">L’étape suivante consiste à créer le contrôleur ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-242">The next step is to create the ASP.NET MVC controller.</span></span> <span data-ttu-id="f2c3b-243">Un contrôleur est chargé de contrôler la façon dont un utilisateur interagit avec une application ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-243">A controller is responsible for controlling how a user interacts with an ASP.NET MVC application.</span></span>

<span data-ttu-id="f2c3b-244">Procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="f2c3b-244">Follow these steps:</span></span>

1. <span data-ttu-id="f2c3b-245">Dans la fenêtre Explorateur de solutions, cliquez sur le dossier contrôleurs, puis sélectionnez l’option de menu **ajouter, de contrôleur**.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-245">In the Solution Explorer window, right-click the Controllers folder and select the menu option **Add, Controller**.</span></span>
2. <span data-ttu-id="f2c3b-246">Dans la boîte de dialogue Ajouter un contrôleur, entrez le nom *HomeController* et cochez la case à cocher **ajouter des méthodes d’action pour les scénarios Create, Update et Details** (voir Figure 8).</span><span class="sxs-lookup"><span data-stu-id="f2c3b-246">In the Add Controller dialog, enter the name *HomeController* and check the checkbox labeled **Add action methods for Create, Update, and Details scenarios** (see Figure 8).</span></span>
3. <span data-ttu-id="f2c3b-247">Cliquez sur le **ajouter** pour ajouter le nouveau contrôleur à votre projet.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-247">Click the **Add** button to add the new controller to your project.</span></span>

<span data-ttu-id="f2c3b-248">Après avoir effectué ces étapes, le contrôleur dans la liste 1 est créé.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-248">After you complete these steps, the controller in Listing 1 is created.</span></span> <span data-ttu-id="f2c3b-249">Notez qu’il contient des méthodes nommées d’Index, plus d’informations, créer et le modifier.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-249">Notice that it contains methods named Index, Details, Create, and Edit.</span></span> <span data-ttu-id="f2c3b-250">Dans les sections suivantes, nous allons ajouter le code nécessaire pour obtenir ces méthodes fonctionnent.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-250">In the following sections, we'll add the necessary code to get these methods to work.</span></span>


<span data-ttu-id="f2c3b-251">[![La boîte de dialogue Nouveau projet](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image8.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="f2c3b-251">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image8.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image15.png)</span></span>

<span data-ttu-id="f2c3b-252">**Figure 08**: Ajoutez un nouveau contrôleur de MVC ASP.NET ([cliquez pour afficher l’image en taille réelle](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="f2c3b-252">**Figure 08**: Adding a new ASP.NET MVC Controller ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image16.png))</span></span>


<span data-ttu-id="f2c3b-253">**Liste 1 – Controllers\HomeController.cs**</span><span class="sxs-lookup"><span data-stu-id="f2c3b-253">**Listing 1 – Controllers\HomeController.cs**</span></span>

[!code-csharp[Main](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/samples/sample1.cs)]

## <a name="listing-database-records"></a><span data-ttu-id="f2c3b-254">Enregistrements de base de données de liste</span><span class="sxs-lookup"><span data-stu-id="f2c3b-254">Listing Database Records</span></span>

<span data-ttu-id="f2c3b-255">La méthode Index() du contrôleur Home est la méthode par défaut pour une application ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-255">The Index() method of the Home controller is the default method for an ASP.NET MVC application.</span></span> <span data-ttu-id="f2c3b-256">Lorsque vous exécutez une application ASP.NET MVC, la méthode Index() est la première méthode de contrôleur qui est appelée.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-256">When you run an ASP.NET MVC application, the Index() method is the first controller method that is called.</span></span>

<span data-ttu-id="f2c3b-257">Nous allons utiliser la méthode Index() pour afficher la liste des enregistrements de la table de base de données de films.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-257">We'll use the Index() method to display the list of records from the Movies database table.</span></span> <span data-ttu-id="f2c3b-258">Nous allons tirer parti de la base de données de classes de modèle que nous avons créés précédemment pour récupérer les enregistrements de base de données de film avec la méthode Index().</span><span class="sxs-lookup"><span data-stu-id="f2c3b-258">We'll take advantage of the database model classes that we created earlier to retrieve the movie database records with the Index() method.</span></span>

<span data-ttu-id="f2c3b-259">J’ai modifié la classe HomeController dans le Listing 2 pour qu’il contienne un nouveau champ privé nommé \_db.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-259">I've modified the HomeController class in Listing 2 so that it contains a new private field named \_db.</span></span> <span data-ttu-id="f2c3b-260">La classe MoviesDBEntities représente notre modèle de base de données et nous allons utiliser cette classe pour communiquer avec notre base de données.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-260">The MoviesDBEntities class represents our database model and we'll use this class to communicate with our database.</span></span>

<span data-ttu-id="f2c3b-261">J’ai également modifié la méthode Index() dans le Listing 2.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-261">I've also modified the Index() method in Listing 2.</span></span> <span data-ttu-id="f2c3b-262">La méthode Index() utilise la classe MoviesDBEntities pour récupérer tous les enregistrements de film à partir de la table de base de données de films.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-262">The Index() method uses the MoviesDBEntities class to retrieve all of the movie records from the Movies database table.</span></span> <span data-ttu-id="f2c3b-263">L’expression  *\_db. MovieSet.ToList()* retourne une liste de tous les enregistrements de film à partir de la table de base de données de films.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-263">The expression *\_db.MovieSet.ToList()* returns a list of all of the movie records from the Movies database table.</span></span>

<span data-ttu-id="f2c3b-264">La liste de films est passée à la vue.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-264">The list of movies is passed to the view.</span></span> <span data-ttu-id="f2c3b-265">Tout ce qui est passé à la méthode View() Obtient passé à la vue en tant que données d’affichage.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-265">Anything that gets passed to the View() method gets passed to the view as view data.</span></span>

<span data-ttu-id="f2c3b-266">**Listing 2 – Controllers/HomeController.cs (méthode Index modifiée)**</span><span class="sxs-lookup"><span data-stu-id="f2c3b-266">**Listing 2 – Controllers/HomeController.cs (modified Index method)**</span></span>

[!code-csharp[Main](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/samples/sample2.cs)]

<span data-ttu-id="f2c3b-267">La méthode Index() retourne une vue nommée des Index.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-267">The Index() method returns a view named Index.</span></span> <span data-ttu-id="f2c3b-268">Nous devons créer cette vue pour afficher la liste des enregistrements de base de données de film.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-268">We need to create this view to display the list of movie database records.</span></span> <span data-ttu-id="f2c3b-269">Procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="f2c3b-269">Follow these steps:</span></span>


<span data-ttu-id="f2c3b-270">Vous devez générer votre projet (sélectionnez l’option de menu **créer, générer la Solution**) avant d’ouvrir le **ajouter une vue** boîte de dialogue ou aucune classe s’affiche dans le **afficher la classe de données** liste déroulante.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-270">You should build your project (select the menu option **Build, Build Solution**) before opening the **Add View** dialog or no classes will appear in the **View data class** dropdown list.</span></span>


1. <span data-ttu-id="f2c3b-271">Avec le bouton droit de la méthode Index() dans l’éditeur de code et sélectionnez l’option de menu **ajouter une vue** (voir la Figure 9).</span><span class="sxs-lookup"><span data-stu-id="f2c3b-271">Right-click the Index() method in the code editor and select the menu option **Add View** (see Figure 9).</span></span>
2. <span data-ttu-id="f2c3b-272">Dans la boîte de dialogue Ajouter une vue, vérifiez que la case à cocher intitulée **créer une vue fortement typée** est activée.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-272">In the Add View dialog, verify that the checkbox labeled **Create a strongly-typed view** is checked.</span></span>
3. <span data-ttu-id="f2c3b-273">À partir de la **afficher le contenu** liste déroulante, sélectionnez la valeur *liste*.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-273">From the **View content** dropdown list, select the value *List*.</span></span>
4. <span data-ttu-id="f2c3b-274">À partir de la **afficher la classe de données** liste déroulante, sélectionnez la valeur *MovieApp.Models.Movie*.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-274">From the **View data class** dropdown list, select the value *MovieApp.Models.Movie*.</span></span>
5. <span data-ttu-id="f2c3b-275">Cliquez sur le bouton Ajouter pour créer le nouveau afficher (voir Figure 10).</span><span class="sxs-lookup"><span data-stu-id="f2c3b-275">Click the Add button to create the new view (see Figure 10).</span></span>

<span data-ttu-id="f2c3b-276">Après avoir effectué ces étapes, une nouvelle vue nommée Index.aspx est ajoutée au dossier Views\Home.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-276">After you complete these steps, a new view named Index.aspx is added to the Views\Home folder.</span></span> <span data-ttu-id="f2c3b-277">Le contenu de la vue Index est inclus dans le Listing 3.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-277">The contents of the Index view are included in Listing 3.</span></span>


<span data-ttu-id="f2c3b-278">[![La boîte de dialogue Nouveau projet](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image9.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="f2c3b-278">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image9.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image17.png)</span></span>

<span data-ttu-id="f2c3b-279">**Figure 09**: Ajout d’une vue à partir d’une action de contrôleur ([cliquez pour afficher l’image en taille réelle](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="f2c3b-279">**Figure 09**: Adding a view from a controller action ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image18.png))</span></span>


<span data-ttu-id="f2c3b-280">[![La boîte de dialogue Nouveau projet](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image10.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="f2c3b-280">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image10.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image19.png)</span></span>

<span data-ttu-id="f2c3b-281">**Figure 10**: Création d’une nouvelle vue avec la boîte de dialogue Ajouter une vue ([cliquez pour afficher l’image en taille réelle](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="f2c3b-281">**Figure 10**: Creating a new view with the Add View dialog ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image20.png))</span></span>


<span data-ttu-id="f2c3b-282">**Liste 3 – Views\Home\Index.aspx**</span><span class="sxs-lookup"><span data-stu-id="f2c3b-282">**Listing 3 – Views\Home\Index.aspx**</span></span>

[!code-aspx[Main](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/samples/sample3.aspx)]

<span data-ttu-id="f2c3b-283">La vue Index affiche tous les enregistrements de film à partir de la table de base de données de films dans une table HTML.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-283">The Index view displays all of the movie records from the Movies database table within an HTML table.</span></span> <span data-ttu-id="f2c3b-284">La vue contient une boucle foreach qui effectue une itération dans chaque film représentée par la propriété ViewData.Model.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-284">The view contains a foreach loop that iterates through each movie represented by the ViewData.Model property.</span></span> <span data-ttu-id="f2c3b-285">Si vous exécutez votre application en appuyant sur la touche F5, vous verrez la page web dans la Figure 11.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-285">If you run your application by hitting the F5 key, then you'll see the web page in Figure 11.</span></span>


<span data-ttu-id="f2c3b-286">[![La boîte de dialogue Nouveau projet](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image11.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="f2c3b-286">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image11.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image21.png)</span></span>

<span data-ttu-id="f2c3b-287">**Figure 11**: La vue Index ([cliquez pour afficher l’image en taille réelle](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image22.png))</span><span class="sxs-lookup"><span data-stu-id="f2c3b-287">**Figure 11**: The Index view ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image22.png))</span></span>


## <a name="creating-new-database-records"></a><span data-ttu-id="f2c3b-288">Création de nouveaux enregistrements de base de données</span><span class="sxs-lookup"><span data-stu-id="f2c3b-288">Creating New Database Records</span></span>

<span data-ttu-id="f2c3b-289">La vue Index que nous avons créé dans la section précédente inclut un lien pour la création de nouveaux enregistrements de base de données.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-289">The Index view that we created in the previous section includes a link for creating new database records.</span></span> <span data-ttu-id="f2c3b-290">Poursuivons et implémenter la logique et créer la vue nécessaire pour la création de nouveaux enregistrements de base de données de film.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-290">Let's go ahead and implement the logic and create the view necessary for creating new movie database records.</span></span>

<span data-ttu-id="f2c3b-291">Le contrôleur Home contient deux méthodes nommées Create().</span><span class="sxs-lookup"><span data-stu-id="f2c3b-291">The Home controller contains two methods named Create().</span></span> <span data-ttu-id="f2c3b-292">La première méthode Create() n’a aucun paramètre.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-292">The first Create() method has no parameters.</span></span> <span data-ttu-id="f2c3b-293">Cette surcharge de la méthode Create() est utilisée pour afficher le formulaire HTML pour la création d’un nouvel enregistrement de base de données de film.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-293">This overload of the Create() method is used to display the HTML form for creating a new movie database record.</span></span>

<span data-ttu-id="f2c3b-294">La deuxième méthode Create() a un paramètre FormCollection.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-294">The second Create() method has a FormCollection parameter.</span></span> <span data-ttu-id="f2c3b-295">Cette surcharge de la méthode Create() est appelée lorsque le formulaire HTML pour la création d’un nouveau film est publié sur le serveur.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-295">This overload of the Create() method is called when the HTML form for creating a new movie is posted to the server.</span></span> <span data-ttu-id="f2c3b-296">Notez que cette deuxième méthode Create() a un attribut AcceptVerbs qui empêche la méthode, sauf si une opération HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-296">Notice that this second Create() method has an AcceptVerbs attribute that prevents the method from being called unless an HTTP POST operation is performed.</span></span>

<span data-ttu-id="f2c3b-297">Cette deuxième méthode Create() a été modifiée dans la classe HomeController mis à jour sur la liste 4.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-297">This second Create() method has been modified in the updated HomeController class in Listing 4.</span></span> <span data-ttu-id="f2c3b-298">La nouvelle version de la méthode Create() accepte un paramètre de film et contient la logique pour l’insertion d’un nouveau film dans la table de base de données de films.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-298">The new version of the Create() method accepts a Movie parameter and contains the logic for inserting a new movie into the Movies database table.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="f2c3b-299">Notez que l’attribut de liaison.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-299">Notice the Bind attribute.</span></span> <span data-ttu-id="f2c3b-300">Étant donné que nous ne souhaitez pas mettre à jour la propriété d’Id de film à partir du formulaire HTML, nous devons exclure explicitement cette propriété.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-300">Because we don't want to update the Movie Id property from HTML form, we need to explicitly exclude this property.</span></span>


<span data-ttu-id="f2c3b-301">**Liste 4 – Controllers\HomeController.cs (méthode Create modifié)**</span><span class="sxs-lookup"><span data-stu-id="f2c3b-301">**Listing 4 – Controllers\HomeController.cs (modified Create method)**</span></span>

[!code-csharp[Main](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/samples/sample4.cs)]

<span data-ttu-id="f2c3b-302">Visual Studio vous permet de créer le formulaire pour la création d’une nouvelle base de données de film enregistrer (voir Figure 12).</span><span class="sxs-lookup"><span data-stu-id="f2c3b-302">Visual Studio makes it easy to create the form for creating a new movie database record (see Figure 12).</span></span> <span data-ttu-id="f2c3b-303">Procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="f2c3b-303">Follow these steps:</span></span>

1. <span data-ttu-id="f2c3b-304">Avec le bouton droit de la méthode Create() dans l’éditeur de code et sélectionnez l’option de menu **ajouter une vue**.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-304">Right-click the Create() method in the code editor and select the menu option **Add View**.</span></span>
2. <span data-ttu-id="f2c3b-305">Vérifiez que la case à cocher intitulée **créer une vue fortement typée** est activée.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-305">Verify that the checkbox labeled **Create a strongly-typed view** is checked.</span></span>
3. <span data-ttu-id="f2c3b-306">À partir de la **afficher le contenu** liste déroulante, sélectionnez la valeur *créer*.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-306">From the **View content** dropdown list, select the value *Create*.</span></span>
4. <span data-ttu-id="f2c3b-307">À partir de la **afficher la classe de données** liste déroulante, sélectionnez la valeur *MovieApp.Models.Movie*.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-307">From the **View data class** dropdown list, select the value *MovieApp.Models.Movie*.</span></span>
5. <span data-ttu-id="f2c3b-308">Cliquez sur le **ajouter** bouton permettant de créer la nouvelle vue.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-308">Click the **Add** button to create the new view.</span></span>


<span data-ttu-id="f2c3b-309">[![La boîte de dialogue Nouveau projet](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image12.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="f2c3b-309">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image12.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image23.png)</span></span>

<span data-ttu-id="f2c3b-310">**Figure 12**: Ajout de la vue Create ([cliquez pour afficher l’image en taille réelle](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="f2c3b-310">**Figure 12**: Adding the Create view ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image24.png))</span></span>


<span data-ttu-id="f2c3b-311">Visual Studio génère la vue dans la liste 5 automatiquement.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-311">Visual Studio generates the view in Listing 5 automatically.</span></span> <span data-ttu-id="f2c3b-312">Cette vue contient un formulaire HTML qui comprend des champs qui correspondent à chacune des propriétés de la classe Movie.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-312">This view contains an HTML form that includes fields that correspond to each of the properties of the Movie class.</span></span>

<span data-ttu-id="f2c3b-313">**Liste 5 – Views\Home\Create.aspx**</span><span class="sxs-lookup"><span data-stu-id="f2c3b-313">**Listing 5 – Views\Home\Create.aspx**</span></span>

[!code-aspx[Main](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/samples/sample5.aspx)]

> [!NOTE] 
> 
> <span data-ttu-id="f2c3b-314">Le formulaire HTML généré par la boîte de dialogue Ajouter une vue génère un champ de formulaire Id.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-314">The HTML form generated by the Add View dialog generates an Id form field.</span></span> <span data-ttu-id="f2c3b-315">Étant donné que la colonne Id est une colonne d’identité, nous n’avons pas ce champ de formulaire et vous pouvez le supprimer en toute sécurité.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-315">Because the Id column is an Identity column, we don't need this form field and you can safely remove it.</span></span>


<span data-ttu-id="f2c3b-316">Après avoir ajouté la vue de créer, vous pouvez ajouter de nouveaux enregistrements de film à la base de données.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-316">After you add the Create view, you can add new Movie records to the database.</span></span> <span data-ttu-id="f2c3b-317">Exécutez votre application en appuyant sur la touche F5 et cliquez sur le lien Créer un nouveau pour voir le formulaire à la Figure 13.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-317">Run your application by pressing the F5 key and click the Create New link to see the form in Figure 13.</span></span> <span data-ttu-id="f2c3b-318">Si vous créez et envoyez le formulaire, un nouvel enregistrement de base de données de film est créé.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-318">If you complete and submit the form, a new movie database record is created.</span></span>

<span data-ttu-id="f2c3b-319">Notez que vous obtenez automatiquement la validation de formulaire.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-319">Notice that you get form validation automatically.</span></span> <span data-ttu-id="f2c3b-320">Si vous oubliez d’entrer une date de publication pour un film ou si vous entrez une date de publication non valide, le formulaire est réaffiché, puis le champ de date de mise en production est mis en surbrillance.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-320">If you neglect to enter a release date for a movie, or you enter an invalid release date, then the form is redisplayed and the release date field is highlighted.</span></span>


<span data-ttu-id="f2c3b-321">[![La boîte de dialogue Nouveau projet](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image13.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="f2c3b-321">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image13.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image25.png)</span></span>

<span data-ttu-id="f2c3b-322">**Figure 13**: Création d’un nouvel enregistrement de base de données de film ([cliquez pour afficher l’image en taille réelle](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image26.png))</span><span class="sxs-lookup"><span data-stu-id="f2c3b-322">**Figure 13**: Creating a new movie database record ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image26.png))</span></span>


## <a name="editing-existing-database-records"></a><span data-ttu-id="f2c3b-323">Modification des enregistrements de base de données existants</span><span class="sxs-lookup"><span data-stu-id="f2c3b-323">Editing Existing Database Records</span></span>

<span data-ttu-id="f2c3b-324">Dans les sections précédentes, nous avons abordé la façon dont vous pouvez répertorier et créer de nouveaux enregistrements de base de données.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-324">In the previous sections, we discussed how you can list and create new database records.</span></span> <span data-ttu-id="f2c3b-325">Dans cette dernière section, nous abordons la façon dont vous pouvez modifier les enregistrements de base de données existants.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-325">In this final section, we discuss how you can edit existing database records.</span></span>

<span data-ttu-id="f2c3b-326">Tout d’abord, nous devons générer le formulaire d’édition.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-326">First, we need to generate the Edit form.</span></span> <span data-ttu-id="f2c3b-327">Cette étape est facile, car Visual Studio générera automatiquement le formulaire d’édition pour nous.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-327">This step is easy since Visual Studio will generate the Edit form for us automatically.</span></span> <span data-ttu-id="f2c3b-328">Ouvrez la classe HomeController.cs dans l’éditeur de code Visual Studio et procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="f2c3b-328">Open the HomeController.cs class in the Visual Studio code editor and follow these steps:</span></span>

1. <span data-ttu-id="f2c3b-329">Avec le bouton droit de la méthode Edit() dans l’éditeur de code et sélectionnez l’option de menu **ajouter une vue** (voir Figure 14).</span><span class="sxs-lookup"><span data-stu-id="f2c3b-329">Right-click the Edit() method in the code editor and select the menu option **Add View** (see Figure 14).</span></span>
2. <span data-ttu-id="f2c3b-330">Cochez la case intitulée **créer une vue fortement typée**.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-330">Check the checkbox labeled **Create a strongly-typed view**.</span></span>
3. <span data-ttu-id="f2c3b-331">À partir de la **afficher le contenu** liste déroulante, sélectionnez la valeur *modifier*.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-331">From the **View content** dropdown list, select the value *Edit*.</span></span>
4. <span data-ttu-id="f2c3b-332">À partir de la **afficher la classe de données** liste déroulante, sélectionnez la valeur *MovieApp.Models.Movie*.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-332">From the **View data class** dropdown list, select the value *MovieApp.Models.Movie*.</span></span>
5. <span data-ttu-id="f2c3b-333">Cliquez sur le **ajouter** bouton permettant de créer la nouvelle vue.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-333">Click the **Add** button to create the new view.</span></span>

<span data-ttu-id="f2c3b-334">Ces étapes ajoute une nouvelle vue nommée Edit.aspx dans le dossier Views\Home.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-334">Completing these steps adds a new view named Edit.aspx to the Views\Home folder.</span></span> <span data-ttu-id="f2c3b-335">Cette vue contient un formulaire HTML pour modifier un enregistrement de film.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-335">This view contains an HTML form for editing a movie record.</span></span>


<span data-ttu-id="f2c3b-336">[![La boîte de dialogue Nouveau projet](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image14.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="f2c3b-336">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image14.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image27.png)</span></span>

<span data-ttu-id="f2c3b-337">**Figure 14**: Ajout de la vue Edit ([cliquez pour afficher l’image en taille réelle](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image28.png))</span><span class="sxs-lookup"><span data-stu-id="f2c3b-337">**Figure 14**: Adding the Edit view ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image28.png))</span></span>


> [!NOTE] 
> 
> <span data-ttu-id="f2c3b-338">La vue Edit contient un champ de formulaire HTML qui correspond à la propriété Id de film.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-338">The Edit view contains an HTML form field that corresponds to the Movie Id property.</span></span> <span data-ttu-id="f2c3b-339">Étant donné que vous ne souhaitez pas modifier la valeur de la propriété Id des personnes, vous devez supprimer ce champ de formulaire.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-339">Because you don't want people editing the value of the Id property, you should remove this form field.</span></span>


<span data-ttu-id="f2c3b-340">Enfin, nous devons modifier le contrôleur Home afin qu’il prend en charge la modification d’un enregistrement de base de données.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-340">Finally, we need to modify the Home controller so that it supports editing a database record.</span></span> <span data-ttu-id="f2c3b-341">La classe HomeController mis à jour est contenue dans la liste 6.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-341">The updated HomeController class is contained in Listing 6.</span></span>

<span data-ttu-id="f2c3b-342">**Liste 6 – Controllers\HomeController.cs (méthodes de modification)**</span><span class="sxs-lookup"><span data-stu-id="f2c3b-342">**Listing 6 – Controllers\HomeController.cs (Edit methods)**</span></span>

[!code-csharp[Main](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/samples/sample6.cs)]

<span data-ttu-id="f2c3b-343">Dans la liste 6, j’ai ajouté une logique supplémentaire pour les deux surcharges de la méthode Edit().</span><span class="sxs-lookup"><span data-stu-id="f2c3b-343">In Listing 6, I've added additional logic to both overloads of the Edit() method.</span></span> <span data-ttu-id="f2c3b-344">La première méthode Edit() retourne l’enregistrement de base de données de film qui correspond au paramètre Id transmis à la méthode.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-344">The first Edit() method returns the movie database record that corresponds to the Id parameter passed to the method.</span></span> <span data-ttu-id="f2c3b-345">La deuxième surcharge effectue les mises à jour un enregistrement vidéo dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-345">The second overload performs the updates to a movie record in the database.</span></span>

<span data-ttu-id="f2c3b-346">Notez que vous devez récupérer le film d’origine et appelez ensuite ApplyPropertyChanges(), pour mettre à jour le film existant dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-346">Notice that you must retrieve the original movie, and then call ApplyPropertyChanges(), to update the existing movie in the database.</span></span>

## <a name="summary"></a><span data-ttu-id="f2c3b-347">Récapitulatif</span><span class="sxs-lookup"><span data-stu-id="f2c3b-347">Summary</span></span>

<span data-ttu-id="f2c3b-348">L’objectif de ce didacticiel était de vous donner une idée de l’expérience de création d’une application ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-348">The purpose of this tutorial was to give you a sense of the experience of building an ASP.NET MVC application.</span></span> <span data-ttu-id="f2c3b-349">J’espère que vous avez découvert que la création d’un ASP.NET MVC application web est très similaire à l’expérience de la création d’une application de Pages ASP ou ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-349">I hope that you discovered that building an ASP.NET MVC web application is very similar to the experience of building an Active Server Pages or ASP.NET application.</span></span>

<span data-ttu-id="f2c3b-350">Dans ce didacticiel, nous avons examiné uniquement les fonctionnalités de base de l’infrastructure ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-350">In this tutorial, we examined only the most basic features of the ASP.NET MVC framework.</span></span> <span data-ttu-id="f2c3b-351">Dans les didacticiels futures, nous approfondir des sujets tels que les contrôleurs, les actions de contrôleur, vues, afficher les données et programmes d’assistance HTML.</span><span class="sxs-lookup"><span data-stu-id="f2c3b-351">In future tutorials, we dive deeper into topics such as controllers, controller actions, views, view data, and HTML helpers.</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="f2c3b-352">Next</span><span class="sxs-lookup"><span data-stu-id="f2c3b-352">Next</span></span>](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-vb.md)

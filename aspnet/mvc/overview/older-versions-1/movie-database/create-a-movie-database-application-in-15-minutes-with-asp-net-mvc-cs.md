---
uid: mvc/overview/older-versions-1/movie-database/create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs
title: Créer une application de base de données de films en 15 minutesC#avec ASP.NET MVC () | Microsoft Docs
author: StephenWalther
description: Stephen Walther génère une application MVC ASP.NET basée sur une base de données complète, du début à la fin. Ce didacticiel est une introduction intéressante pour les personnes qui découvrent de nouveaux t...
ms.author: riande
ms.date: 01/27/2009
ms.assetid: dd1be137-91c5-47a8-8137-fecf0789c7f5
msc.legacyurl: /mvc/overview/older-versions-1/movie-database/create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs
msc.type: authoredcontent
ms.openlocfilehash: 1be5d135a44feb27626dd26a544b64cfb57b18a9
ms.sourcegitcommit: 22fbd8863672c4ad6693b8388ad5c8e753fb41a2
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 11/28/2019
ms.locfileid: "74596138"
---
# <a name="create-a-movie-database-application-in-15-minutes-with-aspnet-mvc-c"></a><span data-ttu-id="e32b4-104">Créer une application de base de données de films en 15 minutes avec ASP.NET MVC (C#)</span><span class="sxs-lookup"><span data-stu-id="e32b4-104">Create a Movie Database Application in 15 Minutes with ASP.NET MVC (C#)</span></span>

<span data-ttu-id="e32b4-105">par [Stephen Walther](https://github.com/StephenWalther)</span><span class="sxs-lookup"><span data-stu-id="e32b4-105">by [Stephen Walther](https://github.com/StephenWalther)</span></span>

[<span data-ttu-id="e32b4-106">Télécharger le code</span><span class="sxs-lookup"><span data-stu-id="e32b4-106">Download Code</span></span>](https://download.microsoft.com/download/7/2/8/728F8794-E59A-4D18-9A56-7AD2DB05BD9D/MovieApp_CS.zip)

> <span data-ttu-id="e32b4-107">Stephen Walther génère une application MVC ASP.NET basée sur une base de données complète, du début à la fin.</span><span class="sxs-lookup"><span data-stu-id="e32b4-107">Stephen Walther builds an entire database-driven ASP.NET MVC application from start to finish.</span></span> <span data-ttu-id="e32b4-108">Ce didacticiel est une introduction intéressante pour les personnes qui débutent dans l’infrastructure MVC ASP.NET et qui souhaitent avoir une idée du processus de création d’une application ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="e32b4-108">This tutorial is a great introduction for people who are new to the ASP.NET MVC Framework and who want to get a sense of the process of building an ASP.NET MVC application.</span></span>

<span data-ttu-id="e32b4-109">L’objectif de ce didacticiel est de vous faire une idée de « mon utilité » pour créer une application ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="e32b4-109">The purpose of this tutorial is to give you a sense of "what it is like" to build an ASP.NET MVC application.</span></span> <span data-ttu-id="e32b4-110">Dans ce didacticiel, j’ai créé une application ASP.NET MVC entière du début à la fin.</span><span class="sxs-lookup"><span data-stu-id="e32b4-110">In this tutorial, I blast through building an entire ASP.NET MVC application from start to finish.</span></span> <span data-ttu-id="e32b4-111">Je vous montre comment créer une application simple orientée base de données qui illustre comment vous pouvez répertorier, créer et modifier des enregistrements de base de données.</span><span class="sxs-lookup"><span data-stu-id="e32b4-111">I show you how to build a simple database-driven application that illustrates how you can list, create, and edit database records.</span></span>

<span data-ttu-id="e32b4-112">Pour simplifier le processus de création de notre application, nous allons tirer parti des fonctionnalités de génération de modèles automatique de Visual Studio 2008.</span><span class="sxs-lookup"><span data-stu-id="e32b4-112">To simplify the process of building our application, we'll take advantage of the scaffolding features of Visual Studio 2008.</span></span> <span data-ttu-id="e32b4-113">Nous allons laisser Visual Studio générer le code et le contenu initiaux de nos contrôleurs, modèles et vues.</span><span class="sxs-lookup"><span data-stu-id="e32b4-113">We'll let Visual Studio generate the initial code and content for our controllers, models, and views.</span></span>

<span data-ttu-id="e32b4-114">Si vous avez travaillé avec Active Server pages ou ASP.NET, vous devriez trouver ASP.NET MVC très familier.</span><span class="sxs-lookup"><span data-stu-id="e32b4-114">If you have worked with Active Server Pages or ASP.NET, then you should find ASP.NET MVC very familiar.</span></span> <span data-ttu-id="e32b4-115">Les vues MVC ASP.NET sont très similaires aux pages d’une application Active Server pages.</span><span class="sxs-lookup"><span data-stu-id="e32b4-115">ASP.NET MVC views are very much like the pages in an Active Server Pages application.</span></span> <span data-ttu-id="e32b4-116">Et, tout comme une application ASP.NET Web Forms traditionnelle, ASP.NET MVC vous offre un accès complet à l’ensemble complet des langages et des classes fournis par le .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="e32b4-116">And, just like a traditional ASP.NET Web Forms application, ASP.NET MVC provides you with full access to the rich set of languages and classes provided by the .NET framework.</span></span>

<span data-ttu-id="e32b4-117">Mon espoir est que ce didacticiel vous donnera une idée de la façon dont l’expérience de la création d’une application ASP.NET MVC est semblable et différente de l’expérience de création d’une application Active Server pages ou ASP.NET Web Forms.</span><span class="sxs-lookup"><span data-stu-id="e32b4-117">My hope is that this tutorial will give you a sense of how the experience of building an ASP.NET MVC application is both similar and different than the experience of building an Active Server Pages or ASP.NET Web Forms application.</span></span>

## <a name="overview-of-the-movie-database-application"></a><span data-ttu-id="e32b4-118">Vue d’ensemble de l’application de base de données de films</span><span class="sxs-lookup"><span data-stu-id="e32b4-118">Overview of the Movie Database Application</span></span>

<span data-ttu-id="e32b4-119">Étant donné que notre objectif est de simplifier les choses, nous allons créer une application de base de données de films très simple.</span><span class="sxs-lookup"><span data-stu-id="e32b4-119">Because our goal is to keep things simple, we'll build a very simple Movie Database application.</span></span> <span data-ttu-id="e32b4-120">Notre simple application de base de données Movie nous permettra de faire trois choses :</span><span class="sxs-lookup"><span data-stu-id="e32b4-120">Our simple Movie Database application will allow us to do three things:</span></span>

1. <span data-ttu-id="e32b4-121">Répertorier un ensemble d’enregistrements de base de données de films</span><span class="sxs-lookup"><span data-stu-id="e32b4-121">List a set of movie database records</span></span>
2. <span data-ttu-id="e32b4-122">Créer un enregistrement de base de données de films</span><span class="sxs-lookup"><span data-stu-id="e32b4-122">Create a new movie database record</span></span>
3. <span data-ttu-id="e32b4-123">Modifier un enregistrement de base de données Movie existant</span><span class="sxs-lookup"><span data-stu-id="e32b4-123">Edit an existing movie database record</span></span>

<span data-ttu-id="e32b4-124">Là encore, étant donné que nous souhaitons simplifier les choses, nous allons tirer parti du nombre minimal de fonctionnalités de l’infrastructure MVC ASP.NET nécessaire pour créer notre application.</span><span class="sxs-lookup"><span data-stu-id="e32b4-124">Again, because we want to keep things simple, we'll take advantage of the minimum number of features of the ASP.NET MVC framework needed to build our application.</span></span> <span data-ttu-id="e32b4-125">Par exemple, nous n’allons pas tirer parti du développement piloté par les tests.</span><span class="sxs-lookup"><span data-stu-id="e32b4-125">For example, we won't be taking advantage of Test-Driven Development.</span></span>

<span data-ttu-id="e32b4-126">Pour créer notre application, vous devez effectuer les étapes suivantes :</span><span class="sxs-lookup"><span data-stu-id="e32b4-126">In order to create our application, we need to complete each of the following steps:</span></span>

1. <span data-ttu-id="e32b4-127">Créer le projet d’application Web MVC ASP.NET</span><span class="sxs-lookup"><span data-stu-id="e32b4-127">Create the ASP.NET MVC Web Application Project</span></span>
2. <span data-ttu-id="e32b4-128">Créer la base de données</span><span class="sxs-lookup"><span data-stu-id="e32b4-128">Create the database</span></span>
3. <span data-ttu-id="e32b4-129">Créer le modèle de base de données</span><span class="sxs-lookup"><span data-stu-id="e32b4-129">Create the database model</span></span>
4. <span data-ttu-id="e32b4-130">Créer le contrôleur MVC ASP.NET</span><span class="sxs-lookup"><span data-stu-id="e32b4-130">Create the ASP.NET MVC controller</span></span>
5. <span data-ttu-id="e32b4-131">Créer les vues MVC ASP.NET</span><span class="sxs-lookup"><span data-stu-id="e32b4-131">Create the ASP.NET MVC views</span></span>

## <a name="preliminaries"></a><span data-ttu-id="e32b4-132">Préliminaires</span><span class="sxs-lookup"><span data-stu-id="e32b4-132">Preliminaries</span></span>

<span data-ttu-id="e32b4-133">Pour générer une application ASP.NET MVC, vous avez besoin de Visual Studio 2008 ou de Visual Web Developer 2008 Express.</span><span class="sxs-lookup"><span data-stu-id="e32b4-133">You'll need either Visual Studio 2008 or Visual Web Developer 2008 Express to build an ASP.NET MVC application.</span></span> <span data-ttu-id="e32b4-134">Vous devez également télécharger l’infrastructure MVC ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="e32b4-134">You also need to download the ASP.NET MVC framework.</span></span>

<span data-ttu-id="e32b4-135">Si vous ne possédez pas Visual Studio 2008, vous pouvez télécharger une version d’évaluation de 90 jour de Visual Studio 2008 à partir de ce site Web :</span><span class="sxs-lookup"><span data-stu-id="e32b4-135">If you don't own Visual Studio 2008, then you can download a 90 day trial version of Visual Studio 2008 from this website:</span></span>

[https://msdn.microsoft.com/vs2008/products/cc268305.aspx](https://msdn.microsoft.com/vs2008/products/cc268305.aspx)

<span data-ttu-id="e32b4-136">Vous pouvez également créer des applications ASP.NET MVC avec Visual Web Developer Express 2008.</span><span class="sxs-lookup"><span data-stu-id="e32b4-136">Alternatively, you can create ASP.NET MVC applications with Visual Web Developer Express 2008.</span></span> <span data-ttu-id="e32b4-137">Si vous décidez d’utiliser Visual Web Developer Express, le Service Pack 1 doit être installé.</span><span class="sxs-lookup"><span data-stu-id="e32b4-137">If you decide to use Visual Web Developer Express then you must have Service Pack 1 installed.</span></span> <span data-ttu-id="e32b4-138">Vous pouvez télécharger Visual Web Developer 2008 Express avec Service Pack 1 à partir de ce site Web :</span><span class="sxs-lookup"><span data-stu-id="e32b4-138">You can download Visual Web Developer 2008 Express with Service Pack 1 from this website:</span></span>

[<span data-ttu-id="e32b4-139">https://www.microsoft.com/downloads/details.aspx?FamilyId=BDB6391C-05CA-4036-9154-6DF4F6DEBD14&amp;d isplaylang = en</span><span class="sxs-lookup"><span data-stu-id="e32b4-139">https://www.microsoft.com/downloads/details.aspx?FamilyId=BDB6391C-05CA-4036-9154-6DF4F6DEBD14&amp;displaylang=en</span></span>](https://www.microsoft.com/downloads/details.aspx?FamilyId=BDB6391C-05CA-4036-9154-6DF4F6DEBD14&amp;displaylang=en)

<span data-ttu-id="e32b4-140">Après l’installation de Visual Studio 2008 ou de Visual Web Developer 2008, vous devez installer l’infrastructure MVC ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="e32b4-140">After you install either Visual Studio 2008 or Visual Web Developer 2008, you need to install the ASP.NET MVC framework.</span></span> <span data-ttu-id="e32b4-141">Vous pouvez télécharger l’infrastructure MVC ASP.NET à partir du site Web suivant :</span><span class="sxs-lookup"><span data-stu-id="e32b4-141">You can download the ASP.NET MVC framework from the following website:</span></span>

[https://www.asp.net/mvc/](../../../index.md)

> [!NOTE] 
> 
> <span data-ttu-id="e32b4-142">Au lieu de télécharger le Framework ASP.NET et l’infrastructure MVC ASP.NET individuellement, vous pouvez tirer parti de la Web Platform Installer.</span><span class="sxs-lookup"><span data-stu-id="e32b4-142">Instead of downloading the ASP.NET framework and the ASP.NET MVC framework individually, you can take advantage of the Web Platform Installer.</span></span> <span data-ttu-id="e32b4-143">Le Web Platform Installer est une application qui vous permet de gérer facilement les applications installées sur votre ordinateur :</span><span class="sxs-lookup"><span data-stu-id="e32b4-143">The Web Platform Installer is an application that enables you to easily manage the installed applications are your computer:</span></span>
> 
> [https://www.microsoft.com/web/gallery/Install.aspx](https://www.microsoft.com/web/gallery/Install.aspx)

## <a name="creating-an-aspnet-mvc-web-application-project"></a><span data-ttu-id="e32b4-144">Création d’un projet d’application Web MVC ASP.NET</span><span class="sxs-lookup"><span data-stu-id="e32b4-144">Creating an ASP.NET MVC Web Application Project</span></span>

<span data-ttu-id="e32b4-145">Commençons par créer un nouveau projet d’application Web ASP.NET MVC dans Visual Studio 2008.</span><span class="sxs-lookup"><span data-stu-id="e32b4-145">Let's start by creating a new ASP.NET MVC Web Application project in Visual Studio 2008.</span></span> <span data-ttu-id="e32b4-146">Sélectionnez l’option de menu **fichier, nouveau projet** . la boîte de dialogue Nouveau projet s’affiche dans la figure 1.</span><span class="sxs-lookup"><span data-stu-id="e32b4-146">Select the menu option **File, New Project** and you will see the New Project dialog box in Figure 1.</span></span> <span data-ttu-id="e32b4-147">Sélectionnez C# comme langage de programmation et sélectionnez le modèle de projet d’application Web MVC ASP.net.</span><span class="sxs-lookup"><span data-stu-id="e32b4-147">Select C# as the programming language and select the ASP.NET MVC Web Application project template.</span></span> <span data-ttu-id="e32b4-148">Donnez au projet le nom MovieApp et cliquez sur le bouton OK.</span><span class="sxs-lookup"><span data-stu-id="e32b4-148">Give your project the name MovieApp and click the OK button.</span></span>

<span data-ttu-id="e32b4-149">[![la boîte de dialogue Nouveau projet](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image1.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="e32b4-149">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image1.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image1.png)</span></span>

<span data-ttu-id="e32b4-150">**Figure 01**: boîte de dialogue Nouveau projet ([cliquez pour afficher l’image en taille réelle](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="e32b4-150">**Figure 01**: The New Project dialog box ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image2.png))</span></span>

<span data-ttu-id="e32b4-151">Veillez à sélectionner .NET Framework 3,5 dans la liste déroulante en haut de la boîte de dialogue Nouveau projet ou le modèle de projet d’application Web ASP.NET MVC n’apparaîtra pas.</span><span class="sxs-lookup"><span data-stu-id="e32b4-151">Make sure that you select .NET Framework 3.5 from the dropdown list at the top of the New Project dialog or the ASP.NET MVC Web Application project template won't appear.</span></span>

<span data-ttu-id="e32b4-152">Chaque fois que vous créez un projet d’application Web MVC, Visual Studio vous invite à créer un projet de test unitaire distinct.</span><span class="sxs-lookup"><span data-stu-id="e32b4-152">Whenever you create a new MVC Web Application project, Visual Studio prompts you to create a separate unit test project.</span></span> <span data-ttu-id="e32b4-153">La boîte de dialogue de la figure 2 s’affiche.</span><span class="sxs-lookup"><span data-stu-id="e32b4-153">The dialog in Figure 2 appears.</span></span> <span data-ttu-id="e32b4-154">Étant donné que nous ne créerons pas de tests dans ce didacticiel en raison de contraintes de temps (et, oui, nous devrions ressentir un peu de choses à l’aise), sélectionnez l’option **non** , puis cliquez sur le bouton **OK** .</span><span class="sxs-lookup"><span data-stu-id="e32b4-154">Because we won't be creating tests in this tutorial because of time constraints (and, yes, we should feel a little guilty about this) select the **No** option and click the **OK** button.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="e32b4-155">Visual Web Developer ne prend pas en charge les projets de test.</span><span class="sxs-lookup"><span data-stu-id="e32b4-155">Visual Web Developer does not support test projects.</span></span>

<span data-ttu-id="e32b4-156">[![la boîte de dialogue Nouveau projet](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image2.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="e32b4-156">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image2.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image3.png)</span></span>

<span data-ttu-id="e32b4-157">**Figure 02**: boîte de dialogue créer un projet de test unitaire ([cliquez pour afficher l’image en taille réelle](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="e32b4-157">**Figure 02**: The Create Unit Test Project dialog ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image4.png))</span></span>

<span data-ttu-id="e32b4-158">Une application ASP.NET MVC possède un ensemble de dossiers standard : un dossier de modèles, de vues et de contrôleurs.</span><span class="sxs-lookup"><span data-stu-id="e32b4-158">An ASP.NET MVC application has a standard set of folders: a Models, Views, and Controllers folder.</span></span> <span data-ttu-id="e32b4-159">Vous pouvez voir cet ensemble standard de dossiers dans la fenêtre Explorateur de solutions.</span><span class="sxs-lookup"><span data-stu-id="e32b4-159">You can see this standard set of folders in the Solution Explorer window.</span></span> <span data-ttu-id="e32b4-160">Nous devons ajouter des fichiers à chacun des dossiers de modèles, de vues et de contrôleurs afin de créer notre application de base de données de films.</span><span class="sxs-lookup"><span data-stu-id="e32b4-160">We'll need to add files to each of the Models, Views, and Controllers folders in order to build our Movie Database application.</span></span>

<span data-ttu-id="e32b4-161">Lorsque vous créez une application MVC avec Visual Studio, vous recevez un exemple d’application.</span><span class="sxs-lookup"><span data-stu-id="e32b4-161">When you create a new MVC application with Visual Studio, you get a sample application.</span></span> <span data-ttu-id="e32b4-162">Étant donné que nous voulons commencer à partir de zéro, nous devons supprimer le contenu de cet exemple d’application.</span><span class="sxs-lookup"><span data-stu-id="e32b4-162">Because we want to start from scratch, we need to delete the content for this sample application.</span></span> <span data-ttu-id="e32b4-163">Vous devez supprimer le fichier suivant et le dossier suivant :</span><span class="sxs-lookup"><span data-stu-id="e32b4-163">You need to delete the following file and the following folder:</span></span>

- <span data-ttu-id="e32b4-164">Controllers\HomeController.cs</span><span class="sxs-lookup"><span data-stu-id="e32b4-164">Controllers\HomeController.cs</span></span>
- <span data-ttu-id="e32b4-165">Views\Home</span><span class="sxs-lookup"><span data-stu-id="e32b4-165">Views\Home</span></span>

## <a name="creating-the-database"></a><span data-ttu-id="e32b4-166">Création de la base de données</span><span class="sxs-lookup"><span data-stu-id="e32b4-166">Creating the Database</span></span>

<span data-ttu-id="e32b4-167">Nous devons créer une base de données qui contiendra les enregistrements de la base de données Movie.</span><span class="sxs-lookup"><span data-stu-id="e32b4-167">We need to create a database to hold our movie database records.</span></span> <span data-ttu-id="e32b4-168">Heureusement, Visual Studio comprend une base de données gratuite nommée SQL Server Express.</span><span class="sxs-lookup"><span data-stu-id="e32b4-168">Luckily, Visual Studio includes a free database named SQL Server Express.</span></span> <span data-ttu-id="e32b4-169">Pour créer la base de données, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="e32b4-169">Follow these steps to create the database:</span></span>

1. <span data-ttu-id="e32b4-170">Cliquez avec le bouton droit sur le dossier de données de l’application\_dans la fenêtre Explorateur de solutions et sélectionnez l’option de menu **Ajouter, nouvel élément**.</span><span class="sxs-lookup"><span data-stu-id="e32b4-170">Right-click the App\_Data folder in the Solution Explorer window and select the menu option **Add, New Item**.</span></span>
2. <span data-ttu-id="e32b4-171">Sélectionnez la catégorie de **données** et sélectionnez le modèle **de base de données SQL Server** (voir figure 3).</span><span class="sxs-lookup"><span data-stu-id="e32b4-171">Select the **Data** category and select the **SQL Server Database** template (see Figure 3).</span></span>
3. <span data-ttu-id="e32b4-172">Nommez votre nouvelle base de données *MoviesDB. mdf* , puis cliquez sur le bouton **Ajouter** .</span><span class="sxs-lookup"><span data-stu-id="e32b4-172">Name your new database *MoviesDB.mdf* and click the **Add** button.</span></span>

<span data-ttu-id="e32b4-173">Après avoir créé votre base de données, vous pouvez vous connecter à la base de données en double-cliquant sur le fichier MoviesDB. mdf situé dans le dossier de données de l’application\_.</span><span class="sxs-lookup"><span data-stu-id="e32b4-173">After you create your database, you can connect to the database by double-clicking the MoviesDB.mdf file located in the App\_Data folder.</span></span> <span data-ttu-id="e32b4-174">Double-cliquez sur le fichier MoviesDB. mdf pour ouvrir la fenêtre Explorateur de serveurs.</span><span class="sxs-lookup"><span data-stu-id="e32b4-174">Double-clicking the MoviesDB.mdf file opens the Server Explorer window.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="e32b4-175">La fenêtre Explorateur de serveurs s’intitule la fenêtre explorateur de base de données dans le cas de Visual Web Developer.</span><span class="sxs-lookup"><span data-stu-id="e32b4-175">The Server Explorer window is named the Database Explorer window in the case of Visual Web Developer.</span></span>

<span data-ttu-id="e32b4-176">[![la boîte de dialogue Nouveau projet](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image3.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="e32b4-176">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image3.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image5.png)</span></span>

<span data-ttu-id="e32b4-177">**Figure 03**: création d’une base de données Microsoft SQL Server ([cliquez pour afficher l’image en taille réelle](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="e32b4-177">**Figure 03**: Creating a Microsoft SQL Server Database ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image6.png))</span></span>

<span data-ttu-id="e32b4-178">Ensuite, nous devons créer une nouvelle table de base de données.</span><span class="sxs-lookup"><span data-stu-id="e32b4-178">Next, we need to create a new database table.</span></span> <span data-ttu-id="e32b4-179">Dans la fenêtre Explorateur de serveurs, cliquez avec le bouton droit sur le dossier tables et sélectionnez l’option de menu **Ajouter une nouvelle table**.</span><span class="sxs-lookup"><span data-stu-id="e32b4-179">From within the Sever Explorer window, right-click the Tables folder and select the menu option **Add New Table**.</span></span> <span data-ttu-id="e32b4-180">La sélection de cette option de menu ouvre le concepteur de tables de base de données.</span><span class="sxs-lookup"><span data-stu-id="e32b4-180">Selecting this menu option opens the database table designer.</span></span> <span data-ttu-id="e32b4-181">Créez les colonnes de base de données suivantes :</span><span class="sxs-lookup"><span data-stu-id="e32b4-181">Create the following database columns:</span></span>

<a id="0.1_table01"></a>

| <span data-ttu-id="e32b4-182">**Nom de la colonne**</span><span class="sxs-lookup"><span data-stu-id="e32b4-182">**Column Name**</span></span> | <span data-ttu-id="e32b4-183">**Type de données**</span><span class="sxs-lookup"><span data-stu-id="e32b4-183">**Data Type**</span></span> | <span data-ttu-id="e32b4-184">**Autoriser les valeurs null**</span><span class="sxs-lookup"><span data-stu-id="e32b4-184">**Allow Nulls**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="e32b4-185">ID</span><span class="sxs-lookup"><span data-stu-id="e32b4-185">Id</span></span> | <span data-ttu-id="e32b4-186">int</span><span class="sxs-lookup"><span data-stu-id="e32b4-186">Int</span></span> | <span data-ttu-id="e32b4-187">False</span><span class="sxs-lookup"><span data-stu-id="e32b4-187">False</span></span> |
| <span data-ttu-id="e32b4-188">Titre</span><span class="sxs-lookup"><span data-stu-id="e32b4-188">Title</span></span> | <span data-ttu-id="e32b4-189">Nvarchar (100)</span><span class="sxs-lookup"><span data-stu-id="e32b4-189">Nvarchar(100)</span></span> | <span data-ttu-id="e32b4-190">False</span><span class="sxs-lookup"><span data-stu-id="e32b4-190">False</span></span> |
| <span data-ttu-id="e32b4-191">MetaDirectory</span><span class="sxs-lookup"><span data-stu-id="e32b4-191">Director</span></span> | <span data-ttu-id="e32b4-192">Nvarchar (100)</span><span class="sxs-lookup"><span data-stu-id="e32b4-192">Nvarchar(100)</span></span> | <span data-ttu-id="e32b4-193">False</span><span class="sxs-lookup"><span data-stu-id="e32b4-193">False</span></span> |
| <span data-ttu-id="e32b4-194">DateReleased</span><span class="sxs-lookup"><span data-stu-id="e32b4-194">DateReleased</span></span> | <span data-ttu-id="e32b4-195">DateTime</span><span class="sxs-lookup"><span data-stu-id="e32b4-195">DateTime</span></span> | <span data-ttu-id="e32b4-196">False</span><span class="sxs-lookup"><span data-stu-id="e32b4-196">False</span></span> |

<span data-ttu-id="e32b4-197">La première colonne, la colonne ID, possède deux propriétés spéciales.</span><span class="sxs-lookup"><span data-stu-id="e32b4-197">The first column, the Id column, has two special properties.</span></span> <span data-ttu-id="e32b4-198">Tout d’abord, vous devez marquer la colonne ID en tant que colonne de clé primaire.</span><span class="sxs-lookup"><span data-stu-id="e32b4-198">First, you need to mark the Id column as the primary key column.</span></span> <span data-ttu-id="e32b4-199">Après avoir sélectionné la colonne ID, cliquez sur le bouton **définir la clé primaire** (il s’agit de l’icône qui ressemble à une clé).</span><span class="sxs-lookup"><span data-stu-id="e32b4-199">After selecting the Id column, click the **Set Primary Key** button (it is the icon that looks like a key).</span></span> <span data-ttu-id="e32b4-200">Deuxièmement, vous devez marquer la colonne ID en tant que colonne d’identité.</span><span class="sxs-lookup"><span data-stu-id="e32b4-200">Second, you need to mark the Id column as an Identity column.</span></span> <span data-ttu-id="e32b4-201">Dans la Fenêtre Propriétés de colonne, faites défiler jusqu’à la section Spécification d’identité et développez-la.</span><span class="sxs-lookup"><span data-stu-id="e32b4-201">In the Column Properties window, scroll down to the Identity Specification section and expand it.</span></span> <span data-ttu-id="e32b4-202">Remplacez la valeur de la propriété **is Identity** par la valeur **Yes**.</span><span class="sxs-lookup"><span data-stu-id="e32b4-202">Change the **Is Identity** property to the value **Yes**.</span></span> <span data-ttu-id="e32b4-203">Lorsque vous avez terminé, le tableau doit ressembler à la figure 4.</span><span class="sxs-lookup"><span data-stu-id="e32b4-203">When you are finished, the table should look like Figure 4.</span></span>

<span data-ttu-id="e32b4-204">[![la boîte de dialogue Nouveau projet](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image4.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="e32b4-204">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image4.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image7.png)</span></span>

<span data-ttu-id="e32b4-205">**Figure 04**: table de base de données Movies ([cliquez pour afficher l’image en taille réelle](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="e32b4-205">**Figure 04**: The Movies database table ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image8.png))</span></span>

<span data-ttu-id="e32b4-206">La dernière étape consiste à enregistrer la nouvelle table.</span><span class="sxs-lookup"><span data-stu-id="e32b4-206">The final step is to save the new table.</span></span> <span data-ttu-id="e32b4-207">Cliquez sur le bouton Enregistrer (l’icône de la disquette) et donnez au nouveau tableau le nom films.</span><span class="sxs-lookup"><span data-stu-id="e32b4-207">Click the Save button (the icon of the floppy) and give the new table the name Movies.</span></span>

<span data-ttu-id="e32b4-208">Une fois que vous avez terminé la création de la table, ajoutez des enregistrements de films à la table.</span><span class="sxs-lookup"><span data-stu-id="e32b4-208">After you finish creating the table, add some movie records to the table.</span></span> <span data-ttu-id="e32b4-209">Cliquez avec le bouton droit sur le tableau films dans la fenêtre Explorateur de serveurs et sélectionnez l’option de menu **afficher les données**de la table.</span><span class="sxs-lookup"><span data-stu-id="e32b4-209">Right-click the Movies table in the Server Explorer window and select the menu option **Show Table Data**.</span></span> <span data-ttu-id="e32b4-210">Entrez la liste de vos films préférés (voir figure 5).</span><span class="sxs-lookup"><span data-stu-id="e32b4-210">Enter a list of your favorite movies (see Figure 5).</span></span>

<span data-ttu-id="e32b4-211">[![la boîte de dialogue Nouveau projet](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image5.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="e32b4-211">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image5.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image9.png)</span></span>

<span data-ttu-id="e32b4-212">**Figure 05**: saisie d’enregistrements de films ([cliquez pour afficher l’image en taille réelle](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="e32b4-212">**Figure 05**: Entering movie records ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image10.png))</span></span>

## <a name="creating-the-model"></a><span data-ttu-id="e32b4-213">Création du modèle</span><span class="sxs-lookup"><span data-stu-id="e32b4-213">Creating the Model</span></span>

<span data-ttu-id="e32b4-214">Nous devons ensuite créer un ensemble de classes pour représenter notre base de données.</span><span class="sxs-lookup"><span data-stu-id="e32b4-214">We next need to create a set of classes to represent our database.</span></span> <span data-ttu-id="e32b4-215">Nous devons créer un modèle de base de données.</span><span class="sxs-lookup"><span data-stu-id="e32b4-215">We need to create a database model.</span></span> <span data-ttu-id="e32b4-216">Nous allons tirer parti de la Entity Framework Microsoft pour générer automatiquement les classes pour notre modèle de base de données.</span><span class="sxs-lookup"><span data-stu-id="e32b4-216">We'll take advantage of the Microsoft Entity Framework to generate the classes for our database model automatically.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="e32b4-217">L’infrastructure MVC ASP.NET n’est pas liée à l’Entity Framework Microsoft.</span><span class="sxs-lookup"><span data-stu-id="e32b4-217">The ASP.NET MVC framework is not tied to the Microsoft Entity Framework.</span></span> <span data-ttu-id="e32b4-218">Vous pouvez créer vos classes de modèle de base de données en tirant parti d’un large éventail d’outils de mappage relationnel objet (ou/M), notamment LINQ to SQL, SubSonic et NHibernate.</span><span class="sxs-lookup"><span data-stu-id="e32b4-218">You can create your database model classes by taking advantage of a variety of Object Relational Mapping (OR/M) tools including LINQ to SQL, Subsonic, and NHibernate.</span></span>

<span data-ttu-id="e32b4-219">Pour lancer l’Assistant Entity Data Model, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="e32b4-219">Follow these steps to launch the Entity Data Model Wizard:</span></span>

1. <span data-ttu-id="e32b4-220">Cliquez avec le bouton droit sur le dossier modèles dans la fenêtre Explorateur de solutions et sélectionnez l’option de menu **Ajouter, nouvel élément**.</span><span class="sxs-lookup"><span data-stu-id="e32b4-220">Right-click the Models folder in the Solution Explorer window and the select the menu option **Add, New Item**.</span></span>
2. <span data-ttu-id="e32b4-221">Sélectionnez la catégorie de **données** et sélectionnez le modèle de **Entity Data Model ADO.net** .</span><span class="sxs-lookup"><span data-stu-id="e32b4-221">Select the **Data** category and select the **ADO.NET Entity Data Model** template.</span></span>
3. <span data-ttu-id="e32b4-222">Donnez au modèle de données le nom *MoviesDBModel. edmx* , puis cliquez sur le bouton **Ajouter** .</span><span class="sxs-lookup"><span data-stu-id="e32b4-222">Give your data model the name *MoviesDBModel.edmx* and click the **Add** button.</span></span>

<span data-ttu-id="e32b4-223">Une fois que vous avez cliqué sur le bouton Ajouter, l’Assistant Entity Data Model s’affiche (voir figure 6).</span><span class="sxs-lookup"><span data-stu-id="e32b4-223">After you click the Add button, the Entity Data Model Wizard appears (see Figure 6).</span></span> <span data-ttu-id="e32b4-224">Pour terminer l’Assistant, procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="e32b4-224">Follow these steps to complete the wizard:</span></span>

1. <span data-ttu-id="e32b4-225">Dans l’étape **choisir le contenu du modèle** , sélectionnez l’option **générer à partir de la base de données** .</span><span class="sxs-lookup"><span data-stu-id="e32b4-225">In the **Choose Model Contents** step, select the **Generate from database** option.</span></span>
2. <span data-ttu-id="e32b4-226">Dans l’étape **choisir votre connexion de données** , utilisez la connexion de données *MoviesDB. mdf* et le nom *MoviesDBEntities* pour les paramètres de connexion.</span><span class="sxs-lookup"><span data-stu-id="e32b4-226">In the **Choose Your Data Connection** step, use the *MoviesDB.mdf* data connection and the name *MoviesDBEntities* for the connection settings.</span></span> <span data-ttu-id="e32b4-227">Cliquez sur le bouton **suivant** .</span><span class="sxs-lookup"><span data-stu-id="e32b4-227">Click the **Next** button.</span></span>
3. <span data-ttu-id="e32b4-228">Dans l’étape **choisir vos objets de base de données** , développez le nœud tables, puis sélectionnez le tableau films.</span><span class="sxs-lookup"><span data-stu-id="e32b4-228">In the **Choose Your Database Objects** step, expand the Tables node, select the Movies table.</span></span> <span data-ttu-id="e32b4-229">Entrez l’espace de noms *MovieApp. Models* , puis cliquez sur le bouton **Terminer** .</span><span class="sxs-lookup"><span data-stu-id="e32b4-229">Enter the namespace *MovieApp.Models* and click the **Finish** button.</span></span>

<span data-ttu-id="e32b4-230">[![la boîte de dialogue Nouveau projet](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image6.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="e32b4-230">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image6.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image11.png)</span></span>

<span data-ttu-id="e32b4-231">**Figure 06**: génération d’un modèle de base de données à l’aide de l’Assistant Entity Data Model ([cliquez pour afficher l’image en taille réelle](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="e32b4-231">**Figure 06**: Generating a database model with the Entity Data Model Wizard ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image12.png))</span></span>

<span data-ttu-id="e32b4-232">Une fois que vous avez terminé l’Assistant Entity Data Model, le concepteur de Entity Data Model s’ouvre.</span><span class="sxs-lookup"><span data-stu-id="e32b4-232">After you complete the Entity Data Model Wizard, the Entity Data Model Designer opens.</span></span> <span data-ttu-id="e32b4-233">Le concepteur doit afficher la table de base de données Movies (voir la figure 7).</span><span class="sxs-lookup"><span data-stu-id="e32b4-233">The Designer should display the Movies database table (see Figure 7).</span></span>

<span data-ttu-id="e32b4-234">[![la boîte de dialogue Nouveau projet](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image7.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="e32b4-234">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image7.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image13.png)</span></span>

<span data-ttu-id="e32b4-235">**Figure 07**: concepteur de Entity Data Model ([cliquez pour afficher l’image en taille réelle](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="e32b4-235">**Figure 07**: The Entity Data Model Designer ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image14.png))</span></span>

<span data-ttu-id="e32b4-236">Nous devons apporter une modification avant de continuer.</span><span class="sxs-lookup"><span data-stu-id="e32b4-236">We need to make one change before we continue.</span></span> <span data-ttu-id="e32b4-237">L’Assistant données d’entité génère une classe de modèle nommée *movies* qui représente la table de base de données de films.</span><span class="sxs-lookup"><span data-stu-id="e32b4-237">The Entity Data Wizard generates a model class named *Movies* that represents the Movies database table.</span></span> <span data-ttu-id="e32b4-238">Étant donné que nous allons utiliser la classe movies pour représenter un film particulier, nous devons modifier le nom de la classe pour qu’elle soit *Movie* au lieu de *films* (singulier plutôt que pluriel).</span><span class="sxs-lookup"><span data-stu-id="e32b4-238">Because we'll use the Movies class to represent a particular movie, we need to modify the name of the class to be *Movie* instead of *Movies* (singular rather than plural).</span></span>

<span data-ttu-id="e32b4-239">Double-cliquez sur le nom de la classe sur l’aire du concepteur et remplacez le nom de la classe films par film.</span><span class="sxs-lookup"><span data-stu-id="e32b4-239">Double-click the name of the class on the designer surface and change the name of the class from Movies to Movie.</span></span> <span data-ttu-id="e32b4-240">Après avoir apporté cette modification, cliquez sur le bouton **Enregistrer** (l’icône de la disquette) pour générer la classe Movie.</span><span class="sxs-lookup"><span data-stu-id="e32b4-240">After making this change, click the **Save** button (the icon of the floppy disk) to generate the Movie class.</span></span>

## <a name="creating-the-aspnet-mvc-controller"></a><span data-ttu-id="e32b4-241">Création du contrôleur MVC ASP.NET</span><span class="sxs-lookup"><span data-stu-id="e32b4-241">Creating the ASP.NET MVC Controller</span></span>

<span data-ttu-id="e32b4-242">L’étape suivante consiste à créer le contrôleur MVC ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="e32b4-242">The next step is to create the ASP.NET MVC controller.</span></span> <span data-ttu-id="e32b4-243">Un contrôleur est chargé de contrôler la manière dont un utilisateur interagit avec une application MVC ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="e32b4-243">A controller is responsible for controlling how a user interacts with an ASP.NET MVC application.</span></span>

<span data-ttu-id="e32b4-244">Suivez les étapes ci-dessous :</span><span class="sxs-lookup"><span data-stu-id="e32b4-244">Follow these steps:</span></span>

1. <span data-ttu-id="e32b4-245">Dans la fenêtre Explorateur de solutions, cliquez avec le bouton droit sur le dossier Controllers et sélectionnez l’option de menu **Ajouter, contrôleur**.</span><span class="sxs-lookup"><span data-stu-id="e32b4-245">In the Solution Explorer window, right-click the Controllers folder and select the menu option **Add, Controller**.</span></span>
2. <span data-ttu-id="e32b4-246">Dans la boîte de dialogue Ajouter un contrôleur, entrez le nom *HomeController* et cochez la case **Ajouter des méthodes d’action pour les scénarios créer, mettre à jour et détails** (voir figure 8).</span><span class="sxs-lookup"><span data-stu-id="e32b4-246">In the Add Controller dialog, enter the name *HomeController* and check the checkbox labeled **Add action methods for Create, Update, and Details scenarios** (see Figure 8).</span></span>
3. <span data-ttu-id="e32b4-247">Cliquez sur le bouton **Ajouter** pour ajouter le nouveau contrôleur à votre projet.</span><span class="sxs-lookup"><span data-stu-id="e32b4-247">Click the **Add** button to add the new controller to your project.</span></span>

<span data-ttu-id="e32b4-248">Une fois ces étapes terminées, le contrôleur de la liste 1 est créé.</span><span class="sxs-lookup"><span data-stu-id="e32b4-248">After you complete these steps, the controller in Listing 1 is created.</span></span> <span data-ttu-id="e32b4-249">Notez qu’elle contient des méthodes appelées index, Details, Create et Edit.</span><span class="sxs-lookup"><span data-stu-id="e32b4-249">Notice that it contains methods named Index, Details, Create, and Edit.</span></span> <span data-ttu-id="e32b4-250">Dans les sections suivantes, nous allons ajouter le code nécessaire pour que ces méthodes fonctionnent.</span><span class="sxs-lookup"><span data-stu-id="e32b4-250">In the following sections, we'll add the necessary code to get these methods to work.</span></span>

<span data-ttu-id="e32b4-251">[![la boîte de dialogue Nouveau projet](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image8.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="e32b4-251">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image8.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image15.png)</span></span>

<span data-ttu-id="e32b4-252">**Figure 08**: ajout d’un nouveau contrôleur ASP.NET MVC ([cliquez pour afficher l’image en taille réelle](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="e32b4-252">**Figure 08**: Adding a new ASP.NET MVC Controller ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image16.png))</span></span>

<span data-ttu-id="e32b4-253">**Liste 1 – Controllers\HomeController.cs**</span><span class="sxs-lookup"><span data-stu-id="e32b4-253">**Listing 1 – Controllers\HomeController.cs**</span></span>

[!code-csharp[Main](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/samples/sample1.cs)]

## <a name="listing-database-records"></a><span data-ttu-id="e32b4-254">Liste des enregistrements de base de données</span><span class="sxs-lookup"><span data-stu-id="e32b4-254">Listing Database Records</span></span>

<span data-ttu-id="e32b4-255">La méthode index () du contrôleur d’hébergement est la méthode par défaut pour une application MVC ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="e32b4-255">The Index() method of the Home controller is the default method for an ASP.NET MVC application.</span></span> <span data-ttu-id="e32b4-256">Quand vous exécutez une application ASP.NET MVC, la méthode index () est la première méthode de contrôleur appelée.</span><span class="sxs-lookup"><span data-stu-id="e32b4-256">When you run an ASP.NET MVC application, the Index() method is the first controller method that is called.</span></span>

<span data-ttu-id="e32b4-257">Nous allons utiliser la méthode index () pour afficher la liste des enregistrements de la table de base de données de films.</span><span class="sxs-lookup"><span data-stu-id="e32b4-257">We'll use the Index() method to display the list of records from the Movies database table.</span></span> <span data-ttu-id="e32b4-258">Nous allons tirer parti des classes de modèle de base de données que nous avons créées précédemment pour récupérer les enregistrements de base de données de films avec la méthode index ().</span><span class="sxs-lookup"><span data-stu-id="e32b4-258">We'll take advantage of the database model classes that we created earlier to retrieve the movie database records with the Index() method.</span></span>

<span data-ttu-id="e32b4-259">J’ai modifié la classe HomeController dans Listing 2 afin qu’elle contienne un nouveau champ privé nommé \_DB.</span><span class="sxs-lookup"><span data-stu-id="e32b4-259">I've modified the HomeController class in Listing 2 so that it contains a new private field named \_db.</span></span> <span data-ttu-id="e32b4-260">La classe MoviesDBEntities représente notre modèle de base de données et nous utiliserons cette classe pour communiquer avec notre base de données.</span><span class="sxs-lookup"><span data-stu-id="e32b4-260">The MoviesDBEntities class represents our database model and we'll use this class to communicate with our database.</span></span>

<span data-ttu-id="e32b4-261">J’ai également modifié la méthode index () dans la liste 2.</span><span class="sxs-lookup"><span data-stu-id="e32b4-261">I've also modified the Index() method in Listing 2.</span></span> <span data-ttu-id="e32b4-262">La méthode index () utilise la classe MoviesDBEntities pour récupérer tous les enregistrements Movie de la table de base de données movies.</span><span class="sxs-lookup"><span data-stu-id="e32b4-262">The Index() method uses the MoviesDBEntities class to retrieve all of the movie records from the Movies database table.</span></span> <span data-ttu-id="e32b4-263">Expression *\_DB. MovieSet. ToList ()* renvoie la liste de tous les enregistrements de film de la table de base de données de films.</span><span class="sxs-lookup"><span data-stu-id="e32b4-263">The expression *\_db.MovieSet.ToList()* returns a list of all of the movie records from the Movies database table.</span></span>

<span data-ttu-id="e32b4-264">La liste des films est transmise à la vue.</span><span class="sxs-lookup"><span data-stu-id="e32b4-264">The list of movies is passed to the view.</span></span> <span data-ttu-id="e32b4-265">Tout ce qui est passé à la méthode View () est passé à la vue en tant que données de vue.</span><span class="sxs-lookup"><span data-stu-id="e32b4-265">Anything that gets passed to the View() method gets passed to the view as view data.</span></span>

<span data-ttu-id="e32b4-266">**Liste 2 – contrôleurs/HomeController. cs (méthode d’index modifiée)**</span><span class="sxs-lookup"><span data-stu-id="e32b4-266">**Listing 2 – Controllers/HomeController.cs (modified Index method)**</span></span>

[!code-csharp[Main](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/samples/sample2.cs)]

<span data-ttu-id="e32b4-267">La méthode index () renvoie une vue nommée index.</span><span class="sxs-lookup"><span data-stu-id="e32b4-267">The Index() method returns a view named Index.</span></span> <span data-ttu-id="e32b4-268">Nous devons créer cette vue pour afficher la liste des enregistrements de la base de données de films.</span><span class="sxs-lookup"><span data-stu-id="e32b4-268">We need to create this view to display the list of movie database records.</span></span> <span data-ttu-id="e32b4-269">Suivez les étapes ci-dessous :</span><span class="sxs-lookup"><span data-stu-id="e32b4-269">Follow these steps:</span></span>

<span data-ttu-id="e32b4-270">Vous devez générer votre projet (sélectionnez l’option de menu **Générer, générer la solution**) avant d’ouvrir la boîte de dialogue **Ajouter une vue** , ou aucune classe ne s’affichera dans la liste déroulante classe de **données d’affichage** .</span><span class="sxs-lookup"><span data-stu-id="e32b4-270">You should build your project (select the menu option **Build, Build Solution**) before opening the **Add View** dialog or no classes will appear in the **View data class** dropdown list.</span></span>

1. <span data-ttu-id="e32b4-271">Cliquez avec le bouton droit sur la méthode index () dans l’éditeur de code, puis sélectionnez l’option de menu **Ajouter une vue** (voir figure 9).</span><span class="sxs-lookup"><span data-stu-id="e32b4-271">Right-click the Index() method in the code editor and select the menu option **Add View** (see Figure 9).</span></span>
2. <span data-ttu-id="e32b4-272">Dans la boîte de dialogue Ajouter une vue, vérifiez que la case à cocher **créer une vue fortement typée** est activée.</span><span class="sxs-lookup"><span data-stu-id="e32b4-272">In the Add View dialog, verify that the checkbox labeled **Create a strongly-typed view** is checked.</span></span>
3. <span data-ttu-id="e32b4-273">Dans la liste déroulante **afficher le contenu** , sélectionnez la *liste*valeur.</span><span class="sxs-lookup"><span data-stu-id="e32b4-273">From the **View content** dropdown list, select the value *List*.</span></span>
4. <span data-ttu-id="e32b4-274">Dans la liste déroulante **afficher la classe de données** , sélectionnez la valeur *MovieApp. Models. Movie*.</span><span class="sxs-lookup"><span data-stu-id="e32b4-274">From the **View data class** dropdown list, select the value *MovieApp.Models.Movie*.</span></span>
5. <span data-ttu-id="e32b4-275">Cliquez sur le bouton Ajouter pour créer le nouvel affichage (voir figure 10).</span><span class="sxs-lookup"><span data-stu-id="e32b4-275">Click the Add button to create the new view (see Figure 10).</span></span>

<span data-ttu-id="e32b4-276">Une fois ces étapes terminées, une nouvelle vue nommée index. aspx est ajoutée au dossier Views\Home.</span><span class="sxs-lookup"><span data-stu-id="e32b4-276">After you complete these steps, a new view named Index.aspx is added to the Views\Home folder.</span></span> <span data-ttu-id="e32b4-277">Le contenu de la vue index est inclus dans le Listing 3.</span><span class="sxs-lookup"><span data-stu-id="e32b4-277">The contents of the Index view are included in Listing 3.</span></span>

<span data-ttu-id="e32b4-278">[![la boîte de dialogue Nouveau projet](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image9.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="e32b4-278">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image9.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image17.png)</span></span>

<span data-ttu-id="e32b4-279">**Figure 09**: ajout d’une vue à partir d’une action de contrôleur ([cliquez pour afficher l’image en taille réelle](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="e32b4-279">**Figure 09**: Adding a view from a controller action ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image18.png))</span></span>

<span data-ttu-id="e32b4-280">[![la boîte de dialogue Nouveau projet](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image10.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="e32b4-280">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image10.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image19.png)</span></span>

<span data-ttu-id="e32b4-281">**Figure 10**: création d’un nouvel affichage avec la boîte de dialogue Ajouter une vue ([cliquez pour afficher l’image en taille réelle](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="e32b4-281">**Figure 10**: Creating a new view with the Add View dialog ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image20.png))</span></span>

<span data-ttu-id="e32b4-282">**Liste 3 – Views\Home\Index.aspx**</span><span class="sxs-lookup"><span data-stu-id="e32b4-282">**Listing 3 – Views\Home\Index.aspx**</span></span>

[!code-aspx[Main](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/samples/sample3.aspx)]

<span data-ttu-id="e32b4-283">La vue index affiche tous les enregistrements de film de la table de base de données movies dans une table HTML.</span><span class="sxs-lookup"><span data-stu-id="e32b4-283">The Index view displays all of the movie records from the Movies database table within an HTML table.</span></span> <span data-ttu-id="e32b4-284">La vue contient une boucle foreach qui itère au sein de chaque film représenté par la propriété ViewData. Model.</span><span class="sxs-lookup"><span data-stu-id="e32b4-284">The view contains a foreach loop that iterates through each movie represented by the ViewData.Model property.</span></span> <span data-ttu-id="e32b4-285">Si vous exécutez votre application en appuyant sur la touche F5, vous verrez la page Web dans la figure 11.</span><span class="sxs-lookup"><span data-stu-id="e32b4-285">If you run your application by hitting the F5 key, then you'll see the web page in Figure 11.</span></span>

<span data-ttu-id="e32b4-286">[![la boîte de dialogue Nouveau projet](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image11.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="e32b4-286">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image11.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image21.png)</span></span>

<span data-ttu-id="e32b4-287">**Figure 11**: vue d’index ([cliquez pour afficher l’image en taille réelle](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image22.png))</span><span class="sxs-lookup"><span data-stu-id="e32b4-287">**Figure 11**: The Index view ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image22.png))</span></span>

## <a name="creating-new-database-records"></a><span data-ttu-id="e32b4-288">Création d’enregistrements de base de données</span><span class="sxs-lookup"><span data-stu-id="e32b4-288">Creating New Database Records</span></span>

<span data-ttu-id="e32b4-289">La vue d’index que nous avons créée dans la section précédente comprend un lien permettant de créer des enregistrements de base de données.</span><span class="sxs-lookup"><span data-stu-id="e32b4-289">The Index view that we created in the previous section includes a link for creating new database records.</span></span> <span data-ttu-id="e32b4-290">Commençons par implémenter la logique et créer l’affichage nécessaire à la création de nouveaux enregistrements de base de données de films.</span><span class="sxs-lookup"><span data-stu-id="e32b4-290">Let's go ahead and implement the logic and create the view necessary for creating new movie database records.</span></span>

<span data-ttu-id="e32b4-291">Le contrôleur d’hébergement contient deux méthodes nommées Create ().</span><span class="sxs-lookup"><span data-stu-id="e32b4-291">The Home controller contains two methods named Create().</span></span> <span data-ttu-id="e32b4-292">La première méthode Create () n’a aucun paramètre.</span><span class="sxs-lookup"><span data-stu-id="e32b4-292">The first Create() method has no parameters.</span></span> <span data-ttu-id="e32b4-293">Cette surcharge de la méthode Create () permet d’afficher le formulaire HTML pour la création d’un nouvel enregistrement de base de données de film.</span><span class="sxs-lookup"><span data-stu-id="e32b4-293">This overload of the Create() method is used to display the HTML form for creating a new movie database record.</span></span>

<span data-ttu-id="e32b4-294">La deuxième méthode Create () a un paramètre FormCollection.</span><span class="sxs-lookup"><span data-stu-id="e32b4-294">The second Create() method has a FormCollection parameter.</span></span> <span data-ttu-id="e32b4-295">Cette surcharge de la méthode Create () est appelée lorsque le formulaire HTML pour la création d’un nouveau film est publié sur le serveur.</span><span class="sxs-lookup"><span data-stu-id="e32b4-295">This overload of the Create() method is called when the HTML form for creating a new movie is posted to the server.</span></span> <span data-ttu-id="e32b4-296">Notez que cette deuxième méthode Create () a un attribut AcceptVerbs qui empêche la méthode d’être appelée, à moins qu’une opération HTTP POSTALe ne soit effectuée.</span><span class="sxs-lookup"><span data-stu-id="e32b4-296">Notice that this second Create() method has an AcceptVerbs attribute that prevents the method from being called unless an HTTP POST operation is performed.</span></span>

<span data-ttu-id="e32b4-297">Cette seconde méthode Create () a été modifiée dans la classe HomeController mise à jour de la liste 4.</span><span class="sxs-lookup"><span data-stu-id="e32b4-297">This second Create() method has been modified in the updated HomeController class in Listing 4.</span></span> <span data-ttu-id="e32b4-298">La nouvelle version de la méthode Create () accepte un paramètre Movie et contient la logique d’insertion d’un nouveau film dans la table de base de données movies.</span><span class="sxs-lookup"><span data-stu-id="e32b4-298">The new version of the Create() method accepts a Movie parameter and contains the logic for inserting a new movie into the Movies database table.</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="e32b4-299">Notez l’attribut de liaison.</span><span class="sxs-lookup"><span data-stu-id="e32b4-299">Notice the Bind attribute.</span></span> <span data-ttu-id="e32b4-300">Étant donné que nous ne souhaitons pas mettre à jour la propriété Movie ID à partir du formulaire HTML, nous devons explicitement exclure cette propriété.</span><span class="sxs-lookup"><span data-stu-id="e32b4-300">Because we don't want to update the Movie Id property from HTML form, we need to explicitly exclude this property.</span></span>

<span data-ttu-id="e32b4-301">**Liste 4 – Controllers\HomeController.cs (méthode de création modifiée)**</span><span class="sxs-lookup"><span data-stu-id="e32b4-301">**Listing 4 – Controllers\HomeController.cs (modified Create method)**</span></span>

[!code-csharp[Main](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/samples/sample4.cs)]

<span data-ttu-id="e32b4-302">Visual Studio facilite la création du formulaire pour la création d’un nouvel enregistrement de base de données de films (voir la figure 12).</span><span class="sxs-lookup"><span data-stu-id="e32b4-302">Visual Studio makes it easy to create the form for creating a new movie database record (see Figure 12).</span></span> <span data-ttu-id="e32b4-303">Suivez les étapes ci-dessous :</span><span class="sxs-lookup"><span data-stu-id="e32b4-303">Follow these steps:</span></span>

1. <span data-ttu-id="e32b4-304">Cliquez avec le bouton droit sur la méthode Create () dans l’éditeur de code, puis sélectionnez l’option de menu **Ajouter une vue**.</span><span class="sxs-lookup"><span data-stu-id="e32b4-304">Right-click the Create() method in the code editor and select the menu option **Add View**.</span></span>
2. <span data-ttu-id="e32b4-305">Vérifiez que la case à cocher **créer une vue fortement typée** est activée.</span><span class="sxs-lookup"><span data-stu-id="e32b4-305">Verify that the checkbox labeled **Create a strongly-typed view** is checked.</span></span>
3. <span data-ttu-id="e32b4-306">Dans la liste déroulante **afficher le contenu** , sélectionnez la valeur *créer*.</span><span class="sxs-lookup"><span data-stu-id="e32b4-306">From the **View content** dropdown list, select the value *Create*.</span></span>
4. <span data-ttu-id="e32b4-307">Dans la liste déroulante **afficher la classe de données** , sélectionnez la valeur *MovieApp. Models. Movie*.</span><span class="sxs-lookup"><span data-stu-id="e32b4-307">From the **View data class** dropdown list, select the value *MovieApp.Models.Movie*.</span></span>
5. <span data-ttu-id="e32b4-308">Cliquez sur le bouton **Ajouter** pour créer le nouvel affichage.</span><span class="sxs-lookup"><span data-stu-id="e32b4-308">Click the **Add** button to create the new view.</span></span>

<span data-ttu-id="e32b4-309">[![la boîte de dialogue Nouveau projet](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image12.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="e32b4-309">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image12.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image23.png)</span></span>

<span data-ttu-id="e32b4-310">**Figure 12**: ajout de la vue Create ([Cliquer pour afficher l’image en taille réelle](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="e32b4-310">**Figure 12**: Adding the Create view ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image24.png))</span></span>

<span data-ttu-id="e32b4-311">Visual Studio génère automatiquement la vue dans la liste 5.</span><span class="sxs-lookup"><span data-stu-id="e32b4-311">Visual Studio generates the view in Listing 5 automatically.</span></span> <span data-ttu-id="e32b4-312">Cette vue contient un formulaire HTML qui inclut des champs qui correspondent à chacune des propriétés de la classe Movie.</span><span class="sxs-lookup"><span data-stu-id="e32b4-312">This view contains an HTML form that includes fields that correspond to each of the properties of the Movie class.</span></span>

<span data-ttu-id="e32b4-313">**Liste 5 – Views\Home\Create.aspx**</span><span class="sxs-lookup"><span data-stu-id="e32b4-313">**Listing 5 – Views\Home\Create.aspx**</span></span>

[!code-aspx[Main](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/samples/sample5.aspx)]

> [!NOTE] 
> 
> <span data-ttu-id="e32b4-314">Le formulaire HTML généré par la boîte de dialogue Ajouter une vue génère un champ de formulaire d’ID.</span><span class="sxs-lookup"><span data-stu-id="e32b4-314">The HTML form generated by the Add View dialog generates an Id form field.</span></span> <span data-ttu-id="e32b4-315">Étant donné que la colonne ID est une colonne d’identité, nous n’avons pas besoin de ce champ de formulaire et vous pouvez le supprimer en toute sécurité.</span><span class="sxs-lookup"><span data-stu-id="e32b4-315">Because the Id column is an Identity column, we don't need this form field and you can safely remove it.</span></span>

<span data-ttu-id="e32b4-316">Après avoir ajouté la vue Create, vous pouvez ajouter de nouveaux enregistrements de films à la base de données.</span><span class="sxs-lookup"><span data-stu-id="e32b4-316">After you add the Create view, you can add new Movie records to the database.</span></span> <span data-ttu-id="e32b4-317">Exécutez votre application en appuyant sur la touche F5, puis cliquez sur le lien créer pour afficher le formulaire dans la figure 13.</span><span class="sxs-lookup"><span data-stu-id="e32b4-317">Run your application by pressing the F5 key and click the Create New link to see the form in Figure 13.</span></span> <span data-ttu-id="e32b4-318">Si vous terminez et envoyez le formulaire, un nouvel enregistrement de la base de données de films est créé.</span><span class="sxs-lookup"><span data-stu-id="e32b4-318">If you complete and submit the form, a new movie database record is created.</span></span>

<span data-ttu-id="e32b4-319">Notez que vous recevez automatiquement la validation du formulaire.</span><span class="sxs-lookup"><span data-stu-id="e32b4-319">Notice that you get form validation automatically.</span></span> <span data-ttu-id="e32b4-320">Si vous négligez d’entrer une date de publication pour un film ou si vous entrez une date de publication non valide, le formulaire est réaffiché et le champ date de publication est mis en surbrillance.</span><span class="sxs-lookup"><span data-stu-id="e32b4-320">If you neglect to enter a release date for a movie, or you enter an invalid release date, then the form is redisplayed and the release date field is highlighted.</span></span>

<span data-ttu-id="e32b4-321">[![la boîte de dialogue Nouveau projet](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image13.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="e32b4-321">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image13.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image25.png)</span></span>

<span data-ttu-id="e32b4-322">**Figure 13**: création d’un nouvel enregistrement de base de données de film ([cliquez pour afficher l’image en taille réelle](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image26.png))</span><span class="sxs-lookup"><span data-stu-id="e32b4-322">**Figure 13**: Creating a new movie database record ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image26.png))</span></span>

## <a name="editing-existing-database-records"></a><span data-ttu-id="e32b4-323">Modification d’enregistrements de base de données existants</span><span class="sxs-lookup"><span data-stu-id="e32b4-323">Editing Existing Database Records</span></span>

<span data-ttu-id="e32b4-324">Dans les sections précédentes, nous avons abordé la manière dont vous pouvez répertorier et créer des enregistrements de base de données.</span><span class="sxs-lookup"><span data-stu-id="e32b4-324">In the previous sections, we discussed how you can list and create new database records.</span></span> <span data-ttu-id="e32b4-325">Dans cette dernière section, nous expliquons comment vous pouvez modifier les enregistrements de base de données existants.</span><span class="sxs-lookup"><span data-stu-id="e32b4-325">In this final section, we discuss how you can edit existing database records.</span></span>

<span data-ttu-id="e32b4-326">Tout d’abord, nous devons générer le formulaire de modification.</span><span class="sxs-lookup"><span data-stu-id="e32b4-326">First, we need to generate the Edit form.</span></span> <span data-ttu-id="e32b4-327">Cette étape est simple, car Visual Studio génère automatiquement le formulaire de modification pour nous.</span><span class="sxs-lookup"><span data-stu-id="e32b4-327">This step is easy since Visual Studio will generate the Edit form for us automatically.</span></span> <span data-ttu-id="e32b4-328">Ouvrez la classe HomeController.cs dans l’éditeur de code Visual Studio et procédez comme suit :</span><span class="sxs-lookup"><span data-stu-id="e32b4-328">Open the HomeController.cs class in the Visual Studio code editor and follow these steps:</span></span>

1. <span data-ttu-id="e32b4-329">Cliquez avec le bouton droit sur la méthode Edit () dans l’éditeur de code, puis sélectionnez l’option de menu **Ajouter une vue** (voir figure 14).</span><span class="sxs-lookup"><span data-stu-id="e32b4-329">Right-click the Edit() method in the code editor and select the menu option **Add View** (see Figure 14).</span></span>
2. <span data-ttu-id="e32b4-330">Cochez la case **créer une vue fortement typée**.</span><span class="sxs-lookup"><span data-stu-id="e32b4-330">Check the checkbox labeled **Create a strongly-typed view**.</span></span>
3. <span data-ttu-id="e32b4-331">Dans la liste déroulante **afficher le contenu** , sélectionnez la valeur *modifier*.</span><span class="sxs-lookup"><span data-stu-id="e32b4-331">From the **View content** dropdown list, select the value *Edit*.</span></span>
4. <span data-ttu-id="e32b4-332">Dans la liste déroulante **afficher la classe de données** , sélectionnez la valeur *MovieApp. Models. Movie*.</span><span class="sxs-lookup"><span data-stu-id="e32b4-332">From the **View data class** dropdown list, select the value *MovieApp.Models.Movie*.</span></span>
5. <span data-ttu-id="e32b4-333">Cliquez sur le bouton **Ajouter** pour créer le nouvel affichage.</span><span class="sxs-lookup"><span data-stu-id="e32b4-333">Click the **Add** button to create the new view.</span></span>

<span data-ttu-id="e32b4-334">L’exécution de ces étapes ajoute une nouvelle vue nommée Edit. aspx au dossier Views\Home.</span><span class="sxs-lookup"><span data-stu-id="e32b4-334">Completing these steps adds a new view named Edit.aspx to the Views\Home folder.</span></span> <span data-ttu-id="e32b4-335">Cette vue contient un formulaire HTML pour la modification d’un enregistrement de film.</span><span class="sxs-lookup"><span data-stu-id="e32b4-335">This view contains an HTML form for editing a movie record.</span></span>

<span data-ttu-id="e32b4-336">[![la boîte de dialogue Nouveau projet](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image14.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="e32b4-336">[![The New Project dialog box](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image14.jpg)](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image27.png)</span></span>

<span data-ttu-id="e32b4-337">**Figure 14**: ajout de la vue Edit ([cliquez pour afficher l’image en taille réelle](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image28.png))</span><span class="sxs-lookup"><span data-stu-id="e32b4-337">**Figure 14**: Adding the Edit view ([Click to view full-size image](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/_static/image28.png))</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="e32b4-338">La vue Edit contient un champ de formulaire HTML qui correspond à la propriété Movie ID.</span><span class="sxs-lookup"><span data-stu-id="e32b4-338">The Edit view contains an HTML form field that corresponds to the Movie Id property.</span></span> <span data-ttu-id="e32b4-339">Étant donné que vous ne voulez pas que les utilisateurs modifient la valeur de la propriété ID, vous devez supprimer ce champ de formulaire.</span><span class="sxs-lookup"><span data-stu-id="e32b4-339">Because you don't want people editing the value of the Id property, you should remove this form field.</span></span>

<span data-ttu-id="e32b4-340">Enfin, nous devons modifier le contrôleur de démarrage afin qu’il prenne en charge la modification d’un enregistrement de base de données.</span><span class="sxs-lookup"><span data-stu-id="e32b4-340">Finally, we need to modify the Home controller so that it supports editing a database record.</span></span> <span data-ttu-id="e32b4-341">La classe HomeController mise à jour est contenue dans la liste 6.</span><span class="sxs-lookup"><span data-stu-id="e32b4-341">The updated HomeController class is contained in Listing 6.</span></span>

<span data-ttu-id="e32b4-342">**Liste 6 – Controllers\HomeController.cs (méthodes de modification)**</span><span class="sxs-lookup"><span data-stu-id="e32b4-342">**Listing 6 – Controllers\HomeController.cs (Edit methods)**</span></span>

[!code-csharp[Main](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-cs/samples/sample6.cs)]

<span data-ttu-id="e32b4-343">Dans la liste 6, j’ai ajouté une logique supplémentaire aux deux surcharges de la méthode Edit ().</span><span class="sxs-lookup"><span data-stu-id="e32b4-343">In Listing 6, I've added additional logic to both overloads of the Edit() method.</span></span> <span data-ttu-id="e32b4-344">La première méthode Edit () retourne l’enregistrement de la base de données Movie qui correspond au paramètre ID transmis à la méthode.</span><span class="sxs-lookup"><span data-stu-id="e32b4-344">The first Edit() method returns the movie database record that corresponds to the Id parameter passed to the method.</span></span> <span data-ttu-id="e32b4-345">La deuxième surcharge effectue les mises à jour d’un enregistrement de film dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="e32b4-345">The second overload performs the updates to a movie record in the database.</span></span>

<span data-ttu-id="e32b4-346">Notez que vous devez récupérer le film d’origine, puis appeler ApplyPropertyChanges () pour mettre à jour le film existant dans la base de données.</span><span class="sxs-lookup"><span data-stu-id="e32b4-346">Notice that you must retrieve the original movie, and then call ApplyPropertyChanges(), to update the existing movie in the database.</span></span>

## <a name="summary"></a><span data-ttu-id="e32b4-347">Récapitulatif</span><span class="sxs-lookup"><span data-stu-id="e32b4-347">Summary</span></span>

<span data-ttu-id="e32b4-348">L’objectif de ce didacticiel était de vous donner une idée de l’expérience de la création d’une application ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="e32b4-348">The purpose of this tutorial was to give you a sense of the experience of building an ASP.NET MVC application.</span></span> <span data-ttu-id="e32b4-349">J’espère que vous avez découvert que la création d’une application Web ASP.NET MVC est très similaire à l’expérience de la création d’une application Active Server pages ou ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="e32b4-349">I hope that you discovered that building an ASP.NET MVC web application is very similar to the experience of building an Active Server Pages or ASP.NET application.</span></span>

<span data-ttu-id="e32b4-350">Dans ce didacticiel, nous avons examiné uniquement les fonctionnalités les plus basiques de l’infrastructure MVC ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="e32b4-350">In this tutorial, we examined only the most basic features of the ASP.NET MVC framework.</span></span> <span data-ttu-id="e32b4-351">Dans les prochains didacticiels, nous explorons plus en détail des sujets tels que les contrôleurs, les actions de contrôleur, les affichages, les données d’affichage et les applications auxiliaires HTML.</span><span class="sxs-lookup"><span data-stu-id="e32b4-351">In future tutorials, we dive deeper into topics such as controllers, controller actions, views, view data, and HTML helpers.</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="e32b4-352">Suivant</span><span class="sxs-lookup"><span data-stu-id="e32b4-352">Next</span></span>](create-a-movie-database-application-in-15-minutes-with-asp-net-mvc-vb.md)

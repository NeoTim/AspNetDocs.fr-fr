---
uid: mvc/overview/older-versions/using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc/using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4
title: Utilisation du calendrier contextuel de la fenêtre contextuelle de l’interface utilisateur HTML5 et jQuery avec ASP.NET MVC-partie 4 | Microsoft Docs
author: Rick-Anderson
description: Ce didacticiel vous apprend les bases de l’utilisation des modèles de l’éditeur, de l’affichage des modèles et du calendrier contextuel du sélecteur de dates de l’interface utilisateur jQuery dans un ASP.NET MV...
ms.author: riande
ms.date: 08/29/2011
ms.assetid: 57666c69-2b0f-423a-a61d-be49547fa585
msc.legacyurl: /mvc/overview/older-versions/using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc/using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4
msc.type: authoredcontent
ms.openlocfilehash: 583e782641efea9a9517edb31f7718b28203d756
ms.sourcegitcommit: e7e91932a6e91a63e2e46417626f39d6b244a3ab
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78538947"
---
# <a name="using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc---part-4"></a><span data-ttu-id="918fb-103">Utilisation du calendrier contextuel de la fenêtre contextuelle de l’interface utilisateur HTML5 et jQuery avec ASP.NET MVC-partie 4</span><span class="sxs-lookup"><span data-stu-id="918fb-103">Using the HTML5 and jQuery UI Datepicker Popup Calendar with ASP.NET MVC - Part 4</span></span>

<span data-ttu-id="918fb-104">par [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="918fb-104">by [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

> <span data-ttu-id="918fb-105">Ce didacticiel vous apprend les bases de l’utilisation des modèles de l’éditeur, de l’affichage des modèles et du calendrier contextuel du sélecteur de dates de l’interface utilisateur jQuery dans une application Web ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="918fb-105">This tutorial will teach you the basics of how to work with editor templates, display templates, and the jQuery UI datepicker popup calendar in an ASP.NET MVC Web application.</span></span>

### <a name="adding-a-template-for-editing-dates"></a><span data-ttu-id="918fb-106">Ajout d’un modèle pour la modification des dates</span><span class="sxs-lookup"><span data-stu-id="918fb-106">Adding a Template for Editing Dates</span></span>

<span data-ttu-id="918fb-107">Dans cette section, vous allez créer un modèle pour la modification des dates qui seront appliquées quand ASP.NET MVC affiche l’interface utilisateur pour la modification des propriétés du modèle qui sont marquées avec l’énumération **Date** de l’attribut [DataType](https://msdn.microsoft.com/library/system.componentmodel.dataannotations.datatype.aspx) .</span><span class="sxs-lookup"><span data-stu-id="918fb-107">In this section you'll create a template for editing dates that will be applied when ASP.NET MVC displays UI for editing model properties that are marked with the **Date** enumeration of the [DataType](https://msdn.microsoft.com/library/system.componentmodel.dataannotations.datatype.aspx) attribute.</span></span> <span data-ttu-id="918fb-108">Le modèle affiche uniquement la date. l’heure ne sera pas affichée.</span><span class="sxs-lookup"><span data-stu-id="918fb-108">The template will render only the date; time will not be displayed.</span></span> <span data-ttu-id="918fb-109">Dans le modèle, vous allez utiliser le calendrier contextuel de la fenêtre contextuelle [jQuery UI DatePicker](http://jqueryui.com/demos/datepicker/) pour fournir un moyen de modifier les dates.</span><span class="sxs-lookup"><span data-stu-id="918fb-109">In the template you'll use the [jQuery UI Datepicker](http://jqueryui.com/demos/datepicker/) popup calendar to provide a way to edit dates.</span></span>

<span data-ttu-id="918fb-110">Pour commencer, ouvrez le fichier *Movie.cs* et ajoutez l’attribut [DataType](https://msdn.microsoft.com/library/system.componentmodel.dataannotations.datatypeattribute.aspx) avec l’énumération **Date** à la propriété `ReleaseDate`, comme indiqué dans le code suivant :</span><span class="sxs-lookup"><span data-stu-id="918fb-110">To begin, open the *Movie.cs* file and add the [DataType](https://msdn.microsoft.com/library/system.componentmodel.dataannotations.datatypeattribute.aspx) attribute with the **Date** enumeration to the `ReleaseDate` property, as shown in the following code:</span></span>

[!code-csharp[Main](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/samples/sample1.cs)]

<span data-ttu-id="918fb-111">Ce code provoque l’affichage du champ `ReleaseDate` sans l’heure dans les modèles d’affichage et les modèles de modification.</span><span class="sxs-lookup"><span data-stu-id="918fb-111">This code causes the `ReleaseDate` field to be displayed without the time in both display templates and edit templates.</span></span> <span data-ttu-id="918fb-112">Si votre application contient un modèle *date. cshtml* dans le dossier *Views\Shared\EditorTemplates* ou dans le dossier *Views\Movies\EditorTemplates* , ce modèle sera utilisé pour afficher toute propriété de `DateTime` lors de la modification.</span><span class="sxs-lookup"><span data-stu-id="918fb-112">If your application contains a *date.cshtml* template in the *Views\Shared\EditorTemplates* folder or in the *Views\Movies\EditorTemplates* folder, that template will be used to render any `DateTime` property while editing.</span></span> <span data-ttu-id="918fb-113">Dans le cas contraire, le système de création de modèles ASP.NET intégré affiche la propriété en tant que date.</span><span class="sxs-lookup"><span data-stu-id="918fb-113">Otherwise the built-in ASP.NET templating system will display the property as a date.</span></span>

<span data-ttu-id="918fb-114">Appuyez sur CTRL+F5 pour exécuter l'application.</span><span class="sxs-lookup"><span data-stu-id="918fb-114">Press CTRL+F5 to run the application.</span></span> <span data-ttu-id="918fb-115">Sélectionnez un lien Modifier pour vérifier que le champ d’entrée pour la date de publication n’indique que la date.</span><span class="sxs-lookup"><span data-stu-id="918fb-115">Select an edit link to verify that the input field for the release date is showing only the date.</span></span>

![](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/_static/image1.png)

<span data-ttu-id="918fb-116">Dans **Explorateur de solutions**, développez le dossier *views* , développez le dossier *Shared* , puis cliquez avec le bouton droit sur le dossier *Views\Shared\EditorTemplates* .</span><span class="sxs-lookup"><span data-stu-id="918fb-116">In **Solution Explorer**, expand the *Views* folder, expand the *Shared* folder, and then right-click the *Views\Shared\EditorTemplates* folder.</span></span>

<span data-ttu-id="918fb-117">Cliquez sur **Ajouter**, puis sur **affichage**.</span><span class="sxs-lookup"><span data-stu-id="918fb-117">Click **Add**, and then click **View**.</span></span> <span data-ttu-id="918fb-118">La boîte de dialogue **Ajouter une vue** s’affiche.</span><span class="sxs-lookup"><span data-stu-id="918fb-118">The **Add View** dialog box is displayed.</span></span>

<span data-ttu-id="918fb-119">Dans la zone nom de la **vue** , tapez &quot;date&quot;.</span><span class="sxs-lookup"><span data-stu-id="918fb-119">In the **View name** box, type &quot;Date&quot;.</span></span>

<span data-ttu-id="918fb-120">Activez la case à cocher **créer comme vue partielle** .</span><span class="sxs-lookup"><span data-stu-id="918fb-120">Select the **Create as a partial view** check box.</span></span> <span data-ttu-id="918fb-121">Vérifiez que les cases à cocher **utiliser une disposition ou une page maître** et **créer un affichage fortement typé** ne sont pas activées.</span><span class="sxs-lookup"><span data-stu-id="918fb-121">Make sure that the **Use a layout or master page** and **Create a strongly-typed view** check boxes are not selected.</span></span>

<span data-ttu-id="918fb-122">Cliquez sur **Ajouter**.</span><span class="sxs-lookup"><span data-stu-id="918fb-122">Click **Add**.</span></span> <span data-ttu-id="918fb-123">Le modèle *Views\Shared\EditorTemplates\Date.cshtml* est créé.</span><span class="sxs-lookup"><span data-stu-id="918fb-123">The *Views\Shared\EditorTemplates\Date.cshtml* template is created.</span></span>

<span data-ttu-id="918fb-124">Ajoutez le code suivant au modèle *Views\Shared\EditorTemplates\Date.cshtml* .</span><span class="sxs-lookup"><span data-stu-id="918fb-124">Add the following code to the *Views\Shared\EditorTemplates\Date.cshtml* template.</span></span>

[!code-cshtml[Main](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/samples/sample2.cshtml)]

<span data-ttu-id="918fb-125">La première ligne déclare que le modèle est un type de `DateTime`.</span><span class="sxs-lookup"><span data-stu-id="918fb-125">The first line declares the model to be a `DateTime` type.</span></span> <span data-ttu-id="918fb-126">Même si vous n’avez pas besoin de déclarer le type de modèle dans les modèles de modification et d’affichage, il est recommandé d’obtenir la vérification au moment de la compilation du modèle passé à la vue.</span><span class="sxs-lookup"><span data-stu-id="918fb-126">Although you don't need to declare the model type in edit and display templates, it's a best practice so that you get compile-time checking of the model being passed to the view.</span></span> <span data-ttu-id="918fb-127">(Un autre avantage est que vous recevez ensuite IntelliSense pour le modèle dans la vue dans Visual Studio.) Si le type de modèle n’est pas déclaré, ASP.NET MVC considère qu’il s’agit d’un type [dynamique](https://msdn.microsoft.com/library/dd264741.aspx) et qu’il n’y a aucune vérification de type au moment de la compilation.</span><span class="sxs-lookup"><span data-stu-id="918fb-127">(Another benefit is that you then get IntelliSense for the model in the view in Visual Studio.) If the model type is not declared, ASP.NET MVC considers it a [dynamic](https://msdn.microsoft.com/library/dd264741.aspx) type and there's no compile-time type checking.</span></span> <span data-ttu-id="918fb-128">Si vous déclarez que le modèle est un type de `DateTime`, il est fortement typé.</span><span class="sxs-lookup"><span data-stu-id="918fb-128">If you declare the model to be a `DateTime` type, it becomes strongly typed.</span></span>

<span data-ttu-id="918fb-129">La deuxième ligne est simplement une balise HTML littérale qui affiche &quot;à l’aide du modèle de date&quot; avant un champ de date.</span><span class="sxs-lookup"><span data-stu-id="918fb-129">The second line is just literal HTML markup that displays &quot;Using Date Template&quot; before a date field.</span></span> <span data-ttu-id="918fb-130">Vous allez utiliser cette ligne temporairement pour vérifier que ce modèle de date est utilisé.</span><span class="sxs-lookup"><span data-stu-id="918fb-130">You'll use this line temporarily to verify that this date template is being used.</span></span>

<span data-ttu-id="918fb-131">La ligne suivante est une application d’assistance [html. TextBox](https://msdn.microsoft.com/library/system.web.mvc.html.inputextensions.textbox.aspx) qui restitue un champ `input` qui est une zone de texte.</span><span class="sxs-lookup"><span data-stu-id="918fb-131">The next line is an [Html.TextBox](https://msdn.microsoft.com/library/system.web.mvc.html.inputextensions.textbox.aspx) helper that renders an `input` field that's a text box.</span></span> <span data-ttu-id="918fb-132">Le troisième paramètre de l’application auxiliaire utilise un type anonyme pour définir la classe de la zone de texte sur `datefield` et le type à `date`.</span><span class="sxs-lookup"><span data-stu-id="918fb-132">The third parameter for the helper uses an anonymous type to set the class for the text box to `datefield` and the type to `date`.</span></span> <span data-ttu-id="918fb-133">(Étant donné que `class` est un C#réservé dans, vous devez utiliser le caractère `@` pour échapper l’attribut `class` dans C# l’analyseur.)</span><span class="sxs-lookup"><span data-stu-id="918fb-133">(Because `class` is a reserved in C#, you need to use the `@` character to escape the `class` attribute in the C# parser.)</span></span>

<span data-ttu-id="918fb-134">Le type de `date` est un type d’entrée HTML5 qui permet aux navigateurs prenant en charge HTML5 d’afficher un contrôle de calendrier HTML5.</span><span class="sxs-lookup"><span data-stu-id="918fb-134">The `date` type is an HTML5 input type that enables HTML5-aware browsers to render a HTML5 calendar control.</span></span> <span data-ttu-id="918fb-135">Plus tard, vous ajouterez du JavaScript pour raccorder le sélecteur jQuery à l’élément `Html.TextBox` à l’aide de la classe `datefield`.</span><span class="sxs-lookup"><span data-stu-id="918fb-135">Later on you'll add some JavaScript to hook up the jQuery datepicker to the `Html.TextBox` element using the `datefield` class.</span></span>

<span data-ttu-id="918fb-136">Appuyez sur CTRL+F5 pour exécuter l'application.</span><span class="sxs-lookup"><span data-stu-id="918fb-136">Press CTRL+F5 to run the application.</span></span> <span data-ttu-id="918fb-137">Vous pouvez vérifier que la propriété `ReleaseDate` dans la vue Edit utilise le modèle Edit, car le modèle affiche &quot;à l’aide du modèle de date&quot; juste avant la zone de texte `ReleaseDate` Text, comme indiqué dans cette image :</span><span class="sxs-lookup"><span data-stu-id="918fb-137">You can verify that the `ReleaseDate` property in the edit view is using the edit template because the template displays &quot;Using Date Template&quot; just before the `ReleaseDate` text input box, as shown in this image:</span></span>

![](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/_static/image2.png)

<span data-ttu-id="918fb-138">Dans votre navigateur, affichez la source de la page.</span><span class="sxs-lookup"><span data-stu-id="918fb-138">In your browser, view the source of the page.</span></span> <span data-ttu-id="918fb-139">(Par exemple, cliquez avec le bouton droit sur la page et sélectionnez **afficher la source**.) L’exemple suivant montre une partie du balisage de la page, illustrant les attributs `class` et `type` dans le rendu HTML.</span><span class="sxs-lookup"><span data-stu-id="918fb-139">(For example, right-click the page and select **View source**.) The following example shows some of the markup for the page, illustrating the `class` and `type` attributes in the rendered HTML.</span></span>

[!code-html[Main](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/samples/sample3.html)]

<span data-ttu-id="918fb-140">Revenez au modèle *Views\Shared\EditorTemplates\Date.cshtml* et supprimez le &quot;à l’aide du modèle de date&quot; le balisage.</span><span class="sxs-lookup"><span data-stu-id="918fb-140">Return to the *Views\Shared\EditorTemplates\Date.cshtml* template and remove the &quot;Using Date Template&quot; markup.</span></span> <span data-ttu-id="918fb-141">Le modèle terminé ressemble maintenant à ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="918fb-141">Now the completed template looks like this:</span></span>

[!code-cshtml[Main](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/samples/sample4.cshtml)]

### <a name="adding-a-jquery-ui-datepicker-popup-calendar-using-nuget"></a><span data-ttu-id="918fb-142">Ajout d’un calendrier contextuel du sélecteur de dates jQuery UI à l’aide de NuGet</span><span class="sxs-lookup"><span data-stu-id="918fb-142">Adding a jQuery UI Datepicker Popup Calendar using NuGet</span></span>

<span data-ttu-id="918fb-143">Dans cette section, vous allez ajouter le calendrier contextuel du sélecteur de dates de l' [interface utilisateur jQuery](http://jqueryui.com/demos/datepicker/) au modèle date-édition.</span><span class="sxs-lookup"><span data-stu-id="918fb-143">In this section you'll add the [jQuery UI datepicker](http://jqueryui.com/demos/datepicker/) popup calendar to the date-edit template.</span></span> <span data-ttu-id="918fb-144">La bibliothèque [jQuery UI](http://jqueryui.com/) prend en charge l’animation, les effets avancés et les widgets personnalisables.</span><span class="sxs-lookup"><span data-stu-id="918fb-144">The [jQuery UI](http://jqueryui.com/) library provides support for animation, advanced effects, and customizable widgets.</span></span> <span data-ttu-id="918fb-145">Il s’appuie sur la bibliothèque Java jQuery.</span><span class="sxs-lookup"><span data-stu-id="918fb-145">It's built on top of the jQuery JavaScript library.</span></span> <span data-ttu-id="918fb-146">Le calendrier contextuel de DatePicker permet d’entrer facilement et en toute simplicité des dates à l’aide d’un calendrier au lieu d’entrer une chaîne.</span><span class="sxs-lookup"><span data-stu-id="918fb-146">The datepicker popup calendar makes it easy and natural to enter dates using a calendar instead of entering a string.</span></span> <span data-ttu-id="918fb-147">Le calendrier contextuel limite également les utilisateurs aux dates légales. une entrée de texte ordinaire pour une date vous permet de saisir des `2/33/1999` (février 33rd, 1999), mais le calendrier contextuel [jQuery UI DatePicker](http://jqueryui.com/demos/datepicker/) ne l’autorise pas.</span><span class="sxs-lookup"><span data-stu-id="918fb-147">The popup calendar also limits users to legal dates — ordinary text entry for a date would let you enter something like `2/33/1999` ( February 33rd, 1999), but the [jQuery UI datepicker](http://jqueryui.com/demos/datepicker/) popup calendar won't allow that.</span></span>

<span data-ttu-id="918fb-148">Tout d’abord, vous devez installer les bibliothèques de l’interface utilisateur jQuery.</span><span class="sxs-lookup"><span data-stu-id="918fb-148">First, you have to install the jQuery UI libraries.</span></span> <span data-ttu-id="918fb-149">Pour ce faire, vous allez utiliser NuGet, qui est un gestionnaire de package inclus dans les versions SP1 de Visual Studio 2010 et Visual Web Developer.</span><span class="sxs-lookup"><span data-stu-id="918fb-149">To do that, you'll use NuGet, which is a package manager that's included in SP1 versions of Visual Studio 2010 and Visual Web Developer.</span></span>

<span data-ttu-id="918fb-150">Dans Visual Web Developer, dans le menu **Outils** , sélectionnez **Gestionnaire de package NuGet** , puis sélectionnez **gérer les packages NuGet**.</span><span class="sxs-lookup"><span data-stu-id="918fb-150">In Visual Web Developer, from the **Tools** menu, select **NuGet Package Manager** and then select **Manage NuGet Packages**.</span></span>

![](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/_static/image3.png)

<span data-ttu-id="918fb-151">Remarque : si le menu **Outils** n’affiche pas la commande **Gestionnaire de package NuGet** , vous devez installer NuGet en suivant les instructions de la page [installation de NuGet](http://docs.nuget.org/docs/start-here/installing-nuget) du site Web NuGet.</span><span class="sxs-lookup"><span data-stu-id="918fb-151">Note: If the **Tools** menu doesn't display the **NuGet Package Manager** command, you need to install NuGet by following the instructions on the [Installing NuGet](http://docs.nuget.org/docs/start-here/installing-nuget) page of the NuGet website.</span></span>   
  
<span data-ttu-id="918fb-152">Si vous utilisez Visual Studio au lieu de Visual Web Developer, dans le menu **Outils** , sélectionnez **Gestionnaire de package NuGet** , puis sélectionnez Ajouter une référence de package de **bibliothèque**.</span><span class="sxs-lookup"><span data-stu-id="918fb-152">If you're using Visual Studio instead of Visual Web Developer, from the **Tools** menu, select **NuGet Package Manager** and then select **Add Library Package Reference**.</span></span>

![](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/_static/image4.png)

<span data-ttu-id="918fb-153">Dans la boîte de dialogue **MVCMovie-Manage NuGet packages** , cliquez sur l’onglet **Online** situé à gauche, puis entrez &quot;jQuery. UI&quot; dans la zone de recherche.</span><span class="sxs-lookup"><span data-stu-id="918fb-153">In the **MVCMovie - Manage NuGet Packages** dialog box, click the **Online** tab on the left and then enter &quot;jQuery.UI&quot; in the search box.</span></span> <span data-ttu-id="918fb-154">Sélectionnez j **query UI widgets : DatePicker**, puis cliquez sur le bouton **installer** .</span><span class="sxs-lookup"><span data-stu-id="918fb-154">Select j **Query UI Widgets:Datepicker**, then select the **Install** button.</span></span>

![](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/_static/image5.png)

![](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/_static/image6.png)

<span data-ttu-id="918fb-155">NuGet ajoute ces versions Debug et les versions minimisés de jQuery UI Core et le sélecteur de date jQuery UI à votre projet :</span><span class="sxs-lookup"><span data-stu-id="918fb-155">NuGet adds these debug versions and minified versions of jQuery UI Core and the jQuery UI date picker to your project:</span></span>

- <span data-ttu-id="918fb-156">*jQuery. UI. Core. js*</span><span class="sxs-lookup"><span data-stu-id="918fb-156">*jquery.ui.core.js*</span></span>
- <span data-ttu-id="918fb-157">*jQuery. UI. Core. min. js*</span><span class="sxs-lookup"><span data-stu-id="918fb-157">*jquery.ui.core.min.js*</span></span>
- <span data-ttu-id="918fb-158">*jQuery. UI. DatePicker. js*</span><span class="sxs-lookup"><span data-stu-id="918fb-158">*jquery.ui.datepicker.js*</span></span>
- <span data-ttu-id="918fb-159">*jQuery. UI. DatePicker. min. js*</span><span class="sxs-lookup"><span data-stu-id="918fb-159">*jquery.ui.datepicker.min.js*</span></span>

<span data-ttu-id="918fb-160">Remarque : les versions Debug (les fichiers sans l’extension *. min. js* ) sont utiles pour le débogage, mais dans un site de production, vous n’incluez que les versions minimisés.</span><span class="sxs-lookup"><span data-stu-id="918fb-160">Note: The debug versions (the files without the *.min.js* extension) are useful for debugging, but in a production site, you'd include only the minified versions.</span></span>

<span data-ttu-id="918fb-161">Pour utiliser réellement le sélecteur de dates jQuery, vous devez créer un script jQuery qui associe le widget de calendrier au modèle d’édition.</span><span class="sxs-lookup"><span data-stu-id="918fb-161">To actually use the jQuery date picker, you need to create a jQuery script that will hook up the calendar widget to the edit template.</span></span> <span data-ttu-id="918fb-162">Dans **Explorateur de solutions**, cliquez avec le bouton droit sur le dossier *scripts* , puis sélectionnez **Ajouter**, **nouvel élément**et **fichier JScript**.</span><span class="sxs-lookup"><span data-stu-id="918fb-162">In **Solution Explorer**, right-click the *Scripts* folder and select **Add**, then **New Item**, and then **JScript File**.</span></span> <span data-ttu-id="918fb-163">Nommez le fichier *DatePickerReady. js*.</span><span class="sxs-lookup"><span data-stu-id="918fb-163">Name the file *DatePickerReady.js*.</span></span>

<span data-ttu-id="918fb-164">Ajoutez le code suivant au fichier *DatePickerReady. js* :</span><span class="sxs-lookup"><span data-stu-id="918fb-164">Add the following code to the *DatePickerReady.js* file:</span></span>

[!code-javascript[Main](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/samples/sample5.js)]

<span data-ttu-id="918fb-165">Si vous n’êtes pas familiarisé avec jQuery, voici une brève explication de ce que cela fait : la première ligne est la &quot;fonction jQuery Ready&quot;, qui est appelée lorsque tous les éléments DOM d’une page ont été chargés.</span><span class="sxs-lookup"><span data-stu-id="918fb-165">If you're not familiar with jQuery, here's a brief explanation of what this does: the first line is the &quot;jQuery ready&quot; function, which is called when all the DOM elements in a page have loaded.</span></span> <span data-ttu-id="918fb-166">La deuxième ligne sélectionne tous les éléments DOM qui ont le nom de la classe `datefield`, puis appelle la fonction `datepicker` pour chacun d’eux.</span><span class="sxs-lookup"><span data-stu-id="918fb-166">The second line selects all DOM elements that have the class name `datefield`, then invokes the `datepicker` function for each of them.</span></span> <span data-ttu-id="918fb-167">(N’oubliez pas que vous avez ajouté la classe `datefield` au modèle *Views\Shared\EditorTemplates\Date.cshtml* plus haut dans le didacticiel.)</span><span class="sxs-lookup"><span data-stu-id="918fb-167">(Remember that you added the `datefield` class to the *Views\Shared\EditorTemplates\Date.cshtml* template earlier in the tutorial.)</span></span>

<span data-ttu-id="918fb-168">Ensuite, ouvrez le fichier *Views\Shared\\_Layout. cshtml* .</span><span class="sxs-lookup"><span data-stu-id="918fb-168">Next, open the *Views\Shared\\_Layout.cshtml* file.</span></span> <span data-ttu-id="918fb-169">Vous devez ajouter des références aux fichiers suivants, qui sont tous obligatoires afin que vous puissiez utiliser le sélecteur de dates :</span><span class="sxs-lookup"><span data-stu-id="918fb-169">You need to add references to the following files, which are all required so that you can use the date picker:</span></span>

- <span data-ttu-id="918fb-170">*Content/themes/base/jQuery. UI. Core. CSS*</span><span class="sxs-lookup"><span data-stu-id="918fb-170">*Content/themes/base/jquery.ui.core.css*</span></span>
- <span data-ttu-id="918fb-171">*Content/themes/base/jQuery. UI. DatePicker. CSS*</span><span class="sxs-lookup"><span data-stu-id="918fb-171">*Content/themes/base/jquery.ui.datepicker.css*</span></span>
- <span data-ttu-id="918fb-172">*Content/themes/base/jQuery. UI. Theme. CSS*</span><span class="sxs-lookup"><span data-stu-id="918fb-172">*Content/themes/base/jquery.ui.theme.css*</span></span>
- <span data-ttu-id="918fb-173">*jQuery. UI. Core. min. js*</span><span class="sxs-lookup"><span data-stu-id="918fb-173">*jquery.ui.core.min.js*</span></span>
- <span data-ttu-id="918fb-174">*jQuery. UI. DatePicker. min. js*</span><span class="sxs-lookup"><span data-stu-id="918fb-174">*jquery.ui.datepicker.min.js*</span></span>
- <span data-ttu-id="918fb-175">*DatePickerReady. js*</span><span class="sxs-lookup"><span data-stu-id="918fb-175">*DatePickerReady.js*</span></span>

<span data-ttu-id="918fb-176">L’exemple suivant montre le code réel que vous devez ajouter en bas de l’élément `head` dans le fichier *Views\Shared\\_Layout. cshtml* .</span><span class="sxs-lookup"><span data-stu-id="918fb-176">The following example shows the actual code that you should add at the bottom of the `head` element in the *Views\Shared\\_Layout.cshtml* file.</span></span>

[!code-cshtml[Main](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/samples/sample6.cshtml)]

<span data-ttu-id="918fb-177">La section `head` complète est présentée ici :</span><span class="sxs-lookup"><span data-stu-id="918fb-177">The complete `head` section is shown here:</span></span>

[!code-cshtml[Main](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/samples/sample7.cshtml)]

<span data-ttu-id="918fb-178">La méthode d' [assistance de contenu d’URL](https://msdn.microsoft.com/library/system.web.mvc.urlhelper.content.aspx) convertit le chemin d’accès de la ressource en chemin d’accès absolu.</span><span class="sxs-lookup"><span data-stu-id="918fb-178">The [URL content helper](https://msdn.microsoft.com/library/system.web.mvc.urlhelper.content.aspx) method converts the resource path to an absolute path.</span></span> <span data-ttu-id="918fb-179">Vous devez utiliser `@URL.Content` pour référencer correctement ces ressources lorsque l’application s’exécute sur IIS.</span><span class="sxs-lookup"><span data-stu-id="918fb-179">You must use `@URL.Content` to correctly reference these resources when the application is running on IIS.</span></span>

<span data-ttu-id="918fb-180">Appuyez sur CTRL+F5 pour exécuter l'application.</span><span class="sxs-lookup"><span data-stu-id="918fb-180">Press CTRL+F5 to run the application.</span></span> <span data-ttu-id="918fb-181">Sélectionnez un lien modifier, puis placez le point d’insertion dans le champ **libéré** .</span><span class="sxs-lookup"><span data-stu-id="918fb-181">Select an edit link, then put the insertion point into the **ReleaseDate** field.</span></span> <span data-ttu-id="918fb-182">Le calendrier contextuel jQuery UI s’affiche.</span><span class="sxs-lookup"><span data-stu-id="918fb-182">The jQuery UI popup calendar is displayed.</span></span>

![](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/_static/image7.png)

<span data-ttu-id="918fb-183">Comme la plupart des contrôles jQuery, le DatePicker vous permet de le personnaliser de manière intensive.</span><span class="sxs-lookup"><span data-stu-id="918fb-183">Like most jQuery controls, the datepicker lets you customize it extensively.</span></span> <span data-ttu-id="918fb-184">Pour plus d’informations, consultez [personnalisation visuelle : conception d’un thème de l’interface utilisateur jQuery](http://learn.jquery.com/jquery-ui/getting-started/#visual-customization-designing-a-jquery-ui-theme) sur le site de l' [interface utilisateur jQuery](http://learn.jquery.com/jquery-ui/getting-started/) .</span><span class="sxs-lookup"><span data-stu-id="918fb-184">For information, see [Visual Customization: Designing a jQuery UI theme](http://learn.jquery.com/jquery-ui/getting-started/#visual-customization-designing-a-jquery-ui-theme) on the [jQuery UI](http://learn.jquery.com/jquery-ui/getting-started/) site.</span></span>

### <a name="supporting-the-html5-date-input-control"></a><span data-ttu-id="918fb-185">Prise en charge du contrôle d’entrée de date HTML5</span><span class="sxs-lookup"><span data-stu-id="918fb-185">Supporting the HTML5 Date Input Control</span></span>

<span data-ttu-id="918fb-186">À mesure que de plus en plus de navigateurs prennent en charge HTML5, vous souhaiterez utiliser l’entrée HTML5 native, telle que l’élément d’entrée `date`, et ne pas utiliser le calendrier de l’interface utilisateur jQuery.</span><span class="sxs-lookup"><span data-stu-id="918fb-186">As more browsers support HTML5, you'll want to use the native HTML5 input, such as the `date` input element, and not use the jQuery UI calendar.</span></span> <span data-ttu-id="918fb-187">Vous pouvez ajouter une logique à votre application pour qu’elle utilise automatiquement les contrôles HTML5 si le navigateur les prend en charge.</span><span class="sxs-lookup"><span data-stu-id="918fb-187">You can add logic to your application to automatically use HTML5 controls if the browser supports them.</span></span> <span data-ttu-id="918fb-188">Pour ce faire, remplacez le contenu du fichier *DatePickerReady. js* par ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="918fb-188">To do this, replace the contents of the *DatePickerReady.js* file with the following:</span></span>

[!code-javascript[Main](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/samples/sample8.js)]

<span data-ttu-id="918fb-189">La première ligne de ce script utilise Modernizr pour vérifier que l’entrée de date HTML5 est prise en charge.</span><span class="sxs-lookup"><span data-stu-id="918fb-189">The first line of this script uses Modernizr to verify that HTML5 date input is supported.</span></span> <span data-ttu-id="918fb-190">S’il n’est pas pris en charge, le sélecteur de dates jQuery UI est raccordé à la place.</span><span class="sxs-lookup"><span data-stu-id="918fb-190">If it's not supported, the jQuery UI date picker is hooked up instead.</span></span> <span data-ttu-id="918fb-191">([Modernizr](http://www.modernizr.com/docs/) est une bibliothèque JavaScript open source qui détecte la disponibilité des implémentations natives de HTML5 et CSS3.</span><span class="sxs-lookup"><span data-stu-id="918fb-191">([Modernizr](http://www.modernizr.com/docs/) is an open-source JavaScript library that detects the availability of native implementations of HTML5 and CSS3.</span></span> <span data-ttu-id="918fb-192">Modernizr est inclus dans tous les nouveaux projets MVC ASP.NET que vous créez.)</span><span class="sxs-lookup"><span data-stu-id="918fb-192">Modernizr is included in any new ASP.NET MVC projects that you create.)</span></span>

<span data-ttu-id="918fb-193">Une fois que vous avez apporté cette modification, vous pouvez la tester à l’aide d’un navigateur prenant en charge HTML5, tel que Opera 11.</span><span class="sxs-lookup"><span data-stu-id="918fb-193">After you've made this change, you can test it by using a browser that supports HTML5, such as Opera 11.</span></span> <span data-ttu-id="918fb-194">Exécutez l’application à l’aide d’un navigateur compatible HTML5 et modifiez une entrée de film.</span><span class="sxs-lookup"><span data-stu-id="918fb-194">Run the application using an HTML5-compatible browser and edit a movie entry.</span></span> <span data-ttu-id="918fb-195">Le contrôle de date HTML5 est utilisé à la place du calendrier contextuel de l’interface utilisateur jQuery :</span><span class="sxs-lookup"><span data-stu-id="918fb-195">The HTML5 date control is used instead of the jQuery UI popup calendar:</span></span>

![](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/_static/image8.png)

<span data-ttu-id="918fb-196">Étant donné que les nouvelles versions des navigateurs implémentent HTML5 de manière incrémentielle, une bonne approche pour l’instant est d’ajouter du code à votre site Web qui prend en charge un large éventail de prise en charge HTML5.</span><span class="sxs-lookup"><span data-stu-id="918fb-196">Because new versions of browsers are implementing HTML5 incrementally, a good approach for now is to add code to your website that accommodates a wide variety of HTML5 support.</span></span> <span data-ttu-id="918fb-197">Par exemple, un script *DatePickerReady. js* plus robuste est illustré ci-dessous, ce qui permet à votre site de prendre en charge des navigateurs qui ne prennent en charge que partiellement le contrôle de date HTML5.</span><span class="sxs-lookup"><span data-stu-id="918fb-197">For example, a more robust *DatePickerReady.js* script is shown below that lets your site support browsers that only partially support the HTML5 date control.</span></span>

[!code-javascript[Main](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/samples/sample9.js)]

<span data-ttu-id="918fb-198">Ce script sélectionne les éléments de `input` HTML5 de type `date` qui ne prennent pas entièrement en charge le contrôle de date HTML5.</span><span class="sxs-lookup"><span data-stu-id="918fb-198">This script selects HTML5 `input` elements of type `date` that don't fully support the HTML5 date control.</span></span> <span data-ttu-id="918fb-199">Pour ces éléments, elle raccorde le calendrier contextuel de l’interface utilisateur jQuery, puis remplace l’attribut `type` de `date` par `text`.</span><span class="sxs-lookup"><span data-stu-id="918fb-199">For those elements, it hooks up the jQuery UI popup calendar and then changes the `type` attribute from `date` to `text`.</span></span> <span data-ttu-id="918fb-200">En remplaçant l’attribut `type` de `date` par `text`, la prise en charge partielle des dates HTML5 est éliminée.</span><span class="sxs-lookup"><span data-stu-id="918fb-200">By changing the `type` attribute from `date` to `text`, partial HTML5 date support is eliminated.</span></span> <span data-ttu-id="918fb-201">Vous trouverez un script *DatePickerReady. js* encore plus robuste sur [JSFIDDLE](http://jsfiddle.net/XSTK8/15/).</span><span class="sxs-lookup"><span data-stu-id="918fb-201">An even more robust *DatePickerReady.js* script can be found at [JSFIDDLE](http://jsfiddle.net/XSTK8/15/).</span></span>

### <a name="adding-nullable-dates-to-the-templates"></a><span data-ttu-id="918fb-202">Ajout de dates Nullable aux modèles</span><span class="sxs-lookup"><span data-stu-id="918fb-202">Adding Nullable Dates to the Templates</span></span>

<span data-ttu-id="918fb-203">Si vous utilisez l’un des modèles de date existants et que vous transmettez une date NULL, vous obtenez une erreur d’exécution.</span><span class="sxs-lookup"><span data-stu-id="918fb-203">If you use one of the existing date templates and pass a null date, you'll get a run-time error.</span></span> <span data-ttu-id="918fb-204">Pour rendre les modèles de date plus fiables, vous devez les modifier pour gérer les valeurs NULL.</span><span class="sxs-lookup"><span data-stu-id="918fb-204">To make the date templates more robust, you'll change them to handle null values.</span></span> <span data-ttu-id="918fb-205">Pour prendre en charge les dates Nullable, remplacez le code dans *Views\Shared\DisplayTemplates\DateTime.cshtml* par ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="918fb-205">To support nullable dates, change the code in the *Views\Shared\DisplayTemplates\DateTime.cshtml* to the following:</span></span>

[!code-cshtml[Main](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/samples/sample10.cshtml)]

<span data-ttu-id="918fb-206">Le code retourne une chaîne vide lorsque le modèle a la **valeur null**.</span><span class="sxs-lookup"><span data-stu-id="918fb-206">The code returns an empty string when the model is **null**.</span></span>

<span data-ttu-id="918fb-207">Remplacez le code du fichier *Views\Shared\EditorTemplates\Date.cshtml* par ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="918fb-207">Change the code in the *Views\Shared\EditorTemplates\Date.cshtml* file to the following:</span></span>

[!code-cshtml[Main](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-4/samples/sample11.cshtml)]

<span data-ttu-id="918fb-208">Quand ce code s’exécute, si le modèle n’est pas null, la valeur de `DateTime` du modèle est utilisée.</span><span class="sxs-lookup"><span data-stu-id="918fb-208">When this code runs, if the model is not null, the model's `DateTime` value is used.</span></span> <span data-ttu-id="918fb-209">Si le modèle a la valeur null, la date actuelle est utilisée à la place.</span><span class="sxs-lookup"><span data-stu-id="918fb-209">If the model is null, the current date is used instead.</span></span>

### <a name="wrapup"></a><span data-ttu-id="918fb-210">Wrapup</span><span class="sxs-lookup"><span data-stu-id="918fb-210">Wrapup</span></span>

<span data-ttu-id="918fb-211">Ce didacticiel a abordé les principes de base des applications auxiliaires basées sur un modèle ASP.NET et vous montre comment utiliser le calendrier contextuel du sélecteur de dates de l’interface utilisateur jQuery dans une application ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="918fb-211">This tutorial has covered the basics of ASP.NET templated helpers and shows you how to use the jQuery UI datepicker popup calendar in an ASP.NET MVC application.</span></span> <span data-ttu-id="918fb-212">Pour plus d’informations, consultez les ressources suivantes :</span><span class="sxs-lookup"><span data-stu-id="918fb-212">For more information, try these resources:</span></span>

- <span data-ttu-id="918fb-213">Pour plus d’informations sur la localisation, consultez le billet de blog de Rajeesh [jQueryUI DatePicker dans ASP.NET MVC](http://www.rajeeshcv.com/2010/02/jqueryui-datepicker-in-asp-net-mvc/).</span><span class="sxs-lookup"><span data-stu-id="918fb-213">For information on localization, see Rajeesh's blog [JQueryUI Datepicker in ASP.NET MVC](http://www.rajeeshcv.com/2010/02/jqueryui-datepicker-in-asp-net-mvc/).</span></span>
- <span data-ttu-id="918fb-214">Pour plus d’informations sur l’interface utilisateur jQuery, consultez [jQuery UI](http://docs.jquery.com/UI).</span><span class="sxs-lookup"><span data-stu-id="918fb-214">For information about jQuery UI, see [jQuery UI](http://docs.jquery.com/UI).</span></span>
- <span data-ttu-id="918fb-215">Pour plus d’informations sur la localisation du contrôle DatePicker, consultez [UI/DatePicker/localization](http://docs.jquery.com/UI/Datepicker/Localization).</span><span class="sxs-lookup"><span data-stu-id="918fb-215">For information about how to localize the datepicker control, see [UI/Datepicker/Localization](http://docs.jquery.com/UI/Datepicker/Localization).</span></span>
- <span data-ttu-id="918fb-216">Pour plus d’informations sur les modèles MVC ASP.NET, consultez la série de blogs de Brad Wilson sur les [modèles ASP.NET MVC 2](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html).</span><span class="sxs-lookup"><span data-stu-id="918fb-216">For more information about the ASP.NET MVC templates, see Brad Wilson's blog series on [ASP.NET MVC 2 Templates](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html).</span></span> <span data-ttu-id="918fb-217">Bien que la série ait été écrite pour ASP.NET MVC 2, le matériel s’applique toujours à la version actuelle de ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="918fb-217">Although the series was written for ASP.NET MVC 2, the material still applies for the current version of ASP.NET MVC.</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="918fb-218">Précédent</span><span class="sxs-lookup"><span data-stu-id="918fb-218">Previous</span></span>](using-the-html5-and-jquery-ui-datepicker-popup-calendar-with-aspnet-mvc-part-3.md)

---
uid: mvc/overview/older-versions/getting-started-with-aspnet-mvc4/adding-a-view
title: Ajout d’une vue | Microsoft Docs
author: Rick-Anderson
description: 'Remarque : une version mise à jour de ce didacticiel est disponible ici et utilise ASP.NET MVC 5 et Visual Studio 2013. C’est plus sécurisé, bien plus simple à suivre et à faire une démonstration...'
ms.author: riande
ms.date: 08/28/2012
ms.assetid: dde851d7-882e-4d99-9b96-cf96daed81cc
msc.legacyurl: /mvc/overview/older-versions/getting-started-with-aspnet-mvc4/adding-a-view
msc.type: authoredcontent
ms.openlocfilehash: 81c2e1f46b08cbc9b5aa5d6c1b36d9d8dc2ba581
ms.sourcegitcommit: 7709c0a091b8d55b7b33bad8849f7b66b23c3d72
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/19/2020
ms.locfileid: "77457633"
---
# <a name="adding-a-view"></a><span data-ttu-id="0e2e0-104">Ajout d’une vue</span><span class="sxs-lookup"><span data-stu-id="0e2e0-104">Adding a View</span></span>

<span data-ttu-id="0e2e0-105">par [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="0e2e0-105">by [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

> > [!NOTE]
> > <span data-ttu-id="0e2e0-106">Une version mise à jour de ce didacticiel est disponible [ici](../../getting-started/introduction/getting-started.md) et utilise ASP.NET MVC 5 et Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-106">An updated version of this tutorial is available [here](../../getting-started/introduction/getting-started.md) that uses ASP.NET MVC 5 and Visual Studio 2013.</span></span> <span data-ttu-id="0e2e0-107">Il est plus sûr, bien plus simple à suivre et qui illustre davantage de fonctionnalités.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-107">It's more secure, much simpler to follow and demonstrates more features.</span></span>

<span data-ttu-id="0e2e0-108">Dans cette section, vous allez modifier la classe `HelloWorldController` pour utiliser les fichiers de modèle de vue afin d’encapsuler correctement le processus de génération de réponses HTML sur un client.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-108">In this section you're going to modify the `HelloWorldController` class to use view template files to cleanly encapsulate the process of generating HTML responses to a client.</span></span>

<span data-ttu-id="0e2e0-109">Vous allez créer un fichier de modèle de vue à l’aide du [moteur de vue Razor](https://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx) introduit avec ASP.NET MVC 3.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-109">You'll create a view template file using the [Razor view engine](https://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx) introduced with ASP.NET MVC 3.</span></span> <span data-ttu-id="0e2e0-110">Les modèles de vue Razor ont une extension de fichier *. cshtml* et offrent un moyen élégant de créer une sortie HTML C#à l’aide de.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-110">Razor-based view templates have a *.cshtml* file extension, and provide an elegant way to create HTML output using C#.</span></span> <span data-ttu-id="0e2e0-111">Razor réduit le nombre de caractères et de frappes de touches requis lors de l’écriture d’un modèle de vue, et permet un flux de travail de codage fluide rapide.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-111">Razor minimizes the number of characters and keystrokes required when writing a view template, and enables a fast, fluid coding workflow.</span></span>

<span data-ttu-id="0e2e0-112">Actuellement, la méthode `Index` retourne une chaîne avec un message qui est codé en dur dans la classe du contrôleur.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-112">Currently the `Index` method returns a string with a message that is hard-coded in the controller class.</span></span> <span data-ttu-id="0e2e0-113">Modifiez la méthode `Index` pour retourner un objet `View`, comme indiqué dans le code suivant :</span><span class="sxs-lookup"><span data-stu-id="0e2e0-113">Change the `Index` method to return a `View` object, as shown in the following code:</span></span>

[!code-csharp[Main](adding-a-view/samples/sample1.cs)]

<span data-ttu-id="0e2e0-114">La méthode `Index` ci-dessus utilise un modèle de vue pour générer une réponse HTML au navigateur.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-114">The `Index` method above uses a view template to generate an HTML response to the browser.</span></span> <span data-ttu-id="0e2e0-115">Les méthodes de contrôleur (également appelées [méthodes d’action](http://rachelappel.com/asp.net-mvc-actionresults-explained)), telles que la méthode `Index` ci-dessus, retournent généralement un [ActionResult](https://msdn.microsoft.com/library/system.web.mvc.actionresult.aspx) (ou une classe dérivée de [ActionResult](https://msdn.microsoft.com/library/system.web.mvc.actionresult.aspx)), et non des types primitifs tels que String.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-115">Controller methods (also known as [action methods](http://rachelappel.com/asp.net-mvc-actionresults-explained)), such as the `Index` method above, generally return an [ActionResult](https://msdn.microsoft.com/library/system.web.mvc.actionresult.aspx) (or a class derived from [ActionResult](https://msdn.microsoft.com/library/system.web.mvc.actionresult.aspx)), not primitive types like string.</span></span>

<span data-ttu-id="0e2e0-116">Dans le projet, ajoutez un modèle de vue que vous pouvez utiliser avec la méthode `Index`.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-116">In the project, add a view template that you can use with the `Index` method.</span></span> <span data-ttu-id="0e2e0-117">Pour ce faire, cliquez avec le bouton droit à l’intérieur de la méthode `Index`, puis cliquez sur **Ajouter une vue**.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-117">To do this, right-click inside the `Index` method and click **Add View**.</span></span>

![](adding-a-view/_static/image1.png)

<span data-ttu-id="0e2e0-118">La boîte de dialogue **Ajouter une vue** s’affiche.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-118">The **Add View** dialog box appears.</span></span> <span data-ttu-id="0e2e0-119">Laissez les valeurs par défaut comme elles le sont, puis cliquez sur le bouton **Ajouter** :</span><span class="sxs-lookup"><span data-stu-id="0e2e0-119">Leave the defaults the way they are and click the **Add** button:</span></span>

![](adding-a-view/_static/image2.png)

<span data-ttu-id="0e2e0-120">Le dossier *MvcMovie\Views\HelloWorld* et le fichier *MvcMovie\Views\HelloWorld\Index.cshtml* sont créés.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-120">The *MvcMovie\Views\HelloWorld* folder and the *MvcMovie\Views\HelloWorld\Index.cshtml* file are created.</span></span> <span data-ttu-id="0e2e0-121">Vous pouvez les afficher dans **Explorateur de solutions**:</span><span class="sxs-lookup"><span data-stu-id="0e2e0-121">You can see them in **Solution Explorer**:</span></span>

![](adding-a-view/_static/image3.png)

<span data-ttu-id="0e2e0-122">L’exemple suivant montre le fichier *index. cshtml* qui a été créé :</span><span class="sxs-lookup"><span data-stu-id="0e2e0-122">The following shows the *Index.cshtml* file that was created:</span></span>

![HelloWorldIndex](adding-a-view/_static/image4.png)

<span data-ttu-id="0e2e0-124">Ajoutez le code HTML suivant sous la balise `<h2>`.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-124">Add the following HTML under the `<h2>` tag.</span></span>

[!code-html[Main](adding-a-view/samples/sample2.html)]

<span data-ttu-id="0e2e0-125">Le fichier *MvcMovie\Views\HelloWorld\Index.cshtml* complet est illustré ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-125">The complete *MvcMovie\Views\HelloWorld\Index.cshtml* file is shown below.</span></span>

[!code-cshtml[Main](adding-a-view/samples/sample3.cshtml?highlight=7-8)]

<span data-ttu-id="0e2e0-126">Si vous utilisez Visual Studio 2012, dans l’Explorateur de solutions, cliquez avec le bouton droit sur le fichier *index. cshtml* , puis sélectionnez **afficher dans inspecteur de page**.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-126">If you are using Visual Studio 2012, in solution explorer, right click the *Index.cshtml* file and select **View in Page Inspector**.</span></span>

![PI](adding-a-view/_static/image5.png)

<span data-ttu-id="0e2e0-128">Le [didacticiel inspecteur de page](../../views/using-page-inspector-in-aspnet-mvc.md) contient des informations supplémentaires sur ce nouvel outil.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-128">The [Page Inspector tutorial](../../views/using-page-inspector-in-aspnet-mvc.md) has more information about this new tool.</span></span>

<span data-ttu-id="0e2e0-129">Vous pouvez également exécuter l’application et accéder au contrôleur de `HelloWorld` (`http://localhost:xxxx/HelloWorld`).</span><span class="sxs-lookup"><span data-stu-id="0e2e0-129">Alternatively, run the application and browse to the `HelloWorld` controller (`http://localhost:xxxx/HelloWorld`).</span></span> <span data-ttu-id="0e2e0-130">La méthode `Index` de votre contrôleur n’a pas fait de nombreuses tâches. elle a simplement exécuté l’instruction `return View()`, qui spécifie que la méthode doit utiliser un fichier de modèle de vue pour afficher une réponse dans le navigateur.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-130">The `Index` method in your controller didn't do much work; it simply ran the statement `return View()`, which specified that the method should use a view template file to render a response to the browser.</span></span> <span data-ttu-id="0e2e0-131">Étant donné que vous n’avez pas spécifié explicitement le nom du fichier de modèle de vue à utiliser, ASP.NET MVC utilise par défaut le fichier de vue *index. cshtml* dans le dossier *\Views\HelloWorld*</span><span class="sxs-lookup"><span data-stu-id="0e2e0-131">Because you didn't explicitly specify the name of the view template file to use, ASP.NET MVC defaulted to using the *Index.cshtml* view file in the *\Views\HelloWorld* folder.</span></span> <span data-ttu-id="0e2e0-132">L’image ci-dessous montre la chaîne &quot;Hello de notre modèle de vue.&quot; codé en dur dans la vue.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-132">The image below shows the string &quot;Hello from our View Template!&quot; hard-coded in the view.</span></span>

![](adding-a-view/_static/image6.png)

<span data-ttu-id="0e2e0-133">Semble assez bon.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-133">Looks pretty good.</span></span> <span data-ttu-id="0e2e0-134">Toutefois, Notez que la barre de titre du navigateur affiche &quot;index My ASP.NET A&quot; et que le lien Big situé en haut de la page indique &quot;votre logo ici.&quot; sous le &quot;votre logo ici.&quot; lien sont des liens d’inscription et de connexion, et ci-dessous, des liens vers les pages de démarrage, à propos de et contact.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-134">However, notice that the browser's title bar shows &quot;Index My ASP.NET A&quot; and the big link on the top of the page says &quot;your logo here.&quot; Below the &quot;your logo here.&quot; link are registration and log in links, and below that links to Home, About and Contact pages.</span></span> <span data-ttu-id="0e2e0-135">Modifions quelques-unes de ces modifications.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-135">Let's change some of these.</span></span>

## <a name="changing-views-and-layout-pages"></a><span data-ttu-id="0e2e0-136">Modification des vues et des pages de disposition</span><span class="sxs-lookup"><span data-stu-id="0e2e0-136">Changing Views and Layout Pages</span></span>

<span data-ttu-id="0e2e0-137">Tout d’abord, vous souhaitez modifier la &quot;votre logo ici.&quot; titre en haut de la page.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-137">First, you want to change the &quot;your logo here.&quot; title at the top of the page.</span></span> <span data-ttu-id="0e2e0-138">Ce texte est commun à chaque page.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-138">That text is common to every page.</span></span> <span data-ttu-id="0e2e0-139">Elle est implémentée dans un seul emplacement du projet, même si elle apparaît sur chaque page de l’application.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-139">It's actually implemented in only one place in the project, even though it appears on every page in the application.</span></span> <span data-ttu-id="0e2e0-140">Accédez au dossier */Views/Shared* dans **Explorateur de solutions** et ouvrez le fichier *Layout. cshtml\_* .</span><span class="sxs-lookup"><span data-stu-id="0e2e0-140">Go to the */Views/Shared* folder in **Solution Explorer** and open the *\_Layout.cshtml* file.</span></span> <span data-ttu-id="0e2e0-141">Ce fichier s’appelle une *page de disposition* et il s’agit de l’interpréteur de commandes &quot;partagé&quot; que toutes les autres pages utilisent.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-141">This file is called a *layout page* and it's the shared &quot;shell&quot; that all other pages use.</span></span>

![_LayoutCshtml](adding-a-view/_static/image7.png)

<span data-ttu-id="0e2e0-143">Les modèles de disposition vous permettent de spécifier la disposition de conteneur HTML de votre site à un emplacement, puis de l’appliquer sur plusieurs pages de votre site.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-143">Layout templates allow you to specify the HTML container layout of your site in one place and then apply it across multiple pages in your site.</span></span> <span data-ttu-id="0e2e0-144">Recherchez la ligne `@RenderBody()`.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-144">Find the `@RenderBody()` line.</span></span> <span data-ttu-id="0e2e0-145">`RenderBody` est un espace réservé dans lequel toutes les pages spécifiques aux vues que vous créez s’affichent, &quot;encapsulées&quot; dans la page de disposition.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-145">`RenderBody` is a placeholder where all the view-specific pages you create show up, &quot;wrapped&quot; in the layout page.</span></span> <span data-ttu-id="0e2e0-146">Par exemple, si vous sélectionnez le lien à propos, la vue *Views\Home\About.cshtml* est rendue à l’intérieur de la méthode `RenderBody`.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-146">For example, if you select the About link, the *Views\Home\About.cshtml* view is rendered inside the `RenderBody` method.</span></span>

<span data-ttu-id="0e2e0-147">Modifiez l’en-tête du titre du site dans le modèle de disposition à partir de &quot;votre logo ici&quot; à &quot;&quot;de film MVC.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-147">Change the site-title heading in the layout template from &quot;your logo here&quot; to &quot;MVC Movie&quot;.</span></span>

[!code-cshtml[Main](adding-a-view/samples/sample4.cshtml)]

<span data-ttu-id="0e2e0-148">Remplacez le contenu de l’élément title par le balisage suivant :</span><span class="sxs-lookup"><span data-stu-id="0e2e0-148">Replace the contents of the title element with the following markup:</span></span>

[!code-cshtml[Main](adding-a-view/samples/sample5.cshtml)]

<span data-ttu-id="0e2e0-149">Exécutez l’application et Notez qu’elle indique à présent &quot;&quot;de vidéo MVC.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-149">Run the application and notice that it now says &quot;MVC Movie &quot;.</span></span> <span data-ttu-id="0e2e0-150">Cliquez sur le lien **à propos** de pour voir comment cette page affiche également &quot;&quot;de vidéo Mvc.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-150">Click the **About** link, and you see how that page shows &quot;MVC Movie&quot;, too.</span></span> <span data-ttu-id="0e2e0-151">Nous avons été en mesure d’apporter la modification une fois dans le modèle de disposition et de faire en sorte que toutes les pages du site reflètent le nouveau titre.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-151">We were able to make the change once in the layout template and have all pages on the site reflect the new title.</span></span>

![](adding-a-view/_static/image8.png)

<span data-ttu-id="0e2e0-152">À présent, nous allons modifier le titre de la vue index.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-152">Now, let's change the title of the Index view.</span></span>

<span data-ttu-id="0e2e0-153">Ouvrez *MvcMovie\Views\HelloWorld\Index.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-153">Open *MvcMovie\Views\HelloWorld\Index.cshtml*.</span></span> <span data-ttu-id="0e2e0-154">Il existe deux emplacements pour apporter une modification : tout d’abord, le texte qui apparaît dans le titre du navigateur, puis dans l’en-tête secondaire (l’élément `<h2>`).</span><span class="sxs-lookup"><span data-stu-id="0e2e0-154">There are two places to make a change: first, the text that appears in the title of the browser, and then in the secondary header (the `<h2>` element).</span></span> <span data-ttu-id="0e2e0-155">Vous allez les modifier légèrement pour voir quel morceau du code modifie quelle partie de l’application.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-155">You'll make them slightly different so you can see which bit of code changes which part of the app.</span></span>

[!code-cshtml[Main](adding-a-view/samples/sample6.cshtml)]

<span data-ttu-id="0e2e0-156">Pour indiquer le titre HTML à afficher, le code ci-dessus définit une propriété `Title` de l’objet `ViewBag` (qui se trouve dans le modèle de vue *index. cshtml* ).</span><span class="sxs-lookup"><span data-stu-id="0e2e0-156">To indicate the HTML title to display, the code above sets a `Title` property of the `ViewBag` object (which is in the *Index.cshtml* view template).</span></span> <span data-ttu-id="0e2e0-157">Si vous revenez au code source du modèle de disposition, vous remarquerez que le modèle utilise cette valeur dans l’élément `<title>` dans le cadre de la `<head>` section du code HTML que nous avons modifié précédemment.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-157">If you look back at the source code of the layout template, you'll notice that the template uses this value in the `<title>` element as part of the `<head>` section of the HTML that we modified previously.</span></span> <span data-ttu-id="0e2e0-158">À l’aide de cette `ViewBag` approche, vous pouvez facilement passer d’autres paramètres entre votre modèle de vue et votre fichier de disposition.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-158">Using this `ViewBag` approach, you can easily pass other parameters between your view template and your layout file.</span></span>

<span data-ttu-id="0e2e0-159">Exécutez l’application et accédez à `http://localhost:xx/HelloWorld`.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-159">Run the application and browse to `http://localhost:xx/HelloWorld`.</span></span> <span data-ttu-id="0e2e0-160">Notez que le titre du navigateur, l’en-tête principal et les en-têtes secondaires ont changé.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-160">Notice that the browser title, the primary heading, and the secondary headings have changed.</span></span> <span data-ttu-id="0e2e0-161">(Si vous ne voyez pas les changements dans le navigateur, vous voyez peut-être le contenu mis en cache.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-161">(If you don't see changes in the browser, you might be viewing cached content.</span></span> <span data-ttu-id="0e2e0-162">Appuyez sur CTRL + F5 dans votre navigateur pour forcer le chargement de la réponse du serveur.) Le titre du navigateur est créé avec le `ViewBag.Title` que nous avons défini dans le modèle de vue *index. cshtml* et l’application &quot;-Movie supplémentaire&quot; ajoutée dans le fichier de disposition.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-162">Press Ctrl+F5 in your browser to force the response from the server to be loaded.) The browser title is created with the `ViewBag.Title` we set in the *Index.cshtml* view template and the additional &quot;- Movie App&quot; added in the layout file.</span></span>

<span data-ttu-id="0e2e0-163">Notez également que le contenu du modèle de vue *index. cshtml* a été fusionné avec le modèle de vue *\_Layout. cshtml* et qu’une réponse html unique a été envoyée au navigateur.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-163">Also notice how the content in the *Index.cshtml* view template was merged with the *\_Layout.cshtml* view template and a single HTML response was sent to the browser.</span></span> <span data-ttu-id="0e2e0-164">Les modèles de disposition permettent d’apporter facilement des modifications qui s’appliquent à toutes les pages de votre application.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-164">Layout templates make it really easy to make changes that apply across all of the pages in your application.</span></span>

![](adding-a-view/_static/image9.png)

<span data-ttu-id="0e2e0-165">Notre peu de &quot;&quot; de données (dans ce cas, le &quot;Hello de notre modèle de vue !&quot; message) est toutefois codé en dur.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-165">Our little bit of &quot;data&quot; (in this case the &quot;Hello from our View Template!&quot; message) is hard-coded, though.</span></span> <span data-ttu-id="0e2e0-166">L’application MVC a une&quot; &quot;V (vue) et vous disposez d’un &quot;C&quot; (contrôleur), mais pas encore &quot;M&quot; (modèle).</span><span class="sxs-lookup"><span data-stu-id="0e2e0-166">The MVC application has a &quot;V&quot; (view) and you've got a &quot;C&quot; (controller), but no &quot;M&quot; (model) yet.</span></span> <span data-ttu-id="0e2e0-167">Nous allons bientôt vous montrer comment créer une base de données et récupérer des données de modèle.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-167">Shortly, we'll walk through how create a database and retrieve model data from it.</span></span>

## <a name="passing-data-from-the-controller-to-the-view"></a><span data-ttu-id="0e2e0-168">Passage de données du contrôleur vers la vue</span><span class="sxs-lookup"><span data-stu-id="0e2e0-168">Passing Data from the Controller to the View</span></span>

<span data-ttu-id="0e2e0-169">Avant de passer à une base de données et de parler des modèles, nous allons tout d’abord parler de la transmission des informations du contrôleur à une vue.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-169">Before we go to a database and talk about models, though, let's first talk about passing information from the controller to a view.</span></span> <span data-ttu-id="0e2e0-170">Les classes de contrôleur sont appelées en réponse à une demande d’URL entrante.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-170">Controller classes are invoked in response to an incoming URL request.</span></span> <span data-ttu-id="0e2e0-171">Une classe de contrôleur est l’endroit où vous écrivez le code qui gère les demandes de navigateur entrantes, récupère les données d’une base de données et décide finalement le type de réponse à renvoyer au navigateur.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-171">A controller class is where you write the code that handles the incoming browser requests, retrieves data from a database, and ultimately decides what type of response to send back to the browser.</span></span> <span data-ttu-id="0e2e0-172">Les modèles de vue peuvent ensuite être utilisés à partir d’un contrôleur pour générer et mettre en forme une réponse HTML au navigateur.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-172">View templates can then be used from a controller to generate and format an HTML response to the browser.</span></span>

<span data-ttu-id="0e2e0-173">Les contrôleurs sont chargés de fournir les données ou objets requis pour qu’un modèle de vue affiche une réponse au navigateur.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-173">Controllers are responsible for providing whatever data or objects are required in order for a view template to render a response to the browser.</span></span> <span data-ttu-id="0e2e0-174">Bonne pratique : **un modèle de vue ne doit jamais exécuter de logique métier ni interagir directement avec une base de données**.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-174">A best practice: **A view template should never perform business logic or interact with a database directly**.</span></span> <span data-ttu-id="0e2e0-175">Au lieu de cela, un modèle de vue doit fonctionner uniquement avec les données qui lui sont fournies par le contrôleur.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-175">Instead, a view template should work only with the data that's provided to it by the controller.</span></span> <span data-ttu-id="0e2e0-176">En conservant cette &quot;séparation des préoccupations&quot; vous aide à maintenir votre code sain, testable et plus facile à gérer.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-176">Maintaining this &quot;separation of concerns&quot; helps keep your code clean, testable and more maintainable.</span></span>

<span data-ttu-id="0e2e0-177">Actuellement, la `Welcome` méthode d’action de la classe `HelloWorldController` prend un `name` et un paramètre `numTimes`, puis génère les valeurs directement dans le navigateur.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-177">Currently, the `Welcome` action method in the `HelloWorldController` class takes a `name` and a `numTimes` parameter and then outputs the values directly to the browser.</span></span> <span data-ttu-id="0e2e0-178">Plutôt que de faire en sorte que le contrôleur rende cette réponse sous forme de chaîne, nous allons modifier le contrôleur pour qu’il utilise un modèle de vue à la place.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-178">Rather than have the controller render this response as a string, let's change the controller to use a view template instead.</span></span> <span data-ttu-id="0e2e0-179">Le modèle de vue génère une réponse dynamique, ce qui signifie que vous devez passer les bits de données appropriés du contrôleur à la vue pour générer la réponse.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-179">The view template will generate a dynamic response, which means that you need to pass appropriate bits of data from the controller to the view in order to generate the response.</span></span> <span data-ttu-id="0e2e0-180">Pour ce faire, vous devez faire en sorte que le contrôleur place les données dynamiques (paramètres) dont le modèle de vue a besoin dans un objet `ViewBag` auquel le modèle de vue peut accéder.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-180">You can do this by having the controller put the dynamic data (parameters) that the view template needs in a `ViewBag` object that the view template can then access.</span></span>

<span data-ttu-id="0e2e0-181">Revenez au fichier *HelloWorldController.cs* et modifiez la méthode `Welcome` pour ajouter une valeur de `Message` et de `NumTimes` à l’objet `ViewBag`.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-181">Return to the *HelloWorldController.cs* file and change the `Welcome` method to add a `Message` and `NumTimes` value to the `ViewBag` object.</span></span> <span data-ttu-id="0e2e0-182">`ViewBag` est un objet dynamique, ce qui signifie que vous pouvez y placer tout ce que vous souhaitez. l’objet `ViewBag` n’a aucune propriété définie tant que vous ne placez pas de contenu dans celui-ci.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-182">`ViewBag` is a dynamic object, which means you can put whatever you want in to it; the `ViewBag` object has no defined properties until you put something inside it.</span></span> <span data-ttu-id="0e2e0-183">Le [système de liaison de modèle MVC ASP.net](http://odetocode.com/Blogs/scott/archive/2009/04/27/6-tips-for-asp-net-mvc-model-binding.aspx) mappe automatiquement les paramètres nommés (`name` et `numTimes`) de la chaîne de requête dans la barre d’adresse aux paramètres de votre méthode.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-183">The [ASP.NET MVC model binding system](http://odetocode.com/Blogs/scott/archive/2009/04/27/6-tips-for-asp-net-mvc-model-binding.aspx) automatically maps the named parameters (`name` and `numTimes`) from the query string in the address bar to parameters in your method.</span></span> <span data-ttu-id="0e2e0-184">Le fichier *HelloWorldController.cs* complet ressemble à ceci :</span><span class="sxs-lookup"><span data-stu-id="0e2e0-184">The complete *HelloWorldController.cs* file looks like this:</span></span>

[!code-csharp[Main](adding-a-view/samples/sample7.cs)]

<span data-ttu-id="0e2e0-185">À présent, l’objet `ViewBag` contient des données qui seront transmises automatiquement à la vue.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-185">Now the `ViewBag` object contains data that will be passed to the view automatically.</span></span>

<span data-ttu-id="0e2e0-186">Ensuite, vous avez besoin d’un modèle de vue de bienvenue !</span><span class="sxs-lookup"><span data-stu-id="0e2e0-186">Next, you need a Welcome view template!</span></span> <span data-ttu-id="0e2e0-187">Dans le menu **générer** , sélectionnez **générer MvcMovie** pour vérifier que le projet est compilé.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-187">In the **Build** menu, select **Build MvcMovie** to make sure the project is compiled.</span></span>

<span data-ttu-id="0e2e0-188">Cliquez ensuite avec le bouton droit à l’intérieur de la méthode `Welcome`, puis cliquez sur **Ajouter une vue**.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-188">Then right-click inside the `Welcome` method and click **Add View**.</span></span>

![](adding-a-view/_static/image10.png)

<span data-ttu-id="0e2e0-189">Voici à quoi ressemble la boîte de dialogue **Ajouter une vue** :</span><span class="sxs-lookup"><span data-stu-id="0e2e0-189">Here's what the **Add View** dialog box looks like:</span></span>

![](adding-a-view/_static/image11.png)

<span data-ttu-id="0e2e0-190">Cliquez sur **Ajouter**, puis ajoutez le code suivant sous l’élément `<h2>` dans le nouveau fichier *Welcome. cshtml* .</span><span class="sxs-lookup"><span data-stu-id="0e2e0-190">Click **Add**, and then add the following code under the `<h2>` element in the new *Welcome.cshtml* file.</span></span> <span data-ttu-id="0e2e0-191">Vous allez créer une boucle qui indique &quot;Hello&quot; autant de fois que l’utilisateur l’indique.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-191">You'll create a loop that says &quot;Hello&quot; as many times as the user says it should.</span></span> <span data-ttu-id="0e2e0-192">Le fichier *Welcome welcome. cshtml* est présenté ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-192">The complete *Welcome.cshtml* file is shown below.</span></span>

[!code-cshtml[Main](adding-a-view/samples/sample8.cshtml)]

<span data-ttu-id="0e2e0-193">Exécutez l’application et accédez à l’URL suivante :</span><span class="sxs-lookup"><span data-stu-id="0e2e0-193">Run the application and browse to the following URL:</span></span>

`http://localhost:xx/HelloWorld/Welcome?name=Scott&numtimes=4`

<span data-ttu-id="0e2e0-194">À présent, les données sont extraites de l’URL et transmises au contrôleur à l’aide du [classeur de modèles](http://odetocode.com/Blogs/scott/archive/2009/04/27/6-tips-for-asp-net-mvc-model-binding.aspx).</span><span class="sxs-lookup"><span data-stu-id="0e2e0-194">Now data is taken from the URL and passed to the controller using the [model binder](http://odetocode.com/Blogs/scott/archive/2009/04/27/6-tips-for-asp-net-mvc-model-binding.aspx).</span></span> <span data-ttu-id="0e2e0-195">Le contrôleur empaquette les données dans un objet `ViewBag` et transmet cet objet à la vue.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-195">The controller packages the data into a `ViewBag` object and passes that object to the view.</span></span> <span data-ttu-id="0e2e0-196">La vue affiche ensuite les données au format HTML pour l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-196">The view then displays the data as HTML to the user.</span></span>

![](adding-a-view/_static/image12.png)

<span data-ttu-id="0e2e0-197">Dans l’exemple ci-dessus, nous avons utilisé un objet `ViewBag` pour passer des données du contrôleur à une vue.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-197">In the sample above, we used a `ViewBag` object to pass data from the controller to a view.</span></span> <span data-ttu-id="0e2e0-198">Dans ce dernier didacticiel, nous utiliserons un modèle de vue pour passer des données d’un contrôleur à une vue.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-198">Latter in the tutorial, we will use a view model to pass data from a controller to a view.</span></span> <span data-ttu-id="0e2e0-199">L’approche du modèle de vue pour passer des données est généralement bien préférée à l’approche de la vue de conteneur.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-199">The view model approach to passing data is generally much preferred over the view bag approach.</span></span> <span data-ttu-id="0e2e0-200">Pour plus d’informations, consultez l’entrée de blog des [vues fortement typées V dynamiques](https://blogs.msdn.com/b/rickandy/archive/2011/01/28/dynamic-v-strongly-typed-views.aspx) .</span><span class="sxs-lookup"><span data-stu-id="0e2e0-200">See the blog entry [Dynamic V Strongly Typed Views](https://blogs.msdn.com/b/rickandy/archive/2011/01/28/dynamic-v-strongly-typed-views.aspx) for more information.</span></span>

<span data-ttu-id="0e2e0-201">Eh bien, il s’agit d’un type de &quot;M&quot; pour le modèle, mais pas le type de base de données.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-201">Well, that was a kind of an &quot;M&quot; for model, but not the database kind.</span></span> <span data-ttu-id="0e2e0-202">Créons une base de données de films en utilisant ce que nous avons appris.</span><span class="sxs-lookup"><span data-stu-id="0e2e0-202">Let's take what we've learned and create a database of movies.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="0e2e0-203">[Précédent](adding-a-controller.md)
> [Suivant](adding-a-model.md)</span><span class="sxs-lookup"><span data-stu-id="0e2e0-203">[Previous](adding-a-controller.md)
[Next](adding-a-model.md)</span></span>

---
title: Ajout d’une vue à une application MVC
author: Rick-Anderson
description: Ajout d’une vue à une application MVC
ms.author: riande
ms.date: 01/23/2019
uid: mvc/overview/getting-started/introduction/adding-a-view
ms.openlocfilehash: b8400036cc689d3cd2fec54b3191252d296ade41
ms.sourcegitcommit: 4e6d586faadbe4d9ef27122f86335ec9385134af
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/28/2020
ms.locfileid: "89045011"
---
# <a name="adding-a-view"></a><span data-ttu-id="dcce7-103">Ajout d’une vue</span><span class="sxs-lookup"><span data-stu-id="dcce7-103">Adding a View</span></span>

<span data-ttu-id="dcce7-104">par [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="dcce7-104">by [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

[!INCLUDE [consider RP](~/includes/razor.md)]

<span data-ttu-id="dcce7-105">Dans cette section, vous allez modifier la `HelloWorldController` classe pour utiliser les fichiers de modèle de vue afin d’encapsuler correctement le processus de génération de réponses html sur un client.</span><span class="sxs-lookup"><span data-stu-id="dcce7-105">In this section you're going to modify the `HelloWorldController` class to use view template files to cleanly encapsulate the process of generating HTML responses to a client.</span></span> 

<span data-ttu-id="dcce7-106">Vous allez créer un fichier de modèle de vue à l’aide du [moteur de vue Razor](../../../../web-pages/overview/getting-started/introducing-razor-syntax-c.md).</span><span class="sxs-lookup"><span data-stu-id="dcce7-106">You'll create a view template file using the [Razor view engine](../../../../web-pages/overview/getting-started/introducing-razor-syntax-c.md).</span></span> <span data-ttu-id="dcce7-107">Les modèles de vue Razor ont une extension de fichier *. cshtml* et offrent un moyen élégant de créer une sortie HTML à l’aide de C#.</span><span class="sxs-lookup"><span data-stu-id="dcce7-107">Razor-based view templates have a *.cshtml* file extension, and provide an elegant way to create HTML output using C#.</span></span> <span data-ttu-id="dcce7-108">Razor réduit le nombre de caractères et de frappes de touches requis lors de l’écriture d’un modèle de vue, et permet un flux de travail de codage fluide rapide.</span><span class="sxs-lookup"><span data-stu-id="dcce7-108">Razor minimizes the number of characters and keystrokes required when writing a view template, and enables a fast, fluid coding workflow.</span></span>

<span data-ttu-id="dcce7-109">Actuellement, la méthode `Index` retourne une chaîne avec un message qui est codé en dur dans la classe du contrôleur.</span><span class="sxs-lookup"><span data-stu-id="dcce7-109">Currently the `Index` method returns a string with a message that is hard-coded in the controller class.</span></span> <span data-ttu-id="dcce7-110">Modifiez la `Index` méthode pour appeler la méthode de [vue](/dotnet/api/microsoft.aspnetcore.mvc.controller.view#Microsoft_AspNetCore_Mvc_Controller_View) contrôleurs, comme illustré dans le code suivant :</span><span class="sxs-lookup"><span data-stu-id="dcce7-110">Change the `Index` method to call the controllers [View](/dotnet/api/microsoft.aspnetcore.mvc.controller.view#Microsoft_AspNetCore_Mvc_Controller_View) method, as shown in the following code:</span></span>

[!code-csharp[Main](adding-a-view/samples/sample1.cs?highlight=1,3)]

<span data-ttu-id="dcce7-111">La `Index` méthode ci-dessus utilise un modèle de vue pour générer une réponse HTML au navigateur.</span><span class="sxs-lookup"><span data-stu-id="dcce7-111">The `Index` method above uses a view template to generate an HTML response to the browser.</span></span> <span data-ttu-id="dcce7-112">Les méthodes de contrôleur (également appelées [méthodes d’action](http://rachelappel.com/asp.net-mvc-actionresults-explained)), telles que la `Index` méthode ci-dessus, retournent généralement un [ActionResult](https://msdn.microsoft.com/library/system.web.mvc.actionresult.aspx) (ou une classe dérivée de [ActionResult](https://msdn.microsoft.com/library/system.web.mvc.actionresult.aspx)), et non des types primitifs tels que String.</span><span class="sxs-lookup"><span data-stu-id="dcce7-112">Controller methods (also known as [action methods](http://rachelappel.com/asp.net-mvc-actionresults-explained)), such as the `Index` method above, generally return an [ActionResult](https://msdn.microsoft.com/library/system.web.mvc.actionresult.aspx) (or a class derived from [ActionResult](https://msdn.microsoft.com/library/system.web.mvc.actionresult.aspx)), not primitive types like string.</span></span>

<span data-ttu-id="dcce7-113">Cliquez avec le bouton droit sur le dossier *Views\HelloWorld* , cliquez sur **Ajouter**, puis sur **page de vue MVC 5 avec disposition (Razor)**.</span><span class="sxs-lookup"><span data-stu-id="dcce7-113">Right click the *Views\HelloWorld* folder and click **Add**, then click **MVC 5 View Page with Layout (Razor)**.</span></span>
  
![](adding-a-view/_static/image1.png)   
  
<span data-ttu-id="dcce7-114">Dans la boîte de dialogue **spécifier un nom pour l’élément** , entrez *index*, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="dcce7-114">In the **Specify Name for Item** dialog box, enter *Index*, and then click **OK**.</span></span>  
  
![](adding-a-view/_static/image2.png)  
  
<span data-ttu-id="dcce7-115">Dans la boîte de dialogue **Sélectionner une page de disposition** , acceptez le format par défaut \*\* \_ . cshtml\*\* , puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="dcce7-115">In the **Select a Layout Page** dialog, accept the default **\_Layout.cshtml** and click **OK**.</span></span>  
  
![](adding-a-view/_static/image3.png)  
  
<span data-ttu-id="dcce7-116">Dans la boîte de dialogue ci-dessus, le dossier *Views\Shared* est sélectionné dans le volet gauche.</span><span class="sxs-lookup"><span data-stu-id="dcce7-116">In the dialog above, the *Views\Shared* folder is selected in the left pane.</span></span> <span data-ttu-id="dcce7-117">Si vous avez un fichier de disposition personnalisé dans un autre dossier, vous pouvez le sélectionner.</span><span class="sxs-lookup"><span data-stu-id="dcce7-117">If you had a custom layout file in another folder, you could select it.</span></span> <span data-ttu-id="dcce7-118">Nous parlerons du fichier de disposition plus loin dans ce didacticiel.</span><span class="sxs-lookup"><span data-stu-id="dcce7-118">We'll talk about the layout file later in the tutorial</span></span>

<span data-ttu-id="dcce7-119">Le fichier *MvcMovie\Views\HelloWorld\Index.cshtml* est créé.</span><span class="sxs-lookup"><span data-stu-id="dcce7-119">The *MvcMovie\Views\HelloWorld\Index.cshtml* file is created.</span></span>

![](adding-a-view/_static/image4.png)

<span data-ttu-id="dcce7-120">Ajoutez le balisage en surbrillance suivant.</span><span class="sxs-lookup"><span data-stu-id="dcce7-120">Add the following highlighted markup.</span></span>

[!code-cshtml[Main](adding-a-view/samples/sample2.cshtml?highlight=4-11)]

<span data-ttu-id="dcce7-121">Cliquez avec le bouton droit sur le fichier *index. cshtml* , puis sélectionnez **afficher dans le navigateur**.</span><span class="sxs-lookup"><span data-stu-id="dcce7-121">Right click the *Index.cshtml* file and select **View in Browser**.</span></span>

![PI](adding-a-view/_static/image5.png)

<span data-ttu-id="dcce7-123">Vous pouvez également cliquer avec le bouton droit sur le fichier *index. cshtml* et sélectionner **afficher dans inspecteur de page.**</span><span class="sxs-lookup"><span data-stu-id="dcce7-123">You can also right click the *Index.cshtml* file and select **View in Page Inspector.**</span></span> <span data-ttu-id="dcce7-124">Pour plus d’informations, consultez le [didacticiel inspecteur de page](../../views/using-page-inspector-in-aspnet-mvc.md) .</span><span class="sxs-lookup"><span data-stu-id="dcce7-124">See the [Page Inspector tutorial](../../views/using-page-inspector-in-aspnet-mvc.md) for more information.</span></span>

<span data-ttu-id="dcce7-125">Vous pouvez également exécuter l’application et accéder au `HelloWorld` contrôleur ( `http://localhost:xxxx/HelloWorld` ).</span><span class="sxs-lookup"><span data-stu-id="dcce7-125">Alternatively, run the application and browse to the `HelloWorld` controller (`http://localhost:xxxx/HelloWorld`).</span></span> <span data-ttu-id="dcce7-126">La `Index` méthode dans votre contrôleur n’a pas fait de nombreuses tâches. elle a simplement exécuté l’instruction `return View()` , qui spécifie que la méthode doit utiliser un fichier de modèle de vue pour afficher une réponse dans le navigateur.</span><span class="sxs-lookup"><span data-stu-id="dcce7-126">The `Index` method in your controller didn't do much work; it simply ran the statement `return View()`, which specified that the method should use a view template file to render a response to the browser.</span></span> <span data-ttu-id="dcce7-127">Étant donné que vous n’avez pas spécifié explicitement le nom du fichier de modèle de vue à utiliser, ASP.NET MVC utilise par défaut le fichier de vue *index. cshtml* dans le dossier *\Views\HelloWorld*</span><span class="sxs-lookup"><span data-stu-id="dcce7-127">Because you didn't explicitly specify the name of the view template file to use, ASP.NET MVC defaulted to using the *Index.cshtml* view file in the *\Views\HelloWorld* folder.</span></span> <span data-ttu-id="dcce7-128">L’image ci-dessous montre la chaîne &quot; Hello de notre modèle de vue ! &quot; codé en dur dans la vue.</span><span class="sxs-lookup"><span data-stu-id="dcce7-128">The image below shows the string &quot;Hello from our View Template!&quot; hard-coded in the view.</span></span>

![](adding-a-view/_static/image6.png)

<span data-ttu-id="dcce7-129">Semble assez bon.</span><span class="sxs-lookup"><span data-stu-id="dcce7-129">Looks pretty good.</span></span> <span data-ttu-id="dcce7-130">Toutefois, Notez que la barre de titre du navigateur affiche « index-My ASP.NET application » et que le lien Big situé en haut de la page indique « nom de l’application ».</span><span class="sxs-lookup"><span data-stu-id="dcce7-130">However, notice that the browser's title bar shows "Index - My ASP.NET Application," and the big link at the top of the page says "Application name."</span></span> <span data-ttu-id="dcce7-131">Selon la taille de votre fenêtre de navigateur, vous devrez peut-être cliquer sur les trois barres situées en haut à droite pour afficher les liens vers la **page d’hébergement**, à **propos**de, **contacter**, **inscrire** et **ouvrir une session** .</span><span class="sxs-lookup"><span data-stu-id="dcce7-131">Depending on how small you make your browser window, you might need to click the three bars in the upper right to see the to the **Home**, **About**, **Contact**, **Register** and **Log in** links.</span></span>

## <a name="changing-views-and-layout-pages"></a><span data-ttu-id="dcce7-132">Modification des vues et des pages de disposition</span><span class="sxs-lookup"><span data-stu-id="dcce7-132">Changing Views and Layout Pages</span></span>

<span data-ttu-id="dcce7-133">Tout d’abord, vous souhaitez modifier le &quot; lien du nom de l’application &quot; en haut de la page.</span><span class="sxs-lookup"><span data-stu-id="dcce7-133">First, you want to change the &quot;Application name&quot; link at the top of the page.</span></span> <span data-ttu-id="dcce7-134">Ce texte est commun à chaque page.</span><span class="sxs-lookup"><span data-stu-id="dcce7-134">That text is common to every page.</span></span> <span data-ttu-id="dcce7-135">Elle est implémentée dans un seul emplacement du projet, même si elle apparaît sur chaque page de l’application.</span><span class="sxs-lookup"><span data-stu-id="dcce7-135">It's actually implemented in only one place in the project, even though it appears on every page in the application.</span></span> <span data-ttu-id="dcce7-136">Accédez au dossier */Views/Shared* dans **Explorateur de solutions** et ouvrez le fichier \* \_ Layout. cshtml\* .</span><span class="sxs-lookup"><span data-stu-id="dcce7-136">Go to the */Views/Shared* folder in **Solution Explorer** and open the *\_Layout.cshtml* file.</span></span> <span data-ttu-id="dcce7-137">Ce fichier s’appelle une *page de disposition* et se trouve dans le dossier partagé que toutes les autres pages utilisent.</span><span class="sxs-lookup"><span data-stu-id="dcce7-137">This file is called a *layout page* and it's in the shared folder that all other pages use.</span></span>

![_LayoutCshtml](adding-a-view/_static/image7.png)

<span data-ttu-id="dcce7-139">Les modèles de disposition vous permettent de spécifier la disposition du conteneur HTML de votre site dans un emplacement unique, puis de l’appliquer sur plusieurs pages de votre site.</span><span class="sxs-lookup"><span data-stu-id="dcce7-139">Layout templates allow you to specify the HTML container layout of your site in one place and then apply it across multiple pages in your site.</span></span> <span data-ttu-id="dcce7-140">Recherchez la ligne `@RenderBody()`.</span><span class="sxs-lookup"><span data-stu-id="dcce7-140">Find the `@RenderBody()` line.</span></span> <span data-ttu-id="dcce7-141">`RenderBody` est un espace réservé dans lequel toutes les pages spécifiques aux vues que vous créez s’affichent, &quot;encapsulées&quot; dans la page de disposition.</span><span class="sxs-lookup"><span data-stu-id="dcce7-141">`RenderBody` is a placeholder where all the view-specific pages you create show up, &quot;wrapped&quot; in the layout page.</span></span> <span data-ttu-id="dcce7-142">Par exemple, si vous sélectionnez le lien **à propos** , la vue *Views\Home\About.cshtml* est rendue à l’intérieur de la `RenderBody` méthode.</span><span class="sxs-lookup"><span data-stu-id="dcce7-142">For example, if you select the **About** link, the *Views\Home\About.cshtml* view is rendered inside the `RenderBody` method.</span></span>

<span data-ttu-id="dcce7-143">Changez le contenu de l’élément title.</span><span class="sxs-lookup"><span data-stu-id="dcce7-143">Change the contents of the title element.</span></span> <span data-ttu-id="dcce7-144">Remplacez le [ActionLink](https://msdn.microsoft.com/library/dd504972(v=vs.108).aspx) dans le modèle de mise en page du nom de l' &quot; application &quot; à &quot; la vidéo MVC &quot; et le contrôleur de `Home` par `Movies` .</span><span class="sxs-lookup"><span data-stu-id="dcce7-144">Change the [ActionLink](https://msdn.microsoft.com/library/dd504972(v=vs.108).aspx) in the layout template from &quot;Application name&quot; to &quot;MVC Movie&quot; and the controller from `Home` to `Movies`.</span></span> <span data-ttu-id="dcce7-145">Le fichier de disposition complet est illustré ci-dessous :</span><span class="sxs-lookup"><span data-stu-id="dcce7-145">The complete layout file is shown below:</span></span>

[!code-cshtml[Main](adding-a-view/samples/sample3.cshtml?highlight=6,20)]

<span data-ttu-id="dcce7-146">Exécutez l’application et Notez qu’elle indique à présent le &quot; film MVC &quot; .</span><span class="sxs-lookup"><span data-stu-id="dcce7-146">Run the application and notice that it now says &quot;MVC Movie &quot;.</span></span> <span data-ttu-id="dcce7-147">Cliquez sur le lien **à propos** de pour voir comment cette page affiche &quot; également le film MVC &quot; .</span><span class="sxs-lookup"><span data-stu-id="dcce7-147">Click the **About** link, and you see how that page shows &quot;MVC Movie&quot;, too.</span></span> <span data-ttu-id="dcce7-148">Nous avons été en mesure d’apporter la modification une fois dans le modèle de disposition et de faire en sorte que toutes les pages du site reflètent le nouveau titre.</span><span class="sxs-lookup"><span data-stu-id="dcce7-148">We were able to make the change once in the layout template and have all pages on the site reflect the new title.</span></span>

![](adding-a-view/_static/image8.png)

<span data-ttu-id="dcce7-149">Lorsque nous avons créé le fichier *Views\HelloWorld\Index.cshtml* , il contenait le code suivant :</span><span class="sxs-lookup"><span data-stu-id="dcce7-149">When we first created the *Views\HelloWorld\Index.cshtml* file, it contained the following code:</span></span>

[!code-cshtml[Main](adding-a-view/samples/sample4.cshtml)]

<span data-ttu-id="dcce7-150">Le code Razor ci-dessus définit explicitement la page de disposition.</span><span class="sxs-lookup"><span data-stu-id="dcce7-150">The Razor code above is explicitly setting the layout page.</span></span> <span data-ttu-id="dcce7-151">Examinez les *vues \\ _ViewStart fichier. cshtml* , elle contient exactement le même balisage Razor.</span><span class="sxs-lookup"><span data-stu-id="dcce7-151">Examine the *Views\\_ViewStart.cshtml* file, it contains the exact same Razor markup.</span></span> <span data-ttu-id="dcce7-152">Le fichier *[Views \\ _ViewStart. cshtml](https://weblogs.asp.net/scottgu/archive/2010/10/22/asp-net-mvc-3-layouts.aspx)* définit la disposition commune que toutes les vues utiliseront. vous pouvez donc commenter ou supprimer ce code du fichier *Views\HelloWorld\Index.cshtml* .</span><span class="sxs-lookup"><span data-stu-id="dcce7-152">The *[Views\\_ViewStart.cshtml](https://weblogs.asp.net/scottgu/archive/2010/10/22/asp-net-mvc-3-layouts.aspx)* file defines the common layout that all views will use, therefore you can comment out or remove that code from the *Views\HelloWorld\Index.cshtml* file.</span></span>

[!code-cshtml[Main](adding-a-view/samples/sample5.cshtml?highlight=1-3)]

<span data-ttu-id="dcce7-153">Vous pouvez utiliser la propriété `Layout` pour définir un mode de disposition différent ou lui affecter la valeur `null`. Aucun fichier de disposition n’est donc utilisé.</span><span class="sxs-lookup"><span data-stu-id="dcce7-153">You can use the `Layout` property to set a different layout view, or set it to `null` so no layout file will be used.</span></span>

<span data-ttu-id="dcce7-154">À présent, nous allons modifier le titre de la vue index.</span><span class="sxs-lookup"><span data-stu-id="dcce7-154">Now, let's change the title of the Index view.</span></span>

<span data-ttu-id="dcce7-155">Ouvrez *MvcMovie\Views\HelloWorld\Index.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="dcce7-155">Open *MvcMovie\Views\HelloWorld\Index.cshtml*.</span></span> <span data-ttu-id="dcce7-156">Il y a deux emplacements pour apporter une modification : tout d’abord, le texte qui apparaît dans le titre du navigateur, puis dans l’en-tête secondaire (l' `<h2>` élément).</span><span class="sxs-lookup"><span data-stu-id="dcce7-156">There are two places to make a change: first, the text that appears in the title of the browser, and then in the secondary header (the `<h2>` element).</span></span> <span data-ttu-id="dcce7-157">Vous allez les modifier légèrement pour voir quel morceau du code modifie quelle partie de l’application.</span><span class="sxs-lookup"><span data-stu-id="dcce7-157">You'll make them slightly different so you can see which bit of code changes which part of the app.</span></span>

[!code-cshtml[Main](adding-a-view/samples/sample6.cshtml?highlight=2,5)]

<span data-ttu-id="dcce7-158">Pour indiquer le titre HTML à afficher, le code ci-dessus définit une `Title` propriété de l' `ViewBag` objet (qui se trouve dans le modèle de vue *index. cshtml* ).</span><span class="sxs-lookup"><span data-stu-id="dcce7-158">To indicate the HTML title to display, the code above sets a `Title` property of the `ViewBag` object (which is in the *Index.cshtml* view template).</span></span> <span data-ttu-id="dcce7-159">Notez que le modèle de disposition ( *Views\Shared \\ _Layout. cshtml* ) utilise cette valeur dans l’élément dans le `<title>` cadre de la `<head>` section du code HTML que nous avons modifiée précédemment.</span><span class="sxs-lookup"><span data-stu-id="dcce7-159">Notice that the layout template ( *Views\Shared\\_Layout.cshtml* ) uses this value in the `<title>` element as part of the `<head>` section of the HTML that we modified previously.</span></span>

[!code-cshtml[Main](adding-a-view/samples/sample7.cshtml?highlight=6)]

<span data-ttu-id="dcce7-160">À l’aide de cette `ViewBag` approche, vous pouvez facilement passer d’autres paramètres entre votre modèle de vue et votre fichier de disposition.</span><span class="sxs-lookup"><span data-stu-id="dcce7-160">Using this `ViewBag` approach, you can easily pass other parameters between your view template and your layout file.</span></span>

<span data-ttu-id="dcce7-161">Exécutez l'application.</span><span class="sxs-lookup"><span data-stu-id="dcce7-161">Run the application.</span></span> <span data-ttu-id="dcce7-162">Notez que le titre du navigateur, l’en-tête principal et les en-têtes secondaires ont changé.</span><span class="sxs-lookup"><span data-stu-id="dcce7-162">Notice that the browser title, the primary heading, and the secondary headings have changed.</span></span> <span data-ttu-id="dcce7-163">(Si vous ne voyez pas les changements dans le navigateur, vous voyez peut-être le contenu mis en cache.</span><span class="sxs-lookup"><span data-stu-id="dcce7-163">(If you don't see changes in the browser, you might be viewing cached content.</span></span> <span data-ttu-id="dcce7-164">Appuyez sur CTRL + F5 dans votre navigateur pour forcer le chargement de la réponse du serveur.) Le titre du navigateur est créé avec le `ViewBag.Title` défini dans le modèle de vue *index. cshtml* et l' &quot; application de vidéo supplémentaire &quot; ajoutée au fichier de disposition.</span><span class="sxs-lookup"><span data-stu-id="dcce7-164">Press Ctrl+F5 in your browser to force the response from the server to be loaded.) The browser title is created with the `ViewBag.Title` we set in the *Index.cshtml* view template and the additional &quot;- Movie App&quot; added in the layout file.</span></span>

<span data-ttu-id="dcce7-165">Notez également que le contenu du modèle de vue *index. cshtml* a été fusionné avec le modèle de vue \* \_ Layout. cshtml\* et qu’une réponse html unique a été envoyée au navigateur.</span><span class="sxs-lookup"><span data-stu-id="dcce7-165">Also notice how the content in the *Index.cshtml* view template was merged with the *\_Layout.cshtml* view template and a single HTML response was sent to the browser.</span></span> <span data-ttu-id="dcce7-166">Les modèles de disposition permettent d’apporter facilement des modifications qui s’appliquent à toutes les pages de votre application.</span><span class="sxs-lookup"><span data-stu-id="dcce7-166">Layout templates make it really easy to make changes that apply across all of the pages in your application.</span></span>

![](adding-a-view/_static/image9.png)

<span data-ttu-id="dcce7-167">Notre petite quantité de &quot; données &quot; (dans ce cas &quot; , le Bonjour de notre modèle de vue ! &quot; message) est cependant codée en dur.</span><span class="sxs-lookup"><span data-stu-id="dcce7-167">Our little bit of &quot;data&quot; (in this case the &quot;Hello from our View Template!&quot; message) is hard-coded, though.</span></span> <span data-ttu-id="dcce7-168">L’application MVC a une &quot; V &quot; (vue) et vous disposez d’un &quot; C &quot; (contrôleur), mais pas &quot; encore de M &quot; (Model).</span><span class="sxs-lookup"><span data-stu-id="dcce7-168">The MVC application has a &quot;V&quot; (view) and you've got a &quot;C&quot; (controller), but no &quot;M&quot; (model) yet.</span></span> <span data-ttu-id="dcce7-169">Nous allons bientôt vous guider dans la création d’une base de données et l’extraction des données du modèle.</span><span class="sxs-lookup"><span data-stu-id="dcce7-169">Shortly, we'll walk through how to create a database and retrieve model data from it.</span></span>

## <a name="passing-data-from-the-controller-to-the-view"></a><span data-ttu-id="dcce7-170">Passage de données du contrôleur vers la vue</span><span class="sxs-lookup"><span data-stu-id="dcce7-170">Passing Data from the Controller to the View</span></span>

<span data-ttu-id="dcce7-171">Avant de passer à une base de données et de parler des modèles, nous allons tout d’abord parler de la transmission des informations du contrôleur à une vue.</span><span class="sxs-lookup"><span data-stu-id="dcce7-171">Before we go to a database and talk about models, though, let's first talk about passing information from the controller to a view.</span></span> <span data-ttu-id="dcce7-172">Les classes de contrôleur sont appelées en réponse à une demande d’URL entrante.</span><span class="sxs-lookup"><span data-stu-id="dcce7-172">Controller classes are invoked in response to an incoming URL request.</span></span> <span data-ttu-id="dcce7-173">Une classe de contrôleur est l’endroit où vous écrivez le code qui gère les demandes de navigateur entrantes, récupère les données d’une base de données et décide finalement le type de réponse à renvoyer au navigateur.</span><span class="sxs-lookup"><span data-stu-id="dcce7-173">A controller class is where you write the code that handles the incoming browser requests, retrieves data from a database, and ultimately decides what type of response to send back to the browser.</span></span> <span data-ttu-id="dcce7-174">Les modèles de vue peuvent ensuite être utilisés à partir d’un contrôleur pour générer et mettre en forme une réponse HTML au navigateur.</span><span class="sxs-lookup"><span data-stu-id="dcce7-174">View templates can then be used from a controller to generate and format an HTML response to the browser.</span></span>

<span data-ttu-id="dcce7-175">Les contrôleurs sont chargés de fournir les données ou objets requis pour qu’un modèle de vue affiche une réponse au navigateur.</span><span class="sxs-lookup"><span data-stu-id="dcce7-175">Controllers are responsible for providing whatever data or objects are required in order for a view template to render a response to the browser.</span></span> <span data-ttu-id="dcce7-176">Bonne pratique : **un modèle de vue ne doit jamais exécuter de logique métier ni interagir directement avec une base de données**.</span><span class="sxs-lookup"><span data-stu-id="dcce7-176">A best practice: **A view template should never perform business logic or interact with a database directly**.</span></span> <span data-ttu-id="dcce7-177">Au lieu de cela, un modèle de vue doit fonctionner uniquement avec les données qui lui sont fournies par le contrôleur.</span><span class="sxs-lookup"><span data-stu-id="dcce7-177">Instead, a view template should work only with the data that's provided to it by the controller.</span></span> <span data-ttu-id="dcce7-178">Le maintien &quot; de cette séparation des préoccupations &quot; vous permet de nettoyer votre code, de le rendre testable et le plus facile à gérer.</span><span class="sxs-lookup"><span data-stu-id="dcce7-178">Maintaining this &quot;separation of concerns&quot; helps keep your code clean, testable and more maintainable.</span></span>

<span data-ttu-id="dcce7-179">Actuellement, la `Welcome` méthode d’action de la `HelloWorldController` classe prend un `name` et un paramètre, puis `numTimes` génère les valeurs directement dans le navigateur.</span><span class="sxs-lookup"><span data-stu-id="dcce7-179">Currently, the `Welcome` action method in the `HelloWorldController` class takes a `name` and a `numTimes` parameter and then outputs the values directly to the browser.</span></span> <span data-ttu-id="dcce7-180">Plutôt que de faire en sorte que le contrôleur rende cette réponse sous forme de chaîne, nous allons modifier le contrôleur pour qu’il utilise un modèle de vue à la place.</span><span class="sxs-lookup"><span data-stu-id="dcce7-180">Rather than have the controller render this response as a string, let's change the controller to use a view template instead.</span></span> <span data-ttu-id="dcce7-181">Le modèle de vue génère une réponse dynamique, ce qui signifie que vous devez passer les bits de données appropriés du contrôleur à la vue pour générer la réponse.</span><span class="sxs-lookup"><span data-stu-id="dcce7-181">The view template will generate a dynamic response, which means that you need to pass appropriate bits of data from the controller to the view in order to generate the response.</span></span> <span data-ttu-id="dcce7-182">Pour ce faire, vous devez faire en sorte que le contrôleur place les données dynamiques (paramètres) dont le modèle de vue a besoin dans un `ViewBag` objet auquel le modèle de vue peut accéder.</span><span class="sxs-lookup"><span data-stu-id="dcce7-182">You can do this by having the controller put the dynamic data (parameters) that the view template needs in a `ViewBag` object that the view template can then access.</span></span>

<span data-ttu-id="dcce7-183">Revenez au fichier *HelloWorldController.cs* et modifiez la `Welcome` méthode pour ajouter une `Message` `NumTimes` valeur et à l' `ViewBag` objet.</span><span class="sxs-lookup"><span data-stu-id="dcce7-183">Return to the *HelloWorldController.cs* file and change the `Welcome` method to add a `Message` and `NumTimes` value to the `ViewBag` object.</span></span> <span data-ttu-id="dcce7-184">`ViewBag` est un objet dynamique, ce qui signifie que vous pouvez y placer tout ce que vous souhaitez. l' `ViewBag` objet n’a pas de propriétés définies tant que vous ne placez pas de contenu dans celui-ci.</span><span class="sxs-lookup"><span data-stu-id="dcce7-184">`ViewBag` is a dynamic object, which means you can put whatever you want in to it; the `ViewBag` object has no defined properties until you put something inside it.</span></span> <span data-ttu-id="dcce7-185">Le [système de liaison de modèle MVC ASP.net](http://odetocode.com/Blogs/scott/archive/2009/04/27/6-tips-for-asp-net-mvc-model-binding.aspx) mappe automatiquement les paramètres nommés ( `name` et `numTimes` ) de la chaîne de requête dans la barre d’adresse aux paramètres de votre méthode.</span><span class="sxs-lookup"><span data-stu-id="dcce7-185">The [ASP.NET MVC model binding system](http://odetocode.com/Blogs/scott/archive/2009/04/27/6-tips-for-asp-net-mvc-model-binding.aspx) automatically maps the named parameters (`name` and `numTimes`) from the query string in the address bar to parameters in your method.</span></span> <span data-ttu-id="dcce7-186">Le fichier *HelloWorldController.cs* complet ressemble à ceci :</span><span class="sxs-lookup"><span data-stu-id="dcce7-186">The complete *HelloWorldController.cs* file looks like this:</span></span>

[!code-csharp[Main](adding-a-view/samples/sample8.cs)]

<span data-ttu-id="dcce7-187">À présent, l' `ViewBag` objet contient des données qui seront transmises automatiquement à la vue.</span><span class="sxs-lookup"><span data-stu-id="dcce7-187">Now the `ViewBag` object contains data that will be passed to the view automatically.</span></span> <span data-ttu-id="dcce7-188">Ensuite, vous avez besoin d’un modèle de vue de bienvenue !</span><span class="sxs-lookup"><span data-stu-id="dcce7-188">Next, you need a Welcome view template!</span></span> <span data-ttu-id="dcce7-189">Dans le menu **générer** , sélectionnez **générer la solution** (ou appuyez sur Ctrl + Maj + B) pour vous assurer que le projet est compilé.</span><span class="sxs-lookup"><span data-stu-id="dcce7-189">In the **Build** menu, select **Build Solution** (or Ctrl+Shift+B) to make sure the project is compiled.</span></span> <span data-ttu-id="dcce7-190">Cliquez avec le bouton droit sur le dossier *Views\HelloWorld* , cliquez sur **Ajouter**, puis sur **page de vue MVC 5 avec disposition (Razor)**.</span><span class="sxs-lookup"><span data-stu-id="dcce7-190">Right click the *Views\HelloWorld* folder and click **Add**, then click **MVC 5 View Page with Layout (Razor)**.</span></span>
  
![](adding-a-view/_static/image10.png)   
  
<span data-ttu-id="dcce7-191">Dans la boîte de dialogue **spécifier le nom de l’élément** , entrez *Welcome*, puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="dcce7-191">In the **Specify Name for Item** dialog box, enter *Welcome*, and then click **OK**.</span></span>   
  
<span data-ttu-id="dcce7-192">Dans la boîte de dialogue **Sélectionner une page de disposition** , acceptez le format par défaut \*\* \_ . cshtml\*\* , puis cliquez sur **OK**.</span><span class="sxs-lookup"><span data-stu-id="dcce7-192">In the **Select a Layout Page** dialog, accept the default **\_Layout.cshtml** and click **OK**.</span></span>  
  
![](adding-a-view/_static/image11.png)   

<span data-ttu-id="dcce7-193">Le fichier *MvcMovie\Views\HelloWorld\Welcome.cshtml* est créé.</span><span class="sxs-lookup"><span data-stu-id="dcce7-193">The *MvcMovie\Views\HelloWorld\Welcome.cshtml* file is created.</span></span>

<span data-ttu-id="dcce7-194">Remplacez le balisage dans le fichier *Welcome. cshtml* .</span><span class="sxs-lookup"><span data-stu-id="dcce7-194">Replace the markup in the *Welcome.cshtml* file.</span></span> <span data-ttu-id="dcce7-195">Vous allez créer une boucle qui indique &quot; Hello autant de &quot; fois que l’utilisateur l’indique.</span><span class="sxs-lookup"><span data-stu-id="dcce7-195">You'll create a loop that says &quot;Hello&quot; as many times as the user says it should.</span></span> <span data-ttu-id="dcce7-196">Le fichier *Welcome welcome. cshtml* est présenté ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="dcce7-196">The complete *Welcome.cshtml* file is shown below.</span></span>

[!code-cshtml[Main](adding-a-view/samples/sample9.cshtml)]

<span data-ttu-id="dcce7-197">Exécutez l’application et accédez à l’URL suivante :</span><span class="sxs-lookup"><span data-stu-id="dcce7-197">Run the application and browse to the following URL:</span></span>

`http://localhost:xx/HelloWorld/Welcome?name=Scott&numtimes=4`

<span data-ttu-id="dcce7-198">À présent, les données sont extraites de l’URL et transmises au contrôleur à l’aide du [classeur de modèles](http://odetocode.com/Blogs/scott/archive/2009/04/27/6-tips-for-asp-net-mvc-model-binding.aspx).</span><span class="sxs-lookup"><span data-stu-id="dcce7-198">Now data is taken from the URL and passed to the controller using the [model binder](http://odetocode.com/Blogs/scott/archive/2009/04/27/6-tips-for-asp-net-mvc-model-binding.aspx).</span></span> <span data-ttu-id="dcce7-199">Le contrôleur empaquette les données dans un `ViewBag` objet et transmet cet objet à la vue.</span><span class="sxs-lookup"><span data-stu-id="dcce7-199">The controller packages the data into a `ViewBag` object and passes that object to the view.</span></span> <span data-ttu-id="dcce7-200">La vue affiche ensuite les données au format HTML pour l’utilisateur.</span><span class="sxs-lookup"><span data-stu-id="dcce7-200">The view then displays the data as HTML to the user.</span></span>

![](adding-a-view/_static/image12.png)

<span data-ttu-id="dcce7-201">Dans l’exemple ci-dessus, nous avons utilisé un `ViewBag` objet pour passer des données du contrôleur à une vue.</span><span class="sxs-lookup"><span data-stu-id="dcce7-201">In the sample above, we used a `ViewBag` object to pass data from the controller to a view.</span></span> <span data-ttu-id="dcce7-202">Plus loin dans ce didacticiel, nous allons faire de même à l’aide d’un modèle de vue.</span><span class="sxs-lookup"><span data-stu-id="dcce7-202">Later in the tutorial, we will use a view model to pass data from a controller to a view.</span></span> <span data-ttu-id="dcce7-203">L’approche du modèle de vue pour passer des données est généralement bien préférée à l’approche de la vue de conteneur.</span><span class="sxs-lookup"><span data-stu-id="dcce7-203">The view model approach to passing data is generally much preferred over the view bag approach.</span></span> <span data-ttu-id="dcce7-204">Pour plus d’informations, consultez l’entrée de blog des [vues fortement typées V dynamiques](https://blogs.msdn.com/b/rickandy/archive/2011/01/28/dynamic-v-strongly-typed-views.aspx) .</span><span class="sxs-lookup"><span data-stu-id="dcce7-204">See the blog entry [Dynamic V Strongly Typed Views](https://blogs.msdn.com/b/rickandy/archive/2011/01/28/dynamic-v-strongly-typed-views.aspx) for more information.</span></span> 

<span data-ttu-id="dcce7-205">Eh bien, il s’agissait d’un type de &quot; M &quot; pour le modèle, mais pas du type de base de données.</span><span class="sxs-lookup"><span data-stu-id="dcce7-205">Well, that was a kind of an &quot;M&quot; for model, but not the database kind.</span></span> <span data-ttu-id="dcce7-206">Créons une base de données de films en utilisant ce que nous avons appris.</span><span class="sxs-lookup"><span data-stu-id="dcce7-206">Let's take what we've learned and create a database of movies.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="dcce7-207">[Précédent](adding-a-controller.md) 
>  [Suivant](adding-a-model.md)</span><span class="sxs-lookup"><span data-stu-id="dcce7-207">[Previous](adding-a-controller.md)
[Next](adding-a-model.md)</span></span>

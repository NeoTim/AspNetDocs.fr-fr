---
uid: mvc/overview/performance/bundling-and-minification
title: Regroupement et minimisation | Microsoft Docs
author: Rick-Anderson
description: Regroupement et minimisation sont deux techniques vous pouvez utiliser dans ASP.NET 4.5 pour améliorer les temps de chargement de demande. Regroupement et minimisation améliore les temps de chargement en reducin...
ms.author: riande
ms.date: 08/23/2012
ms.assetid: 5894dc13-5d45-4dad-8096-136499120f1d
msc.legacyurl: /mvc/overview/performance/bundling-and-minification
msc.type: authoredcontent
ms.openlocfilehash: 9b627a66007aec09a404147698e2bef06c7e7794
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/01/2019
ms.locfileid: "57053186"
---
<a name="bundling-and-minification"></a><span data-ttu-id="33fab-104">Bundles et minimisation</span><span class="sxs-lookup"><span data-stu-id="33fab-104">Bundling and Minification</span></span>
====================
<span data-ttu-id="33fab-105">par [Rick Anderson]((https://twitter.com/RickAndMSFT))</span><span class="sxs-lookup"><span data-stu-id="33fab-105">by [Rick Anderson]((https://twitter.com/RickAndMSFT))</span></span>

> <span data-ttu-id="33fab-106">Regroupement et minimisation sont deux techniques vous pouvez utiliser dans ASP.NET 4.5 pour améliorer les temps de chargement de demande.</span><span class="sxs-lookup"><span data-stu-id="33fab-106">Bundling and minification are two techniques you can use in ASP.NET 4.5 to improve request load time.</span></span> <span data-ttu-id="33fab-107">Regroupement et minimisation améliore les temps de chargement en réduisant le nombre de demandes au serveur et en réduisant la taille des ressources demandées (par exemple, CSS et JavaScript).</span><span class="sxs-lookup"><span data-stu-id="33fab-107">Bundling and minification improves load time by reducing the number of requests to the server and reducing the size of requested assets (such as CSS and JavaScript.)</span></span>


<span data-ttu-id="33fab-108">La plupart des principaux navigateurs actuels limite le nombre de [connexions simultanées](http://www.browserscope.org/?category=network) par chaque nom d’hôte à six.</span><span class="sxs-lookup"><span data-stu-id="33fab-108">Most of the current major browsers limit the number of [simultaneous connections](http://www.browserscope.org/?category=network) per each hostname to six.</span></span> <span data-ttu-id="33fab-109">Cela signifie que pendant le traitement des demandes de six, des demandes supplémentaires de ressources sur un ordinateur hôte seront mises en attente par le navigateur.</span><span class="sxs-lookup"><span data-stu-id="33fab-109">That means that while six requests are being processed, additional requests for assets on a host will be queued by the browser.</span></span> <span data-ttu-id="33fab-110">Dans l’image ci-dessous, les onglets de réseau d’outils de développeur Internet Explorer F12 présente la temporisation pour les ressources requises par la vue About d’un exemple d’application.</span><span class="sxs-lookup"><span data-stu-id="33fab-110">In the image below, the IE F12 developer tools network tabs shows the timing for assets required by the About view of a sample application.</span></span>

![B/M](bundling-and-minification/_static/image1.png)

<span data-ttu-id="33fab-112">Les barres grises affichent le temps que la demande est en file d’attente par le navigateur en attente sur la limite de six connexions.</span><span class="sxs-lookup"><span data-stu-id="33fab-112">The gray bars show the time the request is queued by the browser waiting on the six connection limit.</span></span> <span data-ttu-id="33fab-113">La barre jaune est la durée de la demande jusqu’au premier octet, autrement dit, le temps nécessaire pour envoyer la demande et de recevoir la première réponse du serveur.</span><span class="sxs-lookup"><span data-stu-id="33fab-113">The yellow bar is the request time to first byte, that is, the time taken to send the request and receive the first response from the server.</span></span> <span data-ttu-id="33fab-114">Les barres bleues indiquent le temps nécessaire pour recevoir les données de réponse du serveur.</span><span class="sxs-lookup"><span data-stu-id="33fab-114">The blue bars show the time taken to receive the response data from the server.</span></span> <span data-ttu-id="33fab-115">Vous pouvez double-cliquer sur un élément multimédia pour obtenir des informations de minutage détaillées.</span><span class="sxs-lookup"><span data-stu-id="33fab-115">You can double-click on an asset to get detailed timing information.</span></span> <span data-ttu-id="33fab-116">Par exemple, l’illustration suivante montre les détails de minuterie pour le chargement du */Scripts/MyScripts/JavaScript6.js* fichier.</span><span class="sxs-lookup"><span data-stu-id="33fab-116">For example, the following image shows the timing details for loading the */Scripts/MyScripts/JavaScript6.js* file.</span></span>

![](bundling-and-minification/_static/image2.png)

<span data-ttu-id="33fab-117">L’illustration précédente montre le **Démarrer** événement, qui donne l’heure de la demande a été en file d’attente en raison du navigateur limite le nombre de connexions simultanées.</span><span class="sxs-lookup"><span data-stu-id="33fab-117">The preceding image shows the **Start** event, which gives the time the request was queued because of the browser limit the number of simultaneous connections.</span></span> <span data-ttu-id="33fab-118">Dans ce cas, la demande a été en file d’attente en millisecondes 46 attend une autre demande terminer.</span><span class="sxs-lookup"><span data-stu-id="33fab-118">In this case, the request was queued for 46 milliseconds waiting for another request to complete.</span></span>

## <a name="bundling"></a><span data-ttu-id="33fab-119">Le regroupement</span><span class="sxs-lookup"><span data-stu-id="33fab-119">Bundling</span></span>

<span data-ttu-id="33fab-120">Le regroupement est une nouvelle fonctionnalité dans ASP.NET 4.5 qui permet de facilement combiner ou regrouper plusieurs fichiers dans un seul fichier.</span><span class="sxs-lookup"><span data-stu-id="33fab-120">Bundling is a new feature in ASP.NET 4.5 that makes it easy to combine or bundle multiple files into a single file.</span></span> <span data-ttu-id="33fab-121">Vous pouvez créer des CSS, JavaScript et autres offres groupées.</span><span class="sxs-lookup"><span data-stu-id="33fab-121">You can create CSS, JavaScript and other bundles.</span></span> <span data-ttu-id="33fab-122">Moins de fichiers signifie moins de requêtes HTTP et qui peut améliorer les performances de chargement première page.</span><span class="sxs-lookup"><span data-stu-id="33fab-122">Fewer files means fewer HTTP requests and that can improve first page load performance.</span></span>

<span data-ttu-id="33fab-123">L’illustration suivante montre la même vue de minutage de la vue About indiquée précédemment, mais cette fois avec le regroupement et minimisation activé.</span><span class="sxs-lookup"><span data-stu-id="33fab-123">The following image shows the same timing view of the About view shown previously, but this time with bundling and minification enabled.</span></span>

![](bundling-and-minification/_static/image3.png)

## <a name="minification"></a><span data-ttu-id="33fab-124">Minification</span><span class="sxs-lookup"><span data-stu-id="33fab-124">Minification</span></span>

<span data-ttu-id="33fab-125">Minimisation effectue diverses optimisations de code différents css, comme la suppression d’un espace blanc inutile et vos commentaires et raccourcir les noms de variables pour un caractère ou de scripts.</span><span class="sxs-lookup"><span data-stu-id="33fab-125">Minification performs a variety of different code optimizations to scripts or css, such as removing unnecessary white space and comments and shortening variable names to one character.</span></span> <span data-ttu-id="33fab-126">Examinons la fonction JavaScript ci-dessous.</span><span class="sxs-lookup"><span data-stu-id="33fab-126">Consider the following JavaScript function.</span></span>

[!code-javascript[Main](bundling-and-minification/samples/sample1.js)]

<span data-ttu-id="33fab-127">Après la minimisation, la fonction est réduite à ce qui suit :</span><span class="sxs-lookup"><span data-stu-id="33fab-127">After minification, the function is reduced to the following:</span></span>

[!code-javascript[Main](bundling-and-minification/samples/sample2.js)]

<span data-ttu-id="33fab-128">Outre la suppression de commentaires et l’espace blanc inutile, les paramètres suivants et les noms de variables ont été renommés (raccourci) comme suit :</span><span class="sxs-lookup"><span data-stu-id="33fab-128">In addition to removing the comments and unnecessary whitespace, the following parameters and variable names were renamed (shortened) as follows:</span></span>

| <span data-ttu-id="33fab-129">**Original**</span><span class="sxs-lookup"><span data-stu-id="33fab-129">**Original**</span></span> | <span data-ttu-id="33fab-130">**Renamed**</span><span class="sxs-lookup"><span data-stu-id="33fab-130">**Renamed**</span></span> |
| --- | --- |
| <span data-ttu-id="33fab-131">imageTagAndImageID</span><span class="sxs-lookup"><span data-stu-id="33fab-131">imageTagAndImageID</span></span> | <span data-ttu-id="33fab-132">n</span><span class="sxs-lookup"><span data-stu-id="33fab-132">n</span></span> |
| <span data-ttu-id="33fab-133">imageContext</span><span class="sxs-lookup"><span data-stu-id="33fab-133">imageContext</span></span> | <span data-ttu-id="33fab-134">t</span><span class="sxs-lookup"><span data-stu-id="33fab-134">t</span></span> |
| <span data-ttu-id="33fab-135">imageElement</span><span class="sxs-lookup"><span data-stu-id="33fab-135">imageElement</span></span> | <span data-ttu-id="33fab-136">i</span><span class="sxs-lookup"><span data-stu-id="33fab-136">i</span></span> |

## <a name="impact-of-bundling-and-minification"></a><span data-ttu-id="33fab-137">Impact de regroupement et minimisation</span><span class="sxs-lookup"><span data-stu-id="33fab-137">Impact of Bundling and Minification</span></span>

<span data-ttu-id="33fab-138">Le tableau suivant montre plusieurs différences importantes entre la liste de toutes les ressources individuellement et à l’aide de regroupement et minimisation (B/M) dans l’exemple de programme.</span><span class="sxs-lookup"><span data-stu-id="33fab-138">The following table shows several important differences between listing all the assets individually and using bundling and minification (B/M) in the sample program.</span></span>

|  | <span data-ttu-id="33fab-139">**À l’aide de B/M**</span><span class="sxs-lookup"><span data-stu-id="33fab-139">**Using B/M**</span></span> | <span data-ttu-id="33fab-140">**Sans B/M**</span><span class="sxs-lookup"><span data-stu-id="33fab-140">**Without B/M**</span></span> | <span data-ttu-id="33fab-141">**Change**</span><span class="sxs-lookup"><span data-stu-id="33fab-141">**Change**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="33fab-142">**Demandes de fichiers**</span><span class="sxs-lookup"><span data-stu-id="33fab-142">**File Requests**</span></span> | <span data-ttu-id="33fab-143">9</span><span class="sxs-lookup"><span data-stu-id="33fab-143">9</span></span> | <span data-ttu-id="33fab-144">34</span><span class="sxs-lookup"><span data-stu-id="33fab-144">34</span></span> | <span data-ttu-id="33fab-145">256%</span><span class="sxs-lookup"><span data-stu-id="33fab-145">256%</span></span> |
| <span data-ttu-id="33fab-146">**Ko envoyé**</span><span class="sxs-lookup"><span data-stu-id="33fab-146">**KB Sent**</span></span> | <span data-ttu-id="33fab-147">3.26</span><span class="sxs-lookup"><span data-stu-id="33fab-147">3.26</span></span> | <span data-ttu-id="33fab-148">11.92</span><span class="sxs-lookup"><span data-stu-id="33fab-148">11.92</span></span> | <span data-ttu-id="33fab-149">266%</span><span class="sxs-lookup"><span data-stu-id="33fab-149">266%</span></span> |
| <span data-ttu-id="33fab-150">**Ko reçus**</span><span class="sxs-lookup"><span data-stu-id="33fab-150">**KB Received**</span></span> | <span data-ttu-id="33fab-151">388.51</span><span class="sxs-lookup"><span data-stu-id="33fab-151">388.51</span></span> | <span data-ttu-id="33fab-152">530</span><span class="sxs-lookup"><span data-stu-id="33fab-152">530</span></span> | <span data-ttu-id="33fab-153">36%</span><span class="sxs-lookup"><span data-stu-id="33fab-153">36%</span></span> |
| <span data-ttu-id="33fab-154">**Temps de chargement**</span><span class="sxs-lookup"><span data-stu-id="33fab-154">**Load Time**</span></span> | <span data-ttu-id="33fab-155">510 MS</span><span class="sxs-lookup"><span data-stu-id="33fab-155">510 MS</span></span> | <span data-ttu-id="33fab-156">780 MS</span><span class="sxs-lookup"><span data-stu-id="33fab-156">780 MS</span></span> | <span data-ttu-id="33fab-157">53%</span><span class="sxs-lookup"><span data-stu-id="33fab-157">53%</span></span> |

<span data-ttu-id="33fab-158">Les octets envoyés avaient une réduction significative avec regroupement comme navigateurs sont assez détaillés avec les en-têtes HTTP qu'elles s’appliquent sur les demandes.</span><span class="sxs-lookup"><span data-stu-id="33fab-158">The bytes sent had a significant reduction with bundling as browsers are fairly verbose with the HTTP headers they apply on requests.</span></span> <span data-ttu-id="33fab-159">La réduction du nombre d’octets reçus n’est pas aussi volumineuse, car les fichiers les plus volumineux (*Scripts\\jquery-ui-1.8.11.min.js* et *Scripts\\jquery-1.7.1.min.js*) étant déjà minimisés .</span><span class="sxs-lookup"><span data-stu-id="33fab-159">The received bytes reduction is not as large because the largest files (*Scripts\\jquery-ui-1.8.11.min.js* and *Scripts\\jquery-1.7.1.min.js*) are already minified.</span></span> <span data-ttu-id="33fab-160">Remarque : Le minutage de l’exemple de programme utilisé le [Fiddler](http://www.fiddler2.com/fiddler2/) outil pour simuler un réseau lent.</span><span class="sxs-lookup"><span data-stu-id="33fab-160">Note: The timings on the sample program used the [Fiddler](http://www.fiddler2.com/fiddler2/) tool to simulate a slow network.</span></span> <span data-ttu-id="33fab-161">(À partir de la Fiddler **règles** menu, sélectionnez **performances** puis **simuler les vitesses de Modem**.)</span><span class="sxs-lookup"><span data-stu-id="33fab-161">(From the Fiddler **Rules** menu, select **Performance** then **Simulate Modem Speeds**.)</span></span>

## <a name="debugging-bundled-and-minified-javascript"></a><span data-ttu-id="33fab-162">Débogage regroupés et minimisés JavaScript</span><span class="sxs-lookup"><span data-stu-id="33fab-162">Debugging Bundled and Minified JavaScript</span></span>

<span data-ttu-id="33fab-163">Il est facile de déboguer votre code JavaScript dans un environnement de développement (où le [compilation élément](https://msdn.microsoft.com/library/s10awwz0.aspx) dans le *Web.config* fichier est défini sur `debug="true"` ), car les fichiers JavaScript ne sont pas regroupées ou minimisés.</span><span class="sxs-lookup"><span data-stu-id="33fab-163">It's easy to debug your JavaScript in a development environment (where the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx) in the *Web.config* file is set to `debug="true"` ) because the JavaScript files are not bundled or minified.</span></span> <span data-ttu-id="33fab-164">Vous pouvez également déboguer une version Release où vos fichiers JavaScript sont regroupés et minimisés.</span><span class="sxs-lookup"><span data-stu-id="33fab-164">You can also debug a release build where your JavaScript files are bundled and minified.</span></span> <span data-ttu-id="33fab-165">Les outils de développement F12 d’Internet Explorer, vous de déboguer une fonction JavaScript incluse dans un regroupement minimisée à l’aide de l’approche suivante :</span><span class="sxs-lookup"><span data-stu-id="33fab-165">Using the IE F12 developer tools, you debug a JavaScript function included in a minified bundle using the following approach:</span></span>

1. <span data-ttu-id="33fab-166">Sélectionnez le **Script** onglet, puis sélectionnez le **démarrer le débogage** bouton.</span><span class="sxs-lookup"><span data-stu-id="33fab-166">Select the **Script** tab and then select the **Start debugging** button.</span></span>
2. <span data-ttu-id="33fab-167">Sélectionnez le groupe qui contient la fonction JavaScript que vous souhaitez déboguer à l’aide du bouton de ressources.</span><span class="sxs-lookup"><span data-stu-id="33fab-167">Select the bundle containing the JavaScript function you want to debug using the assets button.</span></span>  
    ![](bundling-and-minification/_static/image4.png)
3. <span data-ttu-id="33fab-168">Mettre en forme le code JavaScript minimisée en sélectionnant le **bouton Configuration** ![](bundling-and-minification/_static/image5.png), puis en sélectionnant **Format JavaScript**.</span><span class="sxs-lookup"><span data-stu-id="33fab-168">Format the minified JavaScript by selecting the **Configuration button** ![](bundling-and-minification/_static/image5.png), and then selecting **Format JavaScript**.</span></span>
4. <span data-ttu-id="33fab-169">Dans le **recherche Script** zone d’entrée, sélectionnez le nom de la fonction que vous souhaitez déboguer.</span><span class="sxs-lookup"><span data-stu-id="33fab-169">In the **Search Script** input box, select the name of the function you want to debug.</span></span> <span data-ttu-id="33fab-170">Dans l’image suivante, **AddAltToImg** a été entré dans le **recherche Script** zone d’entrée.</span><span class="sxs-lookup"><span data-stu-id="33fab-170">In the following image, **AddAltToImg** was entered in the **Search Script** input box.</span></span>  
    ![](bundling-and-minification/_static/image6.png)

<span data-ttu-id="33fab-171">Pour plus d’informations sur le débogage avec les outils de développement F12, consultez l’article MSDN [à l’aide des outils de développement F12 pour déboguer les erreurs JavaScript](https://msdn.microsoft.com/library/ie/gg699336(v=vs.85).aspx).</span><span class="sxs-lookup"><span data-stu-id="33fab-171">For more information on debugging with the F12 developer tools, see the MSDN article [Using the F12 Developer Tools to Debug JavaScript Errors](https://msdn.microsoft.com/library/ie/gg699336(v=vs.85).aspx).</span></span>

## <a name="controlling-bundling-and-minification"></a><span data-ttu-id="33fab-172">Contrôle de regroupement et minimisation</span><span class="sxs-lookup"><span data-stu-id="33fab-172">Controlling Bundling and Minification</span></span>

<span data-ttu-id="33fab-173">Regroupement et minimisation est activé ou désactivé en définissant la valeur de l’attribut de débogage dans le [compilation élément](https://msdn.microsoft.com/library/s10awwz0.aspx) dans le *Web.config* fichier.</span><span class="sxs-lookup"><span data-stu-id="33fab-173">Bundling and minification is enabled or disabled by setting the value of the debug attribute in the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx)  in the *Web.config* file.</span></span> <span data-ttu-id="33fab-174">Dans le code XML suivant, `debug` est défini sur true, le regroupement et minimisation est désactivée.</span><span class="sxs-lookup"><span data-stu-id="33fab-174">In the following XML, `debug` is set to true so bundling and minification is disabled.</span></span>

[!code-xml[Main](bundling-and-minification/samples/sample3.xml?highlight=2)]

<span data-ttu-id="33fab-175">Pour activer le regroupement et minimisation, définissez la `debug` valeur « False ».</span><span class="sxs-lookup"><span data-stu-id="33fab-175">To enable bundling and minification, set the `debug` value to "false".</span></span> <span data-ttu-id="33fab-176">Vous pouvez remplacer le *Web.config* avec la `EnableOptimizations` propriété sur le `BundleTable` classe.</span><span class="sxs-lookup"><span data-stu-id="33fab-176">You can override the *Web.config* setting with the `EnableOptimizations` property on the `BundleTable` class.</span></span> <span data-ttu-id="33fab-177">Le code suivant permet de regroupement et minimisation et remplace tous les paramètres dans le *Web.config* fichier.</span><span class="sxs-lookup"><span data-stu-id="33fab-177">The following code enables bundling and minification and overrides any setting in the *Web.config* file.</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample4.cs?highlight=7)]

> [!NOTE]
> <span data-ttu-id="33fab-178">Sauf si `EnableOptimizations` est `true` ou l’attribut de débogage dans le [compilation élément](https://msdn.microsoft.com/library/s10awwz0.aspx) dans le *Web.config* fichier est défini sur `false`, fichiers ne seront pas fournis ou minimisés.</span><span class="sxs-lookup"><span data-stu-id="33fab-178">Unless `EnableOptimizations` is `true` or the debug attribute in the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx)  in the *Web.config* file is set to `false`, files will not be bundled or minified.</span></span> <span data-ttu-id="33fab-179">En outre, la version .min des fichiers ne sera pas utilisée, les versions de débogage complète seront sélectionnées.</span><span class="sxs-lookup"><span data-stu-id="33fab-179">Additionally, the .min version of files will not be used, the full debug versions will be selected.</span></span> <span data-ttu-id="33fab-180">`EnableOptimizations` remplace l’attribut de débogage dans le [compilation élément](https://msdn.microsoft.com/library/s10awwz0.aspx) dans le *Web.config* fichier</span><span class="sxs-lookup"><span data-stu-id="33fab-180">`EnableOptimizations` overrides the debug attribute in the [compilation Element](https://msdn.microsoft.com/library/s10awwz0.aspx)  in the *Web.config* file</span></span>


## <a name="using-bundling-and-minification-with-aspnet-web-forms-and-web-pages"></a><span data-ttu-id="33fab-181">À l’aide de regroupement et minimisation avec ASP.NET Web Forms et les Pages Web</span><span class="sxs-lookup"><span data-stu-id="33fab-181">Using Bundling and Minification with ASP.NET Web Forms and Web Pages</span></span>

- <span data-ttu-id="33fab-182">Pour les Pages Web, consultez le billet de blog [Ajout de l’optimisation du Web vers un Site Web Pages](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span><span class="sxs-lookup"><span data-stu-id="33fab-182">For Web Pages, see the blog entry [Adding Web Optimization to a Web Pages Site](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span></span>
- <span data-ttu-id="33fab-183">Pour les Web Forms, consultez le billet de blog [Ajout de regroupement et minimisation à Web Forms](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span><span class="sxs-lookup"><span data-stu-id="33fab-183">For Web Forms, see the blog entry [Adding Bundling and Minification to Web Forms](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span></span>

## <a name="using-bundling-and-minification-with-aspnet-mvc"></a><span data-ttu-id="33fab-184">À l’aide de regroupement et minimisation avec ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="33fab-184">Using Bundling and Minification with ASP.NET MVC</span></span>

<span data-ttu-id="33fab-185">Dans cette section, nous allons créer un ASP.NET MVC projet pour examiner le regroupement et minimisation.</span><span class="sxs-lookup"><span data-stu-id="33fab-185">In this section we will create an ASP.NET MVC project to examine bundling and minification.</span></span> <span data-ttu-id="33fab-186">Tout d’abord, créez un nouveau projet ASP.NET MVC internet nommé **MvcBM** sans modifier les valeurs par défaut.</span><span class="sxs-lookup"><span data-stu-id="33fab-186">First, create a new ASP.NET MVC internet project named **MvcBM** without changing any of the defaults.</span></span>

<span data-ttu-id="33fab-187">Ouvrir le *application\\\_Démarrer\\BundleConfig.cs* de fichiers et d’examiner le `RegisterBundles` méthode qui est utilisée pour créer, enregistrer et configurer des offres groupées.</span><span class="sxs-lookup"><span data-stu-id="33fab-187">Open the *App\\\_Start\\BundleConfig.cs* file and examine the `RegisterBundles` method which is used to create, register and configure bundles.</span></span> <span data-ttu-id="33fab-188">Le code suivant montre une partie de la `RegisterBundles` (méthode).</span><span class="sxs-lookup"><span data-stu-id="33fab-188">The following code shows a portion of the `RegisterBundles` method.</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample5.cs)]

<span data-ttu-id="33fab-189">Le code précédent crée un nouveau lot de JavaScript nommé *~/bundles/jquery* qui inclut toutes les approprié (qui est le débogage ou réduites, mais pas. *VSDoc*) des fichiers dans le *Scripts* dossier qui correspond à la chaîne de caractère générique « ~/Scripts/jquery-{version} .js ».</span><span class="sxs-lookup"><span data-stu-id="33fab-189">The  preceding code creates a new JavaScript bundle named *~/bundles/jquery* that includes all the appropriate (that is debug or minified but not .*vsdoc*) files in the *Scripts* folder that match the wild card string "~/Scripts/jquery-{version}.js".</span></span> <span data-ttu-id="33fab-190">Pour ASP.NET MVC 4, cela signifie qu’avec une configuration debug, le fichier *jquery-1.7.1.js* seront ajoutés au regroupement.</span><span class="sxs-lookup"><span data-stu-id="33fab-190">For ASP.NET MVC 4, this means with a debug configuration, the file *jquery-1.7.1.js* will be added to the bundle.</span></span> <span data-ttu-id="33fab-191">Dans une configuration release, *jquery-1.7.1.min.js* sera ajouté.</span><span class="sxs-lookup"><span data-stu-id="33fab-191">In a release configuration, *jquery-1.7.1.min.js* will be added.</span></span> <span data-ttu-id="33fab-192">L’infrastructure de regroupement suit plusieurs conventions courantes telles que :</span><span class="sxs-lookup"><span data-stu-id="33fab-192">The bundling framework follows several common conventions such as:</span></span>

- <span data-ttu-id="33fab-193">En sélectionnant « .min » fichier pour la version quand *FileX.min.js* et *FileX.js* existe.</span><span class="sxs-lookup"><span data-stu-id="33fab-193">Selecting ".min" file for release when *FileX.min.js* and *FileX.js* exist.</span></span>
- <span data-ttu-id="33fab-194">Sélectionner la version de .min « non » pour le débogage.</span><span class="sxs-lookup"><span data-stu-id="33fab-194">Selecting the non ".min" version for debug.</span></span>
- <span data-ttu-id="33fab-195">En ignorant »-vsdoc « fichiers (tels que *jquery-1.7.1-vsdoc.js*), qui sont uniquement utilisé par IntelliSense.</span><span class="sxs-lookup"><span data-stu-id="33fab-195">Ignoring "-vsdoc" files (such as *jquery-1.7.1-vsdoc.js*), which are used only by IntelliSense.</span></span>

<span data-ttu-id="33fab-196">Le `{version}` correspondance générique indiqué ci-dessus est utilisé pour créer automatiquement un bundle jQuery avec la version appropriée de jQuery dans votre *Scripts* dossier.</span><span class="sxs-lookup"><span data-stu-id="33fab-196">The `{version}` wild card matching shown above is used to automatically create a jQuery bundle with the appropriate version of jQuery in your *Scripts* folder.</span></span> <span data-ttu-id="33fab-197">Dans cet exemple, à l’aide d’un caractère générique offre les avantages suivants :</span><span class="sxs-lookup"><span data-stu-id="33fab-197">In this example, using a wild card provides the following benefits:</span></span>

- <span data-ttu-id="33fab-198">Vous permet d’utiliser NuGet pour mettre à jour vers une version plus récente de jQuery sans modifier le code de regroupement précédente ou les références de jQuery dans vos pages de vue.</span><span class="sxs-lookup"><span data-stu-id="33fab-198">Allows you to use NuGet to update to a newer jQuery version without changing the preceding bundling code or jQuery references in your view pages.</span></span>
- <span data-ttu-id="33fab-199">Sélectionne la version complète pour les configurations debug et la version « .min » pour la mise en production génère automatiquement.</span><span class="sxs-lookup"><span data-stu-id="33fab-199">Automatically selects the full version for debug configurations and the ".min" version for release builds.</span></span>

## <a name="using-a-cdn"></a><span data-ttu-id="33fab-200">À l’aide d’un CDN</span><span class="sxs-lookup"><span data-stu-id="33fab-200">Using a CDN</span></span>

 <span data-ttu-id="33fab-201">Le code suivant remplace le groupe de jQuery local avec une offre groupée de CDN jQuery.</span><span class="sxs-lookup"><span data-stu-id="33fab-201">The follow code replaces the local jQuery bundle with a CDN jQuery bundle.</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample6.cs)]

<span data-ttu-id="33fab-202">Dans le code ci-dessus, jQuery sera demandé à partir du CDN, tandis que dans la version en mode et la version debug de jQuery seront extraites localement en mode débogage.</span><span class="sxs-lookup"><span data-stu-id="33fab-202">In the code above, jQuery will be requested from the CDN while in release mode and the debug version of jQuery will be fetched locally in debug mode.</span></span> <span data-ttu-id="33fab-203">Lorsque vous utilisez un CDN, vous devez avoir un mécanisme de secours en cas d’échec de la demande CDN.</span><span class="sxs-lookup"><span data-stu-id="33fab-203">When using a CDN, you should have a fallback mechanism in case the CDN request fails.</span></span> <span data-ttu-id="33fab-204">Le balisage suivant, extrait de la fin du script montre de fichier de disposition ajouté à la requête jQuery si le CDN en panne.</span><span class="sxs-lookup"><span data-stu-id="33fab-204">The following markup fragment from the end of the layout file shows script added to request jQuery should the CDN fail.</span></span>

[!code-cshtml[Main](bundling-and-minification/samples/sample7.cshtml?highlight=5-13)]

## <a name="creating-a-bundle"></a><span data-ttu-id="33fab-205">Création d’un regroupement</span><span class="sxs-lookup"><span data-stu-id="33fab-205">Creating a Bundle</span></span>

<span data-ttu-id="33fab-206">Le [Bundle](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) classe `Include` méthode prend un tableau de chaînes, où chaque chaîne est un chemin d’accès virtuel à la ressource.</span><span class="sxs-lookup"><span data-stu-id="33fab-206">The [Bundle](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) class `Include` method takes an array of strings, where each string is a virtual path to resource.</span></span> <span data-ttu-id="33fab-207">Le code suivant à partir de la `RegisterBundles` méthode dans le *application\\\_Démarrer\\BundleConfig.cs* fichier montre comment plusieurs fichiers sont ajoutés à un regroupement :</span><span class="sxs-lookup"><span data-stu-id="33fab-207">The following code from the `RegisterBundles` method in the *App\\\_Start\\BundleConfig.cs* file shows how multiple files are added to a bundle:</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample8.cs)]

<span data-ttu-id="33fab-208">Le [Bundle](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) classe `IncludeDirectory` méthode est fournie pour ajouter tous les fichiers dans un répertoire (et éventuellement tous les sous-répertoires) qui correspondent à un modèle de recherche.</span><span class="sxs-lookup"><span data-stu-id="33fab-208">The [Bundle](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) class `IncludeDirectory` method is provided to add all the files in a directory (and optionally all subdirectories) which match a search pattern.</span></span> <span data-ttu-id="33fab-209">Le [Bundle](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) classe `IncludeDirectory` API est indiqué ci-dessous :</span><span class="sxs-lookup"><span data-stu-id="33fab-209">The [Bundle](https://msdn.microsoft.com/library/system.web.optimization.bundle(v=VS.110).aspx) class `IncludeDirectory` API is shown below:</span></span>

[!code-csharp[Main](bundling-and-minification/samples/sample9.cs)]

<span data-ttu-id="33fab-210">Offres groupées sont référencées dans les vues à l’aide de la méthode Render, (`Styles.Render` pour CSS et `Scripts.Render` pour JavaScript).</span><span class="sxs-lookup"><span data-stu-id="33fab-210">Bundles are referenced in views using the Render method, (`Styles.Render` for CSS and `Scripts.Render` for JavaScript).</span></span> <span data-ttu-id="33fab-211">Le balisage suivant à partir de la *vues\\partagé\\\_Layout.cshtml* fichier montre comment les vues de projet par défaut ASP.NET internet référencent les offres groupées CSS et JavaScript.</span><span class="sxs-lookup"><span data-stu-id="33fab-211">The following markup from the *Views\\Shared\\\_Layout.cshtml* file shows how the default ASP.NET internet project views reference CSS and JavaScript bundles.</span></span>

[!code-cshtml[Main](bundling-and-minification/samples/sample10.cshtml?highlight=5-6,11)]

<span data-ttu-id="33fab-212">Notez que les méthodes de rendu prend un tableau de chaînes, vous pouvez donc ajouter plusieurs lots sur une seule ligne de code.</span><span class="sxs-lookup"><span data-stu-id="33fab-212">Notice the Render methods takes an array of strings, so you can add multiple bundles in one line of code.</span></span> <span data-ttu-id="33fab-213">En règle générale, vous devez utiliser les méthodes de rendu qui créent le code HTML nécessaire pour faire référence à la ressource.</span><span class="sxs-lookup"><span data-stu-id="33fab-213">You will generally want to use the Render methods which create the necessary HTML to reference the asset.</span></span> <span data-ttu-id="33fab-214">Vous pouvez utiliser la `Url` méthode permettant de générer l’URL à la ressource sans le balisage nécessaire pour référencer l’élément multimédia.</span><span class="sxs-lookup"><span data-stu-id="33fab-214">You can use the `Url` method to generate the URL to the asset without the markup needed to reference the asset.</span></span> <span data-ttu-id="33fab-215">Supposons que vous souhaitez utiliser le nouveau HTML5 [async](http://www.whatwg.org/specs/web-apps/current-work/#attr-script-async) attribut.</span><span class="sxs-lookup"><span data-stu-id="33fab-215">Suppose you wanted to use the new HTML5 [async](http://www.whatwg.org/specs/web-apps/current-work/#attr-script-async) attribute.</span></span> <span data-ttu-id="33fab-216">Le code suivant montre comment référencer à l’aide de modernizr le `Url` (méthode).</span><span class="sxs-lookup"><span data-stu-id="33fab-216">The following code shows how to reference modernizr using the `Url` method.</span></span>

[!code-cshtml[Main](bundling-and-minification/samples/sample11.cshtml?highlight=11)]

## <a name="using-the--wildcard-character-to-select-files"></a><span data-ttu-id="33fab-217">À l’aide de la «\*« caractère générique pour sélectionner les fichiers</span><span class="sxs-lookup"><span data-stu-id="33fab-217">Using the "\*" Wildcard Character to Select Files</span></span>

<span data-ttu-id="33fab-218">Le chemin d’accès virtuel spécifié dans le `Include` (méthode) et la recherche de modèle dans le `IncludeDirectory` méthode peut accepter un «\*« caractère générique en tant que préfixe ou suffixe à dans le dernier segment de chemin d’accès.</span><span class="sxs-lookup"><span data-stu-id="33fab-218">The virtual path specified in the `Include` method and the search pattern in the `IncludeDirectory` method can accept one "\*" wildcard character as a prefix or suffix to in the last path segment.</span></span> <span data-ttu-id="33fab-219">La chaîne de recherche respecte la casse.</span><span class="sxs-lookup"><span data-stu-id="33fab-219">The search string is case insensitive.</span></span> <span data-ttu-id="33fab-220">Le `IncludeDirectory` méthode a la possibilité de rechercher dans les sous-répertoires.</span><span class="sxs-lookup"><span data-stu-id="33fab-220">The `IncludeDirectory` method has the option of searching subdirectories.</span></span>

<span data-ttu-id="33fab-221">Prenez un projet avec les fichiers JavaScript suivants :</span><span class="sxs-lookup"><span data-stu-id="33fab-221">Consider a project with the following JavaScript files:</span></span>

- <span data-ttu-id="33fab-222">*Scripts\\Common\\AddAltToImg.js*</span><span class="sxs-lookup"><span data-stu-id="33fab-222">*Scripts\\Common\\AddAltToImg.js*</span></span>
- <span data-ttu-id="33fab-223">*Scripts\\Common\\ToggleDiv.js*</span><span class="sxs-lookup"><span data-stu-id="33fab-223">*Scripts\\Common\\ToggleDiv.js*</span></span>
- <span data-ttu-id="33fab-224">*Scripts\\Common\\ToggleImg.js*</span><span class="sxs-lookup"><span data-stu-id="33fab-224">*Scripts\\Common\\ToggleImg.js*</span></span>
- <span data-ttu-id="33fab-225">*Scripts\\commune\\Sub1\\ToggleLinks.js*</span><span class="sxs-lookup"><span data-stu-id="33fab-225">*Scripts\\Common\\Sub1\\ToggleLinks.js*</span></span>

![dir imag](bundling-and-minification/_static/image7.png)

<span data-ttu-id="33fab-227">Le tableau suivant présente les fichiers ajoutés à un ensemble en utilisant le caractère générique, comme indiqué :</span><span class="sxs-lookup"><span data-stu-id="33fab-227">The following table shows the files added to a bundle using the wildcard as shown:</span></span>

| <span data-ttu-id="33fab-228">**Call**</span><span class="sxs-lookup"><span data-stu-id="33fab-228">**Call**</span></span> | <span data-ttu-id="33fab-229">**Fichiers ajoutés ou Exception levée**</span><span class="sxs-lookup"><span data-stu-id="33fab-229">**Files Added or Exception Raised**</span></span> |
| --- | --- |
| <span data-ttu-id="33fab-230">Include("~/Scripts/Common/\*.js")</span><span class="sxs-lookup"><span data-stu-id="33fab-230">Include("~/Scripts/Common/\*.js")</span></span> | <span data-ttu-id="33fab-231">*AddAltToImg.js*, *ToggleDiv.js*, *ToggleImg.js*</span><span class="sxs-lookup"><span data-stu-id="33fab-231">*AddAltToImg.js*, *ToggleDiv.js*, *ToggleImg.js*</span></span> |
| <span data-ttu-id="33fab-232">Include("~/Scripts/Common/T\*.js")</span><span class="sxs-lookup"><span data-stu-id="33fab-232">Include("~/Scripts/Common/T\*.js")</span></span> | <span data-ttu-id="33fab-233">Exception de modèle non valide.</span><span class="sxs-lookup"><span data-stu-id="33fab-233">Invalid pattern exception.</span></span> <span data-ttu-id="33fab-234">Le caractère générique est uniquement autorisé sur le préfixe ou le suffixe.</span><span class="sxs-lookup"><span data-stu-id="33fab-234">The wildcard character is only allowed on the prefix or suffix.</span></span> |
| <span data-ttu-id="33fab-235">Include("~/Scripts/Common/\*og.\*")</span><span class="sxs-lookup"><span data-stu-id="33fab-235">Include("~/Scripts/Common/\*og.\*")</span></span> | <span data-ttu-id="33fab-236">Exception de modèle non valide.</span><span class="sxs-lookup"><span data-stu-id="33fab-236">Invalid pattern exception.</span></span> <span data-ttu-id="33fab-237">Qu’un seul caractère générique est autorisé.</span><span class="sxs-lookup"><span data-stu-id="33fab-237">Only one wildcard character is allowed.</span></span> |
| <span data-ttu-id="33fab-238">Include("~/Scripts/Common/T\*")</span><span class="sxs-lookup"><span data-stu-id="33fab-238">Include("~/Scripts/Common/T\*")</span></span> | <span data-ttu-id="33fab-239">*ToggleDiv.js*, *ToggleImg.js*</span><span class="sxs-lookup"><span data-stu-id="33fab-239">*ToggleDiv.js*, *ToggleImg.js*</span></span> |
| <span data-ttu-id="33fab-240">Include("~/Scripts/Common/\*")</span><span class="sxs-lookup"><span data-stu-id="33fab-240">Include("~/Scripts/Common/\*")</span></span> | <span data-ttu-id="33fab-241">Exception de modèle non valide.</span><span class="sxs-lookup"><span data-stu-id="33fab-241">Invalid pattern exception.</span></span> <span data-ttu-id="33fab-242">Un segment de caractère générique pure n’est pas valide.</span><span class="sxs-lookup"><span data-stu-id="33fab-242">A pure wildcard segment is not valid.</span></span> |
| <span data-ttu-id="33fab-243">IncludeDirectory("~/Scripts/Common", "T\*")</span><span class="sxs-lookup"><span data-stu-id="33fab-243">IncludeDirectory("~/Scripts/Common", "T\*")</span></span> | <span data-ttu-id="33fab-244">*ToggleDiv.js*, *ToggleImg.js*</span><span class="sxs-lookup"><span data-stu-id="33fab-244">*ToggleDiv.js*, *ToggleImg.js*</span></span> |
| <span data-ttu-id="33fab-245">IncludeDirectory("~/Scripts/Common", "T\*", true)</span><span class="sxs-lookup"><span data-stu-id="33fab-245">IncludeDirectory("~/Scripts/Common", "T\*", true)</span></span> | <span data-ttu-id="33fab-246">*ToggleDiv.js*, *ToggleImg.js*, *ToggleLinks.js*</span><span class="sxs-lookup"><span data-stu-id="33fab-246">*ToggleDiv.js*, *ToggleImg.js*, *ToggleLinks.js*</span></span> |

<span data-ttu-id="33fab-247">Ajouter explicitement chaque fichier pour un regroupement est généralement la préférée sur le chargement de caractère générique de fichiers pour les raisons suivantes :</span><span class="sxs-lookup"><span data-stu-id="33fab-247">Explicitly adding each file to a bundle is generally the preferred over wildcard loading of files for the following reasons:</span></span>

- <span data-ttu-id="33fab-248">Ajout de scripts par défaut de caractère générique pour les charger dans l’ordre alphabétique, qui est généralement pas ce que vous voulez.</span><span class="sxs-lookup"><span data-stu-id="33fab-248">Adding scripts by wildcard defaults to loading them in alphabetical order, which is typically not what you want.</span></span> <span data-ttu-id="33fab-249">Fichiers CSS et JavaScript doivent souvent être ajoutés dans un ordre spécifique (non alphabétiques).</span><span class="sxs-lookup"><span data-stu-id="33fab-249">CSS and JavaScript files frequently need to be added in a specific (non-alphabetic) order.</span></span> <span data-ttu-id="33fab-250">Vous pouvez réduire ce risque en ajoutant un personnalisé [IBundleOrderer](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) implémentation, mais en ajoutant explicitement chaque fichier est moins sujette aux erreurs.</span><span class="sxs-lookup"><span data-stu-id="33fab-250">You can mitigate this risk by adding a custom [IBundleOrderer](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) implementation, but explicitly adding each file is less error prone.</span></span> <span data-ttu-id="33fab-251">Par exemple, vous pouvez ajouter de nouveaux éléments multimédias dans un dossier à l’avenir, ce qui peuvent vous amener à modifier votre [IBundleOrderer](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) implémentation.</span><span class="sxs-lookup"><span data-stu-id="33fab-251">For example, you might add new assets to a folder in the future which might require you to modify your [IBundleOrderer](https://msdn.microsoft.com/library/system.web.optimization.ibundleorderer(VS.110).aspx) implementation.</span></span>
- <span data-ttu-id="33fab-252">Ajouté à un répertoire à l’aide du caractère générique du chargement des fichiers spécifiques de vue peuvent être inclus dans toutes les vues faisant référence à cette offre groupée.</span><span class="sxs-lookup"><span data-stu-id="33fab-252">View specific files added to a directory using wild card loading can be included in all views referencing that bundle.</span></span> <span data-ttu-id="33fab-253">Si le script spécifique d’affichage est ajouté à un regroupement, vous pouvez obtenir une erreur JavaScript sur les autres vues qui font référence à l’offre groupée.</span><span class="sxs-lookup"><span data-stu-id="33fab-253">If the view specific script is added to a bundle, you may get a JavaScript error on other views that reference the bundle.</span></span>
- <span data-ttu-id="33fab-254">Les fichiers importés chargés à deux reprises entraînent des fichiers CSS qui importer d’autres fichiers.</span><span class="sxs-lookup"><span data-stu-id="33fab-254">CSS files that import other files result in the imported files loaded twice.</span></span> <span data-ttu-id="33fab-255">Par exemple, le code suivant crée un regroupement avec la plupart des fichiers CSS thème de l’interface utilisateur de jQuery chargés à deux reprises.</span><span class="sxs-lookup"><span data-stu-id="33fab-255">For example, the following code creates a bundle with most of the jQuery UI theme CSS files loaded twice.</span></span> 

    [!code-csharp[Main](bundling-and-minification/samples/sample12.cs)]

  <span data-ttu-id="33fab-256">Le sélecteur de caractère générique «\*.css » apporte dans chaque fichier CSS dans le dossier, y compris le *contenu\\thèmes\\base\\jquery.ui.all.css* fichier.</span><span class="sxs-lookup"><span data-stu-id="33fab-256">The wild card selector "\*.css" brings in each CSS file in the folder, including the *Content\\themes\\base\\jquery.ui.all.css* file.</span></span> <span data-ttu-id="33fab-257">Le *jquery.ui.all.css* fichier importe les autres fichiers CSS.</span><span class="sxs-lookup"><span data-stu-id="33fab-257">The *jquery.ui.all.css* file imports other CSS files.</span></span>

## <a name="bundle-caching"></a><span data-ttu-id="33fab-258">Regrouper la mise en cache</span><span class="sxs-lookup"><span data-stu-id="33fab-258">Bundle Caching</span></span>

<span data-ttu-id="33fab-259">Offres groupées définir l’en-tête d’expiration HTTP un an à partir de la création de l’offre groupée.</span><span class="sxs-lookup"><span data-stu-id="33fab-259">Bundles set the HTTP Expires Header one year from when the bundle is created.</span></span> <span data-ttu-id="33fab-260">Si vous accédez à une page précédemment affichée, montre Fiddler IE ne rend pas une demande conditionnelle pour le regroupement, autrement dit, il existe aucune demande HTTP GET à partir d’Internet Explorer pour les regroupements et aucune réponse HTTP 304 à partir du serveur.</span><span class="sxs-lookup"><span data-stu-id="33fab-260">If you navigate to a previously viewed page, Fiddler shows IE does not make a conditional request for the bundle, that is, there are no HTTP GET requests from IE for the bundles and no HTTP 304 responses from the server.</span></span> <span data-ttu-id="33fab-261">Vous pouvez forcer IE pour effectuer une demande conditionnelle pour chaque regroupement avec la touche F5 (entraînant une réponse HTTP 304 pour chaque regroupement).</span><span class="sxs-lookup"><span data-stu-id="33fab-261">You can force IE to make a conditional request for each bundle with the F5 key (resulting in a HTTP 304 response for each bundle).</span></span> <span data-ttu-id="33fab-262">Vous pouvez forcer une actualisation complète à l’aide de ^ F5 (entraînant une réponse HTTP 200 pour chaque regroupement.)</span><span class="sxs-lookup"><span data-stu-id="33fab-262">You can force a full refresh by using ^F5 (resulting in a HTTP 200 response for each bundle.)</span></span>

<span data-ttu-id="33fab-263">L’illustration suivante montre le **mise en cache** onglet du volet de réponse Fiddler :</span><span class="sxs-lookup"><span data-stu-id="33fab-263">The following image shows the **Caching** tab of the Fiddler response pane:</span></span>

![image de mise en cache de Fiddler](bundling-and-minification/_static/image8.png)

<span data-ttu-id="33fab-265">La demande</span><span class="sxs-lookup"><span data-stu-id="33fab-265">The request</span></span>   
`http://localhost/MvcBM_time/bundles/AllMyScripts?v=r0sLDicvP58AIXN_mc3QdyVvVj5euZNzdsa2N1PKvb81`  
 <span data-ttu-id="33fab-266">est pour le regroupement **AllMyScripts** et contient une paire de chaîne de requête **v = r0sLDicvP58AIXN\\\_mc3QdyVvVj5euZNzdsa2N1PKvb81**.</span><span class="sxs-lookup"><span data-stu-id="33fab-266">is for the bundle **AllMyScripts** and contains a query string pair **v=r0sLDicvP58AIXN\\\_mc3QdyVvVj5euZNzdsa2N1PKvb81**.</span></span> <span data-ttu-id="33fab-267">La chaîne de requête **v** a la valeur de jeton qui est un identificateur unique utilisé pour la mise en cache.</span><span class="sxs-lookup"><span data-stu-id="33fab-267">The query string **v** has a value token that is a unique identifier used for caching.</span></span> <span data-ttu-id="33fab-268">Tant que l’application ne change pas, l’application ASP.NET demande le **AllMyScripts** regrouper à l’aide de ce jeton.</span><span class="sxs-lookup"><span data-stu-id="33fab-268">As long as the bundle doesn't change, the ASP.NET application will request the **AllMyScripts** bundle using this token.</span></span> <span data-ttu-id="33fab-269">Si n’importe quel fichier dans le regroupement change, l’infrastructure d’optimisation ASP.NET génère un nouveau jeton, ce qui garantit que les demandes du navigateur pour le regroupement obtiennent le dernier groupe.</span><span class="sxs-lookup"><span data-stu-id="33fab-269">If any file in the bundle changes, the ASP.NET optimization framework will generate a new token, guaranteeing that browser requests for the bundle will get the latest bundle.</span></span>

<span data-ttu-id="33fab-270">Si vous exécutez les outils de développement F12 d’Internet Explorer 9 et que vous accédez à une page précédemment chargée, IE incorrectement montre les demandes GET conditionnelles apportées à chaque groupe et le serveur de renvoi HTTP 304.</span><span class="sxs-lookup"><span data-stu-id="33fab-270">If you run the IE9 F12 developer tools and navigate to a previously loaded page, IE incorrectly shows conditional GET requests made to each bundle and the server returning HTTP 304.</span></span> <span data-ttu-id="33fab-271">Vous pouvez lire Pourquoi Internet Explorer 9 a des problèmes de détermination si une demande conditionnelle a été effectuée dans le billet de blog [à l’aide de CDN et Expires pour améliorer les performances de Site Web](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span><span class="sxs-lookup"><span data-stu-id="33fab-271">You can read why IE9 has problems determining if a conditional request was made in the blog entry [Using CDNs and Expires to Improve Web Site Performance](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span></span>

## <a name="less-coffeescript-scss-sass-bundling"></a><span data-ttu-id="33fab-272">MOINS, CoffeeScript, SCSS, Sass de regroupement.</span><span class="sxs-lookup"><span data-stu-id="33fab-272">LESS, CoffeeScript, SCSS, Sass Bundling.</span></span>

<span data-ttu-id="33fab-273">L’infrastructure de regroupement et minimisation fournit un mécanisme permettant de traiter les langages intermédiaires telle que [SCSS](http://sass-lang.com/), [Sass](http://sass-lang.com/), [moins](http://www.dotlesscss.org/) ou [Coffeescript ](http://coffeescript.org/)et appliquer des transformations telles que la minimisation à l’offre groupée qui en résulte.</span><span class="sxs-lookup"><span data-stu-id="33fab-273">The bundling and minification framework provides a mechanism to process intermediate languages such as [SCSS](http://sass-lang.com/), [Sass](http://sass-lang.com/), [LESS](http://www.dotlesscss.org/) or [Coffeescript](http://coffeescript.org/), and apply transforms such as minification to the resulting bundle.</span></span> <span data-ttu-id="33fab-274">Par exemple, pour ajouter [.less](http://www.dotlesscss.org/) fichiers à votre projet MVC 4 :</span><span class="sxs-lookup"><span data-stu-id="33fab-274">For example, to add [.less](http://www.dotlesscss.org/) files to your MVC 4 project:</span></span>

1. <span data-ttu-id="33fab-275">Créez un dossier pour moins de votre contenu.</span><span class="sxs-lookup"><span data-stu-id="33fab-275">Create a folder for your LESS content.</span></span> <span data-ttu-id="33fab-276">L’exemple suivant utilise le *contenu\\MyLess* dossier.</span><span class="sxs-lookup"><span data-stu-id="33fab-276">The following example uses the *Content\\MyLess* folder.</span></span>
2. <span data-ttu-id="33fab-277">Ajouter le [.less](http://www.dotlesscss.org/) package NuGet **sans point** à votre projet.</span><span class="sxs-lookup"><span data-stu-id="33fab-277">Add the [.less](http://www.dotlesscss.org/) NuGet package **dotless** to your project.</span></span>  
    <span data-ttu-id="33fab-278">![Installation de NuGet sans point](bundling-and-minification/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="33fab-278">![NuGet dotless install](bundling-and-minification/_static/image9.png)</span></span>
3. <span data-ttu-id="33fab-279">Ajouter une classe qui implémente le [IBundleTransform](https://msdn.microsoft.com/library/system.web.optimization.ibundletransform(VS.110).aspx) interface.</span><span class="sxs-lookup"><span data-stu-id="33fab-279">Add a class that implements the [IBundleTransform](https://msdn.microsoft.com/library/system.web.optimization.ibundletransform(VS.110).aspx) interface.</span></span> <span data-ttu-id="33fab-280">Pour la transformation .less, ajoutez le code suivant à votre projet.</span><span class="sxs-lookup"><span data-stu-id="33fab-280">For the .less transform, add the following code to your project.</span></span>

    [!code-csharp[Main](bundling-and-minification/samples/sample13.cs)]
4. <span data-ttu-id="33fab-281">Créer un groupe de fichiers LESS avec le `LessTransform` et [CssMinify](https://msdn.microsoft.com/library/system.web.optimization.cssminify(VS.110).aspx) transformer.</span><span class="sxs-lookup"><span data-stu-id="33fab-281">Create a bundle of LESS files with the `LessTransform` and the [CssMinify](https://msdn.microsoft.com/library/system.web.optimization.cssminify(VS.110).aspx) transform.</span></span> <span data-ttu-id="33fab-282">Ajoutez le code suivant à la `RegisterBundles` méthode dans le *application\\_démarrer\\BundleConfig.cs* fichier.</span><span class="sxs-lookup"><span data-stu-id="33fab-282">Add the following code to the `RegisterBundles` method in the *App\\_Start\\BundleConfig.cs* file.</span></span>

    [!code-csharp[Main](bundling-and-minification/samples/sample14.cs)]
5. <span data-ttu-id="33fab-283">Ajoutez le code suivant à toutes les vues qui fait référence à l’offre moins.</span><span class="sxs-lookup"><span data-stu-id="33fab-283">Add the following code to any views which references the LESS bundle.</span></span>

    [!code-cshtml[Main](bundling-and-minification/samples/sample15.cshtml)]

## <a name="bundle-considerations"></a><span data-ttu-id="33fab-284">Considérations d’offre groupée</span><span class="sxs-lookup"><span data-stu-id="33fab-284">Bundle Considerations</span></span>

<span data-ttu-id="33fab-285">Une bonne convention à suivre lors de la création d’offres groupées consiste à inclure « regrouper » en tant que préfixe dans le nom du bundle.</span><span class="sxs-lookup"><span data-stu-id="33fab-285">A good convention to follow when creating bundles is to include "bundle" as a prefix in the bundle name.</span></span> <span data-ttu-id="33fab-286">Cela empêche un éventuel [conflit de routage](https://forums.asp.net/post/5012037.aspx).</span><span class="sxs-lookup"><span data-stu-id="33fab-286">This will prevent a possible [routing conflict](https://forums.asp.net/post/5012037.aspx).</span></span>

<span data-ttu-id="33fab-287">Une fois que vous mettez à jour un fichier dans un groupe, un nouveau jeton est généré pour le paramètre de chaîne de requête de regroupement et la prochaine fois qu’un client demande une page contenant l’ensemble doit être téléchargée à l’offre complète.</span><span class="sxs-lookup"><span data-stu-id="33fab-287">Once you update one file in a bundle, a new token is generated for the bundle query string parameter and the full bundle must be downloaded the next time a client requests a page containing the bundle.</span></span> <span data-ttu-id="33fab-288">Dans le balisage traditionnel où chaque élément multimédia est répertorié individuellement, uniquement le fichier modifié serait être téléchargé.</span><span class="sxs-lookup"><span data-stu-id="33fab-288">In traditional markup where each asset is listed individually, only the changed file would be downloaded.</span></span> <span data-ttu-id="33fab-289">Actifs qui changent fréquemment ne peuvent pas être de bons candidats pour le regroupement.</span><span class="sxs-lookup"><span data-stu-id="33fab-289">Assets that change frequently may not be good candidates for bundling.</span></span>

<span data-ttu-id="33fab-290">Regroupement et minimisation principalement améliorent la première fois de charge de demande de page.</span><span class="sxs-lookup"><span data-stu-id="33fab-290">Bundling and minification primarily improve the first page request load time.</span></span> <span data-ttu-id="33fab-291">Une fois qu’une page Web a été demandée, le navigateur met en cache les ressources (JavaScript, CSS et images) afin de regroupement et minimisation ne fournissent toute amélioration des performances lors de la demande de la même page, ou les pages sur le même site demande les mêmes ressources.</span><span class="sxs-lookup"><span data-stu-id="33fab-291">Once a webpage has been requested, the browser caches the assets (JavaScript, CSS and images) so bundling and minification won't provide any performance boost when requesting the same page, or pages on the same site requesting the same assets.</span></span> <span data-ttu-id="33fab-292">Si vous ne définissez pas l’expiration en-tête correctement sur vos ressources et vous n’utilisez pas le regroupement et minimisation, les heuristiques de fraîcheur navigateurs marquera les ressources obsolètes après quelques jours et le navigateur requiert une demande de validation pour chaque élément multimédia.</span><span class="sxs-lookup"><span data-stu-id="33fab-292">If you don't set the expires header correctly on your assets, and you don't use bundling and minification, the browsers freshness heuristics will mark the assets stale after a few days and the browser will require a validation request for each asset.</span></span> <span data-ttu-id="33fab-293">Dans ce cas, regroupement et minimisation fournissent une augmentation des performances après la première demande de page.</span><span class="sxs-lookup"><span data-stu-id="33fab-293">In this case, bundling and minification provide a performance increase after the first page request.</span></span> <span data-ttu-id="33fab-294">Pour plus d’informations, consultez le blog [à l’aide de CDN et Expires pour améliorer les performances de Site Web](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span><span class="sxs-lookup"><span data-stu-id="33fab-294">For details, see the blog [Using CDNs and Expires to Improve Web Site Performance](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span></span>

<span data-ttu-id="33fab-295">La limitation de navigateur de six connexions simultanées par chaque nom d’hôte peut être atténuée en utilisant un [CDN](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span><span class="sxs-lookup"><span data-stu-id="33fab-295">The browser limitation of six simultaneous connections per each hostname can be mitigated by using a [CDN](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx).</span></span> <span data-ttu-id="33fab-296">Étant donné que le CDN doit avoir un nom d’hôte différents à votre site d’hébergement, les demandes de ressource à partir du CDN ne seront pas décomptés de votre environnement d’hébergement de la limite de connexions simultanées six.</span><span class="sxs-lookup"><span data-stu-id="33fab-296">Because the CDN will have a different hostname than your hosting site, asset requests from the CDN will not count against the six simultaneous connections limit to your hosting environment.</span></span> <span data-ttu-id="33fab-297">Un CDN peut également fournir une mise en cache du package courants et avantages de la mise en cache.</span><span class="sxs-lookup"><span data-stu-id="33fab-297">A CDN can also provide common package caching and edge caching advantages.</span></span>

<span data-ttu-id="33fab-298">Offres groupées doivent être partitionnées par les pages qui en ont besoin.</span><span class="sxs-lookup"><span data-stu-id="33fab-298">Bundles should be partitioned by pages that need them.</span></span> <span data-ttu-id="33fab-299">Par exemple, le modèle ASP.NET MVC pour une application internet par défaut crée un groupement de Validation jQuery distinct de jQuery.</span><span class="sxs-lookup"><span data-stu-id="33fab-299">For example, the default ASP.NET MVC template for an internet application creates a jQuery Validation bundle separate from jQuery.</span></span> <span data-ttu-id="33fab-300">Étant donné que les affichages par défaut créés ne possèdent aucune entrée et ne validez pas les valeurs, elles n’incluent pas le groupe de validation.</span><span class="sxs-lookup"><span data-stu-id="33fab-300">Because the default views created have no input and do not post values, they don't include the validation bundle.</span></span>

<span data-ttu-id="33fab-301">Le `System.Web.Optimization` espace de noms est implémenté dans *System.Web.Optimization.dll*.</span><span class="sxs-lookup"><span data-stu-id="33fab-301">The `System.Web.Optimization` namespace is implemented in *System.Web.Optimization.dll*.</span></span> <span data-ttu-id="33fab-302">Il tire parti de la bibliothèque WebGrease (*WebGrease.dll*) pour les fonctionnalités de la minimisation, qui à son tour utilise *Antlr3.Runtime.dll*.</span><span class="sxs-lookup"><span data-stu-id="33fab-302">It leverages the WebGrease library (*WebGrease.dll*) for minification capabilities, which in turn uses *Antlr3.Runtime.dll*.</span></span>

<span data-ttu-id="33fab-303">*Utiliser Twitter pour effectuer des publications rapides et de partager des liens. Mon pseudo Twitter est*: [@RickAndMSFT](http://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="33fab-303">*I use Twitter to make quick posts and share links. My Twitter handle is*: [@RickAndMSFT](http://twitter.com/RickAndMSFT)</span></span>

## <a name="additional-resources"></a><span data-ttu-id="33fab-304">Ressources supplémentaires</span><span class="sxs-lookup"><span data-stu-id="33fab-304">Additional resources</span></span>

- <span data-ttu-id="33fab-305">Vidéo :[regroupement et l’optimisation](https://channel9.msdn.com/Events/aspConf/aspConf/Bundling-and-Optimizing) par [Howard Dierking](https://twitter.com/#!/howard_dierking)</span><span class="sxs-lookup"><span data-stu-id="33fab-305">Video:[Bundling and Optimizing](https://channel9.msdn.com/Events/aspConf/aspConf/Bundling-and-Optimizing) by [Howard Dierking](https://twitter.com/#!/howard_dierking)</span></span>
- <span data-ttu-id="33fab-306">[Ajout de l’optimisation du Web à un Site Web Pages](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span><span class="sxs-lookup"><span data-stu-id="33fab-306">[Adding Web Optimization to a Web Pages Site](https://blogs.msdn.com/b/rickandy/archive/2012/08/15/adding-web-optimization-to-a-web-pages-site.aspx).</span></span>
- <span data-ttu-id="33fab-307">[Ajout de regroupement et minimisation à Web Forms](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span><span class="sxs-lookup"><span data-stu-id="33fab-307">[Adding Bundling and Minification to Web Forms](https://blogs.msdn.com/b/rickandy/archive/2012/08/14/adding-bundling-and-minification-to-web-forms.aspx).</span></span>
- <span data-ttu-id="33fab-308">[Impact sur les performances de regroupement et minimisation sur l’exploration de Web](https://blogs.msdn.com/b/henrikn/archive/2012/06/17/performance-implications-of-bundling-and-minification-on-http.aspx) par [Henrik F Nielsen](http://en.wikipedia.org/wiki/Henrik_Frystyk_Nielsen) [@frystyk](https://twitter.com/frystyk)</span><span class="sxs-lookup"><span data-stu-id="33fab-308">[Performance Implications of Bundling and Minification on Web Browsing](https://blogs.msdn.com/b/henrikn/archive/2012/06/17/performance-implications-of-bundling-and-minification-on-http.aspx) by [Henrik F Nielsen](http://en.wikipedia.org/wiki/Henrik_Frystyk_Nielsen) [@frystyk](https://twitter.com/frystyk)</span></span>
- <span data-ttu-id="33fab-309">[À l’aide de CDN et expire pour améliorer les performances de Site Web](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx) par Rick Anderson [@RickAndMSFT](https://twitter.com/#!/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="33fab-309">[Using CDNs and Expires to Improve Web Site Performance](https://blogs.msdn.com/b/rickandy/archive/2011/05/21/using-cdns-to-improve-web-site-performance.aspx) by Rick Anderson [@RickAndMSFT](https://twitter.com/#!/RickAndMSFT)</span></span>
- [<span data-ttu-id="33fab-310">Réduire la durée des boucles (durées de boucles)</span><span class="sxs-lookup"><span data-stu-id="33fab-310">Minimize RTT (round-trip times)</span></span>](https://developers.google.com/speed/docs/best-practices/rtt)

## <a name="contributors"></a><span data-ttu-id="33fab-311">Contributors</span><span class="sxs-lookup"><span data-stu-id="33fab-311">Contributors</span></span>

- <span data-ttu-id="33fab-312">Arts martiaux hao</span><span class="sxs-lookup"><span data-stu-id="33fab-312">Hao Kung</span></span>
- [<span data-ttu-id="33fab-313">Howard Dierking</span><span class="sxs-lookup"><span data-stu-id="33fab-313">Howard Dierking</span></span>](https://twitter.com/#!/howard_dierking)
- <span data-ttu-id="33fab-314">Diana LaRose</span><span class="sxs-lookup"><span data-stu-id="33fab-314">Diana LaRose</span></span>
